[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/27861#pullrequestreview-1503103864), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27861#pullrequestreview-1503219053) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27866](https://github.com/bitcoin/bitcoin/pull/27866) (blockstorage: Return on fatal flush errors by TheCharlatan)\n* [#27850](https://github.com/bitcoin/bitcoin/pull/27850) (test: Add unit & functional test coverage for blockstore by pinheadmz)\n* [#27823](https://github.com/bitcoin/bitcoin/pull/27823) (init: return error when block index is non-contiguous, fix feature_init.py file perturbation by mzumsande)\n* [#27746](https://github.com/bitcoin/bitcoin/pull/27746) (Rework validation logic for assumeutxo by sdaftuar)\n* [#27460](https://github.com/bitcoin/bitcoin/pull/27460) (rpc: Add importmempool RPC by MarcoFalke)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n* [#26762](https://github.com/bitcoin/bitcoin/pull/26762) (Make `CCheckQueue` RAII-styled by hebasto)\n* [#26045](https://github.com/bitcoin/bitcoin/pull/26045) (rpc: Optimize serialization disk space of dumptxoutset by aureleoules)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-06-12T13:16:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1587326903",
      "id" : 1587326903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585enK-3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587326903/reactions"
      },
      "updated_at" : "2023-06-30T21:28:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587326903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226706890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226706890"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (3ce961f38df80843d01190589146088906819ea3)\r\n\r\nDoesn't look like any optional objects are used here so probably not necessary to add",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T13:53:59Z",
      "diff_hunk" : "@@ -9,16 +9,15 @@\n #include <config/bitcoin-config.h>\n #endif\n \n+#include <kernel/context.h>\n #include <logging.h>\n #include <node/interface_ui.h>\n-#include <util/tokenpipe.h>\n+#include <util/check.h>\n+#include <util/signalinterrupt.h>\n #include <warnings.h>\n \n #include <assert.h>\n-#include <atomic>\n-#ifdef WIN32\n-#include <condition_variable>\n-#endif\n+#include <optional>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226706890",
      "id" : 1226706890,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JHg_K",
      "original_commit_id" : "3ce961f38df80843d01190589146088906819ea3",
      "original_line" : 20,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/shutdown.cpp",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226706890/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226706890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226742797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226742797"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (3ce961f38df80843d01190589146088906819ea3)\r\n\r\nWould suggest replacing \"sleep\" with \"wait\" everywhere in this commit. The original `SignalInterrupt` class from https://github.com/bitcoin/bitcoin/pull/27711#issuecomment-1580779869 had a  `sleep` method to be consistent with `CThreadInterrupt::sleep_for`. But now that the class no longer depends on `CThreadInterrupt`, better to go with post-c++11 terminology and call it `wait`.\r\n\r\nAlso would suggest just calling `m_sleep_mutex` and `m_sleep_cv` variables `m_mutex` and `m_cv`. Adding \"wait\" or \"sleep\" to the name doesn't add real information because mutex and condition variables are generally used to wait for things.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T14:13:03Z",
      "diff_hunk" : "@@ -0,0 +1,51 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SIGNALINTERRUPT_H\n+#define BITCOIN_UTIL_SIGNALINTERRUPT_H\n+\n+#ifdef WIN32\n+#include <condition_variable>\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <atomic>\n+\n+namespace util {\n+/**\n+ * Helper class that allows manages an interrupt flag, and allows a thread or\n+ * signal to interrupt another thread.\n+ *\n+ * This class is safe to be used in a signal handler. If sending an interrupt\n+ * from a signal handler is not neccessary, the more lightweight \\ref\n+ * CThreadInterrupt class can be used instead.\n+ */\n+\n+class SignalInterrupt\n+{\n+public:\n+    SignalInterrupt();\n+    explicit operator bool() const;\n+    void operator()();\n+    void reset();\n+    void sleep();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226742797",
      "id" : 1226742797,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JHpwN",
      "original_commit_id" : "3ce961f38df80843d01190589146088906819ea3",
      "original_line" : 34,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.h",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226742797/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226742797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226757927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226757927"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (3ce961f38df80843d01190589146088906819ea3)\r\n\r\nI think it would be safer to do `m_flag = true` here and not use `memory_order_release`. The previous code was doing `fRequestShutdown = true;` and it would be nice to just keep behavior unchanged in this commit and avoid causing potential bugs.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T14:23:16Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/signalinterrupt.h>\n+\n+#ifdef WIN32\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <ios>\n+#include <optional>\n+\n+namespace util {\n+\n+SignalInterrupt::SignalInterrupt() : m_flag{false}\n+{\n+#ifndef WIN32\n+    std::optional<TokenPipe> pipe = TokenPipe::Make();\n+    if (!pipe) throw std::ios_base::failure(\"Could not create TokenPipe\");\n+    m_pipe_r = pipe->TakeReadEnd();\n+    m_pipe_w = pipe->TakeWriteEnd();\n+#endif\n+}\n+\n+SignalInterrupt::operator bool() const\n+{\n+    return m_flag.load(std::memory_order_acquire);\n+}\n+\n+void SignalInterrupt::reset()\n+{\n+    // Cancel existing interrupt by waiting for it, this will reset condition flags and remove\n+    // the token from the pipe.\n+    if (*this) sleep();\n+    m_flag.store(false, std::memory_order_release);\n+}\n+\n+void SignalInterrupt::operator()()\n+{\n+#ifdef WIN32\n+    std::unique_lock<std::mutex> lk(m_sleep_mutex);\n+    m_flag.store(true, std::memory_order_release);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226757927",
      "id" : 1226757927,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JHtcn",
      "original_commit_id" : "3ce961f38df80843d01190589146088906819ea3",
      "original_line" : 45,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.cpp",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226757927/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226757927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226772621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226772621"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (3ce961f38df80843d01190589146088906819ea3)\r\n\r\nI think it would be safer to `return m_flag` and avoid using `memory_order_acquire`. The previous code was just doing `return fRequestShutdown` which uses a stricter memory ordering.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T14:31:26Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/signalinterrupt.h>\n+\n+#ifdef WIN32\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <ios>\n+#include <optional>\n+\n+namespace util {\n+\n+SignalInterrupt::SignalInterrupt() : m_flag{false}\n+{\n+#ifndef WIN32\n+    std::optional<TokenPipe> pipe = TokenPipe::Make();\n+    if (!pipe) throw std::ios_base::failure(\"Could not create TokenPipe\");\n+    m_pipe_r = pipe->TakeReadEnd();\n+    m_pipe_w = pipe->TakeWriteEnd();\n+#endif\n+}\n+\n+SignalInterrupt::operator bool() const\n+{\n+    return m_flag.load(std::memory_order_acquire);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226772621",
      "id" : 1226772621,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JHxCN",
      "original_commit_id" : "3ce961f38df80843d01190589146088906819ea3",
      "original_line" : 30,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.cpp",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226772621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226772621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226776471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226776471"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (3ce961f38df80843d01190589146088906819ea3)\r\n\r\nPrevious code was `fRequestShutdown = false`, would use `m_flag = false` to avoid changing behavior instead of adding `memory_order_release`",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T14:34:16Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/signalinterrupt.h>\n+\n+#ifdef WIN32\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <ios>\n+#include <optional>\n+\n+namespace util {\n+\n+SignalInterrupt::SignalInterrupt() : m_flag{false}\n+{\n+#ifndef WIN32\n+    std::optional<TokenPipe> pipe = TokenPipe::Make();\n+    if (!pipe) throw std::ios_base::failure(\"Could not create TokenPipe\");\n+    m_pipe_r = pipe->TakeReadEnd();\n+    m_pipe_w = pipe->TakeWriteEnd();\n+#endif\n+}\n+\n+SignalInterrupt::operator bool() const\n+{\n+    return m_flag.load(std::memory_order_acquire);\n+}\n+\n+void SignalInterrupt::reset()\n+{\n+    // Cancel existing interrupt by waiting for it, this will reset condition flags and remove\n+    // the token from the pipe.\n+    if (*this) sleep();\n+    m_flag.store(false, std::memory_order_release);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226776471",
      "id" : 1226776471,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JHx-X",
      "original_commit_id" : "3ce961f38df80843d01190589146088906819ea3",
      "original_line" : 38,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.cpp",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226776471/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226776471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226800991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226800991"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (d60ab3b5099d3a348f3122b5d3207ac12f4a751c)\r\n\r\nThis option is unused so would be good to drop",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T14:50:51Z",
      "diff_hunk" : "@@ -25,6 +26,8 @@ struct BlockManagerOpts {\n     bool fast_prune{false};\n     bool stop_after_block_import{DEFAULT_STOPAFTERBLOCKIMPORT};\n     const fs::path blocks_dir;\n+    Notifications& notifications;\n+    mutable bool interrupt_on_fatal_error{true};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226800991",
      "id" : 1226800991,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JH39f",
      "original_commit_id" : "d60ab3b5099d3a348f3122b5d3207ac12f4a751c",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/blockmanager_opts.h",
      "position" : null,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226800991/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226800991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226847296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226847296"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (d60ab3b5099d3a348f3122b5d3207ac12f4a751c)\r\n\r\nThis is calling `fatalError` and then continuing without returning an error or raising an exception, so I think the new code here is more confusing than the current code (even if strictly speaking it is a refactoring).\r\n\r\nWe could potentially change this code to treat failing flush as a normal error that gets returned to the caller. But I think if we are going to do that, it would be better to do in a separate PR which could receive targeted review without needing reviewers to look at all the other changes here.\r\n\r\nFor this PR, I would suggest doing one of two things:\r\n\r\n1) Adding a `kernel::Notifications::flushError` method and calling `flushError` here instead of a`fatalError`. The current code is making this `AbortNode` call in a different way than other `AbortNode` calls, and it would be confusing for the kernel notification interface to hide differences between errors that are not handled the same. A `flushError` method could have a comment like \"The flush error notification is sent when there is an I/O error saving state in memory to disk. It is recommended that applications treat this a as a fatal error, even though it is technically less severe, and the kernel may do some work after it happens.\"\r\n\r\n2) Reverting the change to this line and keeping the `AbortNode` function for now. This would get most of the work in the PR done, just leaving behind leaving 2 AbortNode calls that can be cleaned up with more care later.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T15:24:52Z",
      "diff_hunk" : "@@ -529,7 +529,7 @@ void BlockManager::FlushUndoFile(int block_file, bool finalize)\n {\n     FlatFilePos undo_pos_old(block_file, m_blockfile_info[block_file].nUndoSize);\n     if (!UndoFileSeq().Flush(undo_pos_old, finalize)) {\n-        AbortNode(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\");\n+        m_opts.notifications.fatalError(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226847296",
      "id" : 1226847296,
      "line" : 532,
      "node_id" : "PRRC_kwDOABII585JIDRA",
      "original_commit_id" : "d60ab3b5099d3a348f3122b5d3207ac12f4a751c",
      "original_line" : 532,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 38,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226847296/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226847296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226848259"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226848259"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (d60ab3b5099d3a348f3122b5d3207ac12f4a751c)\r\n\r\nThis is the other misleading `fatalError` call (see comment above)",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T15:25:37Z",
      "diff_hunk" : "@@ -548,7 +548,7 @@ void BlockManager::FlushBlockFile(bool fFinalize, bool finalize_undo)\n \n     FlatFilePos block_pos_old(m_last_blockfile, m_blockfile_info[m_last_blockfile].nSize);\n     if (!BlockFileSeq().Flush(block_pos_old, fFinalize)) {\n-        AbortNode(\"Flushing block file to disk failed. This is likely the result of an I/O error.\");\n+        m_opts.notifications.fatalError(\"Flushing block file to disk failed. This is likely the result of an I/O error.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226848259",
      "id" : 1226848259,
      "line" : 551,
      "node_id" : "PRRC_kwDOABII585JIDgD",
      "original_commit_id" : "d60ab3b5099d3a348f3122b5d3207ac12f4a751c",
      "original_line" : 551,
      "original_position" : 14,
      "original_start_line" : 551,
      "path" : "src/node/blockstorage.cpp",
      "position" : 47,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226848259/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 550,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226848259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226862636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226862636"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (d60ab3b5099d3a348f3122b5d3207ac12f4a751c)\r\n\r\nNo error is returned after this `fatalError` call, but this looks like a bug not directly related to this PR. Opened #27862 to address it.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T15:36:38Z",
      "diff_hunk" : "@@ -207,7 +207,7 @@ ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSize\n     } else if (snapshot_completion == SnapshotCompletionResult::SUCCESS) {\n         LogPrintf(\"[snapshot] cleaning up unneeded background chainstate, then reinitializing\\n\");\n         if (!chainman.ValidatedSnapshotCleanup()) {\n-            AbortNode(\"Background chainstate cleanup failed unexpectedly.\");\n+            chainman.GetNotifications().fatalError(\"Background chainstate cleanup failed unexpectedly.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226862636",
      "id" : 1226862636,
      "line" : 210,
      "node_id" : "PRRC_kwDOABII585JIHAs",
      "original_commit_id" : "d60ab3b5099d3a348f3122b5d3207ac12f4a751c",
      "original_line" : 210,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/chainstate.cpp",
      "position" : 5,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226862636/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226862636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226869495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226869495"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (d60ab3b5099d3a348f3122b5d3207ac12f4a751c)\r\n\r\nNo error is returned after this `fatalError` call, but this looks like a bug not directly related to this PR. Opened #27862 to address it.",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-12T15:41:51Z",
      "diff_hunk" : "@@ -5664,7 +5663,7 @@ void Chainstate::InvalidateCoinsDBOnDisk()\n \n         LogPrintf(\"%s: error renaming file '%s' -> '%s': %s\\n\",\n                 __func__, src_str, dest_str, e.what());\n-        AbortNode(strprintf(\n+        m_chainman.GetNotifications().fatalError(strprintf(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226869495",
      "id" : 1226869495,
      "line" : 5659,
      "node_id" : "PRRC_kwDOABII585JIIr3",
      "original_commit_id" : "d60ab3b5099d3a348f3122b5d3207ac12f4a751c",
      "original_line" : 5659,
      "original_position" : 131,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 267,
      "pull_request_review_id" : 1474986679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226869495/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-12T17:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226869495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The only thing I think really should be addressed is the two BlockManager::Flush calls aborting without returning errors.\r\n\r\nI was about to open a separate PR from this branch here:  https://github.com/TheCharlatan/bitcoin/tree/kernelReturnOnAbort . I think this should go in a separate PR for ease of review. I'll also provide a list of all the other non-immediate returns that should be fine to do. ",
      "created_at" : "2023-06-12T17:24:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1587753463",
      "id" : 1587753463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585eozH3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587753463/reactions"
      },
      "updated_at" : "2023-06-12T17:24:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587753463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > The only thing I think really should be addressed is the two BlockManager::Flush calls aborting without returning errors.\r\n> \r\n> I was about to open a separate PR from this branch here: https://github.com/TheCharlatan/bitcoin/tree/kernelReturnOnAbort\r\n\r\nGreat! I also opened #27862 earlier which overlaps with the branch a little. I think between the branch and PR all the cases where errors are not currently returned are covered.",
      "created_at" : "2023-06-12T18:35:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1587870978",
      "id" : 1587870978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585epP0C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587870978/reactions"
      },
      "updated_at" : "2023-06-12T18:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1587870978",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased d60ab3b5099d3a348f3122b5d3207ac12f4a751c -> 3e60c02ef3759e16a762bd193e0b9291bf46b73c ([kernelInterrupt_0](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_0) -> [kernelInterrupt_1](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_0..kernelInterrupt_1)).\r\n* Added `src/node/abort.*` to allow both the notification code and `index/base.cpp` to use a common abort definition as introduced in https://github.com/bitcoin/bitcoin/commit/3c06926cf21dcca3074ef51506f556b2286c299b\r\n* De-globalized the `exit_status` in `shutdown.*`. My current approach touches quite a few lines though and seems a bit unclean, suggestions for alternative approaches are appreciated.\r\n\r\nUpdated 3e60c02ef3759e16a762bd193e0b9291bf46b73c -> 39d9b5144410c15385ee48bc886e0dea36f34b6a ([kernelInterrupt_1](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_1) -> [kernelInterrupt_2](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_1..kernelInterrupt_2)).\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226706890), cleaning up includes.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226742797), renaming sleep to wait.\r\n* Addressed @ryanofsky's comments ([1](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226757927), [2](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226772621), [3](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226776471)), avoiding behavior changes around atomic memory acquisition and release.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226800991), removing a field that was accidentally carried over from the parent PR.\r\n\r\n",
      "created_at" : "2023-06-13T11:03:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589076014",
      "id" : 1589076014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585et2Au",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589076014/reactions"
      },
      "updated_at" : "2023-06-13T11:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589076014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1228439282"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1228439282"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (39d9b5144410c15385ee48bc886e0dea36f34b6a)\r\n\r\nWould suggest reverting all the calls to `FatalErrorf` this commit and just making `FatalErrorf` a member function to minimize the diff and avoid adding lots of new context accesses. Then the only src/index/ changes that would be needed would be:\r\n\r\n```diff\r\n--- a/src/index/base.cpp\r\n+++ b/src/index/base.cpp\r\n@@ -8,6 +8,7 @@\r\n #include <interfaces/chain.h>\r\n #include <kernel/chain.h>\r\n #include <logging.h>\r\n+#include <node/abort.h>\r\n #include <node/blockstorage.h>\r\n #include <node/context.h>\r\n #include <node/database_args.h>\r\n@@ -31,9 +32,10 @@ constexpr auto SYNC_LOG_INTERVAL{30s};\r\n constexpr auto SYNC_LOCATOR_WRITE_INTERVAL{30s};\r\n \r\n template <typename... Args>\r\n-static void FatalErrorf(const char* fmt, const Args&... args)\r\n+void BaseIndex::FatalErrorf(const char* fmt, const Args&... args)\r\n {\r\n-    AbortNode(tfm::format(fmt, args...));\r\n+    auto message = tfm::format(fmt, args...);\r\n+    node::AbortNode(m_chain->context()->exit_status, message);\r\n }\r\n \r\n CBlockLocator GetLocator(interfaces::Chain& chain, const uint256& block_hash)\r\ndiff --git a/src/index/base.h b/src/index/base.h\r\nindex 231f36b60538..8affee90f862 100644\r\n--- a/src/index/base.h\r\n+++ b/src/index/base.h\r\n@@ -94,6 +94,9 @@ private:\r\n \r\n     virtual bool AllowPrune() const = 0;\r\n \r\n+    template <typename... Args>\r\n+    void FatalErrorf(const char* fmt, const Args&... args);\r\n+\r\n protected:\r\n     std::unique_ptr<interfaces::Chain> m_chain;\r\n     Chainstate* m_chainstate{nullptr};\r\n```\r\n\r\n",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-13T16:57:31Z",
      "diff_hunk" : "@@ -199,7 +201,7 @@ void BaseIndex::ThreadSync()\n                     break;\n                 }\n                 if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n-                    FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\",\n+                    FatalErrorf(m_chain->context()->exit_status, \"%s: Failed to rewind index %s to a previous chain tip\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1228439282",
      "id" : 1228439282,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JOH7y",
      "original_commit_id" : "39d9b5144410c15385ee48bc886e0dea36f34b6a",
      "original_line" : 204,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1477669211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1228439282/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-13T17:17:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1228439282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589076014\r\n\r\n> * De-globalized the `exit_status` in `shutdown.*`. My current approach touches quite a few lines though and seems a bit unclean, suggestions for alternative approaches are appreciated.\r\n\r\nI'm actually not sure what this is referring to. `exit_status` is not referenced in `shutdown.cpp` at all after this PR: https://github.com/TheCharlatan/bitcoin/blob/39d9b5144410c15385ee48bc886e0dea36f34b6a/src/shutdown.cpp.\r\n\r\nAlso, after this PR `shutdown.cpp` is just a thin wrapper around the `kernel::Context::interrupt` object, so we could pretty easily delete `shutdown.cpp` entirely and update callers to use the object directly. ",
      "created_at" : "2023-06-13T17:27:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589734220",
      "id" : 1589734220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585ewWtM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589734220/reactions"
      },
      "updated_at" : "2023-06-13T17:27:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589734220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27861#pullrequestreview-1477669211\r\n\r\n> and I still think it is inappropriate to treat flush errors as fatal errors, and would prefer to add a separate flush error method (https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226847296), but I won't get hung up on this.\r\n\r\nACK, I'll revert to using `AbortNode` then for now, that should keep any potential churn minimal. Once https://github.com/bitcoin/bitcoin/pull/27866 has received sufficient review, we can always decide to add special cases (e.g. flush error notifications) afterwards.",
      "created_at" : "2023-06-13T18:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589833222",
      "id" : 1589833222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585ewu4G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589833222/reactions"
      },
      "updated_at" : "2023-06-13T18:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589833222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589833222\r\n\r\n> ACK, I'll revert to using `AbortNode` then for now, that should keep any potential churn minimal. Once #27866 has received sufficient review, we can always decide to add special cases (e.g. flush error notifications) afterwards.\r\n\r\nUgh, just noticed this gets annoying with the exit status - we probably don't want to introduce that in the blockstorage scope. Leaving as is then :/.",
      "created_at" : "2023-06-13T19:01:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589867124",
      "id" : 1589867124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585ew3J0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589867124/reactions"
      },
      "updated_at" : "2023-06-13T19:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589867124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 39d9b5144410c15385ee48bc886e0dea36f34b6a -> 315915b43082a4c43bec3ba8e826abc7280b6cbc ([kernelInterrupt_2](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_2) -> [kernelInterrupt_3](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_2..kernelInterrupt_3)).\r\n* Adopted @ryanofsky's [suggestion](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1228439282), making `FatalErrorf` a member function.",
      "created_at" : "2023-06-13T20:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1589979443",
      "id" : 1589979443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585exSkz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589979443/reactions"
      },
      "updated_at" : "2023-06-13T20:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1589979443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231072969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231072969"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8af687bc442c8b7ba9360fb9a961b374f41d0c59:\r\n\r\nIs it required?",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-15T14:05:38Z",
      "diff_hunk" : "@@ -974,11 +977,13 @@ libbitcoinkernel_la_SOURCES = \\\n   util/moneystr.cpp \\\n   util/rbf.cpp \\\n   util/serfloat.cpp \\\n+  util/signalinterrupt.cpp \\\n   util/strencodings.cpp \\\n   util/string.cpp \\\n   util/syscall_sandbox.cpp \\\n   util/syserror.cpp \\\n   util/thread.cpp \\\n+  util/threadinterrupt.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231072969",
      "id" : 1231072969,
      "line" : 986,
      "node_id" : "PRRC_kwDOABII585JYK7J",
      "original_commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "original_line" : 986,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 50,
      "pull_request_review_id" : 1481671213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231072969/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-15T14:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231072969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231090091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231090091"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe make the whole comment Doxygen compatible?",
      "commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "created_at" : "2023-06-15T14:17:54Z",
      "diff_hunk" : "@@ -16,6 +16,11 @@\n     A helper class for interruptible sleeps. Calling operator() will interrupt\n     any current sleep, and after that point operator bool() will return true\n     until reset.\n+\n+    This class should not be used in a signal handler. If sending an interrupt\n+    from a signal handler is neccessary, the \\ref SignalInterrupt class can be\n+    used instead.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231090091",
      "id" : 1231090091,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII585JYPGr",
      "original_commit_id" : "315915b43082a4c43bec3ba8e826abc7280b6cbc",
      "original_line" : 23,
      "original_position" : 8,
      "original_start_line" : 19,
      "path" : "src/util/threadinterrupt.h",
      "position" : 8,
      "pull_request_review_id" : 1481697753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231090091/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 19,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-15T14:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1231090091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-06-15T14:40:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1593198390",
      "id" : 1593198390,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585e9kc2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593198390/reactions"
      },
      "updated_at" : "2023-06-15T14:40:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593198390",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27861#pullrequestreview-1477669211\r\n\r\n> and I still think it is inappropriate to treat flush errors as fatal errors, and would prefer to add a separate flush error method (https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1226847296)\r\n\r\nJust to ensure I am understanding you here, would the `node::KernelNotifications` for this extra notification match the implementation of the `fatalError` method for now (and later be adapted as needed), or do you want it to just log?",
      "created_at" : "2023-06-15T19:36:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1593617309",
      "id" : 1593617309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585e_Kud",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593617309/reactions"
      },
      "updated_at" : "2023-06-15T19:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593617309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> would the `node::KernelNotifications` for this extra notification match the implementation of the `fatalError` method for now (and later be adapted as needed), or do you want it to just log?\r\n\r\nIt should definitely call AbortNode and not change current behavior. The point of the suggestion is send fatal error notiifications in a consistent way and not introduce misleading code that says an error will be returned separately when it won't be.",
      "created_at" : "2023-06-15T20:38:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1593694975",
      "id" : 1593694975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585e_dr_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593694975/reactions"
      },
      "updated_at" : "2023-06-15T20:38:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593694975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for bearing with me @ryanofsky and the review @hebasto,\r\n\r\nUpdated 315915b43082a4c43bec3ba8e826abc7280b6cbc -> 8654e835dd12a96b98eb554da48e342270e7279b ([kernelInterrupt_3](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_3) -> [kernelInterrupt_4](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_3..kernelInterrupt_4)).\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231072969), removing source file included by accident in makefile sources list.\r\n* Addressed @hebasto's [comment](https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1231090091), improving documentation formatting.\r\n* Adopted @ryanofsky's [suggestions](https://github.com/bitcoin/bitcoin/pull/27861#pullrequestreview-1482367554), added a commit for separate notification handling of fatal flush errors.\r\n\r\nRebased 8654e835dd12a96b98eb554da48e342270e7279b -> 5155ce6114e199545a6ebdc77425dedc20233610 ([kernelInterrupt_4](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_4) -> [kernelInterrupt_5](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_4..kernelInterrupt_5)).\r\n* Hopefully this fixes the CI failure.\r\n",
      "created_at" : "2023-06-15T21:36:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1593753963",
      "id" : 1593753963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585e_sFr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593753963/reactions"
      },
      "updated_at" : "2023-06-15T21:36:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1593753963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473034"
         }
      },
      "author_association" : "NONE",
      "body" : "`Helper class that [allows] [manages] an interrupt flag`\r\nWas this meant to be `Helper class that manages an interrupt flag`?",
      "commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "created_at" : "2023-06-19T02:56:21Z",
      "diff_hunk" : "@@ -0,0 +1,52 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SIGNALINTERRUPT_H\n+#define BITCOIN_UTIL_SIGNALINTERRUPT_H\n+\n+#ifdef WIN32\n+#include <condition_variable>\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <atomic>\n+#include <cstdlib>\n+\n+namespace util {\n+/**\n+ * Helper class that allows manages an interrupt flag, and allows a thread or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473034",
      "id" : 1233473034,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII585JhU4K",
      "original_commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.h",
      "position" : 20,
      "pull_request_review_id" : 1485327353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473034/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-19T02:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11140095?v=4",
         "events_url" : "https://api.github.com/users/evansmj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evansmj/followers",
         "following_url" : "https://api.github.com/users/evansmj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evansmj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evansmj",
         "id" : 11140095,
         "login" : "evansmj",
         "node_id" : "MDQ6VXNlcjExMTQwMDk1",
         "organizations_url" : "https://api.github.com/users/evansmj/orgs",
         "received_events_url" : "https://api.github.com/users/evansmj/received_events",
         "repos_url" : "https://api.github.com/users/evansmj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evansmj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evansmj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evansmj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473510"
         }
      },
      "author_association" : "NONE",
      "body" : "`neccessary` can be updated to `necessary`",
      "commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "created_at" : "2023-06-19T02:57:24Z",
      "diff_hunk" : "@@ -0,0 +1,52 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SIGNALINTERRUPT_H\n+#define BITCOIN_UTIL_SIGNALINTERRUPT_H\n+\n+#ifdef WIN32\n+#include <condition_variable>\n+#include <mutex>\n+#else\n+#include <util/tokenpipe.h>\n+#endif\n+\n+#include <atomic>\n+#include <cstdlib>\n+\n+namespace util {\n+/**\n+ * Helper class that allows manages an interrupt flag, and allows a thread or\n+ * signal to interrupt another thread.\n+ *\n+ * This class is safe to be used in a signal handler. If sending an interrupt\n+ * from a signal handler is not neccessary, the more lightweight \\ref",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473510",
      "id" : 1233473510,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII585JhU_m",
      "original_commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/util/signalinterrupt.h",
      "position" : 24,
      "pull_request_review_id" : 1485327353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473510/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-19T02:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11140095?v=4",
         "events_url" : "https://api.github.com/users/evansmj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evansmj/followers",
         "following_url" : "https://api.github.com/users/evansmj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evansmj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evansmj",
         "id" : 11140095,
         "login" : "evansmj",
         "node_id" : "MDQ6VXNlcjExMTQwMDk1",
         "organizations_url" : "https://api.github.com/users/evansmj/orgs",
         "received_events_url" : "https://api.github.com/users/evansmj/received_events",
         "repos_url" : "https://api.github.com/users/evansmj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evansmj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evansmj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evansmj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473794"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473794"
         }
      },
      "author_association" : "NONE",
      "body" : "`necessary`",
      "commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "created_at" : "2023-06-19T02:58:14Z",
      "diff_hunk" : "@@ -12,11 +12,18 @@\n #include <chrono>\n #include <condition_variable>\n \n-/*\n-    A helper class for interruptible sleeps. Calling operator() will interrupt\n-    any current sleep, and after that point operator bool() will return true\n-    until reset.\n-*/\n+/**\n+ * A helper class for interruptible sleeps. Calling operator() will interrupt\n+ * any current sleep, and after that point operator bool() will return true\n+ * until reset.\n+ *\n+ * This class should not be used in a signal handler. If sending an interrupt\n+ * from a signal handler is neccessary, the \\ref SignalInterrupt class can be",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1233473794",
      "id" : 1233473794,
      "line" : 21,
      "node_id" : "PRRC_kwDOABII585JhVEC",
      "original_commit_id" : "5155ce6114e199545a6ebdc77425dedc20233610",
      "original_line" : 21,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/util/threadinterrupt.h",
      "position" : 15,
      "pull_request_review_id" : 1485327353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473794/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-19T02:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1233473794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11140095?v=4",
         "events_url" : "https://api.github.com/users/evansmj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evansmj/followers",
         "following_url" : "https://api.github.com/users/evansmj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evansmj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evansmj",
         "id" : 11140095,
         "login" : "evansmj",
         "node_id" : "MDQ6VXNlcjExMTQwMDk1",
         "organizations_url" : "https://api.github.com/users/evansmj/orgs",
         "received_events_url" : "https://api.github.com/users/evansmj/received_events",
         "repos_url" : "https://api.github.com/users/evansmj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evansmj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evansmj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evansmj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 5155ce6114e199545a6ebdc77425dedc20233610 -> e0653c2223f8d6d74645c9b5742de1c069d8c3a7 ([kernelInterrupt_5](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_5) -> [kernelInterrupt_6](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_5..kernelInterrupt_6)).\r\n* Fixed typos as suggested by @evansmj ",
      "created_at" : "2023-06-19T09:40:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1596853176",
      "id" : 1596853176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585fLgu4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1596853176/reactions"
      },
      "updated_at" : "2023-06-19T09:40:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1596853176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235751898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235751898"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (f6cbafb31f36da2e003fa75a31207cd11b8c23ef)\r\n\r\nMaybe say \"Interrupt object\" instead of \"Interrupt functionality\" because the comment is supposed to be documenting a struct member.",
      "commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "created_at" : "2023-06-20T19:45:44Z",
      "diff_hunk" : "@@ -16,12 +18,24 @@ namespace kernel {\n //! State stored directly in this struct should be simple. More complex state\n //! should be stored to std::unique_ptr members pointing to opaque types.\n struct Context {\n+    //! Interrupt functionality that can be used to stop long-running kernel operations.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235751898",
      "id" : 1235751898,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JqBPa",
      "original_commit_id" : "f6cbafb31f36da2e003fa75a31207cd11b8c23ef",
      "original_line" : 21,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/kernel/context.h",
      "position" : null,
      "pull_request_review_id" : 1488905831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235751898/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-22T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235751898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235762037"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235762037"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add SignalInterrupt class and use in shutdown.cpp\" (f6cbafb31f36da2e003fa75a31207cd11b8c23ef)\r\n\r\nI don't know how helpful that git commit message is, and probably be better not to link to a github url if there can be a more direct explanation.\r\n\r\nI'm actually not sure what question the link is trying to answer, but if more explanation is needed here, I think this comment can just say that thread interrupt class shouldn't be called from a signal handler because it uses thread synchronization primitives that aren't safe to use with signals (see https://man7.org/linux/man-pages/man7/signal-safety.7.html)",
      "commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "created_at" : "2023-06-20T19:55:54Z",
      "diff_hunk" : "@@ -12,11 +12,18 @@\n #include <chrono>\n #include <condition_variable>\n \n-/*\n-    A helper class for interruptible sleeps. Calling operator() will interrupt\n-    any current sleep, and after that point operator bool() will return true\n-    until reset.\n-*/\n+/**\n+ * A helper class for interruptible sleeps. Calling operator() will interrupt\n+ * any current sleep, and after that point operator bool() will return true\n+ * until reset.\n+ *\n+ * This class should not be used in a signal handler. If sending an interrupt\n+ * from a signal handler is necessary, the \\ref SignalInterrupt class can be\n+ * used instead. See the commit message of\n+ * https://github.com/bitcoin/bitcoin/commit/cd03513dc2fcccaa142e9632a28b38efd0056436",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235762037",
      "id" : 1235762037,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JqDt1",
      "original_commit_id" : "f6cbafb31f36da2e003fa75a31207cd11b8c23ef",
      "original_line" : 23,
      "original_position" : 17,
      "original_start_line" : 22,
      "path" : "src/util/threadinterrupt.h",
      "position" : null,
      "pull_request_review_id" : 1488905831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235762037/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-22T19:13:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235762037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235776831"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235776831"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add flushError method to notifications\" (6318b09ab123fdcdec8ee46ce28f01a2d7c2dce3)\r\n\r\nWould replace \"Functions notifying about this error may not return an error code or raise an exception.\" because its unclear what functions that is refers to and it doesn't suggest how a kernel application should handle a flush error. Would replace it with \"Kernel code ignores flush errors that don't affect the immediate operation it is trying to perform. Applications can choose to handle the flush error notification by logging the error, or notifying the user, or triggering an early shutdown as a precaution against causing more errors.\"",
      "commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "created_at" : "2023-06-20T20:09:22Z",
      "diff_hunk" : "@@ -27,6 +27,11 @@ class Notifications\n     virtual void headerTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\n     virtual void progress(const bilingual_str& title, int progress_percent, bool resume_possible) {}\n     virtual void warning(const bilingual_str& warning) {}\n+\n+    //! The flush error notification is sent to notify the user that an error\n+    //! occurred while flushing block data to disk. Functions notifying about\n+    //! this error may not return an error code or raise an exception.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1235776831",
      "id" : 1235776831,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585JqHU_",
      "original_commit_id" : "6318b09ab123fdcdec8ee46ce28f01a2d7c2dce3",
      "original_line" : 33,
      "original_position" : 7,
      "original_start_line" : 32,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1488905831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235776831/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-22T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1235776831",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1238739345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1238739345"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Add fatalError method to notifications\" (e0653c2223f8d6d74645c9b5742de1c069d8c3a7)\r\n\r\nMaybe add \"This notification can be used to log the error, or notify the user, trigger an application shutdown to prevent causing more errors.\"",
      "commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "created_at" : "2023-06-22T16:00:47Z",
      "diff_hunk" : "@@ -32,6 +33,12 @@ class Notifications\n     //! occurred while flushing block data to disk. Functions notifying about\n     //! this error may not return an error code or raise an exception.\n     virtual void flushError(const std::string& debug_message) {}\n+\n+    //! The fatal error notification is sent to notify the user and start\n+    //! shutting down if an error happens in kernel code that can't be recovered\n+    //! from. After this notification is sent, whatever function triggered the\n+    //! error should also return an error code or raise an exception.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1238739345",
      "id" : 1238739345,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585J1amR",
      "original_commit_id" : "e0653c2223f8d6d74645c9b5742de1c069d8c3a7",
      "original_line" : 40,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1488905831,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1238739345/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-22T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1238739345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-06-22T18:55:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1603164442",
      "id" : 1603164442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585fjlka",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603164442/reactions"
      },
      "updated_at" : "2023-06-22T18:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1603164442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated e0653c2223f8d6d74645c9b5742de1c069d8c3a7 -> 0c2fd16275ae078e33d71b0c9da8034075998553 ([kernelInterrupt_6](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_6) -> [kernelInterrupt_7](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_6..kernelInterrupt_7)).\r\n* Adjusted and simplified documentation as suggested by @ryanofsky \r\n\r\nRebased 0c2fd16275ae078e33d71b0c9da8034075998553 -> 001acf37dff40688d82c3b1a7ff9ed3901addb33 ([kernelInterrupt_7](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_7) -> [kernelInterrupt_8](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_7..kernelInterrupt_8)).\r\n* Fixed conflicts with https://github.com/bitcoin/bitcoin/pull/27862",
      "created_at" : "2023-06-27T21:43:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1610260838",
      "id" : 1610260838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585f-qFm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1610260838/reactions"
      },
      "updated_at" : "2023-06-27T21:43:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1610260838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 001acf37dff40688d82c3b1a7ff9ed3901addb33 -> 6eb33bd0c21b3e075fbab596351cacafdc947472 ([kernelInterrupt_8](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_8) -> [kernelInterrupt_9](https://github.com/TheCharlatan/bitcoin/commits/kernelInterrupt_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernelInterrupt_8..kernelInterrupt_9)).\r\n* Fixed conflict with #27896",
      "created_at" : "2023-06-28T09:53:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1611113265",
      "id" : 1611113265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585gB6Mx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611113265/reactions"
      },
      "updated_at" : "2023-06-28T09:53:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1611113265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1245218670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1245218670"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would it be more safer to move the assertion to the top of the desctuctor's code?",
      "commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "created_at" : "2023-06-28T13:32:14Z",
      "diff_hunk" : "@@ -26,6 +29,8 @@ Context::Context()\n Context::~Context()\n {\n     ECC_Stop();\n+    assert(g_context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#discussion_r1245218670",
      "id" : 1245218670,
      "line" : 32,
      "node_id" : "PRRC_kwDOABII585KOIdu",
      "original_commit_id" : "6eb33bd0c21b3e075fbab596351cacafdc947472",
      "original_line" : 32,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/kernel/context.cpp",
      "position" : 17,
      "pull_request_review_id" : 1503103864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27861",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1245218670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-28T13:32:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1245218670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If anyone else wants to review: this PR has two acks and is a pure refactoring and I think could be merged if there is another reviewer.",
      "created_at" : "2023-07-06T17:52:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27861#issuecomment-1624092185",
      "id" : 1624092185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27861",
      "node_id" : "IC_kwDOABII585gza4Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1624092185/reactions"
      },
      "updated_at" : "2023-07-06T17:52:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1624092185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
