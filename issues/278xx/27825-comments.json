[
   {
      "author_association" : "MEMBER",
      "body" : "Hah, I [implemented this as a clang-tidy check](https://github.com/theuni/bitcoin-tidy-experiments/blob/main/LogPrintfCheck.cpp) a while back.\r\n\r\nI'll work on getting it hooked up.",
      "created_at" : "2023-06-09T18:03:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1584955466",
      "id" : 1584955466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585eeIBK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1584955466/reactions"
      },
      "updated_at" : "2023-06-09T18:03:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1584955466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Still working on getting the plugin cleaned up, but in the meantime it pointed out what seems to be a buggy case [here](https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L5433). Will PR a trivial fix for that.",
      "created_at" : "2023-06-12T20:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1588062158",
      "id" : 1588062158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585ep-fO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1588062158/reactions"
      },
      "updated_at" : "2023-06-12T20:43:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1588062158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That looks more native than the sh or py scripts, excellent!",
      "created_at" : "2023-06-15T05:10:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1592370949",
      "id" : 1592370949,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585e6acF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592370949/reactions"
      },
      "updated_at" : "2023-06-15T05:10:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592370949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just wanted to document this somewhere before I forget...\r\n\r\nI attempted to make an \"ideal\" plugin, which wouldn't require us to hard-code parts of our code, but I ran into a few issues.\r\n\r\n@aaronballman was nice enough to explain the status quo to me on IRC:\r\n\r\n> \\<cfields\\> I'm working on a clang plugin that registers a custom attribute,  and for parsing I'm finding myself copy/pasting several static functions from SemaDeclAttr.cpp (for example checkUInt32Argument).  I'm now needing the equivalent of checkFunctionOrMethodParameterIndex,  but that comes with lots of dependencies.  Is there maybe something I'm missing? Some better supported api for checking attribute arguments from plugins?\r\n> \\<AaronBallman\\> cfields: you're not missing anything, attribute plugin support is relatively recent and so it still has quite a few sharp edges\r\n> \\<cfields\\> AaronBallman: ah,  ok,  that alone is a huge hint.  Thanks :)\r\n> \\<AaronBallman\\> cfields: you're welcome! We definitely could stand to make some of that stuff easier for folks writing plugins.\r\n> \\<cfields\\> AaronBallman: anything I can do to help move it along? I've been waiting quite eager for this functionality so I'd be happy to contribute. .. \r\n> \\<cfields\\> AaronBallman: for reference, my motivation: It would allow our codebase (bitcoin core) to use custom meaningfull annotations (the second parameter of this function must be of a certain subset of something something) as opposed to having plugins that contains hard-coded knowledge of our types/functions/etc.  Imo the former is _far_ more maintainable :)\r\n> \\<AaronBallman\\> cfields: for this, I think it's mostly a matter of figuring out where those functions should live and which ones to expose. They're static to SemaDeclAttr.cpp and they might not all be reasonable to expose more widely (due to weird implementation details like how to index parameters, etc).\r\n\r\n---\r\n\r\nSo I'll just stick with the approach of hard-coding our function names for now.",
      "created_at" : "2023-06-16T18:45:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1595135227",
      "id" : 1595135227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585fE9T7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1595135227/reactions"
      },
      "updated_at" : "2023-06-16T18:45:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1595135227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See [here](https://github.com/theuni/bitcoin-core-clang-plugin/commit/05fb23f21df32df4445951123d281172b12ee61b) for an example of this implemented as a `clang` plugin rather than `clang-tidy`. As noted above, it's pretty rough because LLVM does not yet expose several useful helpers.\r\n\r\nAdvantages:\r\n- We can invent our own attributes, which is way nicer for future-proofing. See [here](https://github.com/theuni/bitcoin-tidy-experiments/pull/1) for an example of the kind of synchronization problems we'll have otherwise.\r\n- Use is a side-effect of typical compilation\r\n\r\nDisadvantages:\r\n- More complicated to write\r\n- Jobs with a static-analysis `clang-tidy` step may be preferred",
      "created_at" : "2023-07-10T19:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1629581578",
      "id" : 1629581578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585hIXEK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1629581578/reactions"
      },
      "updated_at" : "2023-07-10T19:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1629581578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> See https://github.com/theuni/bitcoin-tidy-experiments/pull/1 for an example of the kind of synchronization problems we'll have otherwise.\r\n\r\nWouldn't it be easier to (have an option to) self-sanity-check the match? For example, assert that more than one result was found?",
      "created_at" : "2023-07-11T18:35:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1631312519",
      "id" : 1631312519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585hO9qH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1631312519/reactions"
      },
      "updated_at" : "2023-07-11T18:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1631312519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sure. Now that I think about it, we could just keep|copy the test suite in Core rather than|in addition to the plugin repo.",
      "created_at" : "2023-07-11T22:49:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27825#issuecomment-1631605962",
      "id" : 1631605962,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27825",
      "node_id" : "IC_kwDOABII585hQFTK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1631605962/reactions"
      },
      "updated_at" : "2023-07-11T22:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1631605962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
