[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592869542) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/27892#pullrequestreview-1481271993) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-06-15T07:35:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592519304",
      "id" : 1592519304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27892",
      "node_id" : "IC_kwDOABII585e6-qI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592519304/reactions"
      },
      "updated_at" : "2023-06-15T11:30:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592519304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> LIFETIMEBOUND\r\n\r\nMay give it a try if I have to re-touch.",
      "created_at" : "2023-06-15T11:00:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592831210",
      "id" : 1592831210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27892",
      "node_id" : "IC_kwDOABII585e8Kzq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592831210/reactions"
      },
      "updated_at" : "2023-06-15T11:00:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592831210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It's a pretty trivial change? And if it doesn't work, wouldn't that indicate the change is/may be unsafe and we probably want to rethink this PR?",
      "created_at" : "2023-06-15T11:05:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592839282",
      "id" : 1592839282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27892",
      "node_id" : "IC_kwDOABII585e8Mxy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592839282/reactions"
      },
      "updated_at" : "2023-06-15T11:05:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592839282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nIt [helps](https://github.com/bitcoin/bitcoin/pull/27862#issuecomment-1592843602) in https://github.com/bitcoin/bitcoin/pull/27862.\r\n\r\n> Approach ACK. Perhaps worth annotating both `arg` parameters with `LIFETIMEBOUND`?\r\n\r\n+1",
      "created_at" : "2023-06-15T11:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592869542",
      "id" : 1592869542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27892",
      "node_id" : "IC_kwDOABII585e8UKm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592869542/reactions"
      },
      "updated_at" : "2023-06-15T11:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592869542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It's a pretty trivial change? And if it doesn't work, wouldn't that indicate the change is/may be unsafe and we probably want to rethink this PR?\r\n\r\nIt requires pulling in a new header and using the keyword in the `tinyformat` namespace, which I guess is ok. If the change was unsafe, it would have already been unsafe in master because `T&` is already a lifetime-bound reference. Given that the function is only used in one statement, it should be easier and faster to just check by reading the one line instead of reading the keyword and then thinking about the keyword.\r\n\r\nIf you want, I can change the code to make the helper private to the only statement scope that uses it:\r\n\r\n\r\n```diff\r\ndiff --git a/src/util/translation.h b/src/util/translation.h\r\nindex f66f9de63a..8703741d9e 100644\r\n--- a/src/util/translation.h\r\n+++ b/src/util/translation.h\r\n@@ -49,20 +49,16 @@ inline bilingual_str Untranslated(std::string original) { return {original, orig\r\n \r\n // Provide an overload of tinyformat::format which can take bilingual_str arguments.\r\n namespace tinyformat {\r\n-inline const std::string& TranslateArg(const bilingual_str& arg, bool translated)\r\n-{\r\n-    return translated ? arg.translated : arg.original;\r\n-}\r\n-\r\n-template <typename T>\r\n-const T& TranslateArg(const T& arg, bool translated)\r\n-{\r\n-    return arg;\r\n-}\r\n-\r\n template <typename... Args>\r\n bilingual_str format(const bilingual_str& fmt, const Args&... args)\r\n {\r\n+    constexpr auto TranslateArg{[](const auto& arg, bool translated) {\r\n+        if constexpr (std::is_same_v<decltype(arg), const bilingual_str&>) {\r\n+            return translated ? arg.translated : arg.original;\r\n+        } else {\r\n+            return arg;\r\n+        }\r\n+    }};\r\n     return bilingual_str{format(fmt.original, TranslateArg(args, false)...),\r\n                          format(fmt.translated, TranslateArg(args, true)...)};\r\n }\r\n",
      "created_at" : "2023-06-15T11:30:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27892#issuecomment-1592870189",
      "id" : 1592870189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27892",
      "node_id" : "IC_kwDOABII585e8UUt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592870189/reactions"
      },
      "updated_at" : "2023-06-15T11:54:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1592870189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
