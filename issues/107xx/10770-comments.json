[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10770#discussion_r126248902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10770"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126248902"
         }
      },
      "body" : "Don't you need to invoke `setBreakAction(nullptr)` here when `cancel_possible` is false?\r\n\r\nMaybe better would be to get rid of this `std::function` madness and replace the `SplashScreen::breakAction` pointer with a simpler boolean `std::atomic<bool> m_cancel_possible` which you can just assign directly.",
      "commit_id" : "1d62f6eb35f248ff44aeac39673014bb1c9cbe71",
      "created_at" : "2017-07-07T21:26:02Z",
      "diff_hunk" : "@@ -170,27 +170,28 @@ static void InitMessage(SplashScreen *splash, const std::string &message)\n         Q_ARG(QColor, QColor(55,55,55)));\n }\n \n-static void ShowProgress(SplashScreen *splash, const std::string &title, int nProgress)\n-{\n-    InitMessage(splash, title + strprintf(\"%d\", nProgress) + \"%\");\n-}\n-\n void SplashScreen::setBreakAction(const std::function<void(void)> &action)\n {\n     breakAction = action;\n }\n \n-static void SetProgressBreakAction(SplashScreen *splash, const std::function<void(void)> &action)\n+static void ShowProgress(SplashScreen *splash, const std::string &title, int nProgress, bool cancel_possible)\n {\n-    QMetaObject::invokeMethod(splash, \"setBreakAction\",\n-        Qt::QueuedConnection,\n-        Q_ARG(std::function<void(void)>, action));\n+    InitMessage(splash, title + strprintf(\"%d\", nProgress) + \"%\" +\n+            (cancel_possible ? (std::string(\"\\n\") + _(\"(press q to shutdown and continue later)\"))\n+                                : std::string(\"\")));\n+\n+    if (cancel_possible) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10770#discussion_r126248902",
      "id" : 126248902,
      "original_commit_id" : "26c368a57f90dbfd9575f453935f294e04a0c2d4",
      "original_position" : 24,
      "path" : "src/qt/splashscreen.cpp",
      "position" : null,
      "pull_request_review_id" : 48722158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10770",
      "updated_at" : "2017-07-07T21:36:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126248902",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10770#discussion_r126250056"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10770"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126250056"
         }
      },
      "body" : "Nice.",
      "commit_id" : "1d62f6eb35f248ff44aeac39673014bb1c9cbe71",
      "created_at" : "2017-07-07T21:33:22Z",
      "diff_hunk" : "@@ -170,27 +170,28 @@ static void InitMessage(SplashScreen *splash, const std::string &message)\n         Q_ARG(QColor, QColor(55,55,55)));\n }\n \n-static void ShowProgress(SplashScreen *splash, const std::string &title, int nProgress)\n-{\n-    InitMessage(splash, title + strprintf(\"%d\", nProgress) + \"%\");\n-}\n-\n void SplashScreen::setBreakAction(const std::function<void(void)> &action)\n {\n     breakAction = action;\n }\n \n-static void SetProgressBreakAction(SplashScreen *splash, const std::function<void(void)> &action)\n+static void ShowProgress(SplashScreen *splash, const std::string &title, int nProgress, bool cancel_possible)\n {\n-    QMetaObject::invokeMethod(splash, \"setBreakAction\",\n-        Qt::QueuedConnection,\n-        Q_ARG(std::function<void(void)>, action));\n+    InitMessage(splash, title + strprintf(\"%d\", nProgress) + \"%\" +\n+            (cancel_possible ? (std::string(\"\\n\") + _(\"(press q to shutdown and continue later)\"))\n+                                : std::string(\"\")));\n+\n+    if (cancel_possible) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10770#discussion_r126250056",
      "id" : 126250056,
      "original_commit_id" : "26c368a57f90dbfd9575f453935f294e04a0c2d4",
      "original_position" : 24,
      "path" : "src/qt/splashscreen.cpp",
      "position" : null,
      "pull_request_review_id" : 48723460,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10770",
      "updated_at" : "2017-07-07T21:36:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126250056",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
