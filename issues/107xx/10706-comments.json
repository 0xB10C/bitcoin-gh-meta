[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126309923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126309923"
         }
      },
      "body" : "Gah, I'd really rather keep the old magic value of just 0 means default instead of adding boost::optional (and kinda would prefer to skip boost::option in favor of more descriptive names for m_feerate, too).",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-09T17:02:50Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126309923",
      "id" : 126309923,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : 27,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-09T23:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126309923",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126316958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126316958"
         }
      },
      "body" : "Can you write out more docs here?\r\n\"m_feerate unset uses global paytxfee (if set) otherwise uses smart fee estimation. m_feerate set to 0 ignores global paytxfee and uses smart fee estimation. m_feerate set skips fee estimation but applies minTxFee and maxTxFee\"\r\n\"fOverrideFeeRate overrides all other feerate options (global paytxfee, smart fee estimation, txconfirmtarget, min+maxTxFee, etc) and uses m_feerate\"",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-09T22:18:41Z",
      "diff_hunk" : "@@ -18,14 +21,16 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126316958",
      "id" : 126316958,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 25,
      "path" : "src/wallet/coincontrol.h",
      "position" : 25,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-09T23:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126316958",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126317135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126317135"
         }
      },
      "body" : "This changes the newTxReplaceable option to fWalletRbf instead of true. Maybe leave it the way it was, or was this on purpose?",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-09T22:25:48Z",
      "diff_hunk" : "@@ -667,8 +669,9 @@ bool WalletModel::bumpFee(uint256 hash)\n {\n     std::unique_ptr<CFeeBumper> feeBump;\n     {\n+        CCoinControl no_coin_control;\n         LOCK2(cs_main, wallet->cs_wallet);\n-        feeBump.reset(new CFeeBumper(wallet, hash, nTxConfirmTarget, false, 0, true));\n+        feeBump.reset(new CFeeBumper(wallet, hash, no_coin_control, 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126317135",
      "id" : 126317135,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 38,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 38,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-09T23:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126317135",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126320980"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126320980"
         }
      },
      "body" : "Good catch.  Will fix. I think I just assumed how the code worked and didn't even look at what I was replacing.",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-10T00:58:47Z",
      "diff_hunk" : "@@ -667,8 +669,9 @@ bool WalletModel::bumpFee(uint256 hash)\n {\n     std::unique_ptr<CFeeBumper> feeBump;\n     {\n+        CCoinControl no_coin_control;\n         LOCK2(cs_main, wallet->cs_wallet);\n-        feeBump.reset(new CFeeBumper(wallet, hash, nTxConfirmTarget, false, 0, true));\n+        feeBump.reset(new CFeeBumper(wallet, hash, no_coin_control, 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126320980",
      "id" : 126320980,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 38,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 38,
      "pull_request_review_id" : 48792714,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-10T00:58:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126320980",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321225"
         }
      },
      "body" : "I hate the magic values of 0.  Actually I think I should make the logic even slightly more clear.\r\nThere should just be a clear parameter precedence.\r\n- coin_control.m_feerate\r\n- coin_control.m_confirm_target\r\n- ::payTxFee (global)\r\n- ::nTxConfirmTarget (globa)\r\n\r\nIt goes down the list until it fines one that is set and all the first 3 should be boost::optional's.  Why do you not like boost::optional?\r\nI could skip changing the global payTxFee for now, and still have that work via the 0 magic value.\r\nThe code to process this will be slightly longer in `GetMininumFee` but I think it'll be far more clear no?\r\n\r\n",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-10T01:04:54Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321225",
      "id" : 126321225,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : 27,
      "pull_request_review_id" : 48792983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-10T01:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321225",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321230"
         }
      },
      "body" : "(see above, will document when we have a final logic)",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-10T01:05:05Z",
      "diff_hunk" : "@@ -18,14 +21,16 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321230",
      "id" : 126321230,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 25,
      "path" : "src/wallet/coincontrol.h",
      "position" : 25,
      "pull_request_review_id" : 48792987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-10T01:05:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321230",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321560"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321560"
         }
      },
      "body" : "Hmm, maybe I shouldnt argue against boost::optional. I'm not a fan of optional types, but they do make sense here. Any further simplification would be nice, this stuff is gross (thanks for cleaning it up!).",
      "commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "created_at" : "2017-07-10T01:11:28Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321560",
      "id" : 126321560,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : 27,
      "pull_request_review_id" : 48793321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-10T01:11:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321560",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Rebased against the updated #10589 and fixed bug as well as improved parameter precedence logic for Coin Control.",
      "created_at" : "2017-07-10T16:45:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314164879",
      "id" : 314164879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-10T16:45:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314164879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
