[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126309923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126309923"
         }
      },
      "body" : "Gah, I'd really rather keep the old magic value of just 0 means default instead of adding boost::optional (and kinda would prefer to skip boost::option in favor of more descriptive names for m_feerate, too).",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-09T17:02:50Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126309923",
      "id" : 126309923,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126309923",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126316958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126316958"
         }
      },
      "body" : "Can you write out more docs here?\r\n\"m_feerate unset uses global paytxfee (if set) otherwise uses smart fee estimation. m_feerate set to 0 ignores global paytxfee and uses smart fee estimation. m_feerate set skips fee estimation but applies minTxFee and maxTxFee\"\r\n\"fOverrideFeeRate overrides all other feerate options (global paytxfee, smart fee estimation, txconfirmtarget, min+maxTxFee, etc) and uses m_feerate\"",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-09T22:18:41Z",
      "diff_hunk" : "@@ -18,14 +21,16 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126316958",
      "id" : 126316958,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 25,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126316958",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126317135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126317135"
         }
      },
      "body" : "This changes the newTxReplaceable option to fWalletRbf instead of true. Maybe leave it the way it was, or was this on purpose?",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-09T22:25:48Z",
      "diff_hunk" : "@@ -667,8 +669,9 @@ bool WalletModel::bumpFee(uint256 hash)\n {\n     std::unique_ptr<CFeeBumper> feeBump;\n     {\n+        CCoinControl no_coin_control;\n         LOCK2(cs_main, wallet->cs_wallet);\n-        feeBump.reset(new CFeeBumper(wallet, hash, nTxConfirmTarget, false, 0, true));\n+        feeBump.reset(new CFeeBumper(wallet, hash, no_coin_control, 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126317135",
      "id" : 126317135,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 38,
      "path" : "src/qt/walletmodel.cpp",
      "position" : null,
      "pull_request_review_id" : 48782082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126317135",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126320980"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126320980"
         }
      },
      "body" : "Good catch.  Will fix. I think I just assumed how the code worked and didn't even look at what I was replacing.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T00:58:47Z",
      "diff_hunk" : "@@ -667,8 +669,9 @@ bool WalletModel::bumpFee(uint256 hash)\n {\n     std::unique_ptr<CFeeBumper> feeBump;\n     {\n+        CCoinControl no_coin_control;\n         LOCK2(cs_main, wallet->cs_wallet);\n-        feeBump.reset(new CFeeBumper(wallet, hash, nTxConfirmTarget, false, 0, true));\n+        feeBump.reset(new CFeeBumper(wallet, hash, no_coin_control, 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126320980",
      "id" : 126320980,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 38,
      "path" : "src/qt/walletmodel.cpp",
      "position" : null,
      "pull_request_review_id" : 48792714,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126320980",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321225"
         }
      },
      "body" : "I hate the magic values of 0.  Actually I think I should make the logic even slightly more clear.\r\nThere should just be a clear parameter precedence.\r\n- coin_control.m_feerate\r\n- coin_control.m_confirm_target\r\n- ::payTxFee (global)\r\n- ::nTxConfirmTarget (globa)\r\n\r\nIt goes down the list until it fines one that is set and all the first 3 should be boost::optional's.  Why do you not like boost::optional?\r\nI could skip changing the global payTxFee for now, and still have that work via the 0 magic value.\r\nThe code to process this will be slightly longer in `GetMininumFee` but I think it'll be far more clear no?\r\n\r\n",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T01:04:54Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321225",
      "id" : 126321225,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 48792983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321225",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321230"
         }
      },
      "body" : "(see above, will document when we have a final logic)",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T01:05:05Z",
      "diff_hunk" : "@@ -18,14 +21,16 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321230",
      "id" : 126321230,
      "original_commit_id" : "19d71b7de026ebf1ec85e104957777377df309f2",
      "original_position" : 25,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 48792987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321230",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321560"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321560"
         }
      },
      "body" : "Hmm, maybe I shouldnt argue against boost::optional. I'm not a fan of optional types, but they do make sense here. Any further simplification would be nice, this stuff is gross (thanks for cleaning it up!).",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T01:11:28Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatically calculated feerate, nFeeRate must be set if true\n     bool fOverrideFeeRate;\n-    //! Feerate to use if overrideFeeRate is true\n-    CFeeRate nFeeRate;\n-    //! Override the default confirmation target, 0 = use default\n-    int nConfirmTarget;\n+    //! Override the default payTxFee if set, 0 = use smart fee estimation\n+    boost::optional<CFeeRate> m_feerate;\n+    //! Override the default confirmation target\n+    boost::optional<unsigned int> m_confirm_target;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126321560",
      "id" : 126321560,
      "original_commit_id" : "5d0e674ac7542d6fdcdcc36d802706b1a20fc7dd",
      "original_position" : 23,
      "path" : "src/wallet/coincontrol.h",
      "position" : null,
      "pull_request_review_id" : 48793321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126321560",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Rebased against the updated #10589 and fixed bug as well as improved parameter precedence logic for Coin Control.",
      "created_at" : "2017-07-10T16:45:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314164879",
      "id" : 314164879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-10T16:45:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314164879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126557663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126557663"
         }
      },
      "body" : "In commit \"Make CoinControl a required argument to CreateTransaction\"\r\n\r\nWould be nice to make coin control a required argument to AvailableCoins as well. (To get rid of more multiply-defined default values.)",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T22:58:06Z",
      "diff_hunk" : "@@ -2567,7 +2567,7 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n         LOCK2(cs_main, cs_wallet);\n         {\n             std::vector<COutput> vAvailableCoins;\n-            AvailableCoins(vAvailableCoins, true, coinControl);\n+            AvailableCoins(vAvailableCoins, true, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126557663",
      "id" : 126557663,
      "original_commit_id" : "f07480b200470e216e30c96c1924a416d8774eac",
      "original_position" : 23,
      "path" : "src/wallet/wallet.cpp",
      "position" : 23,
      "pull_request_review_id" : 49053809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126557663",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126557699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126557699"
         }
      },
      "body" : "In commit \"Make CoinControl a required argument to CreateTransaction\"\r\n\r\nWould be nice if to make coin control a required argument to SelectCoins as well.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T22:58:24Z",
      "diff_hunk" : "@@ -2617,7 +2617,7 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n                 // Choose coins to use\n                 CAmount nValueIn = 0;\n                 setCoins.clear();\n-                if (!SelectCoins(vAvailableCoins, nValueToSelect, setCoins, nValueIn, coinControl))\n+                if (!SelectCoins(vAvailableCoins, nValueToSelect, setCoins, nValueIn, &coin_control))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126557699",
      "id" : 126557699,
      "original_commit_id" : "f07480b200470e216e30c96c1924a416d8774eac",
      "original_position" : 32,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49053809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126557699",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126559649"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126559649"
         }
      },
      "body" : "In commit \"Refactor to use CoinControl in GetMinimumFee and FeeBumper\"\r\n\r\nMaybe replace ` = boost::none` with `.reset()` here and other places to remove boost reference and make it a little easier to port to `std::optional` in the future.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T23:11:40Z",
      "diff_hunk" : "@@ -41,9 +43,9 @@ class CCoinControl\n         fAllowOtherInputs = false;\n         fAllowWatchOnly = false;\n         setSelected.clear();\n-        nFeeRate = CFeeRate(0);\n+        m_feerate = boost::none;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126559649",
      "id" : 126559649,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 32,
      "path" : "src/wallet/coincontrol.h",
      "position" : 32,
      "pull_request_review_id" : 49053809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126559649",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126560525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126560525"
         }
      },
      "body" : "In commit \"Refactor to use CoinControl in GetMinimumFee and FeeBumper\"\r\n\r\nYou should definitely get rid of the `fOverrideFeeRate` member now that `m_feerate` is optional.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-10T23:17:45Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatic min/max checks on fee, m_feerate must be set if true\n     bool fOverrideFeeRate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126560525",
      "id" : 126560525,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 15,
      "path" : "src/wallet/coincontrol.h",
      "position" : 15,
      "pull_request_review_id" : 49053809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126560525",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126569510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126569510"
         }
      },
      "body" : "Well..  almost\r\n`fOverrideFeeRate` is used from `fundrawtransaction` and it seems to me that it might make sense that you don't want your specified fee rate subject to clamping by various min fees or the maxTxFee when you are using it from there but you do generally.  \r\n\r\nIn any case it would be a change of functionality to change that, so we should do it separately.\r\n",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T00:28:14Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatic min/max checks on fee, m_feerate must be set if true\n     bool fOverrideFeeRate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126569510",
      "id" : 126569510,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 15,
      "path" : "src/wallet/coincontrol.h",
      "position" : 15,
      "pull_request_review_id" : 49066038,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126569510",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126569962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126569962"
         }
      },
      "body" : "I agree, but decided it would make this PR a bit too big.\r\n\r\n~Which multiply defined values are you referring to though?~ (edit: i think you just mean too many arguments with default values defined)",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T00:32:04Z",
      "diff_hunk" : "@@ -2567,7 +2567,7 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n         LOCK2(cs_main, cs_wallet);\n         {\n             std::vector<COutput> vAvailableCoins;\n-            AvailableCoins(vAvailableCoins, true, coinControl);\n+            AvailableCoins(vAvailableCoins, true, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126569962",
      "id" : 126569962,
      "original_commit_id" : "f07480b200470e216e30c96c1924a416d8774eac",
      "original_position" : 23,
      "path" : "src/wallet/wallet.cpp",
      "position" : 23,
      "pull_request_review_id" : 49066482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126569962",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126570021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126570021"
         }
      },
      "body" : "will do",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T00:32:33Z",
      "diff_hunk" : "@@ -41,9 +43,9 @@ class CCoinControl\n         fAllowOtherInputs = false;\n         fAllowWatchOnly = false;\n         setSelected.clear();\n-        nFeeRate = CFeeRate(0);\n+        m_feerate = boost::none;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126570021",
      "id" : 126570021,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 32,
      "path" : "src/wallet/coincontrol.h",
      "position" : 32,
      "pull_request_review_id" : 49066544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126570021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126702463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126702463"
         }
      },
      "body" : "> Which multiply defined values are you referring to though?\r\n\r\nI was just referring to the fact that functions accepting null coincontrol pointers have to figure out their own default values instead of using the ones in CoinControl::SetNull.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T14:20:22Z",
      "diff_hunk" : "@@ -2567,7 +2567,7 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n         LOCK2(cs_main, cs_wallet);\n         {\n             std::vector<COutput> vAvailableCoins;\n-            AvailableCoins(vAvailableCoins, true, coinControl);\n+            AvailableCoins(vAvailableCoins, true, &coin_control);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126702463",
      "id" : 126702463,
      "original_commit_id" : "f07480b200470e216e30c96c1924a416d8774eac",
      "original_position" : 23,
      "path" : "src/wallet/wallet.cpp",
      "position" : 23,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126702463",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126710815"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126710815"
         }
      },
      "body" : "Actually turns out `.reset()` is deprecated so left it as is.\r\n",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T14:46:38Z",
      "diff_hunk" : "@@ -41,9 +43,9 @@ class CCoinControl\n         fAllowOtherInputs = false;\n         fAllowWatchOnly = false;\n         setSelected.clear();\n-        nFeeRate = CFeeRate(0);\n+        m_feerate = boost::none;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126710815",
      "id" : 126710815,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 32,
      "path" : "src/wallet/coincontrol.h",
      "position" : 32,
      "pull_request_review_id" : 49220067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126710815",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Rebased cleanly so only new commits are left after #10589 was merged",
      "created_at" : "2017-07-11T14:47:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314468238",
      "id" : 314468238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-11T14:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314468238",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126722897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126722897"
         }
      },
      "body" : "> Actually turns out .reset() is deprecated so left it as is.\r\n\r\n.reset is part of c++17 (http://en.cppreference.com/w/cpp/utility/optional/reset) so I still think it would be better to switch to this. (I don't think we'd be using `boost::optional` at all now if we weren't planning to switch to `std::optional` in the future.)",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T15:23:49Z",
      "diff_hunk" : "@@ -41,9 +43,9 @@ class CCoinControl\n         fAllowOtherInputs = false;\n         fAllowWatchOnly = false;\n         setSelected.clear();\n-        nFeeRate = CFeeRate(0);\n+        m_feerate = boost::none;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126722897",
      "id" : 126722897,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 32,
      "path" : "src/wallet/coincontrol.h",
      "position" : 32,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126722897",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126725112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126725112"
         }
      },
      "body" : "It would be nice to move this check into GetMinimumFee so that everything is ompletely in the same place.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T15:31:04Z",
      "diff_hunk" : "@@ -2719,17 +2718,11 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n                     vin.scriptWitness.SetNull();\n                 }\n \n-                // Allow to override the default confirmation target over the CoinControl instance\n-                int currentConfirmationTarget = nTxConfirmTarget;\n-                if (coinControl && coinControl->nConfirmTarget > 0)\n-                    currentConfirmationTarget = coinControl->nConfirmTarget;\n+                CAmount nFeeNeeded = GetMinimumFee(nBytes, coin_control, ::mempool, ::feeEstimator, &feeCalc);\n \n-                // Allow to override the default fee estimate mode over the CoinControl instance\n-                bool conservative_estimate = CalculateEstimateType(coinControl ? coinControl->m_fee_mode : FeeEstimateMode::UNSET, rbf);\n-\n-                CAmount nFeeNeeded = GetMinimumFee(nBytes, currentConfirmationTarget, ::mempool, ::feeEstimator, &feeCalc, false /* ignoreGlobalPayTxFee */, conservative_estimate);\n-                if (coinControl && coinControl->fOverrideFeeRate)\n-                    nFeeNeeded = coinControl->nFeeRate.GetFee(nBytes);\n+                // Allow to override automatic fee calculation (min/max checks) over coin control instance",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126725112",
      "id" : 126725112,
      "original_commit_id" : "d72b3a52ee1c58bf3433f8691f6ff9a03ac4ddc3",
      "original_position" : 73,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49236069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126725112",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126759774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126759774"
         }
      },
      "body" : "done",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T17:44:19Z",
      "diff_hunk" : "@@ -2719,17 +2718,11 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n                     vin.scriptWitness.SetNull();\n                 }\n \n-                // Allow to override the default confirmation target over the CoinControl instance\n-                int currentConfirmationTarget = nTxConfirmTarget;\n-                if (coinControl && coinControl->nConfirmTarget > 0)\n-                    currentConfirmationTarget = coinControl->nConfirmTarget;\n+                CAmount nFeeNeeded = GetMinimumFee(nBytes, coin_control, ::mempool, ::feeEstimator, &feeCalc);\n \n-                // Allow to override the default fee estimate mode over the CoinControl instance\n-                bool conservative_estimate = CalculateEstimateType(coinControl ? coinControl->m_fee_mode : FeeEstimateMode::UNSET, rbf);\n-\n-                CAmount nFeeNeeded = GetMinimumFee(nBytes, currentConfirmationTarget, ::mempool, ::feeEstimator, &feeCalc, false /* ignoreGlobalPayTxFee */, conservative_estimate);\n-                if (coinControl && coinControl->fOverrideFeeRate)\n-                    nFeeNeeded = coinControl->nFeeRate.GetFee(nBytes);\n+                // Allow to override automatic fee calculation (min/max checks) over coin control instance",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126759774",
      "id" : 126759774,
      "original_commit_id" : "d72b3a52ee1c58bf3433f8691f6ff9a03ac4ddc3",
      "original_position" : 73,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49275043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T17:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126759774",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Rebased to accomodate #10712 and moved fOverrideFeeRate inside GetMinimumFee\r\n",
      "created_at" : "2017-07-11T17:49:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314521211",
      "id" : 314521211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-11T17:49:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314521211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126771241"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126771241"
         }
      },
      "body" : "In commit \"Refactor to use CoinControl in GetMinimumFee and FeeBumper\"\r\n\r\nWhy this fixme? Is the previous comment about upper bound not actually true?",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T18:28:07Z",
      "diff_hunk" : "@@ -2924,14 +2918,11 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         if (options.exists(\"confTarget\") && options.exists(\"totalFee\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"confTarget and totalFee options should not both be set. Please provide either a confirmation target for fee estimation or an explicit total fee for the transaction.\");\n         } else if (options.exists(\"confTarget\")) {\n-            // If the user has explicitly set a confTarget in this rpc call,\n-            // then override the default logic that uses the global payTxFee\n-            // instead of the confirmation target.\n-            ignoreGlobalPayTxFee = true;\n-            newConfirmTarget = options[\"confTarget\"].get_int();\n-            if (newConfirmTarget <= 0) { // upper-bound will be checked by estimatefee/smartfee\n+            int target = options[\"confTarget\"].get_int();\n+            if (target <= 0) { // FIXME: Check upper bound too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126771241",
      "id" : 126771241,
      "original_commit_id" : "fb5a21293b76a394e32401c316eb166ba0e3c69f",
      "original_position" : 75,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 112,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126771241",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126772239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126772239"
         }
      },
      "body" : "> fOverrideFeeRate is used from fundrawtransaction\r\n\r\nSorry, misread fOverrideFeeRate comment. And this is now pretty clear with fOverrideFeeRate handled in GetMinimumFee.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T18:31:58Z",
      "diff_hunk" : "@@ -19,12 +21,12 @@ class CCoinControl\n     bool fAllowOtherInputs;\n     //! Includes watch only addresses which match the ISMINE_WATCH_SOLVABLE criteria\n     bool fAllowWatchOnly;\n-    //! Override estimated feerate\n+    //! Override automatic min/max checks on fee, m_feerate must be set if true\n     bool fOverrideFeeRate;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126772239",
      "id" : 126772239,
      "original_commit_id" : "9e70005f632a03acf5982f56b29093948fc96cea",
      "original_position" : 15,
      "path" : "src/wallet/coincontrol.h",
      "position" : 15,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126772239",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126776291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126776291"
         }
      },
      "body" : "In commit \"Refactor to use CoinControl in GetMinimumFee and FeeBumper\"\r\n\r\nMaybe `assert(coinControl->m_confirm_target)` somewhere in this function. The event handling code which sets this seems a little precarious, so it'd be good to know if coinControl hasn't been initialized correctly.\r\n",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T18:49:00Z",
      "diff_hunk" : "@@ -587,7 +587,7 @@ void CoinControlDialog::updateLabels(WalletModel *model, QDialog* dialog)\n     if (payTxFee.GetFeePerK() > 0)\n         dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), payTxFee.GetFeePerK()) / 1000;\n     else {\n-        dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), ::feeEstimator.estimateSmartFee(coinControl->nConfirmTarget, NULL, ::mempool, conservative_estimate).GetFeePerK()) / 1000;\n+        dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), ::feeEstimator.estimateSmartFee(*coinControl->m_confirm_target, NULL, ::mempool, conservative_estimate).GetFeePerK()) / 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126776291",
      "id" : 126776291,
      "original_commit_id" : "fb5a21293b76a394e32401c316eb166ba0e3c69f",
      "original_position" : 14,
      "path" : "src/qt/coincontroldialog.cpp",
      "position" : null,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126776291",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126799924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126799924"
         }
      },
      "body" : "In commit \"Make QT fee displays use GetMinimumFee instead of estimateSmartFee\":\r\n\r\nIs this sufficient to know fee estimation succeeded? For example would it be possible for estimate to fail, and then fallbackFee to be less than RequiredFee, so reason would be REQUIRED not FALLBACK?\r\n\r\nAlso can you expand commit description to say a little bit about why it's better to display minimum fee instead of estimated fee directly here. It seems perfectly reasonable, I'd just like to understand why the min fee wasn't being being used all along, and whether one value is clearly more useful than the other or if this is more intended to be a minor tweak that simplifies the code.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-11T20:31:45Z",
      "diff_hunk" : "@@ -642,16 +642,14 @@ void SendCoinsDialog::updateSmartFeeLabel()\n     updateCoinControlState(coin_control);\n     coin_control.m_feerate = boost::none; // Explicitly use only fee estimation rate for smart fee labels\n     FeeCalculation feeCalc;\n-    bool conservative_estimate = CalculateEstimateType(FeeEstimateMode::UNSET, coin_control.signalRbf);\n-    CFeeRate feeRate = ::feeEstimator.estimateSmartFee(*coin_control.m_confirm_target, &feeCalc, ::mempool, conservative_estimate);\n+    CFeeRate feeRate = CFeeRate(CWallet::GetMinimumFee(1000, coin_control, ::mempool, ::feeEstimator, &feeCalc));\n \n     // show the estimated required time for confirmation\n     ui->confirmationTargetLabel->setText(GUIUtil::formatDurationStr(*coin_control.m_confirm_target * Params().GetConsensus().nPowTargetSpacing) + \" / \" + tr(\"%n block(s)\", \"\", *coin_control.m_confirm_target));\n \n-    if (feeRate <= CFeeRate(0)) // not enough data => minfee\n-    {\n-        ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(),\n-                                                                std::max(CWallet::fallbackFee.GetFeePerK(), CWallet::GetRequiredFee(1000))) + \"/kB\");\n+    ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), feeRate.GetFeePerK()) + \"/kB\");\n+\n+    if (feeCalc.reason == FeeReason::FALLBACK) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126799924",
      "id" : 126799924,
      "original_commit_id" : "99e958f3f04dd3b5a64f7f98b424522531fa8de5",
      "original_position" : 17,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 49210728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-11T20:41:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126799924",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "cheers",
      "created_at" : "2017-07-11T20:47:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314566569",
      "id" : 314566569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-11T20:47:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314566569",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/15623546?v=3",
         "events_url" : "https://api.github.com/users/MIGUELWAXX/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MIGUELWAXX/followers",
         "following_url" : "https://api.github.com/users/MIGUELWAXX/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MIGUELWAXX/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MIGUELWAXX",
         "id" : 15623546,
         "login" : "MIGUELWAXX",
         "organizations_url" : "https://api.github.com/users/MIGUELWAXX/orgs",
         "received_events_url" : "https://api.github.com/users/MIGUELWAXX/received_events",
         "repos_url" : "https://api.github.com/users/MIGUELWAXX/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MIGUELWAXX/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MIGUELWAXX/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MIGUELWAXX"
      }
   },
   {
      "body" : "utACK fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-12T01:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#issuecomment-314618408",
      "id" : 314618408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10706",
      "updated_at" : "2017-07-12T01:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314618408",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126995724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126995724"
         }
      },
      "body" : "Correct, that comment about upper-bound is not true, I don't know why it was put there.\r\nAt the time I wrote these PR's I had a lot of important stuff I wanted to make sure got in, so I didn't want to fix every last little thing, but I think I could easily add a commit now that checks the bounds everywhere necessary.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-12T15:55:03Z",
      "diff_hunk" : "@@ -2924,14 +2918,11 @@ UniValue bumpfee(const JSONRPCRequest& request)\n         if (options.exists(\"confTarget\") && options.exists(\"totalFee\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"confTarget and totalFee options should not both be set. Please provide either a confirmation target for fee estimation or an explicit total fee for the transaction.\");\n         } else if (options.exists(\"confTarget\")) {\n-            // If the user has explicitly set a confTarget in this rpc call,\n-            // then override the default logic that uses the global payTxFee\n-            // instead of the confirmation target.\n-            ignoreGlobalPayTxFee = true;\n-            newConfirmTarget = options[\"confTarget\"].get_int();\n-            if (newConfirmTarget <= 0) { // upper-bound will be checked by estimatefee/smartfee\n+            int target = options[\"confTarget\"].get_int();\n+            if (target <= 0) { // FIXME: Check upper bound too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126995724",
      "id" : 126995724,
      "original_commit_id" : "fb5a21293b76a394e32401c316eb166ba0e3c69f",
      "original_position" : 75,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 112,
      "pull_request_review_id" : 49536272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-12T15:55:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126995724",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126998630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126998630"
         }
      },
      "body" : "I think the behavior in rare edge cases is maybe not precisely correct, but there is likely no harm in it.  The only thing you are missing is a warning that fee estimation is not up to date yet, and before this PR that could already happen if there was a mempool min fee (in which case you wouldn't even get maxed with the fallback fee).  After this PR, you only miss the warning if your fallback fee is less than mempool min fee or minRelayTxFee or minTxFee.  The first case is a strict improvement over prior behavior. The second two cases can only result from very poor configuration of command line options.  In short, I think it could be improved to report even more precise information to the user but it's outside the scope of what I wanted to do here.\r\n\r\nI can expand commit description, but the idea is the displays should correspond to the fees that your actually about to put on the transaction if you click send.  I think it's essentially a bug that it didn't do that before.\r\n\r\n",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-12T16:04:57Z",
      "diff_hunk" : "@@ -642,16 +642,14 @@ void SendCoinsDialog::updateSmartFeeLabel()\n     updateCoinControlState(coin_control);\n     coin_control.m_feerate = boost::none; // Explicitly use only fee estimation rate for smart fee labels\n     FeeCalculation feeCalc;\n-    bool conservative_estimate = CalculateEstimateType(FeeEstimateMode::UNSET, coin_control.signalRbf);\n-    CFeeRate feeRate = ::feeEstimator.estimateSmartFee(*coin_control.m_confirm_target, &feeCalc, ::mempool, conservative_estimate);\n+    CFeeRate feeRate = CFeeRate(CWallet::GetMinimumFee(1000, coin_control, ::mempool, ::feeEstimator, &feeCalc));\n \n     // show the estimated required time for confirmation\n     ui->confirmationTargetLabel->setText(GUIUtil::formatDurationStr(*coin_control.m_confirm_target * Params().GetConsensus().nPowTargetSpacing) + \" / \" + tr(\"%n block(s)\", \"\", *coin_control.m_confirm_target));\n \n-    if (feeRate <= CFeeRate(0)) // not enough data => minfee\n-    {\n-        ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(),\n-                                                                std::max(CWallet::fallbackFee.GetFeePerK(), CWallet::GetRequiredFee(1000))) + \"/kB\");\n+    ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), feeRate.GetFeePerK()) + \"/kB\");\n+\n+    if (feeCalc.reason == FeeReason::FALLBACK) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126998630",
      "id" : 126998630,
      "original_commit_id" : "99e958f3f04dd3b5a64f7f98b424522531fa8de5",
      "original_position" : 17,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 49539357,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-12T16:04:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126998630",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126998781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126998781"
         }
      },
      "body" : "seems reasonable",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-12T16:05:32Z",
      "diff_hunk" : "@@ -587,7 +587,7 @@ void CoinControlDialog::updateLabels(WalletModel *model, QDialog* dialog)\n     if (payTxFee.GetFeePerK() > 0)\n         dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), payTxFee.GetFeePerK()) / 1000;\n     else {\n-        dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), ::feeEstimator.estimateSmartFee(coinControl->nConfirmTarget, NULL, ::mempool, conservative_estimate).GetFeePerK()) / 1000;\n+        dFeeVary = (double)std::max(CWallet::GetRequiredFee(1000), ::feeEstimator.estimateSmartFee(*coinControl->m_confirm_target, NULL, ::mempool, conservative_estimate).GetFeePerK()) / 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r126998781",
      "id" : 126998781,
      "original_commit_id" : "fb5a21293b76a394e32401c316eb166ba0e3c69f",
      "original_position" : 14,
      "path" : "src/qt/coincontroldialog.cpp",
      "position" : null,
      "pull_request_review_id" : 49539496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-12T16:05:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126998781",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r127025140"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127025140"
         }
      },
      "body" : "> I think the behavior in rare edge cases is maybe not precisely correct, but there is likely no harm in it.\r\n\r\nI see. This is less significant than I thought because the fee is shown either way, just the labeling is different.\r\n\r\n> I can expand commit description, but the idea is the displays should correspond to the fees that your actually about to put on the transaction if you click send. I think it's essentially a bug that it didn't do that before.\r\n\r\nThanks, I didn't know if the motivation was to simplify code or if min fee was actually preferable to display. Fact that min fee is used to send the transaction definitely makes sense as a reason to display it.",
      "commit_id" : "fb98c64134a3334d4d892af5ff08bc4291ea7b82",
      "created_at" : "2017-07-12T17:52:18Z",
      "diff_hunk" : "@@ -642,16 +642,14 @@ void SendCoinsDialog::updateSmartFeeLabel()\n     updateCoinControlState(coin_control);\n     coin_control.m_feerate = boost::none; // Explicitly use only fee estimation rate for smart fee labels\n     FeeCalculation feeCalc;\n-    bool conservative_estimate = CalculateEstimateType(FeeEstimateMode::UNSET, coin_control.signalRbf);\n-    CFeeRate feeRate = ::feeEstimator.estimateSmartFee(*coin_control.m_confirm_target, &feeCalc, ::mempool, conservative_estimate);\n+    CFeeRate feeRate = CFeeRate(CWallet::GetMinimumFee(1000, coin_control, ::mempool, ::feeEstimator, &feeCalc));\n \n     // show the estimated required time for confirmation\n     ui->confirmationTargetLabel->setText(GUIUtil::formatDurationStr(*coin_control.m_confirm_target * Params().GetConsensus().nPowTargetSpacing) + \" / \" + tr(\"%n block(s)\", \"\", *coin_control.m_confirm_target));\n \n-    if (feeRate <= CFeeRate(0)) // not enough data => minfee\n-    {\n-        ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(),\n-                                                                std::max(CWallet::fallbackFee.GetFeePerK(), CWallet::GetRequiredFee(1000))) + \"/kB\");\n+    ui->labelSmartFee->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), feeRate.GetFeePerK()) + \"/kB\");\n+\n+    if (feeCalc.reason == FeeReason::FALLBACK) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10706#discussion_r127025140",
      "id" : 127025140,
      "original_commit_id" : "99e958f3f04dd3b5a64f7f98b424522531fa8de5",
      "original_position" : 17,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 49568321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10706",
      "updated_at" : "2017-07-12T17:52:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127025140",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
