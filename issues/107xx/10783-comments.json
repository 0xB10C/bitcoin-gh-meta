[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126497178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126497178"
         }
      },
      "body" : "In commit \"check for null values in rpc args and handle appropriately\"\r\n\r\nInstead of writing `request.params.size() > X && !request.params[X].isNull()` everywhere, I think you should just prefer  `!request.params[X].isNull()`. The UniValue array implementation has bounds checking built in and already returns null for missing elements.",
      "commit_id" : "534963d50bd6454db330432c122805b26750b257",
      "created_at" : "2017-07-10T18:14:09Z",
      "diff_hunk" : "@@ -210,7 +210,7 @@ UniValue waitfornewblock(const JSONRPCRequest& request)\n             + HelpExampleRpc(\"waitfornewblock\", \"1000\")\n         );\n     int timeout = 0;\n-    if (request.params.size() > 0)\n+    if (request.params.size() > 0 && !request.params[0].isNull())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126497178",
      "id" : 126497178,
      "original_commit_id" : "0ff520dbd9dee50c56ac0e09e57c3b5c199ef336",
      "original_position" : 5,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 48986969,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783",
      "updated_at" : "2017-07-11T18:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126497178",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Needs rebase, #10589 added more RPC arguments.",
      "created_at" : "2017-07-11T10:05:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#issuecomment-314397333",
      "id" : 314397333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10783",
      "updated_at" : "2017-07-11T10:05:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314397333",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@ryanofsky since things are moving underneath me I'll leave the code simplification for a follow-up PR\r\n\r\nnow covering the getbalance and lockunspent cases",
      "created_at" : "2017-07-11T13:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#issuecomment-314447096",
      "id" : 314447096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10783",
      "updated_at" : "2017-07-11T13:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314447096",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126714996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126714996"
         }
      },
      "body" : "Please revert this line. This is treating a null account the same as the default account (`\"\"`) instead of treating a null account the same as an unspecified account (`params.size() == 0`), which you would need to do by changing the `params.size()` check above (like I did in https://github.com/bitcoin/bitcoin/compare/master...ryanofsky:pr/multiopt and verified with 3fc286bbf21df9bfebcb6a9f685f22365d98b15f).",
      "commit_id" : "534963d50bd6454db330432c122805b26750b257",
      "created_at" : "2017-07-11T14:58:42Z",
      "diff_hunk" : "@@ -753,14 +753,14 @@ UniValue getbalance(const JSONRPCRequest& request)\n     if (request.params.size() == 0)\n         return  ValueFromAmount(pwallet->GetBalance());\n \n-    const std::string& account_param = request.params[0].get_str();\n+    const std::string& account_param = !request.params[0].isNull() ? request.params[0].get_str() : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126714996",
      "id" : 126714996,
      "original_commit_id" : "03de1b66d560164187120711468e1e84c197df37",
      "original_position" : 32,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49224682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783",
      "updated_at" : "2017-07-11T18:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126714996",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126716987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126716987"
         }
      },
      "body" : "Should revert this line too. This is pointless because of the type check above.\r\n\r\nI think it's best to stick to just handling the simple cases of missing values being treated differently from null values in this PR and handle the other cases more thoughtfully in another PR. Again, I already have the changes to do this in my multiopt branch, and would be happy to post a followup that builds on your change.",
      "commit_id" : "534963d50bd6454db330432c122805b26750b257",
      "created_at" : "2017-07-11T15:04:57Z",
      "diff_hunk" : "@@ -2309,7 +2309,7 @@ UniValue lockunspent(const JSONRPCRequest& request)\n         return true;\n     }\n \n-    UniValue outputs = request.params[1].get_array();\n+    UniValue outputs = !request.params[1].isNull() ? request.params[1].get_array() : NullUniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126716987",
      "id" : 126716987,
      "original_commit_id" : "03de1b66d560164187120711468e1e84c197df37",
      "original_position" : 136,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49224682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783",
      "updated_at" : "2017-07-11T18:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126716987",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "reverted two changes as suggested and simplified PR(need to improve my sed foo)",
      "created_at" : "2017-07-11T16:19:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#issuecomment-314496837",
      "id" : 314496837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10783",
      "updated_at" : "2017-07-11T16:19:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314496837",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126767525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126767525"
         }
      },
      "body" : "Missing ! here",
      "commit_id" : "534963d50bd6454db330432c122805b26750b257",
      "created_at" : "2017-07-11T18:14:00Z",
      "diff_hunk" : "@@ -1209,16 +1209,16 @@ UniValue ListReceived(CWallet * const pwallet, const UniValue& params, bool fByA\n {\n     // Minimum confirmations\n     int nMinDepth = 1;\n-    if (params.size() > 0)\n+    if (params[0].isNull())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10783#discussion_r126767525",
      "id" : 126767525,
      "original_commit_id" : "1ab6cc0e98ce43c6010358241907b96b8a2e746f",
      "original_position" : 54,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 49283792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10783",
      "updated_at" : "2017-07-11T18:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/126767525",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
