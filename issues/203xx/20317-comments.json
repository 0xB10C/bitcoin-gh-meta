[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't understand why this should be done at this point, I believe #19620 addressed the (limited) justification for backporting wtxid relay.  Am I confused?",
      "created_at" : "2020-11-05T19:59:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722610979",
      "id" : 722610979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20317",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjYxMDk3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T19:59:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722610979",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This was discussed in the IRC meeting on July 30th: http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-07-30-19.00.log.html#l-47\r\n\r\n> 19:25 < wumpus> so the plan is to backport  #19606 to 0.20 and #19620 to 0.19 and 0.20?\r\n[...]\r\n19:25 < jnewbery> wumpus: sounds good to me\r\n[...]\r\n19:25 < sdaftuar> sounds good\r\n19:26 < sipa> sounds reasonable if wtxid relay (and followups) are easy to do in 0.20\r\n\r\n\r\n#19569 should really have been a part of the original wtxid relay PR. It makes sense to backport them together. I only didn't include this in #19606 to make review easier.",
      "created_at" : "2020-11-05T21:36:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722659873",
      "id" : 722659873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20317",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjY1OTg3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T21:36:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722659873",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's too late for #19606, however this PR is also missing the `GitHub-Pull: #` and `Rebased-From: ` metadata. See #20166 for an example.",
      "created_at" : "2020-11-06T07:38:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722928370",
      "id" : 722928370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20317",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjkyODM3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-06T07:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722928370",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I am confused by this discussion.\r\n\r\n> 19:16:35 <wumpus> we can make an exception to normallly not backporting p2p features as it's requirement for taproot\r\n\r\nWtxid relay is not a requirement for taproot.  Without #19620 there was a narrow justification, though I don't think too big of one, but with 19620 in place there isn't any duplicated fetching-- so there is no connection to taproot anymore.\r\n\r\n > 19:15:08 <jnewbery> my opinion is that there's no strong reason not to backport wtxid relay to 0.20. \r\n\r\nAt the time of this statement people weren't aware that this change relay introduced a crash vulnerability (which was accidentally fixed by a separate re-factoring change).  But people didn't need to be aware, because that's the reason that features aren't normally backported unless there is a really good reason.\r\n\r\nBut even after reading that discussion, I don't see any reason why this or wtxid relay should be backported to 0.20.  Unless I'm missing something this (and 19606) is a pure feature backport, but I don't know the reason for doing it because I don't see it in the discussion-- what I see given (that it's needed for taproot) just isn't true.\r\n\r\nAm I missing something in the discussion?",
      "created_at" : "2020-11-06T07:57:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722935725",
      "id" : 722935725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20317",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjkzNTcyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-06T08:04:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722935725",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> 19:16:35 we can make an exception to normallly not backporting p2p features as it's requirement for taproot\r\n\r\nThat wasn't the reason given for backporting. The reason for backporting was *not* that it was a requirement for taproot. It was discussed as being an independently useful change. wtxid relay has been wanted since segwit was introduced (#8279), the feature was developed against 0.20, and missed feature freeze by a few weeks, so was a trivial backport.\r\n\r\n> people weren't aware that this change relay introduced a crash vulnerability (which was accidentally fixed by a separate re-factoring change)\r\n\r\nThe crash vulnerability that you're refering to wasn't introduced in #18044. It came in commit [`9efd86a` (#19569)](https://github.com/bitcoin/bitcoin/pull/19569/commits/9efd86a908cf09d9ddbadd3195f202635117d505) in the follow-up PR. It wasn't 'accidentally fixed by a separate refactoring change' - I explicitly pointed out the problem in review here: https://github.com/bitcoin/bitcoin/pull/19569#discussion_r462887483, and wrote a fix here: [`fb56d37` (#19610)](https://github.com/bitcoin/bitcoin/pull/19610/commits/fb56d37612dea6666e7da73d671311a697570dae), which was included in the follow-up PR. I've also included that commit in this backport.\r\n\r\nI still think it's useful to have wtxid relay widely deployed (and also have the ability to request orphan parents from wtxid peers). If other people disagree, then we can close this PR.",
      "created_at" : "2020-11-06T10:22:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723001768",
      "id" : 723001768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20317",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMzAwMTc2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-06T10:22:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723001768",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
