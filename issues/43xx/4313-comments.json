[
   {
      "body" : "Do you have a backtrace of the error that happens? I'm not sure how it ends up in that check, in principle loading the wallet shouldn't fail on transactions.",
      "created_at" : "2014-06-09T21:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4313#issuecomment-45549903",
      "id" : 45549903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4313",
      "updated_at" : "2014-06-09T22:03:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45549903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I just threw a breakpoint on AddCScriptÃ¢ÂÂ \r\n\r\n#0  CBasicKeyStore::AddCScript (this=this@entry=0x55557602e5f0, redeemScript=...) at keystore.cpp:35\r\n#1  0x0000555555790c81 in LoadCScript (redeemScript=..., this=0x55557602e5f0) at wallet.h:214\r\n#2  ReadKeyValue (pwallet=pwallet@entry=0x55557602e5f0, ssKey=..., ssValue=..., wss=..., strType=\"cscript\", strErr=\"\") at walletdb.cpp:547\r\n#3  0x000055555579154b in CWalletDB::LoadWallet (this=this@entry=0x7fffffffbf40, pwallet=pwallet@entry=0x55557602e5f0) at walletdb.cpp:623\r\n#4  0x000055555577b9ee in CWallet::LoadWallet (this=0x55557602e5f0, fFirstRunRet=@0x7fffffffcaa0: false) at wallet.cpp:1475\r\n#5  0x00005555555a5a4b in AppInit2 (threadGroup=...) at init.cpp:975\r\n#6  0x000055555558d513 in AppInit (argc=argc@entry=2, argv=argv@entry=0x7fffffffdd28) at bitcoind.cpp:143\r\n#7  0x000055555558381f in main (argc=2, argv=0x7fffffffdd28) at bitcoind.cpp:180\r\n",
      "created_at" : "2014-06-09T22:13:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4313#issuecomment-45551175",
      "id" : 45551175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4313",
      "updated_at" : "2014-06-09T22:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45551175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Thanks. I see. This happens while reading the \"cscript\" record, not while reading a transaction, that's why I couldn't find it.\r\n\r\nWhat would the right behaviour here?\r\n\r\n- Should we just pretend that these CScripts are not there when loading from an existing wallet (with a warning)?\r\n- Or should they be force-added, bypassing the check? (this could result in problems later, so I prefer the above)\r\n",
      "created_at" : "2014-06-10T06:23:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4313#issuecomment-45577941",
      "id" : 45577941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4313",
      "updated_at" : "2014-06-10T06:23:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45577941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I think the first. Just ignore them, maybe a warning in the logs. (though we may get complaints that there is a warning with no way to cure itÃ¢ÂÂ¦)",
      "created_at" : "2014-06-10T06:28:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4313#issuecomment-45578212",
      "id" : 45578212,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4313",
      "updated_at" : "2014-06-10T06:28:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45578212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Well we *could* define a new wallet version, ignore them only in the current wallet version (and warn), and make an upgrader that removes them. That would provide an upgrade path to get rid of the warnings.\r\n\r\nBut that may be too much. Bumping the wallet version would break compatibility with old wallets for no good reason, for example.",
      "created_at" : "2014-06-10T07:17:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4313#issuecomment-45581155",
      "id" : 45581155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4313",
      "updated_at" : "2014-06-10T07:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45581155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
