[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13860879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13860879"
         }
      },
      "body" : "Don't remove this check! hSocket can be INVALID_SOCKET if there is currently no connection open, in which case no closing needs to be done either.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:18:43Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13860879",
      "id" : 13860879,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 7,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13860879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13860904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13860904"
         }
      },
      "body" : "This hSocket = INVALID_SOCKET is used to mark the connection as closed, don't remove it.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:19:02Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13860904",
      "id" : 13860904,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13860904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861029"
         }
      },
      "body" : "``closesocket(hSocket);`` does exactly that...",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:20:32Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861029",
      "id" : 13861029,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861143"
         }
      },
      "body" : "That check could then perhaps be rewritten to?\r\n<pre>\r\nif (closesocket(hSocket) != WSAENOTSOCK)\r\n    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\r\n</pre>",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:22:34Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861143",
      "id" : 13861143,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 7,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861296"
         }
      },
      "body" : "Again, keep this check. hSocket can be INVALID_SOCKET, in which case closesocket should not be called on it.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:24:49Z",
      "diff_hunk" : "@@ -340,11 +339,7 @@ class CNode\n \n     ~CNode()\n     {\n-        if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861296",
      "id" : 13861296,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 12,
      "path" : "src/net.h",
      "position" : 101,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861419"
         }
      },
      "body" : "Good catch, this was a potential (one-time) socket leak.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:26:41Z",
      "diff_hunk" : "@@ -1632,6 +1629,7 @@ bool BindListenPort(const CService &addrBind, string& strError)\n \n     if (::bind(hListenSocket, (struct sockaddr*)&sockaddr, len) == SOCKET_ERROR)\n     {\n+        closesocket(hListenSocket);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861419",
      "id" : 13861419,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 31,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861597"
         }
      },
      "body" : "WTF?!? closesocket(x) changes the value of x? That's terribly unexpected. I don't like that at all.\r\n",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:29:25Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861597",
      "id" : 13861597,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861616"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861616"
         }
      },
      "body" : "See my comment above, that check IS done in ``closesocket(hSocket);`` we did a redefinition of that function and added some nice checks to it (IMHO).",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:29:44Z",
      "diff_hunk" : "@@ -340,11 +339,7 @@ class CNode\n \n     ~CNode()\n     {\n-        if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861616",
      "id" : 13861616,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 12,
      "path" : "src/net.h",
      "position" : 101,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861698"
         }
      },
      "body" : "That would work. But I like the previous, explicit check better. It's just more clear \"close the socket when we're connected\" versus \"try closing and log a message if it fails\".",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:31:13Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861698",
      "id" : 13861698,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 7,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861698",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861798"
         }
      },
      "body" : "If you like or not, that IS the case for all calls to the function currently... we use closesocket() as a wrapper for the os specific ones and added some things. What would you suggest doing? IMHO it's a lot of duplication if we want to check everytime if a socket has state INVALID_SOCKET before calling our closesocket() function, no?",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:32:27Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13861798",
      "id" : 13861798,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13861798",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "IMHO we should get rid of myclosesocket and the crazy construction in compat.h and make it a pure compatibility wrapper (**only** defined on unix), without extra functionality and checks.\r\nRedefining an existing API function with unexpected behavior in the guise of a compatibility wrapper is just too crazy.\r\n",
      "created_at" : "2014-06-17T14:37:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46315397",
      "id" : 46315397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-17T14:42:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46315397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13863036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13863036"
         }
      },
      "body" : "I prefer a bit of duplication over a closesocket() call that does something else than the WIN32 API specifies.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:50:05Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13863036",
      "id" : 13863036,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13863036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13863290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13863290"
         }
      },
      "body" : "I'm convinced, but AFAIK there are only the 2 lines in CNode that check for INVALID_SOCKET before closing, is this still correct after cleaning up closesocket() (which I'll gladly do)?",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T14:53:17Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13863290",
      "id" : 13863290,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13863290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13869399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13869399"
         }
      },
      "body" : "I think the goal should be to make closesocket() emulate the WIN32 closesocket on Linux, and don't redefine it when WIN32 at all. As we don't define the function on WIN32 anymore we can rename the function from `myclosesocket` to `closesocket`.\r\n\r\nAccording to http://msdn.microsoft.com/en-us/library/windows/desktop/ms737582%28v=vs.85%29.aspx this behavior is to return WSAENOTSOCK when an invalid socket handle is passed. So we can keep the check for INVALID_SOCKET inside the function, to emulate that behavior on Linux.\r\n\r\nAlso removie the assignment of the output parameter `hSocket = INVALID_SOCKET` from the function - and make sure it happens everywhere where needed outside the function.\r\n",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-17T16:22:48Z",
      "diff_hunk" : "@@ -510,13 +510,10 @@ CNode* ConnectNode(CAddress addrConnect, const char *pszDest)\n \n void CNode::CloseSocketDisconnect()\n {\n+    LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n+\n     fDisconnect = true;\n-    if (hSocket != INVALID_SOCKET)\n-    {\n-        LogPrint(\"net\", \"disconnecting node %s\\n\", addrName);\n-        closesocket(hSocket);\n-        hSocket = INVALID_SOCKET;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13869399",
      "id" : 13869399,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 11,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13869399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I reworked our closesocket() to only be active on Non-Windows OSes, Windows now uses the pure API call.",
      "created_at" : "2014-06-17T18:42:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46348124",
      "id" : 46348124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-17T18:42:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46348124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13913578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13913578"
         }
      },
      "body" : "this can be just `SOCKET hSocket` now like a normal parameter, no need for it to be a reference anymore :)",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-18T13:14:10Z",
      "diff_hunk" : "@@ -59,19 +59,17 @@ typedef u_int SOCKET;\n #define SOCKET_ERROR        -1\n #endif\n \n-inline int myclosesocket(SOCKET& hSocket)\n+#ifndef WIN32\n+// Emulate WIN32 closesocket() behaviour for other OSes\n+inline int closesocket(SOCKET& hSocket)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13913578",
      "id" : 13913578,
      "original_commit_id" : "651cd771c772fa34e96dfb23e61e5a673218acb3",
      "original_position" : 14,
      "path" : "src/compat.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13913578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The hard part now will be checking all existing closesocket() calls and determining if they should be followed by `hSocket = INVALID_SOCKET`.",
      "created_at" : "2014-06-18T13:16:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46433579",
      "id" : 46433579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-18T13:16:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46433579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "If you mind looking at #3461 and we can get that merged, it would remove quite a few of them ;). Also the closesocket() during network init for listen sockets should be easy, which is also true for socks5(). Not sure if there are that many left then...",
      "created_at" : "2014-06-18T13:19:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46433899",
      "id" : 46433899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-18T13:19:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46433899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13913832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13913832"
         }
      },
      "body" : "Isn't a reference better because we then use no extra copy?",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-18T13:20:10Z",
      "diff_hunk" : "@@ -59,19 +59,17 @@ typedef u_int SOCKET;\n #define SOCKET_ERROR        -1\n #endif\n \n-inline int myclosesocket(SOCKET& hSocket)\n+#ifndef WIN32\n+// Emulate WIN32 closesocket() behaviour for other OSes\n+inline int closesocket(SOCKET& hSocket)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13913832",
      "id" : 13913832,
      "original_commit_id" : "651cd771c772fa34e96dfb23e61e5a673218acb3",
      "original_position" : 14,
      "path" : "src/compat.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13913832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13914267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13914267"
         }
      },
      "body" : "For large types such as structures and objects that can be true (but then we'd use a *const* reference). For small types like integers and handles it's only overhead. On 64-bit architectures a pointer to an integer is larger than the integer itself.",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-18T13:30:17Z",
      "diff_hunk" : "@@ -59,19 +59,17 @@ typedef u_int SOCKET;\n #define SOCKET_ERROR        -1\n #endif\n \n-inline int myclosesocket(SOCKET& hSocket)\n+#ifndef WIN32\n+// Emulate WIN32 closesocket() behaviour for other OSes\n+inline int closesocket(SOCKET& hSocket)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r13914267",
      "id" : 13914267,
      "original_commit_id" : "651cd771c772fa34e96dfb23e61e5a673218acb3",
      "original_position" : 14,
      "path" : "src/compat.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13914267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Hmm, thinking further about this, another way would be to define a CSocket class with move semantics (and a method `Close()`, at least, to force closing), and use that instead of passing raw file handles around.\r\nThis could avoid socket leaks completely by using RAII.\r\nIt's somewhat more complex and involved, but as we have to change every call site of closesocket() anyway it may be something to think about.\r\n",
      "created_at" : "2014-06-21T10:37:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46750127",
      "id" : 46750127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-21T11:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46750127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I like the idea of a RAII wrapper for sockets.",
      "created_at" : "2014-06-21T20:25:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46763862",
      "id" : 46763862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-21T20:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46763862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa @laanwj I started implementing CSocket, can you give me some feedback and help to see if I'm on the right track please :). See: https://github.com/Diapolo/bitcoin/commit/1c5873e0ba4cc466c11e5a0dbc779d78b5662075\r\n\r\nEdit: The new class is currently only used for listening sockets to show the current implementation state.\r\nEdit 2: Also it seems that code is currently not working ^^... seems to be too late... a look from some experienced dev would be great anyway.",
      "created_at" : "2014-06-22T01:08:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46769435",
      "id" : 46769435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-22T01:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46769435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r14052505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14052505"
         }
      },
      "body" : "Understood and will be changed :).",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-06-22T01:09:44Z",
      "diff_hunk" : "@@ -59,19 +59,17 @@ typedef u_int SOCKET;\n #define SOCKET_ERROR        -1\n #endif\n \n-inline int myclosesocket(SOCKET& hSocket)\n+#ifndef WIN32\n+// Emulate WIN32 closesocket() behaviour for other OSes\n+inline int closesocket(SOCKET& hSocket)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r14052505",
      "id" : 14052505,
      "original_commit_id" : "651cd771c772fa34e96dfb23e61e5a673218acb3",
      "original_position" : 14,
      "path" : "src/compat.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14052505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj @sipa Alright, I was able to fix the problems from last night. During BOOST_FOREACH processing existing sockets were copied/used and got closed by the destructor after the loop ^^. This is now fixed by a new flag ``fCloseOnDestruct`` in the CSocket class. I need some initial feedback now :).\r\n\r\nCommit is at: https://github.com/Diapolo/bitcoin/commit/079dab40b8e2d88786d2fd0bef9025afa5719b9d",
      "created_at" : "2014-06-22T11:23:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46778519",
      "id" : 46778519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-22T11:23:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46778519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "I'm going for some incremental pulls that are included here, see #4388 for the first one.",
      "created_at" : "2014-06-22T12:58:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46780503",
      "id" : 46780503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-22T12:58:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46780503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Did anyone take a look at the RAII class yet? I don't want to continue, if it's bugged or it's implementation is not correct.",
      "created_at" : "2014-06-24T07:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-46939311",
      "id" : 46939311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-24T07:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46939311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "If we are going to have an RAII CSocket, we might as well add classes Connection, SocketServer, IOEngine.\r\n\r\nThen we can ditch boost::asio for the RPC server, and use that instead.\r\n",
      "created_at" : "2014-06-26T14:35:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47233441",
      "id" : 47233441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-26T14:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47233441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@diapolo No, haven't got around to it.\r\n\r\n@jgarzik I disagree we should be spending time writing and maintaining our own asynchronous I/O library. It's not like we're innovating anything here. If we want to ditch boost::asio we should switch to something which is well-known to be robust and high-performance like libevent (or derivatives). ",
      "created_at" : "2014-06-26T14:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47235024",
      "id" : 47235024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-26T14:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47235024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "If we don't want our own async I/O lib, then adding RAII CSocket is moving in the wrong direction.  boost::asio already has portable socket classes and much much more.\r\n",
      "created_at" : "2014-06-26T14:53:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47235736",
      "id" : 47235736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-26T14:53:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47235736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Well - in principle I agree that using the same network library everywhere would be a good thing. But  I know at least @gmaxwell doesn't like boost::asio and doesn't want to switch the P2P code to it.\r\n\r\nSo at some point we have to make a decision about what async networking library to use. Not necessarily now.\r\n\r\nThe point here was to get rid of the strange compat.h behavior - a compatibility wrapper should provide compatibility not add functionality. I then thought, if we're changing socket closing behavior we might as well make it RAII. But if that's a stap too far, fair enough...\r\n",
      "created_at" : "2014-06-26T15:07:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47237754",
      "id" : 47237754,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-06-26T15:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47237754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Thinking about ``always call closesocket() before printing any text (ensure consistent usage in the code)``... closesocket() can fail, which would likely interact with our ``LogPrint()``... so I guess it's a good idea to first log and close the socket afterwards... but then everywhere in our code.",
      "created_at" : "2014-07-01T08:11:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47628580",
      "id" : 47628580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-01T08:11:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47628580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo Well in cases where the purpose of the Logprintf is to log the error it should definitely be logged before the close, otherwise it will log the status of the close(). In other cases it doesn't matter what you do first.\r\n",
      "created_at" : "2014-07-01T08:16:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47629025",
      "id" : 47629025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-01T08:16:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47629025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Right, it's only relevant, when a call to ``NetworkErrorString()`` is used for the logging.",
      "created_at" : "2014-07-01T08:23:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-47629610",
      "id" : 47629610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-01T08:23:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47629610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Did anyone look at the RAII wrapper yet or is this considered unhelpful in the end?\r\nEdit: I know this needs a rebase now...",
      "created_at" : "2014-07-15T15:52:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49052521",
      "id" : 49052521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-15T15:52:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49052521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo I've looked at it and it looks okay, but as @jgarzik says it may be too much if we intend to move to some other async networking library for P2P. Although it is clearly the way forward - from another async networking library we'd expect nothing less - right now it may brings subtle new bugs that have to be debugged. So I prefer the more trivial change in #4504 for now.\r\n",
      "created_at" : "2014-07-16T09:38:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49142227",
      "id" : 49142227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-16T09:38:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49142227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Rebased and updated to include changes for node whitelisting. I'm not sure #4504 is an alternative, as it's \"just\" refactoring.",
      "created_at" : "2014-07-16T10:34:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49148042",
      "id" : 49148042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-16T10:34:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49148042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r15166680"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15166680"
         }
      },
      "body" : "@laanwj As you add this check in ``CloseSocket()`` this should be fine now :).",
      "commit_id" : "684bec2f41d0963fe24cf55cd397b962a25529cf",
      "created_at" : "2014-07-21T12:54:52Z",
      "diff_hunk" : "@@ -340,11 +339,7 @@ class CNode\n \n     ~CNode()\n     {\n-        if (hSocket != INVALID_SOCKET)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#discussion_r15166680",
      "id" : 15166680,
      "original_commit_id" : "baea8b9aa3df83057a1d4a533a649514a28decb5",
      "original_position" : 12,
      "path" : "src/net.h",
      "position" : 101,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4348",
      "updated_at" : "2014-07-21T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15166680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj I reworked and rethought this, there is no need to try to emulate WIN32 ``closesocket()`` behaviour for non-WIN32, as ``close()`` gives error ``EBADF - fd isn't a valid open file descriptor.``, which we typedef as ``WSAENOTSOCK`` in compat.h anyway ;). So they behave the same already.",
      "created_at" : "2014-07-21T12:58:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49601813",
      "id" : 49601813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-21T12:58:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49601813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "CSocket seems to add never-used methods and flags.\r\n",
      "created_at" : "2014-07-21T13:01:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49602083",
      "id" : 49602083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-21T13:01:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49602083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Right, the ones who are unused are ``void SetCloseOnDestruct(bool fFlag);`` and ``void SetWhitelisted(bool fFlag);`` and I mentioned that in a comment in the source. Also CSocket is currently ONLY used for listen sockets, because I didn't want to change the whole source, before anyone gave some feedback to my implementation.",
      "created_at" : "2014-07-21T13:11:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49603037",
      "id" : 49603037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-21T13:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49603037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4348_684bec2f41d0963fe24cf55cd397b962a25529cf/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-07-21T13:31:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49605160",
      "id" : 49605160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-21T13:31:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49605160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "The move semantics seem important. Right now you can copy or assign a socket and have two sockets using the same handle; then if one goes out of scope or is `Close()`ed the other will have its underlying socket closed without `CloseSocket` setting `hSocket` to `INVALID_SOCKET`, so it still returns `IsValid()==true`. With cloning disallowed, `fCloseOnDestruct` shouldn't be necessary.\r\n\r\nPutting the \"whitelisted\" flag in what would otherwise be a general RAII socket wrapper seems odd. Why not keep the `ListenSocket` struct, and just change it from using a handle to a CSocket?\r\n\r\nHaving the `Get()` method is no different from just making the `hSocket` a public member. I suggest either adding wrappers for the functions that take sockets (non-member `friend` functions could do the `FD_SET` operations), or if CSocket is to be a struct with a destructor, making it look like a struct with a destructor.",
      "created_at" : "2014-07-21T17:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-49635992",
      "id" : 49635992,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-21T17:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49635992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1047859?v=3",
         "events_url" : "https://api.github.com/users/kazcw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kazcw/followers",
         "following_url" : "https://api.github.com/users/kazcw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kazcw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kazcw",
         "id" : 1047859,
         "login" : "kazcw",
         "organizations_url" : "https://api.github.com/users/kazcw/orgs",
         "received_events_url" : "https://api.github.com/users/kazcw/received_events",
         "repos_url" : "https://api.github.com/users/kazcw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kazcw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kazcw"
      }
   },
   {
      "body" : "@kazcw I guess I need some more help to implement what you suggest about disallow cloning. Makes sense that no CSocket should have the same handle. How can this be achieved?",
      "created_at" : "2014-07-25T15:48:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-50167510",
      "id" : 50167510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-25T15:48:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50167510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "To prevent copying, you can declare a private copy constructor with no implementation.\r\n\r\nvhListenSocket would need to be a vector of pointers.",
      "created_at" : "2014-07-25T17:12:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-50177806",
      "id" : 50177806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-07-25T17:14:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50177806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1047859?v=3",
         "events_url" : "https://api.github.com/users/kazcw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kazcw/followers",
         "following_url" : "https://api.github.com/users/kazcw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kazcw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kazcw",
         "id" : 1047859,
         "login" : "kazcw",
         "organizations_url" : "https://api.github.com/users/kazcw/orgs",
         "received_events_url" : "https://api.github.com/users/kazcw/received_events",
         "repos_url" : "https://api.github.com/users/kazcw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kazcw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kazcw"
      }
   },
   {
      "body" : "As said before, I deem the RAII changes too risky for what it would bring and am not going to merge it, sorry. \r\n\r\nThis would make sense as part of a change that wraps all networking behavior in proper classes, but if we make such a high-impact change to networking we should consider switching to an existing high-performance async networking library instead of mucking about with our own.\r\n\r\nSomething to consider in the future, but right now there are much more pressing things.\r\n",
      "created_at" : "2014-08-04T15:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-51076850",
      "id" : 51076850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-08-04T15:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51076850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I created #4636 as these changes seem uncontroversial.",
      "created_at" : "2014-08-05T11:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4348#issuecomment-51185913",
      "id" : 51185913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4348",
      "updated_at" : "2014-08-05T11:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51185913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
