[
   {
      "body" : "Tried testing on wine, but the `RegQueryValueExA(HKEY_PERFORMANCE_DATA)` fails there :( (no such key)",
      "created_at" : "2014-06-23T14:30:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46852338",
      "id" : 46852338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-23T14:30:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46852338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "~~A bitcoind.exe to test with is available here: https://download.visucore.com/bitcoin/bitcoin-win-v0.9.99.0-gbe873f6.zip (gpg sigs https://download.visucore.com/bitcoin/bitcoin-win-v0.9.99.0-gbe873f6.zip.sig)~~",
      "created_at" : "2014-06-23T15:19:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46859070",
      "id" : 46859070,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T15:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46859070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Testing on Windows 8 64bit with @laanwj's binary, my log shows\r\n\r\n    2014-06-23 18:04:36 RandAddSeedPerfmon: Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code 234\r\n\r\nI'm not sure how to further debug this. My regular Bitcoin 0.9.1 GUI does not seem to show any randomness-related debug messages (started with `-debug`).",
      "created_at" : "2014-06-23T18:53:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46886221",
      "id" : 46886221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-23T18:59:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46886221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4348296?v=3",
         "events_url" : "https://api.github.com/users/leofidus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/leofidus/followers",
         "following_url" : "https://api.github.com/users/leofidus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/leofidus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/leofidus",
         "id" : 4348296,
         "login" : "leofidus",
         "organizations_url" : "https://api.github.com/users/leofidus/orgs",
         "received_events_url" : "https://api.github.com/users/leofidus/received_events",
         "repos_url" : "https://api.github.com/users/leofidus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/leofidus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/leofidus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/leofidus"
      }
   },
   {
      "body" : "@leofidus Thanks for testing!\r\n\r\nThe regular client doesn't show any messages if the call fails, only if it succeeds. In the second commit of this pull I added that warning. So - it's failing in 0.9.1 as well.\r\n\r\nBut the error is different than mine on wine. Error 234 is `ERROR_MORE_DATA`. I doubt this ever worked at all.\r\nAccording to [the doc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx):\r\n\r\n> If the buffer specified by lpData parameter is not large enough to hold the data, the function returns ERROR_MORE_DATA and stores the required buffer size in the variable pointed to by lpcbData. In this case, the contents of the lpData buffer are undefined.\r\n\r\n~~So handle this error properly we need to resize the buffer to the returned size and re-call the function.~~ Edit: no, that doesn't work specifically for HKEY_PERFORMANCE_DATA according to the above doc.",
      "created_at" : "2014-06-24T07:03:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46938225",
      "id" : 46938225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T08:35:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46938225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "My official 0.9.1 client shows, that it's working here ``2014-06-24 07:19:08 RandAddSeed() 219352 bytes``. Didn't yet try this patch...",
      "created_at" : "2014-06-24T07:22:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46939393",
      "id" : 46939393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T07:22:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46939393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@diapolo Thanks for testing, although at this point I doubt that it depends on this patch. So at least it works in some cases.\r\n\r\nDo you perhaps know if HKEY_PERFORMANCE_DATA returns a variable number of bytes that may be >250000?\r\n\r\nAh, got it:\r\n\r\n> If hKey specifies `HKEY_PERFORMANCE_DATA` and the `lpData` buffer is not large enough to contain all of the returned data, `RegQueryValueEx` returns `ERROR_MORE_DATA` and the value returned through the lpcbData parameter is undefined. **This is because the size of the performance data can change from one call to the next**. In this case, you must increase the buffer size and call `RegQueryValueEx` again passing the updated buffer size in the lpcbData parameter. Repeat this until the function succeeds. You need to maintain a separate variable to keep track of the buffer size, because the value returned by lpcbData is unpredictable.\r\n\r\nSo we need a loop.",
      "created_at" : "2014-06-24T08:29:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46944857",
      "id" : 46944857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T08:31:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46944857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj See http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx for sample code.",
      "created_at" : "2014-06-24T09:17:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46949120",
      "id" : 46949120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T09:17:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46949120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj We had a debate about that part of the code in 09. 2012, see https://bitcointalk.org/index.php?topic=113496.msg1225880#msg1225880",
      "created_at" : "2014-06-24T09:33:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46950538",
      "id" : 46950538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T09:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46950538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj What do you think about removing that source of entropy and use the debug.log with ``RAND_load_file()`` (https://www.openssl.org/docs/crypto/RAND_load_file.html)? The data should be quite random after the initial startup.",
      "created_at" : "2014-06-24T09:43:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46951520",
      "id" : 46951520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T09:44:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46951520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Wut? It is known since 2012? I'm extremely disappointed and surprised here. Why did no one ever fix that or escalate it beyond a silly forum topic? Getting the performance data properly is simple, an example is even given in the MSDN documentation that I link above.\r\n\r\nI don't think debug.log is a good source of entropy as it is - up to a point - controllable by the outside world through the network. But I'm not an expert on that. If you implement an extra entropy source for that be sure to just use part of the file, not all of it, or it could slow down start-up.",
      "created_at" : "2014-06-24T10:07:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46953613",
      "id" : 46953613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T10:11:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46953613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I proposed a change (https://bitcointalk.org/index.php?topic=113496.msg1228012#msg1228012) and if I remember correctly also had a pull open for this. It was decided to leave as is.",
      "created_at" : "2014-06-24T10:54:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46957300",
      "id" : 46957300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T10:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46957300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "That makes no sense. I can only find one issue with `RandAddSeedPerfmon` in it: this one.\r\nAnyhow, let's fix it...\r\nEdit: I see this issue #2942. But it doesn't mention a specific problem with any of our current entropy harvesting functions.",
      "created_at" : "2014-06-24T11:35:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46960330",
      "id" : 46960330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T11:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46960330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Are you going to rework this to include a loop? I tend to just remove it, but have no strong enough feeling yet.",
      "created_at" : "2014-06-24T14:10:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46975559",
      "id" : 46975559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T14:10:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46975559",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Yes, I'm going to turn it into a loop. We have a dearth of entropy sources on windows so removing any sounds extremely unwise.",
      "created_at" : "2014-06-24T14:14:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46976012",
      "id" : 46976012,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T14:14:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46976012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ok, it should always collect now unless there is >10MB of performance data.\r\n\r\nA bitcoind.exe to test with is available here: https://download.visucore.com/bitcoin/bitcoin-win-v0.9.99.0-g3b8c1da.zip (gpg sigs https://download.visucore.com/bitcoin/bitcoin-win-v0.9.99.0-g3b8c1da.zip.sig)",
      "created_at" : "2014-06-24T15:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-46982725",
      "id" : 46982725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-24T15:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46982725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Again, can someone with windows test the above bitcoin-win-v0.9.99.0-g3b8c1da.zip and start with -debug=rand and look for the RandAddSeedPerfmon() XXX bytes message in debug.log?\r\n",
      "created_at" : "2014-06-25T08:20:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-47073113",
      "id" : 47073113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-25T08:20:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47073113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238447"
         }
      },
      "body" : "Nit: Can we define to add a space before the function name :)? Also should this be part of the \"rand\" category or not? Which is a thing I need to consider with my OpenSSL related pulls also...",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:00:11Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;\n+    unsigned long nSize;\n+    const size_t nMaxSize = 10000000; // Bail out at more than 10MB of performance data\n+    while (true)\n+    {\n+        nSize = vData.size();\n+        ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, begin_ptr(vData), &nSize);\n+        if (ret != ERROR_MORE_DATA || vData.size() >= nMaxSize)\n+            break;\n+        vData.resize(std::max((vData.size()*3)/2, nMaxSize)); // Grow size of buffer exponentially\n+    }\n     RegCloseKey(HKEY_PERFORMANCE_DATA);\n     if (ret == ERROR_SUCCESS)\n     {\n-        RAND_add(pdata, nSize, nSize/100.0);\n-        OPENSSL_cleanse(pdata, nSize);\n-        LogPrint(\"rand\", \"RandAddSeed() %lu bytes\\n\", nSize);\n+        RAND_add(begin_ptr(vData), nSize, nSize/100.0);\n+        OPENSSL_cleanse(begin_ptr(vData), nSize);\n+        LogPrint(\"rand\", \"%s: %lu bytes\\n\", __func__, nSize);\n+    } else {\n+        static bool warned = false; // Warn only once\n+        if (!warned)\n+        {\n+            LogPrintf(\"%s: Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code %i\\n\", __func__, ret);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238447",
      "id" : 14238447,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 33,
      "path" : "src/util.cpp",
      "position" : 33,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238529"
         }
      },
      "body" : "Nit: I would like to see these 2 vars initialized with 0, what do you think?",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:02:51Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238529",
      "id" : 14238529,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 9,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238538"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238538"
         }
      },
      "body" : "I don't understand, the function name is at the beginning of the line, adding a space there makes no sense.\r\n\r\nAnd this is not in the rand category on purpose because people need to see it. It is not just for debugging. And it only emits the warning once anyway.",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:02:59Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;\n+    unsigned long nSize;\n+    const size_t nMaxSize = 10000000; // Bail out at more than 10MB of performance data\n+    while (true)\n+    {\n+        nSize = vData.size();\n+        ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, begin_ptr(vData), &nSize);\n+        if (ret != ERROR_MORE_DATA || vData.size() >= nMaxSize)\n+            break;\n+        vData.resize(std::max((vData.size()*3)/2, nMaxSize)); // Grow size of buffer exponentially\n+    }\n     RegCloseKey(HKEY_PERFORMANCE_DATA);\n     if (ret == ERROR_SUCCESS)\n     {\n-        RAND_add(pdata, nSize, nSize/100.0);\n-        OPENSSL_cleanse(pdata, nSize);\n-        LogPrint(\"rand\", \"RandAddSeed() %lu bytes\\n\", nSize);\n+        RAND_add(begin_ptr(vData), nSize, nSize/100.0);\n+        OPENSSL_cleanse(begin_ptr(vData), nSize);\n+        LogPrint(\"rand\", \"%s: %lu bytes\\n\", __func__, nSize);\n+    } else {\n+        static bool warned = false; // Warn only once\n+        if (!warned)\n+        {\n+            LogPrintf(\"%s: Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code %i\\n\", __func__, ret);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238538",
      "id" : 14238538,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 33,
      "path" : "src/util.cpp",
      "position" : 33,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238578"
         }
      },
      "body" : "Fine with me...\r\n",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:04:01Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238578",
      "id" : 14238578,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 9,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238781"
         }
      },
      "body" : "Just talking about this changed to this anyway:\r\n``LogPrintf(\"%s : Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code %i\\n\", __func__, ret);``\r\n\r\nWe seem to use that syntax more often.",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:08:45Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;\n+    unsigned long nSize;\n+    const size_t nMaxSize = 10000000; // Bail out at more than 10MB of performance data\n+    while (true)\n+    {\n+        nSize = vData.size();\n+        ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, begin_ptr(vData), &nSize);\n+        if (ret != ERROR_MORE_DATA || vData.size() >= nMaxSize)\n+            break;\n+        vData.resize(std::max((vData.size()*3)/2, nMaxSize)); // Grow size of buffer exponentially\n+    }\n     RegCloseKey(HKEY_PERFORMANCE_DATA);\n     if (ret == ERROR_SUCCESS)\n     {\n-        RAND_add(pdata, nSize, nSize/100.0);\n-        OPENSSL_cleanse(pdata, nSize);\n-        LogPrint(\"rand\", \"RandAddSeed() %lu bytes\\n\", nSize);\n+        RAND_add(begin_ptr(vData), nSize, nSize/100.0);\n+        OPENSSL_cleanse(begin_ptr(vData), nSize);\n+        LogPrint(\"rand\", \"%s: %lu bytes\\n\", __func__, nSize);\n+    } else {\n+        static bool warned = false; // Warn only once\n+        if (!warned)\n+        {\n+            LogPrintf(\"%s: Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code %i\\n\", __func__, ret);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238781",
      "id" : 14238781,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 33,
      "path" : "src/util.cpp",
      "position" : 33,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "I'm currently testing this...",
      "created_at" : "2014-06-26T13:09:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-47223060",
      "id" : 47223060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-26T13:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47223060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238908"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238908"
         }
      },
      "body" : "That's inconsistent too. The second `:` has no space before it. Also looks strange to me. In English you write like this: there is never a space before a (semi)colon. Anyhow, I'm not going to waste time discussing the formatting of log messages, sorry.\r\n",
      "commit_id" : "8ae973c00cfb02161bb2c2a6c839e510cd409278",
      "created_at" : "2014-06-26T13:12:09Z",
      "diff_hunk" : "@@ -168,16 +168,31 @@ void RandAddSeedPerfmon()\n #ifdef WIN32\n     // Don't need this on Linux, OpenSSL automatically uses /dev/urandom\n     // Seed with the entire set of perfmon data\n-    unsigned char pdata[250000];\n-    memset(pdata, 0, sizeof(pdata));\n-    unsigned long nSize = sizeof(pdata);\n-    long ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, pdata, &nSize);\n+    std::vector <unsigned char> vData(250000,0);\n+    long ret;\n+    unsigned long nSize;\n+    const size_t nMaxSize = 10000000; // Bail out at more than 10MB of performance data\n+    while (true)\n+    {\n+        nSize = vData.size();\n+        ret = RegQueryValueExA(HKEY_PERFORMANCE_DATA, \"Global\", NULL, NULL, begin_ptr(vData), &nSize);\n+        if (ret != ERROR_MORE_DATA || vData.size() >= nMaxSize)\n+            break;\n+        vData.resize(std::max((vData.size()*3)/2, nMaxSize)); // Grow size of buffer exponentially\n+    }\n     RegCloseKey(HKEY_PERFORMANCE_DATA);\n     if (ret == ERROR_SUCCESS)\n     {\n-        RAND_add(pdata, nSize, nSize/100.0);\n-        OPENSSL_cleanse(pdata, nSize);\n-        LogPrint(\"rand\", \"RandAddSeed() %lu bytes\\n\", nSize);\n+        RAND_add(begin_ptr(vData), nSize, nSize/100.0);\n+        OPENSSL_cleanse(begin_ptr(vData), nSize);\n+        LogPrint(\"rand\", \"%s: %lu bytes\\n\", __func__, nSize);\n+    } else {\n+        static bool warned = false; // Warn only once\n+        if (!warned)\n+        {\n+            LogPrintf(\"%s: Warning: RegQueryValueExA(HKEY_PERFORMANCE_DATA) failed with code %i\\n\", __func__, ret);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#discussion_r14238908",
      "id" : 14238908,
      "original_commit_id" : "3b8c1da361e62494678fffdff591db7e3436487a",
      "original_position" : 33,
      "path" : "src/util.cpp",
      "position" : 33,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4392",
      "updated_at" : "2014-06-26T13:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14238908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "<pre>\r\n2014-06-26 13:16:33 RandAddSeedPerfmon : 215208 bytes\r\n2014-06-26 13:26:33 RandAddSeedPerfmon : 205416 bytes\r\n</pre>\r\n\r\nSeems to work :).\r\n\r\nACK",
      "created_at" : "2014-06-26T13:36:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-47225985",
      "id" : 47225985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-26T13:36:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47225985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Thanks for testing. I added the 0 initializations. Ready for merge now.",
      "created_at" : "2014-06-26T15:09:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-47238042",
      "id" : 47238042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-26T15:09:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47238042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/p4392_8ae973c00cfb02161bb2c2a6c839e510cd409278/ for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/pull-tester)\n2. It adds/modifies tests which test network rules (thanks for doing that), which conflicts with a patch applied at test time\n3. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n4. The test suite fails on either Linux i386 or Win32\n5. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n\nIf you believe this to be in error, please ping BlueMatt on freenode or TheBlueMatt here.\n\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-26T16:38:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4392#issuecomment-47248900",
      "id" : 47248900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4392",
      "updated_at" : "2014-06-26T16:38:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47248900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   }
]
