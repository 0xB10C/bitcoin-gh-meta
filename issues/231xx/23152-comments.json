[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, conditional on that we are going to try make this be default for the release binaries (I don't mean in this PR). I'm generally not a fan of configure options that simply add cflags/linkerflags, but I think that's something for which to make an exception.\r\n\r\n> I had previously had a PR open to perform link time garbage collection (-ffunction-sections -fdata-sections -Wl,--gc-sections), in #18605, however moving straight to using LTO would be preferable.\r\n\r\nAgree. Function/data garbage collection is mostly an executable size concern, it doesn't, besides possibly better (and sometimes worse!) cache access patterns, affect performance.",
      "created_at" : "2021-10-01T07:54:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-931999086",
      "id" : 931999086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843jS1u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931999086/reactions"
      },
      "updated_at" : "2021-10-01T08:00:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931999086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Concept ACK, conditional on that we are going to try make this be default for the release binaries\r\n\r\nI've added `--enable-lto` to the configure for the Guix build, so it's easier for anyone to test/run those now as well.\r\n\r\nEDIT: Looks like this will need some changes to the Guix toolchains.",
      "created_at" : "2021-10-01T08:20:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932024116",
      "id" : 932024116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843jY80",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932024116/reactions"
      },
      "updated_at" : "2021-10-01T08:50:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932024116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is there a possibility to use -flto=jobserver? That makes GCC use make's parallel scheduler (so the argument to -j is available for multiple parallel compilations). It requires the linker's command in Makefile to be prepended with +.\n\nAlternatively, some way of setting N for -flto=N. Doing the entire LTO stage single-threadedly (the default, I think) would be very slow, especially on machines with lots of cores.\n\nOf course, none of this is a requirement to evaluate whether we want LTO or not.",
      "created_at" : "2021-10-01T13:34:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932234276",
      "id" : 932234276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843kMQk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932234276/reactions"
      },
      "updated_at" : "2021-10-01T13:35:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932234276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> EDIT: Looks like this will need some changes to the Guix toolchains.\r\n\r\nWhich reminds meâshould we enable lto for the depends build as well? I guess it's another separate decision, but it would allow for the most optimization opportunities.",
      "created_at" : "2021-10-01T14:07:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932261757",
      "id" : 932261757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843kS99",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932261757/reactions"
      },
      "updated_at" : "2021-10-01T14:07:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932261757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nSome LTO results from measurements made back in 2018 can be found in #14277 :)",
      "created_at" : "2021-10-01T14:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932281490",
      "id" : 932281490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843kXyS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932281490/reactions"
      },
      "updated_at" : "2021-10-01T14:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932281490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-10-01T14:51:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932298638",
      "id" : 932298638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843kb-O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932298638/reactions"
      },
      "updated_at" : "2021-10-01T14:51:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932298638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There seems to be a patch for automake to support -flto=jobserver, but it's not yet accepted: https://www.mail-archive.com/automake-patches@gnu.org/msg07973.html",
      "created_at" : "2021-10-01T15:03:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932308376",
      "id" : 932308376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843keWY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932308376/reactions"
      },
      "updated_at" : "2021-10-01T15:03:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932308376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I ran all of the benchmarks with clang++ 12.0.1, g++ 11.1.0 with and without `--enable-lto` on my Intel i7-8700. Some benchmarks results change quite a lot, and I also didn't expect that clang++ and g++ can behave so differently. But microbenchmark results should always be taken with a grain of salt.\r\n\r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|       44,850,331.00 |       41,649,957.00 |       45,752,245.00 |       44,851,254.00 | `AddrManAdd`\r\n|      115,908,612.00 |      108,865,250.00 |      118,227,091.00 |      115,271,712.00 | `AddrManAddThenGood`\r\n|          343,083.67 |          317,334.33 |          357,469.33 |          362,177.00 | `AddrManGetAddr`\r\n|              185.81 |              169.72 |              192.36 |              187.05 | `AddrManSelect`\r\n|          389,690.00 |          369,410.50 |          392,837.50 |          432,549.00 | `AssembleBlock`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              110.74 |              111.10 |               69.79 |               70.17 | `Base58CheckEncode`\r\n|               18.69 |               23.26 |               24.59 |               24.62 | `Base58Decode`\r\n|               76.33 |               77.01 |               41.60 |               42.04 | `Base58Encode`\r\n|                9.05 |                8.63 |                9.56 |                9.16 | `Bech32Decode`\r\n|               19.08 |               18.32 |               19.37 |               20.05 | `Bech32Encode`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              157.37 |              152.55 |              172.30 |              174.80 | `BenchLockedPool`\r\n|                4.09 |                2.50 |                4.38 |                5.02 | `BenchTimeDeprecated`\r\n|               24.05 |               20.26 |               24.00 |               20.58 | `BenchTimeMillis`\r\n|               21.95 |               20.16 |               22.97 |               20.63 | `BenchTimeMillisSys`\r\n|                2.21 |                0.31 |                1.56 |                0.63 | `BenchTimeMock`\r\n|       62,958,650.00 |       62,619,805.00 |       59,419,903.00 |       62,824,850.00 | `BlockToJsonVerbose`\r\n|       25,195,748.00 |       25,594,730.00 |       30,520,213.00 |       30,058,971.00 | `BlockToJsonVerboseWrite`\r\n|        1,028,430.00 |        1,084,184.00 |        1,233,630.00 |        1,286,939.00 | `BnBExhaustion`\r\n                                                                                                  \r\n|              clang++ ns/job |              clang++ lto ns/job |              g++ ns/job |              g++ lto ns/job | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              902.03 |              812.48 |              822.47 |              814.88 | `CCheckQueueSpeedPrevectorJob`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              329.16 |              298.86 |              354.83 |              347.61 | `CCoinsCaching`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|                1.98 |                1.93 |                1.93 |                1.92 | `CHACHA20_1MB`\r\n|                1.97 |                1.94 |                1.97 |                1.95 | `CHACHA20_256BYTES`\r\n|                2.06 |                2.04 |                2.07 |                2.06 | `CHACHA20_64BYTES`\r\n|                5.58 |                5.54 |                5.54 |                5.51 | `CHACHA20_POLY1305_AEAD_1MB_ENCRYPT_DECRYPT`\r\n|                2.74 |                2.79 |                2.77 |                2.76 | `CHACHA20_POLY1305_AEAD_1MB_ONLY_ENCRYPT`\r\n|                7.02 |                6.95 |                7.61 |                7.61 | `CHACHA20_POLY1305_AEAD_256BYTES_ENCRYPT_DECRYPT`\r\n|                3.53 |                3.47 |                3.82 |                3.78 | `CHACHA20_POLY1305_AEAD_256BYTES_ONLY_ENCRYPT`\r\n|               11.51 |               11.25 |               13.91 |               14.06 | `CHACHA20_POLY1305_AEAD_64BYTES_ENCRYPT_DECRYPT`\r\n|                5.80 |                5.68 |                6.94 |                6.95 | `CHACHA20_POLY1305_AEAD_64BYTES_ONLY_ENCRYPT`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|          547,191.50 |          542,479.50 |          559,722.50 |          552,408.50 | `CoinSelection`\r\n|      349,819,707.00 |      339,765,062.00 |      307,623,521.00 |      286,347,434.00 | `ComplexMemPool`\r\n                                                                                                  \r\n|             clang++ ns/elem |             clang++ lto ns/elem |             g++ ns/elem |             g++ lto ns/elem | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              183.01 |              171.14 |              159.75 |              159.41 | `ConstructGCSFilter`\r\n                                                                                                  \r\n|            clang++ ns/block |            clang++ lto ns/block |            g++ ns/block |            g++ lto ns/block | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|        6,413,984.00 |        6,106,104.00 |        6,165,040.00 |        6,470,182.00 | `DeserializeAndCheckBlockTest`\r\n|        5,317,655.00 |        5,157,372.00 |        5,142,803.00 |        5,225,309.00 | `DeserializeBlockTest`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|        7,837,080.00 |        7,805,025.00 |        7,807,746.00 |        7,867,452.00 | `DuplicateInputs`\r\n|           10,777.09 |            8,604.29 |           13,273.04 |           10,657.84 | `EvictionProtection0Networks250Candidates`\r\n|           16,693.46 |           12,104.46 |           17,841.92 |           14,626.06 | `EvictionProtection1Networks250Candidates`\r\n|           22,453.76 |           18,138.77 |           23,554.42 |           20,238.65 | `EvictionProtection2Networks250Candidates`\r\n|            3,773.30 |            3,281.87 |            4,258.64 |            3,979.64 | `EvictionProtection3Networks050Candidates`\r\n|           10,160.02 |            8,873.71 |           10,910.08 |           10,462.54 | `EvictionProtection3Networks100Candidates`\r\n|           24,539.60 |           20,099.13 |           26,483.08 |           23,736.26 | `EvictionProtection3Networks250Candidates`\r\n|                1.78 |                2.18 |                1.77 |                1.77 | `FastRandom_1bit`\r\n|               10.25 |               10.22 |                9.49 |                9.20 | `FastRandom_32bit`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|                3.21 |                3.20 |                3.18 |                3.19 | `HASH_1MB`\r\n|                5.02 |                4.88 |                5.01 |                4.99 | `HASH_256BYTES`\r\n|               10.50 |               10.02 |               10.52 |               10.41 | `HASH_64BYTES`\r\n                                                                                                  \r\n|             clang++ ns/elem |             clang++ lto ns/elem |             g++ ns/elem |             g++ lto ns/elem | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|           43,724.23 |           23,583.33 |           28,537.38 |           26,545.66 | `MatchGCSFilter`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|           24,054.61 |           23,268.32 |           24,299.66 |           23,389.98 | `MempoolEviction`\r\n                                                                                                  \r\n|             clang++ ns/leaf |             clang++ lto ns/leaf |             g++ ns/leaf |             g++ lto ns/leaf | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              142.35 |              139.38 |              138.71 |              238.02 | `MerkleRoot`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|            6,416.92 |            6,543.58 |            8,118.72 |            8,013.09 | `MuHash`\r\n|            5,345.43 |            5,501.68 |            7,129.37 |            6,946.70 | `MuHashDiv`\r\n|            5,370.88 |            5,496.21 |            7,062.38 |            6,948.19 | `MuHashMul`\r\n|            1,050.07 |            1,031.97 |            1,028.19 |              978.20 | `MuHashPrecompute`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|                0.79 |                0.79 |                0.83 |                0.83 | `POLY1305_1MB`\r\n|                0.87 |                0.88 |                0.89 |                0.89 | `POLY1305_256BYTES`\r\n|                1.08 |                1.08 |                1.09 |                1.09 | `POLY1305_64BYTES`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              233.72 |              218.40 |              229.82 |              229.67 | `PrePadded`\r\n|                4.96 |                8.15 |               15.31 |               15.00 | `PrevectorClearNontrivial`\r\n|                5.65 |                5.43 |                4.55 |                4.54 | `PrevectorClearTrivial`\r\n|              327.33 |              316.28 |              114.71 |              123.24 | `PrevectorDeserializeNontrivial`\r\n|               17.38 |               16.27 |               10.55 |               14.19 | `PrevectorDeserializeTrivial`\r\n|               10.30 |                7.97 |                7.23 |                7.04 | `PrevectorDestructorNontrivial`\r\n|               10.27 |                7.32 |                7.32 |                7.19 | `PrevectorDestructorTrivial`\r\n|                2.28 |                3.98 |                7.58 |                7.53 | `PrevectorResizeNontrivial`\r\n|                2.74 |                2.73 |                2.14 |                2.26 | `PrevectorResizeTrivial`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|                2.54 |                2.56 |                2.52 |                2.53 | `RIPEMD160`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|              443.48 |              427.45 |              441.40 |              441.89 | `RegularPadded`\r\n|              537.25 |              486.07 |              493.83 |              431.17 | `RollingBloom`\r\n|           32,004.94 |           33,067.62 |           35,217.81 |           33,502.58 | `RollingBloomReset`\r\n|       10,805,603.00 |       10,352,368.00 |       10,300,251.00 |       10,862,213.00 | `RpcMempool`\r\n                                                                                                  \r\n|             clang++ ns/byte |             clang++ lto ns/byte |             g++ ns/byte |             g++ lto ns/byte | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|                1.92 |                1.85 |                1.87 |                1.88 | `SHA1`\r\n|                3.21 |                3.19 |                3.18 |                3.19 | `SHA256`\r\n|                2.05 |                2.04 |                2.04 |                3.58 | `SHA256D64_1024`\r\n|                7.37 |                6.88 |                7.20 |                7.16 | `SHA256_32b`\r\n|                4.11 |                4.03 |                4.01 |                4.02 | `SHA3_256_1M`\r\n|                3.07 |                2.96 |                2.94 |                4.42 | `SHA512`\r\n                                                                                                  \r\n|               clang++ ns/op |               clang++ lto ns/op |               g++ ns/op |               g++ lto ns/op | benchmark\r\n|--------------------:|--------------------:|--------------------:|--------------------:|:----------\r\n|               29.88 |               29.51 |               28.23 |               28.05 | `SipHash_32b`\r\n|               10.09 |                9.84 |                8.68 |                8.97 | `Trig`\r\n|           83,430.64 |           77,216.85 |           83,367.50 |           88,736.58 | `VerifyNestedIfScript`\r\n|           96,481.36 |           94,740.30 |           97,176.62 |           96,895.70 | `VerifyScriptBench`\r\n|           37,446.16 |           38,476.75 |           40,102.65 |           36,176.27 | `WalletBalanceClean`\r\n|          254,368.50 |          241,829.00 |          278,516.50 |          262,199.75 | `WalletBalanceDirty`\r\n|           18,055.69 |           18,901.00 |           19,411.54 |           17,680.53 | `WalletBalanceMine`\r\n|           36,783.80 |           38,399.57 |           39,947.21 |           36,207.50 | `WalletBalanceWatch`\r\n",
      "created_at" : "2021-10-01T22:23:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932611057",
      "id" : 932611057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843loPx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932611057/reactions"
      },
      "updated_at" : "2021-10-01T22:23:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932611057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@martinus Man, that's a wildly inconsistent set of differences... I don't see anything really dramatic, though.",
      "created_at" : "2021-10-01T23:16:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932628920",
      "id" : 932628920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843lsm4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932628920/reactions"
      },
      "updated_at" : "2021-10-01T23:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932628920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've now calculated the geometric mean of all the benchmark results:\r\n\r\ngeomean of runtime (lower is better) | compiler\r\n---:|---\r\n500.60 | clang++ \r\n470.27 | clang++ lto\r\n501.78 | g++\r\n498.56 | g++ lto\r\n\r\nSo on average clang++ seems to benefit in the benchmarks, but for g++ the change is not significant. I'd say one needs to do more real world benchmarks to see if it's a benefit.\r\n\r\nOne other interesting observeration: When compiling with `--enable-lto` g++ seems to be able to detect more problems. E.g. it found this:\r\n\r\n```\r\nIn member function 'operator=',\r\n    inlined from 'Seed' at test/util/setup_common.cpp:66:33,\r\n    inlined from 'SeedInsecureRand' at ./test/util/setup_common.h:61:13,\r\n    inlined from '__ct_base ' at test/util/setup_common.cpp:105:21:\r\nrandom.cpp:702:19: warning: 'D.34682.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n  702 |     bitbuf = from.bitbuf;\r\n      |                   ^\r\ntest/util/setup_common.cpp: In member function '__ct_base ':\r\ntest/util/setup_common.cpp:66:33: note: '<anonymous>' declared here\r\n   66 |     ctx = FastRandomContext(seed);\r\n```\r\n\r\nThe `FastRandomContext(const uint256& seed)` constructor does not initialize the `uint64_t bitbuf` member, and in `FastRandomContext& operator=(FastRandomContext&& from) noexcept;` the uninitialized variable is copied with `bitbuf = from.bitbuf;` which technically is undefined behavior.",
      "created_at" : "2021-10-02T10:43:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932730690",
      "id" : 932730690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843mFdC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932730690/reactions"
      },
      "updated_at" : "2021-10-02T10:43:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932730690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 35a31d5f7e9cd71a210c1ed10abc9d772ff36049<br>(master) | commit 714cfae09db70a39178bf5c511e36f6a69ebf444<br>(master and this pull) |\n|--|--|--|\n| SHA256SUMS.part | [`492a0384086452ac...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/SHA256SUMS.part) |  |\n| *-aarch64-linux-gnu-debug.tar.gz | [`16867c76796473c4...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-aarch64-linux-gnu-debug.tar.gz) |  |\n| *-aarch64-linux-gnu.tar.gz | [`84f0fc972786971e...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-aarch64-linux-gnu.tar.gz) |  |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`5b359cfd87fe6818...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-arm-linux-gnueabihf-debug.tar.gz) |  |\n| *-arm-linux-gnueabihf.tar.gz | [`9e96ecfbf8c48873...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-arm-linux-gnueabihf.tar.gz) |  |\n| *-osx-unsigned.dmg | [`e5800e67dc17c84a...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-osx-unsigned.dmg) |  |\n| *-osx-unsigned.tar.gz | [`1a6e9cc4e80d90f8...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-osx-unsigned.tar.gz) |  |\n| *-osx64.tar.gz | [`8ecd00cb3ff5b3d8...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-osx64.tar.gz) |  |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`764ebaf4c6b477f9...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-powerpc64-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64-linux-gnu.tar.gz | [`a7edc8f7e6b99b6b...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-powerpc64-linux-gnu.tar.gz) |  |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`6c33e5a013404a04...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-powerpc64le-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64le-linux-gnu.tar.gz | [`d6325b26303e2ebe...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-powerpc64le-linux-gnu.tar.gz) |  |\n| *-riscv64-linux-gnu-debug.tar.gz | [`16c387740dbb267a...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-riscv64-linux-gnu-debug.tar.gz) |  |\n| *-riscv64-linux-gnu.tar.gz | [`4e7af7c1951b26c8...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-riscv64-linux-gnu.tar.gz) |  |\n| *-win-unsigned.tar.gz | [`48b2aa0938825646...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-win-unsigned.tar.gz) |  |\n| *-win64-debug.zip | [`06a1c171366eab17...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-win64-debug.zip) |  |\n| *-win64-setup-unsigned.exe | [`18ce9615047ca3d8...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-win64-setup-unsigned.exe) |  |\n| *-win64.zip | [`fb2c616343319e1c...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-win64.zip) |  |\n| *-x86_64-linux-gnu-debug.tar.gz | [`0f4f1b9674caec9d...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-x86_64-linux-gnu-debug.tar.gz) |  |\n| *-x86_64-linux-gnu.tar.gz | [`50c45e817dac2f49...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c-x86_64-linux-gnu.tar.gz) |  |\n| *.tar.gz | [`9108535d941ed527...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/bitcoin-35a31d5f7e9c.tar.gz) | [`a9e7069607b12094...`](https://drahtbot.space/guix/bitcoin/bitcoin/714cfae09db70a39178bf5c511e36f6a69ebf444/bitcoin-714cfae09db7.tar.gz) |\n| guix_build.log | [`4abd25ecdb41ec97...`](https://drahtbot.space/guix/bitcoin/bitcoin/35a31d5f7e9cd71a210c1ed10abc9d772ff36049/guix_build.log) | [`c0f963cc4b0cdf4f...`](https://drahtbot.space/guix/bitcoin/bitcoin/714cfae09db70a39178bf5c511e36f6a69ebf444/guix_build.log) |\n| guix_build.log.diff |  | [`801c2a9a90baa5a5...`](https://drahtbot.space/guix/bitcoin/bitcoin/714cfae09db70a39178bf5c511e36f6a69ebf444/guix_build.log.diff) |\n\n",
      "created_at" : "2021-10-02T13:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932753211",
      "id" : 932753211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843mK87",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932753211/reactions"
      },
      "updated_at" : "2021-10-02T13:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932753211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> One other interesting observeration: When compiling with `--enable-lto` g++ seems to be able to detect more problems. E.g. it found this:\r\n> \r\n> ```\r\n> In member function 'operator=',\r\n>     inlined from 'Seed' at test/util/setup_common.cpp:66:33,\r\n>     inlined from 'SeedInsecureRand' at ./test/util/setup_common.h:61:13,\r\n>     inlined from '__ct_base ' at test/util/setup_common.cpp:105:21:\r\n> random.cpp:702:19: warning: 'D.34682.bitbuf' may be used uninitialized [-Wmaybe-uninitialized]\r\n>   702 |     bitbuf = from.bitbuf;\r\n>       |                   ^\r\n> test/util/setup_common.cpp: In member function '__ct_base ':\r\n> test/util/setup_common.cpp:66:33: note: '<anonymous>' declared here\r\n>    66 |     ctx = FastRandomContext(seed);\r\n> ```\r\n> \r\n> The `FastRandomContext(const uint256& seed)` constructor does not initialize the `uint64_t bitbuf` member, and in `FastRandomContext& operator=(FastRandomContext&& from) noexcept;` the uninitialized variable is copied with `bitbuf = from.bitbuf;` which technically is undefined behavior.\r\n\r\nGreat find @martinus!\r\n\r\nEnabling more intelligent compiler reasoning is a very good reason for LTO :)\r\n\r\nAfter some testing I can confirm that the uninitialized read above is reachable from testing code.\r\n\r\nCan be verified by applying the following patch:\r\n\r\n```patch\r\ndiff --git a/src/random.cpp b/src/random.cpp\r\nindex 174f4cef3..73e946783 100644\r\n--- a/src/random.cpp\r\n+++ b/src/random.cpp\r\n@@ -693,13 +693,30 @@ FastRandomContext::FastRandomContext(bool fDeterministic) noexcept : requires_se\r\n     rng.SetKey(seed.begin(), 32);\r\n }\r\n\r\n+// Force Valgrind use-of-uninitialized memory (UUM) violation if `o` is uninitialized.\r\n+//\r\n+// As suggested by @guidovranken in https://github.com/bitcoin/bitcoin/issues/22064\r\n+template<typename T>\r\n+void ForceValgrindWarningIfUninitialized(const T& o) {\r\n+    static_assert(std::is_trivially_copyable<T>::value);\r\n+    FILE* f = fopen(\"/dev/null\", \"wb\");\r\n+    fwrite(&o, sizeof(o), 1, f);\r\n+    fclose(f);\r\n+}\r\n+\r\n FastRandomContext& FastRandomContext::operator=(FastRandomContext&& from) noexcept\r\n {\r\n+    ForceValgrindWarningIfUninitialized(from.requires_seed);\r\n     requires_seed = from.requires_seed;\r\n+    ForceValgrindWarningIfUninitialized(from.rng);\r\n     rng = from.rng;\r\n+    ForceValgrindWarningIfUninitialized(from.bytebuf);\r\n     std::copy(std::begin(from.bytebuf), std::end(from.bytebuf), std::begin(bytebuf));\r\n+    ForceValgrindWarningIfUninitialized(from.bytebuf_size);\r\n     bytebuf_size = from.bytebuf_size;\r\n+    ForceValgrindWarningIfUninitialized(from.bitbuf);\r\n     bitbuf = from.bitbuf;\r\n+    ForceValgrindWarningIfUninitialized(from.bitbuf_size);\r\n     bitbuf_size = from.bitbuf_size;\r\n     from.requires_seed = true;\r\n     from.bytebuf_size = 0;\r\n```\r\n\r\nAnd running `valgrind src/test/test_bitcoin -t addrman_tests/addrman_simple`:\r\n\r\n```\r\n==22209== Memcheck, a memory error detector\r\nâ¦\r\nRunning 1 test case...\r\n==22209== Syscall param write(buf) points to uninitialised byte(s)\r\n==22209==    at 0x736A264: write (write.c:27)\r\n==22209==    by 0x72E522C: _IO_file_write@@GLIBC_2.2.5 (fileops.c:1203)\r\n==22209==    by 0x72E6FC0: new_do_write (fileops.c:457)\r\n==22209==    by 0x72E6FC0: _IO_do_write@@GLIBC_2.2.5 (fileops.c:433)\r\n==22209==    by 0x72E637F: _IO_file_close_it@@GLIBC_2.2.5 (fileops.c:136)\r\n==22209==    by 0x72D83F6: fclose@@GLIBC_2.2.5 (iofclose.c:53)\r\n==22209==    by 0xDA86B7: ForceValgrindWarningIfUninitialized<unsigned char [64]> (random.cpp:704)\r\n==22209==    by 0xDA86B7: FastRandomContext::operator=(FastRandomContext&&) (random.cpp:713)\r\n==22209==    by 0x9CFD67: Seed(FastRandomContext&) (setup_common.cpp:66)\r\n==22209==    by 0x9D066B: SeedInsecureRand (setup_common.h:61)\r\n==22209==    by 0x9D066B: BasicTestingSetup::BasicTestingSetup(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<char const*, std::allocator<char const*> > const&) (setup_common.cpp:105)\r\n==22209==    by 0x3AB6BE: addrman_simple (addrman_tests.cpp:166)\r\nâ¦\r\n```",
      "created_at" : "2021-10-03T08:24:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-932887861",
      "id" : 932887861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843mr01",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932887861/reactions"
      },
      "updated_at" : "2021-10-03T08:24:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932887861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I ran a few `-reindex-chainstate` benchmarks overnight on my Intel i7 CPU:\r\n\r\nRunning `-assumevalid=00000000000000000002a23d6df20eecec15b21d32c75833cce28f113de888b7 -reindex-chainstate -stopatheight=400000 -dbcache=4000`\r\n\r\nuser [sec] | system [sec] | total [sec] | total relativ | compiler\r\n---:|---:|---:|---:|---\r\n1863.15 | 69.09 | 1932.24 | 100.00% | g++\r\n1852.46 | 68.42 | 1920.88 | 99.41% | g++ lto\r\n1827.73 | 69.73 | 1897.46 | 98.20% | clang++\r\n1788.40 | 70.35 | 1858.75 | 96.20% | clang++ lto\r\n\r\nRunning `-assumevalid=0 -reindex-chainstate -stopatheight=400000 -dbcache=4000`\r\n\r\nuser [sec] | system [sec] | total [sec] | total relative | compiler\r\n---:|---:|---:|---:|---\r\n35243.08 | 158.50 | 35401.58 | 100.00% | g++\r\n35491.77 | 154.54 | 35646.30 | 100.69% | g++ lto\r\n32663.09 | 158.60 | 32821.68 | 92.71% | clang++\r\n32184.18 | 154.70 | 32338.88 | 91.35% | clang++ lto\r\n\r\nMy takeaways:\r\n\r\n* `--enable-lto` seems to make g++ 11.1.0 builds slightly slower (but the change is not significant)\r\n* `--enable-lto` makes clang++ 12.0.1 builds slightly faster\r\n* clang 12.0.1 optimizes significantly better than g++ 11.1, especially when validating scripts (`-asumevalid=0`) This is in line with what [this phoronix article found](https://www.phoronix.com/scan.php?page=article&item=clang12-gcc11-icelake&num=1)\r\n\r\n\r\n\r\n",
      "created_at" : "2021-10-04T04:48:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-933140344",
      "id" : 933140344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843npd4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933140344/reactions"
      },
      "updated_at" : "2021-10-04T04:49:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933140344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@martinus thanks for the testing so far.\r\n\r\nFor more benchmarking / testing, I've added an additional commit which adds a `--enable-thin-lto` flag. Note that this is Clang only, and will run with much more parallelism than fat LTO.\r\n\r\nI've also added a commit that will partially fix using LTO in the Guix builds. After discussing with @dongcarl , we've realized that using the `gcc-*` wrappers for `ar`, `ranlib` etc is \"better\" when using LTO, as the required `--plugin` arguments will be setup automatically. I've successfully completed a `x86_64-linux-gnu` Guix build, with LTO, with this change.",
      "created_at" : "2021-10-04T06:23:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-933179113",
      "id" : 933179113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843ny7p",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933179113/reactions"
      },
      "updated_at" : "2021-10-04T06:23:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933179113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 9e530c6352c3e3d4f2936bbbb1bcb34ff9ca6378<br>(master) | commit c10ffc2e16405d5a877f5a1acc769c81e147d42c<br>(master and this pull) |\n|--|--|--|\n| *.tar.gz | [`1b1aae06add6cb19...`](https://drahtbot.space/guix/bitcoin/bitcoin/9e530c6352c3e3d4f2936bbbb1bcb34ff9ca6378/bitcoin-9e530c6352c3.tar.gz) | [`af5e88c96b8538b5...`](https://drahtbot.space/guix/bitcoin/bitcoin/c10ffc2e16405d5a877f5a1acc769c81e147d42c/bitcoin-c10ffc2e1640.tar.gz) |\n| guix_build.log | [`6b3a2a468bf3c035...`](https://drahtbot.space/guix/bitcoin/bitcoin/9e530c6352c3e3d4f2936bbbb1bcb34ff9ca6378/guix_build.log) | [`9419bf6f47594f2b...`](https://drahtbot.space/guix/bitcoin/bitcoin/c10ffc2e16405d5a877f5a1acc769c81e147d42c/guix_build.log) |\n| guix_build.log.diff |  | [`116e94a8eb6cc547...`](https://drahtbot.space/guix/bitcoin/bitcoin/c10ffc2e16405d5a877f5a1acc769c81e147d42c/guix_build.log.diff) |\n\n",
      "created_at" : "2021-10-05T04:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-934053165",
      "id" : 934053165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843rIUt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934053165/reactions"
      },
      "updated_at" : "2021-10-05T04:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934053165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722312368"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722312368"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If no runtime benefit can be observed with recent gcc, it would be surprising to see a benefit of lto with gcc-8. Lto might not be worth it for the release binaries unless they are also switched to use clang?",
      "commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "created_at" : "2021-10-05T14:40:39Z",
      "diff_hunk" : "@@ -237,7 +237,7 @@ mkdir -p \"$OUTDIR\"\n ###########################\n \n # CONFIGFLAGS\n-CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"\n+CONFIGFLAGS=\"--enable-lto --enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722312368",
      "id" : 722312368,
      "line" : 240,
      "node_id" : "PRRC_kwDOABII584rDZyw",
      "original_commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "contrib/guix/libexec/build.sh",
      "position" : 27,
      "pull_request_review_id" : 771545326,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722312368/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-05T14:40:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722312368",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722425908"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722425908"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If it's not slower, something could still be said for smaller binaries. ",
      "commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "created_at" : "2021-10-05T16:45:46Z",
      "diff_hunk" : "@@ -237,7 +237,7 @@ mkdir -p \"$OUTDIR\"\n ###########################\n \n # CONFIGFLAGS\n-CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"\n+CONFIGFLAGS=\"--enable-lto --enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722425908",
      "id" : 722425908,
      "in_reply_to_id" : 722312368,
      "line" : 240,
      "node_id" : "PRRC_kwDOABII584rD1g0",
      "original_commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "contrib/guix/libexec/build.sh",
      "position" : 27,
      "pull_request_review_id" : 771698034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722425908/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-05T16:45:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722425908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722428381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722428381"
         }
      },
      "author_association" : "MEMBER",
      "body" : "And I think what would still be interesting is to build the depends with `-lto` too, so that calls into dependencies can be optimized, and this might be able to shave off big parts of Qt.",
      "commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "created_at" : "2021-10-05T16:48:51Z",
      "diff_hunk" : "@@ -237,7 +237,7 @@ mkdir -p \"$OUTDIR\"\n ###########################\n \n # CONFIGFLAGS\n-CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"\n+CONFIGFLAGS=\"--enable-lto --enable-reduce-exports --disable-bench --disable-gui-tests --disable-fuzz-binary\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#discussion_r722428381",
      "id" : 722428381,
      "in_reply_to_id" : 722312368,
      "line" : 240,
      "node_id" : "PRRC_kwDOABII584rD2Hd",
      "original_commit_id" : "7a4758883ede8853c0e74ae66a2df68da0ce405c",
      "original_line" : 240,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "contrib/guix/libexec/build.sh",
      "position" : 27,
      "pull_request_review_id" : 771701209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23152",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722428381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-05T16:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/722428381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For GCC 8 it may be useful to try enabling `-flto-odr-type-merging`; that may detect certain calling mismatches (if `-Wodr` is enabled as well, but it is by default). In later GCCs the option disappeared; not sure why.",
      "created_at" : "2021-10-05T17:29:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-934615687",
      "id" : 934615687,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843tRqH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934615687/reactions"
      },
      "updated_at" : "2021-10-05T17:29:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934615687",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23203](https://github.com/bitcoin/bitcoin/pull/23203) ([POC] build: static musl libc based bitcoind (with LTO) by fanquake)\n* [#23049](https://github.com/bitcoin/bitcoin/pull/23049) ([WIP] net: implement a StratumV2 Template Provider in core by Fi3)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-10-06T12:44:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-936167209",
      "id" : 936167209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843zMcp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936167209/reactions"
      },
      "updated_at" : "2021-10-07T19:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936167209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/23152/commits/7a4758883ede8853c0e74ae66a2df68da0ce405c\r\n\r\nI tested/benched both `--enable-lto` and `--enable-thin-lto` with clang-12 and lld. Though gcc-9 supports LTO, apparently `lld` doesn't know how to work with gcc, so I didn't test that.\r\n\r\nThe differences I saw for a mid-chain 40,000 block IBD weren't as dramatic as I expected based on the results above. The dbcache here is the default (pretty low at 300), so I'll try rerunning with a much higher dbcache to see if that makes a difference. In any case, this changeset obviously works.\r\n\r\nWorth noting that the assumevalid value (000000000000000000176c192f42ad13ab159fdb20198b87e7ba3c001e47b876) I use here straddles the run, since its height is 522,000. \r\n\r\n**Edit:** just to be clear, these results show that LTO (or, really, clang-compiled binaries) are somehow marginally *slower* in this test than gcc. Kinda weird?\r\n\r\n---\r\n\r\n![ibd local range 500000 540000](https://user-images.githubusercontent.com/73197/136219170-7aefc130-f284-4f0c-9295-a9224220cee6.png)\r\n\r\n\r\n|          bench name           |                                                                                                    command                                                                                                     |\r\n|-------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.540000 | `bitcoind -dbcache=300 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 -assumevalid=000000000000000000176c192f42ad13ab159fdb20198b87e7ba3c001e47b876` |\r\n\r\n\r\n#### lto-clang-12 vs. thin-lto-clang-12 vs. gcc-9 (master) vs. clang-12 (master) (absolute)\r\n|                  bench name                   |  x  |        lto-clang-12         |      thin-lto-clang-12       |        gcc-9 (master)        |      clang-12 (master)       |\r\n|-----------------------------------------------|----:|-----------------------------|------------------------------|------------------------------|------------------------------|\r\n| build.make.8.total_secs                   |   1 | 582.0000 (Â± 0.0000)         | 515.0000 (Â± 0.0000)          | 469.0000 (Â± 0.0000)          | 349.0000 (Â± 0.0000)          |\r\n| build.make.8.peak_rss_KiB                 |   1 | 6124560.0000 (Â± 0.0000)     | 1843432.0000 (Â± 0.0000)      | 1865844.0000 (Â± 0.0000)      | 956092.0000 (Â± 0.0000)       |\r\n| build.make.8.cpu_kernel_secs              |   1 | 61.4100 (Â± 0.0000)          | 61.3100 (Â± 0.0000)           | 116.7600 (Â± 0.0000)          | 59.8800 (Â± 0.0000)           |\r\n| build.make.8.cpu_user_secs                |   1 | 3063.3200 (Â± 0.0000)        | 3809.7000 (Â± 0.0000)         | 3530.8800 (Â± 0.0000)         | 2654.3400 (Â± 0.0000)         |\r\n| ibd.local.range.500000.540000.total_secs      |   2 | 4593.6784 (Â± 98.6011)       | 4662.5669 (Â± 81.0513)        | 4526.9569 (Â± 122.6671)       | 4656.9325 (Â± 173.6344)       |\r\n| ibd.local.range.500000.540000.peak_rss_KiB    |   2 | 2468266.0000 (Â± 26734.0000) | 2269640.0000 (Â± 154632.0000) | 2275648.0000 (Â± 157012.0000) | 2288716.0000 (Â± 117284.0000) |\r\n| ibd.local.range.500000.540000.cpu_kernel_secs |   2 | 650.9050 (Â± 3.0050)         | 642.1900 (Â± 7.9500)          | 649.1850 (Â± 1.7650)          | 662.6350 (Â± 7.7250)          |\r\n| ibd.local.range.500000.540000.cpu_user_secs   |   2 | 13794.1000 (Â± 0.4800)       | 13864.0600 (Â± 35.5200)       | 14426.4950 (Â± 3.7650)        | 14008.0250 (Â± 13.4050)       |\r\n\r\n\r\n#### lto-clang-12 vs. thin-lto-clang-12 vs. gcc-9 (master) vs. clang-12 (master) (relative)\r\n|                  bench name                   |  x  | lto-clang-12 | thin-lto-clang-12 | gcc-9 (master) | clang-12 (master) |\r\n|-----------------------------------------------|----:|-------------:|------------------:|---------------:|------------------:|\r\n| build.make.8.total_secs                   |   1 |        1.668 |             1.476 |          1.344 |             1.000 |\r\n| build.make.8.peak_rss_KiB                 |   1 |        6.406 |             1.928 |          1.952 |             1.000 |\r\n| build.make.8.cpu_kernel_secs              |   1 |        1.026 |             1.024 |          1.950 |             1.000 |\r\n| build.make.8.cpu_user_secs                |   1 |        1.154 |             1.435 |          1.330 |             1.000 |\r\n| ibd.local.range.500000.540000.total_secs      |   2 |        1.015 |             1.030 |          1.000 |             1.029 |\r\n| ibd.local.range.500000.540000.peak_rss_KiB    |   2 |        1.088 |             1.000 |          1.003 |             1.008 |\r\n| ibd.local.range.500000.540000.cpu_kernel_secs |   2 |        1.014 |             1.000 |          1.011 |             1.032 |\r\n| ibd.local.range.500000.540000.cpu_user_secs   |   2 |        1.000 |             1.005 |          1.046 |             1.016 |\r\n\r\n",
      "created_at" : "2021-10-06T14:13:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-936312757",
      "id" : 936312757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII5843zv-1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936312757/reactions"
      },
      "updated_at" : "2021-10-06T14:20:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936312757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the numbers are actually not too different from mine. lto-clang-12 uses the least amount of CPU, and gcc-9 the most. I think that's the important metrics here, the actual runtime difference could be due to random chance (e.g. waiting for leveldb writes).",
      "created_at" : "2021-10-06T15:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-936538958",
      "id" : 936538958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58430nNO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936538958/reactions"
      },
      "updated_at" : "2021-10-06T15:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936538958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jamesob @martinus I couldn't tell from your results, but both of you compiled without depends, right?",
      "created_at" : "2021-10-06T17:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-936768933",
      "id" : 936768933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58431fWl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936768933/reactions"
      },
      "updated_at" : "2021-10-06T17:41:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936768933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke yeah I'm not running `make depends`: https://github.com/chaincodelabs/bitcoinperf/blob/master/runner/bitcoind.py#L441-L488",
      "created_at" : "2021-10-06T17:55:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-936795063",
      "id" : 936795063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58431lu3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936795063/reactions"
      },
      "updated_at" : "2021-10-06T17:55:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936795063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke no, I just configured, ran `make -j14 check` and then `bitcoind`",
      "created_at" : "2021-10-07T04:57:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-937445631",
      "id" : 937445631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58434Ej_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937445631/reactions"
      },
      "updated_at" : "2021-10-07T04:57:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937445631",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/14386?v=4",
         "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/martinus/followers",
         "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/martinus",
         "id" : 14386,
         "login" : "martinus",
         "node_id" : "MDQ6VXNlcjE0Mzg2",
         "organizations_url" : "https://api.github.com/users/martinus/orgs",
         "received_events_url" : "https://api.github.com/users/martinus/received_events",
         "repos_url" : "https://api.github.com/users/martinus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/martinus"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Benches with large DB cache (9000) are in. Interesting results in the relative table are bolded below.\r\n\r\n---\r\n\r\n|          bench name           |                                                                                                     command                                                                                                     |\r\n|-------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.540000 | `bitcoind -dbcache=9000 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 -assumevalid=000000000000000000176c192f42ad13ab159fdb20198b87e7ba3c001e47b876` |\r\n\r\n\r\n\r\n### lto-clang-12 vs. thin-lto-clang-12 vs. gcc-9 (master) vs. clang-12 (master) (absolute)\r\n|                  bench name                   |  x  |       lto-clang-12        |     thin-lto-clang-12     |       gcc-9 (master)       |     clang-12 (master)      |\r\n|-----------------------------------------------|----:|---------------------------|---------------------------|----------------------------|----------------------------|\r\n| build.make.8.gcc.total_secs                   |   1 | 586.0000 (Â± 0.0000)       | 515.0000 (Â± 0.0000)       | 459.0000 (Â± 0.0000)        | 346.0000 (Â± 0.0000)        |\r\n| build.make.8.gcc.peak_rss_KiB                 |   1 | 6120784.0000 (Â± 0.0000)   | 1805480.0000 (Â± 0.0000)   | 1866384.0000 (Â± 0.0000)    | 956064.0000 (Â± 0.0000)     |\r\n| build.make.8.gcc.cpu_kernel_secs              |   1 | 61.6600 (Â± 0.0000)        | 59.8500 (Â± 0.0000)        | 112.4300 (Â± 0.0000)        | 59.6300 (Â± 0.0000)         |\r\n| build.make.8.gcc.cpu_user_secs                |   1 | 3045.8600 (Â± 0.0000)      | 3812.3300 (Â± 0.0000)      | 3398.8500 (Â± 0.0000)       | 2639.3500 (Â± 0.0000)       |\r\n| ibd.local.range.500000.540000.total_secs      |   2 | 3413.4441 (Â± 21.9705)     | 3424.3078 (Â± 75.4325)     | 3533.6713 (Â± 3.3140)       | 3469.5077 (Â± 7.1294)       |\r\n| ibd.local.range.500000.540000.peak_rss_KiB    |   2 | 6262320.0000 (Â± 220.0000) | 6261344.0000 (Â± 620.0000) | 6259058.0000 (Â± 1330.0000) | 6259524.0000 (Â± 3872.0000) |\r\n| ibd.local.range.500000.540000.cpu_kernel_secs |   2 | 279.6500 (Â± 1.4900)       | 279.2600 (Â± 0.6200)       | 281.6750 (Â± 1.6750)        | 281.6800 (Â± 1.6400)        |\r\n| ibd.local.range.500000.540000.cpu_user_secs   |   2 | 12522.1300 (Â± 7.6300)     | 12644.4700 (Â± 19.7700)    | 13135.6450 (Â± 2.0050)      | 12697.3800 (Â± 16.7200)     |\r\n\r\n\r\n### lto-clang-12 vs. thin-lto-clang-12 vs. gcc-9 (master) vs. clang-12 (master) (relative)\r\n|                  bench name                   |  x  | lto-clang-12 | thin-lto-clang-12 | gcc-9 (master) | clang-12 (master) |\r\n|-----------------------------------------------|----:|-------------:|------------------:|---------------:|------------------:|\r\n| build.make.8.gcc.total_secs                   |   1 |        1.694 |             1.488 |          1.327 |             1.000 |\r\n| **build.make.8.gcc.peak_rss_KiB**                 |   1 |        **6.402** |             1.888 |          1.952 |             1.000 |\r\n| build.make.8.gcc.cpu_kernel_secs              |   1 |        1.034 |             1.004 |          1.885 |             1.000 |\r\n| build.make.8.gcc.cpu_user_secs                |   1 |        1.154 |             1.444 |          1.288 |             1.000 |\r\n| **ibd.local.range.500000.540000.total_secs**      |   2 |        1.000 |             1.003 |          **1.035** |             **1.016** |\r\n| ibd.local.range.500000.540000.peak_rss_KiB    |   2 |        1.001 |             1.000 |          1.000 |             1.000 |\r\n| ibd.local.range.500000.540000.cpu_kernel_secs |   2 |        1.001 |             1.000 |          1.009 |             1.009 |\r\n| ibd.local.range.500000.540000.cpu_user_secs   |   2 |        1.000 |             1.010 |          1.049 |             1.014 |\r\n",
      "created_at" : "2021-10-07T18:47:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-938061371",
      "id" : 938061371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58436a47",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938061371/reactions"
      },
      "updated_at" : "2021-10-07T18:47:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938061371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 113b863f0773999497f952daa6539a03a66a9de3<br>(master) | commit 1571f1a82883eebb22598ff45f535abc993339bf<br>(master and this pull) |\n|--|--|--|\n| SHA256SUMS.part | [`cef142e76613e81b...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/SHA256SUMS.part) | [`410cda60130118cd...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/SHA256SUMS.part) |\n| *-aarch64-linux-gnu-debug.tar.gz | [`adc3d28770776aef...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-aarch64-linux-gnu-debug.tar.gz) | [`8a32202f6762aaaf...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`98d5eefedff98988...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-aarch64-linux-gnu.tar.gz) | [`c7b1b368c4b23e71...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`f6039364f26dc133...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-arm-linux-gnueabihf-debug.tar.gz) | [`6a6288553fd80f1f...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`0c5c55979203b62a...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-arm-linux-gnueabihf.tar.gz) | [`cae3d2b950d6fdef...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-arm-linux-gnueabihf.tar.gz) |\n| *-osx-unsigned.dmg | [`ec644de45a41ea59...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-osx-unsigned.dmg) |  |\n| *-osx-unsigned.tar.gz | [`913228fa5ae5f6cc...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-osx-unsigned.tar.gz) |  |\n| *-osx64.tar.gz | [`ec065732196d4d84...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-osx64.tar.gz) |  |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`5ac7cc1a4a23bce9...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-powerpc64-linux-gnu-debug.tar.gz) | [`356d19427833ff27...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`65acd05354b5d45f...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-powerpc64-linux-gnu.tar.gz) | [`50440b34079ec304...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`58a17617fc3bce0b...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-powerpc64le-linux-gnu-debug.tar.gz) | [`f4a2c9f1977cd10d...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`51803987d606fe8f...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-powerpc64le-linux-gnu.tar.gz) | [`50cc489bec514f09...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`1a6a587ac8d82232...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-riscv64-linux-gnu-debug.tar.gz) | [`3e797263a9cff6ab...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`2dd1e3a266c00d59...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-riscv64-linux-gnu.tar.gz) | [`3c6093ee2e0ccd72...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-riscv64-linux-gnu.tar.gz) |\n| *-win-unsigned.tar.gz | [`8766d679ac4fda9e...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-win-unsigned.tar.gz) |  |\n| *-win64-debug.zip | [`a0ff6a43a6b029e3...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-win64-debug.zip) |  |\n| *-win64-setup-unsigned.exe | [`59c2e6aa554a9ce5...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-win64-setup-unsigned.exe) |  |\n| *-win64.zip | [`d445bf1337e6ca11...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-win64.zip) |  |\n| *-x86_64-linux-gnu-debug.tar.gz | [`8463e1b9f1a8bba6...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-x86_64-linux-gnu-debug.tar.gz) | [`d255387b7cddaaaf...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`e9533a964c50a19f...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773-x86_64-linux-gnu.tar.gz) | [`481c3628f171b015...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`d20968f10addb58f...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/bitcoin-113b863f0773.tar.gz) | [`fd654797d356eb34...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/bitcoin-1571f1a82883.tar.gz) |\n| guix_build.log | [`db438b6542214e61...`](https://drahtbot.space/guix/bitcoin/bitcoin/113b863f0773999497f952daa6539a03a66a9de3/guix_build.log) | [`37ee6b52d7dc72d3...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/guix_build.log) |\n| guix_build.log.diff |  | [`6388a41f2913c78d...`](https://drahtbot.space/guix/bitcoin/bitcoin/1571f1a82883eebb22598ff45f535abc993339bf/guix_build.log.diff) |\n\n",
      "created_at" : "2021-10-07T20:00:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23152#issuecomment-938112151",
      "id" : 938112151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23152",
      "node_id" : "IC_kwDOABII58436nSX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938112151/reactions"
      },
      "updated_at" : "2021-10-07T20:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938112151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
