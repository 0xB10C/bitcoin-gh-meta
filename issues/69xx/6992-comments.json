[
   {
      "body" : "Concept ACK. ",
      "created_at" : "2015-11-11T21:09:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992#issuecomment-155911428",
      "id" : 155911428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992",
      "updated_at" : "2015-11-11T21:09:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155911428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6992#discussion_r44590588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6992"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44590588"
         }
      },
      "body" : "This algorithm is done several times, and is a cluster to read.  Could you extract it out at all to make review easier?",
      "commit_id" : "32520bfb9e450522cc507faf30bf2eadecdf349b",
      "created_at" : "2015-11-11T21:43:10Z",
      "diff_hunk" : "@@ -2316,8 +2326,13 @@ static bool ActivateBestChainStep(CValidationState &state, CBlockIndex *pindexMo\n     }\n     }\n \n-    if (fBlocksDisconnected)\n-        mempool.TrimToSize(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000);\n+    if (fBlocksDisconnected) {\n+        size_t mempoolLimit = GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000;\n+        const double defaultPriorityLimit = (double) GetArg(\"-blockprioritysize\", DEFAULT_BLOCK_PRIORITY_SIZE) / (double) GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n+        size_t priorityLimit = GetArg(\"-prioritylimit\", defaultPriorityLimit * mempoolLimit);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992#discussion_r44590588",
      "id" : 44590588,
      "original_commit_id" : "32520bfb9e450522cc507faf30bf2eadecdf349b",
      "original_position" : 46,
      "path" : "src/main.cpp",
      "position" : 46,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6992",
      "updated_at" : "2015-11-11T21:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/44590588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "I'm not sure we need a separate 'space' for the priority transactions.\r\nConceptually the entire mempool algorithm shouldn't be more complicated than:\r\n\r\n* Sort transactions by descending, comparing fees, then priority.\r\n* Fees less than `minRelayTxFee` should be considered `0`, allowing priority to take precedence\r\n* Drop transactions on the lower part of the spectrum until ideal memory usage is met.\r\n\r\nEven a simplistic 'fitness' function could be used which combines priority and fees in a way that is considered sane, and that function used rather than this mix-match combination of fee/priority comparisons everywhere.\r\n\r\n**edit**: And then there is that which @TheBlueMatt points out,  is priority even worth it?",
      "created_at" : "2015-11-11T21:48:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992#issuecomment-155920268",
      "id" : 155920268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992",
      "updated_at" : "2015-11-11T21:54:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155920268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "NAK. I thought there was agreement that priority space is a bad idea in general. The amount of developer time that has gone into making priority space work properly is no where near the gains from having it.",
      "created_at" : "2015-11-11T21:52:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6992#issuecomment-155921181",
      "id" : 155921181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6992",
      "updated_at" : "2015-11-11T21:52:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155921181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
