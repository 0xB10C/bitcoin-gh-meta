[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/27375#pullrequestreview-1516100277), [willcl-ark](https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1630664257) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28020](https://github.com/bitcoin/bitcoin/pull/28020) (exclude ipc scheme from port check by JayBitron)\n* [#27071](https://github.com/bitcoin/bitcoin/pull/27071) (Handle CJDNS from LookupSubNet() by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-03-30T19:29:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1490826098",
      "id" : 1490826098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585Y3DNy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1490826098/reactions"
      },
      "updated_at" : "2023-07-11T11:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1490826098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154121825"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154121825"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think I'd go for `unix` here (but only because it's shorter).",
      "commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "created_at" : "2023-03-31T07:36:46Z",
      "diff_hunk" : "@@ -112,6 +112,7 @@ std::string GetNetworkName(enum Network net)\n     case NET_I2P: return \"i2p\";\n     case NET_CJDNS: return \"cjdns\";\n     case NET_INTERNAL: return \"internal\";\n+    case NET_UNIX: return \"unix_domain_socket\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154121825",
      "id" : 1154121825,
      "line" : 115,
      "node_id" : "PRRC_kwDOABII585EyoBh",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 115,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 4,
      "pull_request_review_id" : 1366408214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154121825/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154121825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154147617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154147617"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This needs to be shorter (< 92 chars?). From `man 7 unix`:\r\n\r\n```\r\n   Pathname sockets\r\n       When binding a socket to a pathname, a few rules should be observed for maximum portability and ease of coding:\r\n\r\n       *  The pathname in sun_path should be null-terminated.\r\n\r\n       *  The length of the pathname, including the terminating null byte, should not exceed the size of sun_path.\r\n\r\n       *  The addrlen argument that describes the enclosing sockaddr_un structure should have a value of at least:\r\n\r\n              offsetof(struct sockaddr_un, sun_path)+strlen(addr.sun_path)+1\r\n\r\n          or, more simply, addrlen can be specified as sizeof(struct sockaddr_un).\r\n\r\n       There is some variation in how implementations handle UNIX domain socket addresses that do not follow the above rules.  For example, some (but not all) implementations append a null terminator if none is present in the supplied\r\n       sun_path.\r\n\r\n       When coding portable applications, keep in mind that some implementations have sun_path as short as 92 bytes.\r\n```\r\n\r\nIt probably makes most sense to check this early on in _init.cpp_?",
      "commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "created_at" : "2023-03-31T07:59:36Z",
      "diff_hunk" : "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154147617",
      "id" : 1154147617,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585EyuUh",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 93,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : 21,
      "pull_request_review_id" : 1366408214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154147617/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154147617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154148265"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154148265"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "On the test this is trying to use a path `/private/var/folders/v7/fs2b0v3s0lz1n57gj9y4xb5m0000gn/T/cirrus-ci-build/ci/scratch/test_runner/test_runner_â¿_ð_20230331_010828/feature_proxy_156`...",
      "commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "created_at" : "2023-03-31T08:00:15Z",
      "diff_hunk" : "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154148265",
      "id" : 1154148265,
      "in_reply_to_id" : 1154147617,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII585Eyuep",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 93,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : 21,
      "pull_request_review_id" : 1366408214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154148265/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154148265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154156655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154156655"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I wonder if this should be a `Warning` or at least an `Info` level message?",
      "commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "created_at" : "2023-03-31T08:08:57Z",
      "diff_hunk" : "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154156655",
      "id" : 1154156655,
      "line" : 527,
      "node_id" : "PRRC_kwDOABII585Eywhv",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 527,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 1366408214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154156655/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154156655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154205583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154205583"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Im curious why you didn't enable it for `-onion` here, as it seems a compartiviely small addtion:\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex c0a320136..53b6b2a4b 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1283,8 +1283,8 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n             std::string host_out;\r\n             uint16_t port_out{0};\r\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\r\n-                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\r\n-                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\r\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\r\n+                if ((port_option != \"-proxy\" || port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {\r\n                     return InitError(InvalidPortErrMsg(port_option, socket_addr));\r\n                 }\r\n             }\r\n```",
      "commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "created_at" : "2023-03-31T08:48:07Z",
      "diff_hunk" : "@@ -1283,7 +1283,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n-                return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\n+                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154205583",
      "id" : 1154205583,
      "line" : 1287,
      "node_id" : "PRRC_kwDOABII585Ey8eP",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 1287,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 1366408214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154205583/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T09:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154205583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154738130"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154738130"
         }
      },
      "author_association" : "MEMBER",
      "body" : "To literally answer your question: I was not clear on what `-onion` actually does! Now I do, adding this in next update.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-03-31T17:41:21Z",
      "diff_hunk" : "@@ -1283,7 +1283,10 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n-                return InitError(InvalidPortErrMsg(port_option, socket_addr));\n+                // Allow unix domain sockets for proxy e.g. unix:/some/file/path\n+                if (port_option != \"-proxy\" || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154738130",
      "id" : 1154738130,
      "in_reply_to_id" : 1154205583,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E0-fS",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 1287,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1367343663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154738130/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T18:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154738130",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I only added this for my own debugging, we could even just take it out. There is also a \"proxy failed to initialize\" error message in `Socks5()` which will get thrown by `ConnectThroughProxy()` below.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-03-31T17:43:05Z",
      "diff_hunk" : "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739487",
      "id" : 1154739487,
      "in_reply_to_id" : 1154156655,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E0-0f",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 527,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1367343663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739487/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T18:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739870"
         }
      },
      "author_association" : "MEMBER",
      "body" : "agreed, updated.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-03-31T17:43:37Z",
      "diff_hunk" : "@@ -112,6 +112,7 @@ std::string GetNetworkName(enum Network net)\n     case NET_I2P: return \"i2p\";\n     case NET_CJDNS: return \"cjdns\";\n     case NET_INTERNAL: return \"internal\";\n+    case NET_UNIX: return \"unix_domain_socket\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154739870",
      "id" : 1154739870,
      "in_reply_to_id" : 1154121825,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E0-6e",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 115,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1367343663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739870/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T18:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154739870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154783411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154783411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah this one may be tricky to work around. Some of the CI temp dir paths are crazy long like that. I'm going to add an init check & test to throw on socket paths longer than 92 characters. For the sake of passing the tests, I'll try using a temp path that is in the parent of `test_runner_...` and we'll see if that is short enough to pass on the CI VMs.\r\n\r\n",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-03-31T18:36:39Z",
      "diff_hunk" : "@@ -89,13 +90,22 @@ def setup_nodes(self):\n         else:\n             self.log.warning(\"Testing without local IPv6 support\")\n \n+        socket_path = os.path.join(self.options.tmpdir, \"socket_path\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1154783411",
      "id" : 1154783411,
      "in_reply_to_id" : 1154147617,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585E1Jiz",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 93,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : null,
      "pull_request_review_id" : 1367343663,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154783411/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-03-31T18:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1154783411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-04-01T23:05:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1493164967",
      "id" : 1493164967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585Y_-On",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493164967/reactions"
      },
      "updated_at" : "2023-04-01T23:05:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1493164967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165103364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165103364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CreateSock()` already logs a detailed message if it returns `nullptr`. This `LogPrintLevel()` call here is redundant.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T07:16:48Z",
      "diff_hunk" : "@@ -524,8 +524,10 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         } else if (use_proxy) {\n             sock = CreateSock(proxy.proxy);\n             if (!sock) {\n+                LogPrintLevel(BCLog::PROXY, BCLog::Level::Debug, \"Failed to create socket to proxy: %s\\n\", proxy.proxy.ToStringAddr());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165103364",
      "id" : 1165103364,
      "in_reply_to_id" : 1154156655,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FchEE",
      "original_commit_id" : "7785e4d1796f3deb746916e6fc89f00990fb28cd",
      "original_line" : 527,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165103364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165103364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165186109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165186109"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is dangerous. Better check the size before copying (untested):\r\n\r\n```suggestion\r\n        const std::string path{fs::PathToString(m_path)};\r\n        if (sizeof(paddrun->sun_path) < path.length() + 1) {\r\n            return false;\r\n        }\r\n        memcpy(paddrun->sun_path, path.c_str(), path.length() + 1);\r\n```\r\n",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T08:28:20Z",
      "diff_hunk" : "@@ -897,6 +919,17 @@ bool CService::GetSockAddr(struct sockaddr* paddr, socklen_t *addrlen) const\n         paddrin6->sin6_port = htons(port);\n         return true;\n     }\n+#if HAVE_SOCKADDR_UN\n+    if (IsUnix()) {\n+        if (*addrlen < (socklen_t)sizeof(struct sockaddr_un))\n+            return false;\n+        struct sockaddr_un* paddrun = (struct sockaddr_un*)paddr;\n+        paddrun->sun_family = AF_UNIX;\n+        strcpy(paddrun->sun_path, fs::PathToString(m_path).c_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165186109",
      "id" : 1165186109,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Fc1Q9",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 928,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165186109/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165186109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165198178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165198178"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This looks wrong as `paddrun` is a pointer (`sizeof(paddrun)` will be always 8 bytes on 64 bit computers). According to https://www.man7.org/linux/man-pages/man7/unix.7.html it should be:\r\n\r\n```cpp\r\noffsetof(struct sockaddr_un, sun_path)+strlen(addr.sun_path)+1\r\n```\r\n\r\nFreeBSD has this, defined in `sys/un.h`:\r\n\r\n```cpp\r\n#define SUN_LEN(su) \\\r\n        (sizeof(*(su)) - sizeof((su)->sun_path) + strlen((su)->sun_path))\r\n```\r\n\r\nand Linux has:\r\n\r\n```cpp\r\n/* Evaluate to actual length of the `sockaddr_un' structure.  */\r\n# define SUN_LEN(ptr) ((size_t) (((struct sockaddr_un *) 0)->sun_path)        \\\r\n                      + strlen ((ptr)->sun_path))\r\n```",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T08:37:59Z",
      "diff_hunk" : "@@ -897,6 +919,17 @@ bool CService::GetSockAddr(struct sockaddr* paddr, socklen_t *addrlen) const\n         paddrin6->sin6_port = htons(port);\n         return true;\n     }\n+#if HAVE_SOCKADDR_UN\n+    if (IsUnix()) {\n+        if (*addrlen < (socklen_t)sizeof(struct sockaddr_un))\n+            return false;\n+        struct sockaddr_un* paddrun = (struct sockaddr_un*)paddr;\n+        paddrun->sun_family = AF_UNIX;\n+        strcpy(paddrun->sun_path, fs::PathToString(m_path).c_str());\n+        *addrlen = strlen(paddrun->sun_path) + sizeof(paddrun);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165198178",
      "id" : 1165198178,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Fc4Ni",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 929,
      "original_position" : 96,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165198178/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165198178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165249878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165249878"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Better check the actual `sun_path` on the system, and also `sun_path` is supposed to contain the terminating `'\\0'`:\r\n\r\n```suggestion\r\n        if (str.size() + 1 > sizeof(sockaddr_un::sun_path)) {\r\n            return false;\r\n        }\r\n```",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T09:16:07Z",
      "diff_hunk" : "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket\n+    if (name.find(ADDR_PREFIX_UNIX) == 0) {\n+        // split off \"unix:\" prefix\n+        std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+        // https://www.man7.org/linux/man-pages/man7/unix.7.html\n+        //   \"When coding portable applications, keep in mind that some\n+        //   implementations have sun_path as short as 92 bytes.\"\n+        if (str.size() > 92)\n+            return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165249878",
      "id" : 1165249878,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdE1W",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 233,
      "original_position" : 31,
      "original_start_line" : 229,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165249878/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165249878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165255786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165255786"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "style: from `doc/developer-notes.md`:\r\n\r\n  - If an `if` only has a single-statement `then`-clause, it can appear\r\n    on the same line as the `if`, without braces. In every other case,\r\n    braces are required, and the `then` and `else` clauses must appear\r\n    correctly indented on a new line.\r\n",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T09:20:46Z",
      "diff_hunk" : "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket\n+    if (name.find(ADDR_PREFIX_UNIX) == 0) {\n+        // split off \"unix:\" prefix\n+        std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+        // https://www.man7.org/linux/man-pages/man7/unix.7.html\n+        //   \"When coding portable applications, keep in mind that some\n+        //   implementations have sun_path as short as 92 bytes.\"\n+        if (str.size() > 92)\n+            return false;\n+\n+        fs::path path = fs::PathFromString(str);\n+        if (!fs::exists(path))\n+            return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165255786",
      "id" : 1165255786,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdGRq",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 237,
      "original_position" : 35,
      "original_start_line" : 236,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165255786/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165255786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165266423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165266423"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It is a bit odd to support `unix:/path/to/socket` in `Lookup()` because there is nothing to lookup in that and it is not like the other inputs supported by `Lookup()` begin with the socket type, e.g. `ipv4://1.2.3.4`.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T09:29:34Z",
      "diff_hunk" : "@@ -219,6 +220,26 @@ bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool\n     if (!ContainsNoNUL(name)) {\n         return false;\n     }\n+\n+    // unix domain socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165266423",
      "id" : 1165266423,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdI33",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 224,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165266423/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165266423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165267691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165267691"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unrelated change.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T09:30:38Z",
      "diff_hunk" : "@@ -391,7 +412,7 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n         return false;\n     }\n     if (pchRet1[0] != SOCKSVersion::SOCKS5) {\n-        return error(\"Proxy failed to initialize\");\n+        return error(\"Proxy failed to initialize.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165267691",
      "id" : 1165267691,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdJLr",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 415,
      "original_position" : 49,
      "original_start_line" : 394,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165267691/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165267691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165281204"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165281204"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It is odd to have `CreateSockTCP()` create a non-TCP socket.\r\n\r\nAlso, the code below sets `TCP_NODELAY` on the socket which does not apply to UNIX sockets.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T09:40:58Z",
      "diff_hunk" : "@@ -493,8 +514,10 @@ std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n     }\n \n     // Create a TCP socket in the address family of the specified service.\n-    SOCKET hSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP);\n+    int protocol = address_family.IsUnix() ? 0 : IPPROTO_TCP;\n+    SOCKET hSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, protocol);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165281204",
      "id" : 1165281204,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdMe0",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 518,
      "original_position" : 59,
      "original_start_line" : 516,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165281204/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165281204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165311055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165311055"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It is better to stay inside the individual test directory. This allows running multiple tests in parallel. With the above code multiple tests will collide on the common `/tmp/sockpath`.\r\n\r\n`/tmp/bitcoin_func_test_99opr6sq/socks5_proxy` is just 44 chars, should be below the limit on any platform, even if TMPDIR expands to something longer than `/tmp`.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T10:07:34Z",
      "diff_hunk" : "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165311055",
      "id" : 1165311055,
      "line" : 67,
      "node_id" : "PRRC_kwDOABII585FdTxP",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 67,
      "original_position" : 32,
      "original_start_line" : 66,
      "path" : "test/functional/feature_proxy.py",
      "position" : 32,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165311055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 66,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165311055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165314489"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165314489"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that the actual limit is platform-dependent, I would suggest to pass something really longer here, e.g. 1000 or 5000 chars.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T10:10:50Z",
      "diff_hunk" : "@@ -383,6 +437,18 @@ def networks_dict(d):\n         msg = \"Error: Unknown network specified in -onlynet: 'abc'\"\n         self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing too-long unix path to -proxy raises init error\")\n+        self.nodes[1].extra_args = [f\"-proxy=unix:{'x' * 93}\"]\n+        if self.have_unix_sockets:\n+            msg = f\"Error: Invalid -proxy address or hostname: 'unix:{'x' * 93}'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165314489",
      "id" : 1165314489,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585FdUm5",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 443,
      "original_position" : 134,
      "original_start_line" : 440,
      "path" : "test/functional/feature_proxy.py",
      "position" : null,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165314489/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165314489",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165330624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165330624"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The include is introduced in the first commit and surrounded by `#if HAVE_SOCKADDR_UN` in the second commit. This means that the first commit is not self-contained (would not compile on some platforms). Better introduce the configure check first.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T10:26:47Z",
      "diff_hunk" : "@@ -20,6 +20,10 @@\n #include <iterator>\n #include <tuple>\n \n+#if HAVE_SOCKADDR_UN\n+#include <sys/un.h>\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165330624",
      "id" : 1165330624,
      "line" : 25,
      "node_id" : "PRRC_kwDOABII585FdYjA",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 25,
      "original_position" : 6,
      "original_start_line" : 23,
      "path" : "src/netaddress.cpp",
      "position" : 6,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165330624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 23,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165330624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165338076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165338076"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If this approach is chosen (to extend `CNetAddr` to support unix file addresses), then it would be better to store the path in the `m_addr` member instead of introducing a new one. `m_addr` is a vector of `uint8_t` - that is generic enough to store anything in it.\r\n\r\n`sizeof(CNetAddr)` on `master` is 32 and `sizeof(fs::path)` is 24 bytes, so `CNetAddr` would become almost twice as big.",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T10:34:32Z",
      "diff_hunk" : "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165338076",
      "id" : 1165338076,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585FdaXc",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 149,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 35,
      "pull_request_review_id" : 1382786000,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165338076/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T15:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165338076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165801803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165801803"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See this ci failure: https://cirrus-ci.com/task/5039125594636288?logs=ci#L2638-L2640\r\n\r\nThis is why I used a shorter path, sometimes TMPDIR is > 50 characters! You have a good point about getting max `sun_path` from the system though, maybe it will balance out\r\n\r\n```\r\nFile \"/private/var/folders/v7/fs2b0v3s0lz1n57gj9y4xb5m0000gn/T/cirrus-ci-build/ci/scratch/build/bitcoin-arm64-apple-darwin/test/functional/test_framework/socks5.py\", line 131, in __init__\r\nself.s.bind(conf.addr)\r\nOSError: AF_UNIX path too long\r\n```",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T16:55:14Z",
      "diff_hunk" : "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1165801803",
      "id" : 1165801803,
      "in_reply_to_id" : 1165311055,
      "line" : 67,
      "node_id" : "PRRC_kwDOABII585FfLlL",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 67,
      "original_position" : 32,
      "original_start_line" : 66,
      "path" : "test/functional/feature_proxy.py",
      "position" : 32,
      "pull_request_review_id" : 1383845487,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165801803/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 66,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-13T16:55:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165801803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks so much for the great review @vasild I think I addressed all your feedback up to the adding UNIX to CNetAddr. I understand your concerns there and we can chat about it, I'll look at alternatives as well. What I did do in this last push was mostly separate unix sockets from regular sockets, and adding `Proxy.GetSocket()` to decide which socket factory to call.",
      "created_at" : "2023-04-13T20:33:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1507577994",
      "id" : 1507577994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585Z29CK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1507577994/reactions"
      },
      "updated_at" : "2023-04-13T20:33:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1507577994",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166002075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166002075"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm a bit intimidated by the syntax `prevector<ADDR_IPV6_SIZE, uint8_t> m_addr{ADDR_IPV6_SIZE, 0x0};` -- is that only 16 bytes?",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-13T20:38:00Z",
      "diff_hunk" : "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166002075",
      "id" : 1166002075,
      "in_reply_to_id" : 1165338076,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585Ff8eb",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 149,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 35,
      "pull_request_review_id" : 1384170843,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166002075/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-13T20:38:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166002075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166712133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166712133"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I see. Then, to avoid multiple tests colliding on `/tmp/socket`, maybe this:\r\n\r\n```python\r\nsocket_path = os.path.join(tempfile.TemporaryDirectory(), \"s\")\r\n```",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-14T11:19:57Z",
      "diff_hunk" : "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since socket paths have a 92-char limit\n+socket_path = os.path.join(tempfile.gettempdir(), \"sockpath\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166712133",
      "id" : 1166712133,
      "in_reply_to_id" : 1165311055,
      "line" : 67,
      "node_id" : "PRRC_kwDOABII585Fip1F",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 67,
      "original_position" : 32,
      "original_start_line" : 66,
      "path" : "test/functional/feature_proxy.py",
      "position" : 32,
      "pull_request_review_id" : 1385270065,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166712133/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 66,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-04-14T11:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166712133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166722759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166722759"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It begins its life with 16 bytes pre-allocated (without using `new` or `malloc()`), but this is just an optimization which can be ignored. It is supposed to behave like `std::vector`.\r\n\r\nSomething like this should work to store `std::string` in it (untested):\r\n\r\n```cpp\r\nstd::string path = ...;\r\nm_addr.assign(path.begin(), path.end());\r\n```",
      "commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "created_at" : "2023-04-14T11:33:02Z",
      "diff_hunk" : "@@ -136,9 +143,16 @@ class CNetAddr\n      */\n     uint32_t m_scope_id{0};\n \n+    /**\n+     * Filesystem path for unix domain socket (NET_UNIX)\n+     */\n+    fs::path m_path;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166722759",
      "id" : 1166722759,
      "in_reply_to_id" : 1165338076,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585FisbH",
      "original_commit_id" : "44dd4cb505a4e1e7258997a9b687be59760dcdbb",
      "original_line" : 149,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 35,
      "pull_request_review_id" : 1385287222,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166722759/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-04-14T11:33:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166722759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166806386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166806386"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unrelated change, I am not sure I fully understand. Is it the case that before the message was `Define this symbol to build code that uses getauxval)` and this change just fixes the message to not have a trailing `)`?",
      "commit_id" : "77c02efdf551bce0d0a1ab462dd5c5da6a2a948c",
      "created_at" : "2023-04-14T12:59:10Z",
      "diff_hunk" : "@@ -1260,10 +1260,23 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n   ]], [[\n     getauxval(AT_HWCAP);\n   ]])],\n- [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval)]) ],\n+ [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval]) ],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1166806386",
      "id" : 1166806386,
      "line" : 1263,
      "node_id" : "PRRC_kwDOABII585FjA1y",
      "original_commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "original_line" : 1263,
      "original_position" : 5,
      "original_start_line" : 1263,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 1385416057,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166806386/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1263,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-05-16T06:18:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1166806386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1194955775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194955775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah",
      "commit_id" : "77c02efdf551bce0d0a1ab462dd5c5da6a2a948c",
      "created_at" : "2023-05-16T10:28:26Z",
      "diff_hunk" : "@@ -1260,10 +1260,23 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n   ]], [[\n     getauxval(AT_HWCAP);\n   ]])],\n- [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval)]) ],\n+ [ AC_MSG_RESULT([yes]); HAVE_STRONG_GETAUXVAL=1; AC_DEFINE([HAVE_STRONG_GETAUXVAL], [1], [Define this symbol to build code that uses getauxval]) ],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1194955775",
      "id" : 1194955775,
      "in_reply_to_id" : 1166806386,
      "line" : 1263,
      "node_id" : "PRRC_kwDOABII585HOZP_",
      "original_commit_id" : "2c19dd7c1a6aaf5cf7f879ae5aa51683de2ced13",
      "original_line" : 1263,
      "original_position" : 5,
      "original_start_line" : 1263,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 1428254173,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194955775/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1263,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-05-16T10:28:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1194955775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild did an overhaul of this PR and implemented more how we discussed on IRC. Edited the description to explain. I ended up not using `std::variant` because I felt it added uneeded complexity. Current approach is `Proxy` just has a `is_unix` flag and abstracts away the `CService` methods like `IsValid()` etc to support TCP or UNIX sockets",
      "created_at" : "2023-05-26T18:58:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1564803705",
      "id" : 1564803705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585dRQJ5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564803705/reactions"
      },
      "updated_at" : "2023-05-26T18:58:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1564803705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-05-30T15:53:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1568681579",
      "id" : 1568681579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585dgC5r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568681579/reactions"
      },
      "updated_at" : "2023-05-30T15:53:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1568681579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\r\n\r\nðº ",
      "created_at" : "2023-05-30T20:30:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1569053476",
      "id" : 1569053476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585dhdsk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569053476/reactions"
      },
      "updated_at" : "2023-05-30T20:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1569053476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217480535"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217480535"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The comment gives the impression that `sa_family_t` is defined on Windows (as `u_short`), but it is not defined at all (otherwise this `typedef u_short sa_family_t;` would not compile because it redefines it, right?). Maybe reword the comment to something like:\r\n\r\n```cpp\r\n// Windows does not have `sa_family_t` - it defines `sockaddr::sa_family` as `u_short`.\r\n// Thus define `sa_family_t` on Windows too so that the rest of the code can use `sa_family_t`.\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T04:55:31Z",
      "diff_hunk" : "@@ -37,6 +37,12 @@\n #include <unistd.h>\n #endif\n \n+// Linux defines sa_family_t as `unsigned short` but on Windows it's `u_short`\n+// See https://learn.microsoft.com/en-us/windows/win32/api/winsock/ns-winsock-sockaddr#syntax\n+#ifdef WIN32\n+typedef u_short sa_family_t;\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217480535",
      "id" : 1217480535,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII585IkUdX",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 44,
      "original_position" : 8,
      "original_start_line" : 40,
      "path" : "src/compat/compat.h",
      "position" : 8,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217480535/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 40,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217480535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217685437"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217685437"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "TCP is a specific protocol ([at layer 4 in the OSI model](https://en.wikipedia.org/wiki/OSI_model)) while this refers to layer 3. Maybe rename it to something like `GetProtocolFamily()`, `GetAddressFamily()`, `GetFamily()` or `GetSAFamily()`.",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:05:08Z",
      "diff_hunk" : "@@ -529,6 +529,7 @@ class CService : public CNetAddr\n     uint16_t GetPort() const;\n     bool GetSockAddr(struct sockaddr* paddr, socklen_t* addrlen) const;\n     bool SetSockAddr(const struct sockaddr* paddr);\n+    [[nodiscard]] sa_family_t GetTCPFamily() const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217685437",
      "id" : 1217685437,
      "line" : 532,
      "node_id" : "PRRC_kwDOABII585IlGe9",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 532,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 4,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217685437/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217685437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217688663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217688663"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        return AF_UNSPEC;\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:07:51Z",
      "diff_hunk" : "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;\n+    default:\n+        return AF_UNSPEC; // Not TCP",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217688663",
      "id" : 1217688663,
      "line" : 854,
      "node_id" : "PRRC_kwDOABII585IlHRX",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 854,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 12,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217688663/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217688663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217689114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217689114"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unnecessary empty line.",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:08:14Z",
      "diff_hunk" : "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;\n+    default:\n+        return AF_UNSPEC; // Not TCP\n+    }\n+\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217689114",
      "id" : 1217689114,
      "line" : 857,
      "node_id" : "PRRC_kwDOABII585IlHYa",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 857,
      "original_position" : 15,
      "original_start_line" : 855,
      "path" : "src/netaddress.cpp",
      "position" : 15,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217689114/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 855,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217689114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217692250"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217692250"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CService::GetSockAddr()` treats CJDNS as IPv6. So:\r\n```suggestion\r\n    case NET_IPV6:\r\n    case NET_CJDNS:\r\n        return AF_INET6;\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:10:57Z",
      "diff_hunk" : "@@ -843,6 +843,19 @@ bool CService::SetSockAddr(const struct sockaddr *paddr)\n     }\n }\n \n+sa_family_t CService::GetTCPFamily() const\n+{\n+    switch (m_net) {\n+    case NET_IPV4:\n+        return AF_INET;\n+    case NET_IPV6:\n+        return AF_INET6;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217692250",
      "id" : 1217692250,
      "line" : 852,
      "node_id" : "PRRC_kwDOABII585IlIJa",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 852,
      "original_position" : 10,
      "original_start_line" : 851,
      "path" : "src/netaddress.cpp",
      "position" : 10,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217692250/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 851,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217692250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217700884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217700884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`sa_family_t` is cheap to copy. No need to pass it as a const reference:\r\n\r\n```cpp\r\nstd::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:17:13Z",
      "diff_hunk" : "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217700884",
      "id" : 1217700884,
      "line" : 216,
      "node_id" : "PRRC_kwDOABII585IlKQU",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 216,
      "original_position" : 69,
      "original_start_line" : 185,
      "path" : "src/netbase.h",
      "position" : 69,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217700884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 185,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217700884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217719465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217719465"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "All tuning that happens to the socket below in this function seems relevant to UNIX sockets too, except `TCP_NODELAY`.\r\n\r\n```diff\r\n--- i/src/netbase.cpp\r\n+++ w/src/netbase.cpp\r\n@@ -484,23 +484,21 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\r\n \r\n std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\r\n {\r\n     // Not IPv4, IPv6 or UNIX\r\n     if (address_family == AF_UNSPEC) return nullptr;\r\n \r\n+    int protocol{IPPROTO_TCP};\r\n #if HAVE_SOCKADDR_UN\r\n-    // Create a UNIX socket.\r\n     if (address_family == AF_UNIX) {\r\n-        SOCKET hSocket = socket(AF_UNIX, SOCK_STREAM, 0);\r\n-        if (hSocket == INVALID_SOCKET) return nullptr;\r\n-        return std::make_unique<Sock>(hSocket);\r\n+        protocol = 0;\r\n     }\r\n #endif\r\n \r\n-    // Create a TCP socket in the address family of the specified service.\r\n-    SOCKET hSocket = socket(address_family, SOCK_STREAM, IPPROTO_TCP);\r\n+    // Create a socket in the specified address family.\r\n+    SOCKET hSocket = socket(address_family, SOCK_STREAM, protocol);\r\n     if (hSocket == INVALID_SOCKET) {\r\n         return nullptr;\r\n     }\r\n \r\n     auto sock = std::make_unique<Sock>(hSocket);\r\n \r\n@@ -518,23 +516,30 @@ std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\r\n     if (sock->SetSockOpt(SOL_SOCKET, SO_NOSIGPIPE, (void*)&set, sizeof(int)) == SOCKET_ERROR) {\r\n         LogPrintf(\"Error setting SO_NOSIGPIPE on socket: %s, continuing anyway\\n\",\r\n                   NetworkErrorString(WSAGetLastError()));\r\n     }\r\n #endif\r\n \r\n+    // Set the non-blocking option on the socket.\r\n+    if (!sock->SetNonBlocking()) {\r\n+        LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\r\n+        return nullptr;\r\n+    }\r\n+\r\n+#if HAVE_SOCKADDR_UN\r\n+    if (address_family == AF_UNIX) {\r\n+        return sock;\r\n+    }\r\n+#endif\r\n+\r\n     // Set the no-delay option (disable Nagle's algorithm) on the TCP socket.\r\n     const int on{1};\r\n     if (sock->SetSockOpt(IPPROTO_TCP, TCP_NODELAY, &on, sizeof(on)) == SOCKET_ERROR) {\r\n         LogPrint(BCLog::NET, \"Unable to set TCP_NODELAY on a newly created socket, continuing anyway\\n\");\r\n     }\r\n \r\n-    // Set the non-blocking option on the socket.\r\n-    if (!sock->SetNonBlocking()) {\r\n-        LogPrintf(\"Error setting socket to non-blocking: %s\\n\", NetworkErrorString(WSAGetLastError()));\r\n-        return nullptr;\r\n-    }\r\n     return sock;\r\n }\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:31:32Z",
      "diff_hunk" : "@@ -456,18 +482,22 @@ bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* a\n     return true;\n }\n \n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family)\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t& address_family)\n {\n-    // Create a sockaddr from the specified service.\n-    struct sockaddr_storage sockaddr;\n-    socklen_t len = sizeof(sockaddr);\n-    if (!address_family.GetSockAddr((struct sockaddr*)&sockaddr, &len)) {\n-        LogPrintf(\"Cannot create socket for %s: unsupported network\\n\", address_family.ToStringAddrPort());\n-        return nullptr;\n+    // Not IPv4, IPv6 or UNIX\n+    if (address_family == AF_UNSPEC) return nullptr;\n+\n+#if HAVE_SOCKADDR_UN\n+    // Create a UNIX socket.\n+    if (address_family == AF_UNIX) {\n+        SOCKET hSocket = socket(AF_UNIX, SOCK_STREAM, 0);\n+        if (hSocket == INVALID_SOCKET) return nullptr;\n+        return std::make_unique<Sock>(hSocket);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217719465",
      "id" : 1217719465,
      "line" : 495,
      "node_id" : "PRRC_kwDOABII585IlOyp",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 495,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 61,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217719465/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217719465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217741453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217741453"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Pass `path` by const reference, strings are expensive to copy.\r\n\r\n```suggestion\r\n    explicit Proxy(const std::string& path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:48:51Z",
      "diff_hunk" : "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217741453",
      "id" : 1217741453,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585IlUKN",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 65,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 32,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217741453/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217741453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217743952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217743952"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Members should start with `m_`. Maybe also rename the existent `randomize_credentials` to `m_randomize_credentials` (in a separate commit).",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:50:50Z",
      "diff_hunk" : "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217743952",
      "id" : 1217743952,
      "line" : 70,
      "node_id" : "PRRC_kwDOABII585IlUxQ",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 70,
      "original_position" : 37,
      "original_start_line" : 68,
      "path" : "src/netbase.h",
      "position" : 37,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217743952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 68,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217743952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217747937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217747937"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Better omit `AddrPort` from the name of this method because it does not apply to UNIX sockets. Just `ToString()` seems fine (but still call `proxy.ToStringAddrPort()` for non-UNIX sockets).",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T08:53:55Z",
      "diff_hunk" : "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;\n+\n+    bool IsValid() const\n+    {\n+        if (is_unix_socket) return IsUnixSocketPath(unix_socket_path);\n+        return proxy.IsValid();\n+    }\n+\n+    sa_family_t GetFamily() const\n+    {\n+        if (is_unix_socket) return AF_UNIX;\n+        return proxy.GetTCPFamily();\n+    }\n+\n+    std::string ToStringAddrPort() const\n+    {\n+        if (is_unix_socket) return unix_socket_path;\n+        return proxy.ToStringAddrPort();\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217747937",
      "id" : 1217747937,
      "line" : 88,
      "node_id" : "PRRC_kwDOABII585IlVvh",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 88,
      "original_position" : 55,
      "original_start_line" : 84,
      "path" : "src/netbase.h",
      "position" : 55,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217747937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 84,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217747937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217775186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217775186"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I wonder if this check is desirable. It makes `IsUnixSocketPath()` volatile - for example if the Tor server is not yet started it will be false and the moment it is started it will become true, or if the Tor server is restarted it will flip from true to false and back.\r\n\r\nWith this check `bitcoind` will refuse to start if the Tor server is not started yet. This differs from the TCP case where the Tor server can start later.\r\n\r\nWith TCP we only check if the given address is something we can _try_ to connect to. Like \"ok, it is 4 digits separated by 3 dots, maybe I can connect to this later when needed\". `CService::IsValid()` does not check whether somebody is listening on that address and port and that we can connect to it. An equivalent check for UNIX sockets would be \"ok, if it starts with unix: and is short enough maybe I can connect to this later when needed\".",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T09:15:19Z",
      "diff_hunk" : "@@ -214,6 +218,28 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     return Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function).value_or(CService{});\n }\n \n+bool IsUnixSocketPath(const std::string& name)\n+{\n+#if HAVE_SOCKADDR_UN\n+    if (name.find(ADDR_PREFIX_UNIX) != 0) return false;\n+\n+    // Split off \"unix:\" prefix\n+    std::string str{name.substr(ADDR_PREFIX_UNIX.length())};\n+\n+    // Path size limit is platform-dependent\n+    // see https://manpages.ubuntu.com/manpages/xenial/en/man7/unix.7.html\n+    if (str.size() + 1 > sizeof(((sockaddr_un*)nullptr)->sun_path)) return false;\n+\n+    // Path must exist\n+    fs::path path = fs::PathFromString(str);\n+    if (!fs::exists(path)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217775186",
      "id" : 1217775186,
      "line" : 235,
      "node_id" : "PRRC_kwDOABII585IlcZS",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 235,
      "original_position" : 29,
      "original_start_line" : 233,
      "path" : "src/netbase.cpp",
      "position" : 29,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217775186/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 233,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:52:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217775186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217785125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217785125"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This should use `IsUnixSocketPath()`?\r\n\r\n```suggestion\r\n                if ((port_option != \"-proxy\" && port_option != \"-onion\") || !IsUnixSocketPath(socket_addr)) {\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T09:21:43Z",
      "diff_hunk" : "@@ -1286,7 +1286,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n+#if HAVE_SOCKADDR_UN\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n+                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217785125",
      "id" : 1217785125,
      "line" : 1291,
      "node_id" : "PRRC_kwDOABII585Ile0l",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 1291,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217785125/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217785125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217795272"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217795272"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n\r\n```suggestion\r\n# Use the shortest temp path possible since UNIX sockets may have as little as 92-char limit\r\n```",
      "commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "created_at" : "2023-06-05T09:28:53Z",
      "diff_hunk" : "@@ -60,14 +63,17 @@\n # Networks returned by RPC getnetworkinfo, defined in src/rpc/net.cpp::GetNetworksInfo()\n NETWORKS = frozenset({NET_IPV4, NET_IPV6, NET_ONION, NET_I2P, NET_CJDNS})\n \n+# Use the shortest temp path possible since paths may have as little as 92-char limit",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1217795272",
      "id" : 1217795272,
      "line" : 66,
      "node_id" : "PRRC_kwDOABII585IlhTI",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 66,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : 31,
      "pull_request_review_id" : 1461645134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217795272/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T09:48:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1217795272",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1218382890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1218382890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This change would make `feature_proxy.py` test fail because the error would be `\"Invalid port...\"` which is misleading if the real problem is (for example) a too-long file path, which will get caught by `IsUnixSocketPath()` on L1370 and described as `\"Invalid -proxy address or hostname...\"`. So I think it makes more sense to keep this line as-is: if we think the user is trying to set a UNIX socket path, we just ignore the invalid port check.",
      "commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "created_at" : "2023-06-05T17:32:29Z",
      "diff_hunk" : "@@ -1286,7 +1286,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n             std::string host_out;\n             uint16_t port_out{0};\n             if (!SplitHostPort(socket_addr, port_out, host_out)) {\n+#if HAVE_SOCKADDR_UN\n+                // Allow unix domain sockets for -proxy and -onion e.g. unix:/some/file/path\n+                if ((port_option != \"-proxy\" && port_option != \"-onion\") || socket_addr.find(ADDR_PREFIX_UNIX) != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1218382890",
      "id" : 1218382890,
      "in_reply_to_id" : 1217785125,
      "line" : 1306,
      "node_id" : "PRRC_kwDOABII585Inwwq",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 1306,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 1463052208,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1218382890/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-05T17:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1218382890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild thanks for the excellent detailed review! All comments addressed except where noted.",
      "created_at" : "2023-06-05T17:35:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1577201958",
      "id" : 1577201958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585eAjEm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1577201958/reactions"
      },
      "updated_at" : "2023-06-05T17:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1577201958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on master to pass CI (â ). @vasild and @willcl-ark would really love re-review from you handsome chaps when convenient!",
      "created_at" : "2023-06-22T14:43:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1602766905",
      "id" : 1602766905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585fiEg5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1602766905/reactions"
      },
      "updated_at" : "2023-06-22T17:10:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1602766905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1239079790"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1239079790"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's possible this could pass, but the necessary configure check fail, in theory. But maybe we want the test(s) to fail in that scenario anyway.",
      "commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "created_at" : "2023-06-22T22:14:29Z",
      "diff_hunk" : "@@ -153,3 +153,12 @@ def test_ipv6_local():\n     except socket.error:\n         have_ipv6 = False\n     return have_ipv6\n+\n+def test_unix_socket():\n+    '''Return True if UNIX sockets are available on this platform.'''\n+    try:\n+        socket.AF_UNIX",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1239079790",
      "id" : 1239079790,
      "line" : 160,
      "node_id" : "PRRC_kwDOABII585J2ttu",
      "original_commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "original_line" : 160,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/netutil.py",
      "position" : 8,
      "pull_request_review_id" : 1494066986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1239079790/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-22T22:14:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1239079790",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-06-29T11:25:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1612946443",
      "id" : 1612946443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585gI5wL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612946443/reactions"
      },
      "updated_at" : "2023-06-29T11:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1612946443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246758964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246758964"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: it does not have to be `const` when passing by value - there is no way to for the function to modify the variable that is being passed (and have effects visible outside of the function).\r\n\r\n```suggestion\r\nstd::unique_ptr<Sock> CreateSockOS(sa_family_t address_family);\r\n```\r\n\r\nSee f3() in http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-in",
      "commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "created_at" : "2023-06-29T15:10:35Z",
      "diff_hunk" : "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t address_family);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246758964",
      "id" : 1246758964,
      "line" : 216,
      "node_id" : "PRRC_kwDOABII585KUAg0",
      "original_commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "original_line" : 216,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 70,
      "pull_request_review_id" : 1505515197,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246758964/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-06-29T16:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246758964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246856004"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246856004"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The new member `unix_socket_path` is still without `m_` prefix. Only `is_unix_socket` was renamed to `m_is_unix_socket`.",
      "commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "created_at" : "2023-06-29T16:13:34Z",
      "diff_hunk" : "@@ -45,16 +48,44 @@ static inline bool operator&(ConnectionDirection a, ConnectionDirection b) {\n     return (underlying(a) & underlying(b));\n }\n \n+/**\n+ * Check if a string is a valid UNIX domain socket path\n+ *\n+ * @param      name     The string provided by the user representing a local path\n+ *\n+ * @returns Whether the string has proper format, length, and points to an existing file path\n+ */\n+bool IsUnixSocketPath(const std::string& name);\n+\n class Proxy\n {\n public:\n-    Proxy(): randomize_credentials(false) {}\n-    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), randomize_credentials(_randomize_credentials) {}\n-\n-    bool IsValid() const { return proxy.IsValid(); }\n+    Proxy(): is_unix_socket(false), randomize_credentials(false) {}\n+    explicit Proxy(const CService &_proxy, bool _randomize_credentials=false): proxy(_proxy), is_unix_socket(false), randomize_credentials(_randomize_credentials) {}\n+    explicit Proxy(const std::string path, bool _randomize_credentials=false): unix_socket_path(path), is_unix_socket(true), randomize_credentials(_randomize_credentials) {}\n \n     CService proxy;\n+    std::string unix_socket_path;\n+    bool is_unix_socket;\n     bool randomize_credentials;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1246856004",
      "id" : 1246856004,
      "in_reply_to_id" : 1217743952,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585KUYNE",
      "original_commit_id" : "1a2095baf12b8f8995bed513a23d5faf16917fba",
      "original_line" : 70,
      "original_position" : 37,
      "original_start_line" : 68,
      "path" : "src/netbase.h",
      "position" : null,
      "pull_request_review_id" : 1505662729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246856004/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-06-29T16:13:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1246856004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1251211129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251211129"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ah great tip thanks ;-)",
      "commit_id" : "c3b0f137a9ccd894f2f1d287ccdab26310b3aaf2",
      "created_at" : "2023-07-03T19:14:56Z",
      "diff_hunk" : "@@ -178,16 +209,16 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault = 0, DNSLoo\n bool LookupSubNet(const std::string& subnet_str, CSubNet& subnet_out);\n \n /**\n- * Create a TCP socket in the given address family.\n+ * Create a TCP or UNIX socket in the given address family.\n  * @param[in] address_family The socket is created in the same address family as this address.\n  * @return pointer to the created Sock object or unique_ptr that owns nothing in case of failure\n  */\n-std::unique_ptr<Sock> CreateSockTCP(const CService& address_family);\n+std::unique_ptr<Sock> CreateSockOS(const sa_family_t address_family);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#discussion_r1251211129",
      "id" : 1251211129,
      "in_reply_to_id" : 1246758964,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Kk_d5",
      "original_commit_id" : "64d0f234e9aac490b03a5c019e86f1da56e62e01",
      "original_line" : 216,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : null,
      "pull_request_review_id" : 1511673742,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27375",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251211129/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-03T19:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251211129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> [64d0f23](https://github.com/bitcoin/bitcoin/commit/64d0f234e9aac490b03a5c019e86f1da56e62e01) looks good, except there is some messup in the contents of these two commits:\r\n\r\nThanks @vasild sorry about the messy rebase there. I cleaned up the commits and fixed the `const` and `m_...` nits. Rebased on master for merge conflicts.",
      "created_at" : "2023-07-03T19:17:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1619034666",
      "id" : 1619034666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585ggIIq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1619034666/reactions"
      },
      "updated_at" : "2023-07-03T19:32:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1619034666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It's a tNACK from me currently @ c3b0f137a9 as I can no longer get this functionality to work in practice on Ubuntu 23.04 with Tor 0.4.7.13.\r\n\r\nThe send of the data in `vSocks5Init` seems to be failing, meaning the proxy cannot be used: https://github.com/pinheadmz/bitcoin/blob/c3b0f137a9ccd894f2f1d287ccdab26310b3aaf2/src/netbase.cpp#L372-L375\r\n\r\nI haven't yet totally ruled out issues with Tor, but I do get responses from the unix socket about it not being an HTTP proxy if I try to send an HTTP request over it, so I conclude that the Tor daemon is listening on the socket correctly waiting for SOCKS requests, and the issue may lie with Bitcoin Core.\r\n\r\nWill continue investigating and report back.\r\n\r\n<details>\r\n<summary>bitcoin.conf options set</summary>\r\n\r\n```log\r\n2023-07-11T11:12:35Z Config file: /home/will/.bitcoin/bitcoin.conf\r\n2023-07-11T11:12:35Z Config file arg: [main] addnode=\"xx.xx.xx.xx:8333\"\r\n2023-07-11T11:12:35Z Config file arg: [main] blockfilterindex=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] blocksdir=\"/media/will/crucial1/bitcoin\"\r\n2023-07-11T11:12:35Z Config file arg: [main] daemon=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"net\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"proxy\"\r\n2023-07-11T11:12:35Z Config file arg: [main] debug=\"tor\"\r\n2023-07-11T11:12:35Z Config file arg: [main] discover=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] externalip=\"xx.xx.xx.xx\"\r\n2023-07-11T11:12:35Z Config file arg: [main] i2pacceptincoming=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] i2psam=\"127.0.0.1:7656\"\r\n2023-07-11T11:12:35Z Config file arg: [main] listen=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] listenonion=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] maxconnections=\"125\"\r\n2023-07-11T11:12:35Z Config file arg: [main] mempoolfullrbf=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] onion=\"unix:/run/tor/socks\"\r\n2023-07-11T11:12:35Z Config file arg: [main] onlynet=\"onion\"\r\n2023-07-11T11:12:35Z Config file arg: [main] port=\"8833\"\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcauth=****\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcthreads=\"16\"\r\n2023-07-11T11:12:35Z Config file arg: [main] rpcworkqueue=\"64\"\r\n2023-07-11T11:12:35Z Config file arg: [main] server=\"1\"\r\n2023-07-11T11:12:35Z Config file arg: [main] txindex=\"1\"\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>torrc</summary>\r\n\r\n```\r\nSocksPort unix:/run/tor/socks WorldWritable\r\nControlPort 9051\r\nCookieAuthentication 1\r\nCookieAuthFileGroupReadable 1\r\nDataDirectoryGroupReadable 1\r\n```\r\n\r\n</details>",
      "created_at" : "2023-07-11T11:37:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27375#issuecomment-1630664257",
      "id" : 1630664257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27375",
      "node_id" : "IC_kwDOABII585hMfZB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630664257/reactions"
      },
      "updated_at" : "2023-07-11T11:37:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630664257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   }
]
