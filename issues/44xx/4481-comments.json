[
   {
      "body" : "I think this is acceptable so long as you add a \"-allowpruned\" option that disables the \"we have all blocks\" check on startup and unsets the NODE_NETWORK service bit. (meaning we act like a SPV client)\r\n\r\nYou could argue with that you might as well *not* disconnect peers that ask for blocks you don't have, as you aren't advertising that you have any blocks at all. That might be useful for some types of local usage, and probably does no harm.",
      "created_at" : "2014-07-08T04:25:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48270826",
      "id" : 48270826,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-08T04:25:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48270826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Agree with @petertodd here. If you don't run a full node, you should not have it advertise NODE_NETWORK. The P2P protocol at this point does not support advertising availability of only ranges of blocks, and disconnecting anyone that happens to request a block that's missing seems very crude.\r\n\r\nAlso: `-allowpruned` should imply `-disablewallet`, as the wallet currently relies on being able to rescan the blocks on disk, for example on importkey or importwallet.\r\n",
      "created_at" : "2014-07-08T07:18:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48279693",
      "id" : 48279693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-08T07:18:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48279693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Good point. You could make pruning just disable some wallet functionality, but disabling all wallet functionality is simpler for now - we might not have the wallet in the future anyway.",
      "created_at" : "2014-07-08T08:23:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48284534",
      "id" : 48284534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-08T08:23:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48284534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Thanks for the feedback. Pull updated, addressing the input.",
      "created_at" : "2014-07-09T00:01:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48414813",
      "id" : 48414813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-09T00:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48414813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "I like the idea of an UTXO-only, non-archival node.\r\n\r\n- Excluding the wallet, we still need to test the rest of the RPC API for robustness against missing block data. How does this interact with gettransaction (w/ possible txindex), for example?\r\n- Ideally this would be accompanied with an option to not write blocks to disk at all. I think the current expectation is that some external program does the 'pruning'?\r\n\r\n",
      "created_at" : "2014-07-09T06:20:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48434030",
      "id" : 48434030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-09T06:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48434030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@ashleyholman: I guess we should try and test fully what happens unsetting the flag, but that looks like the sensible thing to do.",
      "created_at" : "2014-07-10T01:12:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48554867",
      "id" : 48554867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-10T01:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48554867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "It should also check that so much hasn't been removed that it can't survive realistic reorganizations... a bunch of nodes that just refuse to reorg would be fairly harmful to the network (not to mention their users!).  I'd suggest the check go back 288 blocks from tip since thats our default for the extensive checkblocks.\r\n\r\nThis also needs at least a modest testplan to check that none of the exposed RPCs will crash, and that any that would crash are disabled.  It should also be made incompatible with txindex.",
      "created_at" : "2014-07-10T13:28:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48603819",
      "id" : 48603819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-10T13:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48603819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "We may also want to leave this out of usage until it's had a fair amount of testing (e.g. in the first release with it)... esp I'd worry that there may be additional network triggerable misbehavior from places where this violates assumptions.",
      "created_at" : "2014-07-10T13:33:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48604426",
      "id" : 48604426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-10T13:33:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48604426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "So after giving this more though, instead of allowprunedÃ¢ÂÂ why not just go all the way and have a pruned=1 ... with the logic that if our validated height is >100k and a blockfiles highest block is <tip-288, just delete the block file?  This would allow you to sync up without much free disk space (the first 119k blocks are small and fit in the first block file).",
      "created_at" : "2014-07-10T16:21:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48627909",
      "id" : 48627909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-10T16:26:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48627909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "(Sipa pointed out to me that the rational for the 100k limit was not obvious.  The reason I proposed that was because without it if someone gave you a 400 block reorg during the very early initial block download you would not recover.  The 100k limit gets the difficulty to a non-completely-trivial level, and is also few enough that its still in a single block file, so there would be no peak usage increase.  Better to have a total-work check, but that would probably need headers first in order to be easy to implement).",
      "created_at" : "2014-07-10T20:44:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48661471",
      "id" : 48661471,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-10T20:44:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48661471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "So, there are several possible modes of operation after we allow pruning. @laanwj's utxosonly, @gmaxwell's autoprune are both interesting, and there could be more...\r\n\r\nShould I modify this patch to allow setting them as options, or would that add too much unneeded complexity?",
      "created_at" : "2014-07-11T11:53:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48721813",
      "id" : 48721813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-11T11:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48721813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "UTXO only cannot be done without substantial work because the node would be unable to reorganize.",
      "created_at" : "2014-07-11T12:43:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48725579",
      "id" : 48725579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-11T12:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48725579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yeah, obviously autoprune is a way lower hanging fruit.\r\n\r\nMaybe after #4468 utxoonly can be possible, but yes, at a significantly cost.",
      "created_at" : "2014-07-11T12:59:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48726963",
      "id" : 48726963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-11T12:59:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48726963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "Right, I did not think about reorganizations. A node that would fall over on even a small reorganization would be pointless. And storing a few blocks isn't a problem.\r\n\r\n@gmaxwell's idea about keeping only the recent N>288 blocks when height>100k sounds great, and is how auto-pruning should work. ",
      "created_at" : "2014-07-11T13:00:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48727034",
      "id" : 48727034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-11T13:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48727034",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "WRT UTXO-only, we'd also need to add code to hash the undo files, and add network code to fetch them (and make the undo datastructure normative along the way)... Or, just don't delete the undo files but this is unattractive since there is currently about 2gb of undo data.\r\n\r\nSo I think for now we should just do the autopruned which disables the wallet and txindex and keeps enough blocks that reorg failure is very unlikely.  Then we can think about the above steps with the undo data, along with keeping the ability to remain acting as a node-network.",
      "created_at" : "2014-07-11T13:17:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48728602",
      "id" : 48728602,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-11T13:17:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48728602",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Shouldn't this also disable UPNP as the only reason it is used is to allow incoming connections to possibly sync from your node?",
      "created_at" : "2014-07-12T09:28:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48806776",
      "id" : 48806776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-12T09:28:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48806776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "I wouldn't bother, as we'll want to let nodes advertise useful services beyond the blockchain, e.g. tx relaying. \n\nOn 12 July 2014 10:28:41 BST, Warren Togami <notifications@github.com> wrote:\n>Shouldn't this also disable UPNP as the only reason it is used is to\n>allow incoming connections to possibly sync from your node?\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48806776",
      "created_at" : "2014-07-12T09:58:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48807337",
      "id" : 48807337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-12T09:58:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48807337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "We don't want to disable listening or UPNP because you may want to use the node with p2pool or the like, but we should probably suppress address messages when we're not node-network. I think that should just wait until another pull though.",
      "created_at" : "2014-07-12T12:32:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48810117",
      "id" : 48810117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-12T12:32:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48810117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Sounds good to me. \n\nOn 12 July 2014 13:32:58 GMT+01:00, Gregory Maxwell <notifications@github.com> wrote:\n>We don't want to disable listening or UPNP because you may want to use\n>the node with p2pool or the like, but we should probably suppress\n>address messages when we're not node-network. I think that should just\n>wait until another pull though.\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48810117",
      "created_at" : "2014-07-12T12:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48810217",
      "id" : 48810217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-12T12:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48810217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Looks mostly OK, modulo nits.\r\n\r\nDo we want to be able to find pruned nodes?  Seems like allocating a NODE_xxx service bit in this PR is appropriate.",
      "created_at" : "2014-07-14T00:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48855829",
      "id" : 48855829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T00:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48855829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "The bit ought to depend on willingness to at least relay the most recent N transactions from the tip. N=288 by definition sounds good to me, but if it's in the bit definition perhaps it needs more shed painting, which is why I didn't recommend this above (for this pull, e.g. we could do it in a separate one).",
      "created_at" : "2014-07-14T04:16:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48864180",
      "id" : 48864180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T04:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48864180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell To forestall shed painting, I observe that NODE_NETWORK behavior has varied over time; only it's general definition \"a full node!\" has remained static.\r\n\r\nAs such, it seems reasonable to add NODE_PRUNED or whatever we want to call the high level attribute being advertised.  If it's only minor tweaks to find a good value for N, that seems like something that could be performed in-tree before the next release.\r\n\r\nIt's all about communication.  A release note \"NODE_PRUNED is experimental until 0.11\" can further extend the life.\r\n",
      "created_at" : "2014-07-14T04:36:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48864816",
      "id" : 48864816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T04:37:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48864816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "What about adding a service bit NODE_UTXO? And then having full nodes advertise it as well? This has been proposed before and I think that was a good suggestion (by @maaku?). Pruned nodes would only advertise NODE_UTXO.\r\n\r\nThis would give NODE_NETWORK - starting from version X - the meaning of 'can serve blocks', and NODE_UTXO the meaning of 'tracks UTXO and can validate transactions'.\r\n\r\nThis way, service bits actually tell about provided services. I like 'negative' service bits like NODE_PRUNED considerably less.\r\n",
      "created_at" : "2014-07-14T06:48:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48870016",
      "id" : 48870016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T06:48:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48870016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I would move the meaning of block-servavility out of NODE_NETWORK, not the\ncomplement. Reason: we don't really know in what ways the remainder of the\nfunctionality will be split off in the future, while the ability to serve\nblocks is well defined. Let NODE_NETWORK remain the kitchen sink, and give\nnew bits a well defined meaning.\n\nAs to the meaning itself, I have previously proposed to use 2 service bits,\nthe combination of which indicates one of 4 levels (e.g. 0,288,4032,all or\n288,2016,52500,all if we want some mandatory serving). Discussion mostly\nturned into using such a solution vs. adding a field to CAddress to\nindicate this information with more granularity.",
      "created_at" : "2014-07-14T12:03:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48891966",
      "id" : 48891966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T12:03:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48891966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I was trying to avoid the granularity rathole here. :)  Can we please put the new flag in a subsequent pull to avoid delaying this based on that?  The approach of removing node network on a pruning node is safe if far from perfect... and will suffice until the extra behavior is hammered out.",
      "created_at" : "2014-07-14T12:37:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48894529",
      "id" : 48894529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T12:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48894529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I see that shed painting was not forestalled, @gmaxwell  :)\r\n\r\nACK\r\n",
      "created_at" : "2014-07-14T12:46:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48895275",
      "id" : 48895275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T12:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48895275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Most nits has been addressed, and I added a branch in my repository for anybody willing to test the rejection instead of disconnecting case:\r\n\r\nhttps://github.com/Criptomonedas/bitcoin/tree/prunedreject\r\n\r\nIt seems to work pretty fine, just a little more resource wasteful than disconnecting.",
      "created_at" : "2014-07-14T22:46:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48970073",
      "id" : 48970073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-14T22:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48970073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2014-07-15T17:37:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49066446",
      "id" : 49066446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:37:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49066446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ut?",
      "created_at" : "2014-07-15T17:45:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49067485",
      "id" : 49067485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:45:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49067485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "untested",
      "created_at" : "2014-07-15T17:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49067538",
      "id" : 49067538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49067538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "NAK. Important nits remain:  This must not allow a node to start which cannot reorg.\r\n\r\nPlease change the test in LoadBlockIndexDB() to check that all of the last 288 blocks are available. (then I'll test and ACK)",
      "created_at" : "2014-07-15T17:54:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49068696",
      "id" : 49068696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49068696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Undo ACK. Agree with @gmaxwell ",
      "created_at" : "2014-07-15T17:56:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49068933",
      "id" : 49068933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:56:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49068933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "+1\r\n",
      "created_at" : "2014-07-15T17:57:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49069014",
      "id" : 49069014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T17:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49069014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "You would want to serve not just the most recent blocks, but also a\nrange of past blocks. Otherwise it would be very difficult to perform an\ninitial block download in a scenario where most nodes are pruning.\nAdding a field to CAddress seems the more compatible approach with this\nrequirement.\n\nOn 07/14/2014 08:03 AM, Pieter Wuille wrote:\n> I would move the meaning of block-servavility out of NODE_NETWORK, not the\n> complement. Reason: we don't really know in what ways the remainder of the\n> functionality will be split off in the future, while the ability to serve\n> blocks is well defined. Let NODE_NETWORK remain the kitchen sink, and give\n> new bits a well defined meaning.\n>\n> As to the meaning itself, I have previously proposed to use 2 service\n> bits,\n> the combination of which indicates one of 4 levels (e.g. 0,288,4032,all or\n> 288,2016,52500,all if we want some mandatory serving). Discussion mostly\n> turned into using such a solution vs. adding a field to CAddress to\n> indicate this information with more granularity.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-48891966>.\n>",
      "created_at" : "2014-07-15T21:40:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49096621",
      "id" : 49096621,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T21:40:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49096621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku  absolutely, but I think we should do that as part of a pull that turns back on network services bits. This pull just turns the node into a client, and the only reason to keep any blocks at all is otherwise a reorg leaves the node stuck and it needs a total (30gbyte) reinit, and while it's stuck it's forked and potentially following a losing chain.",
      "created_at" : "2014-07-15T22:37:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-49102307",
      "id" : 49102307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-07-15T22:37:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49102307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14997809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14997809"
         }
      },
      "body" : "Those checks and the message don't belong here but in ``Step 2: parameter interactions`` in init.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T13:48:26Z",
      "diff_hunk" : "@@ -615,7 +616,12 @@ bool AppInit2(boost::thread_group& threadGroup)\n     fLogTimestamps = GetBoolArg(\"-logtimestamps\", true);\n     fLogIPs = GetBoolArg(\"-logips\", false);\n     setvbuf(stdout, NULL, _IOLBF, 0);\n+    fAllowPruned = GetBoolArg(\"-allowpruned\", false);\n #ifdef ENABLE_WALLET\n+    if (fAllowPruned) {\n+        if (SoftSetBoolArg(\"-disablewallet\", true))\n+            LogPrintf(\"AppInit2 : parameter interaction: -allowpruned=1 -> setting -disablewallet=1\\n\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14997809",
      "id" : 14997809,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 16,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14997809",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14997895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14997895"
         }
      },
      "body" : "Why the ``Readable`` at the end?",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T13:49:51Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14997895",
      "id" : 14997895,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14997895",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998112"
         }
      },
      "body" : "Should this be an assert or can we handle this a little nicer?",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T13:53:29Z",
      "diff_hunk" : "@@ -3452,29 +3504,42 @@ void static ProcessGetData(CNode* pfrom)\n                     // Send block from disk\n                     CBlock block;\n                     if (!ReadBlockFromDisk(block, (*mi).second))\n-                        assert(!\"cannot load block from disk\");\n-                    if (inv.type == MSG_BLOCK)\n-                        pfrom->PushMessage(\"block\", block);\n-                    else // MSG_FILTERED_BLOCK)\n                     {\n-                        LOCK(pfrom->cs_filter);\n-                        if (pfrom->pfilter)\n+                        if (fPruned)\n+                        {\n+                            // Disconnect a peer which asks us for a block we don't have any more, not to stall\n+                            // his download. He shouldn't ask, anyway, as we unset NODE_NETWORK on this mode.\n+                            LogPrintf(\"cannot load block from disk, disconnecting peer=%d\\n\", pfrom->id);\n+                            pfrom->fDisconnect = true;\n+                        }\n+                        else\n+                            assert(!\"cannot load block from disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998112",
      "id" : 14998112,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 98,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998221"
         }
      },
      "body" : "At a minimum, assert() is wrong for runtime conditions such as disk errors or out-of-space conditions.\r\n",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T13:55:27Z",
      "diff_hunk" : "@@ -3452,29 +3504,42 @@ void static ProcessGetData(CNode* pfrom)\n                     // Send block from disk\n                     CBlock block;\n                     if (!ReadBlockFromDisk(block, (*mi).second))\n-                        assert(!\"cannot load block from disk\");\n-                    if (inv.type == MSG_BLOCK)\n-                        pfrom->PushMessage(\"block\", block);\n-                    else // MSG_FILTERED_BLOCK)\n                     {\n-                        LOCK(pfrom->cs_filter);\n-                        if (pfrom->pfilter)\n+                        if (fPruned)\n+                        {\n+                            // Disconnect a peer which asks us for a block we don't have any more, not to stall\n+                            // his download. He shouldn't ask, anyway, as we unset NODE_NETWORK on this mode.\n+                            LogPrintf(\"cannot load block from disk, disconnecting peer=%d\\n\", pfrom->id);\n+                            pfrom->fDisconnect = true;\n+                        }\n+                        else\n+                            assert(!\"cannot load block from disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998221",
      "id" : 14998221,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 98,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998876"
         }
      },
      "body" : "Because they're used to store that condition about the files.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T14:06:15Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14998876",
      "id" : 14998876,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14998876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14999013"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14999013"
         }
      },
      "body" : "It was an assert in the original code. Maybe it should be changed, but I would left that for another pull, later.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T14:08:21Z",
      "diff_hunk" : "@@ -3452,29 +3504,42 @@ void static ProcessGetData(CNode* pfrom)\n                     // Send block from disk\n                     CBlock block;\n                     if (!ReadBlockFromDisk(block, (*mi).second))\n-                        assert(!\"cannot load block from disk\");\n-                    if (inv.type == MSG_BLOCK)\n-                        pfrom->PushMessage(\"block\", block);\n-                    else // MSG_FILTERED_BLOCK)\n                     {\n-                        LOCK(pfrom->cs_filter);\n-                        if (pfrom->pfilter)\n+                        if (fPruned)\n+                        {\n+                            // Disconnect a peer which asks us for a block we don't have any more, not to stall\n+                            // his download. He shouldn't ask, anyway, as we unset NODE_NETWORK on this mode.\n+                            LogPrintf(\"cannot load block from disk, disconnecting peer=%d\\n\", pfrom->id);\n+                            pfrom->fDisconnect = true;\n+                        }\n+                        else\n+                            assert(!\"cannot load block from disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14999013",
      "id" : 14999013,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 98,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14999013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14999455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14999455"
         }
      },
      "body" : "Using AbortNode would make sense here (though I agree it's out of scope for this pull)",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T14:15:16Z",
      "diff_hunk" : "@@ -3452,29 +3504,42 @@ void static ProcessGetData(CNode* pfrom)\n                     // Send block from disk\n                     CBlock block;\n                     if (!ReadBlockFromDisk(block, (*mi).second))\n-                        assert(!\"cannot load block from disk\");\n-                    if (inv.type == MSG_BLOCK)\n-                        pfrom->PushMessage(\"block\", block);\n-                    else // MSG_FILTERED_BLOCK)\n                     {\n-                        LOCK(pfrom->cs_filter);\n-                        if (pfrom->pfilter)\n+                        if (fPruned)\n+                        {\n+                            // Disconnect a peer which asks us for a block we don't have any more, not to stall\n+                            // his download. He shouldn't ask, anyway, as we unset NODE_NETWORK on this mode.\n+                            LogPrintf(\"cannot load block from disk, disconnecting peer=%d\\n\", pfrom->id);\n+                            pfrom->fDisconnect = true;\n+                        }\n+                        else\n+                            assert(!\"cannot load block from disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r14999455",
      "id" : 14999455,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 98,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14999455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15004531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15004531"
         }
      },
      "body" : "This needs to be chainActive.Height(), not mapBlockIndex.size() (which may include stale branches).",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T15:29:17Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15004531",
      "id" : 15004531,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15004531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15004572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15004572"
         }
      },
      "body" : "Index has nothing to do with it? We're just missing undo data.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T15:29:52Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;\n+    LogPrintf(\"Blocks up to height %i can be pruned.\\n\", nKeepBlksFromHeight);\n     BOOST_FOREACH(const PAIRTYPE(uint256, CBlockIndex*)& item, mapBlockIndex)\n     {\n         CBlockIndex* pindex = item.second;\n-        if (pindex->nStatus & BLOCK_HAVE_DATA) {\n-            setBlkDataFiles.insert(pindex->nFile);\n+        CDiskBlockPos pos(pindex->nFile, 0);\n+        // The index should have information about the last MIN_BLOCKS_TO_KEEP blocks and their undo data, essential to reorganize.\n+        if (pindex->nStatus & BLOCK_HAVE_DATA )\n+        {\n+            if(!mapBlkDataFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    mapBlkDataFileReadable.insert(make_pair<int, bool>(pindex->nFile, true));\n+                else\n+                    if (fAllowPruned)\n+                    {\n+                        fPruned = true;\n+                        mapBlkDataFileReadable.insert(make_pair<int, bool>(pindex->nFile, false));\n+                    }\n+                    else\n+                        return false;\n+            }\n         }\n-    }\n-    for (std::set<int>::iterator it = setBlkDataFiles.begin(); it != setBlkDataFiles.end(); it++)\n-    {\n-        CDiskBlockPos pos(*it, 0);\n-        if (!CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION)) {\n+        else\n+        {\n+            if(pindex->nHeight > nKeepBlksFromHeight)\n+            {\n+                LogPrintf(\"Missing data in index for block: %i\\n\", pindex->nHeight);\n+                return false;\n+            }\n+            if (fAllowPruned)\n+                fPruned = true;\n+        }\n+        if (pindex->nStatus & BLOCK_HAVE_UNDO)\n+        {\n+            if(!mapBlkUndoFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenUndoFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    mapBlkUndoFileReadable.insert(make_pair<int, bool>(pindex->nFile, true));\n+                else\n+                    if (fAllowPruned)\n+                    {\n+                        fPruned = true;\n+                        mapBlkUndoFileReadable.insert(make_pair<int, bool>(pindex->nFile, false));\n+                    }\n+                    else\n+                        return false;\n+            }\n+        }\n+        else\n+        {\n+            if((pindex->nHeight > nKeepBlksFromHeight) && (pindex->nHeight != ((int)mapBlockIndex.size()-1)))\n+            {\n+                LogPrintf(\"Missing undo in index for block: %i. mapBlockIndex.size: %i\\n\", pindex->nHeight, mapBlockIndex.size());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15004572",
      "id" : 15004572,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 66,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15004572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15016772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15016772"
         }
      },
      "body" : "chainActive.Height() is returning -1. I suppose it isn't initialized at startup.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T18:12:57Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15016772",
      "id" : 15016772,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15016772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15021092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15021092"
         }
      },
      "body" : "That's a problem, because it means we don't know the height yet.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T19:18:16Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15021092",
      "id" : 15021092,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15021092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15021803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15021803"
         }
      },
      "body" : "I'll search for a workaround. Meanwhile, maybe increasing MIN_BLOCKS_TO_KEEP, as a safety net, would allow to keep testing this. What would be a sensible number?",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T19:31:00Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15021803",
      "id" : 15021803,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15021803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15022040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15022040"
         }
      },
      "body" : "chainActive is initialized at the end of this function. Just move the test down.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-07-16T19:35:44Z",
      "diff_hunk" : "@@ -2990,18 +2990,70 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;\n+    int nKeepBlksFromHeight = mapBlockIndex.size() - MIN_BLOCKS_TO_KEEP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15022040",
      "id" : 15022040,
      "original_commit_id" : "29965a779e998718624bcd34dd112984d0eb63ff",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15022040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15733699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15733699"
         }
      },
      "body" : "This really doesn't belong in util.\r\n\r\nI'd say main, but apparently you need it inside net, which feels wrong. Feel like moving the pnodeLocalHost code to init?",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-08-03T09:45:17Z",
      "diff_hunk" : "@@ -97,6 +97,7 @@ string strMiscWarning;\n bool fLogTimestamps = false;\n bool fLogIPs = false;\n volatile bool fReopenDebugLog = false;\n+bool fPruned = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15733699",
      "id" : 15733699,
      "original_commit_id" : "42e1f8665cfc1bf9f98131b421d823405a625bd9",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15733699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735434"
         }
      },
      "body" : "What about passing an extra parameter to StartNode to allow setting the service bits from the caller in init? Would that be a correct solution? It would seem to be simpler and less invasive, wouldn't it?",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-08-03T17:16:07Z",
      "diff_hunk" : "@@ -97,6 +97,7 @@ string strMiscWarning;\n bool fLogTimestamps = false;\n bool fLogIPs = false;\n volatile bool fReopenDebugLog = false;\n+bool fPruned = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735434",
      "id" : 15735434,
      "original_commit_id" : "42e1f8665cfc1bf9f98131b421d823405a625bd9",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735703"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735703"
         }
      },
      "body" : "Sounds good to me.",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-08-03T18:02:14Z",
      "diff_hunk" : "@@ -97,6 +97,7 @@ string strMiscWarning;\n bool fLogTimestamps = false;\n bool fLogIPs = false;\n volatile bool fReopenDebugLog = false;\n+bool fPruned = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735703",
      "id" : 15735703,
      "original_commit_id" : "42e1f8665cfc1bf9f98131b421d823405a625bd9",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735802"
         }
      },
      "body" : "Agree it does not belong in util, but also a parameter to StartNode does not seem appropriate.  See NODE_EXT_SERVICES in the following WIP branch at https://github.com/jgarzik/bitcoin/tree/2014_ext_services\r\n",
      "commit_id" : "efbf886cbe560950f432b5af78f63d4a57c81b51",
      "created_at" : "2014-08-03T18:22:47Z",
      "diff_hunk" : "@@ -97,6 +97,7 @@ string strMiscWarning;\n bool fLogTimestamps = false;\n bool fLogIPs = false;\n volatile bool fReopenDebugLog = false;\n+bool fPruned = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#discussion_r15735802",
      "id" : 15735802,
      "original_commit_id" : "42e1f8665cfc1bf9f98131b421d823405a625bd9",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4481",
      "updated_at" : "2014-09-12T23:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15735802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Please, let's not make this dependent on how to expose this functionality to the network yet, that can come later. All we need for now is something that disables full node functionality when running pruned.\r\n\r\nEDIT: Oh, you mean just modifying nLocalServices from init? That seems fine too.",
      "created_at" : "2014-08-03T18:25:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-50998456",
      "id" : 50998456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-03T18:28:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50998456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Correct, that's all I meant.  Local service configuration will ultimately be multi-step, and can be handled directly from init.\r\n",
      "created_at" : "2014-08-03T18:45:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-50999008",
      "id" : 50999008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-03T18:45:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50999008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4481_d00a934cc05301d6a08f8d686428c4fd704ed76b/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-26T20:06:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53481213",
      "id" : 53481213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-26T20:06:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53481213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4481_eae33b1af4f866257a84bcb438a1768fff07a63e/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-27T18:42:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53620742",
      "id" : 53620742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-27T18:42:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53620742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Untested ACK.",
      "created_at" : "2014-08-27T18:46:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53621264",
      "id" : 53621264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-27T18:46:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53621264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "There are a few changes I'd like to make, but let's do that post-merge:\r\n * Merge the block/undo data file handling; for now, it seems they will be deleted simultaneously anyway.\r\n * Make the pruning depth configurable.\r\n * Abstract the deletion code out of the startup routine, and into something that can run regularly.\r\n\r\nEDIT: this is actually about #4701.",
      "created_at" : "2014-08-27T18:48:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53621551",
      "id" : 53621551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-27T19:05:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53621551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Added incompatibility with -txindex, as requested.",
      "created_at" : "2014-08-28T14:17:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53725908",
      "id" : 53725908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-28T14:17:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53725908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4481_9045aa715c2a043af244d14170fc11b84f986dcb/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-28T14:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-53727573",
      "id" : 53727573,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-08-28T14:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53727573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4481_efbf886cbe560950f432b5af78f63d4a57c81b51/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-09-12T23:41:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4481#issuecomment-55473499",
      "id" : 55473499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4481",
      "updated_at" : "2014-09-12T23:41:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55473499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   }
]
