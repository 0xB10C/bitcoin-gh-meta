[
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/27b24244c4d1f97690d5908e3412ac5306920281 for binaries and test log.",
      "created_at" : "2012-08-08T17:04:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-7590124",
      "id" : 7590124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-08-08T17:15:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7590124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Gavin, any thoughts on this?",
      "created_at" : "2012-10-31T21:41:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-9963221",
      "id" : 9963221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-10-31T21:41:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9963221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn :  needs unit tests, in my humble opinion. It is a very good candidate for \"needs 100% code coverage from tests\", because transaction selection is such a key piece of the Bitcoin infrastructure.\r\n\r\nAlso needs thorough code review, with an eye towards \"Could I construct a series of transactions that made the selection algorithm take O(N^2) time ?\"",
      "created_at" : "2012-11-01T15:15:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-9983542",
      "id" : 9983542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-01T15:16:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9983542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen What kind of unit tests would you like for this? I already dealt with the O(N^2) problem a while back on Eligius, though of course more reviews are always welcome.",
      "created_at" : "2012-11-01T16:01:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-9985286",
      "id" : 9985286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-01T16:01:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9985286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "My suggestion would be start with a bunch of \"random\" mempools and them making sure that the selections it makes are valid (no mistaken dependencies) and actually get the most fees possible (e.g. by externally precomputing the correct answers).  I'd also include cases designed to trigger complexity attacks (mempool with a 2 groups of 100 long chains or whatever).\r\n\r\nAfter that I'd run lcov with the test and look and make sure every conceivably reachable branch (e.g. all except the invisible boost added heap allocation failure tests) is hit by the tests. If not, add tests that trigger them.\r\n\r\nAfter that the code should be intentionally broken (e.g. by randomly removing some statements and/or turning some if() to if(!())) and make sure the tests fail.  I volunteer to do this kind of testing (plus some basic smoke tests) once regular unit tests for this are written.\r\n",
      "created_at" : "2012-11-01T16:09:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-9985591",
      "id" : 9985591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-01T16:09:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9985591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Thanks @gmaxwell , those are exactly the types of tests I think this needs!\r\n",
      "created_at" : "2012-11-01T21:03:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-9995865",
      "id" : 9995865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-01T21:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9995865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Update: It seems since rebasing this, new performance problems have cropped up. :(",
      "created_at" : "2012-11-13T05:05:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-10315914",
      "id" : 10315914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-13T05:05:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10315914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Update: False alarm, I debugged the performance problem and it was a result of a poorly thought-out merge of this with #1648 (which elevated priority of transactions that benefit the miner directly). This seems to still perform well without that change (or with it done once).",
      "created_at" : "2012-11-24T21:54:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-10684223",
      "id" : 10684223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-24T21:54:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10684223",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/56c7ea61d70d4a6699f1a53b9d03eb803a9c58c7 for binaries and test log.",
      "created_at" : "2012-11-27T19:22:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-10772536",
      "id" : 10772536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2012-11-27T19:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10772536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Fixed a bug triggered by today's onslaught of !IsFinal transactions...",
      "created_at" : "2013-01-12T02:41:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-12172359",
      "id" : 12172359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2013-01-12T02:41:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12172359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Rebase needed.\r\n\r\nAlthough I think this needs a re-think/rewrite:\r\n\r\nWhen we have a memory-limited mempool (needed for anti-DoS), we'll run into a chicken-and-egg problem:  parent transaction may be evicted from mempool, child will get stuck (and eventually evicted) from the orphan pool. Seems to me what is needed is a new protocol message that is \"here is a bundle of dependent transactions, with children that pay for their parents.\"\r\n",
      "created_at" : "2013-10-21T01:05:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-26687849",
      "id" : 26687849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2013-10-21T01:05:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26687849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Rebased. I agree it isn't perfect, but this is 1) better than nothing, and 2) well-tested. If anyone wants to put the effort into a rewrite, I'd be glad to defer and give it testing.. but I think everyone's busy enough already.",
      "created_at" : "2013-10-25T00:52:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-27047126",
      "id" : 27047126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2013-10-25T00:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27047126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Thank you for your work on this, it would be good to see it in a 0.9 release, am curious if tests are completed.",
      "created_at" : "2014-01-23T18:04:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-33150574",
      "id" : 33150574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-01-23T18:04:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33150574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "I'm not sure if I'm going to have time to do tests before 0.9 - hopefully someone else can help out with that. :(",
      "created_at" : "2014-01-23T18:21:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-33152404",
      "id" : 33152404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-01-23T18:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33152404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "If the tests for this need any funding support from some bounty fund and if there is not support or priority, it's possible the tests may be able to be bountyfied (ok, not a word) as part of something I'm working on, it's probably 60 days out though before any funds would be available.",
      "created_at" : "2014-01-24T04:04:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-33195909",
      "id" : 33195909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-01-24T04:04:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33195909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "#3753 also just had merge conflicts on testing (failed merge).",
      "created_at" : "2014-06-24T00:39:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-46919628",
      "id" : 46919628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-06-24T00:39:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46919628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "Rebased, but the changes were significant enough that IMO this needs re-review and re-testing :(",
      "created_at" : "2014-06-26T12:32:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-47219628",
      "id" : 47219628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-06-26T12:32:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47219628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/p1647_200f8abb943e5acd3bf599b4bfa8e9beccd53d1f/ for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-26T18:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-47258436",
      "id" : 47258436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-06-26T18:03:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47258436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "How much mining actually occurs using miner.cpp?  Is it basically example code at this point?  Since CPFP makes economic sense for miners, wouldn't they have implemented it already?  I admit to cluelessness about the mining landscape.\r\n",
      "created_at" : "2014-08-15T00:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-52262161",
      "id" : 52262161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-08-15T00:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52262161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "@dgenr8 It's supposed to be example code, but unfortunately a lot of miners still end up using it as-is today. :(",
      "created_at" : "2014-08-15T00:30:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-52262334",
      "id" : 52262334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-08-15T00:30:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52262334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Well \"the internal miner\" is example code. It's slow and useless.\r\n\r\nHowever `miner.cpp`also contains code for transaction selection from the mempool, which is used for `getblocktemplate`, which is used by many miners.\r\n",
      "created_at" : "2014-08-15T11:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-52296160",
      "id" : 52296160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-08-15T11:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52296160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Labeling this for 0.11. This is the oldest pull request open, let's finally get it in by then.",
      "created_at" : "2014-12-29T09:41:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-68243782",
      "id" : 68243782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2014-12-29T09:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68243782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Would love to see this get in. Have a situation right now where a new user received 0.01btc tx with no fee and then spent their entire balance, 17btc, which is stuck. It would be a real improvement for user experience if wallet software could just include a fee to cover unconfirmed input tx in addition to itself instead of trying to explain to users why they can't spend those funds yet.",
      "created_at" : "2015-03-06T17:31:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-77599552",
      "id" : 77599552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2015-03-06T17:31:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/77599552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/316879?v=3",
         "events_url" : "https://api.github.com/users/voisine/events{/privacy}",
         "followers_url" : "https://api.github.com/users/voisine/followers",
         "following_url" : "https://api.github.com/users/voisine/following{/other_user}",
         "gists_url" : "https://api.github.com/users/voisine/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/voisine",
         "id" : 316879,
         "login" : "voisine",
         "organizations_url" : "https://api.github.com/users/voisine/orgs",
         "received_events_url" : "https://api.github.com/users/voisine/received_events",
         "repos_url" : "https://api.github.com/users/voisine/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/voisine/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/voisine/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/voisine"
      }
   },
   {
      "body" : "Needs tests, as suggested by gmaxwell. A regression test making sure that this would actually fix the situation described by @voisine would be excellent (although non-trivial-- do you assume that the 0.01btc tx with no fee got relayed and is still in memory pools, or not?)\r\n\r\nAnd needs a good review from somebody who is good at spotting potential DoS weaknesses (like Sergio).\r\n",
      "created_at" : "2015-03-06T18:25:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-77609040",
      "id" : 77609040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2015-03-06T18:25:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/77609040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Yes, thanks to those who have worked on this so far.  This being the oldest open pull request, and having merits for inclusion in 0.11, it needs and deserves both a thoughtful review and merge.",
      "created_at" : "2015-03-10T03:02:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-77987898",
      "id" : 77987898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2015-03-10T03:02:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/77987898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4469280?v=3",
         "events_url" : "https://api.github.com/users/ABISprotocol/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ABISprotocol/followers",
         "following_url" : "https://api.github.com/users/ABISprotocol/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ABISprotocol/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ABISprotocol",
         "id" : 4469280,
         "login" : "ABISprotocol",
         "organizations_url" : "https://api.github.com/users/ABISprotocol/orgs",
         "received_events_url" : "https://api.github.com/users/ABISprotocol/received_events",
         "repos_url" : "https://api.github.com/users/ABISprotocol/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ABISprotocol/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ABISprotocol/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ABISprotocol"
      }
   },
   {
      "body" : "ACK - light test at branch's current tip\r\n",
      "created_at" : "2015-03-21T10:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-84301972",
      "id" : 84301972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2015-03-21T10:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84301972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26892010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26892010"
         }
      },
      "body" : "This cyclic dependency is pretty ugly. Can't you just pass the mapInfoById to the methods in txindo that need it?",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-03-21T13:58:20Z",
      "diff_hunk" : "@@ -138,82 +276,76 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         CCoinsViewCache view(pcoinsTip);\n \n         // Priority order to process transactions\n-        list<COrphan> vOrphan; // list memory doesn't move\n-        map<uint256, vector<COrphan*> > mapDependers;\n+        mapInfo_t mapInfoById;\n         bool fPrintPriority = GetBoolArg(\"-printpriority\", false);\n \n         // This vector will be sorted into a priority queue:\n         vector<TxPriority> vecPriority;\n         vecPriority.reserve(mempool.mapTx.size());\n+\n         for (map<uint256, CTxMemPoolEntry>::iterator mi = mempool.mapTx.begin();\n              mi != mempool.mapTx.end(); ++mi)\n         {\n             const CTransaction& tx = mi->second.GetTx();\n+\n+            const uint256& hash = tx.GetHash();\n+            CTxInfo& txinfo = mapInfoById[hash];\n+            txinfo.hash = hash;\n+            txinfo.pmapInfoById = &mapInfoById;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26892010",
      "id" : 26892010,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 216,
      "path" : "src/miner.cpp",
      "position" : 216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26892010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Has anyone done benchmarks on the impact on block creation time?",
      "created_at" : "2015-03-21T13:58:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#issuecomment-84344945",
      "id" : 84344945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1647",
      "updated_at" : "2015-03-21T13:58:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84344945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26892151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26892151"
         }
      },
      "body" : "That's basically everything... :/",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-03-21T14:17:01Z",
      "diff_hunk" : "@@ -138,82 +276,76 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         CCoinsViewCache view(pcoinsTip);\n \n         // Priority order to process transactions\n-        list<COrphan> vOrphan; // list memory doesn't move\n-        map<uint256, vector<COrphan*> > mapDependers;\n+        mapInfo_t mapInfoById;\n         bool fPrintPriority = GetBoolArg(\"-printpriority\", false);\n \n         // This vector will be sorted into a priority queue:\n         vector<TxPriority> vecPriority;\n         vecPriority.reserve(mempool.mapTx.size());\n+\n         for (map<uint256, CTxMemPoolEntry>::iterator mi = mempool.mapTx.begin();\n              mi != mempool.mapTx.end(); ++mi)\n         {\n             const CTransaction& tx = mi->second.GetTx();\n+\n+            const uint256& hash = tx.GetHash();\n+            CTxInfo& txinfo = mapInfoById[hash];\n+            txinfo.hash = hash;\n+            txinfo.pmapInfoById = &mapInfoById;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26892151",
      "id" : 26892151,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 216,
      "path" : "src/miner.cpp",
      "position" : 216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26892151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26930026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26930026"
         }
      },
      "body" : "It's easier to not put the logic in the data structure, I think. The fact that you need a pointer from the low-level data structure to the container is just a symptom of that.",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-03-23T11:52:11Z",
      "diff_hunk" : "@@ -138,82 +276,76 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         CCoinsViewCache view(pcoinsTip);\n \n         // Priority order to process transactions\n-        list<COrphan> vOrphan; // list memory doesn't move\n-        map<uint256, vector<COrphan*> > mapDependers;\n+        mapInfo_t mapInfoById;\n         bool fPrintPriority = GetBoolArg(\"-printpriority\", false);\n \n         // This vector will be sorted into a priority queue:\n         vector<TxPriority> vecPriority;\n         vecPriority.reserve(mempool.mapTx.size());\n+\n         for (map<uint256, CTxMemPoolEntry>::iterator mi = mempool.mapTx.begin();\n              mi != mempool.mapTx.end(); ++mi)\n         {\n             const CTransaction& tx = mi->second.GetTx();\n+\n+            const uint256& hash = tx.GetHash();\n+            CTxInfo& txinfo = mapInfoById[hash];\n+            txinfo.hash = hash;\n+            txinfo.pmapInfoById = &mapInfoById;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r26930026",
      "id" : 26930026,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 216,
      "path" : "src/miner.cpp",
      "position" : 216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26930026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27826049"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27826049"
         }
      },
      "body" : "Aren't this !empty check and flag to resort redundant given the foreach loop below?",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-04-06T20:15:28Z",
      "diff_hunk" : "@@ -297,22 +423,29 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n                     dPriority, feeRate.ToString(), tx.GetHash().ToString());\n             }\n \n-            // Add transactions that depend on this one to the priority queue\n-            if (mapDependers.count(hash))\n+            bool fResort = false;\n+            BOOST_FOREACH(CTxInfo* ptxinfo, vAdded)\n             {\n-                BOOST_FOREACH(COrphan* porphan, mapDependers[hash])\n+                pblock->vtx.push_back(*ptxinfo->ptx);\n+                pblocktemplate->vTxFees.push_back(ptxinfo->nTxFee);\n+                pblocktemplate->vTxSigOps.push_back(ptxinfo->nTxSigOps);\n+                nFees += ptxinfo->nTxFee;\n+\n+                ptxinfo->fInvalid = true;\n+                if (!ptxinfo->setDependents.empty())\n                 {\n-                    if (!porphan->setDependsOn.empty())\n+                    fResort = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27826049",
      "id" : 27826049,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 414,
      "path" : "src/miner.cpp",
      "position" : 414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27826049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27826376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27826376"
         }
      },
      "body" : "I think that `ptxinfo->nTxSigOps` is just that transaction's `GetP2SHSigOpCount` and doesn't include its `GetLegacySigOpCount`.",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-04-06T20:19:41Z",
      "diff_hunk" : "@@ -297,22 +423,29 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n                     dPriority, feeRate.ToString(), tx.GetHash().ToString());\n             }\n \n-            // Add transactions that depend on this one to the priority queue\n-            if (mapDependers.count(hash))\n+            bool fResort = false;\n+            BOOST_FOREACH(CTxInfo* ptxinfo, vAdded)\n             {\n-                BOOST_FOREACH(COrphan* porphan, mapDependers[hash])\n+                pblock->vtx.push_back(*ptxinfo->ptx);\n+                pblocktemplate->vTxFees.push_back(ptxinfo->nTxFee);\n+                pblocktemplate->vTxSigOps.push_back(ptxinfo->nTxSigOps);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27826376",
      "id" : 27826376,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 407,
      "path" : "src/miner.cpp",
      "position" : 407,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27826376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27829128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27829128"
         }
      },
      "body" : "Probably better to just set fResort here and not in the foreach... (done)",
      "commit_id" : "06f4f7df0388a299c726d01a17caa6e9465d1711",
      "created_at" : "2015-04-06T20:52:23Z",
      "diff_hunk" : "@@ -297,22 +423,29 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n                     dPriority, feeRate.ToString(), tx.GetHash().ToString());\n             }\n \n-            // Add transactions that depend on this one to the priority queue\n-            if (mapDependers.count(hash))\n+            bool fResort = false;\n+            BOOST_FOREACH(CTxInfo* ptxinfo, vAdded)\n             {\n-                BOOST_FOREACH(COrphan* porphan, mapDependers[hash])\n+                pblock->vtx.push_back(*ptxinfo->ptx);\n+                pblocktemplate->vTxFees.push_back(ptxinfo->nTxFee);\n+                pblocktemplate->vTxSigOps.push_back(ptxinfo->nTxSigOps);\n+                nFees += ptxinfo->nTxFee;\n+\n+                ptxinfo->fInvalid = true;\n+                if (!ptxinfo->setDependents.empty())\n                 {\n-                    if (!porphan->setDependsOn.empty())\n+                    fResort = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1647#discussion_r27829128",
      "id" : 27829128,
      "original_commit_id" : "b76429b5fa7ce2b5469e4cc4d170acae1c61d68e",
      "original_position" : 414,
      "path" : "src/miner.cpp",
      "position" : 414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1647",
      "updated_at" : "2015-04-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27829128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
