[
   {
      "body" : "(EDITED)\r\n\r\nList of implementation changes:\r\n * new database layout: \r\n   * 2 leveldb's (coins/ and blktree/ subdirs), replacing blkindex.dat\r\n   * separate directory (blocks/) with block data (in the usual format, but smaller files) and undo data\r\n * database keys are of the form (char,key) instead of (string,key) for reasons of compactness\r\n * there is no txid-to-diskpos index anymore, only blkid-to-diskpos and txid-to-unspent-outputs\r\n   * this makes getrawtransaction only work on unspent outputs (and slower)\r\n      * an optional txid-to-diskpos index is planned\r\n * some new very specialized serializers are added (compact variable-length integer, compact amount, compact txout)\r\n * block index does not store hashBlockNext anymore - this is reconstructed from hashBestBlock at startup\r\n * at startup, automatically reorg to the best block in blktree/blocks\r\n * new RPCs: gettxoutsetinfo and gettxout operate on the coins database\r\n * no more CTxIndex in-scope: instead, a global pcoinsTip (representing the coin db) and pblocktree (representing the blktree db)\r\n   * intended to be moved to separate modules/classes, properly encapsulated\r\n * blktree database contains statistics about the block file (size, which blocks in it, times, heights, undo stats, ...)\r\n * blktree database contains flag per block that determines the degree of validation it had, to allow future headers-first mode\r\n * block files are pre-allocated (in batches of 16 MiB, the files grow to max 128 MIB), to reduce fragmentation\r\n * transaction hashes are cached, and typically never calculated more than once\r\n\r\nIncluded in the pullreq, but technically separate:\r\n * do -loadblock= and bootstrap.dat import in a separate thread\r\n * add check for strict DER encoding for signatures, and standard public keys\r\n\r\n\r\n",
      "created_at" : "2012-08-16T18:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7794418",
      "id" : 7794418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-11T20:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7794418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa One question, our current AppendBlockFile() function takes MAX_SIZE into account and generates a new block-file if the space left in the block file (max allowed filesize) is < MAX_SIZE. So 128 MiB files would have a maximum of 96 MiB usage-data, right?",
      "created_at" : "2012-08-21T12:18:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7899172",
      "id" : 7899172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-21T12:18:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7899172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo: not sure what you mean; I don't use AppendBlockFile anymore.",
      "created_at" : "2012-08-21T12:24:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7899296",
      "id" : 7899296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-21T12:24:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7899296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I saw that and wanted to understand the change here, which condition is used to determine, if a new block-file needs to be created, where is the check in your new code for that and what's the space limit?",
      "created_at" : "2012-08-21T12:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7899334",
      "id" : 7899334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-21T12:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7899334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "The check is in FindBlockPos in main.cpp. And a new file is created if (old_used_size + new_block_size >= MAX_BLOCKFILE_SIZE).",
      "created_at" : "2012-08-21T12:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7899397",
      "id" : 7899397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-21T12:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7899397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1423981"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423981"
         }
      },
      "body" : "Why nBlockSize+8, is that a padding?",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-08-21T13:13:27Z",
      "diff_hunk" : "@@ -1827,13 +1885,18 @@ bool CBlock::AcceptBlock()\n         return DoS(100, error(\"AcceptBlock() : rejected by checkpoint lock-in at %d\", nHeight));\n \n     // Write block to history file\n+    unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);\n     if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))\n         return error(\"AcceptBlock() : out of disk space\");\n-    unsigned int nFile = -1;\n-    unsigned int nBlockPos = 0;\n-    if (!WriteToDisk(nFile, nBlockPos))\n+    CDiskBlockPos blockPos;\n+    {\n+        CChainDB chaindb;\n+        if (!FindBlockPos(chaindb, blockPos, nBlockSize+8, nHeight, nTime))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1423981",
      "id" : 1423981,
      "original_commit_id" : "f51448802f9b867e2caf7ab14ce9630d6cf9a1dc",
      "original_position" : 1444,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1423981",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424086"
         }
      },
      "body" : "4 bytes magic, 4 bytes block length; that's just the file format of blk*.dat.",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-08-21T13:27:47Z",
      "diff_hunk" : "@@ -1827,13 +1885,18 @@ bool CBlock::AcceptBlock()\n         return DoS(100, error(\"AcceptBlock() : rejected by checkpoint lock-in at %d\", nHeight));\n \n     // Write block to history file\n+    unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);\n     if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))\n         return error(\"AcceptBlock() : out of disk space\");\n-    unsigned int nFile = -1;\n-    unsigned int nBlockPos = 0;\n-    if (!WriteToDisk(nFile, nBlockPos))\n+    CDiskBlockPos blockPos;\n+    {\n+        CChainDB chaindb;\n+        if (!FindBlockPos(chaindb, blockPos, nBlockSize+8, nHeight, nTime))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424086",
      "id" : 1424086,
      "original_commit_id" : "f51448802f9b867e2caf7ab14ce9630d6cf9a1dc",
      "original_position" : 1444,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424125"
         }
      },
      "body" : "I'm lacking some background information here, sorry :). Is the format defined / described somewhere?",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-08-21T13:34:03Z",
      "diff_hunk" : "@@ -1827,13 +1885,18 @@ bool CBlock::AcceptBlock()\n         return DoS(100, error(\"AcceptBlock() : rejected by checkpoint lock-in at %d\", nHeight));\n \n     // Write block to history file\n+    unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);\n     if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))\n         return error(\"AcceptBlock() : out of disk space\");\n-    unsigned int nFile = -1;\n-    unsigned int nBlockPos = 0;\n-    if (!WriteToDisk(nFile, nBlockPos))\n+    CDiskBlockPos blockPos;\n+    {\n+        CChainDB chaindb;\n+        if (!FindBlockPos(chaindb, blockPos, nBlockSize+8, nHeight, nTime))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424125",
      "id" : 1424125,
      "original_commit_id" : "f51448802f9b867e2caf7ab14ce9630d6cf9a1dc",
      "original_position" : 1444,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424182"
         }
      },
      "body" : "No idea, but I wanted to retain compatibility between pre and post-ultraprune block files, so I used the same format. That is: the files are a concatenation of {4 bytes magic, 4 bytes LE integer with the actual block size, block data itself).",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-08-21T13:39:19Z",
      "diff_hunk" : "@@ -1827,13 +1885,18 @@ bool CBlock::AcceptBlock()\n         return DoS(100, error(\"AcceptBlock() : rejected by checkpoint lock-in at %d\", nHeight));\n \n     // Write block to history file\n+    unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);\n     if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))\n         return error(\"AcceptBlock() : out of disk space\");\n-    unsigned int nFile = -1;\n-    unsigned int nBlockPos = 0;\n-    if (!WriteToDisk(nFile, nBlockPos))\n+    CDiskBlockPos blockPos;\n+    {\n+        CChainDB chaindb;\n+        if (!FindBlockPos(chaindb, blockPos, nBlockSize+8, nHeight, nTime))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424182",
      "id" : 1424182,
      "original_commit_id" : "f51448802f9b867e2caf7ab14ce9630d6cf9a1dc",
      "original_position" : 1444,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424250"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424250"
         }
      },
      "body" : "I found this one and it explains what I was missing here: https://bitcointalk.org/index.php?topic=101514.0 thanks for your further explanation, too.\n\nWhy keep things compatible here, perhaps it's the right time to even optimize the internals of the block-files (e.g. compression or such a thing)?",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-08-21T13:43:49Z",
      "diff_hunk" : "@@ -1827,13 +1885,18 @@ bool CBlock::AcceptBlock()\n         return DoS(100, error(\"AcceptBlock() : rejected by checkpoint lock-in at %d\", nHeight));\n \n     // Write block to history file\n+    unsigned int nBlockSize = ::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION);\n     if (!CheckDiskSpace(::GetSerializeSize(*this, SER_DISK, CLIENT_VERSION)))\n         return error(\"AcceptBlock() : out of disk space\");\n-    unsigned int nFile = -1;\n-    unsigned int nBlockPos = 0;\n-    if (!WriteToDisk(nFile, nBlockPos))\n+    CDiskBlockPos blockPos;\n+    {\n+        CChainDB chaindb;\n+        if (!FindBlockPos(chaindb, blockPos, nBlockSize+8, nHeight, nTime))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1424250",
      "id" : 1424250,
      "original_commit_id" : "f51448802f9b867e2caf7ab14ce9630d6cf9a1dc",
      "original_position" : 1444,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1424250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Does this break the ability to downgrade at all? (I expect it just means wasted \"padding\" space in the blk*.dat files?)",
      "created_at" : "2012-08-24T04:03:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-7991614",
      "id" : 7991614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-24T04:03:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/7991614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Updated. Batch block connection now keeps a permanent cache, and modifies that (instead of delaying block connection until several blocks were available, which interfered with normal network-based downloading). Also added a commit that changes the block database format, in preparation of things like parallel signature checking and initial headers-only mode.",
      "created_at" : "2012-08-27T00:23:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8044737",
      "id" : 8044737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-27T00:23:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8044737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa With block database format you mean stored blocks in blk0000x.dat?",
      "created_at" : "2012-08-27T05:47:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8047427",
      "id" : 8047427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-27T05:47:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8047427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@luke-jr how do you mean breaking the ability to downgrade? The blk000*.dat files remain exactly the same format, but the other databases are incompatible.\n\n@Diapolo No, it uses coins.dat (the unspent txout set) and chain.dat (the block index), in addition to the blk*.dat (and rev*.dat) files. It's the format of chain.dat that changed in the last commit.",
      "created_at" : "2012-08-27T10:31:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8052173",
      "id" : 8052173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-27T10:31:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8052173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa If it interacts with downgrades in ugly ways, I'd probably not want to put it into next-test.",
      "created_at" : "2012-08-27T16:47:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8062078",
      "id" : 8062078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-27T16:47:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8062078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr Shouldn't be a problem - the filenames are all different, so you can (almost) run ultraprune and non-ultraprune together in the same datadir independently.\n\nThat said, it's likely to conflict with a lot of other stuff, so decide for yourself.",
      "created_at" : "2012-08-27T17:07:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8062727",
      "id" : 8062727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-27T17:07:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8062727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Could you provide a squashed version of the patch somewhere, for review? It's really hard to review as is because it's  just a record of how you implemented it over time.",
      "created_at" : "2012-08-30T12:34:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8157817",
      "id" : 8157817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-30T12:34:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8157817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn https://github.com/bitcoin/bitcoin/pull/1677.diff ?",
      "created_at" : "2012-08-30T12:48:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8158190",
      "id" : 8158190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-30T12:48:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8158190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Thanks, that looks useful.",
      "created_at" : "2012-08-31T10:32:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8188081",
      "id" : 8188081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-31T10:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8188081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn  Seems that through rebasing I lost some comments you made earlier on the commits?\n\nRegarding the encodings, I plan to write some text about the final format for all datastructures, but I may change a few things still. \n\n",
      "created_at" : "2012-08-31T11:29:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8189169",
      "id" : 8189169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-08-31T11:29:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8189169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased/combined with @mikehearn's LevelDB patch",
      "created_at" : "2012-09-04T23:43:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8282968",
      "id" : 8282968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-04T23:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8282968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased on 0.7, and moved the more experimental block caching and parallel signature checking to a separate branch. The code in here should be stable and can be tested.\n\nThe only things that remain to be done are automatic import of old data, and more elaborate consistency checks at startup. I think those can be done in separate pull requests though.\n\nThis branch has its own LevelDB glue, independent (though similar, but simpler) from the one in Mike's leveldb branch. As the coin and block indexes are only opened once, there was no need for a CDB-like wrapper and global CDBEnv to cache database accessors. If LevelDB is merged first, I'll add reverts for most of it here.",
      "created_at" : "2012-09-20T14:40:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8730563",
      "id" : 8730563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-20T14:40:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8730563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I closed the LevelDB pull req. Let's merge it as part of this.\n\nNote that my LevelDB branch has code that does replay the blocks with some GUI progress. It's not great because it actually re-writes the block files in order to track the block offsets ... I didn't do any deep refactorings to fix that as I wanted it to be as easy/fast to merge as possible and it's a one-off migration anyway. But as it's now a part of ultraprune that bridge was crossed, so you could just re-use whatever GUI code is possible.",
      "created_at" : "2012-09-20T16:05:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8735305",
      "id" : 8735305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-20T16:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8735305",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@TheBlueMatt any way to disable the build tester here, as it seems to be incompatible with this anyway?",
      "created_at" : "2012-09-21T12:07:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8762537",
      "id" : 8762537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-21T12:07:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8762537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I've tested this a bit on the testnet. No problems found, and synchronization is super-fast.\n\nOne small comment: in your bitcoin-qt.pro, please use $(MAKE) instead of `make`. This prevents an annoying warning about a job server in Qt Creator.",
      "created_at" : "2012-09-21T13:01:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8763731",
      "id" : 8763731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-21T13:01:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8763731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj: updated to use $(MAKE)",
      "created_at" : "2012-09-21T13:12:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8764081",
      "id" : 8764081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-21T13:12:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8764081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Id rather not, the patch is really quite simple (http://jenkins.bluematt.me/pull-tester/files/bitcoind-comparison.patch) , afaict, its only failing because setBlockIndexValid was added directly above hashGenesisBlock in main.cpp.  Can you just move that line and see if it works?",
      "created_at" : "2012-09-22T20:46:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8792615",
      "id" : 8792615,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-22T20:46:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8792615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Changed the database/serialization format one more time: coins and undo data now contains the transaction version number. This may be necessary when new versions of transaction are defined that have an influence on their ability to be spent.\n\n@TheBlueMatt ok, moved the setBlockIndexValid line in main.cpp.",
      "created_at" : "2012-09-25T11:48:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8851318",
      "id" : 8851318,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-25T11:48:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8851318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "This does not build on MacOS X because there is no fdatasync on that platform.",
      "created_at" : "2012-09-27T15:00:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8938946",
      "id" : 8938946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-27T15:00:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8938946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@TheBlueMatt I wonder why it still complains?\n\nEDIT: Oh, just out of date with master. Let's wait for the next cycle.",
      "created_at" : "2012-09-28T14:56:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-8978928",
      "id" : 8978928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-28T15:13:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8978928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I just tried to start my client based on this branch and got:\r\n\r\nLoading block index...\r\nOpening LevelDB in /Users/hearn/Library/Application Support/Bitcoin/blktree\r\nOpened LevelDB successfully\r\nOpening LevelDB in /Users/hearn/Library/Application Support/Bitcoin/coins\r\nOpened LevelDB successfully\r\nLoadBlockIndex(): last block file = 23\r\nLoadBlockIndex(): last block file: CBlockFileInfo(blocks=1572, size=132444896, heights=199237..200807, time=2012-09-17..2012-09-27)\r\nLoadBlockIndex(): hashBestChain=00000000000000e78688  height=200806 date=09/27/2012 21:08:42\r\nVerifying last 2500 blocks at level 1\r\n block index           36135ms\r\nLoading wallet...\r\ndbenv.open LogDir=/Users/hearn/Library/Application Support/Bitcoin/database ErrorFile=/Users/hearn/Library/Application Support/Bitcoin/db.log\r\nnFileVersion = 70099\r\n wallet                 1192ms\r\nREORGANIZE: Disconnect 1 blocks; 000000000000051dcdc2..00000000000000e78688\r\nREORGANIZE: Connect 2 blocks; 000000000000051dcdc2..00000000000003d0a2b1\r\n\r\n\r\n************************\r\nEXCEPTION: NSt8ios_base7failureE       \r\nCAutoFile::read : end of file       \r\nbitcoin in Runaway exception       \r\n\r\n",
      "created_at" : "2012-09-29T10:19:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9002668",
      "id" : 9002668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-29T10:19:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9002668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "On investigation this failure can happen with both ultralevelprune and old bdb code, it happens when the block is not written but the db updates are. Typically if power is yanked at just the wrong time.\r\n\r\nAs it is not a new failure mode, I guess it should not delay review/merge of this code.",
      "created_at" : "2012-09-29T11:19:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9003047",
      "id" : 9003047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-09-29T11:19:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9003047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1823288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1823288"
         }
      },
      "body" : "So this still includes legacy BDB support? Means we need to keep 2 code-bases up to date.\r\nWhat was the intention to keep it to be able to revert, just wanna know :).",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-10-11T20:34:11Z",
      "diff_hunk" : "@@ -90,6 +90,33 @@ contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs qtaccessiblewidgets\n }\n \n+contains(USE_LEVELDB, -) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1823288",
      "id" : 1823288,
      "original_commit_id" : "41f98b3c506de5a81e143fc7538aa85d325e9c66",
      "original_position" : 4,
      "path" : "bitcoin-qt.pro",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1823288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Did anyone build this directly on Windows with MinGW? I saw there was a cross-compile Windows flag in the pro file. Perhaps I should just fetch that branch and try in the next days.",
      "created_at" : "2012-10-11T20:37:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9356748",
      "id" : 9356748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-11T20:37:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9356748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo ÃÂ½es, I've done windows builds; I even had to backport the LevelDB env for windows from c++0x to c++, as gitian only has a gcc 4.2 mingw compiler which doesn't support c++0x.",
      "created_at" : "2012-10-11T20:59:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9357697",
      "id" : 9357697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-11T20:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9357697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1823611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1823611"
         }
      },
      "body" : "Yes, though the BDB version most likely doesn't compile anymore. This was converted from Mike's code which tried to keep compatibility, but that's just an unneccessary burden.",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-10-11T21:00:19Z",
      "diff_hunk" : "@@ -90,6 +90,33 @@ contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs qtaccessiblewidgets\n }\n \n+contains(USE_LEVELDB, -) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1823611",
      "id" : 1823611,
      "original_commit_id" : "41f98b3c506de5a81e143fc7538aa85d325e9c66",
      "original_position" : 4,
      "path" : "bitcoin-qt.pro",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1823611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1826779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826779"
         }
      },
      "body" : "Thanks, so it would be nice to remove that burden entirely from this pull and the code. If this is a one way ticket there is no need to keep BDB compatibility code in.",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-10-12T05:36:03Z",
      "diff_hunk" : "@@ -90,6 +90,33 @@ contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs qtaccessiblewidgets\n }\n \n+contains(USE_LEVELDB, -) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1826779",
      "id" : 1826779,
      "original_commit_id" : "41f98b3c506de5a81e143fc7538aa85d325e9c66",
      "original_position" : 4,
      "path" : "bitcoin-qt.pro",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1827587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827587"
         }
      },
      "body" : "The original idea was to reduce the risk of merging the code, in case there were issues with LevelDB [on some specific platform] we don't want to hold up the release or do a potentially messy revert.\r\n\r\nI agree it's irritating and a burden, but it'd suck if all of ultraprune ended up getting reverted due to unanticipated issues with LevelDB. Once 0.8 has been successfully rolled out to the userbase and things are quiet it could be deleted at that time?",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-10-12T08:41:55Z",
      "diff_hunk" : "@@ -90,6 +90,33 @@ contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs qtaccessiblewidgets\n }\n \n+contains(USE_LEVELDB, -) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1827587",
      "id" : 1827587,
      "original_commit_id" : "41f98b3c506de5a81e143fc7538aa85d325e9c66",
      "original_position" : 4,
      "path" : "bitcoin-qt.pro",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827587",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1827843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827843"
         }
      },
      "body" : "I'm fine with removing that later as long as you / sipa keep track of that.\r\nThat whole block of commands in the pro-file looks like Vodoo to me anyway :-D.",
      "commit_id" : "4ca60bba5c3b8394c252715c71e8758d63c316ee",
      "created_at" : "2012-10-12T09:16:12Z",
      "diff_hunk" : "@@ -90,6 +90,33 @@ contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs qtaccessiblewidgets\n }\n \n+contains(USE_LEVELDB, -) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#discussion_r1827843",
      "id" : 1827843,
      "original_commit_id" : "41f98b3c506de5a81e143fc7538aa85d325e9c66",
      "original_position" : 4,
      "path" : "bitcoin-qt.pro",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1677",
      "updated_at" : "2012-10-20T21:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Errors compiling on my Mac:\r\n\r\nmakefile.osx has 4 spaces instead of a tab:\r\n```    @echo \"Building LevelDB ...\"; cd leveldb-1.5.0; make; cd ..```\r\n\r\nAnd:\r\n```txdb-bdb.cpp: In member function Ã¢ÂÂbool CCoinsDB::HaveCoins(uint256)Ã¢ÂÂ:\r\ntxdb-bdb.cpp:10: error: Ã¢ÂÂmake_pairÃ¢ÂÂ was not declared in this scope```",
      "created_at" : "2012-10-16T16:07:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9496096",
      "id" : 9496096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-16T16:07:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9496096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen Why does it build the BDB version? Did you explicitly disable USE_LEVELDB, or is there a problem with the makefile that causes this?",
      "created_at" : "2012-10-16T18:51:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9502063",
      "id" : 9502063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-16T18:51:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9502063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Some additional changes: reorganized the commits a bit, fixed a bug that caused unit tests to fail, removed some dead code, and added a lot of comments (mostly in main.h).\r\n\r\nAlso see the list of implementation changes in the first comment here.",
      "created_at" : "2012-10-20T14:20:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9631656",
      "id" : 9631656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-20T14:20:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9631656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Design ACK; I reviewed all of the changes to main.h and about half of main.cpp, and had just a handful of tiny nits that aren't worth picking.\r\n\r\nI feel comfortable pulling this as long as @sipa can commit to working through the remaining TODOs and help fix any bugs that crop up over the next month or so.\r\n",
      "created_at" : "2012-10-20T14:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9631794",
      "id" : 9631794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-20T14:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9631794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "By the way: this pull request is rebased on top of 'threadimport' (#1880) and 'canonical' (#1742). I suppose that means those require ACKs first. If there is a problem, I'll remove them from under this pull.",
      "created_at" : "2012-10-20T14:40:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9631861",
      "id" : 9631861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-20T17:14:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9631861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK. This appears ready for integration.",
      "created_at" : "2012-10-20T21:41:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1677#issuecomment-9637115",
      "id" : 9637115,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1677",
      "updated_at" : "2012-10-20T21:41:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9637115",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
