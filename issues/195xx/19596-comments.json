[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It should be substantially faster and memory friendly for these big txns to\nfill the parents set as a vector of hashes, sort it, use std::unique to\nshift out the duplicates, and then erase garbage.\n\n\nstd::set will do O(n) allocations and use about 3x the memory compared to\nstd::vector, and set traversal and construction is worse than vector.\n\n\nThe only case where set may win is if the duplicate rate was large, but the\nadversarial worst case is better under vector than under set and I suspect\nthe average case (not a big duplicate rate) is better too.\n",
      "created_at" : "2020-07-27T06:43:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19596#issuecomment-664151671",
      "id" : 664151671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19596",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDE1MTY3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T06:43:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664151671",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Good ideas. There is the question of using sets for the data structure. The first commit 2898d6505a3 \"Rewrite parent txid loop of requested transactions\" seems to break a number of functional tests for me locally. All the tests pass again after rebasing to keep only the second commit.\r\n\r\n```\r\ninterface_rest.py                       | â Failed  | 35 s\r\nmempool_packages.py                     | â Failed  | 3 s\r\np2p_segwit.py                           | â Failed  | 23 s\r\nrpc_rawtransaction.py                   | â Failed  | 9 s\r\nwallet_avoidreuse.py                    | â Failed  | 6 s\r\nwallet_avoidreuse.py --descriptors      | â Failed  | 7 s\r\nwallet_backup.py                        | â Failed  | 9 s\r\nwallet_balance.py                       | â Failed  | 15 s\r\nwallet_bumpfee.py                       | â Failed  | 5 s\r\nwallet_groups.py                        | â Failed  | 12 s\r\nwallet_listtransactions.py              | â Failed  | 36 s\r\n```",
      "created_at" : "2020-07-27T07:31:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19596#issuecomment-664172214",
      "id" : 664172214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19596",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDE3MjIxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T07:31:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664172214",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
