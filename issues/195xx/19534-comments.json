[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-07-16T16:12:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659515632",
      "id" : 659515632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTUxNTYzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-16T23:10:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659515632",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to wake up Travis",
      "created_at" : "2020-07-16T18:12:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659583340",
      "id" : 659583340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTU4MzM0MA==",
      "updated_at" : "2020-07-16T18:12:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659583340",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK eb22eeda5b37afea0649688690e04c00d5a6dbfd\r\n\r\nIf you make any changes, consider running `clang-format`.  No worries if you don't, we can always do it later in the roadmap.  Might be nice to clean up the formatting of some of the other methods here as well, now that we're touching so much of this.",
      "created_at" : "2020-07-17T03:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659824665",
      "id" : 659824665,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTgyNDY2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-17T03:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659824665",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So if i read this correct, if this is merged we narrow before even having benefit and v3 , and say an address is not routable if one flag in  CNetAddr m_net say's something else than  m_net == NET_IPV6 and skip that the Bitcoin imperative  'data decides'\r\n\r\nSo you want to change even the old ADDRv1 logic while BIP155 say's don't. hmm...\r\nThe way bitcoin is used in the wild is often strange and has hidden paths, i can only urge you to not touch in any way the old ADDR logic and the way that net works.\r\n\r\nAnd btw if ip is filled with << instead of memcpy and data don't decide, how sophisticated is the checksum plan for bit or byte errors in the new ADDRv1/v2 stream?   \r\n\r\nbtw Since the BIP155  ADDv2 is to send ip2 and v3 just as 32 byte without checksum, i would also recommend to concat least sig byte of hash(m net | 32 byte ) before send, but that;s prob a PR for BIP155.  \r\nedit@saibato: Not that to provide piggy pack support for tor onions in ipv6 packets when ipv6 in #1021 was merged is a holy move, but time passed by and the value of bitcoin is not only the timestamp consensus, but AFAICS also the network itself.   ",
      "created_at" : "2020-07-17T07:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-659911102",
      "id" : 659911102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTkxMTEwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-17T09:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659911102",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, Approach ACK. \r\n\r\nThe [BIP](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#specification) refers to I2P and CJDNS overlay networks and gives them their own network IDs. An I2P address is a Tor v3 address and a CJDNS address is a IPV6 address (or at least they are the same size) right? I'm just trying to understand why they warrant their own reserved network IDs in the BIP but don't seem to be implemented here?\r\n\r\n",
      "created_at" : "2020-07-18T10:49:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#issuecomment-660464773",
      "id" : 660464773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19534",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDQ2NDc3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-18T10:49:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660464773",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456797618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456797618"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this code still needed in `GetNetwork()`?\r\n```cpp\r\n    if (IsInternal())\r\n        return NET_INTERNAL;\r\n```",
      "commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "created_at" : "2020-07-18T14:56:17Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456797618",
      "id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5NzYxOA==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451060570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-18T15:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456797618",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456812354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456812354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Suggested change:\r\n``` Code\r\n/// A set of special crafted FC00/7 IPv6 addresses we use to map a string or FQDN to an IPv6 address.\r\n/// We uses these important fake addresses also in CAddrMan to keep track of which DNS seeds were used \r\n/// and how we manage buckets and peers.\r\n```\r\n With that in mind when dev  we can take special care in transit to ADDRv2 to not mess with this address realm,\r\nbecause we need them later to get our new long addresses in and out from peers,dat ?\r\n\r\n",
      "commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "created_at" : "2020-07-18T17:49:58Z",
      "diff_hunk" : "@@ -16,21 +16,47 @@\n #include <string>\n #include <vector>\n \n+/**\n+ * A network type.\n+ * @note An address may belong to more than one network, for example `10.0.0.1`\n+ * belongs to both `NET_UNROUTABLE` and `NET_IPV4`.\n+ * Keep these sequential starting from 0 and `NET_MAX` as the last entry.\n+ * We have loops like `for (int i = 0; i < NET_MAX; i++)` that expect to iterate\n+ * over all enum values and also `GetExtNetwork()` \"extends\" this enum by\n+ * introducing standalone constants starting from `NET_MAX`.\n+ */\n enum Network\n {\n+    /// Addresses from these networks are not publicly routable on the global Internet.\n     NET_UNROUTABLE = 0,\n+\n+    /// IPv4\n     NET_IPV4,\n+\n+    /// IPv6\n     NET_IPV6,\n+\n+    /// TORv2\n     NET_ONION,\n+\n+    /// A set of dummy addresses that map a name to an IPv6 address.\n     NET_INTERNAL,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r456812354",
      "id" : 456812354,
      "line" : 43,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgxMjM1NA==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 43,
      "original_position" : 28,
      "original_start_line" : 41,
      "path" : "src/netaddress.h",
      "position" : 28,
      "pull_request_review_id" : 451072183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "RIGHT",
      "start_line" : 41,
      "start_side" : "RIGHT",
      "updated_at" : "2020-07-18T17:51:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/456812354",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457193721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457193721"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good question - no. But it was not necessary before this PR either. Some good simplification can be done here even on `master`. I will see whether it is better to add a new commit to this PR or file it as a separate PR.",
      "commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "created_at" : "2020-07-20T08:56:03Z",
      "diff_hunk" : "@@ -322,13 +330,7 @@ enum Network CNetAddr::GetNetwork() const\n     if (!IsRoutable())\n         return NET_UNROUTABLE;\n \n-    if (IsIPv4())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19534#discussion_r457193721",
      "id" : 457193721,
      "in_reply_to_id" : 456797618,
      "line" : 325,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE5MzcyMQ==",
      "original_commit_id" : "eb22eeda5b37afea0649688690e04c00d5a6dbfd",
      "original_line" : 325,
      "original_position" : 184,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 184,
      "pull_request_review_id" : 451418706,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19534",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T08:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457193721",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
