[
   {
      "body" : "This fails Travis because `checkdoc.py` doesn't recognize the way I'm adding the help messages now.  I used @jtimon's code that builds a vector of string pairs.  I'll wait for some direction on whether that is a refactor thats wanted and we need to change the check script or whether I should just hack in the help messages the old fashioned way.\r\n\r\nAs a side note, it wasn't clear to me how to easily find what had failed Travis.\r\n",
      "created_at" : "2016-02-18T19:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-185887938",
      "id" : 185887938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7557",
      "updated_at" : "2016-02-18T19:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/185887938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos I am sorry for the inconvenience and I am happy to fix the travis issue after you explain why the `AppendMessagesOpt()` wrapper is useful here.\r\n\r\n(It should be easier to identify the travis issue after #7455)",
      "created_at" : "2016-02-26T10:02:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-189201796",
      "id" : 189201796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7557",
      "updated_at" : "2016-02-26T10:02:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189201796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke I don't have a strong opinion on `AppendMessagesOpt`.  I do really like moving some of the policy configuration out of main and into policy code.  I think there could be a lot of other command line options moved afterwards if we like this idea.  I tried to follow the style @jtimon had used since he seems to be most involved in refactoring work.  I'm happy to rewrite that part of this pull to be whatever is most preferred.\r\n",
      "created_at" : "2016-02-26T16:29:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-189358338",
      "id" : 189358338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7557",
      "updated_at" : "2016-02-26T16:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189358338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Would you consider using https://github.com/jtimon/bitcoin/commit/6de4f556884a4e362b20baae165271ce8ce7893f ?\r\n\r\nAlthought this has many similarities with #6423 and some with https://github.com/jtimon/bitcoin/commits/policy-minrelayfee-0.12.99 , I'm having a hard time undesrtanding the differences.\r\n\r\nThe reason for InitFromArgs and AppendMessagesOpt (apart from code encapsulation) is a feature that @luke-jr requested in #6068, #5595 or some other of the multiple failed attempts at creating a policy class, and it is exlained on the widely-ignored #6423:\r\n\r\n\"Also (although I'm not going to continue that GUI part), making policy options GUI-configurable (and hopefully, in the future all new existing and new options \"for free\") would be very nice too.\r\nThe way I've understood this from @luke-jr, with Policy::AppendHelpMessages() and CPolicy::InitFromArgs() it is relatively easy to create a generic GUI that doesn't require any more work outside those methods to introduce new policy attributes.\"\r\n\r\nSince here the methods are modified to not allow such feature, it is indeed somewhat surprising that the methods have been maintained very similar nonetheless.\r\n\r\nOther things I don't understand are the elimination of the CPolicy abstract class from #6068 (I thought the whole point of encapsulating the policy code under an interface was to make it easier for people to maintain multiple implementations of that interface in parallel), and the rename to MempoolPolicy.\r\n\r\nYou say\r\n> It wasn't clear to me if those should all go together.\r\n\r\nWhat do you have in mind instead? Is there any longer branch using this that I can see so that I can see \"the big picture\" of how you intent to use this in the future?\r\nIf #6423 was rebased, reviewed and merged before this PR, what would be the relationship between MempoolPolicy and CPolicy? Is the goal to have 2 different interfaces for policy, or that MempoolPolicy simply extends the implementation CStandardPolicy (I meant to rename that to CDefaultPolicy)?\r\n\r\nWhat will be the relationship between MempoolPolicy, CBlockPolicyEstimator and CTxMemPool ?\r\n\r\n\r\n\r\n",
      "created_at" : "2016-02-26T17:49:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-189390444",
      "id" : 189390444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7557",
      "updated_at" : "2016-02-26T17:49:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189390444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon I need to do some work around minRelayTxFee because it is broken now in CTxMemPool (supposed to respect the command line option but is hard coded) and I was having same problem in the fee filter code.  So I'd like to get something merged to do this policy encapsulation so we can fix that properly and probably add a second variable for the incremental relay rate.\r\n\r\nI have no strong opinions about the way to do this encapsulation. I spent a little bit of time looking for updated versions of your encapsulation code and wasn't sure where your latest thinking was. The reason I broke off mempool policy separately is I thought it was smaller, touched less thnigs and might be easier to get merged.  I'm more than happy to follow your lead if you want to do this differently.\r\n\r\nEdit: To answer your last question I was assuming both CTxMemPool and CBlockPolicyEstimator would depend on MempoolPolicy which would not depend on either of them.\r\n\r\n",
      "created_at" : "2016-02-26T18:13:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7557#issuecomment-189404904",
      "id" : 189404904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7557",
      "updated_at" : "2016-02-26T18:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/189404904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
