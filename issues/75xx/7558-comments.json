[
   {
      "body" : "Concept ACK.\r\n\r\nWhat happens if I import a fully spent transaction but fail to import the transaction(s) spending it's outputs? \r\n\r\n",
      "created_at" : "2016-02-19T01:47:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186008038",
      "id" : 186008038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T01:47:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186008038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> What happens if I import a fully spent transaction but fail to import the transaction(s) spending it's outputs? \r\n\r\nYou are eaten by a grue.",
      "created_at" : "2016-02-19T01:48:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186008482",
      "id" : 186008482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T01:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186008482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "One could avoid the grue eating by using a lantern, I mean, checking if the output is still spendable and setting a flag... perhaps?",
      "created_at" : "2016-02-19T01:58:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186010528",
      "id" : 186010528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T01:58:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186010528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "The build fails with this on some systems:\r\n```\r\n/bin/sh: 1: /home/travis/build/bitcoin/bitcoin/bitcoin-i686-pc-linux-gnu/qa/rpc-tests/importprunedfunds.py: Permission denied\r\n```",
      "created_at" : "2016-02-19T07:21:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186101718",
      "id" : 186101718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T07:21:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186101718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Concept ACK, +1 for the grue",
      "created_at" : "2016-02-19T09:53:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186143729",
      "id" : 186143729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T09:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186143729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Nice and clean PR.\r\nConcept ACK.",
      "created_at" : "2016-02-19T12:50:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186202320",
      "id" : 186202320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T12:50:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186202320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "And @paveljanik is right: `importprunedfunds.py` needs a `-rwxr-xr-x` file permissions mode.",
      "created_at" : "2016-02-19T13:24:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186211797",
      "id" : 186211797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T13:24:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186211797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@sipa @gmaxwell \r\n\r\nSeems the easiest way to do this is mark outputs as spent or not, and modify all functions which tally funds to account for this. For now the wallet simply checks if things are spent by looking through its wallet and looking for spends.",
      "created_at" : "2016-02-19T20:06:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186382835",
      "id" : 186382835,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T20:06:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186382835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Alternatively, when computing available funds we can check if each output is available directly in the utxo set, rather than (just?) looking at wallet transactions. \r\n\r\nI don't know the internals well enough to know which is best, or if these are both terrible ideas. Especially in the presence of reorgs. ",
      "created_at" : "2016-02-19T20:16:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186386342",
      "id" : 186386342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T20:16:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186386342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "Marking outputs as spent is very complicated, as spendability depends on\nwhether other transactions exist that spend them, which themselves may be\nin conflict with the blockchain.\n\nWe can check the UTXO set for spendability in theory, but that introduces\nyet another dependency between the wallet and the node, and is something\nthat fundamentally requires a trusted full node.\n\nIMHO, if you're manually importing transactions, you're bypassing the\nentire sync mechanism, it's your responsibility to also import whatever\nother transactions that may be relevant.\n",
      "created_at" : "2016-02-19T20:32:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186394499",
      "id" : 186394499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T20:32:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186394499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "That was my feeling after digging around and thinking about it.\nOn Feb 19, 2016 12:33 PM, \"Pieter Wuille\" <notifications@github.com> wrote:\n\n> Marking outputs as spent is very complicated, as spendability depends on\n> whether other transactions exist that spend them, which themselves may be\n> in conflict with the blockchain.\n>\n> We can check the UTXO set for spendability in theory, but that introduces\n> yet another dependency between the wallet and the node, and is something\n> that fundamentally requires a trusted full node.\n>\n> IMHO, if you're manually importing transactions, you're bypassing the\n> entire sync mechanism, it's your responsibility to also import whatever\n> other transactions that may be relevant.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186394499>.\n>\n",
      "created_at" : "2016-02-19T20:38:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7558#issuecomment-186396112",
      "id" : 186396112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7558",
      "updated_at" : "2016-02-19T20:38:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186396112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
