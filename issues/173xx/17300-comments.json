[
   {
      "author_association" : "MEMBER",
      "body" : "In commit aa0e6d8ab1761d6bbc729614663da7ad7fb67dac:\r\n\r\nMy comment was just an example. It is generally not clear to me when this nullptr check should be done. Most of the other methods don't do it either. E.g. `CWallet::LoadWallet`, `CWallet::GetNewChangeDestination`, `CWallet::CreateWalletFromFile`, ...",
      "created_at" : "2019-10-29T16:48:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547520532",
      "id" : 547520532,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17300",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzUyMDUzMg==",
      "updated_at" : "2019-10-29T16:48:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547520532",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It is generally not clear to me when this nullptr check should be done.\r\n\r\nChecking for null key managers *should* always be done, and various commits in #17261 add more null checks. But I don't think it makes a big difference if we add null checks now (there should only be a small handful) or wait for changes from #17261. Just let me know what you prefer: dropping this commit, keeping it, or expanding it to cover `LoadWallet`, etc.\r\n\r\nNote `m_spk_man` will never actually _be_ null until commit \"Refactor: Allow LegacyScriptPubKeyMan to be null\" 66d2e2206267695f2fc722481252f63f7c74636a from #17261 \r\n\r\nLater after that, `m_spk_man` is replaced with lists of key managers in commit \"Box the wallet: Add multiple keyman maps and loops\" 00b7802570970d6328bc566b9978f93be0f18f66 from #17261 and all the `if (auto spk_man = m_spk_man.get())` blocks turn into `for` loops.",
      "created_at" : "2019-10-29T17:15:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547533466",
      "id" : 547533466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17300",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzUzMzQ2Ng==",
      "updated_at" : "2019-10-29T17:15:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547533466",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It is generally not clear to me when this nullptr check should be done.\r\n\r\nI like how `GetLegacyScriptPubKeyMan helper` returns a reference instead of a pointer.\r\n\r\n> Just let me know what you prefer: dropping this commit, keeping it, or expanding it to cover LoadWallet, etc.\r\n\r\nI prefer expanding it.",
      "created_at" : "2019-10-29T17:18:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547535074",
      "id" : 547535074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17300",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzUzNTA3NA==",
      "updated_at" : "2019-10-29T17:18:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547535074",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Either drop it or expand it. It shouldn't matter",
      "created_at" : "2019-10-29T17:32:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547541329",
      "id" : 547541329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17300",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzU0MTMyOQ==",
      "updated_at" : "2019-10-29T17:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547541329",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547535074 from Sjors\r\n\r\n> I prefer expanding it.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547541329 from MarcoFalke \r\n\r\n> Either drop it or expand it. It shouldn't matter\r\n\r\nI looked into expanding this but some of the changes in places like `CreateWallet` and `AddToWalletIfInvolvingMe` are awkward and less-obvious than I'd want to make in a bulk commit. I think the existing individual commits in #17261 which are broken down by functionality add the null checking in a more understandable way than could be done here. So I just dropped commit aa0e6d8ab1761d6bbc729614663da7ad7fb67dac. Another advantage of not expanding this is it will keep #17300 from conflicting with #17261 too much.",
      "created_at" : "2019-10-29T18:00:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17300#issuecomment-547554145",
      "id" : 547554145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17300",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzU1NDE0NQ==",
      "updated_at" : "2019-10-29T18:00:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547554145",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
