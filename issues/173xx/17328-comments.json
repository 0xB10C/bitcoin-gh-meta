[
   {
      "author_association" : "MEMBER",
      "body" : "Could add a unit test that fails without this patch? This should only happen in testnet when the block is mined 20 minutes in the future, right?",
      "created_at" : "2019-10-31T15:55:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#issuecomment-548443689",
      "id" : 548443689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODQ0MzY4OQ==",
      "updated_at" : "2019-10-31T15:55:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548443689",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341228540"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341228540"
         }
      },
      "author_association" : "MEMBER",
      "body" : "please return `1.0` instead of `1` (more clear that it's a double/fraction)\r\nor maybe collapse it into one statement\r\n```\r\nreturn std::min(pindex->nChainTx / fTxTotal, 1.0);\r\n```",
      "commit_id" : "2f5f7d6b135e4eab368bbafd9e6e979aa72398de",
      "created_at" : "2019-10-31T16:06:25Z",
      "diff_hunk" : "@@ -5066,6 +5066,8 @@ double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pin\n         fTxTotal = pindex->nChainTx + (nNow - pindex->GetBlockTime()) * data.dTxRate;\n     }\n \n+    if (pindex->nChainTx > fTxTotal) return 1;\n+\n     return pindex->nChainTx / fTxTotal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341228540",
      "id" : 341228540,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTIyODU0MA==",
      "original_commit_id" : "fb10c0c0079fb94083e51cb449e91d76b3e0d1d4",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 309999928,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328",
      "updated_at" : "2019-10-31T16:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341228540",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341230667"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341230667"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we use `std::min<double>(...)`, so that the type of the args doesn't matter.",
      "commit_id" : "2f5f7d6b135e4eab368bbafd9e6e979aa72398de",
      "created_at" : "2019-10-31T16:10:18Z",
      "diff_hunk" : "@@ -5066,6 +5066,8 @@ double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pin\n         fTxTotal = pindex->nChainTx + (nNow - pindex->GetBlockTime()) * data.dTxRate;\n     }\n \n+    if (pindex->nChainTx > fTxTotal) return 1;\n+\n     return pindex->nChainTx / fTxTotal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341230667",
      "id" : 341230667,
      "in_reply_to_id" : 341228540,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTIzMDY2Nw==",
      "original_commit_id" : "fb10c0c0079fb94083e51cb449e91d76b3e0d1d4",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 310002720,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328",
      "updated_at" : "2019-10-31T16:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341230667",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341241158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341241158"
         }
      },
      "author_association" : "MEMBER",
      "body" : "that's fine with me too; I just think the `return 1; ` looks strange in a function that returns double",
      "commit_id" : "2f5f7d6b135e4eab368bbafd9e6e979aa72398de",
      "created_at" : "2019-10-31T16:29:20Z",
      "diff_hunk" : "@@ -5066,6 +5066,8 @@ double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pin\n         fTxTotal = pindex->nChainTx + (nNow - pindex->GetBlockTime()) * data.dTxRate;\n     }\n \n+    if (pindex->nChainTx > fTxTotal) return 1;\n+\n     return pindex->nChainTx / fTxTotal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341241158",
      "id" : 341241158,
      "in_reply_to_id" : 341228540,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTI0MTE1OA==",
      "original_commit_id" : "fb10c0c0079fb94083e51cb449e91d76b3e0d1d4",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 310016521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328",
      "updated_at" : "2019-10-31T16:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341241158",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341243750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341243750"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Corrected, thanks!",
      "commit_id" : "2f5f7d6b135e4eab368bbafd9e6e979aa72398de",
      "created_at" : "2019-10-31T16:34:14Z",
      "diff_hunk" : "@@ -5066,6 +5066,8 @@ double GuessVerificationProgress(const ChainTxData& data, const CBlockIndex *pin\n         fTxTotal = pindex->nChainTx + (nNow - pindex->GetBlockTime()) * data.dTxRate;\n     }\n \n+    if (pindex->nChainTx > fTxTotal) return 1;\n+\n     return pindex->nChainTx / fTxTotal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#discussion_r341243750",
      "id" : 341243750,
      "in_reply_to_id" : 341228540,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTI0Mzc1MA==",
      "original_commit_id" : "fb10c0c0079fb94083e51cb449e91d76b3e0d1d4",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 310019916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17328",
      "updated_at" : "2019-10-31T16:34:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341243750",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Could add a unit test that fails without this patch?\r\n\r\nI could not manage to make it return `verificationprogress` > 1 in a clean way. I think launching a mining thread and polling `getblockchaininfo` would make it occur, but it seems way too overkill for a minor patch like this doesn't it ?\r\n\r\n> This should only happen in testnet when the block is mined 20 minutes in the future, right?\r\n\r\nHmmm it's true I noticed it on testnet (with the recent difficulty reset), I'll try on regtest.",
      "created_at" : "2019-10-31T16:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#issuecomment-548462985",
      "id" : 548462985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODQ2Mjk4NQ==",
      "updated_at" : "2019-10-31T16:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548462985",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "*(Unrelated Travis failure)*",
      "created_at" : "2019-10-31T17:47:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#issuecomment-548492360",
      "id" : 548492360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODQ5MjM2MA==",
      "updated_at" : "2019-10-31T17:47:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548492360",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "With regtest and mocked block times it ought to be possible.",
      "created_at" : "2019-11-01T09:22:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#issuecomment-548721149",
      "id" : 548721149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODcyMTE0OQ==",
      "updated_at" : "2019-11-01T09:22:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548721149",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Could not reproduce on regtest, the `verificationprogress` would always be `1` in all my tests case.",
      "created_at" : "2019-11-01T13:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17328#issuecomment-548792392",
      "id" : 548792392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODc5MjM5Mg==",
      "updated_at" : "2019-11-01T13:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548792392",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
