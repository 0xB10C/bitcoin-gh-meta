[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17396](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17396.html) (build: modest Android improvements by icota)\n* [#17376](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17376.html) (Add Parallel P2P Client in Rust by TheBlueMatt)\n* [#17227](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17227.html) (Qt: Add Android packaging support by icota)\n* [#16834](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16834.html) (Fetch Headers over DNS by TheBlueMatt)\n* [#16762](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16762.html) (Rust-based Backup over-REST block downloader by TheBlueMatt)\n* [#15704](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15704.html) (Move Win32 defines to configure.ac to ensure they are globally defined by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-06T23:51:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17398#issuecomment-550554380",
      "id" : 550554380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17398",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDU1NDM4MA==",
      "updated_at" : "2019-11-07T14:47:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550554380",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "OK, travis build should pass now\r\n\r\nTesting notes:\r\n\r\n- [x] check that `HAVE_FULLFSYNC=1` is passed on MacOS (done, `checking for F_FULLFSYNC... yes` appears in both MacOS builds)\r\n- [ ] test on BSD variants\r\n- [ ] test on Windows (full sync, as well as catching up an existing node)\r\n- [ ] [verify file descriptor use](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#upgrading-leveldb)\r\n- [ ] check sync performance before an after on different OS and hardware (maybe only after crc32c integrated?)\r\n- [ ] test forward and backward compatibility of UTXO and block database",
      "created_at" : "2019-11-07T11:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17398#issuecomment-551048478",
      "id" : 551048478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17398",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTA0ODQ3OA==",
      "updated_at" : "2019-11-07T15:17:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551048478",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK for the new branch. it's really nice that we can again easily see the diff from upstream.\r\nhttps://github.com/google/leveldb/compare/master...bitcoin-core:bitcoin-fork-new\r\n\r\nWill try to read later the (reported) changes upstream leveldb did in the past ~160 commits.",
      "created_at" : "2019-11-07T13:20:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17398#issuecomment-551075809",
      "id" : 551075809,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17398",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTA3NTgwOQ==",
      "updated_at" : "2019-11-07T13:20:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551075809",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
         "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
         "followers_url" : "https://api.github.com/users/elichai/followers",
         "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
         "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/elichai",
         "id" : 2167860,
         "login" : "elichai",
         "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
         "organizations_url" : "https://api.github.com/users/elichai/orgs",
         "received_events_url" : "https://api.github.com/users/elichai/received_events",
         "repos_url" : "https://api.github.com/users/elichai/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/elichai"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Regarding the msvc build I didn't have any problems getting it to build after applying what I think are the relevant changes to the `libleveldb` project.\r\n\r\nI do get two new warnings:\r\n\r\n````\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\tSuppression State\r\nWarning\tC26110\tCaller failing to hold lock 'this->mu_' before calling function 'std::_Mutex_base::unlock'.\tlibleveldb\tC:\\DEV\\GITHUB\\SIPSORCERY_BITCOIN\\SRC\\LEVELDB\\PORT\\PORT_STDCXX.H\t58\t\t\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\tSuppression State\r\nWarning\tC26110\tCaller failing to hold lock 'this->mu_->mu_' before calling function 'std::unique_lock<std::mutex>::unique_lock<std::mutex>'.\tlibleveldb\tC:\\DEV\\GITHUB\\SIPSORCERY_BITCOIN\\SRC\\LEVELDB\\PORT\\PORT_STDCXX.H\t76\t\t\r\n````\r\n\r\nAre any of the preprocessor defines below relevant for Windows?\r\n\r\n````\r\nLEVELDB_CPPFLAGS_INT += -DHAVE_FDATASYNC=@HAVE_FDATASYNC@\r\nLEVELDB_CPPFLAGS_INT += -DHAVE_FULLFSYNC=@HAVE_FULLFSYNC@\r\nLEVELDB_CPPFLAGS_INT += -DHAVE_O_CLOEXEC=@HAVE_O_CLOEXEC@\r\n````\r\n\r\nIn case it's of any use the diff for `libleveldb.vcxproj` is:\r\n\r\n````\r\ndiff --git a/build_msvc/libleveldb/libleveldb.vcxproj b/build_msvc/libleveldb/libleveldb.vcxproj\r\nindex f855923c6..ba6a86fdc 100644\r\n--- a/build_msvc/libleveldb/libleveldb.vcxproj\r\n+++ b/build_msvc/libleveldb/libleveldb.vcxproj\r\n@@ -24,8 +24,6 @@\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\db\\version_set.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\db\\write_batch.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\helpers\\memenv\\memenv.cc\" />\r\n-    <ClCompile Include=\"..\\..\\src\\leveldb\\port\\port_posix_sse.cc\" />\r\n-    <ClCompile Include=\"..\\..\\src\\leveldb\\port\\port_win.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\table\\block.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\table\\block_builder.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\table\\filter_block.cc\" />\r\n@@ -42,7 +40,7 @@\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\comparator.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\crc32c.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\env.cc\" />\r\n-    <ClCompile Include=\"..\\..\\src\\leveldb\\util\\env_win.cc\" />\r\n+    <ClCompile Include=\"..\\..\\src\\leveldb\\util\\env_windows.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\filter_policy.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\hash.cc\" />\r\n     <ClCompile Include=\"..\\..\\src\\leveldb\\util\\histogram.cc\" />\r\n@@ -52,7 +50,7 @@\r\n   </ItemGroup>\r\n   <ItemDefinitionGroup>\r\n     <ClCompile>\r\n-        <PreprocessorDefinitions>_CRT_NONSTDC_NO_DEPRECATE;LEVELDB_PLATFORM_WINDOWS;LEVELDB_ATOMIC_PRESENT;%(PreprocessorDefinitions)</PreprocessorDefinitions>\r\n+        <PreprocessorDefinitions>HAVE_CRC32C=0;HAVE_SNAPPY=0;__STDC_LIMIT_MACROS;LEVELDB_IS_BIG_ENDIAN=0;_UNICODE;UNICODE;_CRT_NONSTDC_NO_DEPRECATE;LEVELDB_PLATFORM_WINDOWS;LEVELDB_ATOMIC_PRESENT;%(PreprocessorDefinitions)</PreprocessorDefinitions>\r\n         <DisableSpecificWarnings>4244;4267;4312;</DisableSpecificWarnings>\r\n         <AdditionalIncludeDirectories>..\\..\\src\\leveldb;..\\..\\src\\leveldb\\include;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>\r\n        </ClCompile>\r\n````",
      "created_at" : "2019-11-07T17:59:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17398#issuecomment-551193954",
      "id" : 551193954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17398",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTE5Mzk1NA==",
      "updated_at" : "2019-11-07T17:59:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551193954",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   }
]
