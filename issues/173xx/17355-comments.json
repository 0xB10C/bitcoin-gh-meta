[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821415"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There was some discussion elsewhere which, IIRC, say you should use `isUsedDestination` instead.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T18:37:36Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821415",
      "id" : 341821415,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMTQxNQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 205,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310783206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821415",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The comment is not clear to me, what you mean by \"this\"?",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T18:39:29Z",
      "diff_hunk" : "@@ -132,6 +132,9 @@ class Wallet\n     //! List locked coins.\n     virtual void listLockedCoins(std::vector<COutPoint>& outputs) = 0;\n \n+    // Whether this or any UTXO with the same CTxDestination has been spent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821471",
      "id" : 341821471,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMTQ3MQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 135,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.h",
      "position" : null,
      "pull_request_review_id" : 310783206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821471",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821483"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821483"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why are you locking this?",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T18:39:48Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override\n+    {   \n+        auto locked_chain = m_wallet->chain().lock();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821483",
      "id" : 341821483,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMTQ4Mw==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 207,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310783206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821483",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, here and below `if (...) {`.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T18:41:03Z",
      "diff_hunk" : "@@ -228,6 +228,13 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821521",
      "id" : 341821521,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMTUyMQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 231,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 310783206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821521",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821537"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821537"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, space after `if`.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T18:41:23Z",
      "diff_hunk" : "@@ -228,6 +228,13 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) \n+    {\n+        if(walletModel->wallet().IsUsedDestination(DecodeDestination(rec->address.toStdString()))) ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341821537",
      "id" : 341821537,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMTUzNw==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 233,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 310783206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341821537",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addresses are used when they receive. Not when the UTXO created is later spent.",
      "created_at" : "2019-11-02T18:41:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549070150",
      "id" : 549070150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTA3MDE1MA==",
      "updated_at" : "2019-11-02T18:41:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549070150",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341822383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341822383"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this comment was carried over from the original `IsUsedDestination` method in the `wallet/wallet.h` file",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T19:07:12Z",
      "diff_hunk" : "@@ -132,6 +132,9 @@ class Wallet\n     //! List locked coins.\n     virtual void listLockedCoins(std::vector<COutPoint>& outputs) = 0;\n \n+    // Whether this or any UTXO with the same CTxDestination has been spent.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341822383",
      "id" : 341822383,
      "in_reply_to_id" : 341821471,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMjM4Mw==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 135,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.h",
      "position" : null,
      "pull_request_review_id" : 310784271,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341822383",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341822995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341822995"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes, makes sense as it follows the same convention as the rest of the file. will update along with other nits",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T19:25:43Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341822995",
      "id" : 341822995,
      "in_reply_to_id" : 341821415,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMjk5NQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 205,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310784976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341822995",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341823076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341823076"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "sorry, think i misunderstood what this line did, will remove ",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T19:28:15Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override\n+    {   \n+        auto locked_chain = m_wallet->chain().lock();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341823076",
      "id" : 341823076,
      "in_reply_to_id" : 341821483,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyMzA3Ng==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 207,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310785077,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341823076",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824473"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T20:11:01Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824473",
      "id" : 341824473,
      "in_reply_to_id" : 341821415,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyNDQ3Mw==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 205,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310786808,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824473",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824485"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T20:11:36Z",
      "diff_hunk" : "@@ -228,6 +228,13 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824485",
      "id" : 341824485,
      "in_reply_to_id" : 341821521,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyNDQ4NQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 231,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 310786825,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824485",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824488"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824488"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T20:11:44Z",
      "diff_hunk" : "@@ -228,6 +228,13 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) \n+    {\n+        if(walletModel->wallet().IsUsedDestination(DecodeDestination(rec->address.toStdString()))) ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824488",
      "id" : 341824488,
      "in_reply_to_id" : 341821537,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyNDQ4OA==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 233,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 310786828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824488",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824495"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this has now been removed",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2019-11-02T20:11:58Z",
      "diff_hunk" : "@@ -202,6 +202,12 @@ class WalletImpl : public Wallet\n         LOCK(m_wallet->cs_wallet);\n         return m_wallet->ListLockedCoins(outputs);\n     }\n+    bool IsUsedDestination(const CTxDestination& dst) override\n+    {   \n+        auto locked_chain = m_wallet->chain().lock();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r341824495",
      "id" : 341824495,
      "in_reply_to_id" : 341821483,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTgyNDQ5NQ==",
      "original_commit_id" : "7d1d94d1fe787ffa3265ea5f066621f9f4230e6d",
      "original_line" : 207,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 310786834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341824495",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Addresses are used when they receive. Not when the UTXO created is later spent.\r\n\r\nUnderstood, I can update it to grey out just addresses that have received (Used) and not ones that have received and been spent if desired?\r\n",
      "created_at" : "2019-11-04T10:50:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549301599",
      "id" : 549301599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTMwMTU5OQ==",
      "updated_at" : "2019-11-04T10:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549301599",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Understood, I can update it to grey out just addresses that have received (Used) and not ones that have received and been spent if desired?\r\n\r\nYes (it would be meaningless/erroneous to grey out addresses based on actions of the UTXOs created when they receive).",
      "created_at" : "2019-11-04T12:30:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549332456",
      "id" : 549332456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTMzMjQ1Ng==",
      "updated_at" : "2019-11-04T12:30:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549332456",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Agree with @luke-jr. This is currently conceptual wrong.",
      "created_at" : "2019-11-04T19:30:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549510432",
      "id" : 549510432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTUxMDQzMg==",
      "updated_at" : "2019-11-04T19:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549510432",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So if the existing used-flag is supposed to do what it does (indicate true when the coin sent to that destination has been spent), it could make sense to add a new flag (indicate true when a tx has been received that has the destination in one of its outputs).",
      "created_at" : "2019-11-04T19:51:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549518925",
      "id" : 549518925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTUxODkyNQ==",
      "updated_at" : "2019-11-04T19:51:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549518925",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See also #15987, but I'm not sure it's the best approach to use here. If we're going to check *every address* (as this does), we should probably save a flag in the wallet/address book when we see an address used...",
      "created_at" : "2019-11-04T21:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-549558387",
      "id" : 549558387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTU1ODM4Nw==",
      "updated_at" : "2019-11-04T21:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549558387",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Revisiting this pr...\r\n\r\nI have now re-implemented by saving a flag in the address book (`address_used`) when we see an address used. I took the same approach as the `IsUsedDestination` methods and therefor this will only work when the `avoid_reuse` flag is set on the wallet.\r\n\r\nThis essentially checks the outputs when a transaction is added to the wallet (`AddToWallet`) and if it belongs to us, sets a flag in the address book (`SetUsedAddressState`). It will then grey out any addresses with this flag set when viewing them in the 'Receiving Addresses' dialog box.\r\n\r\n",
      "created_at" : "2020-02-11T00:08:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-584420413",
      "id" : 584420413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NDQyMDQxMw==",
      "updated_at" : "2020-02-11T00:08:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584420413",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "ack",
      "created_at" : "2020-02-11T08:08:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-584517915",
      "id" : 584517915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NDUxNzkxNQ==",
      "updated_at" : "2020-02-11T08:08:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584517915",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/9567098?v=4",
         "events_url" : "https://api.github.com/users/dannmat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dannmat/followers",
         "following_url" : "https://api.github.com/users/dannmat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dannmat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dannmat",
         "id" : 9567098,
         "login" : "dannmat",
         "node_id" : "MDQ6VXNlcjk1NjcwOTg=",
         "organizations_url" : "https://api.github.com/users/dannmat/orgs",
         "received_events_url" : "https://api.github.com/users/dannmat/received_events",
         "repos_url" : "https://api.github.com/users/dannmat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dannmat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dannmat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dannmat"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-02-11T08:35:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-584525803",
      "id" : 584525803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NDUyNTgwMw==",
      "updated_at" : "2020-05-28T00:36:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584525803",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO this should work for all wallets, and when loading an old wallet (or one that has been loaded by an older version since the last use of a supporting version), should populate the flag as necessary.",
      "created_at" : "2020-02-23T01:55:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-590017742",
      "id" : 590017742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDAxNzc0Mg==",
      "updated_at" : "2020-02-23T01:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590017742",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> IMO this should work for all wallets, and when loading an old wallet (or one that has been loaded by an older version since the last use of a supporting version), should populate the flag as necessary.\r\n\r\n@luke-jr I would be inclined to agree with you on this, it was only initially constrained to `avoid_reuse` wallets as `IsUsedDestination` was used in the first integration (although wrongly used due to confusion). So pivoting back to working for all wallets would make sense.\r\n\r\nWould like to get others opinions on this before progressing with making the changes, thoughts @MarcoFalke @jonasschnelli @promag?",
      "created_at" : "2020-02-24T20:41:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-590538175",
      "id" : 590538175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MDUzODE3NQ==",
      "updated_at" : "2020-02-24T20:41:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/590538175",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-17T13:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-615236689",
      "id" : 615236689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTIzNjY4OQ==",
      "updated_at" : "2020-04-17T13:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615236689",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased with master and squashed commits.\r\n\r\nThinking of picking this back up if it is still a desirable change/feature? Currently it's limited to watch only wallets but as @luke-jr mentioned, this may be desirable to all wallet types",
      "created_at" : "2020-05-26T23:05:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-634326248",
      "id" : 634326248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDMyNjI0OA==",
      "updated_at" : "2020-05-26T23:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634326248",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on how this works today. Slightly reviewed the code and it looks good.\r\n\r\nCan you please review @luke-jr, @promag?",
      "created_at" : "2020-05-29T07:48:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-635819180",
      "id" : 635819180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTgxOTE4MA==",
      "updated_at" : "2020-05-29T07:48:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635819180",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Open-Close to re-run ci. See https://github.com/bitcoin/bitcoin/issues/15847#issuecomment-487591130",
      "created_at" : "2020-05-29T11:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-635932973",
      "id" : 635932973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTkzMjk3Mw==",
      "updated_at" : "2020-05-29T11:57:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635932973",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r433000850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433000850"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please update code format accordingly to developer notes.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-01T00:29:48Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r433000850",
      "id" : 433000850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMDg1MA==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 791,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 421543617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433000850",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r433001075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433001075"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is it me or `IsMine` is irrelevant?\r\n\r\nEither way call `GetDestData` since it's faster and most likely to fail.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-01T00:31:28Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {\n+        if(IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}\n+\n+bool CWallet::IsUsedAddress(const CTxDestination& dst) const\n+{\n+    LOCK(cs_wallet);\n+    return IsMine(dst) && GetDestData(dst, \"address_used\", nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r433001075",
      "id" : 433001075,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAwMTA3NQ==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 805,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 421543617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433001075",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436300938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436300938"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes `IsMine` would be irrelevant in this case, have now removed to just return the output of `GetDestData` as suggested, Thanks!",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-06T21:11:04Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {\n+        if(IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}\n+\n+bool CWallet::IsUsedAddress(const CTxDestination& dst) const\n+{\n+    LOCK(cs_wallet);\n+    return IsMine(dst) && GetDestData(dst, \"address_used\", nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436300938",
      "id" : 436300938,
      "in_reply_to_id" : 433001075,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMDkzOA==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 805,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425769312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436300938",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436301029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436301029"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated according to developer notes (added space after `if`), hopefully I haven't missed anything, Thanks!",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-06T21:12:29Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436301029",
      "id" : 436301029,
      "in_reply_to_id" : 433000850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMTAyOQ==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 791,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425769394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436301029",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Maybe add a tooltip on the greyed rows?\r\n\r\nAdded tooltip as suggested, not sure on suitable wording so suggestions welcome (I went with \"This address has been used\" followed by the original tooltip in brackets (screenshot below).\r\n\r\n![address-tooltip](https://user-images.githubusercontent.com/31032215/83955638-d69fd000-a84c-11ea-95bf-4d1d365b51e8.png)\r\n",
      "created_at" : "2020-06-06T22:24:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-640125886",
      "id" : 640125886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDEyNTg4Ng==",
      "updated_at" : "2020-06-06T22:24:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640125886",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review.",
      "created_at" : "2020-06-07T06:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-640163137",
      "id" : 640163137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDE2MzEzNw==",
      "updated_at" : "2020-06-07T06:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640163137",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436333413"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436333413"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If helpful, you can use Clang in the future to check for some things:\r\n\r\n    Use Clang formatting to clean up a file:\r\n    clang-format -i <file>\r\n\r\n    To format the last commit with 0 lines of context, call the\r\n    clang-format-diff.py script from root as follows:\r\n    git diff -U0 HEAD~1.. | ./contrib/devtools/clang-format-diff.py -p1 -i -v\r\n",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T07:13:19Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436333413",
      "id" : 436333413,
      "in_reply_to_id" : 433000850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMzMzQxMw==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 791,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425793645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436333413",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436338427"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436338427"
         }
      },
      "author_association" : "MEMBER",
      "body" : "perhaps simplify\r\n```diff\r\n {\r\n     AssertLockHeld(cs_wallet);\r\n     CTxDestination dst;\r\n-    if (ExtractDestination(cout.scriptPubKey, dst)) {\r\n-        if (IsMine(dst)) {\r\n-            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\r\n-                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\r\n-            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\r\n-                EraseDestData(batch, dst, \"address_used\");\r\n-            }\r\n+    if (ExtractDestination(cout.scriptPubKey, dst) && IsMine(dst)) {\r\n+        if (used && !GetDestData(dst, \"address_used\", nullptr)) {\r\n+            AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\r\n+        } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\r\n+            EraseDestData(batch, dst, \"address_used\");\r\n         }\r\n     }\r\n }\r\n```",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T08:23:20Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if (ExtractDestination(cout.scriptPubKey, dst)) {\n+        if (IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436338427",
      "id" : 436338427,
      "line" : 798,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMzODQyNw==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 798,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 15,
      "pull_request_review_id" : 425798174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436338427",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436339496"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436339496"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggestion: perhaps `gray` to be more compatible with dark mode.\r\n\r\ngray:\r\n![Screenshot from 2020-06-07 10-47-18](https://user-images.githubusercontent.com/2415484/83964322-d1b63d00-a89b-11ea-8294-f365f60395ae.jpg)\r\n\r\nlight gray:\r\n![Screenshot from 2020-06-07 10-41-39](https://user-images.githubusercontent.com/2415484/83964324-d4b12d80-a89b-11ea-86a7-39b2845ac950.jpg)\r\n\r\n",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T08:37:05Z",
      "diff_hunk" : "@@ -228,6 +228,16 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) {\n+        if (rec->type == AddressTableEntry::Receiving && walletModel->wallet().isUsedAddress(DecodeDestination(rec->address.toStdString()))) {\n+            return QColor(Qt::lightGray);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436339496",
      "id" : 436339496,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMzOTQ5Ng==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 233,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 425798174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436339496",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436340632"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436340632"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this lock needed?",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T08:51:58Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if (ExtractDestination(cout.scriptPubKey, dst)) {\n+        if (IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}\n+\n+bool CWallet::IsUsedAddress(const CTxDestination& dst) const\n+{\n+    LOCK(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436340632",
      "id" : 436340632,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM0MDYzMg==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 804,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425798174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436340632",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436362856"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436362856"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @jonatack, that will definitely be useful for me to use in the future!",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T13:22:39Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if(ExtractDestination(cout.scriptPubKey, dst)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436362856",
      "id" : 436362856,
      "in_reply_to_id" : 433000850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM2Mjg1Ng==",
      "original_commit_id" : "3893e266c5979e27498d105ac3d8d35957c07789",
      "original_line" : 791,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425819738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436362856",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363365"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes makes sense, this has now been simplified as suggested",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T13:28:09Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if (ExtractDestination(cout.scriptPubKey, dst)) {\n+        if (IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363365",
      "id" : 436363365,
      "in_reply_to_id" : 436338427,
      "line" : 798,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM2MzM2NQ==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 798,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 15,
      "pull_request_review_id" : 425820161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:28:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363365",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for testing with dark mode! have now updated the code to use `gray` instead of `lightGray` to accommodate both light and dark modes",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T13:29:56Z",
      "diff_hunk" : "@@ -228,6 +228,16 @@ QVariant AddressTableModel::data(const QModelIndex &index, int role) const\n         default: break;\n         }\n     }\n+    else if (role == Qt::ForegroundRole) {\n+        if (rec->type == AddressTableEntry::Receiving && walletModel->wallet().isUsedAddress(DecodeDestination(rec->address.toStdString()))) {\n+            return QColor(Qt::lightGray);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363517",
      "id" : 436363517,
      "in_reply_to_id" : 436339496,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM2MzUxNw==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 233,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/qt/addresstablemodel.cpp",
      "position" : null,
      "pull_request_review_id" : 425820307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363517",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363760"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Probably not needed as `GetDestData` is just accessing the address book data. I have now removed the lock.",
      "commit_id" : "481d3dfe59f64ffbbcc1d2ec310a992f8885d778",
      "created_at" : "2020-06-07T13:32:14Z",
      "diff_hunk" : "@@ -784,6 +784,27 @@ bool CWallet::IsSpentKey(const uint256& hash, unsigned int n) const\n     return false;\n }\n \n+void CWallet::SetUsedAddressState(WalletBatch& batch, const CTxOut& cout, bool used)\n+{\n+    AssertLockHeld(cs_wallet);\n+    CTxDestination dst;\n+    if (ExtractDestination(cout.scriptPubKey, dst)) {\n+        if (IsMine(dst)) {\n+            if (used && !GetDestData(dst, \"address_used\", nullptr)) {\n+                AddDestData(batch, dst, \"address_used\", \"p\"); // p for \"present\", opposite of absent (null)\n+            } else if (!used && GetDestData(dst, \"address_used\", nullptr)) {\n+                EraseDestData(batch, dst, \"address_used\");\n+            }\n+        }\n+    }\n+}\n+\n+bool CWallet::IsUsedAddress(const CTxDestination& dst) const\n+{\n+    LOCK(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#discussion_r436363760",
      "id" : 436363760,
      "in_reply_to_id" : 436340632,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM2Mzc2MA==",
      "original_commit_id" : "53f0d0b42845fdf24ddd05dcbf7b5bc711c9244c",
      "original_line" : 804,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 425820513,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17355",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-07T13:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436363760",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for reviewing the code @jonatack! I have now made the changes suggested and squashed my commits.",
      "created_at" : "2020-06-07T13:34:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-640220095",
      "id" : 640220095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDIyMDA5NQ==",
      "updated_at" : "2020-06-07T13:34:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640220095",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/31032215?v=4",
         "events_url" : "https://api.github.com/users/za-kk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/za-kk/followers",
         "following_url" : "https://api.github.com/users/za-kk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/za-kk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/za-kk",
         "id" : 31032215,
         "login" : "za-kk",
         "node_id" : "MDQ6VXNlcjMxMDMyMjE1",
         "organizations_url" : "https://api.github.com/users/za-kk/orgs",
         "received_events_url" : "https://api.github.com/users/za-kk/received_events",
         "repos_url" : "https://api.github.com/users/za-kk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/za-kk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/za-kk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/za-kk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the color change. I only use the GUI in dark mode :). I don't think you needed to squash the two commits and `git diff 94cbeaa 481d3df` would have been cleaner and easier to re-review by not squashing. But wait until someone else reviews before re-touching.",
      "created_at" : "2020-06-07T13:53:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17355#issuecomment-640222516",
      "id" : 640222516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17355",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDIyMjUxNg==",
      "updated_at" : "2020-06-07T13:53:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640222516",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
