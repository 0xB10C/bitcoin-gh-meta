[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The first commit introduces a NODE_REPLACE_BY_FEE service flag to advertise support of full-rbf to our peers if https://github.com/bitcoin/bitcoin/pull/25353 is set to true. From the results of getpeerinfo or getnetworkinfo, a node operator can find full-rbf peers on the p2p network to which to manually connect to. The service flag bit select is the 26th one to be compatible with previous full-rbf [experiences](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-June/020570.html).\r\n\r\nIsn't this bad for privacy?",
      "created_at" : "2022-07-13T02:18:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1182690419",
      "id" : 1182690419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585Gfmxz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1182690419/reactions"
      },
      "updated_at" : "2022-07-13T02:18:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1182690419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25355](https://github.com/bitcoin/bitcoin/pull/25355) (I2P: add support for transient addresses for outbound connections by vasild)\n* [#24170](https://github.com/bitcoin/bitcoin/pull/24170) (p2p, rpc: Manual block-relay-only connections with addnode by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-07-13T06:03:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1182801396",
      "id" : 1182801396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585GgB30",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1182801396/reactions"
      },
      "updated_at" : "2022-07-19T22:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1182801396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Isn't this bad for privacy?\r\n\r\nI think a mass-spying node could automatically connect to a node and broadcast an opt-out transaction then a higher-fee replacement one to detect if `mempoolfullrbf=1` and wait if a inv(replacement_txid) is announced to a monitoring peer. So turning on bit 26 to signal `NODE_REPLACE_BY_FEE`  sounds to me at worst makes such \"fingerprint\" cheaper. Though by definition policy is a source of transaction processing discrepancy between nodes, so I'm not sure we can even qualify that as a fingerprint.\r\n\r\nThe other concern could be a few spying `NODE_REPLACE_BY_FEE` public peers attracting inbound connection from honest peers, getting a better leverage of initial-broadcast. If it's a qualified concern, we could announce replacement transactions only to those peers thus avoiding any privacy interferences with the node usual transaction traffic.\r\n\r\nThough if you have more transaction-relay deanonymization attacks in mind, I'm listening.",
      "created_at" : "2022-07-14T00:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1183805137",
      "id" : 1183805137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585Gj27R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1183805137/reactions"
      },
      "updated_at" : "2022-07-14T00:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1183805137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think a mass-spying node could automatically connect to a node and broadcast an opt-out transaction then a higher-fee replacement one to detect if mempoolfullrbf=1 and wait if a inv(replacement_txid) is announced to a monitoring peer. So turning on bit 26 to signal NODE_REPLACE_BY_FEE sounds to me at worst makes such \"fingerprint\" cheaper. \r\n\r\nService flag makes it easier to make a list of nodes with full RBF policy. These nodes could be banned or this information can be used in different attacks. I don't think it is required, requesting LN users and some miners to use full RBF would be enough.\r\n\r\n![image](https://user-images.githubusercontent.com/94559964/178968830-afe4e395-6981-42ea-94bb-64a306299eae.png)\r\n\r\nWriting 'help' if lost on an island could result in 2 things:\r\n\r\n1. An aircraft or chopper notices and helps you\r\n2. Someone else finds you alone, looking for help, tries to exploit and kill you\r\n\r\n> The other concern could be a few spying NODE_REPLACE_BY_FEE public peers attracting inbound connection from honest peers, getting a better leverage of initial-broadcast. If it's a qualified concern, we could announce replacement transactions only to those peers thus avoiding any privacy interferences with the node usual transaction traffic.\r\n\r\nThis is a good point which I did not consider earlier though I am not sure about announcing replacement transactions only to those peers.\r\n",
      "created_at" : "2022-07-14T11:12:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1184317227",
      "id" : 1184317227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585Glz8r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184317227/reactions"
      },
      "updated_at" : "2022-07-14T11:12:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184317227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~~At the very least, this needs a BIP. Unsure about using the temporary bit for it, and also not sure if it makes sense conceptually; it's just a minor policy change, after all.~~\r\n\r\nEdit: Or just mark it as a temporary service bit like existing usage does",
      "created_at" : "2022-07-14T19:13:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1184804560",
      "id" : 1184804560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585Gnq7Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184804560/reactions"
      },
      "updated_at" : "2022-07-15T01:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1184804560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@1440000bytes \r\n\r\n> Service flag makes it easier to make a list of nodes with full RBF policy. These nodes could be banned or this information can be used in different attacks. I don't think it is required, requesting LN users and some miners to use full RBF would be enough.\r\n\r\nWell that's a fundamental trade-off between signaling policy to ease peering and retaining information. I think the relevant question is this _additional_ information allow or significantly ease a concrete attack against node operator or funds safety. That said, even if the attack is qualified, the risk could be bearable by the operator, if the documentation is clear in that sense. E.g, in LN we recently specified out [zero-conf channels](https://github.com/lightning/bolts/pull/910), they're coming with a lot of safety tradeoffs, though they're a UX improvement for sure.\r\n\r\n> Writing 'help' if lost on an island could result in 2 things:\r\n>    An aircraft or chopper notices and helps you\r\n>    Someone else finds you alone, looking for help, tries to exploit and kill you\r\n\r\nBeware life is risky :)\r\n\r\n> This is a good point which I did not consider earlier though I am not sure about announcing replacement transactions only to those peers.\r\n\r\nIn case of uncertain privacy/security risks, security-by-compartmentalization.\r\n\r\n@luke-jr \r\n\r\n> Edit: Or just mark it as a temporary service bit like existing usage does\r\n\r\nWell, I used the same experimental bit 26 than the patchset from @petertodd. Let me know if you think I should use another one in the range bits 24-31 because of conflicts with existent bitcoin softwares.",
      "created_at" : "2022-07-25T23:19:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#issuecomment-1194758364",
      "id" : 1194758364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25600",
      "node_id" : "IC_kwDOABII585HNpDc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1194758364/reactions"
      },
      "updated_at" : "2022-07-25T23:19:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1194758364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25600#discussion_r929394210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25600"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929394210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    case NODE_REPLACE_BY_FEE:  return \"REPLACE_BY_FEE?\";\r\n```",
      "commit_id" : "bbc5d58e41a922db975821b2712b5a00ab228d06",
      "created_at" : "2022-07-25T23:40:22Z",
      "diff_hunk" : "@@ -196,6 +196,7 @@ static std::string serviceFlagToStr(size_t bit)\n     case NODE_WITNESS:         return \"WITNESS\";\n     case NODE_COMPACT_FILTERS: return \"COMPACT_FILTERS\";\n     case NODE_NETWORK_LIMITED: return \"NETWORK_LIMITED\";\n+    case NODE_REPLACE_BY_FEE:  return \"FULL_RBF\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25600#discussion_r929394210",
      "id" : 929394210,
      "line" : 199,
      "node_id" : "PRRC_kwDOABII5843ZW4i",
      "original_commit_id" : "bbc5d58e41a922db975821b2712b5a00ab228d06",
      "original_line" : 199,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/protocol.cpp",
      "position" : 4,
      "pull_request_review_id" : 1050196502,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25600",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929394210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-25T23:40:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929394210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
