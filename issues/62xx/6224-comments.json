[
   {
      "body" : "Rebased on top of master now that #5875 has been merged.",
      "created_at" : "2015-06-03T20:57:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-108614524",
      "id" : 108614524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-03T20:57:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/108614524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-06-14T14:00:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-111828680",
      "id" : 111828680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-14T14:00:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111828680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Been running on bitcoin.sipa.be for a week, no problems.",
      "created_at" : "2015-06-21T13:22:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-113901156",
      "id" : 113901156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-21T13:22:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113901156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-06-25T20:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-115378811",
      "id" : 115378811,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-25T20:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/115378811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6224#discussion_r33535176"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6224"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33535176"
         }
      },
      "body" : "s/far//",
      "commit_id" : "543f69dc348ac9be45f1cb8c4773ab8d23f99bf4",
      "created_at" : "2015-06-30T02:18:14Z",
      "diff_hunk" : "@@ -4471,8 +4478,12 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         pfrom->AddInventoryKnown(inv);\n \n         CValidationState state;\n-        // Process all blocks from whitelisted peers, even if not requested.\n-        ProcessNewBlock(state, pfrom, &block, pfrom->fWhitelisted, NULL);\n+        // Process all blocks from whitelisted peers, even if not requested,\n+        // unless we're far still syncing with the network.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#discussion_r33535176",
      "id" : 33535176,
      "original_commit_id" : "543f69dc348ac9be45f1cb8c4773ab8d23f99bf4",
      "original_position" : 32,
      "path" : "src/main.cpp",
      "position" : 32,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6224",
      "updated_at" : "2015-06-30T02:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33535176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6224#discussion_r33535296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6224"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33535296"
         }
      },
      "body" : "Really odd how we have this flag-based coding style here; I don't see why we can't just put the various tests in this if block.\r\n\r\nThat said, you might as well follow the style right now and fix it up later in another cleanup pull-req.",
      "commit_id" : "543f69dc348ac9be45f1cb8c4773ab8d23f99bf4",
      "created_at" : "2015-06-30T02:21:37Z",
      "diff_hunk" : "@@ -2851,6 +2857,7 @@ bool AcceptBlock(CBlock& block, CValidationState& state, CBlockIndex** ppindex,\n     if (!fRequested) {  // If we didn't ask for it:\n         if (pindex->nTx != 0) return true;  // This is a previously-processed block that was pruned\n         if (!fHasMoreWork) return true;     // Don't process less-work chains\n+        if (fTooFarAhead) return true;      // Block height is too high",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#discussion_r33535296",
      "id" : 33535296,
      "original_commit_id" : "543f69dc348ac9be45f1cb8c4773ab8d23f99bf4",
      "original_position" : 21,
      "path" : "src/main.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6224",
      "updated_at" : "2015-06-30T02:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33535296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Aside from the extra word nit, mildly-tested ACK.",
      "created_at" : "2015-06-30T02:22:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-116914520",
      "id" : 116914520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-30T02:22:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116914520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd Thanks for reviewing; I've fixed the comment and updated this PR.",
      "created_at" : "2015-06-30T13:44:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-117188771",
      "id" : 117188771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-30T13:44:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/117188771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Looks good now, ACK.",
      "created_at" : "2015-06-30T14:13:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-117201862",
      "id" : 117201862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-06-30T14:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/117201862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@laanwj Any chance for getting this in 0.11? It should only have an effect when using both pruning and having a peer that sends unrequested blocks (such as @TheBlueMatt's relay client) - a use case that is currently broken in 0.11.",
      "created_at" : "2015-07-09T13:44:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6224#issuecomment-119973348",
      "id" : 119973348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6224",
      "updated_at" : "2015-07-09T13:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119973348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
