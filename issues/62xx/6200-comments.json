[
   {
      "body" : "This might be related: https://github.com/etotheipi/BitcoinArmory/issues/298",
      "created_at" : "2015-05-28T21:40:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-106607856",
      "id" : 106607856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-28T21:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106607856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "What file systems are involved?",
      "created_at" : "2015-05-29T10:23:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-106766800",
      "id" : 106766800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-29T10:23:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106766800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Oh huh. The ones that work are NTFS, the one that doesn't work is exFAT - I guess that's too much of a coincidence to discount. I would expect, tho, that filesystems are abstracted by the OS so the program doesn't have to care about it, no? ",
      "created_at" : "2015-05-29T18:14:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-106894035",
      "id" : 106894035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-29T18:14:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/106894035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "Is there any more info in the debug.log? Maybe you can paste that, so we can take a look? Any special things in bitcoin.conf or passed to the executable via parameters?\r\n\r\nEdit: And perhaps most important, which version it it ;)?",
      "created_at" : "2015-05-30T12:41:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107036415",
      "id" : 107036415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-30T12:41:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107036415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "I was trying Bitcoin Core version v0.9.3.0-g40d2041-beta, now I'm trying v0.10.2, same issue. My debug.log contains: \r\n\r\n```\r\n2015-05-30 22:05:25 GUI: \"registerShutdownBlockReason: Successfully registered: Bitcoin Core didn't yet exit safely...\" \r\n2015-05-30 22:05:25 \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n2015-05-30 22:05:25 Bitcoin version v0.10.2 (2015-05-16 10:37:27 +0200)\r\n2015-05-30 22:05:25 Using OpenSSL version OpenSSL 1.0.1k 8 Jan 2015\r\n2015-05-30 22:05:25 Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2015-05-30 22:05:25 Default data directory C:\\Users\\fresheneesz\\AppData\\Roaming\\Bitcoin\r\n2015-05-30 22:05:25 Using data directory E:\\bitcoinData\\Bitcoin\r\n2015-05-30 22:05:25 Using config file E:\\bitcoinData\\Bitcoin\\bitcoin.conf\r\n2015-05-30 22:05:25 Using at most 125 connections (2048 file descriptors available)\r\n2015-05-30 22:05:25 Using 8 threads for script verification\r\n2015-05-30 22:05:25 Using wallet wallet.dat\r\n2015-05-30 22:05:25 init message: Verifying wallet...\r\n2015-05-30 22:05:25 CDBEnv::Open : LogDir=E:\\bitcoinData\\Bitcoin\\database ErrorFile=E:\\bitcoinData\\Bitcoin\\db.log\r\n2015-05-30 22:05:25 Bound to [::]:8333\r\n2015-05-30 22:05:25 Bound to 0.0.0.0:8333\r\n2015-05-30 22:05:25 init message: Loading block index...\r\n2015-05-30 22:05:25 Opening LevelDB in E:\\bitcoinData\\Bitcoin\\blocks\\index\r\n2015-05-30 22:05:25 IO error: WinMmapFile.Append::UnmapCurrentRegion or MapNewRegion: : The operation could not be completed because the volume is dirty. Please run chkdsk and try again.\r\n\r\n\r\n2015-05-30 22:06:04 init message: Loading block index...\r\n2015-05-30 22:06:04 Wiping LevelDB in E:\\bitcoinData\\Bitcoin\\blocks\\index\r\n2015-05-30 22:06:04 Opening LevelDB in E:\\bitcoinData\\Bitcoin\\blocks\\index\r\n2015-05-30 22:06:04 IO error: WinMmapFile.Append::UnmapCurrentRegion or MapNewRegion: : The operation could not be completed because the volume is dirty. Please run chkdsk and try again.\r\n\r\n\r\n2015-05-30 22:06:05 Shutdown: In progress...\r\n2015-05-30 22:06:05 StopNode()\r\n2015-05-30 22:06:05 Shutdown: done\r\n```\r\n\r\nAnd my db.log exists but is empty. I haven't modified bitcoin.conf - I didn't do anything other than install and run the program this time round. I don't know where to find bitcoin.conf either - I don't see it in the install directory nor the data directory.",
      "created_at" : "2015-05-30T22:09:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107094228",
      "id" : 107094228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-30T22:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107094228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "I ran chkdsk, and that solved it : ) . The bitcoin client should have printed that error in its GUI tho. Can we keep this ticket open until the error is displayed to the user via the GUI?",
      "created_at" : "2015-05-30T22:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107094426",
      "id" : 107094426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-30T22:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107094426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "Great you fixed it and yeah it seems the DB init flow doesn't handle this correctly... @sipa can you have a look?",
      "created_at" : "2015-05-31T00:28:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107103262",
      "id" : 107103262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-05-31T00:28:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107103262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "The generic message should be extended to mention that one should check the debug log for more details about the errors. This is too rare a condition to implement specific logic for, or add specific translation messages, IMO.\r\n",
      "created_at" : "2015-06-01T11:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107402064",
      "id" : 107402064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-06-01T11:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107402064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj How exactly do you know how rare this is? This literally came up for me twice in a row (in the same day after I ran a chkdsk, I had to do it again later that day). Also it shouldn't matter how rare this specific case is, because I'm sure there are a wide variety of cases where a message is written to the debug log that should find its way to a user-facing error message in the GUI.\r\n\r\nAlso, please don't simply close tickets without allowing people to discuss your opinion.",
      "created_at" : "2015-06-01T18:20:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107662379",
      "id" : 107662379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-06-01T18:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107662379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "@fresheneesz I'm going to guess that this drive is using write-caching and isn't being unmounted properly (pulled the plug/power without safely removing). Are either of those correct?",
      "created_at" : "2015-06-01T19:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107683781",
      "id" : 107683781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-06-01T19:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107683781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Dunno about write caching, but yes indeed the issue is likely the power being turned off without safely removing the drive. Assuming most people are safely removing their drives isn't a safe assumption. (See what I did there ; )",
      "created_at" : "2015-06-01T20:47:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107701855",
      "id" : 107701855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-06-01T20:47:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107701855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/149531?v=3",
         "events_url" : "https://api.github.com/users/fresheneesz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fresheneesz/followers",
         "following_url" : "https://api.github.com/users/fresheneesz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fresheneesz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fresheneesz",
         "id" : 149531,
         "login" : "fresheneesz",
         "organizations_url" : "https://api.github.com/users/fresheneesz/orgs",
         "received_events_url" : "https://api.github.com/users/fresheneesz/received_events",
         "repos_url" : "https://api.github.com/users/fresheneesz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fresheneesz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fresheneesz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fresheneesz"
      }
   },
   {
      "body" : "Sorry, but that logic just doesn't follow. If write-caching is enabled and you're unplugging the drive suddenly, all bets are off. You have essentially just unplugged a mounted (and busy) internal hard-drive. In fact, last I used Windows, it would even pop up and say \"drive not ejected cleanly, corruption may have occured\" or something. If that's the case, there's little that can be done here.\r\n\r\nIf write-caching is disabled, unplugging \"should be\" safe, but I should think it would also be horrendously slow.",
      "created_at" : "2015-06-01T21:33:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6200#issuecomment-107718653",
      "id" : 107718653,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6200",
      "updated_at" : "2015-06-01T21:33:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/107718653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
