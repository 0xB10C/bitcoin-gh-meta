[
   {
      "body" : "Because it's the most compatible option. I was against statically linking Qt first as well (because of the desktop integration problems), see discussion in #4284, but was eventually convinced because all the other options are even worse.\r\n\r\nGist of the matter is, that there is no good way to distribute portable GUI executables on Linux. Blame the weird ecosystem. Also now that libstdc++ is linked statically (another compatibility compromise, #5819) there is no other option than to link all c++ libraries as static.\r\n\r\nUpgrading the static Qt version is fine with me, if that helps anything. Should be straightforward - see `depends/packages/qt.mk`.\r\n",
      "created_at" : "2015-06-10T15:46:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-110806531",
      "id" : 110806531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-10T15:48:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110806531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I see. Well, at least it's no worse than the situation for Qt app deployment on Win/Mac.\r\n\r\nBumping the version in the recipe looks easy enough... testing on all the platforms, not so much. Should I just do it and let someone else find the breakage?",
      "created_at" : "2015-06-10T16:13:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-110816296",
      "id" : 110816296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-10T16:13:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110816296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7895696?v=3",
         "events_url" : "https://api.github.com/users/welshjf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/welshjf/followers",
         "following_url" : "https://api.github.com/users/welshjf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/welshjf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/welshjf",
         "id" : 7895696,
         "login" : "welshjf",
         "organizations_url" : "https://api.github.com/users/welshjf/orgs",
         "received_events_url" : "https://api.github.com/users/welshjf/received_events",
         "repos_url" : "https://api.github.com/users/welshjf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/welshjf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/welshjf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/welshjf"
      }
   },
   {
      "body" : "It may be more involved for that for osx/win, since Qt tends to mess with their cross-build configs pretty often. The good news, though, is that qt tends to become easier for us to build with each qt bump. You're welcome to give it a shot, maybe this will be a smooth bump :)\r\n\r\nOtherwise, this is on my TODO shortlist for 0.12.",
      "created_at" : "2015-06-10T20:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-110900997",
      "id" : 110900997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-10T20:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/110900997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Work in progress at https://github.com/welshjf/bitcoin/tree/qt54. @theuni, do you know the reason for the `sed -i.old \"/XIproto.h/d\" qtbase/src/plugins/platforms/xcb/qxcbxsettings.cpp`? It's breaking the build due to missing LSBFirst/MSBFirst from X.h.",
      "created_at" : "2015-06-12T18:18:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-111579554",
      "id" : 111579554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-12T18:18:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111579554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7895696?v=3",
         "events_url" : "https://api.github.com/users/welshjf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/welshjf/followers",
         "following_url" : "https://api.github.com/users/welshjf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/welshjf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/welshjf",
         "id" : 7895696,
         "login" : "welshjf",
         "organizations_url" : "https://api.github.com/users/welshjf/orgs",
         "received_events_url" : "https://api.github.com/users/welshjf/received_events",
         "repos_url" : "https://api.github.com/users/welshjf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/welshjf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/welshjf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/welshjf"
      }
   },
   {
      "body" : "I've got everything to build but bitcoin-qt aborts with `This application failed to start because it could not find or load the Qt platform plugin \"xcb\".` So far I've traced it down to the configure check for x11-xcb not being run at all.",
      "created_at" : "2015-06-13T02:12:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-111655218",
      "id" : 111655218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-13T02:12:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111655218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7895696?v=3",
         "events_url" : "https://api.github.com/users/welshjf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/welshjf/followers",
         "following_url" : "https://api.github.com/users/welshjf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/welshjf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/welshjf",
         "id" : 7895696,
         "login" : "welshjf",
         "organizations_url" : "https://api.github.com/users/welshjf/orgs",
         "received_events_url" : "https://api.github.com/users/welshjf/received_events",
         "repos_url" : "https://api.github.com/users/welshjf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/welshjf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/welshjf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/welshjf"
      }
   },
   {
      "body" : "A few levels deeper:\r\n\r\nThe Q_IMPORT_PLUGIN directives aren't being enabled (from build-aux/m4/bitcoin_qt.m4) because the _BITCOIN_QT_IS_STATIC check is failing.\r\n\r\nThat's because the test program that checks for QT_STATIC always fails, because `<QtCore>` dies on including `<QtCore/QtCoreDepends>`, because the top level `<basedir>/depends/<host>/include` is not in the CFLAGS -- just the Qt* subdirs.\r\n\r\nThat's because Qt's pkg-config file generator no longer emits it, thinking it's the system include dir, at least under some circumstances. The change is https://codereview.qt-project.org/#/c/83469/ or commit 50b25458, first included in v5.3.1.\r\n\r\nStill investigating whether there's a deeper reason why the Qt build thinks it's the system dir, or if we need some kind of hack to add it back in.",
      "created_at" : "2015-06-13T14:11:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-111712776",
      "id" : 111712776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-13T14:12:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111712776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7895696?v=3",
         "events_url" : "https://api.github.com/users/welshjf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/welshjf/followers",
         "following_url" : "https://api.github.com/users/welshjf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/welshjf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/welshjf",
         "id" : 7895696,
         "login" : "welshjf",
         "organizations_url" : "https://api.github.com/users/welshjf/orgs",
         "received_events_url" : "https://api.github.com/users/welshjf/received_events",
         "repos_url" : "https://api.github.com/users/welshjf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/welshjf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/welshjf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/welshjf"
      }
   },
   {
      "body" : "The Qt build system infers the default include path by parsing the output of g++ -v (qtbase/configure, line 3326, \"Auto-detect default include and library search paths\"). This is affected by the CPATH and QMAKE_CFLAGS settings in depends/packages/qt.mk. Simply deleting those works to get the top level include path back into the .pc files, but breaks the static OpenSSL linkage. What does work is to add the identical CPATH to the bitcoin build environment.\r\n\r\nTragically, after all that, the system theme and systray problems are still there. It would seem that the change in Qt 5.4 was not to automatically support the new systray, but rather just some refactoring that enabled KDE to hook into it via the system theme engine -- which only works with the shared Qt.\r\n\r\nI'll still PR my work on the version bump, but not for 0.11 -- no point holding up the schedule if it doesn't solve the problem.",
      "created_at" : "2015-06-13T21:18:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-111753373",
      "id" : 111753373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-13T21:18:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111753373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7895696?v=3",
         "events_url" : "https://api.github.com/users/welshjf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/welshjf/followers",
         "following_url" : "https://api.github.com/users/welshjf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/welshjf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/welshjf",
         "id" : 7895696,
         "login" : "welshjf",
         "organizations_url" : "https://api.github.com/users/welshjf/orgs",
         "received_events_url" : "https://api.github.com/users/welshjf/received_events",
         "repos_url" : "https://api.github.com/users/welshjf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/welshjf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/welshjf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/welshjf"
      }
   },
   {
      "body" : "Yes, separately of that it'll still be nice to have a more recent Qt in 0.12, thanks for the work.",
      "created_at" : "2015-06-15T08:32:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6267#issuecomment-111977048",
      "id" : 111977048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6267",
      "updated_at" : "2015-06-15T08:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/111977048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
