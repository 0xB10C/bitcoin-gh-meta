[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Additional information that may be relevant for reviewers:\r\n\r\n- I've documented my progress on including `sys/sdt.h` in https://github.com/bitcoin/bitcoin/issues/23297\r\n- Build support for the USDT was initially added in https://github.com/bitcoin/bitcoin/pull/19866. Some initial discussion on tracepoints in release builds took place in this thread https://github.com/bitcoin/bitcoin/pull/19866#discussion_r483774808. Some more discussion in a [bitcoin-core-dev meeting January 2021](https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2021/bitcoin-core-dev.2021-01-21-19.00.moin.txt).\r\n- There was a [PR review club](https://bitcoincore.reviews/22006) on #22006 \r\n- We have documentation listing tracepoints in a binary in [`doc/tracing.md`](https://github.com/bitcoin/bitcoin/blob/master/doc/tracing.md#listing-available-tracepoints).\r\n- The tracepoints are currently not automatically/CI tested (#23296). Merging this _now_ could leave us with broken tracepoints in a release build.\r\n\r\nI've tested the GUIX binaries on `aarch64-linux-gnu`, `arm-linux-gnueabihf`, `x86_64-linux-gnu` and on `x86_64-w64-mingw32`. I don't have hardware to test on `x86_64-apple-darwin19`, `powerpc64le-linux-gnu`, `powerpc64-linux-gnu`, or `powerpc64-linux-gnu` (though I might try running the binaries in qemu). Any help testing on these platforms would be appreciated. Of course, testing and review on the already tested platforms is welcome too!\r\n\r\n|        platform       \t| binary contains tracepoints \t|                synced signet                \t|        tracepoints tested and working       \t|\r\n|:---------------------:\t|:---------------------------:\t|:-------------------------------------------:\t|:-------------------------------------------:\t|\r\n|   aarch64-linux-gnu   \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|              :heavy_check_mark:             \t|\r\n|  arm-linux-gnueabihf  \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|             :grey_exclamation:Â¹             \t|\r\n|  powerpc64-linux-gnu  \t|      :heavy_check_mark:     \t|                                             \t|                                             \t|\r\n| powerpc64le-linux-gnu \t|      :heavy_check_mark:     \t|                                             \t|                                             \t|\r\n|   riscv64-linux-gnu   \t|      :heavy_check_mark:     \t| [:heavy_check_mark: (laanwj)][laanwj-riscv] \t| [:grey_exclamation: (laanwj)][laanwj-riscv] \t|\r\n|    x86_64-linux-gnu   \t|      :heavy_check_mark:     \t|              :heavy_check_mark:             \t|              :heavy_check_mark:             \t|\r\n| x86_64-apple-darwin19 \t|              - Â²             \t|                                             \t|                      -                      \t|\r\n|   x86_64-w64-mingw32  \t|              -              \t|              :heavy_check_mark:             \t|                      -                      \t|\r\n\r\n[laanwj-riscv]: https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993847365\r\n\r\n\r\nÂ¹ bpftrace isn't available on Ubuntu 21.10 for `armhf`. BCC is available, but compiling the C code didn't work. Presumably it only worrks on 64-bit? Needs further testing.\r\nÂ² ~Maybe the `x86_64-apple-darwin19` binaries contain tracepoints that can be listed with e.g. dtrace on macOS?~ No, tracepoints aren't compiled in as [this check](https://github.com/bitcoin/bitcoin/blob/9015d118425df4a5b34455da15334901ece85ed3/configure.ac#L1347-L1357) fails. This is OK, we currently only support tracepoints on Linux.\r\n\r\n---\r\n\r\n@DrahtBot !request_GUIX_build ",
      "created_at" : "2021-12-09T15:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889",
      "id" : 989947889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847AWfx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989947889/reactions"
      },
      "updated_at" : "2021-12-15T13:48:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989947889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There has been light conceptual agreement on including the Userspace, Statically Defined Tracing tracepoints in Bitcoin Core release builds. This, for example, enables user to hook into production deployments, if they need to\r\n\r\nBig concept ACK",
      "created_at" : "2021-12-09T15:20:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989950707",
      "id" : 989950707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847AXLz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989950707/reactions"
      },
      "updated_at" : "2021-12-09T15:20:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989950707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22555](https://github.com/bitcoin/bitcoin/pull/22555) (build: Fix `make apk` for Android w/ non-default SOURCES_PATH in depends by hebasto)\n* [#22552](https://github.com/bitcoin/bitcoin/pull/22552) (build: Improve depends build system robustness by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-12-10T17:57:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-991177844",
      "id" : 991177844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847FCx0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991177844/reactions"
      },
      "updated_at" : "2021-12-10T17:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991177844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Any help testing on these platforms would be appreciated. \r\n\r\nAs I have a running RV64 system (SiFive Unmatched) I can give it a try on `riscv64-linux-gnu`. Which steps did you follow for \"synced signet\" and \"tracepoints tested\"? Literally just sync signet, and try the tracepoint examples?",
      "created_at" : "2021-12-13T16:24:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992645502",
      "id" : 992645502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847KpF-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992645502/reactions"
      },
      "updated_at" : "2021-12-13T16:24:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992645502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, will test soon",
      "created_at" : "2021-12-13T16:45:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992666598",
      "id" : 992666598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847KuPm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992666598/reactions"
      },
      "updated_at" : "2021-12-13T16:45:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992666598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I can give it a try on `riscv64-linux-gnu`.\r\n\r\nThanks @laanwj! That would be awesome!\r\n\r\n> Which steps did you follow for \"synced signet\" and \"tracepoints tested\"? Literally just sync signet, and try the tracepoint examples?\r\n\r\nYes. By syncing signet I just wanted to make sure nothing is horribly broken on that arch (I see no reason why it should be). Running the tests suits should work as well. I ran the `p2p_monitor.py` and a `bpftrace` example to test the tracepoints. Happy to do further testing if needed!",
      "created_at" : "2021-12-13T17:25:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992703038",
      "id" : 992703038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847K3I-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992703038/reactions"
      },
      "updated_at" : "2021-12-14T15:43:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992703038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "We'll be discussing this PR in the BItcoin Core PR review club this Wednesday at 17:00 UTC: https://bitcoincore.reviews/23724",
      "created_at" : "2021-12-13T17:28:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-992705074",
      "id" : 992705074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847K3oy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992705074/reactions"
      },
      "updated_at" : "2021-12-13T17:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992705074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested on riscv64-linux-gnu:\r\n\r\n- :heavy_check_mark: Tracepoints are present in the binary (checked only `bitcoind` and `bitcoin-qt`)\r\n```\r\n$ gdb bitcoind\r\nGNU gdb (Debian 10.1-2) 10.1.90.20210103-git\r\n(gdb) info probes\r\nType Provider   Name             Where              Semaphore Object\r\nstap net        inbound_message  0x00000000000ea198           /â¦/bitcoin-070570806404/bin/bitcoind\r\nâ¦\r\n```\r\n- :heavy_check_mark: Signet sync from scratch to successful to height=68616\r\n- :woman_shrugging: Tracepoints tested\r\n\r\nNo bcc or bpftrace packages exist for RISC-V debian, so I had to build them from source (against clang13).\r\n\r\nBcc builds successfully (including python module), unfortunately, bpftrace doesn't support riscv64 at the moment:\r\n```\r\nCMake Error at src/arch/CMakeLists.txt:14 (message):\r\n  Unsupported architecture: riscv64\r\n```\r\n\r\nTrying to run the python scripts runs into parse errors:\r\n```\r\n# ./log_raw_p2p_msgs.py â¦/bitcoin-070570806404/bin/bitcoind\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n---------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n--------------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n-------------------^\r\nParse error:\r\n    -8@s2 8@s3 8@a0 8@24(s1) 8@a5 8@a4\r\n```\r\n\r\nSo I think this is a no-go for now.",
      "created_at" : "2021-12-14T18:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993847365",
      "id" : 993847365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847POhF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993847365/reactions"
      },
      "updated_at" : "2021-12-14T18:32:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993847365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @laanwj!! I've updated the table in https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889. \r\n\r\nFrom the parse error it seems like bcc isn't able to parse the register names in the systemtap ELF notes in `bitcoind`. There was some RISC-V work in https://github.com/iovisor/bcc/pull/3678 which might have touched this. Not sure though. I'm getting a similar error on `arm-linux-gnueabihf`:\r\n\r\n```\r\n$ python3 log_raw_p2p_msgs.py ../../../bitcoin-0729f577f0e2/bin/bitcoind\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n---------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n--------------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n-------------------^\r\nParse error:\r\n    -8@r8 4@r6 4@r0 4@[r5, #12] 4@r3 4@r2\r\n--------------------------^\r\n[..]\r\n```\r\n\r\n\r\nI haven't tested the tracepoints with the Systemtap tools at all. Maybe this can be used on `arm-linux-gnueabihf`, and `riscv64-linux-gnu`? If not, we might not want to build binaries with tracepoints for these platforms. Only supporting `x86_64-linux-gnu` and `aarch64-linux-gnu` in release builds for now.",
      "created_at" : "2021-12-14T19:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993909338",
      "id" : 993909338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Pdpa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993909338/reactions"
      },
      "updated_at" : "2021-12-14T19:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993909338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've also checked that [this check](https://github.com/bitcoin/bitcoin/blob/9015d118425df4a5b34455da15334901ece85ed3/configure.ac#L1347-L1357) fails for `x86_64-apple-darwin19` and `x86_64-w64-mingw32`. Also `USDT tracing    = no` is being printed during configure. This means we don't need to copy the new systemtap depends package for these two platforms. No tracepoints on macOS and Windows.\r\n\r\nI've update the table in https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-989947889.",
      "created_at" : "2021-12-14T19:40:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-993918704",
      "id" : 993918704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Pf7w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993918704/reactions"
      },
      "updated_at" : "2021-12-14T19:40:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/993918704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> From the parse error it seems like bcc isn't able to parse the register names in the systemtap ELF notes in bitcoind. There was some RISC-V work in iovisor/bcc#3678\r\n\r\nThanks, I'll look into that patch. Edit: I am running the version from git, so should have that merged PR already, so unfortunately it doesn't fix it.\r\n\r\n> If not, we might not want to build binaries with tracepoints for these platforms. Only supporting x86_64-linux-gnu and aarch64-linux-gnu in release builds for now.\r\n\r\nIt depends, if compiler support is working, and it's purely an issue with the tooling (`bcc`, `bpftrace`) I'd argue there is no reason for disabling it on those platforms. It will work as soon as the tools are updated to support the architectures (especially for RISC-V I expect this to be happening soon). I guess the problem is that we can't really test that the tracepoints are inserted correctly in the binary?\r\n\r\nOr maybe we can through gdb? E.g. put a breakpoint at a tracepoint and then inspect the arguments manually.\r\n\r\nEdit: I checked `bcc` (as of commit 52900a435de85e706f5280f4a184374dd729c58e, current HEAD) and FWIW, specialized argumentparsers only exist for the following platforms:\r\n```\r\nclass ArgumentParser_aarch64 : public ArgumentParser {\r\nclass ArgumentParser_powerpc64 : public ArgumentParser {\r\nclass ArgumentParser_s390x : public ArgumentParser {\r\nclass ArgumentParser_x64 : public ArgumentParser {\r\n```\r\nThere is no general behavior: the base class is a pure virtual base class. So while I haven't checked which one it's instantiating for `riscv64-linux-gnu` and `arm-linux-gnueabihf`, it can't actually be correct :smile: \r\n\r\nEdit.2: On unsupported architectures, you get the `_x64` one for free !!!\r\n```c++\r\n#ifdef __aarch64__\r\n  ArgumentParser_aarch64 parser(arg_fmt);\r\n#elif __powerpc64__\r\n  ArgumentParser_powerpc64 parser(arg_fmt);\r\n#elif __s390x__\r\n  ArgumentParser_s390x parser(arg_fmt);\r\n#else\r\n  ArgumentParser_x64 parser(arg_fmt);\r\n#endif\r\n```",
      "created_at" : "2021-12-15T10:07:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-994617403",
      "id" : 994617403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847SKg7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994617403/reactions"
      },
      "updated_at" : "2021-12-15T10:23:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994617403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r769586820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we need these comments. If anything, a comment in regards to why you're using 4.5 rather than 4.6 (GCC issues) could be useful, and/or noting that 4.7 should be safe to use.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-15T12:38:05Z",
      "diff_hunk" : "@@ -0,0 +1,15 @@\n+package=systemtap\n+$(package)_version=4.5\n+$(package)_download_path=https://sourceware.org/systemtap/ftp/releases/\n+$(package)_file_name=$(package)-$($(package)_version).tar.gz\n+$(package)_sha256_hash=75078ed37e0dd2a769c9d1f9394170b2d9f4d7daa425f43ca80c13bad6cfc925\n+$(package)_patches=remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch\n+\n+# Only the includes/sys/sdt.h header is needed from Systemtap.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r769586820",
      "id" : 769586820,
      "line" : 8,
      "node_id" : "PRRC_kwDOABII584t3vaE",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "depends/packages/systemtap.mk",
      "position" : 8,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/769586820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, running the guix build",
      "created_at" : "2021-12-15T13:26:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-994789908",
      "id" : 994789908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847S0oU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994789908/reactions"
      },
      "updated_at" : "2021-12-15T13:26:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994789908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Testing on Ubuntu 18, was getting segfaults for `log_utxos.bt` and `connectblock_benchmark.bt`. Had to build bpftrace from source with the following versions:\r\n\r\n- `bpftrace v0.12.1`\r\n- `bcc v0.8.0 (required to build bpftrace from source)`\r\n",
      "created_at" : "2021-12-15T22:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-995252058",
      "id" : 995252058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23724",
      "node_id" : "IC_kwDOABII5847Ulda",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/995252058/reactions"
      },
      "updated_at" : "2021-12-15T22:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/995252058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770191851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this should be Linux only for now (will solve not copying the headers for darwin and win).\r\n```suggestion\r\nlinux_usdt_packages=systemtap\r\n```",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T03:06:55Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@ natpmp_packages=libnatpmp\n multiprocess_packages = libmultiprocess capnp\n multiprocess_native_packages = native_libmultiprocess native_capnp\n \n+usdt_packages=systemtap",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770191851",
      "id" : 770191851,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584t6DHr",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 22,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/packages.mk",
      "position" : 4,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770191851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770218690"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Given we aren't using sdt-config.h, there's no reason to copy sdt-config.h.in into our includes dir. This could be simplified to:\r\n\r\n```suggestion\r\n  cp includes/sys/sdt.h $($(package)_staging_prefix_dir)/include/sys/sdt.h\r\n```\r\n\r\nThis would also make it clear that the only thing we care about is the sdt header.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T04:36:52Z",
      "diff_hunk" : "@@ -0,0 +1,15 @@\n+package=systemtap\n+$(package)_version=4.5\n+$(package)_download_path=https://sourceware.org/systemtap/ftp/releases/\n+$(package)_file_name=$(package)-$($(package)_version).tar.gz\n+$(package)_sha256_hash=75078ed37e0dd2a769c9d1f9394170b2d9f4d7daa425f43ca80c13bad6cfc925\n+$(package)_patches=remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch\n+\n+# Only the includes/sys/sdt.h header is needed from Systemtap.\n+# The configure and make steps and not required.\n+\n+define $(package)_preprocess_cmds\n+  patch -p1 < $($(package)_patch_dir)/remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch && \\\n+  mkdir -p $($(package)_staging_prefix_dir)/include/sys && \\\n+  cp -r includes/sys $($(package)_staging_prefix_dir)/include",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770218690",
      "id" : 770218690,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII584t6JrC",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "depends/packages/systemtap.mk",
      "position" : 14,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770218690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770220102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102"
         }
      },
      "author_association" : "MEMBER",
      "body" : "After looking at this again, I think assuming the assembler supports `?` is ok, assuming we make this Linux only (see other review comments).\r\n\r\n`pushsection` is an [ELF specific directive](https://sourceware.org/binutils/docs/as/PushSection.html). If you try to compile the assembly used in the configure check which would define `_SDT_ASM_SECTION_AUTOGROUP_SUPPORT`, with `mingw32-gcc`, it won't compile:\r\n```c\r\nint main() {\r\n\r\nasm(\".section .note.foo,\\\"?\\\",\\\"note\\\"\\n\"\r\n     \".byte 1, 2, 3\\n\"\r\n     \".previous\\n\"\r\n     \".section .text,\\\"axG\\\",\\\"progbits\\\",foogroup,comdat\\n\"\r\n     \".byte 1\\n\"\r\n     \".pushsection .note.foo,\\\"?\\\",\\\"note\\\"\\n\"\r\n     \".byte 4, 5, 6\\n\"\r\n     \".popsection\\n\"\r\n     \".byte 2\\n\");\r\nreturn 0;\r\n}\r\n```\r\n\r\n```bash\r\nx86_64-w64-mingw32-gcc push.c \r\n/tmp/ccDQdocw.s: Assembler messages:\r\n/tmp/ccDQdocw.s:18: Warning: unknown section attribute '?'\r\n/tmp/ccDQdocw.s:18: Error: junk at end of line, first unrecognized character is `,'\r\n/tmp/ccDQdocw.s:20: Error: unknown pseudo-op: `.previous'\r\n/tmp/ccDQdocw.s:21: Warning: unknown section attribute 'G'\r\n/tmp/ccDQdocw.s:21: Warning: Ignoring changed section attributes for .text\r\n/tmp/ccDQdocw.s:21: Error: junk at end of line, first unrecognized character is `,'\r\n/tmp/ccDQdocw.s:23: Error: unknown pseudo-op: `.pushsection'\r\n/tmp/ccDQdocw.s:25: Error: unknown pseudo-op: `.popsection'\r\n```\r\nI think making the systemtap package Linux only for now is the way to go.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T04:41:33Z",
      "diff_hunk" : "@@ -0,0 +1,31 @@\n+commit b92d4c121486f3c6e8a2cea537c53eb09894479a\n+Author: 0xb10c <0xb10c@gmail.com>\n+Date:   Tue Dec 7 11:02:07 2021 +0100\n+\n+    Remove _SDT_ASM_SECTION_AUTOGROUP_SUPPORT check\n+    \n+    We assume that the assembler supports \"?\" in .pushsection directives.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770220102",
      "id" : 770220102,
      "line" : 7,
      "node_id" : "PRRC_kwDOABII584t6KBG",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 7,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "depends/patches/systemtap/remove_SDT_ASM_SECTION_AUTOGROUP_SUPPORT_check.patch",
      "position" : 7,
      "pull_request_review_id" : 832761102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T04:46:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770220102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770785144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree this should only be Linux only for now. However, the suggested change doesn't seem to do the trick.\r\n\r\nThe systemtap package isn't copied:\r\n```\r\ncopying packages: native_b2 boost libevent qt expat libxcb xcb_proto libXau xproto freetype fontconfig libxkbcommon libxcb_util libxcb_util_render libxcb_util_keysyms libx\r\nto: /bitcoin/depends/x86_64-linux-gnu\r\n```\r\n\r\nProbably needs changes in `depends/Makefile` too (grep for `usdt_packages`). I'll have a look and see if I can figure it out.",
      "commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "created_at" : "2021-12-16T17:58:06Z",
      "diff_hunk" : "@@ -19,6 +19,8 @@ natpmp_packages=libnatpmp\n multiprocess_packages = libmultiprocess capnp\n multiprocess_native_packages = native_libmultiprocess native_capnp\n \n+usdt_packages=systemtap",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23724#discussion_r770785144",
      "id" : 770785144,
      "in_reply_to_id" : 770191851,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584t8T94",
      "original_commit_id" : "07057080640485b1d7564a7521976d25b5ff1a7d",
      "original_line" : 22,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "depends/packages/packages.mk",
      "position" : 4,
      "pull_request_review_id" : 834430194,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23724",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-16T17:58:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/770785144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   }
]
