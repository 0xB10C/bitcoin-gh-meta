{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Guix's `core-updates-frozen` branch has been merged back into `master`, and a [`version-1.4.0`](https://git.savannah.gnu.org/cgit/guix.git/log/?h=version-1.4.0) branch has been created. This is great, as it means the next Guix release is on the horizon, and it contains a number of changes I'd like to take advantage of. In particular, is migrating the version of GCC we use for releases from GCC 8 to GCC 10.3.0 (which is also the new Guix default GCC). This is my preferred method of unblocking progress in #20744, which is currently stalled due to support for `std::filesystem` for Windows not arriving in GCC until version 9, whereas it's usable on Linux starting with GCC 8. The current set of changes in that PR [attempt to backport support](https://github.com/bitcoin/bitcoin/pull/20744/commits/9604eda1abe6ffc02c97e3434c3c2c4ce1250794) for `std::filesystem`, for Windows, to GCC 8, similar to what is currently done by Debian, however that is somewhat convoluted, and using GCC 10 with our current Guix version would require updating at least one Guix patch to GCC, so is not completely straightforward either.\r\n\r\nOther changes included here:\r\n* Dropping our `--no-*` patch for mingw binutils ld, as we can take advantage of the `--disable-*` flags that are now available in binutlils 2.37. The security check tests are updated accordingly.\r\n* Dropping our current patch for NSIS, as it's been integrated upstream, however given we are building v3.05, we need a different one (https://github.com/kichik/nsis/commit/229b6136c41ba5caba25936f4927476d20aa283f) for compiling against GCC 10.\r\n* Removing our `python-asn1crypto` package definition, as an identical package is available in Guix. Over time we should look at trying to get the rest of the python packages we define here upstreamed.\r\n* Adding a patch for `python-elfsteem` to fix an issue in the example code when using Python 3.9+.\r\n* Our base glibc (`2.24`) now inherits from glibc-2.31. Guix has removed packages of glibc < 2.29, and the current version of glibc is `2.33`. However glibc-2.31 is the newest version that still contains a workaround for installing sunrpc data, which we need, so inheriting from that version seemed like the most straightforward solution.\r\n* As mentioned, Guix has removed glibcs < 2.29, so we add our own package definition for glibc 2.27, which we use for our RISC-V toolchain (also inheriting from 2.31).\r\n\r\nThe guix commit hash currently points to the head of the `version-1.4.0` branch. This can be updated to an official release tag when one is available.\r\n\r\nLooking for Concept ACKs on migrating to using GCC 10.3 for building releases. Keeping in mind issues like #20005, however that particular bug should be fixed in GCC 10.3.0+, according to https://gcc.gnu.org/bugzilla/show_bug.cgi?id=95189.\r\n\r\nGuix (builds work for all HOSTS, but I haven't tested the binaries yet, and want to check reproducibility):\r\n```bash\r\nbash-5.1# find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n9d8d526b685606bfe0bd1eefce9fb9e49a734b922a58abb6f52aa2bb635ff611  guix-build-60e364ce1647/output/aarch64-linux-gnu/SHA256SUMS.part\r\naa32b3f169966bbbf478ba2abb3d8c33c47341603b1a08493257a84eebd90316  guix-build-60e364ce1647/output/aarch64-linux-gnu/bitcoin-60e364ce1647-aarch64-linux-gnu-debug.tar.gz\r\n0a8822641111d1bb06bf068cbcf7b57156f2bd5a7ed09edbb73f3e9a69c4264e  guix-build-60e364ce1647/output/aarch64-linux-gnu/bitcoin-60e364ce1647-aarch64-linux-gnu.tar.gz\r\n15660a12cd009c77f0b4d7b96f8b62153ba4e72daec21d5d6b95531e72ea1b23  guix-build-60e364ce1647/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n53a3b6800d888d66a21a145146f2ddbe4121fb660d2f7357a4f969c3805ff05c  guix-build-60e364ce1647/output/arm-linux-gnueabihf/bitcoin-60e364ce1647-arm-linux-gnueabihf-debug.tar.gz\r\n9b133b525a64b5f1c10c48eb740678e9f44eda682efe1c68feeff00d4c839564  guix-build-60e364ce1647/output/arm-linux-gnueabihf/bitcoin-60e364ce1647-arm-linux-gnueabihf.tar.gz\r\nad10ae1d69414deb7447f1839a027d09382ca40cdfb2a3600408b8a8689788dc  guix-build-60e364ce1647/output/dist-archive/bitcoin-60e364ce1647.tar.gz\r\n18099ff26d228071ec3f5537dfd77aa8b9471b952d99a4c3419879e5edcfd2cf  guix-build-60e364ce1647/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n50763ded4fe0ff822bcbc8b46f2943e37082600b47f918952e5f41c70428b509  guix-build-60e364ce1647/output/powerpc64-linux-gnu/bitcoin-60e364ce1647-powerpc64-linux-gnu-debug.tar.gz\r\n6a24ab806e4a57c26d1b7f1bfbfa60ab370ef25a5f000d7ec9c3d394d63a699c  guix-build-60e364ce1647/output/powerpc64-linux-gnu/bitcoin-60e364ce1647-powerpc64-linux-gnu.tar.gz\r\n353209e60e464dfdef754fe4cf468bed446146ca3ad84c30be48faa8d8736607  guix-build-60e364ce1647/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n8c4ba03ebc57ab4fbde4cdb84dde7232d45546d72bd0b09fdacbb76204268d80  guix-build-60e364ce1647/output/powerpc64le-linux-gnu/bitcoin-60e364ce1647-powerpc64le-linux-gnu-debug.tar.gz\r\n85436b2d1541b522de4b122d7e4494dbf16bb02e1aa72d08e82fcc22113b62b1  guix-build-60e364ce1647/output/powerpc64le-linux-gnu/bitcoin-60e364ce1647-powerpc64le-linux-gnu.tar.gz\r\nf03a92eb856fffa71b6246f5b2b37c17caf2372c891d75c36ad3dc30329b5d93  guix-build-60e364ce1647/output/riscv64-linux-gnu/SHA256SUMS.part\r\n846ffc31148f4ead460ab09577f279c1b8fe95f70c9cfc43d6c66729ca4f8e96  guix-build-60e364ce1647/output/riscv64-linux-gnu/bitcoin-60e364ce1647-riscv64-linux-gnu-debug.tar.gz\r\naaa5325b80fabf85c20d409dc6f960155d815b3b450bebf7e57d484b0964383d  guix-build-60e364ce1647/output/riscv64-linux-gnu/bitcoin-60e364ce1647-riscv64-linux-gnu.tar.gz\r\nb8205fb01044ba08af0116c4e91c926f1e2260d0e3008ae3e8ee70208809be97  guix-build-60e364ce1647/output/x86_64-apple-darwin/SHA256SUMS.part\r\n0bb2565cfb6dfad1c8f74a48d074d1a66bfbd9f2accfcc53e75f99bdef634448  guix-build-60e364ce1647/output/x86_64-apple-darwin/bitcoin-60e364ce1647-osx-unsigned.dmg\r\ncc450a02ea3410971f115018424acf0dfc9d75c3d79127bee9aea95c5a028df7  guix-build-60e364ce1647/output/x86_64-apple-darwin/bitcoin-60e364ce1647-osx-unsigned.tar.gz\r\n192e6b5cddcaf11c540d4389e843eaf5fa8185a5224f141883dc8f1f91c8d1d7  guix-build-60e364ce1647/output/x86_64-apple-darwin/bitcoin-60e364ce1647-osx64.tar.gz\r\n015be75ef1625c0f6621a1cfe60f0bddfefd3b974d1c9e79e9a314fcd463d533  guix-build-60e364ce1647/output/x86_64-linux-gnu/SHA256SUMS.part\r\n1071dcbfe638ed34524e6b34bed8a721260002ba7bd5460879d6cb1b431aef75  guix-build-60e364ce1647/output/x86_64-linux-gnu/bitcoin-60e364ce1647-x86_64-linux-gnu-debug.tar.gz\r\n2dfbd9373861421857aa3d4e4ee091e0179ca41334d238c8523f6595caa70034  guix-build-60e364ce1647/output/x86_64-linux-gnu/bitcoin-60e364ce1647-x86_64-linux-gnu.tar.gz\r\ncb3d7ea3848f84541b91a6672b6c80bf9f2513741fc23de51cab1b3f23ddb2ae  guix-build-60e364ce1647/output/x86_64-w64-mingw32/SHA256SUMS.part\r\nd465ce79d202df4c0b33451aaf716455a28ca515ce163d72ed65450525048984  guix-build-60e364ce1647/output/x86_64-w64-mingw32/bitcoin-60e364ce1647-win-unsigned.tar.gz\r\n65ddd96e902acd2cf3e082e4a32121263f2156a01a12d204732f6d06be74c9ff  guix-build-60e364ce1647/output/x86_64-w64-mingw32/bitcoin-60e364ce1647-win64-debug.zip\r\n0626f22b0db3f480c81c70e200f5514d05e5520ed09c33da4b111e66878ea7b4  guix-build-60e364ce1647/output/x86_64-w64-mingw32/bitcoin-60e364ce1647-win64-setup-unsigned.exe\r\nd7d44954aa5708ecd6263a2b73ed79dc30707826ed70b7552d15d227c39d1e4d  guix-build-60e364ce1647/output/x86_64-w64-mingw32/bitcoin-60e364ce1647-win64.zip\r\n```",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778/comments",
   "created_at" : "2021-12-15T07:08:04Z",
   "draft" : true,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/23778",
   "id" : 1080654201,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "description" : null,
         "id" : 61889416,
         "name" : "Build system",
         "node_id" : "MDU6TGFiZWw2MTg4OTQxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      },
      {
         "color" : "bfd4f2",
         "default" : false,
         "description" : "",
         "id" : 1947349437,
         "name" : "DrahtBot Guix build requested",
         "node_id" : "MDU6TGFiZWwxOTQ3MzQ5NDM3",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/DrahtBot%20Guix%20build%20requested"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII584v3tJ7",
   "number" : 23778,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/23778.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23778",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/23778.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23778"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778/timeline",
   "title" : "release: Guix 1.4.0 & GCC 10.3",
   "updated_at" : "2021-12-15T08:43:37Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23778",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   }
}
