[
   {
      "body" : "Hmm..... so this would purely be a (bandwidth) performance optimisation? Right? I haven't measured it, but I expect that most of the CPU time gets spent in `GetTransaction()` and the http-serving parts.\r\nI'm not sure if its worth to add another RPC call to solve a rather individual issue.",
      "created_at" : "2017-02-12T13:53:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279220015",
      "id" : 279220015,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-12T13:53:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279220015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "yes, bandwidth performance.\r\nI think it is not individual issue.\r\nWallet users most interested in tx confirmations because it is changeable value.\r\nAnd we would like to detect confirmation as soon as possible to finish payment.\r\nFor this reason, getrawtransaction is called so many time and network performance is down.",
      "created_at" : "2017-02-12T14:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279221929",
      "id" : 279221929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-12T14:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279221929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2033895?v=3",
         "events_url" : "https://api.github.com/users/34ro/events{/privacy}",
         "followers_url" : "https://api.github.com/users/34ro/followers",
         "following_url" : "https://api.github.com/users/34ro/following{/other_user}",
         "gists_url" : "https://api.github.com/users/34ro/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/34ro",
         "id" : 2033895,
         "login" : "34ro",
         "organizations_url" : "https://api.github.com/users/34ro/orgs",
         "received_events_url" : "https://api.github.com/users/34ro/received_events",
         "repos_url" : "https://api.github.com/users/34ro/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/34ro/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/34ro/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/34ro"
      }
   },
   {
      "body" : "For normal use-cases, `get(raw)transaction` seems to be fast enough... \r\nConstantly polling is not efficient.\r\nSomething that could be a better solution would be RPC long polling (https://github.com/bitcoin/bitcoin/pull/7949).\r\n\r\nIt would be possible, to keep the http-connection open (long poll) until the confirmation-count got changed (could be check on every Connect/Disconnect block). This would reduce the bandwidth dramatically.",
      "created_at" : "2017-02-12T14:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279223816",
      "id" : 279223816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-12T14:57:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279223816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "A wallet would not use the RPC commands directly except if the bitcoin node is local, in which case bandwidth is not an issue. For a remote / arbitrary node, it would use some form of proxy which could have a reduced-bandwidth representation of the transactions easily enough. Without adding that representation mode to Bitcoin Core itself.",
      "created_at" : "2017-02-13T11:36:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279362780",
      "id" : 279362780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-13T11:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279362780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "> A wallet would not use the RPC commands directly except if the bitcoin node is local, in which case bandwidth is not an issue. For a remote / arbitrary node, it would use some form of proxy which could have a reduced-bandwidth representation of the transactions easily enough.\r\n\r\nIdeally yes. But I could guess there are some users tunnelling RPC to a remote machine (bandwidth matters) or connecting to a node on a different machine but in the same/trusted network (bandwidth should not matter that much).",
      "created_at" : "2017-02-13T11:38:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279363247",
      "id" : 279363247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-13T11:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279363247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Hey! Just wanted to say nice work for your first PR @34ro :) In terms of code quality and formatting I think you've done a nice job & your implementation seems correct and pragmatic. Great to see that you even added tests!\r\n\r\nUnfortunately, I agree somewhat with @jonasschnelli with regards to the necessity of this work. I don't think that the RPC bandwidth will be so large as to cause a problem in this specific case (most transactions don't have an insane amount of vins and vouts), but I do agree in general that this is worthwhile to think about (especially if you ever wanted to connect a mobile phone or something :) ) \r\n\r\nHowever, I do have one possible way of fixing your problem (excessive bandwidth) without needing to add a whole new RPC. You could change the order of the entries in the JSON such that the non variable-length fields are first, followed by the variable length fields. This way, your low-bandwidth client can read out just the first packet, parse far enough to read the confirmations field, and then ungracefully terminate the TCP connection. That's kind of a \"dirty ugly hack\" so it's only half-serious.\r\n\r\nAnother possible solution to this would be somewhat like long polling -- keep the http connection open after the RPC, and also allow a parameter fWatch to be sent. On every call to connectblock, another JSON could be sent over with just the delta (e.g., {\"confirmations\" : 1 } then {\"confirmations\": 2}). This is somewhat similar to what @jonasschnelli suggested but has the benefit of not closing the tcp socket until you're actually done with it. \r\n\r\n",
      "created_at" : "2017-02-14T12:14:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9745#issuecomment-279692042",
      "id" : 279692042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9745",
      "updated_at" : "2017-02-14T12:14:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/279692042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   }
]
