{
   "assignee" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
      "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sipa/followers",
      "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sipa",
      "id" : 548488,
      "login" : "sipa",
      "organizations_url" : "https://api.github.com/users/sipa/orgs",
      "received_events_url" : "https://api.github.com/users/sipa/received_events",
      "repos_url" : "https://api.github.com/users/sipa/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sipa"
   },
   "body" : "The current comparison tool tests network behavior that is too specific - in particular, it seems hard to adapt it to headers-first (which in some cases does not fetch blocks in the same order, e.g. because it already knows that it's invalid through the header, even though at every point it should have the same best block) - correct me if I'm wrong, @TheBlueMatt.\r\n\r\nOne of the reasons is that the current comparison both incorporates the scenario of comparisons to run, and the logic to compare it to (BitcoinJ full node code). This makes it hard to adapt.\r\n\r\nI propose writing a tool that does nothing but implement a testing scenario, and run it against 2 bitcoind's in parallel: an old trusted version, and the new version to be tested, and compares whether at every point in time (after synchronizing through a ping/ping) they agree on the best chain.\r\n\r\nThis could be as simple as a python node with an associated block database and block header tree, that can answer getdata/getheaders/getblocks, and runs through a scripted scenario, but doesn't do any validation itself.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 6,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4545/comments",
   "created_at" : "2014-07-16T17:16:10Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4545/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/4545",
   "id" : 38004101,
   "labels" : [
      {
         "color" : "ebd775",
         "name" : "Brainstorming",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4545/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 4545,
   "state" : "open",
   "title" : "Comparison tool successor?",
   "updated_at" : "2014-10-02T19:33:47Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4545",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
      "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sipa/followers",
      "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sipa",
      "id" : 548488,
      "login" : "sipa",
      "organizations_url" : "https://api.github.com/users/sipa/orgs",
      "received_events_url" : "https://api.github.com/users/sipa/received_events",
      "repos_url" : "https://api.github.com/users/sipa/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sipa"
   }
}
