[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95610292"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95610292"
         }
      },
      "body" : "Explanation of this change: Calling CCoinsViewCache::AccessCoins when no cache entry exists and the base entry is pruned no longer creates a cache entry.\r\n\r\nThe changed behavior in this case is better than the current behavior because now this case is consistent with the case in line 606 above where no cache entry exists and no base entry exists. It doesn't make any sense for the cache to behave differently just because a base entry is pruned instead of nonexistent.",
      "commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "created_at" : "2017-01-11T16:07:07Z",
      "diff_hunk" : "@@ -612,7 +612,7 @@ BOOST_AUTO_TEST_CASE(ccoins_access)\n     CheckAccessCoins(ABSENT, VALUE2, VALUE2, FRESH      , FRESH      );\n     CheckAccessCoins(ABSENT, VALUE2, VALUE2, DIRTY      , DIRTY      );\n     CheckAccessCoins(ABSENT, VALUE2, VALUE2, DIRTY|FRESH, DIRTY|FRESH);\n-    CheckAccessCoins(PRUNED, ABSENT, PRUNED, NO_ENTRY   , FRESH      );\n+    CheckAccessCoins(PRUNED, ABSENT, ABSENT, NO_ENTRY   , NO_ENTRY   );",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95610292",
      "id" : 95610292,
      "original_commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "original_position" : 5,
      "path" : "src/test/coins_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 16171111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384",
      "updated_at" : "2017-01-11T16:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95610292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95611169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95611169"
         }
      },
      "body" : "Explanation of this change: Overwriting a non-dirty pruned cache entry with a fresh pruned cache entry now deletes the cache entry instead of leaving behind a dirty pruned entry that will trigger an unnecessary database write later.\r\n",
      "commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "created_at" : "2017-01-11T16:10:36Z",
      "diff_hunk" : "@@ -826,15 +826,15 @@ BOOST_AUTO_TEST_CASE(ccoins_write)\n     CheckWriteCoins(PRUNED, ABSENT, PRUNED, DIRTY      , NO_ENTRY   , DIRTY      );\n     CheckWriteCoins(PRUNED, ABSENT, PRUNED, DIRTY|FRESH, NO_ENTRY   , DIRTY|FRESH);\n     CheckWriteCoins(PRUNED, PRUNED, PRUNED, 0          , DIRTY      , DIRTY      );\n-    CheckWriteCoins(PRUNED, PRUNED, PRUNED, 0          , DIRTY|FRESH, DIRTY      );\n+    CheckWriteCoins(PRUNED, PRUNED, ABSENT, 0          , DIRTY|FRESH, NO_ENTRY   );",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95611169",
      "id" : 95611169,
      "original_commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "original_position" : 14,
      "path" : "src/test/coins_tests.cpp",
      "position" : 14,
      "pull_request_review_id" : 16171111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384",
      "updated_at" : "2017-01-11T16:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95611169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95611376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95611376"
         }
      },
      "body" : "Explanation of this change: Overwriting a dirty pruned fresh cache entry with a nonpruned entry updates the entry without dropping the fresh flag. There's no reason to drop the fresh flag in this case because the flag accurately describes the state of the base view and could prevent unnecessary database writes in the future if the utxo is spent later.\r\n",
      "commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "created_at" : "2017-01-11T16:11:37Z",
      "diff_hunk" : "@@ -826,15 +826,15 @@ BOOST_AUTO_TEST_CASE(ccoins_write)\n     CheckWriteCoins(PRUNED, ABSENT, PRUNED, DIRTY      , NO_ENTRY   , DIRTY      );\n     CheckWriteCoins(PRUNED, ABSENT, PRUNED, DIRTY|FRESH, NO_ENTRY   , DIRTY|FRESH);\n     CheckWriteCoins(PRUNED, PRUNED, PRUNED, 0          , DIRTY      , DIRTY      );\n-    CheckWriteCoins(PRUNED, PRUNED, PRUNED, 0          , DIRTY|FRESH, DIRTY      );\n+    CheckWriteCoins(PRUNED, PRUNED, ABSENT, 0          , DIRTY|FRESH, NO_ENTRY   );\n     CheckWriteCoins(PRUNED, PRUNED, ABSENT, FRESH      , DIRTY      , NO_ENTRY   );\n     CheckWriteCoins(PRUNED, PRUNED, ABSENT, FRESH      , DIRTY|FRESH, NO_ENTRY   );\n     CheckWriteCoins(PRUNED, PRUNED, PRUNED, DIRTY      , DIRTY      , DIRTY      );\n     CheckWriteCoins(PRUNED, PRUNED, PRUNED, DIRTY      , DIRTY|FRESH, DIRTY      );\n     CheckWriteCoins(PRUNED, PRUNED, ABSENT, DIRTY|FRESH, DIRTY      , NO_ENTRY   );\n     CheckWriteCoins(PRUNED, PRUNED, ABSENT, DIRTY|FRESH, DIRTY|FRESH, NO_ENTRY   );\n     CheckWriteCoins(PRUNED, VALUE2, VALUE2, 0          , DIRTY      , DIRTY      );\n-    CheckWriteCoins(PRUNED, VALUE2, VALUE2, 0          , DIRTY|FRESH, DIRTY      );\n+    CheckWriteCoins(PRUNED, VALUE2, VALUE2, 0          , DIRTY|FRESH, DIRTY|FRESH);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#discussion_r95611376",
      "id" : 95611376,
      "original_commit_id" : "c72de76bf803254454a5dc4618bde85d1d992b7d",
      "original_position" : 23,
      "path" : "src/test/coins_tests.cpp",
      "position" : 23,
      "pull_request_review_id" : 16171111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9384",
      "updated_at" : "2017-01-11T16:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95611376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa, this is the PR I mentioned other day. It does move code to the modifier object, but the code could be moved if the modifier object is going away.",
      "created_at" : "2017-01-11T16:26:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#issuecomment-271916098",
      "id" : 271916098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9384",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI3MTkxNjA5OA==",
      "updated_at" : "2017-01-11T16:26:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271916098",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa, I posted a version of your [pertxoutcache](https://github.com/sipa/bitcoin/commits/pertxoutcache) branch rebased on top of this PR here: \r\nhttps://github.com/ryanofsky/bitcoin/commits/pr/pertxoutcache\r\n\r\nIt might be useful to you even if you aren't interested in this PR because it also updates coins_tests to be compatible with your change.\r\n\r\nRelevant commits:\r\n\r\n- 6b547c287e63a48d24547f48ac8108d83dcc7266 `WIP per-txout chainstate` Ã¢ÂÂ rebased version of your main commit on top of this PR.\r\n- 5853aed217e4fd7f4a02790491ef1ea01821a2d5 `Re-enable and fix coins_test.cpp` Ã¢ÂÂ coins_test fixes that you can incorporate (regardless of the code refactoring in this PR)\r\n- 1b8425fce6498be757e663d202be025730f86725 `Fix wallet CCoinsViewCache::GetCoins call` Ã¢ÂÂ fix for compile error in wallet caused by ccoins changes\r\n ",
      "created_at" : "2017-03-01T22:30:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#issuecomment-283492374",
      "id" : 283492374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9384",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDI4MzQ5MjM3NA==",
      "updated_at" : "2017-03-01T22:30:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283492374",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased c72de76bf803254454a5dc4618bde85d1d992b7d -> 2f2d3c856520da6fcdcb82b2330515136be3f028 ([pr/ccoins-cleanup.6](https://github.com/ryanofsky/bitcoin/commits/pr/ccoins-cleanup.6) -> [pr/ccoins-cleanup.7](https://github.com/ryanofsky/bitcoin/commits/pr/ccoins-cleanup.7)) after #10195 merge.",
      "created_at" : "2017-06-02T20:03:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#issuecomment-305895810",
      "id" : 305895810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9384",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDMwNTg5NTgxMA==",
      "updated_at" : "2017-06-02T20:03:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305895810",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-03-06T17:15:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#issuecomment-370856624",
      "id" : 370856624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9384",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM3MDg1NjYyNA==",
      "updated_at" : "2018-03-06T17:15:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370856624",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 219 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2018-07-20T20:30:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9384#issuecomment-406718650",
      "id" : 406718650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9384",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNjcxODY1MA==",
      "updated_at" : "2018-07-20T20:30:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406718650",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
