[
   {
      "body" : "In theory, miners starting a node with an empty mempool would have an incentive to download other memory pools, to avoid missing out on fee-paying transactions after a restart.\r\n\r\nGeneralized over the entire network, it might enable more deterministic transaction lifetime behavior, when coupled with existing mempool-expiration proposals.  On the flip side, there may also be propagated dangers involved in semi-synchronized mempools.\r\n",
      "created_at" : "2014-02-21T16:45:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35748404",
      "id" : 35748404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T16:45:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35748404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "In the past we'd avoided doing this because of it making the immortal transaction problem worse. Right now periodic restarts are the only things that get non-confirming objects out of mempools.",
      "created_at" : "2014-02-21T16:49:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35748839",
      "id" : 35748839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T16:49:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35748839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "does sendrawtransaction have \"currently has connected peers\" as a conditional?",
      "created_at" : "2014-02-21T17:06:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35750614",
      "id" : 35750614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35750614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3308193?v=3",
         "events_url" : "https://api.github.com/users/dajohi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dajohi/followers",
         "following_url" : "https://api.github.com/users/dajohi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dajohi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dajohi",
         "id" : 3308193,
         "login" : "dajohi",
         "organizations_url" : "https://api.github.com/users/dajohi/orgs",
         "received_events_url" : "https://api.github.com/users/dajohi/received_events",
         "repos_url" : "https://api.github.com/users/dajohi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dajohi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dajohi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dajohi"
      }
   },
   {
      "body" : "So, if you have no connected peers (say you disconnected the network cable or your network connection dropped for whatever reason), and you send a transaction via sendrawtransaction, it gets added to the memory pool but not relayed.  There is now a dead transaction that will never be relayed.  Attempting to resubmit the transaction will reject it because it's already in the mempool.",
      "created_at" : "2014-02-21T17:13:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35751326",
      "id" : 35751326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:13:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35751326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "body" : "No. The ResendWalletTransactions() directly hits RelayTransaction().",
      "created_at" : "2014-02-21T17:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35751693",
      "id" : 35751693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35751693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Doesn't `ResendWalletTransactions` only apply to transactions in the wallet though?  It iterates `mapWallet`.\r\n\r\nI'm referring to transactions submitted through RPC via sendrawtransaction from an external source.  I believe that code path only adds the transaction to the wallet through the `SyncTransaction` path if it involves an address the wallet cares about via `AddToWalletIfInvolvingMe`.  So, transactions which are from an external source and don't include an address the wallet currently knows about are added to the mempool and relayed to all connected clients.  When there are no connected clients, won't you end up in the situation described?\r\n\r\nAlso, sendrawtransaction does not require wallet, so it could be used with `-disablewallet` making the above apply to all transactions.",
      "created_at" : "2014-02-21T17:38:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35753699",
      "id" : 35753699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35753699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "body" : "`sendrawtransaction` should really have a way to force rebroadcast of a transaction. Currently it fails when the transaction is already in the mempool, there is no way to force a rebroadcast (and if it's not in the wallet it won't automatically rebroadcast either).",
      "created_at" : "2014-02-21T17:40:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35753869",
      "id" : 35753869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:40:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35753869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Sorry, long dayÃ¢ÂÂ I somehow missed you were asking about sendrawtransaction.  I believe we have an issue someplace for making sendraw able to retransmit. ",
      "created_at" : "2014-02-21T17:45:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35754348",
      "id" : 35754348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:45:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35754348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Question about that, would the design there be for clients to keep sending sendrawtransaction requests, and for each request, invs are sent out even if mempool already has the tx?  Or would mempool need to do what ResendWalletTransactions currently does and keep resending txs submitted via sendrawtransaction at random intervals?",
      "created_at" : "2014-02-21T17:50:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35754921",
      "id" : 35754921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T17:50:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35754921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "https://github.com/bitcoin/bitcoin/issues/2512 appears to be the issue @gmaxwell was referencing.",
      "created_at" : "2014-02-21T18:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35756237",
      "id" : 35756237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-21T18:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35756237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1420313?v=3",
         "events_url" : "https://api.github.com/users/jrick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrick/followers",
         "following_url" : "https://api.github.com/users/jrick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrick",
         "id" : 1420313,
         "login" : "jrick",
         "organizations_url" : "https://api.github.com/users/jrick/orgs",
         "received_events_url" : "https://api.github.com/users/jrick/received_events",
         "repos_url" : "https://api.github.com/users/jrick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrick"
      }
   },
   {
      "body" : "@jrick IMO for using sendrawtransaction without the built-in wallet, the design should be that you handle your own periodic rebroadcasts. This gives the most flexibility, as depending on your application you may or may not want rebroadcasts, and you may want control over when these happen.\r\nEdit: as of #3730 sendrawtransaction allows re-send.\r\n",
      "created_at" : "2014-02-22T08:11:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35797505",
      "id" : 35797505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-22T11:07:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35797505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Closing, as github is not a support center -- even though IMO it was a good question!\r\n\r\nA better place for questions is http://bitcoin.stackexchange.com/",
      "created_at" : "2014-02-24T16:05:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3721#issuecomment-35901644",
      "id" : 35901644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3721",
      "updated_at" : "2014-02-24T16:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35901644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
