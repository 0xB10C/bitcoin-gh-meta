[
   {
      "body" : "ACK the first commit.  I need to trace through the code to fully review the second commit, which touches key validation code.\r\n",
      "created_at" : "2014-02-22T02:05:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-35791656",
      "id" : 35791656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-02-22T02:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35791656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Looks correct to me. The only validation change is replace a \"true\" by state.Orphan (which returns true), and the changes to state itself should be unobservable except for the IsOrphan() method, which the core code doesn't call.",
      "created_at" : "2014-02-22T22:42:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-35817452",
      "id" : 35817452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-02-22T22:42:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35817452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026333"
         }
      },
      "body" : "You could use RPC_TRANSACTION_REJECTED code here, which I introduce in #3730 (maybe rename it to transaction or block rejected...).",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-02-25T07:13:12Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026333",
      "id" : 10026333,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026353"
         }
      },
      "body" : "RPC_INPUT_REJECTED?",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-02-25T07:14:51Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026353",
      "id" : 10026353,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026377"
         }
      },
      "body" : "Input is too general. It should be clear that this concerns transaction/block-level rejection, not just invalid input.\r\nEdit: also it would be useful to be able to get the reject code from the error as well, not just the string message.",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-02-25T07:16:35Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r10026377",
      "id" : 10026377,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10026377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11672491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11672491"
         }
      },
      "body" : "I eventually added three transaction-validation related error codes in #3730, RPC_TRANSACTION_ERROR would be appropriate here:\r\n\r\n    RPC_TRANSACTION_ERROR           = -25, // General error during transaction submission\r\n    RPC_TRANSACTION_REJECTED        = -26, // Transaction was rejected by network rules\r\n    RPC_TRANSACTION_ALREADY_IN_CHAIN= -27, // Transaction already in chain\r\n\r\n",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-04-16T07:23:20Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11672491",
      "id" : 11672491,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11672491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11675464"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11675464"
         }
      },
      "body" : "But there's no reason to think it has anything to do with transactions...",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-04-16T09:13:06Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11675464",
      "id" : 11675464,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11675464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676681"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676681"
         }
      },
      "body" : "Obviously. But you could widen the scope.\r\n",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-04-16T09:45:12Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676681",
      "id" : 11676681,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676808"
         }
      },
      "body" : "So rename it to RPC_ACCEPT_ERROR? Or what?",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-04-16T09:48:47Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676808",
      "id" : 11676808,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676920"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676920"
         }
      },
      "body" : "I'd say RPC_VERIFY_* and change the comments to be \"Transaction or block\"\r\n",
      "commit_id" : "e69a5873e705b132b787415b375c206b1f615bac",
      "created_at" : "2014-04-16T09:52:43Z",
      "diff_hunk" : "@@ -621,7 +621,23 @@ Value submitblock(const Array& params, bool fHelp)\n     CValidationState state;\n     bool fAccepted = ProcessBlock(state, NULL, &pblock);\n     if (!fAccepted)\n-        return \"rejected\"; // TODO: report validation state\n+    {\n+        std::string strRejectReason = state.GetRejectReason();\n+        if (state.IsError())\n+            throw JSONRPCError(RPC_MISC_ERROR, strRejectReason);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#discussion_r11676920",
      "id" : 11676920,
      "original_commit_id" : "39791374187a86a61b3170536b9d9aa359b5557d",
      "original_position" : 8,
      "path" : "src/rpcmining.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3727",
      "updated_at" : "2014-11-03T14:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/11676920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased, with @laanwj 's change implemented.",
      "created_at" : "2014-06-26T14:40:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-47234020",
      "id" : 47234020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-06-26T14:40:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47234020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Untested-but-code-reviewed ACK.\r\n",
      "created_at" : "2014-06-26T15:57:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-47244197",
      "id" : 47244197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-06-26T15:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47244197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p3727_8608fce20ac72af78d1f01f8c10d9dacc2c364ed/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-26T17:45:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-47256482",
      "id" : 47256482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-06-26T17:45:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47256482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Shall we move this along and collect ACKs?  Consensus seems to be we like this one.\r\n",
      "created_at" : "2014-07-29T17:13:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50507370",
      "id" : 50507370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-07-29T17:13:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50507370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Untested ACK",
      "created_at" : "2014-07-30T08:45:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50589113",
      "id" : 50589113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-07-30T08:45:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50589113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This will not work for all types of errors. All ProcessBlock does now is do preliminary checks and store the block in the block database, and remember who we got the block from. Then we invoke ActivateBestChain which connects the new best chain if any, but as it's not about a specific block anymore, it does not return information about errors with the block - they're sent directly as rejections to the peer that gave us the block.\r\n\r\nTo fix this, either plug into InvalidBlockFound, or we need some more generic way of listening for problems with particular blocks (another signal handler?).",
      "created_at" : "2014-07-30T11:08:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50601253",
      "id" : 50601253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-07-30T11:08:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50601253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa In this case, the \"peer that give us the block\" is a RPC client. Can we tie in via that somehow?",
      "created_at" : "2014-07-30T16:33:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50641812",
      "id" : 50641812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-07-30T16:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50641812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "An alternative is not using ProcessBlock, but calling CheckBlock, AcceptBlock and ConnectTip directly. The logic should be trivial as submitblock can just fail in case the block submitted is not an immediate successor that would cause switching immediately.",
      "created_at" : "2014-07-30T21:09:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50680369",
      "id" : 50680369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-07-30T21:09:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50680369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Sounds like a good idea to me.",
      "created_at" : "2014-08-01T09:17:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-50864884",
      "id" : 50864884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-08-01T09:17:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/50864884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Rebased on top of #5106",
      "created_at" : "2014-10-30T02:19:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-61036606",
      "id" : 61036606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-10-30T02:19:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61036606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I believe this is now simple enough to be quickly re-ACK'd?",
      "created_at" : "2014-11-03T11:30:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-61465894",
      "id" : 61465894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-11-03T11:30:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61465894",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2014-11-03T11:49:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3727#issuecomment-61467579",
      "id" : 61467579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3727",
      "updated_at" : "2014-11-03T11:49:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61467579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
