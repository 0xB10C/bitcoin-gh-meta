[
   {
      "body" : "Needs a rebase.",
      "created_at" : "2017-03-22T22:57:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-288565442",
      "id" : 288565442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-03-22T22:57:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/288565442",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "rebased",
      "created_at" : "2017-04-12T14:00:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293586052",
      "id" : 293586052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-04-12T14:00:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293586052",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Restructuring this sounds good, but now that we don't send getdata's in response to inv's anymore, perhaps this test should be rewritten to use headers for announcements instead?",
      "created_at" : "2017-04-12T21:19:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293710921",
      "id" : 293710921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-04-12T21:19:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293710921",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "You're correct. On closer inspection, this test case is actually testing nothing. The only thing it asserts on is that the node hasn't sent us too many getdata requests, but since nodes no longer sends getdata messages in response to block invs, it's just testing that 0 < 256:\r\n\r\n```\r\n./maxblocksinflight.py\r\n2017-04-12 22:07:31.285000 TestFramework (INFO): Initializing test directory /tmp/user/1000/testk493pd32/12847\r\n2017-04-12 22:07:31.563000 TestFramework.mininode (INFO): Connecting to Bitcoin Node: 127.0.0.1:13956\r\n2017-04-12 22:07:33.574000 TestFramework (INFO): Round 0: success (total requests: 0)\r\n2017-04-12 22:07:35.577000 TestFramework (INFO): Round 1: success (total requests: 0)\r\n2017-04-12 22:07:37.582000 TestFramework (INFO): Round 2: success (total requests: 0)\r\n2017-04-12 22:07:39.611000 TestFramework (INFO): Round 3: success (total requests: 0)\r\n2017-04-12 22:07:39.611000 TestFramework (INFO): Stopping nodes\r\n```\r\n\r\nthe headers-first sync'ing is covered pretty well by sendheaders.py. Should we just retire this test case?",
      "created_at" : "2017-04-12T23:12:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293732948",
      "id" : 293732948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-04-12T23:12:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293732948",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Well, I'd say that if it's not too much work, we should just fix this test case to test the maxblocksinflight behavior correctly.  Ie, announce 17 or more block headers, and verify we only get 16 getdata requests.",
      "created_at" : "2017-04-13T00:29:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293744099",
      "id" : 293744099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-04-13T00:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293744099",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "This line: https://github.com/bitcoin/bitcoin/blob/70f6f56e9dde0d0eb1a51e70c051b8fa3ba9535f/test/functional/sendheaders.py#L517 and the block below test that when there are more than 16 headers messages sent, the peer will only send get_data for 16 of them.\r\n\r\nI think that covers the maxblocksinflight test, but let me know if you think it needs expanding.",
      "created_at" : "2017-04-13T13:15:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293891932",
      "id" : 293891932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10023",
      "updated_at" : "2017-04-13T13:15:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/293891932",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
