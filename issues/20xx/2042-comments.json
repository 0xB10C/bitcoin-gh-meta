[
   {
      "body" : "Need rebase already?!",
      "created_at" : "2012-11-27T07:30:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#issuecomment-10748502",
      "id" : 10748502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
      "updated_at" : "2012-11-27T07:30:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10748502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Oops yeah, I'll fix that in a bit. (I built it on top of ultraprune's branch)",
      "created_at" : "2012-11-27T12:00:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#issuecomment-10755255",
      "id" : 10755255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
      "updated_at" : "2012-11-27T12:00:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10755255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4 for test log.\n\nThis pull does not merge cleanly onto current master",
      "created_at" : "2012-11-27T17:48:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#issuecomment-10768449",
      "id" : 10768449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
      "updated_at" : "2012-11-27T17:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10768449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2241577"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2241577"
         }
      },
      "body" : "If opening the block file fails, there is something seriously wrong, and I think we should raise a fatal error or so.",
      "commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "created_at" : "2012-11-27T20:40:44Z",
      "diff_hunk" : "@@ -1510,10 +1510,14 @@ void static FlushBlockFile()\n     posOld.nPos = 0;\n \n     FILE *fileOld = OpenBlockFile(posOld);\n-    FileCommit(fileOld);\n-    fclose(fileOld);\n+    if (fileOld)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2241577",
      "id" : 2241577,
      "original_commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042",
      "updated_at" : "2012-11-27T20:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2241577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2241591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2241591"
         }
      },
      "body" : "Importing is not read-only. Only reindexing is.",
      "commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "created_at" : "2012-11-27T20:41:37Z",
      "diff_hunk" : "@@ -1721,7 +1725,9 @@ bool SetBestChain(CBlockIndex* pindexNew)\n     // Make sure it's successfully written to disk before changing memory structure\n     bool fIsInitialDownload = IsInitialBlockDownload();\n     if (!fIsInitialDownload || view.GetCacheSize()>5000) {\n-        FlushBlockFile();\n+        if (!fImporting)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2241591",
      "id" : 2241591,
      "original_commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "original_position" : 22,
      "path" : "src/main.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042",
      "updated_at" : "2012-11-27T20:41:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2241591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2242794"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2242794"
         }
      },
      "body" : "Yes, that should be the way to take here.",
      "commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "created_at" : "2012-11-27T21:54:10Z",
      "diff_hunk" : "@@ -1510,10 +1510,14 @@ void static FlushBlockFile()\n     posOld.nPos = 0;\n \n     FILE *fileOld = OpenBlockFile(posOld);\n-    FileCommit(fileOld);\n-    fclose(fileOld);\n+    if (fileOld)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2242794",
      "id" : 2242794,
      "original_commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "original_position" : 6,
      "path" : "src/main.cpp",
      "position" : 6,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042",
      "updated_at" : "2012-11-27T21:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2242794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2283426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2283426"
         }
      },
      "body" : "Actually, the only sane way is keeping a fBlockDirty flag or so, setting it to true when a block is written, and then inside FlushBlockFile only sync the block file part if that flag is true (the undo file part should always be synced).",
      "commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "created_at" : "2012-11-30T22:25:35Z",
      "diff_hunk" : "@@ -1721,7 +1725,9 @@ bool SetBestChain(CBlockIndex* pindexNew)\n     // Make sure it's successfully written to disk before changing memory structure\n     bool fIsInitialDownload = IsInitialBlockDownload();\n     if (!fIsInitialDownload || view.GetCacheSize()>5000) {\n-        FlushBlockFile();\n+        if (!fImporting)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#discussion_r2283426",
      "id" : 2283426,
      "original_commit_id" : "ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4",
      "original_position" : 22,
      "path" : "src/main.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2042",
      "updated_at" : "2012-11-30T22:25:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2283426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/ec2a8eedfc8fd37f340bc6a434d64c87eae0b5b4 for test log.\n\nThis pull does not merge cleanly onto current master",
      "created_at" : "2013-01-24T16:41:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#issuecomment-12660121",
      "id" : 12660121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
      "updated_at" : "2013-01-24T16:41:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12660121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "I think I was asleep when I wrote this. The fReadOnly bug is real, but isn't fixed correctly in this case and only matters for read-only blk*.dat files, which have other problems not addressed herein. When/if I take the time to correctly get read-only blk files working, I'll open a new pullreq..",
      "created_at" : "2013-01-30T16:54:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2042#issuecomment-12899604",
      "id" : 12899604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2042",
      "updated_at" : "2013-01-30T16:54:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12899604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
