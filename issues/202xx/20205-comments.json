[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19602 (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-21T01:20:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-713231280",
      "id" : 713231280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzIzMTI4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-01T20:32:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713231280",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509789292"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509789292"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Assert it's currently null? (set only once)",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-21T23:18:37Z",
      "diff_hunk" : "@@ -4581,3 +4581,20 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    wallet_id = id;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509789292",
      "id" : 509789292,
      "line" : 4588,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc4OTI5Mg==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 4588,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 8,
      "pull_request_review_id" : 514255722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509789292",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509792334"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509792334"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Assert it's not null.",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-21T23:27:40Z",
      "diff_hunk" : "@@ -4581,3 +4581,20 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    wallet_id = id;\n+}\n+\n+const uint160& CWallet::GetWalletID()\n+{\n+    return wallet_id;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509792334",
      "id" : 509792334,
      "line" : 4594,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc5MjMzNA==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 4594,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 14,
      "pull_request_review_id" : 514255722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509792334",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509792913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509792913"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this is in the wrong place. From a quick look `CWallet::LoadWallet` seems a better place, like:\r\n\r\n```cpp\r\n    if (wallet_id.IsNull()) {\r\n        if (database->Format() == \"dbd\") {\r\n             // use BDB ID\r\n        } else {\r\n             // generate random id\r\n        }\r\n        // persist\r\n    }\r\n    return DBErrors::LOAD_OK;\r\n}\r\n```\r\nThis would allow you to drop `EnsureWalletIDWithDB`. Only bad thing here is to compare agains \"bdb\". Would be better to add  `Format()` and `FormatString()`.",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-21T23:29:31Z",
      "diff_hunk" : "@@ -363,6 +364,13 @@ void BerkeleyDatabase::Open()\n \n             m_db.reset(pdb_temp.release());\n \n+            auto batch = MakeBatch();\n+            if (!batch->Exists(std::string(\"walletid\"))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509792913",
      "id" : 509792913,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc5MjkxMw==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 368,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/bdb.cpp",
      "position" : null,
      "pull_request_review_id" : 514255722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509792913",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509793362"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509793362"
         }
      },
      "author_association" : "MEMBER",
      "body" : "const.",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-21T23:30:53Z",
      "diff_hunk" : "@@ -1281,6 +1283,13 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     //! Add a descriptor to the wallet, return a ScriptPubKeyMan & associated output type\n     ScriptPubKeyMan* AddWalletDescriptor(WalletDescriptor& desc, const FlatSigningProvider& signing_provider, const std::string& label);\n+\n+    //! Set the wallet ID\n+    void LoadWalletID(const uint160& id);\n+    //! Get the wallet iD\n+    const uint160& GetWalletID();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509793362",
      "id" : 509793362,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTc5MzM2Mg==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 1290,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 514255722,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509793362",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can't we just set the id for sqlite wallets on creation? Or you want to handle wallets already created?\r\n \r\nThis needs to handle wallets already created.\r\n\r\n> Edit: do we want to modify old wallets? `CWallet` could return BDB Id on the fly without persisting it. Later we would just persist it if the wallet is converted.\r\n\r\nIt should be persisted as a wallet record. The BDB ID is purely because existing PRs use it as a wallet ID. But proper support for a wallet id means it needs to be a record.\r\n\r\nAlso, a record means that a wallet migrated with `createfromdump` will have the ID as a record correctly without having that command know about this stuff.",
      "created_at" : "2020-10-21T23:43:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-713997734",
      "id" : 713997734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzk5NzczNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-21T23:43:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713997734",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 reasonable answers.",
      "created_at" : "2020-10-21T23:45:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-714002031",
      "id" : 714002031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDAwMjAzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-21T23:45:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714002031",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841147"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T02:24:23Z",
      "diff_hunk" : "@@ -4581,3 +4581,20 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    wallet_id = id;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841147",
      "id" : 509841147,
      "in_reply_to_id" : 509789292,
      "line" : 4588,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg0MTE0Nw==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 4588,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 8,
      "pull_request_review_id" : 514315007,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841147",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841162"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T02:24:27Z",
      "diff_hunk" : "@@ -4581,3 +4581,20 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    wallet_id = id;\n+}\n+\n+const uint160& CWallet::GetWalletID()\n+{\n+    return wallet_id;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841162",
      "id" : 509841162,
      "in_reply_to_id" : 509792334,
      "line" : 4594,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg0MTE2Mg==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 4594,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 14,
      "pull_request_review_id" : 514315032,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841162",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841235"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've moved all of the logic into `EnsureWalletIDWithDB`.",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T02:24:43Z",
      "diff_hunk" : "@@ -363,6 +364,13 @@ void BerkeleyDatabase::Open()\n \n             m_db.reset(pdb_temp.release());\n \n+            auto batch = MakeBatch();\n+            if (!batch->Exists(std::string(\"walletid\"))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509841235",
      "id" : 509841235,
      "in_reply_to_id" : 509792913,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg0MTIzNQ==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 368,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/bdb.cpp",
      "position" : null,
      "pull_request_review_id" : 514315112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509841235",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509842850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509842850"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T02:30:38Z",
      "diff_hunk" : "@@ -1281,6 +1283,13 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     //! Add a descriptor to the wallet, return a ScriptPubKeyMan & associated output type\n     ScriptPubKeyMan* AddWalletDescriptor(WalletDescriptor& desc, const FlatSigningProvider& signing_provider, const std::string& label);\n+\n+    //! Set the wallet ID\n+    void LoadWalletID(const uint160& id);\n+    //! Get the wallet iD\n+    const uint160& GetWalletID();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r509842850",
      "id" : 509842850,
      "in_reply_to_id" : 509793362,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTg0Mjg1MA==",
      "original_commit_id" : "545c362e78b09f76ab5584750022112b870cc394",
      "original_line" : 1290,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 514316963,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/509842850",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510123277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510123277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a reason to limit it to 160-bit? Seems like to future-proof, 256-bit ids would be better. And even if we end up only generating 160-bit ids now, it would be nice to load longer ones so we don't have to break compatibility if we ever generate more...",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T12:33:55Z",
      "diff_hunk" : "@@ -4581,3 +4581,31 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510123277",
      "id" : 510123277,
      "line" : 4585,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDEyMzI3Nw==",
      "original_commit_id" : "234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "original_line" : 4585,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 514674012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510123277",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510124320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510124320"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe an assert that `wallet_id.size() == sizeof(bdb_db->env->m_fileids[bdb_db->strFile].value)`? (or use the latter and assert that it's `<= wallet_id.size()`)",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T12:35:32Z",
      "diff_hunk" : "@@ -4581,3 +4581,31 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    assert(wallet_id.IsNull());\n+    wallet_id = id;\n+}\n+\n+const uint160& CWallet::GetWalletID() const\n+{\n+    assert(!wallet_id.IsNull());\n+    return wallet_id;\n+}\n+\n+void CWallet::EnsureWalletIDWithDB(WalletBatch& batch)\n+{\n+    if (!wallet_id.IsNull()) return;\n+\n+    // No ID, so add one\n+    auto bdb_db = dynamic_cast<BerkeleyDatabase*>(database.get());\n+    if (bdb_db) {\n+        // For BDB, use the BDB unique ID\n+        memcpy(wallet_id.data(), bdb_db->env->m_fileids[bdb_db->strFile].value, wallet_id.size());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510124320",
      "id" : 510124320,
      "line" : 4606,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDEyNDMyMA==",
      "original_commit_id" : "234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "original_line" : 4606,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 26,
      "pull_request_review_id" : 514674012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510124320",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "created_at" : "2020-10-22T12:42:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-714466910",
      "id" : 714466910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDQ2NjkxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T12:42:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714466910",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> For compatibility, wallets using BDB will use the BDB generated id\r\n\r\n@achow101 compatibility with what?",
      "created_at" : "2020-10-22T12:52:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-714472792",
      "id" : 714472792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDQ3Mjc5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T12:52:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714472792",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510269725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510269725"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The current BDB ID is 160 bits long. I don't think limiting to \"just\" 160 bits will be a problem. Why would we need to load longer ones?",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T15:48:04Z",
      "diff_hunk" : "@@ -4581,3 +4581,31 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510269725",
      "id" : 510269725,
      "in_reply_to_id" : 510123277,
      "line" : 4585,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI2OTcyNQ==",
      "original_commit_id" : "234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "original_line" : 4585,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 514873794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510269725",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510309976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510309976"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T16:46:12Z",
      "diff_hunk" : "@@ -4581,3 +4581,31 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)\n+{\n+    assert(wallet_id.IsNull());\n+    wallet_id = id;\n+}\n+\n+const uint160& CWallet::GetWalletID() const\n+{\n+    assert(!wallet_id.IsNull());\n+    return wallet_id;\n+}\n+\n+void CWallet::EnsureWalletIDWithDB(WalletBatch& batch)\n+{\n+    if (!wallet_id.IsNull()) return;\n+\n+    // No ID, so add one\n+    auto bdb_db = dynamic_cast<BerkeleyDatabase*>(database.get());\n+    if (bdb_db) {\n+        // For BDB, use the BDB unique ID\n+        memcpy(wallet_id.data(), bdb_db->env->m_fileids[bdb_db->strFile].value, wallet_id.size());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510309976",
      "id" : 510309976,
      "in_reply_to_id" : 510124320,
      "line" : 4606,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMwOTk3Ng==",
      "original_commit_id" : "234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "original_line" : 4606,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 26,
      "pull_request_review_id" : 514926604,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T16:46:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510309976",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag With existing wallets. Right now, the only unique identifier they have is the BDB database id.",
      "created_at" : "2020-10-22T17:15:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-714638078",
      "id" : 714638078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDYzODA3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T17:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714638078",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510328656"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510328656"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably 160-bit is enough, but I can't predict the future. :)",
      "commit_id" : "4b7b2532e42f10b8f695d3800bebff88b586550c",
      "created_at" : "2020-10-22T17:16:37Z",
      "diff_hunk" : "@@ -4581,3 +4581,31 @@ ScriptPubKeyMan* CWallet::AddWalletDescriptor(WalletDescriptor& desc, const Flat\n \n     return ret;\n }\n+\n+void CWallet::LoadWalletID(const uint160& id)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#discussion_r510328656",
      "id" : 510328656,
      "in_reply_to_id" : 510123277,
      "line" : 4585,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMyODY1Ng==",
      "original_commit_id" : "234e4678c774aa0021a45810acd9a0f3f5bf3b64",
      "original_line" : 4585,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 514951710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20205",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-22T17:16:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510328656",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reiterate weak concept NACK see https://github.com/bitcoin/bitcoin/pull/20204#issuecomment-713069277.\r\n\r\nThis change is a bad change. It's a perfect example of dumb, unreasoning, cargo-cult design (there is no design discussion here) copying a poorly thought BDB feature that directly lead to data corruption previously in #11429 and is a trap and footgun for the future. Merging this change now will encourage adding fragile assumptions to code (uniqueness of ids), and adding pointless and confusing restrictions around wallet usage (disallowing basic file operations like copies).\r\n\r\nIt's possible to put thought into design designs that affect data format. For example, There are explicit reasons subversion uses unique ids and git doesn't use them. There are advantages and disadvantages to different approaches.\r\n\r\nIn this case, if there is any reason to add wallets id later (maybe adding a rename detection heuristic, maybe trying to help out forensics or recovery tools), nothing prevents wallet ids from being added later. It seems the main things gained now by merging this PR would be:\r\n\r\n- Extra code that no usage or test coverage\r\n- Foot gun and expectation of future foot surgery",
      "created_at" : "2020-10-26T13:26:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-716544104",
      "id" : 716544104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjU0NDEwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-26T13:26:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716544104",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As this is controversial and needs more discussion, I'm removing it from the 0.21 milestone. From discussion on IRC I get the idea this is a \"nice to have\" for some people so I don't agree there is any hurry on this.",
      "created_at" : "2020-10-29T10:43:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718632332",
      "id" : 718632332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODYzMjMzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T10:43:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718632332",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is a regression bugfix and a blocker for sqlite wallets. 0.21 should not be released without it.",
      "created_at" : "2020-10-29T12:54:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718733269",
      "id" : 718733269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODczMzI2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T12:54:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718733269",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This is a regression bugfix and a blocker for sqlite wallets. 0.21 should not be released without it.\r\n\r\nCan you give an example of something that would be broken, or a feature that would be more difficult to implement if this is not included in 0.21? This would be news to me and I don't know what it is referring to.\r\n\r\nA UUID field (or any field that can ignored by previous releases) can be added at any time. Wallet code is intentionally written to ignore unrecognized rows and non-mandatory flags so things like this can be added.\r\n\r\nWe can disagree about whether features that depend on UUIDs are ideal or if there are better alternatives. But even if they are ideal and perfect in every way, there's no reason the UUID fields can't be added at the same time as features which use them.",
      "created_at" : "2020-10-29T13:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718741348",
      "id" : 718741348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODc0MTM0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T13:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718741348",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Adding a UUID later would mean backups are missing it, and restoring from a backup could break features relying on it. Even if we ignore these risks, the UUID is itself a feature wallets have always had, that is now missing in sqlite wallets.\r\n\r\nAdding it back now has literally zero downsides. Absolute worst case, we could just not use it.\r\n\r\nFurthermore, not having it now also means features can't use it until those features are merged into Core, without risk of their wallet format diverging. Considering Core's history with refusing to be compatible with other software, that isn't a good risk to take, so I would actually have to disable such features in Knots when a sqlite wallet is used.",
      "created_at" : "2020-10-29T13:30:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718753585",
      "id" : 718753585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODc1MzU4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T13:30:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718753585",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Adding a UUID later would mean backups are missing it, and restoring from a backup could break features relying on it.\r\n\r\nThis isn't true. Unrecognized rows are not stripped from backups. The other comments about core and knots also do not seem to make sense. We shouldn't go back and forth on this endlessly, but I think the more specific and detailed you can be about problems you are concerned about, the more quickly we will be able to see the right thing to do.\r\n\r\n",
      "created_at" : "2020-10-29T13:39:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718758891",
      "id" : 718758891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODc1ODg5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T13:39:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718758891",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The UUID isn't simply unrecognised, it's ENTIRELY MISSING in sqlite wallets right now.",
      "created_at" : "2020-10-29T15:01:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718811749",
      "id" : 718811749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODgxMTc0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T15:01:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718811749",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The UUID isn't simply unrecognised, it's ENTIRELY MISSING in sqlite wallets right now.\r\n\r\nI know this. You know this. What I don't know is what specific problem is fixed by merging this PR now that would not be fixed by merging it later (or perhaps by never relying on uuids at all, but I don't want to broaden the topic if it is not necessary). I'm encouraging you to describe an example in some level of detail so we can actually think about it.",
      "created_at" : "2020-10-29T15:23:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718826353",
      "id" : 718826353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODgyNjM1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T15:23:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718826353",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Merging it later won't retroactively ensure wallets created by 0.21 and then copied share a common UUID (which is kinda the whole point of a UUID).\r\n\r\nMerging it later also means features using the UUID won't work on sqlite wallets in the meantime.",
      "created_at" : "2020-10-29T16:10:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-718857965",
      "id" : 718857965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODg1Nzk2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T16:10:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718857965",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removed the 0.21 milestone again. This seems indeed be too controversial for a last minute 0.21 merge.",
      "created_at" : "2020-11-05T19:12:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-722583306",
      "id" : 722583306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjU4MzMwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T19:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722583306",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "* \"It's a feature of existing wallets, new wallets should have it too\" is not a good argument. It's a new wallet type, it will support whatever features we declare it to have.\r\n* Wallet IDs were originally introduced in BDB because of database environments being unable to open the same database multiple times. Restricting the ability to open multiple copies simultaneously is a necessity here, not a feature. There is no point in maintaining it if not required by the database layer.\r\n* However, I believe there are reasons why wallet ids are useful, independent of the argument above: Bitcoin Core wallets are intended to have a linear history. While we take lots of effort to make sure using a backup is won't cause monetary loss, this isn't perfect and doesn't apply to all data in the wallet. Adding address labels, which may matter for accounting reasons, in one copy won't make them show up in another. Creating two transactions from two versions of the same wallet ~simultaneously (or while one hasn't caught up with the chain) may result in unintentionally creating conflicting transactions. Because of that, I think it makes conceptual sense to have an ID, and use that to *warn* (not reject) when opening multiple copies.\r\n* I don't think the above is urgent, or necessary, and I think it should be treated as a new feature. It's trivial to add IDs though, and having it earlier means features depending on it can be introduced later without needing a new backup.\r\n\r\nConcept ACK, and I'm ok with having it in 0.21, but adding wallet IDs whenever a feature actually using them is introduced is fine by me as well.",
      "created_at" : "2020-11-05T19:31:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-722593240",
      "id" : 722593240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjU5MzI0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T19:31:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722593240",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Given that descriptor (and thus sqlite) wallets are considered experimental, I think it's find to miss the id for 0.21. I think it's reasonable to ask users make a new backup when we no longer consider descriptor wallets to be experimental, and we can introduce the wallet id before that time.",
      "created_at" : "2020-11-05T19:40:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-722600186",
      "id" : 722600186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjYwMDE4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T19:40:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722600186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-722593240\r\n\r\n> Because of that, I think it makes conceptual sense to have an ID, and use that to warn (not reject) when opening multiple copies.\r\n\r\nWithout knowing who the warning would be for or what it would say, it doesn't seem clear to me how it would be useful. But assuming it is useful, wouldn't the warning be more robust if it checked directly for duplicate seeds and descriptors, instead of going indirectly through this PR, adding a new random number to sqlite databases and checking for uniqueness based on that?\r\n\r\nI still do stand by my NACK from https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-716544104, and I don't think this code should be merged until there is an actual, real life, properly designed feature which depends on it. I think it is possible to build useful heuristics (usage warnings, rename detection) with UUIDs. I also think it's possible to build misfeatures that make software painful to work with (and even cause data corruption, see #11429) because of bad and fragile assumptions about uniqueness. So adding this dead code to the wallet which complicates the already messy database layer and exposes a new API which is asking to be misused does not seem like a win to me right now. The harms outweigh the benefits currently, because there aren't benefits currently.",
      "created_at" : "2020-12-15T19:46:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-745524888",
      "id" : 745524888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NTUyNDg4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-15T19:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745524888",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky There already is, why are you ignoring it? #19463",
      "created_at" : "2020-12-15T19:59:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-745532320",
      "id" : 745532320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NTUzMjMyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-15T19:59:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745532320",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky There already is, why are you ignoring it? #19463\r\n\r\nI'm aware and not ignoring it. If #19463 is close to being merged and it depends on this PR, then this PR should be merged. But this isn't the case now. #19463 isn't close to being merged, and I don't think it makes sense for #19463 to depend on this PR. I'm just objecting to this PR on its merits, and its harms and benefits right now.",
      "created_at" : "2020-12-15T20:24:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20205#issuecomment-745545878",
      "id" : 745545878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20205",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NTU0NTg3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-15T20:24:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745545878",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
