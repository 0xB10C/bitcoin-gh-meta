[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK! Removing unnecessary interface functions, making constant values `const`, reducing mutex locking and avoiding casts between int and float types are all excellent improvements :slightly_smiling_face: ",
      "created_at" : "2020-10-22T17:52:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#issuecomment-714658194",
      "id" : 714658194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDY1ODE5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T17:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714658194",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nVery nice first-time contribution @ellemouton! Warm welcome as a contributor! :)",
      "created_at" : "2020-10-22T18:46:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#issuecomment-714689077",
      "id" : 714689077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDY4OTA3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T18:46:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714689077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18766 (Disable fee estimation in blocksonly mode (by removing the fee estimates global) by darosior)\n* #18017 (txmempool: split epoch logic into class by ajtowns)\n* #17786 (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n* #10443 (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-22T22:34:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#issuecomment-714799798",
      "id" : 714799798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDc5OTc5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T22:34:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714799798",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510573169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510573169"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I understand this behavior isn't being changed but... default ratio is 0 or 1 (never or always?), unless user gives a value? :O",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T03:26:38Z",
      "diff_hunk" : "@@ -1389,16 +1389,9 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     assert(!node.connman);\n     node.connman = MakeUnique<CConnman>(GetRand(std::numeric_limits<uint64_t>::max()), GetRand(std::numeric_limits<uint64_t>::max()), args.GetBoolArg(\"-networkactive\", true));\n \n-    // Make mempool generally available in the node context. For example the connection manager, wallet, or RPC threads,\n-    // which are all started after this, may use it from the node context.\n     assert(!node.mempool);\n-    node.mempool = MakeUnique<CTxMemPool>(&::feeEstimator);\n-    if (node.mempool) {\n-        int ratio = std::min<int>(std::max<int>(args.GetArg(\"-checkmempool\", chainparams.DefaultConsistencyChecks() ? 1 : 0), 0), 1000000);\n-        if (ratio != 0) {\n-            node.mempool->setSanityCheck(1.0 / ratio);\n-        }\n-    }\n+    int check_ratio = std::min<int>(std::max<int>(args.GetArg(\"-checkmempool\", chainparams.DefaultConsistencyChecks() ? 1 : 0), 0), 1000000);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510573169",
      "id" : 510573169,
      "line" : 1393,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU3MzE2OQ==",
      "original_commit_id" : "a62501cc787516f4b708411c58c6ceb6eb4b30d3",
      "original_line" : 1393,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 14,
      "pull_request_review_id" : 515252235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510573169",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510580707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510580707"
         }
      },
      "author_association" : "NONE",
      "body" : "Indeed! The default for all chains is 0 except for regtest which has a default of 1.",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T04:00:53Z",
      "diff_hunk" : "@@ -1389,16 +1389,9 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     assert(!node.connman);\n     node.connman = MakeUnique<CConnman>(GetRand(std::numeric_limits<uint64_t>::max()), GetRand(std::numeric_limits<uint64_t>::max()), args.GetBoolArg(\"-networkactive\", true));\n \n-    // Make mempool generally available in the node context. For example the connection manager, wallet, or RPC threads,\n-    // which are all started after this, may use it from the node context.\n     assert(!node.mempool);\n-    node.mempool = MakeUnique<CTxMemPool>(&::feeEstimator);\n-    if (node.mempool) {\n-        int ratio = std::min<int>(std::max<int>(args.GetArg(\"-checkmempool\", chainparams.DefaultConsistencyChecks() ? 1 : 0), 0), 1000000);\n-        if (ratio != 0) {\n-            node.mempool->setSanityCheck(1.0 / ratio);\n-        }\n-    }\n+    int check_ratio = std::min<int>(std::max<int>(args.GetArg(\"-checkmempool\", chainparams.DefaultConsistencyChecks() ? 1 : 0), 0), 1000000);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510580707",
      "id" : 510580707,
      "in_reply_to_id" : 510573169,
      "line" : 1393,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU4MDcwNw==",
      "original_commit_id" : "a62501cc787516f4b708411c58c6ceb6eb4b30d3",
      "original_line" : 1393,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 14,
      "pull_request_review_id" : 515260623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510580707",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/25280249?v=4",
         "events_url" : "https://api.github.com/users/ellemouton/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ellemouton/followers",
         "following_url" : "https://api.github.com/users/ellemouton/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ellemouton/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ellemouton",
         "id" : 25280249,
         "login" : "ellemouton",
         "node_id" : "MDQ6VXNlcjI1MjgwMjQ5",
         "organizations_url" : "https://api.github.com/users/ellemouton/orgs",
         "received_events_url" : "https://api.github.com/users/ellemouton/received_events",
         "repos_url" : "https://api.github.com/users/ellemouton/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ellemouton/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ellemouton/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ellemouton"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510707274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510707274"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You can join the `if (m_check_ratio == 0)` with the `return;` line in the first commit instead of the second commit.",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T08:04:54Z",
      "diff_hunk" : "@@ -619,13 +614,12 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n-    if (nCheckFrequency == 0)\n-        return;\n+    if (m_check_ratio == 0) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510707274",
      "id" : 510707274,
      "line" : 617,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcwNzI3NA==",
      "original_commit_id" : "c65a5938177cdbc975a983873495d38392fd82d1",
      "original_line" : 617,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 34,
      "pull_request_review_id" : 515433619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510707274",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510707397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510707397"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This can be joined with the line below (in the first commit)",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T08:05:07Z",
      "diff_hunk" : "@@ -619,13 +614,12 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n-    if (nCheckFrequency == 0)\n-        return;\n+    if (m_check_ratio == 0) return;\n \n-    if (GetRand(std::numeric_limits<uint32_t>::max()) >= nCheckFrequency)\n+    if (GetRand(m_check_ratio) >= 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510707397",
      "id" : 510707397,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcwNzM5Nw==",
      "original_commit_id" : "c65a5938177cdbc975a983873495d38392fd82d1",
      "original_line" : 619,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 515433766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510707397",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510843327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510843327"
         }
      },
      "author_association" : "NONE",
      "body" : "updated ð ",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T12:18:41Z",
      "diff_hunk" : "@@ -619,13 +614,12 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n-    if (nCheckFrequency == 0)\n-        return;\n+    if (m_check_ratio == 0) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510843327",
      "id" : 510843327,
      "in_reply_to_id" : 510707274,
      "line" : 617,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0MzMyNw==",
      "original_commit_id" : "c65a5938177cdbc975a983873495d38392fd82d1",
      "original_line" : 617,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 34,
      "pull_request_review_id" : 515612163,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510843327",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/25280249?v=4",
         "events_url" : "https://api.github.com/users/ellemouton/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ellemouton/followers",
         "following_url" : "https://api.github.com/users/ellemouton/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ellemouton/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ellemouton",
         "id" : 25280249,
         "login" : "ellemouton",
         "node_id" : "MDQ6VXNlcjI1MjgwMjQ5",
         "organizations_url" : "https://api.github.com/users/ellemouton/orgs",
         "received_events_url" : "https://api.github.com/users/ellemouton/received_events",
         "repos_url" : "https://api.github.com/users/ellemouton/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ellemouton/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ellemouton/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ellemouton"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510843378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510843378"
         }
      },
      "author_association" : "NONE",
      "body" : "updated ð ",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T12:18:48Z",
      "diff_hunk" : "@@ -619,13 +614,12 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n-    if (nCheckFrequency == 0)\n-        return;\n+    if (m_check_ratio == 0) return;\n \n-    if (GetRand(std::numeric_limits<uint32_t>::max()) >= nCheckFrequency)\n+    if (GetRand(m_check_ratio) >= 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510843378",
      "id" : 510843378,
      "in_reply_to_id" : 510707397,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0MzM3OA==",
      "original_commit_id" : "c65a5938177cdbc975a983873495d38392fd82d1",
      "original_line" : 619,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 515612254,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510843378",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/25280249?v=4",
         "events_url" : "https://api.github.com/users/ellemouton/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ellemouton/followers",
         "following_url" : "https://api.github.com/users/ellemouton/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ellemouton/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ellemouton",
         "id" : 25280249,
         "login" : "ellemouton",
         "node_id" : "MDQ6VXNlcjI1MjgwMjQ5",
         "organizations_url" : "https://api.github.com/users/ellemouton/orgs",
         "received_events_url" : "https://api.github.com/users/ellemouton/received_events",
         "repos_url" : "https://api.github.com/users/ellemouton/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ellemouton/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ellemouton/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ellemouton"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510851630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510851630"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops. You've added this back in your rebase.",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T12:34:17Z",
      "diff_hunk" : "@@ -620,12 +615,11 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n     LOCK(cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510851630",
      "id" : 510851630,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg1MTYzMA==",
      "original_commit_id" : "70768e1418b4050ad0b534850f999860a8b4e6be",
      "original_line" : 617,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 515623310,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510851630",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510853144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510853144"
         }
      },
      "author_association" : "NONE",
      "body" : "Thanks for catching that! Will fix ð ",
      "commit_id" : "f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T12:37:02Z",
      "diff_hunk" : "@@ -620,12 +615,11 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n     LOCK(cs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#discussion_r510853144",
      "id" : 510853144,
      "in_reply_to_id" : 510851630,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg1MzE0NA==",
      "original_commit_id" : "70768e1418b4050ad0b534850f999860a8b4e6be",
      "original_line" : 617,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 515625272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-23T12:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/510853144",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/25280249?v=4",
         "events_url" : "https://api.github.com/users/ellemouton/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ellemouton/followers",
         "following_url" : "https://api.github.com/users/ellemouton/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ellemouton/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ellemouton",
         "id" : 25280249,
         "login" : "ellemouton",
         "node_id" : "MDQ6VXNlcjI1MjgwMjQ5",
         "organizations_url" : "https://api.github.com/users/ellemouton/orgs",
         "received_events_url" : "https://api.github.com/users/ellemouton/received_events",
         "repos_url" : "https://api.github.com/users/ellemouton/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ellemouton/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ellemouton/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ellemouton"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK f15e780b9e57554c723bc02aa41150ecf3e3a8c9",
      "created_at" : "2020-10-23T12:43:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#issuecomment-715317842",
      "id" : 715317842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNTMxNzg0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-23T12:43:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/715317842",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\nWelcome as a new contributor @ellemouton, very nice first PR! ð \r\n\r\nIt would be very interesting on why the original version of the mempool sanity check (introduced in #6776) used a random range of 2^32, needing rather complicated floating-point logic... I guess back then the motivation was to avoid a (potentially expensive) modulo operation?",
      "created_at" : "2020-10-25T20:26:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20222#issuecomment-716206701",
      "id" : 716206701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjIwNjcwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-25T20:26:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716206701",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
