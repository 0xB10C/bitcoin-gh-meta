[
   {
      "author_association" : "MEMBER",
      "body" : "Some context:\r\n* https://github.com/bitcoin/bitcoin/pull/14075#issuecomment-446547958 \"Import watch only pubkeys to the keypool if private keys are disabled\" currently has `importmulti` add stuff to the keypool \r\n* I had difficulty creating a test for handling PSBT in watch-only wallets, where I wanted to mock the signed PSBT by importing the same private private keys into a second wallet and signing it with that: https://github.com/bitcoin/bitcoin/pull/14912/files",
      "created_at" : "2018-12-12T17:14:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#issuecomment-446667738",
      "id" : 446667738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14938",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NjY2NzczOA==",
      "updated_at" : "2018-12-12T17:15:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/446667738",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14918](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14918.html) (RPCHelpMan: Check default values are given at compile-time by MarcoFalke)\n* [#13756](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13756.html) (wallet: \"avoid_reuse\" wallet flag for improved privacy by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-12-12T21:31:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#issuecomment-446751804",
      "id" : 446751804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14938",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0Njc1MTgwNA==",
      "updated_at" : "2018-12-12T21:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/446751804",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241201484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241201484"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit\r\n```\r\n- The RPC `createwallet` has now the optional `empty` argument that allows to create empty wallets.\r\n```",
      "commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "created_at" : "2018-12-12T22:01:01Z",
      "diff_hunk" : "@@ -0,0 +1,4 @@\n+Miscellaneous RPC changes\n+------------\n+\n+- `createwallet` can now create an empty wallet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241201484",
      "id" : 241201484,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MTIwMTQ4NA==",
      "original_commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "original_position" : 4,
      "path" : "doc/release-notes-14936.md",
      "position" : 4,
      "pull_request_review_id" : 184416102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938",
      "updated_at" : "2018-12-12T22:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241201484",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241201986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241201986"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, could use named arguments.",
      "commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "created_at" : "2018-12-12T22:02:56Z",
      "diff_hunk" : "@@ -0,0 +1,63 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test createwallet arguments.\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+\n+class CreateWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+        self.supports_cli = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        node.generate(1) # Leave IBD for sethdseed\n+\n+        self.nodes[0].createwallet('w0')\n+        w0 = node.get_wallet_rpc('w0')\n+        address1 = w0.getnewaddress()\n+\n+        self.log.info(\"Test disableprivatekeys creation.\")\n+        self.nodes[0].createwallet('w1', True)\n+        w1 = node.get_wallet_rpc('w1')\n+        assert_raises_rpc_error(-4,\"Error: Private keys are disabled for this wallet\", w1.getnewaddress)\n+        assert_raises_rpc_error(-4,\"Error: Private keys are disabled for this wallet\", w1.getrawchangeaddress)\n+        w1.importpubkey(w0.getaddressinfo(address1)['pubkey'])\n+\n+        self.log.info(\"Test empty creation with private keys disabled.\")\n+        self.nodes[0].createwallet('w2', True, True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241201986",
      "id" : 241201986,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MTIwMTk4Ng==",
      "original_commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "original_position" : 39,
      "path" : "test/functional/wallet_createwallet.py",
      "position" : 39,
      "pull_request_review_id" : 184416102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938",
      "updated_at" : "2018-12-12T22:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241201986",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241203267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241203267"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit\r\n```cpp\r\nif (!HasHDSeed()) throw std::runtime_error(std::string(__func__) + \": No HD Seed\");\r\n\r\nDeriveNewChildKey(batch, metadata, secret, (CanSupportFeature(FEATURE_HD_SPLIT) ? internal : false));\r\n```",
      "commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "created_at" : "2018-12-12T22:07:05Z",
      "diff_hunk" : "@@ -187,9 +187,13 @@ CPubKey CWallet::GenerateNewKey(WalletBatch &batch, bool internal)\n     int64_t nCreationTime = GetTime();\n     CKeyMetadata metadata(nCreationTime);\n \n-    // use HD key derivation if HD was enabled during wallet creation\n+    // use HD key derivation if HD was enabled during wallet creation and a seed is present\n     if (IsHDEnabled()) {\n-        DeriveNewChildKey(batch, metadata, secret, (CanSupportFeature(FEATURE_HD_SPLIT) ? internal : false));\n+        if (HasHDSeed()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241203267",
      "id" : 241203267,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MTIwMzI2Nw==",
      "original_commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : 8,
      "pull_request_review_id" : 184416102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938",
      "updated_at" : "2018-12-12T22:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241203267",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241203782"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241203782"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `create_empty`.",
      "commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "created_at" : "2018-12-12T22:08:48Z",
      "diff_hunk" : "@@ -2563,6 +2564,11 @@ static UniValue createwallet(const JSONRPCRequest& request)\n         disable_privatekeys = request.params[1].get_bool();\n     }\n \n+    bool empty = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14938#discussion_r241203782",
      "id" : 241203782,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MTIwMzc4Mg==",
      "original_commit_id" : "9822ff692f32684518aa1744cac8a2cf848e0a8e",
      "original_position" : 20,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 184416102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14938",
      "updated_at" : "2018-12-12T22:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/241203782",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
