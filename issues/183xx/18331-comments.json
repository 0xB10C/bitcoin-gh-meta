[
   {
      "author_association" : "MEMBER",
      "body" : "Thank you for picking this up.\r\n\r\nIt's nice that this mostly removes lines, it's a cleanup too.\r\nAdding a `.zip` source archive for Windows users is nice, probably, though I'm not sure if we can accomodate this in the website easily.",
      "created_at" : "2020-03-12T12:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#issuecomment-598160946",
      "id" : 598160946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODE2MDk0Ng==",
      "updated_at" : "2020-03-12T15:16:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598160946",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391683564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391683564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So this is not needed for the `git archive` output?\r\nThat's nice!\r\n\r\nOh, you mention this in the OP. I cannot find anything about this in the documentation, but looking at the output of `git archive`:\r\n- Files are sorted in alphabetic order\r\n- Files are owned by root/root\r\n- Permissions seem to be consistent:\r\n```\r\n-rw-rw-r--  for normal files\r\ndrwxrwxr-x  for directories\r\n-rwxrwxr-x  for executable scripts\r\n```\r\n- The timestamp seems to be the same for all the files, but I don't know where it comes from. Oh it's the \"CommitDate\" of the last commit!\r\n```bash\r\n-rw-rw-r-- root/root      4705 2020-03-11 16:45 .appveyor.yml\r\n```\r\n```bash\r\n$ git show --pretty=fuller HEAD\r\ncommit 24a727e23e4143bcc4e5dfac536bae8d8261d32a (HEAD -> master)\r\nMerge: 3b21a7863411b4b0391313e765f23b2664d4540a faae5a9a356d821f0cbdea32030b0ce356351a1d\r\nAuthor:     Wladimir J. van der Laan <laanwj@protonmail.com>\r\nAuthorDate: Wed Mar 11 16:32:59 2020 +0100\r\nCommit:     Wladimir J. van der Laan <laanwj@protonmail.com>\r\nCommitDate: Wed Mar 11 16:45:47 2020 +0100\r\n```\r\nSo yes, that looks deterministic to me (assuming the timezone doesn't have a part in it, but `tar` stores UNIX timestamps so probably not).",
      "commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "created_at" : "2020-03-12T15:02:57Z",
      "diff_hunk" : "@@ -147,13 +147,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Correct tar file order\n-  mkdir -p temp\n-  pushd temp\n-  tar -xf ../$SOURCEDIST\n-  find bitcoin-* | sort | tar --mtime=\"$REFERENCE_DATETIME\" --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ../$SOURCEDIST",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391683564",
      "id" : 391683564,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY4MzU2NA==",
      "original_commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "original_position" : 8,
      "path" : "contrib/gitian-descriptors/gitian-linux.yml",
      "position" : 8,
      "pull_request_review_id" : 373636525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331",
      "updated_at" : "2020-03-12T15:29:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391683564",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391697107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391697107"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">    * The timestamp seems to be the same for all the files, but I don't know where it comes from. Oh it's the \"CommitDate\" of the last commit!\r\n\r\nYes. From [`git archive` docs](https://git-scm.com/docs/git-archive):\r\n> `git archive` behaves differently when given a tree ID versus when given a **commit ID** or tag ID. In the first case the current time is used as the modification time of each file in the archive. In the latter case **the commit time as recorded in the referenced commit object is used** instead.",
      "commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "created_at" : "2020-03-12T15:22:26Z",
      "diff_hunk" : "@@ -147,13 +147,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Correct tar file order\n-  mkdir -p temp\n-  pushd temp\n-  tar -xf ../$SOURCEDIST\n-  find bitcoin-* | sort | tar --mtime=\"$REFERENCE_DATETIME\" --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ../$SOURCEDIST",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391697107",
      "id" : 391697107,
      "in_reply_to_id" : 391683564,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY5NzEwNw==",
      "original_commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "original_position" : 8,
      "path" : "contrib/gitian-descriptors/gitian-linux.yml",
      "position" : 8,
      "pull_request_review_id" : 373654203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331",
      "updated_at" : "2020-03-12T15:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391697107",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Also this PR provides Windows users with ZIP archives of the sources. Additionally the commit ID is stored in these ZIP files as a file comment:\r\n\r\nIt looks like the generated `.tar` archive also has a comment embedded with the commit ID. I do not know any way (besides hexdump) of getting this information.\r\n\r\n```\r\n00000200  35 32 20 63 6f 6d 6d 65  6e 74 3d 32 34 61 37 32  |52 comment=24a72|\r\n00000210  37 65 32 33 65 34 31 34  33 62 63 63 34 65 35 64  |7e23e4143bcc4e5d|\r\n00000220  66 61 63 35 33 36 62 61  65 38 64 38 32 36 31 64  |fac536bae8d8261d|\r\n00000230  33 32 61 0a 00 00 00 00  00 00 00 00 00 00 00 00  |32a.............|\r\n00000240  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\r\n```\r\n\r\nOh, this is also mentioned in the manpage:\r\n\r\n> Additionally the commit ID is stored in a global extended pax header if the tar format is used; it can be extracted using git get-tar-commit-id. In ZIP files it is stored as a file comment.\r\n\r\n```\r\ngit get-tar-commit-id < test.tar\r\n24a727e23e4143bcc4e5dfac536bae8d8261d32a\r\n```",
      "created_at" : "2020-03-12T15:31:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#issuecomment-598253167",
      "id" : 598253167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODI1MzE2Nw==",
      "updated_at" : "2020-03-12T15:38:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598253167",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391709200"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391709200"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems this is the same for the `mtime` in the global header.",
      "commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "created_at" : "2020-03-12T15:40:29Z",
      "diff_hunk" : "@@ -147,13 +147,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Correct tar file order\n-  mkdir -p temp\n-  pushd temp\n-  tar -xf ../$SOURCEDIST\n-  find bitcoin-* | sort | tar --mtime=\"$REFERENCE_DATETIME\" --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ../$SOURCEDIST",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#discussion_r391709200",
      "id" : 391709200,
      "in_reply_to_id" : 391683564,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwOTIwMA==",
      "original_commit_id" : "f05f8a49e02b49b6bcbdb82681b4c67509e8db73",
      "original_position" : 8,
      "path" : "contrib/gitian-descriptors/gitian-linux.yml",
      "position" : 8,
      "pull_request_review_id" : 373670558,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18331",
      "updated_at" : "2020-03-12T15:40:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391709200",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It looks like the generated `.tar` archive also has a comment embedded with the commit ID. I do not know any way (besides hexdump) of getting this information.\r\n\r\nYes. From [`git archive` docs](https://git-scm.com/docs/git-archive):\r\n> Additionally the commit ID is stored in a global extended pax header if the tar format is used; it can be extracted using `git get-tar-commit-id`.\r\n\r\nEDIT: Sorry, slow typing...",
      "created_at" : "2020-03-12T15:42:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18331#issuecomment-598258969",
      "id" : 598258969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18331",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODI1ODk2OQ==",
      "updated_at" : "2020-03-12T15:48:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598258969",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
