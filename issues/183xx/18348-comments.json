[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hi @billygarrison ,\r\n\r\nI just cloned, configured and compiled successfully a Windows Bitcoin-Qt binary. \r\n\r\nMy setup is:\r\n\r\n* Windows 10 Pro, 1909,  Build 18363.719\r\n* WSL with **Linux 4.4.0-18362-Microsoft #476-Microsoft Fri Nov 01 16:53:00 PST 2019 x86_64 x86_64 x86_64 GNU/Linux**\r\n* Intel CPU i7\r\n* Fresh Bitcoin clone\r\n\r\nBefore having started building the binaries I executed the usual\r\n\r\n```shell\r\nsudo apt update\r\nsudo apt upgrade -y\r\n```\r\nto update my Ubuntu.\r\n\r\nI did neither encounter problems with *make* in *depends*-directory nor later when building Bitcoin itself.\r\n\r\nHere the About window of my local build:\r\n\r\n![build_bitcoin](https://raw.githubusercontent.com/brakmic/bazaar/master/images/random/bitcoin_build.png)\r\n\r\nNow I have one \"stupid\" question: **did you also set the compiler for Ubuntu 18.04** as stated [here](https://github.com/bitcoin/bitcoin/blob/master/doc/build-windows.md#building-for-64-bit-windows)?:\r\n\r\n```shell\r\nsudo update-alternatives --config x86_64-w64-mingw32-g++ # Set the default mingw32 g++ compiler option to posix.\r\n```\r\n\r\nI actually assume you did, because you wrote you were following the Bitcoin Windows Compilation docs.\r\n\r\nRegards,",
      "created_at" : "2020-03-19T12:38:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-601154915",
      "id" : 601154915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTE1NDkxNQ==",
      "updated_at" : "2020-03-19T12:43:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601154915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for looking into this @brakmic - yes, I did do that step as well as the rest in build-windows.md\r\n\r\nI'm also using Linux **DESKTOP-LLRVDLC 4.4.0-18362-Microsoft #476-Microsoft Fri Nov 01 16:53:00 PST 2019 x86_64 x86_64 x86_64 GNU/Linux**, a fresh install of that as well as a fresh clone of the bitcoin repo.\r\n\r\nI've run other installations through a different WSL install on this machine. I wonder if some kind of system setting or config was changed in the process that is somehow also accessed by my new WSL",
      "created_at" : "2020-03-19T19:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-601380096",
      "id" : 601380096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTM4MDA5Ng==",
      "updated_at" : "2020-03-19T19:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601380096",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
         "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
         "followers_url" : "https://api.github.com/users/billygarrison/followers",
         "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
         "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/billygarrison",
         "id" : 30005204,
         "login" : "billygarrison",
         "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
         "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
         "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
         "repos_url" : "https://api.github.com/users/billygarrison/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/billygarrison"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "**Update on this issue:**\r\n\r\nI rebuilt again and did not get this error. I'm not sure what has changed since I opened this issue. Perhaps the issue was fixed by a recent commit. The only thing I can think that has changed on my end is I built it in `/src/bitcoin/depends` this time instead of `/home/billy/bitcoin/depends`. I had to use `sudo make`, which could be why it worked without error.\r\n\r\nI will try building the depends in `/home/billy/bitcoin/depends` again, with and without `sudo`, to see if the error occurs.",
      "created_at" : "2020-06-20T13:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-646993218",
      "id" : 646993218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0Njk5MzIxOA==",
      "updated_at" : "2020-06-20T13:15:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646993218",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
         "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
         "followers_url" : "https://api.github.com/users/billygarrison/followers",
         "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
         "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/billygarrison",
         "id" : 30005204,
         "login" : "billygarrison",
         "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
         "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
         "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
         "repos_url" : "https://api.github.com/users/billygarrison/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/billygarrison"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This issue only occurs if I use `make HOST=x86_64-w64-mingw32`, if I use it with `sudo make HOST=x86_64-w64-mingw32` then it builds fine, and the output includes `checking for clock_gettime monotonic clock... yes` instead of `no`",
      "created_at" : "2020-06-21T01:28:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-647065814",
      "id" : 647065814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NzA2NTgxNA==",
      "updated_at" : "2020-06-21T15:06:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647065814",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
         "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
         "followers_url" : "https://api.github.com/users/billygarrison/followers",
         "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
         "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/billygarrison",
         "id" : 30005204,
         "login" : "billygarrison",
         "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
         "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
         "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
         "repos_url" : "https://api.github.com/users/billygarrison/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/billygarrison"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@billygarrison there's almost no chance a recent commit changed anything to do with the build of the BerkeleyDB dependency. Much more likely is something with the WSL config changed.\r\n\r\nI've attempted to replicate this issue again (previously tried unsuccessfully with #17277).\r\n\r\nWould you be able to test with a fresh install of Ubuntu 20.04 from the Microsoft Store? I did a fresh install and ran the steps below and did not experience the problem.\r\n\r\n````\r\ncd ~\r\nsudo apt update\r\nsudo apt upgrade\r\nsudo apt install build-essential libtool autotools-dev automake pkg-config bsdmainutils curl git g++-mingw-w64-x86-64\r\nsudo update-alternatives --config x86_64-w64-mingw32-g++ # Set the default mingw32 g++ compiler option to posix.\r\nmkdir src\r\ngit clone https://github.com/bitcoin/bitcoin.git\r\ncd bitcoin\r\nPATH=$(echo \"$PATH\" | sed -e 's/:\\/mnt.*//g')\r\ncd depends\r\nmake HOST=x86_64-w64-mingw32 bdb_configured\r\n````",
      "created_at" : "2020-06-23T21:04:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-648422808",
      "id" : 648422808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0ODQyMjgwOA==",
      "updated_at" : "2020-06-23T21:04:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/648422808",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "15tNMnu84FEsYbsavhHKmQTsNBCZBPg5EY",
      "created_at" : "2020-06-23T21:32:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-648439663",
      "id" : 648439663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0ODQzOTY2Mw==",
      "updated_at" : "2020-06-23T21:32:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/648439663",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/65382356?v=4",
         "events_url" : "https://api.github.com/users/kkarimalami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kkarimalami/followers",
         "following_url" : "https://api.github.com/users/kkarimalami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kkarimalami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kkarimalami",
         "id" : 65382356,
         "login" : "kkarimalami",
         "node_id" : "MDQ6VXNlcjY1MzgyMzU2",
         "organizations_url" : "https://api.github.com/users/kkarimalami/orgs",
         "received_events_url" : "https://api.github.com/users/kkarimalami/received_events",
         "repos_url" : "https://api.github.com/users/kkarimalami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kkarimalami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kkarimalami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kkarimalami"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for the suggestion @sipsorcery, unfortunately the error still occurs. The only deviation I took from your instructions was that I did `cd src` after `mkdir src`.\r\n\r\nIn case you missed it, I don't think it suddenly working for me has anything to do with an update to BDB/Bitcoin/WSL. It works when I do `sudo make HOST=x86_64-w64-mingw32` (which I hadn't tried when originally posting this issue)\r\n",
      "created_at" : "2020-06-27T00:00:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-650456405",
      "id" : 650456405,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDQ1NjQwNQ==",
      "updated_at" : "2020-06-27T00:00:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650456405",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/30005204?v=4",
         "events_url" : "https://api.github.com/users/billygarrison/events{/privacy}",
         "followers_url" : "https://api.github.com/users/billygarrison/followers",
         "following_url" : "https://api.github.com/users/billygarrison/following{/other_user}",
         "gists_url" : "https://api.github.com/users/billygarrison/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/billygarrison",
         "id" : 30005204,
         "login" : "billygarrison",
         "node_id" : "MDQ6VXNlcjMwMDA1MjA0",
         "organizations_url" : "https://api.github.com/users/billygarrison/orgs",
         "received_events_url" : "https://api.github.com/users/billygarrison/received_events",
         "repos_url" : "https://api.github.com/users/billygarrison/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/billygarrison/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/billygarrison/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/billygarrison"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@billygarrison yes I saw it works when using `sudo`. Also the last update the `bdb` dependency package was 9 months ago. It's almost certain that the need to use sudo is something to do with the Windows and/or WSL version and/or configuration.\r\n\r\nI'd like to track it down as a matter of interest but given I can't reproduce the problem I need a guinea pig to run the tests. If you don't want to be that guinea pig, no problems.\r\n\r\nIf you are happy to do another test could you strace the bdb configure step on one of your WSL installs:\r\n\r\n````\r\nPATH=$(echo \"$PATH\" | sed -e 's/:\\/mnt.*//g')\r\ncd ~/src/bitcoin/depends\r\nmake clean\r\nstrace make HOST=x86_64-w64-mingw32 bdb_configured\r\n````\r\n\r\nIn the strace log I'm interested to see what's attempting to execute `conftest.exe`. In my strace log there are no messages relating to `conftest.exe` or any other `.exe` file.\r\n",
      "created_at" : "2020-06-27T15:19:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18348#issuecomment-650574066",
      "id" : 650574066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18348",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDU3NDA2Ng==",
      "updated_at" : "2020-06-27T15:19:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650574066",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   }
]
