[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is a lot of related discussion in the [PR](https://github.com/bitcoin/bitcoin/pull/8393) introducing this behaviour along with a [change](https://github.com/bitcoin/bips/pull/423) to the corresponding BIP-151.\r\n\r\nMore specifically, the updated BIP says:\r\n> Upon connection establishment, a node SHOULD send a burst of sendcmpct messages containing every version of compact block encodings for which they are willing to support sending cmpctblock and blocktxn messages, and receiving getblocktxn messages. These messages SHOULD be ordered in the order of the priority which the node wishes to receive cmpctblock/blocktxn messages, with the highest-priority version sendcmpct message sent first.\r\n\r\nI believe that this is done to enable the possible future where SegWit-supporting nodes (NODE_WITNESS) to participate in both v1 and v2 compact block relay, and this would allow current nodes to talk to them (by not implying that SegWit is always v2-cmpctblocks).\r\n\r\nTo be clear, I just spent about 30 minutes trying to figure out, and I'm still unsure that my rationale is correct. Maybe this means we should add a comment.",
      "created_at" : "2020-03-20T14:57:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18390#issuecomment-601742963",
      "id" : 601742963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18390",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTc0Mjk2Mw==",
      "updated_at" : "2020-03-20T15:01:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601742963",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is a comment already:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/5bf45fe2a9642f8ae8f8a12bcbf8f8b4770421ad/src/net_processing.cpp#L2132\r\n\r\nBut I don't understand why we still support non-witness compact blocks these days. To simplify our code, we could just remove those things?",
      "created_at" : "2020-03-20T15:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18390#issuecomment-601745889",
      "id" : 601745889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18390",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTc0NTg4OQ==",
      "updated_at" : "2020-03-20T15:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601745889",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke yes, that comment is there, but it doesn't make clear why it is useful to announce cmpctblocks-v1 for segwit nodes. The confusing part is that it's definitely not useful if everybody uses current implementation, so one have to think about either past or future scenarios, where this could be useful via compatibility.",
      "created_at" : "2020-03-20T15:08:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18390#issuecomment-601748548",
      "id" : 601748548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18390",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTc0ODU0OA==",
      "updated_at" : "2020-03-20T15:08:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601748548",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   }
]
