[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #17526 (Use Single Random Draw In addition to knapsack as coin selection fallback by achow101)\n* #17331 (Use effective values throughout coin selection by achow101)\n* #11413 ([wallet] [rpc] sendtoaddress/sendmany: Add explicit feerate option by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-03-06T06:43:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-595625000",
      "id" : 595625000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NTYyNTAwMA==",
      "updated_at" : "2020-03-30T08:36:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/595625000",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you add a test with `createfundedpsbt`'s `feeRate` argument?",
      "created_at" : "2020-03-06T17:27:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-595875359",
      "id" : 595875359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NTg3NTM1OQ==",
      "updated_at" : "2020-03-06T17:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/595875359",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389086562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389086562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The mempool fee is not considered when the user picks the fee rate. See also https://doxygen.bitcoincore.org/wallet_2fees_8cpp_source.html#l00028\r\n\r\nHow did you trigger this bug? It would be nice to include a test vector or steps to reproduce, otherwise this will just be dead code.",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-03-06T19:04:44Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389086562",
      "id" : 389086562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4NjU2Mg==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 370557191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "updated_at" : "2020-03-07T01:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389086562",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389091168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389091168"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke the error is triggered by setting a fee rate below 1 sat / byte in the updated `sendtoaddress` RPCs in #11413. See https://github.com/bitcoin/bitcoin/pull/11413#issuecomment-593284781 for discussion and some alternative ideas. ",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-03-06T19:14:37Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389091168",
      "id" : 389091168,
      "in_reply_to_id" : 389086562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5MTE2OA==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 370563299,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "updated_at" : "2020-03-07T01:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389091168",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389093005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389093005"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If it is not possible to hit this case with Bitcoin Core master, it probably makes sense to only add it when it can be hit. And also add a test to hit it.",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-03-06T19:18:24Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389093005",
      "id" : 389093005,
      "in_reply_to_id" : 389086562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5MzAwNQ==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 370565595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "updated_at" : "2020-03-07T01:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389093005",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389212618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389212618"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I triggered it with no problem in bitcoin-qt (set fee to 0.00000001 btc/kb; note that the GUI has changed it back to the minimum in the screenshot after I clicked \"Send\")...\r\n\r\n<img width=\"744\" alt=\"Screen Shot 2020-03-07 at 10 20 51\" src=\"https://user-images.githubusercontent.com/250224/76133784-383d7c00-605d-11ea-847b-c6f1596ceb51.png\">\r\n\r\nWithout this patch, it goes to confirm screen, silently changing my fee rate:\r\n<img width=\"751\" alt=\"Screen Shot 2020-03-07 at 10 22 48\" src=\"https://user-images.githubusercontent.com/250224/76133814-6c18a180-605d-11ea-8876-14558f79240e.png\">\r\n",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-03-07T01:21:43Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389212618",
      "id" : 389212618,
      "in_reply_to_id" : 389086562,
      "line" : 2665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMjYxOA==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_line" : 2665,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 370708690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-03-07T09:15:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389212618",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can you add a test with `createfundedpsbt`'s `feeRate` argument?\r\n\r\nI tried and that takes me all the way to `sendrawtransaction` before it hits `min relay fee not met, 1 < 141`. The PSBT stuff doesn't use the same method, unfortunately.",
      "created_at" : "2020-03-07T01:30:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-596028767",
      "id" : 596028767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjAyODc2Nw==",
      "updated_at" : "2020-03-07T01:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596028767",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389214542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389214542"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The mempool fee is not considered when the user picks the fee rate. See also https://doxygen.bitcoincore.org/wallet_2fees_8cpp_source.html#l00028\r\n> \r\n> How did you trigger this bug? It would be nice to include a test vector or steps to reproduce, otherwise this will just be dead code.\r\n\r\nThat code calls `mempoolMinFee()` though.",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-03-07T01:38:23Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r389214542",
      "id" : 389214542,
      "in_reply_to_id" : 389086562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNDU0Mg==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 370710762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "updated_at" : "2020-03-07T01:38:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/389214542",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was hoping this was only an RPC issue. The error message is not very GUI friendly, but this should be bellt-and-suspenders check. The GUI is supposed to prevent you from entering a too low amount.\r\n\r\nYour screenshot is a bit confusing, because the UI automatically corrects the input form when the value is below the minimum relay fee. But that correction only happens when you click somewhere else, like another field or the send button.\r\n\r\nYou can also see the issue when you launch with `-minrelayfee=0.001` and then try `0.00001` as the fee. It will switch the amount back to `0.001`, but when you click on Send it will still try the low fee rate.\r\n\r\ntACK 7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84\r\n\r\nOn a related note: I don't like that the GUI changes the fee amount from under me. It should just color the field red and show an error message below the field. But that's a separate PR imo, this check is useful regardless.",
      "created_at" : "2020-03-07T09:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-596065493",
      "id" : 596065493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjA2NTQ5Mw==",
      "updated_at" : "2020-03-07T09:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596065493",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK 7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84\r\n\r\n",
      "created_at" : "2020-03-13T17:12:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-598826361",
      "id" : 598826361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODgyNjM2MQ==",
      "updated_at" : "2020-03-13T17:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598826361",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-04-17T10:54:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#issuecomment-615181285",
      "id" : 615181285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18275",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTE4MTI4NQ==",
      "updated_at" : "2020-04-17T10:54:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615181285",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r410152462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410152462"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> That code calls mempoolMinFee() though.\r\n\r\nNo? It doesn't.\r\n\r\nThe code is\r\n\r\n```cpp\r\n         // Obey mempool min fee when using smart fee estimation\r\n         CFeeRate min_mempool_feerate = wallet.chain().mempoolMinFee();\r\n```\r\n\r\nSetting a fee manually in the gui is not \"smart fee\". What am I missing?",
      "commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "created_at" : "2020-04-17T11:05:24Z",
      "diff_hunk" : "@@ -2659,6 +2659,12 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n \n             // Get the fee rate to use effective values in coin selection\n             CFeeRate nFeeRateNeeded = GetMinimumFeeRate(*this, coin_control, &feeCalc);\n+            // Do not, ever, assume that it's fine to change the fee rate if the user has explicitly\n+            // provided one\n+            if (coin_control.m_feerate && nFeeRateNeeded > *coin_control.m_feerate) {\n+                strFailReason = strprintf(\"Fee rate is too low for the current mempool. Increase it to %s or modify -maxmempool\", nFeeRateNeeded.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18275#discussion_r410152462",
      "id" : 410152462,
      "in_reply_to_id" : 389086562,
      "line" : 2665,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE1MjQ2Mg==",
      "original_commit_id" : "7ac14a5a86d6bc8f15cf2c336a1bf560babf0c84",
      "original_line" : 2665,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 395362363,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18275",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-17T11:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410152462",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
