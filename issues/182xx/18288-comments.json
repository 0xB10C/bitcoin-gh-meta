[
   {
      "author_association" : "MEMBER",
      "body" : "We already run against valgrind and msan is a subset of valgrind according to: \"MSan implements a subset of functionality found in Valgrind (Memcheck tool). It is significantly faster than Memcheck (TODO:benchmark).\" (https://github.com/google/sanitizers/wiki/MemorySanitizer)",
      "created_at" : "2020-03-07T21:20:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596138689",
      "id" : 596138689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjEzODY4OQ==",
      "updated_at" : "2020-03-07T21:20:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596138689",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\nI think we should use both. While both tools try to find uses of uninitialized memory (UUM) they are implemented in totally different ways: Valgrind's memcheck is using binary translation while MSan is using compiler-based instrumentation. ~~From my experience it is not guaranteed that Valgrind finds all issues reported by MSan and vice versa.~~\r\n\r\nFurthermore, having the combination libFuzzer+MSan readily available is really crucial when fuzzing. The combination libFuzzer+Valgrind is only usable for testing against an existing fuzzing corpus like we do in Travis -- not for doing any actual fuzzing. For the libFuzzer+MSan combination to be available it is important to have the cumbersome MSan setup process documented and also kept up-to-date and working over time. We get that for free by having an MSan build in Travis.\r\n\r\nAlso MSan is order of magnitudes faster than Valgrind which means that we can run also tests that are too slow for Valgrind in Travis.\r\n\r\nAnd last but not least MSan can report the name of the variable that has not been initialized (thanks to MSan using compiler-based instrumentation). Valgrind only points to the function name.\r\n\r\nIn summary: I think having MSan in Travis is a very clear win. Let's use all available tools to try to kill the uninitialized memory (UUM) bug class :)\r\n\r\nLet me know if you can think of any problems that could arise from testing also under MSan in Travis.",
      "created_at" : "2020-03-07T23:14:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596147058",
      "id" : 596147058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjE0NzA1OA==",
      "updated_at" : "2020-03-08T08:40:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596147058",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\n> We already run against valgrind [â¦]\r\n\r\nCorrect if you mean the unit tests.\r\n\r\nIncorrect if you mean the functional tests :)\r\n\r\nDue to Valgrind's slowness we currently only run a single(!) functional test under Valgrind (`TEST_RUNNER_EXTRA=\"p2p_segwit.py\"`).\r\n\r\nNote that this PR runs all available functional tests (and unit tests) under MSan.",
      "created_at" : "2020-03-07T23:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596147603",
      "id" : 596147603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjE0NzYwMw==",
      "updated_at" : "2020-03-07T23:25:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596147603",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd love to see a bug that msan catches that valgrind doesn't.",
      "created_at" : "2020-03-08T01:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596156198",
      "id" : 596156198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjE1NjE5OA==",
      "updated_at" : "2020-03-08T01:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596156198",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > From my experience it is not guaranteed that Valgrind finds all issues reported by MSan and vice versa.\r\n>\r\n> I'd love to see a bug that msan catches that valgrind doesn't.\r\n\r\nSorry about making a vague claim that I cannot back up with an example. Until I can provide an example we can simplify the discussion by assuming that I was flat out wrong about the possibility of Valgrind not catching an issue found by MSan (given enough runtime to compensate for being orders of magnitude slower than MSan).\r\n\r\nFrom a practical perspective the main reason to start using MSan is the speedup that will allow us to go from detecting use of uninitialized memory in code covered by a single(!) functional test (`p2p_segwit.py`) to detecting use of uninitialized memory in *all* code covered by our functional tests.\r\n\r\nPlease note that I'm not suggesting removing the Valgrind job: I think we should use both and ideally bump the timeouts so that Valgrind can test a couple of more functional tests at least :)\r\n\r\n(Just to be clear: I love **both** Valgrind (proof of love: #18166, #18162, #18159, #17633, #17640, #17624, #17455, #15117, #11035, #11024, #10977) and MSan â I use them daily :))\r\n\r\nLet me know if you can think of any problems that could arise from testing also under MSan in Travis.",
      "created_at" : "2020-03-08T08:24:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596179265",
      "id" : 596179265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjE3OTI2NQ==",
      "updated_at" : "2020-03-08T08:33:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596179265",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That's fine, if you ever find any-- I'd be interested in seeing them whenever that is. The question was primarily driven out of my own curiosity. \r\n\r\nFaster can be pretty useful, though I've found msan in the past to be somewhat lacking compared to valgrind in terms of sensitivity -- though my experience is mostly from when msan was very new. I've found msan most useful in the context of fuzzing, where any speed difference makes for a meaningful throughput difference which ultimately results in a sensitivity difference.\r\n\r\nThe fact that even paid travis is so cpu starved that this is a big issue for just CI tests is something of is own problem-- labour is expensive, insight is rare. CPU time is the one resource needed by the project which should never be the limiting ingredient, this matters because a surplus of CPU time can be a force multiplier for human labour (though my idea of 'reasonable amounts of computing power' starts at about a [thousand core ghz](https://people.xiph.org/~greg/temp/kindatidy.jpg) per person, and I've always found it really weird how software people who are at the top of their field often work from just a single underpowered laptop; so maybe I'm just a weirdo). FWIW, for a number of years I tested every release of bitcoin in valgrind, including doing IBDs (overnight). \r\n\r\nI don't see any problem with making more use of msan, though it's not a complete replacement for valgrind. But more is more. :)\r\n",
      "created_at" : "2020-03-08T09:39:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-596185375",
      "id" : 596185375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NjE4NTM3NQ==",
      "updated_at" : "2020-03-08T09:44:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596185375",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\nWould you mind reviewing? :)\r\n\r\nI believe that having this merged would have allowed us to automatically detect at least two remotely triggerable uses of uninitialized memory (UUM) in our P2P networking code:\r\n* 2020: [Use of uninitialized memory in Erlay networking code](https://github.com/bitcoin/bitcoin/pull/18261#issuecomment-596803815) - found pre-merge\r\n* 2020: [Use of uninitialized memory in BIP324 encrypted p2p transport de-/serializer code](https://github.com/bitcoin/bitcoin/pull/18242#issuecomment-593674721) (truth in advertising: I haven't verified this one by writing a PoC) - found pre-merge\r\n* 2019: [Use of uninitialized memory in networking code when receiving a transaction we already have](https://github.com/bitcoin/bitcoin/pull/17624) - found post-merge\r\n\r\nFWIW - a subset of non-networking uses of uninitialized memory:\r\n* 2020: [util: Avoid potential uninitialized read in FormatISO8601DateTime(int64_t) by checking gmtime_s/gmtime_r return](https://github.com/bitcoin/bitcoin/pull/18162)\r\n* 2019: [wallet: Uninitialized read in bumpfee(â¦)](https://github.com/bitcoin/bitcoin/issues/17642)\r\n* 2018: [wallet: Fix non-determinism in ParseHDKeypath(...). Avoid using an uninitialized variable in path calculation.](https://github.com/bitcoin/bitcoin/pull/13712)\r\n* 2018: [wallet: Fix use of uninitialized value bnb_used in CWallet::CreateTransaction(...)](https://github.com/bitcoin/bitcoin/pull/13546)\r\n* 2017: [[net] Fix use of uninitialized value in getnetworkinfo(const JSONRPCRequest&)](https://github.com/bitcoin/bitcoin/pull/10977)\r\n* 2017: [[test] Avoid reading a potentially uninitialized variable in tx_invalid-test (transaction_tests.cpp)](https://github.com/bitcoin/bitcoin/pull/9555)\r\n",
      "created_at" : "2020-03-10T13:27:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-597084905",
      "id" : 597084905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NzA4NDkwNQ==",
      "updated_at" : "2020-03-10T13:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/597084905",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390366382"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390366382"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The file name indicates nowallet, this is --enable-wallet. Which is true?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T14:43:46Z",
      "diff_hunk" : "@@ -0,0 +1,20 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+export LIBCXX_DIR=\"${BASE_ROOT_DIR}/ci/scratch/msan/build/\"\n+export MSAN_FLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls\"\n+LIBCXX_FLAGS=\"-nostdinc++ -stdlib=libc++ -L${LIBCXX_DIR}lib -lc++abi -I${LIBCXX_DIR}include -I${LIBCXX_DIR}include/c++/v1 -lpthread -Wl,-rpath,${LIBCXX_DIR}lib\"\n+export MSAN_AND_LIBCXX_FLAGS=\"${MSAN_FLAGS} ${LIBCXX_FLAGS}\"\n+export BDB_PREFIX=\"${BASE_ROOT_DIR}/db4\"\n+\n+export CONTAINER_NAME=\"ci_native_nowallet_msan\"\n+export PACKAGES=\"clang-8 llvm-8 cmake\"\n+export DEP_OPTS=\"NO_WALLET=1 NO_UPNP=1 NO_QT=1 CC='clang-8' CXX='clang++-8' CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}' boost_toolset_linux='clang' boost_cxx='clang++-8' boost_cxxflags='-std=c++11 -fvisibility=hidden -fPIC ${MSAN_AND_LIBCXX_FLAGS}'\"\n+export GOAL=\"install\"\n+export BITCOIN_CONFIG=\"--enable-wallet --with-sanitizers=memory --disable-asm --with-asm=no --prefix=${BASE_ROOT_DIR}/depends/x86_64-pc-linux-gnu/ CC=clang-8 CXX=clang++-8 CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}' BDB_LIBS='-L${BDB_PREFIX}/lib -ldb_cxx-4.8' BDB_CFLAGS='-I${BDB_PREFIX}/include'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390366382",
      "id" : 390366382,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM2NjM4Mg==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_nowallet_msan.sh",
      "position" : null,
      "pull_request_review_id" : 372018716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390366382",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390367031"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390367031"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason this needs clang-8, as opposed to just `clang`?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T14:44:37Z",
      "diff_hunk" : "@@ -0,0 +1,20 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+export LIBCXX_DIR=\"${BASE_ROOT_DIR}/ci/scratch/msan/build/\"\n+export MSAN_FLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls\"\n+LIBCXX_FLAGS=\"-nostdinc++ -stdlib=libc++ -L${LIBCXX_DIR}lib -lc++abi -I${LIBCXX_DIR}include -I${LIBCXX_DIR}include/c++/v1 -lpthread -Wl,-rpath,${LIBCXX_DIR}lib\"\n+export MSAN_AND_LIBCXX_FLAGS=\"${MSAN_FLAGS} ${LIBCXX_FLAGS}\"\n+export BDB_PREFIX=\"${BASE_ROOT_DIR}/db4\"\n+\n+export CONTAINER_NAME=\"ci_native_nowallet_msan\"\n+export PACKAGES=\"clang-8 llvm-8 cmake\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390367031",
      "id" : 390367031,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM2NzAzMQ==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_nowallet_msan.sh",
      "position" : null,
      "pull_request_review_id" : 372018716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390367031",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390367263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390367263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n      name: 'x86_64 Linux  [GOAL: install]  [bionic]  [depends, sanitizers: memory (MSan), no wallet]'\r\n```",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T14:44:54Z",
      "diff_hunk" : "@@ -124,6 +124,11 @@ jobs:\n       env: >-\n         FILE_ENV=\"./ci/test/00_setup_env_native_asan.sh\"\n \n+    - stage: test\n+      name: 'x86_64 Linux  [GOAL: install]  [bionic]  [sanitizers: memory (MSan), no wallet]'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390367263",
      "id" : 390367263,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM2NzI2Mw==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 128,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : ".travis.yml",
      "position" : null,
      "pull_request_review_id" : 372018716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390367263",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390368931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390368931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should probably be a separate pull?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T14:47:07Z",
      "diff_hunk" : "@@ -33,13 +33,13 @@ define $(package)_preprocess_cmds\n endef\n \n define $(package)_config_cmds\n-  ./bootstrap.sh --without-icu --with-libraries=$($(package)_config_libraries)\n+  ./bootstrap.sh --without-icu --with-libraries=$($(package)_config_libraries) toolset=$($(package)_toolset_$(host_os))\n endef\n \n define $(package)_build_cmds\n-  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) stage\n+  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) stage\n endef\n \n define $(package)_stage_cmds\n-  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) install\n+  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) install",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390368931",
      "id" : 390368931,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM2ODkzMQ==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 47,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "depends/packages/boost.mk",
      "position" : null,
      "pull_request_review_id" : 372018716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390368931",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390390424"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390390424"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I could not get it working reliably with a version older than Clang 8. I guess MSan has matured over the versions :)",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T15:14:26Z",
      "diff_hunk" : "@@ -0,0 +1,20 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+export LIBCXX_DIR=\"${BASE_ROOT_DIR}/ci/scratch/msan/build/\"\n+export MSAN_FLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls\"\n+LIBCXX_FLAGS=\"-nostdinc++ -stdlib=libc++ -L${LIBCXX_DIR}lib -lc++abi -I${LIBCXX_DIR}include -I${LIBCXX_DIR}include/c++/v1 -lpthread -Wl,-rpath,${LIBCXX_DIR}lib\"\n+export MSAN_AND_LIBCXX_FLAGS=\"${MSAN_FLAGS} ${LIBCXX_FLAGS}\"\n+export BDB_PREFIX=\"${BASE_ROOT_DIR}/db4\"\n+\n+export CONTAINER_NAME=\"ci_native_nowallet_msan\"\n+export PACKAGES=\"clang-8 llvm-8 cmake\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390390424",
      "id" : 390390424,
      "in_reply_to_id" : 390367031,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM5MDQyNA==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 16,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_nowallet_msan.sh",
      "position" : null,
      "pull_request_review_id" : 372049093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390390424",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390391870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390391870"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! The filename is wrong -- wallet is used. See `contrib/install_db4.sh $(pwd) --enable-umrw` below :)\r\n\r\n`--enable-umrw` required to avoid UUM.",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T15:16:15Z",
      "diff_hunk" : "@@ -0,0 +1,20 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+export LC_ALL=C.UTF-8\n+\n+export LIBCXX_DIR=\"${BASE_ROOT_DIR}/ci/scratch/msan/build/\"\n+export MSAN_FLAGS=\"-fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls\"\n+LIBCXX_FLAGS=\"-nostdinc++ -stdlib=libc++ -L${LIBCXX_DIR}lib -lc++abi -I${LIBCXX_DIR}include -I${LIBCXX_DIR}include/c++/v1 -lpthread -Wl,-rpath,${LIBCXX_DIR}lib\"\n+export MSAN_AND_LIBCXX_FLAGS=\"${MSAN_FLAGS} ${LIBCXX_FLAGS}\"\n+export BDB_PREFIX=\"${BASE_ROOT_DIR}/db4\"\n+\n+export CONTAINER_NAME=\"ci_native_nowallet_msan\"\n+export PACKAGES=\"clang-8 llvm-8 cmake\"\n+export DEP_OPTS=\"NO_WALLET=1 NO_UPNP=1 NO_QT=1 CC='clang-8' CXX='clang++-8' CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}' boost_toolset_linux='clang' boost_cxx='clang++-8' boost_cxxflags='-std=c++11 -fvisibility=hidden -fPIC ${MSAN_AND_LIBCXX_FLAGS}'\"\n+export GOAL=\"install\"\n+export BITCOIN_CONFIG=\"--enable-wallet --with-sanitizers=memory --disable-asm --with-asm=no --prefix=${BASE_ROOT_DIR}/depends/x86_64-pc-linux-gnu/ CC=clang-8 CXX=clang++-8 CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}' BDB_LIBS='-L${BDB_PREFIX}/lib -ldb_cxx-4.8' BDB_CFLAGS='-I${BDB_PREFIX}/include'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390391870",
      "id" : 390391870,
      "in_reply_to_id" : 390366382,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM5MTg3MA==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_nowallet_msan.sh",
      "position" : null,
      "pull_request_review_id" : 372050806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390391870",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390394638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390394638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed!",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T15:19:52Z",
      "diff_hunk" : "@@ -124,6 +124,11 @@ jobs:\n       env: >-\n         FILE_ENV=\"./ci/test/00_setup_env_native_asan.sh\"\n \n+    - stage: test\n+      name: 'x86_64 Linux  [GOAL: install]  [bionic]  [sanitizers: memory (MSan), no wallet]'",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390394638",
      "id" : 390394638,
      "in_reply_to_id" : 390367263,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM5NDYzOA==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 128,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : ".travis.yml",
      "position" : null,
      "pull_request_review_id" : 372054319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390394638",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390403544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390403544"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure! Submitted as #18308 :)",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-10T15:31:18Z",
      "diff_hunk" : "@@ -33,13 +33,13 @@ define $(package)_preprocess_cmds\n endef\n \n define $(package)_config_cmds\n-  ./bootstrap.sh --without-icu --with-libraries=$($(package)_config_libraries)\n+  ./bootstrap.sh --without-icu --with-libraries=$($(package)_config_libraries) toolset=$($(package)_toolset_$(host_os))\n endef\n \n define $(package)_build_cmds\n-  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) stage\n+  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) stage\n endef\n \n define $(package)_stage_cmds\n-  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) install\n+  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) install",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r390403544",
      "id" : 390403544,
      "in_reply_to_id" : 390368931,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQwMzU0NA==",
      "original_commit_id" : "a4a25a0f1a827a7a82780438b6d7f0c9d17fa5fe",
      "original_line" : 47,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "depends/packages/boost.mk",
      "position" : null,
      "pull_request_review_id" : 372065591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/390403544",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Not sure though if we should also run this on travis, given that travis hopefully will run valgrind on everything: #18304\r\n\r\nEven if we assume that we get Valgrind to run all the unit and functional tests within the Travis time limit (which I unfortunately doubt is technically possible) I still don't see why we would not like to use **both** Valgrind and MSan in Travis? :)\r\n\r\nAs @gmaxwell put it: \"more is more\" :)\r\n\r\nMSan is literally orders of magnitude faster than Valgrind and also gives better debugging info in case of presence of UUM.\r\n\r\nLet me know if you can think of any problems that could arise from testing also under MSan in Travis.",
      "created_at" : "2020-03-10T15:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-597154576",
      "id" : 597154576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NzE1NDU3Ng==",
      "updated_at" : "2020-03-10T15:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/597154576",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. cd120cf71cb98f06fd779a0ccfa62afd8ab86c00 looks sane, doesn't hurt my macOS build, but otherwise a bit above my pay-grade. The changes are contained to their own machine, except:\r\n* boost depends tweak that's now moved to  #18308\r\n* MSAN handling in `GetOSRand`, which is a more surgical alternative to #17627  \r\n\r\n> For the libFuzzer+MSan combination to be available it is important to have the cumbersome MSan setup process documented and also kept up-to-date and working over time. We get that for free by having an MSan build in Travis.\r\n\r\nKeeping this up to date, by having it run on Travis, seems useful. We can always triage Travis resources if funding runs dry.\r\n\r\nThe build took 1 hours and 15 minutes the first time. You could push a trivial commit to see much of that is shaved off by the cache.\r\n\r\nSlow Travis builds can be a burden on review, because Github won't show a build as failed until all Travis machines _of the current phase_ are done. I often find myself reviewing PRs in EU morning with trivial bugs not spotted by US devs before they went to be.\r\n\r\nThis can be mitigated if you add a new stage `grind`(?) and move the machine there. (I also agree with @gmaxwell about developers not using enough tooling, guilty as charged)\r\n\r\nIt could also run as part of a cron job on master (`\"$TRAVIS_EVENT_TYPE\" = \"cron\"`), but I'm not sure who gets notified when those fail. And it's better to catch stuff before merge, so let's not do that unless we run short on resources.",
      "created_at" : "2020-03-12T13:17:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-598180483",
      "id" : 598180483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODE4MDQ4Mw==",
      "updated_at" : "2020-03-12T13:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598180483",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The build took 1 hours and 15 minutes the first time.\r\n\r\nThat seems to be roughly the time it takes also with caching. That might sound long but it is still 45 minutes quicker than the current `valgrind` job which only covers a subset of the functional tests whereas this one covers all of them :)\r\n\r\n(To be clear: even with the two hour `valgrind` job I think it easily is worth taking that cost in terms of Travis build time to protect our users from at least a subset of UUM bugs. This kind of (partial) protection is long-overdue :))",
      "created_at" : "2020-03-12T22:57:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-598468231",
      "id" : 598468231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODQ2ODIzMQ==",
      "updated_at" : "2020-03-12T22:57:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598468231",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Moving this and the valgrind task to a separate Travis phase can be experimented with in another PR.",
      "created_at" : "2020-03-13T17:02:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-598822152",
      "id" : 598822152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODgyMjE1Mg==",
      "updated_at" : "2020-03-13T17:02:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598822152",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r392357410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392357410"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Just testing locally and it takes a long time to download all of this, mostly it times out. Would it be possible to set `--depth=1`?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-13T17:04:01Z",
      "diff_hunk" : "@@ -108,6 +108,13 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC git clone https://github.com/llvm/llvm-project \"${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r392357410",
      "id" : 392357410,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM1NzQxMA==",
      "original_commit_id" : "cd120cf71cb98f06fd779a0ccfa62afd8ab86c00",
      "original_line" : 113,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 374468356,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392357410",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Running this on odroid c2, gave me:\r\n\r\n```\r\n...\r\n\r\n\r\nranlib libdb-4.8.a\r\nrm -f libdb.a\r\nln -s libdb-4.8.a libdb.a\r\n./libtool --mode=compile clang++-8 -c -I. -I/root/workspace/bitcoin-core/db4/db-4.8.30.NC/dist/..  -D_GNU_SOURCE -D_REENTRANT -fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls -nostdinc++ -stdlib=libc++ -L/root/workspace/bitcoin-core/ci/scratch/msan/build/lib -lc++abi -I/root/workspace/bitcoin-core/ci/scratch/msan/build/include -I/root/workspace/bitcoin-core/ci/scratch/msan/build/include/c++/v1 -lpthread -Wl,-rpath,/root/workspace/bitcoin-core/ci/scratch/msan/build/lib /root/workspace/bitcoin-core/db4/db-4.8.30.NC/dist/../cxx/cxx_db.cpp\r\nlibtool: compile:  clang++-8 -c -I. -I/root/workspace/bitcoin-core/db4/db-4.8.30.NC/dist/.. -D_GNU_SOURCE -D_REENTRANT -fsanitize=memory -fsanitize-memory-track-origins=2 -fno-omit-frame-pointer -g -O1 -fno-optimize-sibling-calls -nostdinc++ -stdlib=libc++ -L/root/workspace/bitcoin-core/ci/scratch/msan/build/lib -lc++abi -I/root/workspace/bitcoin-core/ci/scratch/msan/build/include -I/root/workspace/bitcoin-core/ci/scratch/msan/build/include/c++/v1 -lpthread -Wl,-rpath,/root/workspace/bitcoin-core/ci/scratch/msan/build/lib /root/workspace/bitcoin-core/db4/db-4.8.30.NC/dist/../cxx/cxx_db.cpp  -fPIC -DPIC -o cxx_db.o\r\nclang: warning: -lc++abi: 'linker' input unused [-Wunused-command-line-argument]\r\nclang: warning: -lpthread: 'linker' input unused [-Wunused-command-line-argument]\r\nclang: warning: -Wl,-rpath,/root/workspace/bitcoin-core/ci/scratch/msan/build/lib: 'linker' input unused [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-stdlib=libc++' [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-L/root/workspace/bitcoin-core/ci/scratch/msan/build/lib' [-Wunused-command-line-argument]\r\nIn file included from /root/workspace/bitcoin-core/db4/db-4.8.30.NC/dist/../cxx/cxx_db.cpp:13:\r\n./db_cxx.h:59:10: fatal error: 'iostream.h' file not found\r\n#include <iostream.h>\r\n         ^~~~~~~~~~~~\r\n1 error generated.\r\nMakefile:2018: recipe for target 'cxx_db.o' failed\r\nmake: *** [cxx_db.o] Error 1\r\n",
      "created_at" : "2020-03-13T18:12:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-598850935",
      "id" : 598850935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5ODg1MDkzNQ==",
      "updated_at" : "2020-03-13T18:12:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598850935",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r392432426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392432426"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, of course! Thanks! Now updated.",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-03-13T19:40:01Z",
      "diff_hunk" : "@@ -108,6 +108,13 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC git clone https://github.com/llvm/llvm-project \"${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r392432426",
      "id" : 392432426,
      "in_reply_to_id" : 392357410,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQzMjQyNg==",
      "original_commit_id" : "cd120cf71cb98f06fd779a0ccfa62afd8ab86c00",
      "original_line" : 113,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 374564239,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392432426",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I wonder if that is MSan-related. Could you try if `contrib/install_db4.sh` (without MSan) works on your odroid c2? :)",
      "created_at" : "2020-03-15T15:10:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-599222886",
      "id" : 599222886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTIyMjg4Ng==",
      "updated_at" : "2020-03-15T15:10:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599222886",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```\r\nrm -r db4/ && ./contrib/install_db4.sh `pwd` CC=clang-8 CXX=clang++-8\r\n```\r\n passed",
      "created_at" : "2020-03-16T21:38:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-599769655",
      "id" : 599769655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTc2OTY1NQ==",
      "updated_at" : "2020-03-16T21:38:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599769655",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I'd love to help out but looks hard to debug remotely and I've never tried compiling anything on under MSan on an odroid c2. Can you give the context: are we doing CI under odroid c2 in a way that makes it blocking? :)",
      "created_at" : "2020-03-16T21:51:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-599774164",
      "id" : 599774164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTc3NDE2NA==",
      "updated_at" : "2020-03-16T21:51:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599774164",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As msan does a subset of what valgrind does, this is effectively testing valgrind, and not Bitcoin Core. Note that we already have a valgrind ci run.\r\n\r\nThe only issue I saw was when running the ci on non-x86, which spit out too many warnings under valgrind, so maybe msan is better suited for that use case.\r\n\r\nI am not against adding this ci config, but I'd say to disable it for travis. At least for pull requests. I may be enabled for branch pushes.",
      "created_at" : "2020-03-17T02:22:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-599844055",
      "id" : 599844055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5OTg0NDA1NQ==",
      "updated_at" : "2020-03-17T02:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599844055",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18899 (travis: Remove valgrind by MarcoFalke)\n* #18820 (build: Propagate well-known vars into depends by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-09T07:40:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-611381317",
      "id" : 611381317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTM4MTMxNw==",
      "updated_at" : "2020-05-07T03:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611381317",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-09T15:42:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-611598690",
      "id" : 611598690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTU5ODY5MA==",
      "updated_at" : "2020-04-09T15:42:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611598690",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\n> As msan does a subset of what valgrind does, this is effectively testing valgrind, and not Bitcoin Core. Note that we already have a valgrind ci run.\r\n\r\nAre you sure the claim \"valgrind is a strict subset of MSAN\" holds also in the presence of compiler optimisations?\r\n\r\nSee the well-documented optimisation issues in the Valgrind documentation:\r\n\r\n_\"If you are planning to use Memcheck: On rare occasions, compiler optimisations (at -O2 and above, and sometimes -O1) have been observed to generate code which fools Memcheck into wrongly reporting uninitialised value errors, or **missing uninitialised value errors**.\"_\r\n\r\n_\"We have looked in detail into fixing this, and unfortunately the result is that doing so would give a further significant slowdown in what is already a slow tool. So the best solution is to turn off optimisation altogether. Since this often makes things unmanageably slow, a reasonable compromise is to use -O. This gets you the majority of the benefits of higher optimisation levels whilst keeping relatively small the chances of false positives or false negatives from Memcheck. Also, you should compile your code with -Wall because it can identify some or all of the problems that Valgrind can miss at the higher optimisation levels. (Using -Wall is also a good idea in general.)\"_\r\n\r\n#18785 appears to be a real-world example of this issue in our project.\r\n\r\nAlso note that MSAN is so much faster than Valgrind that it allows testing at lower optimization levels that would be practically impossible with Valgrind :)\r\n\r\nAnother reason to enable MSAN is that it allows for testing forks (we are currently disabling Valgrind in forks due to timeouts).\r\n\r\nI hope we can enable MSAN in Travis: that would improve our testing without any major downside AFAICT :)",
      "created_at" : "2020-04-28T06:41:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-620412471",
      "id" : 620412471,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDQxMjQ3MQ==",
      "updated_at" : "2020-04-28T06:41:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620412471",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Following up on yesterday's addition on information: is there anything I can change in this PR to make it more appropriate for Travis? :)\r\n\r\nPerhaps we can enable it for branch pushes to start with as you suggested in an earlier comment?\r\n\r\nI think everything that can help us guard against uninitialised reads entering `master` is worth considering :)",
      "created_at" : "2020-04-29T14:28:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-621247980",
      "id" : 621247980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTI0Nzk4MA==",
      "updated_at" : "2020-04-29T14:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621247980",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but this is waiting on the depends change to boost to go in first (and probably the non-ci related things as well)",
      "created_at" : "2020-04-29T15:06:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-621271590",
      "id" : 621271590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTI3MTU5MA==",
      "updated_at" : "2020-04-29T15:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621271590",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Do you mean #18308 (friendly ping @dongcarl)? :)",
      "created_at" : "2020-04-29T15:34:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-621289751",
      "id" : 621289751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTI4OTc1MQ==",
      "updated_at" : "2020-04-29T15:34:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621289751",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift can you drop your boost changes here, and rebase on #18820? We'll get the macOS issues sorted out.",
      "created_at" : "2020-05-07T12:07:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-625214815",
      "id" : 625214815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNTIxNDgxNQ==",
      "updated_at" : "2020-05-07T12:07:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625214815",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-07T12:43:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-625232032",
      "id" : 625232032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNTIzMjAzMg==",
      "updated_at" : "2020-05-07T12:43:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625232032",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated now that the depends change to boost has been merged in to `master`.\r\n\r\nThis PR should be ready for final review.\r\n\r\nIt has previously received concept ACK:ish comments from MarcoFalkeÂ¹, gmaxwellÂ² and SjorsÂ³:\r\n\r\n> Concept ACK, but this is waiting on the depends change to boost to go in first (and probably the non-ci related things as well)Â¹\r\n\r\n> I don't see any problem with making more use of msan, though it's not a complete replacement for valgrind. But more is more. :)Â²\r\n\r\n> Concept ACKÂ³\r\n\r\nIt should be noted that Valgrind testing has been removed from Travis (due to Valgrind being super slow) since this PR was first submitted.",
      "created_at" : "2020-06-01T09:01:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#issuecomment-636716594",
      "id" : 636716594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18288",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjcxNjU5NA==",
      "updated_at" : "2020-06-01T09:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636716594",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433164425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433164425"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure if we want to compile a random commit from the default branch. Is msan required to be built from source? Would it help if you used the Ubuntu focal libcxx like in #19041?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T10:45:30Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433164425",
      "id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE2NDQyNQ==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421751205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433164425",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433175123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433175123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Pinning against a specific commit in the LLVM repo sounds like a good idea :)\r\n\r\nUnfortunately I am not aware of any way to to achieve full MemorySanitizer instrumentation without linking against an MSan-instrumented C++ standard library, and I'm now aware of any way of doing so without compiling from source.\r\n\r\nFrom various parts of the MemorySanitizer documentation: _\"Full MemorySanitizer instrumentation is very difficult to achieve.\" [â¦] \"If you want MemorySanitizer to work properly and not produce any false positives, you must ensure that all the code in your program and in libraries it uses is instrumented (i.e. built with -fsanitize=memory). In particular, you would need to link against MSan-instrumented C++ standard library. We recommend to use libc++ for that purpose.\"_",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T11:11:46Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433175123",
      "id" : 433175123,
      "in_reply_to_id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3NTEyMw==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421764824,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433175123",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433178096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433178096"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Now pinning against `e5b8772756737e41cb1e8ee1a5a33cb3d8a25be6` (https://github.com/llvm/llvm-project/commit/e5b8772756737e41cb1e8ee1a5a33cb3d8a25be6) which happens to be the current `master` at the time of writing.",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T11:19:49Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433178096",
      "id" : 433178096,
      "in_reply_to_id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3ODA5Ng==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421768896,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433178096",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433178675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433178675"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, so the Ubuntu focal libcxx does not ship with  msan?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T11:21:19Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433178675",
      "id" : 433178675,
      "in_reply_to_id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3ODY3NQ==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421769600,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433178675",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433183859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433183859"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nope, I don't think so (in other words: it is not built with MSan-instrumentation AFAIK).",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T11:34:20Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433183859",
      "id" : 433183859,
      "in_reply_to_id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE4Mzg1OQ==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421776308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433183859",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433189350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433189350"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this needed and why can't the bdb from depends be used instead?",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T11:49:07Z",
      "diff_hunk" : "@@ -15,6 +15,10 @@ fi\n \n DOCKER_EXEC mkdir -p ${DEPENDS_DIR}/SDKs ${DEPENDS_DIR}/sdk-sources\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"contrib/install_db4.sh \\$(pwd) --enable-umrw CC=clang CXX=clang++ CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433189350",
      "id" : 433189350,
      "line" : 19,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE4OTM1MA==",
      "original_commit_id" : "95ca402bd919fda4a4e871b61cad3aa44d972e19",
      "original_line" : 19,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/test/05_before_script.sh",
      "position" : 5,
      "pull_request_review_id" : 421783385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433189350",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433201782"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433201782"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I tried to build bdb from depends first but couldn't get it to work with MSan instrumentation, so I simply switched to using `contrib/install_db4.sh` which worked out of the box. Perhaps @dongcarl or some other expert on the depends system would succeed where I failed :)\r\n\r\nNote that regardless of method of installation `--enable-umrw` is needed for MSan to work:\r\n\r\n```\r\n--enable-umrw\r\n\r\n    Rational Software's Purify product and other run-time tools complain about\r\n    uninitialized reads/writes of structure fields whose only purpose is padding,\r\n    as well as when heap memory that was never initialized is written to disk.\r\n    Specify the --enable-umrw argument during configuration to mask these\r\n    errors. This argument should not be specified when configuring to build\r\n    production binaries.\r\n```",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T12:21:12Z",
      "diff_hunk" : "@@ -15,6 +15,10 @@ fi\n \n DOCKER_EXEC mkdir -p ${DEPENDS_DIR}/SDKs ${DEPENDS_DIR}/sdk-sources\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"contrib/install_db4.sh \\$(pwd) --enable-umrw CC=clang CXX=clang++ CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433201782",
      "id" : 433201782,
      "in_reply_to_id" : 433189350,
      "line" : 19,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIwMTc4Mg==",
      "original_commit_id" : "95ca402bd919fda4a4e871b61cad3aa44d972e19",
      "original_line" : 19,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/test/05_before_script.sh",
      "position" : 5,
      "pull_request_review_id" : 421799614,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433201782",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433213461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433213461"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It would be good to document the error you ran into when building bdb in depends. Otherwise the workaround will be left in the code lingering likely forever.",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T12:48:05Z",
      "diff_hunk" : "@@ -15,6 +15,10 @@ fi\n \n DOCKER_EXEC mkdir -p ${DEPENDS_DIR}/SDKs ${DEPENDS_DIR}/sdk-sources\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"contrib/install_db4.sh \\$(pwd) --enable-umrw CC=clang CXX=clang++ CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433213461",
      "id" : 433213461,
      "in_reply_to_id" : 433189350,
      "line" : 19,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxMzQ2MQ==",
      "original_commit_id" : "95ca402bd919fda4a4e871b61cad3aa44d972e19",
      "original_line" : 19,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/test/05_before_script.sh",
      "position" : 5,
      "pull_request_review_id" : 421814987,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433213461",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433216775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433216775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure! I'll try to reproduce the issue: it was a while ago so I don't remember the details TBH :)",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T12:55:20Z",
      "diff_hunk" : "@@ -15,6 +15,10 @@ fi\n \n DOCKER_EXEC mkdir -p ${DEPENDS_DIR}/SDKs ${DEPENDS_DIR}/sdk-sources\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"contrib/install_db4.sh \\$(pwd) --enable-umrw CC=clang CXX=clang++ CFLAGS='${MSAN_FLAGS}' CXXFLAGS='${MSAN_AND_LIBCXX_FLAGS}'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433216775",
      "id" : 433216775,
      "in_reply_to_id" : 433189350,
      "line" : 19,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzIxNjc3NQ==",
      "original_commit_id" : "95ca402bd919fda4a4e871b61cad3aa44d972e19",
      "original_line" : 19,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/test/05_before_script.sh",
      "position" : 5,
      "pull_request_review_id" : 421819429,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433216775",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433259379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433259379"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Now pinning to v10.0.0 instead which feels less random :)",
      "commit_id" : "501a9716ab26aadae45bf217af2cb5301ad05f47",
      "created_at" : "2020-06-01T14:14:12Z",
      "diff_hunk" : "@@ -92,6 +92,15 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_SCRATCH_DIR}/sanitizer-output/\"\n \n+if [[ ${USE_MEMORY_SANITIZER} == \"true\" ]]; then\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang++ clang++ \\$(which clang++-8) 100\"\n+  DOCKER_EXEC \"update-alternatives --install /usr/bin/clang clang \\$(which clang-8) 100\"\n+  DOCKER_EXEC \"mkdir -p ${BASE_SCRATCH_DIR}/msan/build/\"\n+  DOCKER_EXEC \"git clone --depth=1 https://github.com/llvm/llvm-project ${BASE_SCRATCH_DIR}/msan/llvm-project\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18288#discussion_r433259379",
      "id" : 433259379,
      "in_reply_to_id" : 433164425,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI1OTM3OQ==",
      "original_commit_id" : "5c6abdc563426ae9954c47270638f2633635e18a",
      "original_line" : 99,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "ci/test/04_install.sh",
      "position" : null,
      "pull_request_review_id" : 421878759,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18288",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-01T14:14:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433259379",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
