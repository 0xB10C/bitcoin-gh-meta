[
   {
      "body" : "We know such routers existÃ¢ÂÂ they've been observed to impact p2pool users (which uses a similar protocol with checksums on the version messages).  But we don't know what brands or how common they are.  It's a pretty bone headed thing to do.\r\n\r\nRather than just ignoring it, it would probably be better to still log it but leave the connection up. Then we'd at least get some helpful logs.",
      "created_at" : "2012-02-10T03:56:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-3900812",
      "id" : 3900812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-10T03:56:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3900812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Huh this really surprises me. The IP replacement certainly exists, but used to be only for protocols like FTP and IRC that were known by the router, not in unknown binary data.\r\n",
      "created_at" : "2012-02-10T07:03:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-3902113",
      "id" : 3902113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-10T17:43:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3902113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'd really like to know more about the root and scope of the problem-- was this \"one or two people had problems with p2pool because they misconfigured iptables/netfilter\" or is it \"LinkSys routers automangle the first packet if its first N bytes look like it is an FTP session\" ?\r\n",
      "created_at" : "2012-02-10T17:00:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-3909524",
      "id" : 3909524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-10T17:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3909524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Unfortunately we don't know the scope.\r\n\r\nWe observed checksum errors on p2pool. Forrest investigated and found this to be the cause through some lucky reasoning.   It appeared to be two distinct users, out of something like 150 using P2Pool at the time. So, I'd guess we could be looking at incidents rates between something like 1:10 and 1:100000 in the general bitcoin using population. There could also be port number differences that moot it.\r\n\r\nIf this were just some new feature in 0.6 I wouldn't even bother talking about itÃ¢ÂÂ if we found it to be an issue in practice we'd just issue new software. But because its a network wide synchronized hardcut its more troubling.  I think the bluematt pull request is prudentÃ¢ÂÂ it's better behavior even if this is a non-issue, and should cleanly improve this behaviorÃ¢ÂÂ  Perhaps we should keep this particular patch in our pocket in case things go pear shaped?\r\n\r\nLuke suggested we send an alert 24 hour ahead of the switch saying that an automated switchover was about to take place and advising people to visit bitcoin.org for the latest information. This sounds prudent to me, since if it does go poorly (due to the nat or other issues) we may not be able to send an alert to the impacted users.\r\n",
      "created_at" : "2012-02-10T17:13:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-3909807",
      "id" : 3909807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-10T17:13:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3909807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "IMO consider keeping existing (feb20 switchover) behavior as default.  Add a \"no-version-csum\" (or \"fucked-router\") option.  I am deeply suspect of routers that randomly rewrite binary packets transited in unknown (to the router) binary protocols.\r\n\r\nWould rather err on the side of stronger checksum protection, and only weaken that as absolutely necessary.\r\n",
      "created_at" : "2012-02-17T15:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-4021574",
      "id" : 4021574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-17T15:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4021574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Given the lack of problems in the last 5 days (besides alternative implementations that didn't code in the change), I think this is safe to close as \"unnecessary.\"\r\n",
      "created_at" : "2012-02-25T21:51:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/816#issuecomment-4176503",
      "id" : 4176503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/816",
      "updated_at" : "2012-02-25T21:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4176503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
