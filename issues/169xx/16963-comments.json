[
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky maybe you have a better approach?",
      "created_at" : "2019-09-25T10:17:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-534955357",
      "id" : 534955357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk1NTM1Nw==",
      "updated_at" : "2019-09-25T10:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534955357",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch! But why exactly is the fix in #16955 incorrect? It seems like a reasonable workaround to me as long as the wallet still shows up in the GUI (which I would expect if `m_node.getWallets()` is called later). But if the wallet doesn't show up in the GUI then the bigger fix is needed.\r\n\r\nThis clone fix should work now, and is more elegant than the nullptr workaround, but wouldn't work great with #10102 unless I changed it to use shared_ptrs internally or complicate lifetime management some other way to support cloning.\r\n\r\nMore ideally, I would delete `uiInterface.LoadWallet` and `Chain::loadWallet` entirely and just not use boost signals for this callback. Instead I'd define a load wallet callback list (`std::list<LoadWalletFn> load_wallet_fns`) alongside the existing list of wallets (`std::vector<std::shared_ptr<CWallet>> vpwallets`), and push onto the list when `handleLoadWallet` is called, erase from the list when `Handler::disconnect` is called, and the replace existing line:\r\n\r\n```c++\r\nchain.loadWallet(interfaces::MakeWallet(walletInstance));\r\n```\r\n\r\nwith\r\n\r\n```c++\r\nfor (auto& load_wallet : load_wallet_fns) {\r\n    load_wallet(interfaces::MakeWallet(walletInstance));\r\n}\r\n```\r\n\r\nBut I'm ok with the nullptr fix or the clone fix or however you want to proceed here.",
      "created_at" : "2019-09-25T11:28:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-534978002",
      "id" : 534978002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk3ODAwMg==",
      "updated_at" : "2019-09-25T11:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534978002",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO it's incorrect because it doesn't remove the invalid `std::move`.",
      "created_at" : "2019-09-25T11:48:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-534984001",
      "id" : 534984001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk4NDAwMQ==",
      "updated_at" : "2019-09-25T11:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534984001",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> which I would expect if m_node.getWallets() is called later\r\n\r\nThere's nothing guaranteeing it (I think?)",
      "created_at" : "2019-09-25T11:50:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-534984556",
      "id" : 534984556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk4NDU1Ng==",
      "updated_at" : "2019-09-25T11:50:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534984556",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For reference, the bug was introduced in 1106a6fde4bfde31a16de45e4cc84ed5da05c5a4 #15288 - backport not required.",
      "created_at" : "2019-09-25T19:39:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-535179262",
      "id" : 535179262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTE3OTI2Mg==",
      "updated_at" : "2019-09-25T19:39:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535179262",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Related discussion https://github.com/bitcoin/bitcoin/pull/15288#discussion_r261062566.",
      "created_at" : "2019-09-25T19:41:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16963#issuecomment-535180083",
      "id" : 535180083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTE4MDA4Mw==",
      "updated_at" : "2019-09-25T19:41:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535180083",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
