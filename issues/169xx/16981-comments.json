[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Running `bitcoind --reindex` causes the client to reread the `.bitcoin/blocks/blknnnnn.dat` files and re-derive all the index and chainstate information. It's similar to IBD but the client uses these local files rather than download blocks from the network. As `LoadExternalBlockFile()` reads each block from disk, it checks to see if its parent has already been seen (and processed). If so, then this block can be immediately processed (by giving it to `AcceptBlock()`). If this block's parent hasn't yet been seen, it cannot be processed until after its parent is seen. Its prev-hash (parent's hash) is put into a map of \"pending\" blocks (called `mapBlocksUnknownParent`). Later, when its parent is encountered and processed, this map is consulted to see it has a child that's already been seen that can now be processed. If so, `LoadExternalBlockFile()` now has to go back and re-read the child block from disk (`ReadBlockFromDisk()`), deserialize it again, and then process (pass it to `AcceptBlock()`).\r\n\r\nPerformance isn't very good because about 90% of blocks are read before their parents are read. (I think this is a result of the headers-first IBD performance enhancement of a few years ago.) This can be seen by running `bitcoind --reindex --debug=reindex`, causing many messages like:\r\n```\r\n2019-09-29T00:29:00Z LoadExternalBlockFile: Out of order block 00000000a2268fb2d4ddc0408fae961a96668db58de415d3c9e0a7694eeb1657, parent 000000005fb53da5c3cda78aef28cbc44fde3e435f1dc2ac04df53387049171f not known\r\n```\r\nthen, a short time later:\r\n```\r\n2019-09-29T00:29:00Z LoadExternalBlockFile: Processing out of order child 00000000a2268fb2d4ddc0408fae961a96668db58de415d3c9e0a7694eeb1657 of 000000005fb53da5c3cda78aef28cbc44fde3e435f1dc2ac04df53387049171f\r\n```\r\nSo 90% of blocks end up being read from disk twice (actually, not twice, since the operating system's buffer cache likely still has the data, but there is still a memory-to-memory copy), and deserialized twice.\r\n\r\nThis PR mitigates this problem by taking advantage of the fact that recent blocks are still in the buffer (`blkdat`) that is used to read from the `blk` files. Since rewinding to an earlier offset in the buffer has been fixed by the recently merged #16577, we can see if the child block is still in memory (the probability is increased by making the buffer somewhat larger), and if so, avoid having to read the child block data from disk. It turns out that the child block is still in the buffer 60% of the time. This depends on some randomness that's introduced during IBD, so it may be different for you. (My IBD was done using all the default settings, nothing special.)\r\n\r\nThe second part of this change initially deserializes only the block header, rather than the entire block. since about 90% of the time we're going to have to process this block later; only the `hashPrevBlock` field of the header is needed to determine if we can process this block immediately (if this block's parent has been seen). This does mean that 10% of the time, we deserialize the header, and then immediately also the full block (where it would have been more efficient to simply deserialize the full block), but overall this is a big performance win.\r\n\r\nOn my system, this PR reduces the time to `--reindex` on mainnet by 48 minutes. I encourage reviewers to attempt to replicate my findings. Reindexing has two parts, reading the `blocks/blknnnnn.dat` files (which this PR improves), and then connecting the blocks to the blockchain (the `UpdateTip` messages), which this PR doesn't affect. For me, this PR reduces the first part from 123 to 75 minutes. After you start seeing `UpdateTip` messages, you can stop the client, and you will have the time measurement you need from `debug.log`.",
      "created_at" : "2019-09-29T01:32:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-536238638",
      "id" : 536238638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjIzODYzOA==",
      "updated_at" : "2019-09-30T15:40:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536238638",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r329333473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329333473"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This `LogPrint` probably should be combined with the (existing) one a few lines below before merging, but I wanted reviewers to be aware of when the new code is being run.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-09-29T01:35:24Z",
      "diff_hunk" : "@@ -4633,14 +4642,31 @@ bool LoadExternalBlockFile(const CChainParams& chainparams, FILE* fileIn, FlatFi\n                     std::pair<std::multimap<uint256, FlatFilePos>::iterator, std::multimap<uint256, FlatFilePos>::iterator> range = mapBlocksUnknownParent.equal_range(head);\n                     while (range.first != range.second) {\n                         std::multimap<uint256, FlatFilePos>::iterator it = range.first;\n+                        // see if the needed child block is still in the buffer\n+                        const FlatFilePos pos = it->second;\n+                        bool haveChildBlock = false;\n                         std::shared_ptr<CBlock> pblockrecursive = std::make_shared<CBlock>();\n-                        if (ReadBlockFromDisk(*pblockrecursive, it->second, chainparams.GetConsensus()))\n-                        {\n+                        // performance optimization -- else path would always work\n+                        if (dbp && pos.nFile == dbp->nFile && blkdat.SetPos(pos.nPos - sizeof(uint32_t))) {\n+                            // block is still in memory, positioned to the start of the size field\n+                            haveChildBlock = true;\n+                            blkdat.SetLimit(pos.nPos);\n+                            blkdat >> nSize;\n+                            CBlock& blockrecursive = *pblockrecursive;\n+                            blkdat.SetLimit(pos.nPos + nSize);\n+                            blkdat >> blockrecursive;\n+                            LogPrint(BCLog::REINDEX, \"%s: Processing in-memory out of order child %s of %s\\n\", __func__, pblockrecursive->GetHash().ToString(),\n+                                    head.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r329333473",
      "id" : 329333473,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTMzMzQ3Mw==",
      "original_commit_id" : "48c0cc724510add8753ff27e6f4a534cb7a37dbb",
      "original_position" : 81,
      "path" : "src/validation.cpp",
      "position" : 107,
      "pull_request_review_id" : 294660183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329333473",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r329333593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329333593"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't know how to write a unit test for this PR (there are no existing unit tests for any of this area of the code), but `test/functional/wallet_basic.py` does run through the new code -- you can add an `assert(false)` here and that test fails, so that's at least something.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-09-29T01:40:43Z",
      "diff_hunk" : "@@ -4633,14 +4642,31 @@ bool LoadExternalBlockFile(const CChainParams& chainparams, FILE* fileIn, FlatFi\n                     std::pair<std::multimap<uint256, FlatFilePos>::iterator, std::multimap<uint256, FlatFilePos>::iterator> range = mapBlocksUnknownParent.equal_range(head);\n                     while (range.first != range.second) {\n                         std::multimap<uint256, FlatFilePos>::iterator it = range.first;\n+                        // see if the needed child block is still in the buffer\n+                        const FlatFilePos pos = it->second;\n+                        bool haveChildBlock = false;\n                         std::shared_ptr<CBlock> pblockrecursive = std::make_shared<CBlock>();\n-                        if (ReadBlockFromDisk(*pblockrecursive, it->second, chainparams.GetConsensus()))\n-                        {\n+                        // performance optimization -- else path would always work\n+                        if (dbp && pos.nFile == dbp->nFile && blkdat.SetPos(pos.nPos - sizeof(uint32_t))) {\n+                            // block is still in memory, positioned to the start of the size field\n+                            haveChildBlock = true;\n+                            blkdat.SetLimit(pos.nPos);\n+                            blkdat >> nSize;\n+                            CBlock& blockrecursive = *pblockrecursive;\n+                            blkdat.SetLimit(pos.nPos + nSize);\n+                            blkdat >> blockrecursive;\n+                            LogPrint(BCLog::REINDEX, \"%s: Processing in-memory out of order child %s of %s\\n\", __func__, pblockrecursive->GetHash().ToString(),\n+                                    head.ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r329333593",
      "id" : 329333593,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTMzMzU5Mw==",
      "original_commit_id" : "48c0cc724510add8753ff27e6f4a534cb7a37dbb",
      "original_position" : 81,
      "path" : "src/validation.cpp",
      "position" : 107,
      "pull_request_review_id" : 294660183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329333593",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the suggestion, @promag, done (force-pushed).",
      "created_at" : "2019-09-30T04:42:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-536398435",
      "id" : 536398435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjM5ODQzNQ==",
      "updated_at" : "2019-09-30T04:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536398435",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I forgot to update the `CBufferedFile` unit tests, just did that and another force-push.",
      "created_at" : "2019-09-30T05:40:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-536409070",
      "id" : 536409070,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjQwOTA3MA==",
      "updated_at" : "2019-09-30T05:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536409070",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I changed this PR to WIP because I thought of a further improvement, which I'll try to push by the end of the week. It will build on the existing two commits, so reviewing those wouldn't be a waste of time. Thanks in advance for any reviews and suggestions.",
      "created_at" : "2019-10-01T14:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-537068616",
      "id" : 537068616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzA2ODYxNg==",
      "updated_at" : "2019-10-01T14:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537068616",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15606](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15606.html) ([experimental] UTXO snapshots by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-10-03T20:46:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-538121393",
      "id" : 538121393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzODEyMTM5Mw==",
      "updated_at" : "2019-11-09T03:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/538121393",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333082059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333082059"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is a much larger buffer (640 mb), but it only exists during the first phase of reindexing (when you see `Reindexing block...` in the debug log); after that, the `bitcoind` memory usage increases for other reasons anyway. During the first phase, memory (`VSZ` in the ps output) is about 2.4 gb on my system; afterwards (when it's logging `UpdateTip: new best...`), it's about 3.5 gb. The benefit of a large buffer is that a larger fraction of the out-of-order blocks (that have to be processed later, when their parents are seen) can be found in memory, rather than having to read them again from disk. The \"hit ratio\" with this buffer size is just under 99%. The difference between 160 (but overall buffer size in max-blocks)) and 140 (the rewind limit) determines the size of disk reads (the larger, the better, more efficient).",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-09T15:29:02Z",
      "diff_hunk" : "@@ -668,6 +668,7 @@ static void ThreadImport(std::vector<fs::path> vImportFiles)\n \n     // -reindex\n     if (fReindex) {\n+        CBufferedFile blkdat(160*MAX_BLOCK_SERIALIZED_SIZE, 140*MAX_BLOCK_SERIALIZED_SIZE, SER_DISK, CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333082059",
      "id" : 333082059,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzA4MjA1OQ==",
      "original_commit_id" : "7af058771e3dfc40ee2855a5e5e102b9b2b57361",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 299501549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333082059",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333083169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333083169"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This method is unused, and really doesn't make sense. The buffer contents should match file (or, now, files) content, and this messes that up. If it's needed in the future, it can be re-thought.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-09T15:30:57Z",
      "diff_hunk" : "@@ -816,18 +839,6 @@ class CBufferedFile\n         return true;\n     }\n \n-    bool Seek(uint64_t nPos) {\n-        long nLongPos = nPos;\n-        if (nPos != (uint64_t)nLongPos)\n-            return false;\n-        if (fseek(src, nLongPos, SEEK_SET))\n-            return false;\n-        nLongPos = ftell(src);\n-        nSrcPos = nLongPos;\n-        nReadPos = nLongPos;\n-        return true;\n-    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333083169",
      "id" : 333083169,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzA4MzE2OQ==",
      "original_commit_id" : "7af058771e3dfc40ee2855a5e5e102b9b2b57361",
      "original_position" : 108,
      "path" : "src/streams.h",
      "position" : 98,
      "pull_request_review_id" : 299501549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333083169",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333088941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333088941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These `pim` (out-of-order block found in-memory) and `pom` (out-of-order block not in memory) let reviewers see the effectiveness of the read caching during testing; they can be removed before merging. Here's a typical instance:\r\n```\r\n2019-10-09T15:28:17Z Loaded 839 blocks from external file in 11729ms pim 726 pom 95\r\n```\r\nThis means 821 (726+95) blocks were processed out-of-order, so 18 (839-821) blocks were processed in-order (their parents had already been seen). This is typical, and shows that almost all blocks are processed out-of-order. With this PR, 726 of these out-of-order blocks were recent enough that they were still in the buffer, and 95 had already been pushed out and had to be read again from disk. Overall, 99% of the out-of-order blocks are still in the buffer.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-09T15:41:52Z",
      "diff_hunk" : "@@ -4659,7 +4693,8 @@ bool LoadExternalBlockFile(const CChainParams& chainparams, FILE* fileIn, FlatFi\n         AbortNode(std::string(\"System error: \") + e.what());\n     }\n     if (nLoaded > 0)\n-        LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, GetTimeMillis() - nStart);\n+        LogPrintf(\"Loaded %i blocks from external file in %dms pim %i pom %i\\n\",\n+            nLoaded, GetTimeMillis() - nStart, nProcessedInMem, nProcessedOutMem);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r333088941",
      "id" : 333088941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzA4ODk0MQ==",
      "original_commit_id" : "7af058771e3dfc40ee2855a5e5e102b9b2b57361",
      "original_position" : 129,
      "path" : "src/validation.cpp",
      "position" : 130,
      "pull_request_review_id" : 299501549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333088941",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Testnet performance isn't important, but as a sanity check, I verified that the new code runs faster there too on my laptop. The time between `Reindexing block file blk00001.dat...` and `Reindexing finished` reduced from 10m21s to 7m13s.",
      "created_at" : "2019-10-11T16:32:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-541134716",
      "id" : 541134716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MTEzNDcxNg==",
      "updated_at" : "2019-10-11T16:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541134716",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2019-10-11T19:30:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-541194728",
      "id" : 541194728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MTE5NDcyOA==",
      "updated_at" : "2019-10-11T19:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541194728",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@mzumsande, those are very good thoughts, thank you. I will study this further (and invite others to also). One nice thing about this design is that any amount of memory will work, in that it will be an improvement -- it is one of those classic space-time tradeoffs. The idea of making the buffer not have a hard-coded size is intriguing and promising. I think we would not go back to the pre-second iteration (multiple-files), because even reducing the buffer memory to the original amount would be improved by the multi-file version. (That is to say, there is no downside to the latest version here.) That's because all the multi-file commit means is that we do not discard cached data when switching files.\r\n\r\nOne thing I hope I made clear enough in an earlier comment is that I tried to keep the memory usage during reindexing be strictly _less_ than what is needed during normal operation, so that there would be no overall increase in memory demand. We certainly would not want this design to create a *spike* (high water mark) of memory usage. But I was very likely mistaken, since I was not aware that memory could be \"dialed down\" for small environments.",
      "created_at" : "2019-10-13T06:32:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-541391295",
      "id" : 541391295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MTM5MTI5NQ==",
      "updated_at" : "2019-10-13T06:32:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541391295",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I force-pushed a reorganization of the commits to make reviewing easier. I split the largest commit, **speed up reindex by reading out-of-order blocks from memory**, into two separate commits:\r\n1. Commit message: **initially deserialize only CBlockHeader, not CBlock**. Deserialize only a block header (only 32 bytes) initially, instead of a full block. The block header is all that's needed to tell us if this block's parent has been seen yet; if not, the block will have to be deserialized later, after its parent is found. Nearly all blocks (89% on my system) are seen before their parents, so this is a big improvement.\r\n1. Commit message: **speed up reindex by reading out-of-order blocks from memory**. If we've just processed a block that's the parent of an earlier-seen block, we must now process that earlier block. Instead of always reading that block from disk, see if it happens to still be in the circular disk read memory buffer ('CBufferedFile blkdat`). This saves a disk read.\r\n\r\nWe could merge the first commit without the second. The first commit is pretty simple; the second commit is a little more involved.\r\n\r\nThese two commits have a buffer size unchanged from master, 8mb (`2*MAX_BLOCK_SERIALIZED_SIZE`), so there is no change in memory usage. But with this buffer size, only 29% of the out-of-order blocks are found in the buffer. If we increase the buffer by not too much (as I did in an earlier commit that's now been erased by force-push, 640mb), to 32mb, the \"hit rate\" increases to 50%. This is probably a good space-time balance.\r\n\r\nHere are the block-load times on my system (with all default settings), which is just the first part of reindexing (each row builds on the previous row):\r\n\r\n| version | real time (minutes) |\r\n| ----------- | ----------- |\r\n| master | 130 |\r\n| deserialize only header | 90 |\r\n| look for blocks in buffer, 8mb |84 |\r\n| look for blocks in buffer, 32mb |78 |\r\n| look for blocks in buffer, 640mb |72 |\r\n\r\n(Take with a grain of salt, because the times varied even on identical runs, and a lot probably depends on the specifics of my system.) Keep in mind that this buffer exists only during the block-load part of reindex.",
      "created_at" : "2019-10-15T03:29:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-542020115",
      "id" : 542020115,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjAyMDExNQ==",
      "updated_at" : "2019-10-15T03:32:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542020115",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336254578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336254578"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is it necessary to remove the `FILE` from the constructor? Couldn't you just initialize it with `nullptr` in the multi-file case and call `SetFile()` later, so that there need to be no syntax changes for the single-file case? It is also easy to create a `CBufferedFile` object and forget about `SetFile()`, leading to a memory access violation.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-17T22:30:10Z",
      "diff_hunk" : "@@ -762,12 +763,12 @@ class CBufferedFile\n     }\n \n public:\n-    CBufferedFile(FILE *fileIn, uint64_t nBufSize, uint64_t nRewindIn, int nTypeIn, int nVersionIn) :\n-        nType(nTypeIn), nVersion(nVersionIn), nSrcPos(0), nReadPos(0), nReadLimit(std::numeric_limits<uint64_t>::max()), nRewind(nRewindIn), vchBuf(nBufSize, 0)\n+    CBufferedFile(uint64_t nBufSize, uint64_t nRewindIn, int nTypeIn, int nVersionIn) :",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336254578",
      "id" : 336254578,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjI1NDU3OA==",
      "original_commit_id" : "b2919cad00665ee536c4cbb8af21c8ecded01634",
      "original_position" : 14,
      "path" : "src/streams.h",
      "position" : null,
      "pull_request_review_id" : 303582448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336254578",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336257157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336257157"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: This could be moved into the `if` block (same for -loadblock below)",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-17T22:39:31Z",
      "diff_hunk" : "@@ -689,11 +691,13 @@ static void ThreadImport(std::vector<fs::path> vImportFiles)\n     // hardcoded $DATADIR/bootstrap.dat\n     fs::path pathBootstrap = GetDataDir() / \"bootstrap.dat\";\n     if (fs::exists(pathBootstrap)) {\n+        CBufferedFile blkdat(2*MAX_BLOCK_SERIALIZED_SIZE, MAX_BLOCK_SERIALIZED_SIZE+8, SER_DISK, CLIENT_VERSION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336257157",
      "id" : 336257157,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjI1NzE1Nw==",
      "original_commit_id" : "c91b547afb60a5a275b779b79b02c10708ccc95d",
      "original_position" : 22,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 303582448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336257157",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336259458"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336259458"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the pim/pom statistics is useful, but maybe too special for the main log. You could use a separate `BCLog::REINDEX` message for that information.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-17T22:49:00Z",
      "diff_hunk" : "@@ -4659,7 +4693,8 @@ bool LoadExternalBlockFile(const CChainParams& chainparams, FILE* fileIn, FlatFi\n         AbortNode(std::string(\"System error: \") + e.what());\n     }\n     if (nLoaded > 0)\n-        LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, GetTimeMillis() - nStart);\n+        LogPrintf(\"Loaded %i blocks from external file in %dms pim %i pom %i\\n\",\n+            nLoaded, GetTimeMillis() - nStart, nProcessedInMem, nProcessedOutMem);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336259458",
      "id" : 336259458,
      "in_reply_to_id" : 333088941,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjI1OTQ1OA==",
      "original_commit_id" : "7af058771e3dfc40ee2855a5e5e102b9b2b57361",
      "original_position" : 129,
      "path" : "src/validation.cpp",
      "position" : 130,
      "pull_request_review_id" : 303582448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336259458",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Under what circumstances is a `-reindex` needed these days? Only when disabling `-prune`? Though, then you'll download from the network anyway.",
      "created_at" : "2019-10-18T12:58:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-543730430",
      "id" : 543730430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzczMDQzMA==",
      "updated_at" : "2019-10-18T12:58:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543730430",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336794478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336794478"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@mzumsande, good idea, I restored that argument to the constructor.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-20T20:00:54Z",
      "diff_hunk" : "@@ -762,12 +763,12 @@ class CBufferedFile\n     }\n \n public:\n-    CBufferedFile(FILE *fileIn, uint64_t nBufSize, uint64_t nRewindIn, int nTypeIn, int nVersionIn) :\n-        nType(nTypeIn), nVersion(nVersionIn), nSrcPos(0), nReadPos(0), nReadLimit(std::numeric_limits<uint64_t>::max()), nRewind(nRewindIn), vchBuf(nBufSize, 0)\n+    CBufferedFile(uint64_t nBufSize, uint64_t nRewindIn, int nTypeIn, int nVersionIn) :",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r336794478",
      "id" : 336794478,
      "in_reply_to_id" : 336254578,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjc5NDQ3OA==",
      "original_commit_id" : "b2919cad00665ee536c4cbb8af21c8ecded01634",
      "original_position" : 14,
      "path" : "src/streams.h",
      "position" : null,
      "pull_request_review_id" : 304275665,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-20T20:00:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336794478",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke Building new indices is required if upgrading from pre-0.17 to post-0.17 (https://bitcoin.org/en/release/v0.17.0) with a txindex.\r\n\r\n>If your node has a txindex, the txindex db will be migrated the first time you run 0.17.0 or newer, which may take up to a few hours. Your node will not be functional until this migration completes.\r\n\r\nI haven't looked into whether this PR speeds up that process, but it is something to consider.",
      "created_at" : "2019-10-21T01:11:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-544313666",
      "id" : 544313666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDMxMzY2Ng==",
      "updated_at" : "2019-10-21T01:11:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544313666",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3648618?v=4",
         "events_url" : "https://api.github.com/users/leishman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/leishman/followers",
         "following_url" : "https://api.github.com/users/leishman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/leishman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/leishman",
         "id" : 3648618,
         "login" : "leishman",
         "node_id" : "MDQ6VXNlcjM2NDg2MTg=",
         "organizations_url" : "https://api.github.com/users/leishman/orgs",
         "received_events_url" : "https://api.github.com/users/leishman/received_events",
         "repos_url" : "https://api.github.com/users/leishman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/leishman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/leishman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/leishman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r337597803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337597803"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Does it bother anyone else that this is `static`? This is global state, which, in general, equals evil. It must be static, given that it's declared here, since its state must persist across calls to this function (very often, a block and its parent are in different `blk` files). We could eliminate this global state by allocating this map in the caller of this function, `src/init.cpp: ThreadImport()`, and passing it by reference to `LoadExternalBlockFile()`. \r\n\r\nAnother thing that seems missing from the current design is, what happens if there are leftover entries in this map after reindexing has completed? That means we've read blocks from disk but never found their parent blocks. In my testing, this map is empty at the end of reindexing, as expected. But what if it wasn't? That would mean we're missing one or more `blocks/blk00nnn.dat` files, or some blocks from those files. Isn't that worth at least a `LogPrintf()`? Making this change would also require moving the map out to the caller, because this function doesn't know if it will be called again.",
      "commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "created_at" : "2019-10-22T15:43:38Z",
      "diff_hunk" : "@@ -4592,16 +4592,20 @@ bool LoadGenesisBlock(const CChainParams& chainparams)\n     return ::ChainstateActive().LoadGenesisBlock(chainparams);\n }\n \n-bool LoadExternalBlockFile(const CChainParams& chainparams, FILE* fileIn, FlatFilePos *dbp)\n+bool LoadExternalBlockFile(const CChainParams& chainparams, CBufferedFile& blkdat, FlatFilePos *dbp)\n {\n     // Map of disk positions for blocks with unknown parent (only used for reindex)\n-    static std::multimap<uint256, FlatFilePos> mapBlocksUnknownParent;\n+    struct unknownParentPos {\n+        FlatFilePos filePos;\n+        uint64_t pos;\n+    };\n+    static std::multimap<uint256, unknownParentPos> mapBlocksUnknownParent;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#discussion_r337597803",
      "id" : 337597803,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzU5NzgwMw==",
      "original_commit_id" : "869aed06b9085f03c24d1b14a546ca333b2eb438",
      "original_position" : 13,
      "path" : "src/validation.cpp",
      "position" : 13,
      "pull_request_review_id" : 305312876,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16981",
      "updated_at" : "2019-10-22T15:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337597803",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @MarcoFalke Building new indices is required if upgrading from pre-0.17 to post-0.17 (https://bitcoin.org/en/release/v0.17.0) with a txindex.\r\n\r\nIsn't `-reindex-chainstate` enough in that case? I don't think that requres a rescan of the block files.\r\n",
      "created_at" : "2019-10-30T11:40:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-547861097",
      "id" : 547861097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0Nzg2MTA5Nw==",
      "updated_at" : "2019-10-30T11:41:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547861097",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-30T16:19:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-547989447",
      "id" : 547989447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0Nzk4OTQ0Nw==",
      "updated_at" : "2019-10-30T16:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547989447",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased. I think running `--reindex` is also good when for whatever reason you don't trust your index files; for example, think files may be missing or may have been corrupted. It's true that in that case you could just re-IBD, but this is faster and less disruptive to peers.\r\n\r\nI wasn't sure how much variation there might be in the runtimes I posted here earlier, so to get a few more data points, I added `assert(0)` immediately after printing `Reindexing finished`, and ran `bitcoind --reindex` several times in a shell loop, timing each run (using the standard `time` bash builtin). Here are the real times without this PR (which I reported as 130 minutes in the earlier comment):\r\n```\r\nreal\t131m52.120s\r\nreal\t130m55.904s\r\nreal\t133m20.911s\r\nreal\t134m37.052s\r\nreal\t146m17.564s\r\nreal\t135m17.301s\r\n```\r\nand here are the times for runs with this PR (I ran this a few more times), this is what I reported as 84 minutes above:\r\n```\r\nreal\t79m55.050s\r\nreal\t92m30.341s\r\nreal\t82m44.119s\r\nreal\t80m50.067s\r\nreal\t89m31.793s\r\nreal\t87m36.802s\r\nreal\t97m42.247s\r\nreal\t86m31.999s\r\nreal\t87m13.304s\r\nreal\t82m21.497s\r\n```",
      "created_at" : "2019-10-30T21:34:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-548122336",
      "id" : 548122336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0ODEyMjMzNg==",
      "updated_at" : "2019-10-30T21:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/548122336",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-11-05T19:02:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-549970174",
      "id" : 549970174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTk3MDE3NA==",
      "updated_at" : "2019-11-05T19:02:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549970174",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to fix merge conflicts, force-pushed.",
      "created_at" : "2019-11-07T19:34:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-551230310",
      "id" : 551230310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTIzMDMxMA==",
      "updated_at" : "2019-11-07T19:34:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551230310",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased, force-pushed",
      "created_at" : "2019-11-21T17:41:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16981#issuecomment-557195051",
      "id" : 557195051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16981",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NzE5NTA1MQ==",
      "updated_at" : "2019-11-21T17:41:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557195051",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   }
]
