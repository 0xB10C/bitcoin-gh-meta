[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220243205"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220243205"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it'd be more correct to add a `std::unordered_map<std::string, BerkeleyFileid> m_fileids` member in `BerkeleyEnvironment` member instead of a `g_fileids` global because there can be duplicate filenames if the files are in different directories.\r\n\r\nAlso, making this a member would be consistent with existing `mapFileUseCount` `mapDb` members there which are also maps indexed by filename. In the future it could be nice to consolidate the 3 maps.",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T15:32:43Z",
      "diff_hunk" : "@@ -20,6 +21,12 @@\n #include <boost/thread.hpp>\n \n namespace {\n+\n+struct BerkeleyFileid {\n+    u_int8_t value[DB_FILE_ID_LEN];\n+};\n+std::unordered_map<std::string, BerkeleyFileid> g_fileids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220243205",
      "id" : 220243205,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDI0MzIwNQ==",
      "original_commit_id" : "4d5a58b1d242edd9b57bd7ac905e690c9dd362e8",
      "original_position" : 16,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 158605964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220243205",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220267509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220267509"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Updated",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T16:38:29Z",
      "diff_hunk" : "@@ -20,6 +21,12 @@\n #include <boost/thread.hpp>\n \n namespace {\n+\n+struct BerkeleyFileid {\n+    u_int8_t value[DB_FILE_ID_LEN];\n+};\n+std::unordered_map<std::string, BerkeleyFileid> g_fileids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220267509",
      "id" : 220267509,
      "in_reply_to_id" : 220243205,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDI2NzUwOQ==",
      "original_commit_id" : "4d5a58b1d242edd9b57bd7ac905e690c9dd362e8",
      "original_position" : 16,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 158636052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220267509",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #14316 (tests: exclude all tests with difference parameters in `--exclude` list by ken2812221)\n* #14275 (tests: Write the notification message to different files to avoid race condition in feature_notifications.py by ken2812221)\n* #11911 (Free CDBEnv instances when not in use by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-25T17:01:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#issuecomment-424423106",
      "id" : 424423106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14320",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDQyMzEwNg==",
      "updated_at" : "2018-09-25T17:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424423106",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220277755"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220277755"
         }
      },
      "author_association" : "MEMBER",
      "body" : "move `memcmp` to `BerkeleyFileid::operator==`?",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T17:10:26Z",
      "diff_hunk" : "@@ -29,27 +30,24 @@ namespace {\n //! (https://docs.oracle.com/cd/E17275_01/html/programmer_reference/program_copy.html),\n //! so bitcoin should never create different databases with the same fileid, but\n //! this error can be triggered if users manually copy database files.\n-void CheckUniqueFileid(const BerkeleyEnvironment& env, const std::string& filename, Db& db)\n+void CheckUniqueFileid(BerkeleyEnvironment& env, const std::string& filename, Db& db)\n {\n     if (env.IsMock()) return;\n \n-    u_int8_t fileid[DB_FILE_ID_LEN];\n-    int ret = db.get_mpf()->get_fileid(fileid);\n+    BerkeleyFileid fileid;\n+    int ret = db.get_mpf()->get_fileid(fileid.value);\n     if (ret != 0) {\n         throw std::runtime_error(strprintf(\"BerkeleyBatch: Can't open database %s (get_fileid failed with %d)\", filename, ret));\n     }\n \n-    for (const auto& item : env.mapDb) {\n-        u_int8_t item_fileid[DB_FILE_ID_LEN];\n-        if (item.second && item.second->get_mpf()->get_fileid(item_fileid) == 0 &&\n-            memcmp(fileid, item_fileid, sizeof(fileid)) == 0) {\n-            const char* item_filename = nullptr;\n-            item.second->get_dbname(&item_filename, nullptr);\n+    for (const auto& item : env.m_fileids) {\n+        if (item.first != filename && memcmp(fileid.value, item.second.value, sizeof(fileid)) == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220277755",
      "id" : 220277755,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDI3Nzc1NQ==",
      "original_commit_id" : "839142c826f5e3376dbbfaad6ae63b795497dc56",
      "original_position" : 32,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 158649211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220277755",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220290148"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220290148"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since `CheckUniqueFileid` is called on all `BerkeleyEnvironment` instances, this will incorrectly add the filename to unrelated BerkeleyEnvironment instances that don't actually contain `filename`. I'd suggest dropping this line, adding a `BerkeleyFileid& fileid` output parameter to `CheckUniqueFileid`, and passing in `this->env->m_fileids[strFilename]` where `CheckUniqueFileid` is called in `BerkeleyBatch::BerkeleyBatch`.",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T17:45:51Z",
      "diff_hunk" : "@@ -29,27 +30,24 @@ namespace {\n //! (https://docs.oracle.com/cd/E17275_01/html/programmer_reference/program_copy.html),\n //! so bitcoin should never create different databases with the same fileid, but\n //! this error can be triggered if users manually copy database files.\n-void CheckUniqueFileid(const BerkeleyEnvironment& env, const std::string& filename, Db& db)\n+void CheckUniqueFileid(BerkeleyEnvironment& env, const std::string& filename, Db& db)\n {\n     if (env.IsMock()) return;\n \n-    u_int8_t fileid[DB_FILE_ID_LEN];\n-    int ret = db.get_mpf()->get_fileid(fileid);\n+    BerkeleyFileid fileid;\n+    int ret = db.get_mpf()->get_fileid(fileid.value);\n     if (ret != 0) {\n         throw std::runtime_error(strprintf(\"BerkeleyBatch: Can't open database %s (get_fileid failed with %d)\", filename, ret));\n     }\n \n-    for (const auto& item : env.mapDb) {\n-        u_int8_t item_fileid[DB_FILE_ID_LEN];\n-        if (item.second && item.second->get_mpf()->get_fileid(item_fileid) == 0 &&\n-            memcmp(fileid, item_fileid, sizeof(fileid)) == 0) {\n-            const char* item_filename = nullptr;\n-            item.second->get_dbname(&item_filename, nullptr);\n+    for (const auto& item : env.m_fileids) {\n+        if (item.first != filename && memcmp(fileid.value, item.second.value, sizeof(fileid)) == 0) {\n             throw std::runtime_error(strprintf(\"BerkeleyBatch: Can't open database %s (duplicates fileid %s from %s)\", filename,\n-                HexStr(std::begin(item_fileid), std::end(item_fileid)),\n-                item_filename ? item_filename : \"(unknown database)\"));\n+                HexStr(std::begin(item.second.value), std::end(item.second.value)), item.first));\n         }\n     }\n+\n+    env.m_fileids.emplace(filename, fileid);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220290148",
      "id" : 220290148,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDI5MDE0OA==",
      "original_commit_id" : "0ce468502b1438a81f7b00c4614fc04c99babdeb",
      "original_position" : 40,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 158664541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220290148",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220293029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220293029"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Fix broken Windows file lock\"\r\n\r\nCan you describe how the lock is broken in the commit message?",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T17:53:54Z",
      "diff_hunk" : "@@ -89,7 +89,7 @@ bool FileLock::TryLock()\n         return false;\n     }\n     _OVERLAPPED overlapped = {0};\n-    if (!LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped)) {\n+    if (!LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, -1, -1, &overlapped)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220293029",
      "id" : 220293029,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDI5MzAyOQ==",
      "original_commit_id" : "87a39fcdd6c8ff44348bcc86c289cb4ffac5b25e",
      "original_position" : 5,
      "path" : "src/fs.cpp",
      "position" : 5,
      "pull_request_review_id" : 158664541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220293029",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220328915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220328915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That was introduced by #13862. I assume that it could work with length 0 if it is a exclusive lock, but it doesn't. I would have to specify -1, -1 to make it work.\r\n\r\nThe boost implementation:\r\n\r\nhttps://github.com/boostorg/interprocess/blob/8b3621353017aa527a22124655c9458d0b64b358/include/boost/interprocess/detail/os_file_functions.hpp#L230-L243",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T19:42:04Z",
      "diff_hunk" : "@@ -89,7 +89,7 @@ bool FileLock::TryLock()\n         return false;\n     }\n     _OVERLAPPED overlapped = {0};\n-    if (!LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped)) {\n+    if (!LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, -1, -1, &overlapped)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220328915",
      "id" : 220328915,
      "in_reply_to_id" : 220293029,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDMyODkxNQ==",
      "original_commit_id" : "87a39fcdd6c8ff44348bcc86c289cb4ffac5b25e",
      "original_position" : 5,
      "path" : "src/fs.cpp",
      "position" : 5,
      "pull_request_review_id" : 158712346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:42:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220328915",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220332273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220332273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note that if two or more BerkeleyDatabase share the same BerkeleyEnvironment, the `env` would be a wild pointer after the first call.",
      "commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "created_at" : "2018-09-25T19:52:49Z",
      "diff_hunk" : "@@ -826,6 +826,8 @@ void BerkeleyDatabase::Flush(bool shutdown)\n             LOCK(cs_db);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14320#discussion_r220332273",
      "id" : 220332273,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDMzMjI3Mw==",
      "original_commit_id" : "f31c3fcc88960503bea5fd2d078286f93cf2416e",
      "original_position" : 63,
      "path" : "src/wallet/db.cpp",
      "position" : 63,
      "pull_request_review_id" : 158716478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14320",
      "updated_at" : "2018-09-25T19:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220332273",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   }
]
