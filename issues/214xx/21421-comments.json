[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21421#discussion_r593043238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21421"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593043238"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm confused by this comment as it contradicts the [one](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458#c4) from bugzilla:\r\n> ... Windows has been doing stack clash protection since day `#1`",
      "commit_id" : "7b3434f8002d1a8cf0dbd0a0caef28e783b1efd8",
      "created_at" : "2021-03-12T09:49:32Z",
      "diff_hunk" : "@@ -866,11 +866,16 @@ if test x$use_hardening != xno; then\n   dnl Use CHECK_LINK_FLAG & --fatal-warnings to ensure we won't use the flag in this case.\n   AX_CHECK_LINK_FLAG([-fcf-protection=full],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fcf-protection=full\"],, [[$LDFLAG_WERROR]])\n \n-  dnl stack-clash-protection does not work properly when building for Windows.\n-  dnl We use the test case from https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458\n-  dnl to determine if it can be enabled.\n-  AX_CHECK_COMPILE_FLAG([-fstack-clash-protection],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-clash-protection\"],[],[\"-O0\"],\n-    [AC_LANG_SOURCE([[class D {public: unsigned char buf[32768];}; int main() {D d; return 0;}]])])\n+  case $host in\n+    *mingw*)\n+      dnl stack-clash-protection doesn't currently work, and likely should just be skipped for Windows.\n+      dnl See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458 for more details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21421#discussion_r593043238",
      "id" : 593043238,
      "line" : 872,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzA0MzIzOA==",
      "original_commit_id" : "7b3434f8002d1a8cf0dbd0a0caef28e783b1efd8",
      "original_line" : 872,
      "original_position" : 12,
      "original_start_line" : 871,
      "path" : "configure.ac",
      "position" : 12,
      "pull_request_review_id" : 610614838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21421",
      "side" : "RIGHT",
      "start_line" : 871,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-12T09:49:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593043238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21421#discussion_r593049659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21421"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593049659"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How does it contradict it? The two Bugzilla comments say that Windows has it's own mechanisms to handle this (and has done since day #1), hence the `-fstack-clash-protection` option would seem pointless, and should either be a NOP, or potentially throw an error when being applied to Windows builds.",
      "commit_id" : "7b3434f8002d1a8cf0dbd0a0caef28e783b1efd8",
      "created_at" : "2021-03-12T09:59:02Z",
      "diff_hunk" : "@@ -866,11 +866,16 @@ if test x$use_hardening != xno; then\n   dnl Use CHECK_LINK_FLAG & --fatal-warnings to ensure we won't use the flag in this case.\n   AX_CHECK_LINK_FLAG([-fcf-protection=full],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fcf-protection=full\"],, [[$LDFLAG_WERROR]])\n \n-  dnl stack-clash-protection does not work properly when building for Windows.\n-  dnl We use the test case from https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458\n-  dnl to determine if it can be enabled.\n-  AX_CHECK_COMPILE_FLAG([-fstack-clash-protection],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-clash-protection\"],[],[\"-O0\"],\n-    [AC_LANG_SOURCE([[class D {public: unsigned char buf[32768];}; int main() {D d; return 0;}]])])\n+  case $host in\n+    *mingw*)\n+      dnl stack-clash-protection doesn't currently work, and likely should just be skipped for Windows.\n+      dnl See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90458 for more details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21421#discussion_r593049659",
      "id" : 593049659,
      "in_reply_to_id" : 593043238,
      "line" : 872,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MzA0OTY1OQ==",
      "original_commit_id" : "7b3434f8002d1a8cf0dbd0a0caef28e783b1efd8",
      "original_line" : 872,
      "original_position" : 12,
      "original_start_line" : 871,
      "path" : "configure.ac",
      "position" : 12,
      "pull_request_review_id" : 610622997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21421",
      "side" : "RIGHT",
      "start_line" : 871,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-12T09:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/593049659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
