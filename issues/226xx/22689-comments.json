[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "force pushed from  084d443 to 251d636 to fix linting and ci errors",
      "created_at" : "2021-08-12T15:16:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-897726230",
      "id" : 897726230,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841gjcW",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-12T15:16:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/897726230",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22707](https://github.com/bitcoin/bitcoin/pull/22707) (test: improve mempool_updatefrom efficiency by using getmempoolentry for specific txns by mjdietzx)\n* [#22650](https://github.com/bitcoin/bitcoin/pull/22650) (Remove -deprecatedrpc=addresses flag and corresponding code/logic by mjdietzx)\n* [#12677](https://github.com/bitcoin/bitcoin/pull/12677) (RPC: Add ancestor{count,size,fees} to listunspent output by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-08-12T19:14:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-897901107",
      "id" : 897901107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841hOIz",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T18:57:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/897901107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688382471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688382471"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree with this approach of adding a bool similar to address/reqSigs, and think you should add a TODO to remove this in v24\r\n\r\nPerhaps naming it `include_old_fee_fields` or something might be better because this could be slightly confusing",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T09:37:23Z",
      "diff_hunk" : "@@ -481,7 +481,7 @@ static std::vector<RPCResult> MempoolEntryDescription() { return {\n     RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n };}\n \n-static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPoolEntry& e) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPoolEntry& e, bool include_fee_fields) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688382471",
      "id" : 688382471,
      "line" : 484,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODM4MjQ3MQ==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 484,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 26,
      "pull_request_review_id" : 729441201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T09:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688382471",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688385472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688385472"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Any reason you didn't use the existing test file, rpc_deprecated.py? I don't personally have an opinion on whether it would be better, but it looks like a good place to put these tests too.",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T09:42:08Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688385472",
      "id" : 688385472,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODM4NTQ3Mg==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 5,
      "pull_request_review_id" : 729441201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T09:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688385472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688386760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688386760"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You could also add the assertions to a helper function, and call that helper function with results you get from each RPC",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T09:44:10Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"\n+\n+from test_framework.wallet import MiniWallet\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+from test_framework.blocktools import COIN\n+\n+\n+class MempoolFeeFieldsDeprecationTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.extra_args = [[], [\"-deprecatedrpc=fees\"]]\n+\n+    def run_test(self):\n+        # we get spendable outputs from the premined chain starting\n+        # at block 76. see BitcoinTestFramework._initialize_chain() for details\n+        self.wallet = MiniWallet(self.nodes[0])\n+        self.wallet.scan_blocks(start=76, num=1)\n+\n+        # we create the tx on the first node and wait until it syncs to node_deprecated\n+        # thus, any differences must be coming from getmempoolentry or getrawmempool\n+        txid = self.wallet.send_self_transfer(from_node=self.nodes[0])['txid']\n+        self.sync_mempools(nodes=self.nodes)\n+\n+        # note: we are only testing getmempoolentry even though\n+        # getrawmempool(verbose=True) also returns mempool entries\n+        # this is because getmempool entry and getrawmempool(verbose=True)\n+        # both call the same underlying entryToJSON function so testing\n+        # getmempoolentry is sufficient",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688386760",
      "id" : 688386760,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODM4Njc2MA==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 33,
      "original_position" : 33,
      "original_start_line" : 29,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 33,
      "pull_request_review_id" : 729441201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : 29,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-13T09:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688386760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688390466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688390466"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: sort alphabetically :grin:",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T09:50:28Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"\n+\n+from test_framework.wallet import MiniWallet\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+from test_framework.blocktools import COIN",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688390466",
      "id" : 688390466,
      "line" : 10,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODM5MDQ2Ng==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 10,
      "original_position" : 10,
      "original_start_line" : 7,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 10,
      "pull_request_review_id" : 729441201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : 7,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-13T09:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688390466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688394470"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688394470"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "To make the commits atomic, rpc_fundrawtransaction.py needs to be updated in 5adcba2562 as well",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T09:57:11Z",
      "diff_hunk" : "@@ -379,7 +379,7 @@ def test_fee_p2pkh(self):\n \n         # Create same transaction over sendtoaddress.\n         txId = self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 1.1)\n-        signedFee = self.nodes[0].getrawmempool(True)[txId]['fee']\n+        signedFee = self.nodes[0].getrawmempool(True)[txId]['fees']['base']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688394470",
      "id" : 688394470,
      "line" : 382,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODM5NDQ3MA==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 382,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 729441201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T09:57:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688394470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-08-13T10:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-898358216",
      "id" : 898358216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841i9vI",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-13T10:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898358216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688494902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688494902"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "added the comments and renamed to `include_deprecated_fee_fields` to better associate it with `isDeprecatedRPCEnabled(\"fees\")`",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:00:19Z",
      "diff_hunk" : "@@ -481,7 +481,7 @@ static std::vector<RPCResult> MempoolEntryDescription() { return {\n     RPCResult{RPCResult::Type::BOOL, \"unbroadcast\", \"Whether this transaction is currently unbroadcast (initial broadcast not yet acknowledged by any peers)\"},\n };}\n \n-static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPoolEntry& e) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)\n+static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPoolEntry& e, bool include_fee_fields) EXCLUSIVE_LOCKS_REQUIRED(pool.cs)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688494902",
      "id" : 688494902,
      "in_reply_to_id" : 688382471,
      "line" : 484,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODQ5NDkwMg==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 484,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 26,
      "pull_request_review_id" : 729590574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:00:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688494902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688496763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688496763"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "hm, im not sure how you were able to see https://github.com/bitcoin/bitcoin/commit/5adcba25623f35c07e8fe266883a9c21931f3d0d as i thought i force pushed past it. but just to make sure i understand, the changes to `rpc_fundrawtransaction.py` and `mempool_packages.py` should be in the same commit as the changes to `blockchain.cpp`. this ensures the tests still pass for this commit, correct?",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:03:14Z",
      "diff_hunk" : "@@ -379,7 +379,7 @@ def test_fee_p2pkh(self):\n \n         # Create same transaction over sendtoaddress.\n         txId = self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 1.1)\n-        signedFee = self.nodes[0].getrawmempool(True)[txId]['fee']\n+        signedFee = self.nodes[0].getrawmempool(True)[txId]['fees']['base']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688496763",
      "id" : 688496763,
      "in_reply_to_id" : 688394470,
      "line" : 382,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODQ5Njc2Mw==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 382,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 729593191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:03:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688496763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688506660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688506660"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i saw `rpc_deprecated.py` and wasn't sure why it was there? right now it doesn't test anything. i then saw `rpc_addresses_deprecation.py` was its own file, so i followed that one as an example.\r\n\r\ni guess the advantage of putting tests in `rpc_deprecated.py` is it might help things run faster than running individual test files for each deprecated rpc. i can put my test there and then move `rpc_addresses_deprecation.py` to `rpc_deprecated.py` as a follow-up pr, if that's the standard we want to follow",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:17:52Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688506660",
      "id" : 688506660,
      "in_reply_to_id" : 688385472,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODUwNjY2MA==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 5,
      "pull_request_review_id" : 729606690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688506660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688511555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688511555"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I assumed that rpc_deprecated.py is there to test RPC deprecation stuff and address/reqSigs tests are in a separate file because they need the wallet to be built. So they can't be moved to rpc_deprecated.py either.",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:24:36Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688511555",
      "id" : 688511555,
      "in_reply_to_id" : 688385472,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODUxMTU1NQ==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 5,
      "pull_request_review_id" : 729613067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:24:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688511555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688512570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688512570"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ah hm, I must have fetched before you pushed.\r\n\r\n> just to make sure i understand, the changes to rpc_fundrawtransaction.py and mempool_packages.py should be in the same commit as the changes to blockchain.cpp. this ensures the tests still pass for this commit, correct?\r\n\r\ncorrect, yes :)",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:26:05Z",
      "diff_hunk" : "@@ -379,7 +379,7 @@ def test_fee_p2pkh(self):\n \n         # Create same transaction over sendtoaddress.\n         txId = self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 1.1)\n-        signedFee = self.nodes[0].getrawmempool(True)[txId]['fee']\n+        signedFee = self.nodes[0].getrawmempool(True)[txId]['fees']['base']",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688512570",
      "id" : 688512570,
      "in_reply_to_id" : 688394470,
      "line" : 382,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODUxMjU3MA==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 382,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_fundrawtransaction.py",
      "position" : 5,
      "pull_request_review_id" : 729614517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:26:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688512570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688512710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688512710"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "actually, ive talked myself out of this. if we have individual files, they can run in parallel and if we put all the deprecated tests under the same class it could be really annoying later on as you are adding a new test. you'd have to wait for N deprecation tests to run each time as you're iterating on your test, which starts to impact productivity if it takes 30 ~ 45 seconds to run through all the tests each time.\r\n\r\nwhat are your thoughts, @glozow ?",
      "commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "created_at" : "2021-08-13T13:26:20Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688512710",
      "id" : 688512710,
      "in_reply_to_id" : 688385472,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODUxMjcxMA==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 5,
      "pull_request_review_id" : 729614737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T13:26:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688512710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-08-13T14:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-898479397",
      "id" : 898479397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841jbUl",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-13T14:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898479397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23586626?v=4",
         "events_url" : "https://api.github.com/users/Zero-1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Zero-1729/followers",
         "following_url" : "https://api.github.com/users/Zero-1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Zero-1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Zero-1729",
         "id" : 23586626,
         "login" : "Zero-1729",
         "node_id" : "MDQ6VXNlcjIzNTg2NjI2",
         "organizations_url" : "https://api.github.com/users/Zero-1729/orgs",
         "received_events_url" : "https://api.github.com/users/Zero-1729/received_events",
         "repos_url" : "https://api.github.com/users/Zero-1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Zero-1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Zero-1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Zero-1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688569469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688569469"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I assumed that rpc_deprecated.py is there to test RPC deprecation stuff and address/reqSigs tests are in a separate file because they need the wallet to be built\r\n\r\nmakes sense. i read through the comments on `rpc_deprecated.py` and it seems focused on testing that a whole rpc command is deprecated. i think it works well for that and we can consolidate rpc command deprecation's there.\r\n\r\nthis is test slightly different in that an rpc is not being deprecated (meaning we cant just check for an rpc not found error), but fields on an rpc response are being deprecated, which makes the setup for the test a bit more complicated. for this reason, id suggest keeping this test in a separate file",
      "commit_id" : "6940fe0620370744ca24c95eb04abbbf88042a99",
      "created_at" : "2021-08-13T14:44:31Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688569469",
      "id" : 688569469,
      "in_reply_to_id" : 688385472,
      "line" : 5,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODU2OTQ2OQ==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : 5,
      "pull_request_review_id" : 729693264,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-13T14:45:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688569469",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688573802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688573802"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : ":doh:",
      "commit_id" : "6940fe0620370744ca24c95eb04abbbf88042a99",
      "created_at" : "2021-08-13T14:50:35Z",
      "diff_hunk" : "@@ -0,0 +1,62 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test deprecation of fee fields from top level mempool entry object\"\"\"\n+\n+from test_framework.wallet import MiniWallet\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+from test_framework.blocktools import COIN",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r688573802",
      "id" : 688573802,
      "in_reply_to_id" : 688390466,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4ODU3MzgwMg==",
      "original_commit_id" : "c4646f8c726f5abdaafc6a835ad0dfb607d6c17e",
      "original_line" : 10,
      "original_position" : 10,
      "original_start_line" : 7,
      "path" : "test/functional/rpc_mempool_entry_fee_fields_deprecation.py",
      "position" : null,
      "pull_request_review_id" : 729699141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-13T14:50:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/688573802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "thanks for the review, @glozow! I added your suggestions and left a comment on why I think it makes sense to keep `rpc_mempool_entry_fields_deprecation.py` separate from `rpc_deprecated.py`; ultimately, I'm happy to go with whichever option you recommend",
      "created_at" : "2021-08-13T14:50:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-898511513",
      "id" : 898511513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841jjKZ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-13T14:51:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898511513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r689259509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689259509"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is there a reason you don't do:\r\n```c++\r\nif (IsDeprecatedRPCEnabled(\"fees\")) {\r\n```\r\nhere? And not have to change the function header?",
      "commit_id" : "4df6ffd4dcdfd2b26457c420cdbb4c382bc7a488",
      "created_at" : "2021-08-16T06:07:07Z",
      "diff_hunk" : "@@ -491,19 +492,20 @@ static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPool\n     fees.pushKV(\"ancestor\", ValueFromAmount(e.GetModFeesWithAncestors()));\n     fees.pushKV(\"descendant\", ValueFromAmount(e.GetModFeesWithDescendants()));\n     info.pushKV(\"fees\", fees);\n-\n+    if (include_deprecated_fee_fields) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r689259509",
      "id" : 689259509,
      "line" : 495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4OTI1OTUwOQ==",
      "original_commit_id" : "6940fe0620370744ca24c95eb04abbbf88042a99",
      "original_line" : 495,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 730351733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-16T06:09:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689259509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r689639437"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689639437"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i was following `ScriptPubKeyToUniv` as an example: https://github.com/bitcoin/bitcoin/blob/42b00a37580a11fbb81a3748d9e834ae8913cdba/src/rpc/blockchain.cpp#L1936-L1939\r\n\r\npersonally, i agree with this approach more than using the `IsDeprecatedRPCEnabled` function directly as it it's more clear, imo, what's happening and allows for more flexibility. \r\n\r\nfor example, lets say we wanted to only allow `getmempoolentry` to return the fields when `-deprecated=fees` is passed but wanted `getrawmempool` to never return the fields. with this setup, we can have one of the functions use the original function signature with `IsDeprecated` passed as the default, whereas we could call `entryToJSON` with `false` passed as the default whenever it's used in `getrawmempool`.\r\n\r\ntldr; i think functional overloading is super cool and this seemed a good use case for it :smile: ",
      "commit_id" : "4df6ffd4dcdfd2b26457c420cdbb4c382bc7a488",
      "created_at" : "2021-08-16T15:29:48Z",
      "diff_hunk" : "@@ -491,19 +492,20 @@ static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPool\n     fees.pushKV(\"ancestor\", ValueFromAmount(e.GetModFeesWithAncestors()));\n     fees.pushKV(\"descendant\", ValueFromAmount(e.GetModFeesWithDescendants()));\n     info.pushKV(\"fees\", fees);\n-\n+    if (include_deprecated_fee_fields) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r689639437",
      "id" : 689639437,
      "in_reply_to_id" : 689259509,
      "line" : 495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4OTYzOTQzNw==",
      "original_commit_id" : "6940fe0620370744ca24c95eb04abbbf88042a99",
      "original_line" : 495,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 36,
      "pull_request_review_id" : 730852411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-16T15:29:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689639437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Code review ACK\r\n> \r\n> You'll probably need to add release notes, something like [90ae3d8](https://github.com/bitcoin/bitcoin/commit/90ae3d8ca68334ec712d67b21a8d4721c6d79788)\r\n\r\nthanks for the review, @mjdietzx ! ive updated the release notes in https://github.com/bitcoin/bitcoin/pull/22689/commits/4df6ffd4dcdfd2b26457c420cdbb4c382bc7a488",
      "created_at" : "2021-08-16T15:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-899615774",
      "id" : 899615774,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841nwwe",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T15:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899615774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> thanks for the review, @mjdietzx ! ive updated the release notes in 4df6ffd\r\n\r\nPlease write more descriptive commit messages than `update release notes`. i.e This could be something like `doc: add release note for fee field deprecation in RPC`. ",
      "created_at" : "2021-08-17T11:45:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-900226027",
      "id" : 900226027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841qFvr",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-17T11:45:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/900226027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Please write more descriptive commit messages than `update release notes`. i.e This could be something like `doc: add release note for fee field deprecation in RPC`.\r\n\r\ngreat callout, @fanquake . ive update all three commit messages with relevant tags (rpc, test, doc) and wrote more descriptive commit messages",
      "created_at" : "2021-08-17T12:06:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#issuecomment-900239399",
      "id" : 900239399,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22689",
      "node_id" : "IC_kwDOABII5841qJAn",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-17T12:06:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/900239399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r691246625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/691246625"
         }
      },
      "author_association" : "MEMBER",
      "body" : "suggestions\r\n\r\n- add the PR number\r\n- add  `getmempoolancestors` and `getmempooldescendants` that are also changed\r\n- s/true/verbose=true/ for clarity\r\n- wrap the lines\r\n- s/sub-object/JSON object/\r\n- s/top level/top-level/\r\n- no need to wrap version numbers in code markup\r\n\r\n```diff\r\n-- `getmempoolentry` and `getrawmempool true` no longer return top level fee fields `fee`, `modifiedfee`, `ancestorfees`, `descendantfees`. These fields were deprecated in `0.17` and moved to the `fees` sub-object in the response.\r\n-The `-deprecated=fees` flag must be passed for these fields to be included in the top level response. Note: this flag will only be available until `v24`, after which the fields will be fully removed. It is recommended you migrate to using the `fees` sub-object in the response\r\n+- RPCs `getmempoolentry`, `getrawmempool verbose=true`, `getmempoolancestors\r\n+  verbose=true` and `getmempooldescendants verbose=true` no longer return the\r\n+  top-level fee fields `fee`, `modifiedfee`, `ancestorfees` and\r\n+  `descendantfees`. These fields were deprecated in v0.17 and moved to the\r\n+  `fees` JSON object in the response. The `-deprecated=fees` configuration\r\n+  option must be passed for these fields to be included in the top-level\r\n+  response. This option will only be available until v24.0, after which the\r\n+  fields will be fully removed. Use the `fees` JSON object for these RPCS\r\n+  instead. (#22689)\r\n```\r\n",
      "commit_id" : "c3a28421341831e096bd9479aee4092b3f847346",
      "created_at" : "2021-08-18T13:37:56Z",
      "diff_hunk" : "@@ -63,6 +63,8 @@ P2P and network changes\n \n Updated RPCs\n ------------\n+- `getmempoolentry` and `getrawmempool true` no longer return top level fee fields `fee`, `modifiedfee`, `ancestorfees`, `descendantfees`. These fields were deprecated in `0.17` and moved to the `fees` sub-object in the response.\n+The `-deprecated=fees` flag must be passed for these fields to be included in the top level response. Note: this flag will only be available until `v24`, after which the fields will be fully removed. It is recommended you migrate to using the `fees` sub-object in the response",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22689#discussion_r691246625",
      "id" : 691246625,
      "line" : 67,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MTI0NjYyNQ==",
      "original_commit_id" : "c3a28421341831e096bd9479aee4092b3f847346",
      "original_line" : 67,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 5,
      "pull_request_review_id" : 732876042,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-18T13:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/691246625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
