{
   "assignee" : null,
   "assignees" : [],
   "body" : "Currently, we make 40 requests to addrman for peers with our relevant services then give up and take a node without them.  When relevant services are rare in our addrman data this means we can get all 8 peers up without them. If they happen to be reliably they may stay up filling our connection slots for months, even though our addrman has since been populated with plenty of relevant peers.\r\n\r\nTo avoid this this PR changes the behavior to be only willing to ignore relevant services until half the outbound connections are up.\r\n\r\nAlso, dnsseed does not fire if we have at least two connections (in or out) 11 seconds after startup. It currently doesn't perform any sanity checking of the connections-- they could be two lite-client inbound peers that will never send us addr message and our addrman might be filled with stupidity. To improve that somewhat, we check that they at least send the relevant service flags before deciding to not request dnsseeding.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8949/comments",
   "created_at" : "2016-10-17T23:19:19Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8949/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/8949",
   "id" : 183553041,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8949/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 8949,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/8949.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8949",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/8949.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8949"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Be more agressive in getting connections to peers with relevant services.",
   "updated_at" : "2016-10-17T23:19:19Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8949",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
      "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
      "followers_url" : "https://api.github.com/users/gmaxwell/followers",
      "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/gmaxwell",
      "id" : 858454,
      "login" : "gmaxwell",
      "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
      "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
      "repos_url" : "https://api.github.com/users/gmaxwell/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/gmaxwell"
   }
}
