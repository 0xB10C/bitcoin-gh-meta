[
   {
      "body" : "Great improvement over current space requirement which is O(n), yes?",
      "created_at" : "2015-08-03T22:08:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-127418842",
      "id" : 127418842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-03T22:08:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127418842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "@dgenr8 Yes, but the current code requires around 96 bytes per transaction, which is insignificant compared to the ~1 kB each transaction already requires in memory on average. Still, this PR improves it to ~1 kB total (but more importantly: entirely continuous and on the stack).",
      "created_at" : "2015-08-03T22:34:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-127423349",
      "id" : 127423349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-03T22:43:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127423349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Concept ACK.\r\nNeeds to be reviewed very carefully as to not change the behavior in subtle edge cases.",
      "created_at" : "2015-08-05T10:39:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-127952421",
      "id" : 127952421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-05T10:39:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127952421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Of course.\r\n\r\nNote that the unit test creates merkle trees of all sizes up to 16, and for\r\neach all known malleabilities and all branches.\r\n\r\nOn the other side, the performance and memory usage benefit are not\r\nsignificant, but getting rid of vMerkleTree in CBlock may be worth it.\r\n",
      "created_at" : "2015-08-05T13:17:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-127994436",
      "id" : 127994436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-05T14:21:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127994436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Does this mean that all transactions in a block have to be hashed together again, every time a transaction gets added to the wallet? So if there are 10 transactions in a block for the wallet, we hash it again 10 times?\r\n",
      "created_at" : "2015-08-08T09:03:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-128941740",
      "id" : 128941740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-08T09:03:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/128941740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz: with the current code, yes. But I don't think we actually need to\nstore those...\n",
      "created_at" : "2015-08-08T09:12:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-128943222",
      "id" : 128943222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-08T09:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/128943222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, I wouldnt store them either. But as long as we do, I do not like, that this pull decreases wallet performance. So I would like to see that fixed. Either by some temp-cache for the wallet, or just by removing those merkle-branches.\r\n",
      "created_at" : "2015-08-08T09:42:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-128944456",
      "id" : 128944456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-08T09:42:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/128944456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "There is definitely a wallet performance downside, as you need to recompute\nthe merkle tree for every wallet transaction. If it looked like I claimed\notherwise, sorry. It's only an individual merkle root/branch computation\nthat is made faster.\n\nI'll delay this until we remove the call from the wallet to conpute\nbranches.\n",
      "created_at" : "2015-08-11T08:52:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-129775458",
      "id" : 129775458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-11T08:52:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/129775458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased on top of #6550, to address the issue that @cozz raised.",
      "created_at" : "2015-08-11T19:27:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-130030213",
      "id" : 130030213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-11T19:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/130030213",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK\r\n\r\n[Diff comparison](https://github.com/sipa/bitcoin/compare/nomerkle...sipa:constmerkle) for those who want to check without including the rebased commits.",
      "created_at" : "2015-08-12T01:01:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-130127041",
      "id" : 130127041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-08-12T01:03:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/130127041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Needs rebase (after #6550, I think)",
      "created_at" : "2015-10-06T08:55:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6508#issuecomment-145789682",
      "id" : 145789682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6508",
      "updated_at" : "2015-10-06T08:55:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/145789682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
