[
   {
      "body" : "The BIP text is available at https://github.com/bitcoin/bips/pull/179",
      "created_at" : "2015-08-17T19:21:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#issuecomment-131935238",
      "id" : 131935238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6564",
      "updated_at" : "2015-08-17T19:21:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/131935238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Should mempools always reject CSV-failing transactions?",
      "created_at" : "2015-08-17T19:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#issuecomment-131941055",
      "id" : 131941055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6564",
      "updated_at" : "2015-08-17T19:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/131941055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101238?v=3",
         "events_url" : "https://api.github.com/users/kanzure/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kanzure/followers",
         "following_url" : "https://api.github.com/users/kanzure/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kanzure/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kanzure",
         "id" : 101238,
         "login" : "kanzure",
         "organizations_url" : "https://api.github.com/users/kanzure/orgs",
         "received_events_url" : "https://api.github.com/users/kanzure/received_events",
         "repos_url" : "https://api.github.com/users/kanzure/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kanzure/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kanzure/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kanzure"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37250910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37250910"
         }
      },
      "body" : "Could this please read:  `Inverted sequence numbers above (or equal to) SEQUENCE_THRESHOLD are not consensus constrained`.\r\nNo comment at all is less confusing than this IMHO.",
      "commit_id" : "c1a87b493f3f61bb9666efeb1ce5ad5e267bee0a",
      "created_at" : "2015-08-17T23:51:21Z",
      "diff_hunk" : "@@ -1126,8 +1166,30 @@ bool TransactionSignatureChecker::CheckSig(const vector<unsigned char>& vchSigIn\n     return true;\n }\n \n-bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime) const\n+bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime, bool fSequence) const\n {\n+    // Relative lock times are supported by comparing the passed\n+    // in lock time to the sequence number of the input. All other\n+    // logic is the same, all that differs is what we are comparing\n+    // the lock time to.\n+    int64_t txToLockTime;\n+    if (fSequence) {\n+        // Fail under all circumstances if the transaction's version\n+        // number is not set high enough to enable enforced sequence\n+        // number rules.\n+        if (txTo->nVersion < 2)\n+            return false;\n+        // Sequence number must be inverted to convert it into a\n+        // relative lock-time.\n+        txToLockTime = (int64_t)~txTo->vin[nIn].nSequence;\n+        // Sequence numbers under SEQUENCE_THRESHOLD are not consensus\n+        // constrained.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37250910",
      "id" : 37250910,
      "original_commit_id" : "a597a331879497dad144859b36c566cf9741c955",
      "original_position" : 71,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564",
      "updated_at" : "2015-09-27T20:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37250910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37251076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37251076"
         }
      },
      "body" : "Since this is repeatedly referred to as a relative lock time,  can we reflect that in the code? `relativeLockTime`?",
      "commit_id" : "c1a87b493f3f61bb9666efeb1ce5ad5e267bee0a",
      "created_at" : "2015-08-17T23:53:56Z",
      "diff_hunk" : "@@ -1126,8 +1166,30 @@ bool TransactionSignatureChecker::CheckSig(const vector<unsigned char>& vchSigIn\n     return true;\n }\n \n-bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime) const\n+bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime, bool fSequence) const\n {\n+    // Relative lock times are supported by comparing the passed\n+    // in lock time to the sequence number of the input. All other\n+    // logic is the same, all that differs is what we are comparing\n+    // the lock time to.\n+    int64_t txToLockTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37251076",
      "id" : 37251076,
      "original_commit_id" : "a597a331879497dad144859b36c566cf9741c955",
      "original_position" : 60,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564",
      "updated_at" : "2015-09-27T20:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37251076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37251487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37251487"
         }
      },
      "body" : "Why is this being put in the same function anyway?\r\nIt only shares 10 lines of code,  and adds another 10.\r\nIt could be easily a 10 line function and another 10 line function which then calls `CheckLockTime`.\r\n\r\nThis would have less branching,  would be simpler to test,  and have no default variables.\r\n\r\n`checker.CheckSequenceNumber(...` Would also make https://github.com/bitcoin/bitcoin/pull/6564/files#diff-be2905e2f5218ecdbe4e55637dac75f3R416 clearer.",
      "commit_id" : "c1a87b493f3f61bb9666efeb1ce5ad5e267bee0a",
      "created_at" : "2015-08-18T00:00:55Z",
      "diff_hunk" : "@@ -1126,8 +1166,30 @@ bool TransactionSignatureChecker::CheckSig(const vector<unsigned char>& vchSigIn\n     return true;\n }\n \n-bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime) const\n+bool TransactionSignatureChecker::CheckLockTime(const CScriptNum& nLockTime, bool fSequence) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#discussion_r37251487",
      "id" : 37251487,
      "original_commit_id" : "a597a331879497dad144859b36c566cf9741c955",
      "original_position" : 54,
      "path" : "src/script/interpreter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6564",
      "updated_at" : "2015-09-27T20:21:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37251487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@kanzure This pull request is implemented such that CSV-failing transactions with tx.nVersion>=2 are considered non-standard and therefore rejected from mempool and/or relay. Given that CSV re-purposes a presently unused NOP opcode, there shouldn't be any compatibility issues. Is there a case you have in mind where a CSV-failing transaction should be added to the mempool?",
      "created_at" : "2015-08-18T23:25:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#issuecomment-132389640",
      "id" : 132389640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6564",
      "updated_at" : "2015-08-18T23:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132389640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "Rebased, and made compliant with latest version of #6312. Also merged @dcousens code duplication nit, and split the main commit into two for easier review.\r\n\r\nReady for review and merge.",
      "created_at" : "2015-09-26T00:10:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6564#issuecomment-143380742",
      "id" : 143380742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6564",
      "updated_at" : "2015-09-26T00:10:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143380742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   }
]
