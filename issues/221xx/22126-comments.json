[
   {
      "author_association" : "NONE",
      "body" : "Tested on linux.",
      "created_at" : "2021-06-02T12:20:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-852979882",
      "id" : 852979882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1Mjk3OTg4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T12:20:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852979882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "With this change applied the output of make -d in regards to target 'all' is the following.\r\n\r\nConsidering target file 'all'.\r\n File 'all' does not exist.\r\n Looking for an implicit rule for 'all'.\r\n No implicit rule found for 'all'.",
      "created_at" : "2021-06-02T12:31:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-852987362",
      "id" : 852987362,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1Mjk4NzM2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T12:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852987362",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Because this build system does not use make builtin rules or suffixes\r\n\r\nWhat about the dependencies?",
      "created_at" : "2021-06-02T13:17:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853019413",
      "id" : 853019413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzAxOTQxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T13:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853019413",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/35263201?v=4",
         "events_url" : "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amadeuszpawlik/followers",
         "following_url" : "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amadeuszpawlik",
         "id" : 35263201,
         "login" : "amadeuszpawlik",
         "node_id" : "MDQ6VXNlcjM1MjYzMjAx",
         "organizations_url" : "https://api.github.com/users/amadeuszpawlik/orgs",
         "received_events_url" : "https://api.github.com/users/amadeuszpawlik/received_events",
         "repos_url" : "https://api.github.com/users/amadeuszpawlik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amadeuszpawlik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amadeuszpawlik"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What about the dependencies?\r\n\r\nIndeed. This wont work for at least miniupnpc:\r\n```bash\r\nBuilding miniupnpc...\r\nmake[1]: Entering directory '/tmp/cirrus-ci-build/depends/work/build/x86_64-apple-darwin18/miniupnpc/2.2.2-19f39f7d911'\r\n/bin/sh updateminiupnpcstrings.sh\r\nmake[1]: *** No rule to make target 'addr_is_reserved.o', needed by 'libminiupnpc.a'.  Stop.\r\nmake[1]: *** Waiting for unfinished jobs....\r\n```\r\n\r\nNote that there is also some related discussion in #18821.",
      "created_at" : "2021-06-02T13:23:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853024257",
      "id" : 853024257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzAyNDI1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T13:23:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853024257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Indeed.\r\nWill add unexport.",
      "created_at" : "2021-06-02T13:53:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853047677",
      "id" : 853047677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzA0NzY3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T13:53:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853047677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "One thing to consider about unexport of MAKEFLAGS is that it will prevent any flag to be propagated.\r\nWe'll need to have something like the following\r\n```\r\nsaved_makeflags:=$(MAKEFLAGS)\r\nMAKEFLAGS+=-r\r\nunexport MAKEFLAGS\r\n\r\n$($(1)_built): | $($(1)_configured)\r\n    $(AT)echo Building $(1)...\r\n    $(AT)mkdir -p $$(@D)\r\n    $(AT)+cd $$(@D); MAKEFLAGS=$(saved_makeflags) $($(1)_build_env) $(call $(1)_build_cmds, $(1))\r\n    $(AT)touch $$@\r\n\r\n```\r\nThis should let the options specified by the user on the command line to propagate.\r\nLet me test this.",
      "created_at" : "2021-06-02T14:16:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853066729",
      "id" : 853066729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzA2NjcyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T14:16:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853066729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this related to #22134?",
      "created_at" : "2021-06-03T07:25:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853642799",
      "id" : 853642799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzY0Mjc5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-03T07:25:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853642799",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sorry, but I'm not convinced this is a worthwhile change. It adds extra settings for a very small gain. Can you at least quantify the performance win? I would not expect much of the build time to be spent in `make` itself.",
      "created_at" : "2021-06-03T14:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-853927313",
      "id" : 853927313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzkyNzMxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-03T14:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853927313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Sorry, but I'm not convinced this is a worthwhile change. It adds extra settings for a very small gain. Can you at least quantify the performance win? I would not expect much of the build time to be spent in `make` itself.\r\n\r\nI think the potential win here is not w/re performance, but w/re explicitness. I remember struggling with builtin variables and target definitions while working on https://github.com/bitcoin/bitcoin/commit/3d6603e340d6d461832f0aa204b04343d34af3d4, and I think being explicit about where we expect to use the builtin vars and targets is a good thing (also for debugging purposes) if it can be done right.",
      "created_at" : "2021-06-08T18:25:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-856995540",
      "id" : 856995540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1Njk5NTU0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T18:26:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856995540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Performance wise -r helps when there is nothing to be built and your program needs to link a lot of libraries. -r helps each library a little bit.\r\nFor depends subsystem, -r won't affect performance much, especially given #22134.\r\n\r\n-r helps troubleshooting a lot.\r\n\r\nE.g. this is the difference in debugging output.\r\n```\r\n$ ls -l depends/packages/*.mk |wc\r\n     29     261    2398\r\n$ cat d.mk\r\ninclude depends/packages/*.mk\r\nall:\r\n$ make -d -f d.mk |wc\r\n  12752   64905  758491\r\n$ make -rd -f d.mk |wc\r\n    197    1200   12678\r\n```\r\nIt has been my experience that people get buried in this output and do not realize they can drastically simplify it.",
      "created_at" : "2021-06-09T01:46:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-857307345",
      "id" : 857307345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NzMwNzM0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-09T01:46:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857307345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Is this related to #22134?\r\n\r\nNot related.",
      "created_at" : "2021-06-09T01:48:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22126#issuecomment-857308047",
      "id" : 857308047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22126",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NzMwODA0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-09T01:48:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857308047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   }
]
