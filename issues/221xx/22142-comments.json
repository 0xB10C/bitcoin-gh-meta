[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. The same idea (a separated making of tools) is used for other dependencies.\r\n\r\nNeed more investigation to find out if this approach is compatible with adding additional Qt modules.",
      "created_at" : "2021-06-03T14:57:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-853934837",
      "id" : 853934837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MzkzNDgzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-03T14:57:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853934837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #22186 (build, qt: Fix compiling qt package in depends with GCC 11 by hebasto)\n* #21591 (build, qt: Fix wrong cross-compiling detection on macOS by hebasto)\n* #21589 (build, qt: Do not require xml module for native builds in depends by hebasto)\n* #21420 (build, qt: No longer need to patch translation.pro by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-06-04T03:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-854331802",
      "id" : 854331802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDMzMTgwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T07:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854331802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think the reason of the failure on Centos 8 is wrong architecture the `qmake` is configured for -- `x86_64` instead of `i386`.",
      "created_at" : "2021-06-07T03:04:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-855541892",
      "id" : 855541892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NTU0MTg5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-07T03:04:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/855541892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm able to `make -C depends qt_configured HOST=i686-pc-linux-gnu` with the correct architecture detection:\r\n```\r\n...\r\nConfigure summary:\r\n\r\nBuilding on: linux-g++ (x86_64, CPU features: mmx sse sse2)\r\nBuilding for: linux-g++-32 (i386, CPU features: <none>)\r\n...\r\n```\r\nwith the following patch:\r\n```diff\r\n--- a/depends/packages/qt.mk\r\n+++ b/depends/packages/qt.mk\r\n@@ -111,10 +111,6 @@ $(package)_config_opts += -no-feature-vulkan\r\n $(package)_config_opts += -no-feature-wizard\r\n $(package)_config_opts += -no-feature-xml\r\n \r\n-$(package)_config_opts += \"QMAKE_CFLAGS = '$($(package)_cflags) $($(package)_cppflags)'\"\r\n-$(package)_config_opts += \"QMAKE_CXXFLAGS = '$($(package)_cflags) $($(package)_cppflags)'\"\r\n-$(package)_config_opts += \"QMAKE_LFLAGS = '$($(package)_ldflags)'\"\r\n-\r\n $(package)_config_opts_darwin = -no-feature-corewlan\r\n $(package)_config_opts_darwin += QMAKE_MACOSX_DEPLOYMENT_TARGET=$(OSX_MIN_VERSION)\r\n \r\n@@ -217,6 +213,9 @@ define $(package)_preprocess_cmds\r\n   cp -f $($(package)_patch_dir)/mac-qmake.conf qtbase/mkspecs/macx-clang-linux/qmake.conf && \\\r\n   cp -r qtbase/mkspecs/linux-arm-gnueabi-g++ qtbase/mkspecs/bitcoin-linux-g++ && \\\r\n   sed -i.old \"s/arm-linux-gnueabi-/$(host)-/g\" qtbase/mkspecs/bitcoin-linux-g++/qmake.conf && \\\r\n+  echo \"!host_build: QMAKE_CFLAGS     += $($(package)_cflags) $($(package)_cppflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\r\n+  echo \"!host_build: QMAKE_CXXFLAGS   += $($(package)_cxxflags) $($(package)_cppflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\r\n+  echo \"!host_build: QMAKE_LFLAGS     += $($(package)_ldflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\r\n   sed -i.old \"s|QMAKE_CC                = \\$$$$\\$$$${CROSS_COMPILE}clang|QMAKE_CC                = $($(package)_cc)|\" qtbase/mkspecs/common/clang.conf && \\\r\n   sed -i.old \"s|QMAKE_CXX               = \\$$$$\\$$$${CROSS_COMPILE}clang++|QMAKE_CXX               = $($(package)_cxx)|\" qtbase/mkspecs/common/clang.conf && \\\r\n   sed -i.old \"s/LIBRARY_PATH/(CROSS_)?\\0/g\" qtbase/mkspecs/features/toolchain.prf\r\n```",
      "created_at" : "2021-06-08T16:44:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-856926951",
      "id" : 856926951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjkyNjk1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T16:44:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856926951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The branch with applied [fixup](https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-856926951) is [here](https://github.com/hebasto/bitcoin/commits/210608-qtbase-5).\r\nCI -- https://cirrus-ci.com/build/4834341327994880 -- is green :tiger2: ",
      "created_at" : "2021-06-08T17:22:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-856952883",
      "id" : 856952883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1Njk1Mjg4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T19:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856952883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The branch with applied [fixup](https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-856926951) is [here](https://github.com/hebasto/bitcoin/commits/210608-qtbase-5).\r\n\r\nTested on Armbian 21.02.3 -- #18536 is fixed, and #21589 could be dropped.",
      "created_at" : "2021-06-08T19:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22142#issuecomment-857024594",
      "id" : 857024594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22142",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NzAyNDU5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T19:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857024594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
