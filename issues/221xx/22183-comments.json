[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The effort here seems good, but it seems to me this approach adds as many (or more?) `gArgs` usages as it removes. I think a better approach would build on #19101 to use [`WalletContext::args`](https://github.com/bitcoin/bitcoin/blob/e638acf6970394f8eb1957366ad2d39512f33b31/src/wallet/context.h#L25) instead of `gArgs`. #19101 is pretty simple PR and some more review would be welcome",
      "created_at" : "2021-06-07T20:37:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856240294",
      "id" : 856240294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjI0MDI5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-07T20:37:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856240294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The effort here seems good, but it seems to me this approach adds as many (or more?) `gArgs` usages as it removes.\r\n\r\nThe idea of this PR is just to \"move `gArgs`\" one level up. That's not that interesting result but it's very easy to review and to decide whether people see a benefit in the change in general. \r\n\r\nYour PR seems like a more robust approach to the problem. ð I'll try to have a look at #19101 the day after tomorrow.",
      "created_at" : "2021-06-07T20:58:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856252762",
      "id" : 856252762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjI1Mjc2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-07T20:58:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856252762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess it's possible the two PR's only overlap in some places and are mostly orthogonal since #19101 does not update the CWallet constructor and this PR does, but:\r\n\r\n- I think no new uses of `gArgs` should be necessary here, it should always be possible to pass `WalletContext::args` instead.\r\n- For the places where #19101 passes a WalletContext argument and this PR just passes an ArgsManager argument, I think it would be nice if this PR just passed a WalletContext so the same parts of code wouldn't need to churn in both PRs\r\n",
      "created_at" : "2021-06-07T21:09:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856259151",
      "id" : 856259151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjI1OTE1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-07T21:09:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856259151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #22372 by luke-jr\n* #22260 by Sjors\n* #22220 by fanquake\n* #22155 by ryanofsky\n* #19101 by ryanofsky\n* #15719 by ryanofsky\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-06-07T22:22:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856301831",
      "id" : 856301831,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjMwMTgzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-30T15:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856301831",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I guess it's possible the two PR's only overlap in some places and are mostly orthogonal since #19101 does not update the CWallet constructor and this PR does\r\n\r\nIt seems so. I would like to avoid competing with your PR so I will try to review your PR tomorrow, I'll leave this PR as a draft and I'll try to make an alternative PR based on yours to show how it would look like.\r\n\r\nIf anyone else has a different opinion on this, please share it to avoid unnecessary work. :)",
      "created_at" : "2021-06-08T10:25:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856648885",
      "id" : 856648885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjY0ODg4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T10:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856648885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks. Just to be clear about the previous comment https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856259151, I am saying I think the overlap between two PRs actually not so great, and my first suggestion there to avoid adding lots of new references to `gArgs` variable and instead pass `*context.args`, should be applicable with or without #19101. My second suggestion would just be to resolve the few conflicts there are between this PR and #19101 where #19101 adds `WalletContext&` parameters and this PR adds `ArgsManager&` parameters by favoring #19101 to avoid code churn. (This could also be rebased on top of #19101 to accomplish the same thing)",
      "created_at" : "2021-06-08T12:49:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-856737185",
      "id" : 856737185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjczNzE4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-08T12:49:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856737185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ryanofsky This PR is very modest follow-up to your #19101 at the moment as there are still some occurrences of `gArgs` in `src/wallet/wallet.cpp` file.\r\n\r\nTo remove the rest of `gArgs` from `wallet.cpp`, it seems I would need to pass `WalletContext` parameter to a `CWallet` constructor. I wonder what you think about this idea.",
      "created_at" : "2021-08-22T18:41:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#issuecomment-903312465",
      "id" : 903312465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22183",
      "node_id" : "IC_kwDOABII584113RR",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-22T18:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903312465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22183#discussion_r693568947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22183"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693568947"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Use `context.args` in `CWallet::Create` instead of `gArgs`.\" (1153ad33ffc821917c76777d971f0074f7af7590)\r\n\r\nJust as a style suggestion I might write:\r\n\r\n```c++\r\nArgsManager& args = *Assert(context.args);\r\n```\r\n\r\nabove and use `args` instead of `context.args` throughout this function for less verbosity and for a clearer assert error.",
      "commit_id" : "1153ad33ffc821917c76777d971f0074f7af7590",
      "created_at" : "2021-08-22T22:51:15Z",
      "diff_hunk" : "@@ -2590,28 +2590,28 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n         }\n     }\n \n-    if (!gArgs.GetArg(\"-addresstype\", \"\").empty()) {\n-        std::optional<OutputType> parsed = ParseOutputType(gArgs.GetArg(\"-addresstype\", \"\"));\n+    if (!context.args->GetArg(\"-addresstype\", \"\").empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22183#discussion_r693568947",
      "id" : 693568947,
      "line" : 2593,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzU2ODk0Nw==",
      "original_commit_id" : "1153ad33ffc821917c76777d971f0074f7af7590",
      "original_line" : 2593,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 735617622,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22183",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-22T22:57:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693568947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
