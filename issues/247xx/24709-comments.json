[
   {
      "author_association" : "MEMBER",
      "body" : "Proposed for `DEBUG_LOCKCONTENTION` in #24757. This seems non-troublesome, as it is behind a logging config or runtime option.",
      "created_at" : "2022-04-04T11:40:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1087450576",
      "id" : 1087450576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585A0S3Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087450576/reactions"
      },
      "updated_at" : "2022-04-04T11:40:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087450576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Now that most consistency checks have been made a runtime option instead of configure option (see commit [803ef70](https://github.com/bitcoin/bitcoin/commit/803ef70fd9f65ef800567ff9456fac525bc3e3c2)), it could make sense to enable them on `--enable-debug`. Otherwise they are only run when explicitly passed the runtime setting.\r\n\r\n https://www.wallsolution.xyz/ had similar issues and i used it and it worked",
      "created_at" : "2022-07-18T01:57:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1186686232",
      "id" : 1186686232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585Gu2UY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186686232/reactions"
      },
      "updated_at" : "2022-07-18T01:57:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186686232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109486040?v=4",
         "events_url" : "https://api.github.com/users/Veterangrail/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Veterangrail/followers",
         "following_url" : "https://api.github.com/users/Veterangrail/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Veterangrail/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Veterangrail",
         "id" : 109486040,
         "login" : "Veterangrail",
         "node_id" : "U_kgDOBoaf2A",
         "organizations_url" : "https://api.github.com/users/Veterangrail/orgs",
         "received_events_url" : "https://api.github.com/users/Veterangrail/received_events",
         "repos_url" : "https://api.github.com/users/Veterangrail/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Veterangrail/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Veterangrail/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Veterangrail"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke, I've implemented this in a branch but don't feel I understand the rationale for the change fully to open a PR yet. Is the idea that (mainly devs) running after building with `--enable-debug` would have this running by default to potentially catch consistency issues e.g. on mainnet?\r\n\r\n(Otherwise it seems to me that we could just enable it via the flag in the two Ci tests which build in debug mode, native QT5 and i686 multiprocess)",
      "created_at" : "2023-03-22T11:52:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1479417856",
      "id" : 1479417856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585YLiAA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479417856/reactions"
      },
      "updated_at" : "2023-03-22T11:52:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479417856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is the idea that ...\r\n\r\nYes.\r\n\r\nOtherwise it seems odd to have an `--enable-debug` setting that doesn't enable debug checks.\r\n\r\nMaybe the `--enable-debug` setting can be made more clear that this enables stricter checks, which could terminate the program or throw additional errors, that otherwise wouldn't appear. See also https://github.com/bitcoin/bitcoin/issues/26338#issuecomment-1284320019",
      "created_at" : "2023-03-22T12:05:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1479453937",
      "id" : 1479453937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585YLqzx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479453937/reactions"
      },
      "updated_at" : "2023-03-22T12:05:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1479453937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure this is a good idea? If the consistency check is runtime configurable, why not just configure it at runtime -- anyone who's going to actively debug any problems found isn't going to find it too hard to add a line in bitcoin.conf? If the problem is just that there might be lots of different options and someone might want to get all of them, wouldn't adding an `allchecks=1` option be better? (Or `-checks=addrman -checks=mempool -checks=all` similar to the `-debug=*` option)\r\n\r\nThe drawback of setting these options on by default is that they might make a node unusable under load (https://github.com/bitcoin/bitcoin/pull/27300#issuecomment-1479890611 for addrman checks or #27586 for others). Due to `cs_main` and the mempool, a lot of what we do is effectively single-threaded, so using 100% of a single core can easily be a pretty severe bottleneck.",
      "created_at" : "2023-05-19T07:21:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1554148356",
      "id" : 1554148356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585comwE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1554148356/reactions"
      },
      "updated_at" : "2023-05-19T07:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1554148356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it is pretty clear that we'll have to add at least one more configure flag for (expensive) debug checks. See `--enable-slow-debug` (https://github.com/bitcoin/bitcoin/issues/27586#issuecomment-1553973702) and `--debug-mode` (https://github.com/bitcoin/bitcoin/pull/27300#issuecomment-1479890611). So I fail to see the downside of putting more (runtime configurable) consistency checks into that new flag.\r\n\r\nRegardless, it is already questionable whether `--enable-debug` is suitable for production loads, given that it may crash your node at any time, because additional (cheap) assertions are enabled. So I'd even go as far and extract a third configure option to only enable the \"I want to be able to attach gdb\" part. `--enable-debug-symbols` (https://github.com/bitcoin/bitcoin/pull/27300#issuecomment-1479775571)?\r\n\r\n",
      "created_at" : "2023-05-19T07:36:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24709#issuecomment-1554170480",
      "id" : 1554170480,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24709",
      "node_id" : "IC_kwDOABII585cosJw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1554170480/reactions"
      },
      "updated_at" : "2023-05-19T07:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1554170480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
