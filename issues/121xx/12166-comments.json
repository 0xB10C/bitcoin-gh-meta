[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Attn @MeshCollider, this is trying to clarify some things in the release notes you wrote for #11466.\r\n\r\nNote that this documentation doesn't really have anything at all to do with 11687. There was just some discussion about #11466 that spilled into the comments there:\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/11687#issuecomment-353211134\r\nhttps://github.com/bitcoin/bitcoin/pull/11687#issuecomment-353347901\r\nhttps://github.com/bitcoin/bitcoin/pull/11687#issuecomment-356136301\r\nhttps://github.com/bitcoin/bitcoin/pull/11687#pullrequestreview-87865301\r\n",
      "created_at" : "2018-01-11T22:33:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#issuecomment-357083543",
      "id" : 357083543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12166",
      "updated_at" : "2018-01-11T22:33:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357083543",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161095987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161095987"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would add something to ground this in existing behavior. Maybe say \"Previously wallet database files were stored at the top level of the bitcoin data directory. Now for new installations [...]\"",
      "commit_id" : "97c3cada9266e0aebd0f97c5e9de09a7d10456fa",
      "created_at" : "2018-01-11T22:36:58Z",
      "diff_hunk" : "@@ -75,19 +75,25 @@ There is a checkbox to mark the transaction as final.\n The RPC default remains unchanged: to use RBF, launch with `-walletrbf=1` or\n use the `replaceable` argument for individual transactions.\n \n-Custom wallet directories\n----------------------\n-The ability to specify a directory other than the default data directory in which to store\n-wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n-argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n-when choosing a wallet directory location, as if it becomes unavailable during operation,\n-funds may be lost.\n-\n-Default wallet directory change\n---------------------------\n-On new installations (if the data directory doesn't exist), wallets will now be stored in a\n-new `wallets/` subdirectory inside the data directory. If this `wallets/` subdirectory\n-doesn't exist (i.e. on existing nodes), the current datadir root is used instead, as it was.\n+Wallets directory configuration (`-walletdir`)\n+----------------------------------------------\n+\n+Bitcoin Core now has more flexibility in where the wallets directory can be located.\n+\n+- For new installations (where the data directory doesn't already exist),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161095987",
      "id" : 161095987,
      "original_commit_id" : "b5075fe86beaf142fe8a0b0b79325a2d52e1331d",
      "original_position" : 22,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 88330043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166",
      "updated_at" : "2018-01-15T15:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161095987",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161096222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Relative to the data directory, not the current working directory, I believe.",
      "commit_id" : "97c3cada9266e0aebd0f97c5e9de09a7d10456fa",
      "created_at" : "2018-01-11T22:38:13Z",
      "diff_hunk" : "@@ -75,19 +75,25 @@ There is a checkbox to mark the transaction as final.\n The RPC default remains unchanged: to use RBF, launch with `-walletrbf=1` or\n use the `replaceable` argument for individual transactions.\n \n-Custom wallet directories\n----------------------\n-The ability to specify a directory other than the default data directory in which to store\n-wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n-argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n-when choosing a wallet directory location, as if it becomes unavailable during operation,\n-funds may be lost.\n-\n-Default wallet directory change\n---------------------------\n-On new installations (if the data directory doesn't exist), wallets will now be stored in a\n-new `wallets/` subdirectory inside the data directory. If this `wallets/` subdirectory\n-doesn't exist (i.e. on existing nodes), the current datadir root is used instead, as it was.\n+Wallets directory configuration (`-walletdir`)\n+----------------------------------------------\n+\n+Bitcoin Core now has more flexibility in where the wallets directory can be located.\n+\n+- For new installations (where the data directory doesn't already exist),\n+  wallets will now be stored in a new `wallets/` subdirectory inside the data\n+  directory by default.\n+- For existing nodes (where the data directory already exists), wallets will be\n+  stored in the data directory root by default. If a `wallets/` subdirectory\n+  already exists in the data directory root, then wallets will be stored in the\n+  `wallets/` subdirectory by default.\n+- The location of the wallets directory can be overridden by specifying a\n+  `-walletdir=<path>` option where `<path>` can be an absolute path or a\n+  relative path (relative to the current working directory). `<path>` can",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161096222",
      "id" : 161096222,
      "original_commit_id" : "b5075fe86beaf142fe8a0b0b79325a2d52e1331d",
      "original_position" : 31,
      "path" : "doc/release-notes.md",
      "position" : 33,
      "pull_request_review_id" : 88330322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166",
      "updated_at" : "2018-01-15T15:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096222",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161547483"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161547483"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No, I've retested and it's relative to the cwd. See https://github.com/bitcoin/bitcoin/blob/44080a90a29292df96e92f22242785c5040000a1/src/wallet/walletutil.cpp#L12.\r\n\r\nThis is part of what prompted my comment here: https://github.com/bitcoin/bitcoin/pull/11687#issuecomment-356136301 - it's slightly  confusing that `-walletdir` relative paths are relative to the cwd and `-wallet` paths are relative to the `walletdir`. That's also why I think #11687 can't be thought of as being completely independent from the changes in #11466 . The documentation needs to describe clearly the interactions between the two options.",
      "commit_id" : "97c3cada9266e0aebd0f97c5e9de09a7d10456fa",
      "created_at" : "2018-01-15T15:24:17Z",
      "diff_hunk" : "@@ -75,19 +75,25 @@ There is a checkbox to mark the transaction as final.\n The RPC default remains unchanged: to use RBF, launch with `-walletrbf=1` or\n use the `replaceable` argument for individual transactions.\n \n-Custom wallet directories\n----------------------\n-The ability to specify a directory other than the default data directory in which to store\n-wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n-argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n-when choosing a wallet directory location, as if it becomes unavailable during operation,\n-funds may be lost.\n-\n-Default wallet directory change\n---------------------------\n-On new installations (if the data directory doesn't exist), wallets will now be stored in a\n-new `wallets/` subdirectory inside the data directory. If this `wallets/` subdirectory\n-doesn't exist (i.e. on existing nodes), the current datadir root is used instead, as it was.\n+Wallets directory configuration (`-walletdir`)\n+----------------------------------------------\n+\n+Bitcoin Core now has more flexibility in where the wallets directory can be located.\n+\n+- For new installations (where the data directory doesn't already exist),\n+  wallets will now be stored in a new `wallets/` subdirectory inside the data\n+  directory by default.\n+- For existing nodes (where the data directory already exists), wallets will be\n+  stored in the data directory root by default. If a `wallets/` subdirectory\n+  already exists in the data directory root, then wallets will be stored in the\n+  `wallets/` subdirectory by default.\n+- The location of the wallets directory can be overridden by specifying a\n+  `-walletdir=<path>` option where `<path>` can be an absolute path or a\n+  relative path (relative to the current working directory). `<path>` can",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161547483",
      "id" : 161547483,
      "in_reply_to_id" : 161096222,
      "original_commit_id" : "b5075fe86beaf142fe8a0b0b79325a2d52e1331d",
      "original_position" : 31,
      "path" : "doc/release-notes.md",
      "position" : 33,
      "pull_request_review_id" : 88854376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166",
      "updated_at" : "2018-01-15T15:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161547483",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161548126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161548126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good suggestion. Added.",
      "commit_id" : "97c3cada9266e0aebd0f97c5e9de09a7d10456fa",
      "created_at" : "2018-01-15T15:26:34Z",
      "diff_hunk" : "@@ -75,19 +75,25 @@ There is a checkbox to mark the transaction as final.\n The RPC default remains unchanged: to use RBF, launch with `-walletrbf=1` or\n use the `replaceable` argument for individual transactions.\n \n-Custom wallet directories\n----------------------\n-The ability to specify a directory other than the default data directory in which to store\n-wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n-argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n-when choosing a wallet directory location, as if it becomes unavailable during operation,\n-funds may be lost.\n-\n-Default wallet directory change\n---------------------------\n-On new installations (if the data directory doesn't exist), wallets will now be stored in a\n-new `wallets/` subdirectory inside the data directory. If this `wallets/` subdirectory\n-doesn't exist (i.e. on existing nodes), the current datadir root is used instead, as it was.\n+Wallets directory configuration (`-walletdir`)\n+----------------------------------------------\n+\n+Bitcoin Core now has more flexibility in where the wallets directory can be located.\n+\n+- For new installations (where the data directory doesn't already exist),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161548126",
      "id" : 161548126,
      "in_reply_to_id" : 161095987,
      "original_commit_id" : "b5075fe86beaf142fe8a0b0b79325a2d52e1331d",
      "original_position" : 22,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 88855118,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166",
      "updated_at" : "2018-01-15T15:26:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161548126",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161561520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161561520"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Attn @MeshCollider \r\n\r\n> it's slightly confusing that -walletdir relative paths are relative to the cwd\r\n\r\nThis is worse than confusing. This sounds like a mistake that should be fixed. Current working directory is helpful thing to rely on in scripts and command line tools, but long running apps and daemons should not depend on the current working directory. If a relative -walletdir path is specified in bitcoin.conf, it would be footgun for that directory to point to a completely different location if one day the user happens to be in a different directory when starting up bitcoin.\r\n\r\nI think a new PR should be opened to either forbid relative -walletdir paths, or interpret them stably relative to `<datadir>`.",
      "commit_id" : "97c3cada9266e0aebd0f97c5e9de09a7d10456fa",
      "created_at" : "2018-01-15T16:14:08Z",
      "diff_hunk" : "@@ -75,19 +75,25 @@ There is a checkbox to mark the transaction as final.\n The RPC default remains unchanged: to use RBF, launch with `-walletrbf=1` or\n use the `replaceable` argument for individual transactions.\n \n-Custom wallet directories\n----------------------\n-The ability to specify a directory other than the default data directory in which to store\n-wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n-argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n-when choosing a wallet directory location, as if it becomes unavailable during operation,\n-funds may be lost.\n-\n-Default wallet directory change\n---------------------------\n-On new installations (if the data directory doesn't exist), wallets will now be stored in a\n-new `wallets/` subdirectory inside the data directory. If this `wallets/` subdirectory\n-doesn't exist (i.e. on existing nodes), the current datadir root is used instead, as it was.\n+Wallets directory configuration (`-walletdir`)\n+----------------------------------------------\n+\n+Bitcoin Core now has more flexibility in where the wallets directory can be located.\n+\n+- For new installations (where the data directory doesn't already exist),\n+  wallets will now be stored in a new `wallets/` subdirectory inside the data\n+  directory by default.\n+- For existing nodes (where the data directory already exists), wallets will be\n+  stored in the data directory root by default. If a `wallets/` subdirectory\n+  already exists in the data directory root, then wallets will be stored in the\n+  `wallets/` subdirectory by default.\n+- The location of the wallets directory can be overridden by specifying a\n+  `-walletdir=<path>` option where `<path>` can be an absolute path or a\n+  relative path (relative to the current working directory). `<path>` can",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12166#discussion_r161561520",
      "id" : 161561520,
      "in_reply_to_id" : 161096222,
      "original_commit_id" : "b5075fe86beaf142fe8a0b0b79325a2d52e1331d",
      "original_position" : 31,
      "path" : "doc/release-notes.md",
      "position" : 33,
      "pull_request_review_id" : 88870654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12166",
      "updated_at" : "2018-01-15T16:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161561520",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
