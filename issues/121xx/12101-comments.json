[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019745"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019745"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably shouldn't set this until *after* the sanity checks...",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:15:22Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int32_t nSleepTime = request.params[1].get_int();\n+    pwallet->nRelockTime = GetTime() + nSleepTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019745",
      "id" : 160019745,
      "original_commit_id" : "8600546d1b50cc1cc1d45f7bc29afc14d47ab8f9",
      "original_position" : 6,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019745",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019755"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019755"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably should use `int`, not `int32_t` (they're not guaranteed to be the same)",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:16:28Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int32_t nSleepTime = request.params[1].get_int();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019755",
      "id" : 160019755,
      "original_commit_id" : "8600546d1b50cc1cc1d45f7bc29afc14d47ab8f9",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069623,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019755",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019865"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:19:31Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int32_t nSleepTime = request.params[1].get_int();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019865",
      "id" : 160019865,
      "in_reply_to_id" : 160019755,
      "original_commit_id" : "8600546d1b50cc1cc1d45f7bc29afc14d47ab8f9",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019865",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019887"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops, fixed.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:19:37Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int32_t nSleepTime = request.params[1].get_int();\n+    pwallet->nRelockTime = GetTime() + nSleepTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019887",
      "id" : 160019887,
      "in_reply_to_id" : 160019745,
      "original_commit_id" : "8600546d1b50cc1cc1d45f7bc29afc14d47ab8f9",
      "original_position" : 6,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069693,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019887",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019905"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019905"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Still need to check the passphrase etc first... otherwise we've essentially tricked the wallet into lengthening its unlock time.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:21:10Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Timeout cannot be negative.\");\n+    }\n+    pwallet->nRelockTime = GetTime() + nSleepTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019905",
      "id" : 160019905,
      "original_commit_id" : "370f1057661ed5de8efc64eec61813f12e9a1971",
      "original_position" : 10,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019905",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.\r\n\r\n`nRelockTime` isn't actually used for anything except displaying stuff in `getwalletinfo` so this wouldn't actually be a problem.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:23:33Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Timeout cannot be negative.\");\n+    }\n+    pwallet->nRelockTime = GetTime() + nSleepTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019931",
      "id" : 160019931,
      "in_reply_to_id" : 160019905,
      "original_commit_id" : "370f1057661ed5de8efc64eec61813f12e9a1971",
      "original_position" : 10,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069745,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019931",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019947"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do we want to allow zero?",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:24:58Z",
      "diff_hunk" : "@@ -2298,6 +2298,13 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019947",
      "id" : 160019947,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 7,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 87069766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019947",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019951"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2147483648 is not guaranteed to be out of range.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:25:17Z",
      "diff_hunk" : "@@ -56,6 +56,11 @@ def run_test(self):\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n         self.nodes[0].walletpassphrase(passphrase2, 10)\n         assert_equal(privkey, self.nodes[0].dumpprivkey(address))\n+        self.nodes[0].walletlock()\n+\n+        # Test timeout bounds\n+        assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase, -10)\n+        assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].walletpassphrase, passphrase, 2147483648)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019951",
      "id" : 160019951,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 8,
      "path" : "test/functional/wallet-encryption.py",
      "position" : 8,
      "pull_request_review_id" : 87069766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019951",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Displaying the wrong time is kind of a problem, although maybe not a security one.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:26:14Z",
      "diff_hunk" : "@@ -2298,6 +2298,14 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Timeout cannot be negative.\");\n+    }\n+    pwallet->nRelockTime = GetTime() + nSleepTime;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019958",
      "id" : 160019958,
      "in_reply_to_id" : 160019905,
      "original_commit_id" : "370f1057661ed5de8efc64eec61813f12e9a1971",
      "original_position" : 10,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 87069778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:26:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019984"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019984"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What would be the point of allowing 0?",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:27:25Z",
      "diff_hunk" : "@@ -2298,6 +2298,13 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019984",
      "id" : 160019984,
      "in_reply_to_id" : 160019947,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 7,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 87069811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:27:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019984",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019991"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps to just test if the passphrase is correct. (You're *currently* allowing zero here.)",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:28:18Z",
      "diff_hunk" : "@@ -2298,6 +2298,13 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160019991",
      "id" : 160019991,
      "in_reply_to_id" : 160019947,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 7,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 87069817,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:28:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160019991",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160020062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160020062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> (You're currently allowing zero here.)\r\n\r\nRight.\r\n\r\nIt doesn't matter either way IMO.",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:32:05Z",
      "diff_hunk" : "@@ -2298,6 +2298,13 @@ UniValue walletpassphrase(const JSONRPCRequest& request)\n     // Alternately, find a way to make request.params[0] mlock()'d to begin with.\n     strWalletPass = request.params[0].get_str().c_str();\n \n+    // Get the timeout\n+    int nSleepTime = request.params[1].get_int();\n+    // Timeout cannot be negative, otherwise it will relock immediately\n+    if (nSleepTime < 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160020062",
      "id" : 160020062,
      "in_reply_to_id" : 160019947,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 7,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 87069888,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160020062",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160020102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160020102"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How can you guarantee that a number will be out of range?",
      "commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "created_at" : "2018-01-06T07:34:54Z",
      "diff_hunk" : "@@ -56,6 +56,11 @@ def run_test(self):\n         assert_raises_rpc_error(-14, \"wallet passphrase entered was incorrect\", self.nodes[0].walletpassphrase, passphrase, 10)\n         self.nodes[0].walletpassphrase(passphrase2, 10)\n         assert_equal(privkey, self.nodes[0].dumpprivkey(address))\n+        self.nodes[0].walletlock()\n+\n+        # Test timeout bounds\n+        assert_raises_rpc_error(-8, \"Timeout cannot be negative.\", self.nodes[0].walletpassphrase, passphrase, -10)\n+        assert_raises_rpc_error(-1, \"JSON integer out of range\", self.nodes[0].walletpassphrase, passphrase, 2147483648)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12101#discussion_r160020102",
      "id" : 160020102,
      "in_reply_to_id" : 160019951,
      "original_commit_id" : "f94b423f276618a983993773a8b3c9c491d623db",
      "original_position" : 8,
      "path" : "test/functional/wallet-encryption.py",
      "position" : 8,
      "pull_request_review_id" : 87069930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12101",
      "updated_at" : "2018-01-06T07:34:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160020102",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
