[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161026738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161026738"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why? You can just do a GetAncestor for blockindex->nHeight here, no?",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T17:46:47Z",
      "diff_hunk" : "@@ -78,20 +78,22 @@ double GetDifficulty(const CChain& chain, const CBlockIndex* blockindex)\n     return dDiff;\n }\n \n-double GetDifficulty(const CBlockIndex* blockindex)\n+static int ComputeBlockConfirmations(const CBlockIndex* tip, const CBlockIndex* blockindex, const CBlockIndex*& next)\n {\n-    return GetDifficulty(chainActive, blockindex);\n+    next = tip->GetAncestor(blockindex->nHeight + 1);\n+    if (next && next->pprev == blockindex) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161026738",
      "id" : 161026738,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 27,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 27,
      "pull_request_review_id" : 88248888,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161026738",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161027116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161027116"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No need to change these unless you're gonna actually kill the cs_main held for the whole time, I'd think, no (and little reason to, its not like its being held for an extended period)?",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T17:48:15Z",
      "diff_hunk" : "@@ -1185,20 +1182,21 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n \n     LOCK(cs_main);\n \n+    const CBlockIndex* tip = chainActive.Tip();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161027116",
      "id" : 161027116,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 143,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 143,
      "pull_request_review_id" : 88248888,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161027116",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034204"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034204"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This way you get next of blockindex.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T18:16:44Z",
      "diff_hunk" : "@@ -78,20 +78,22 @@ double GetDifficulty(const CChain& chain, const CBlockIndex* blockindex)\n     return dDiff;\n }\n \n-double GetDifficulty(const CBlockIndex* blockindex)\n+static int ComputeBlockConfirmations(const CBlockIndex* tip, const CBlockIndex* blockindex, const CBlockIndex*& next)\n {\n-    return GetDifficulty(chainActive, blockindex);\n+    next = tip->GetAncestor(blockindex->nHeight + 1);\n+    if (next && next->pprev == blockindex) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034204",
      "id" : 161034204,
      "in_reply_to_id" : 161026738,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 27,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 27,
      "pull_request_review_id" : 88257771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034204",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034615"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This moves up tip variable declared below.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T18:18:13Z",
      "diff_hunk" : "@@ -1185,20 +1182,21 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n \n     LOCK(cs_main);\n \n+    const CBlockIndex* tip = chainActive.Tip();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034615",
      "id" : 161034615,
      "in_reply_to_id" : 161027116,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 143,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 143,
      "pull_request_review_id" : 88258212,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034615",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034671"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034671"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ohoh, sorry, missed its use in blockheaderToJSON.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T18:18:28Z",
      "diff_hunk" : "@@ -78,20 +78,22 @@ double GetDifficulty(const CChain& chain, const CBlockIndex* blockindex)\n     return dDiff;\n }\n \n-double GetDifficulty(const CBlockIndex* blockindex)\n+static int ComputeBlockConfirmations(const CBlockIndex* tip, const CBlockIndex* blockindex, const CBlockIndex*& next)\n {\n-    return GetDifficulty(chainActive, blockindex);\n+    next = tip->GetAncestor(blockindex->nHeight + 1);\n+    if (next && next->pprev == blockindex) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161034671",
      "id" : 161034671,
      "in_reply_to_id" : 161026738,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 27,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 27,
      "pull_request_review_id" : 88258294,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161034671",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Best reviewed commit by commit",
      "created_at" : "2018-01-11T18:19:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#issuecomment-357015434",
      "id" : 357015434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12151",
      "updated_at" : "2018-01-11T18:19:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357015434",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161085651"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161085651"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`tip` instead of `chainActive.Tip()`?",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T21:51:28Z",
      "diff_hunk" : "@@ -101,26 +103,22 @@ UniValue blockheaderToJSON(const CBlockIndex* blockindex)\n     result.push_back(Pair(\"mediantime\", (int64_t)blockindex->GetMedianTimePast()));\n     result.push_back(Pair(\"nonce\", (uint64_t)blockindex->nNonce));\n     result.push_back(Pair(\"bits\", strprintf(\"%08x\", blockindex->nBits)));\n-    result.push_back(Pair(\"difficulty\", GetDifficulty(blockindex)));\n+    result.push_back(Pair(\"difficulty\", GetDifficulty(chainActive.Tip(), blockindex)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161085651",
      "id" : 161085651,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 54,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 88318476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161085651",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161085870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161085870"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`tip` instead of `chainActive.Tip()`?",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T21:52:31Z",
      "diff_hunk" : "@@ -146,12 +144,11 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* blockindex, bool tx\n     result.push_back(Pair(\"mediantime\", (int64_t)blockindex->GetMedianTimePast()));\n     result.push_back(Pair(\"nonce\", (uint64_t)block.nNonce));\n     result.push_back(Pair(\"bits\", strprintf(\"%08x\", block.nBits)));\n-    result.push_back(Pair(\"difficulty\", GetDifficulty(blockindex)));\n+    result.push_back(Pair(\"difficulty\", GetDifficulty(chainActive.Tip(), blockindex)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161085870",
      "id" : 161085870,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 85,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 88318476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161085870",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161087140"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161087140"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should be `+1` I believe?",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T21:57:15Z",
      "diff_hunk" : "@@ -78,20 +78,22 @@ double GetDifficulty(const CChain& chain, const CBlockIndex* blockindex)\n     return dDiff;\n }\n \n-double GetDifficulty(const CBlockIndex* blockindex)\n+static int ComputeBlockConfirmations(const CBlockIndex* tip, const CBlockIndex* blockindex, const CBlockIndex*& next)\n {\n-    return GetDifficulty(chainActive, blockindex);\n+    next = tip->GetAncestor(blockindex->nHeight + 1);\n+    if (next && next->pprev == blockindex) {\n+        return tip->nHeight - blockindex->nHeight;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161087140",
      "id" : 161087140,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 28,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 88318476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161087140",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161087306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161087306"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should be `? 1 : -1`. Blocks that are the chain tip have 1 confirmation.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T21:57:55Z",
      "diff_hunk" : "@@ -78,20 +78,22 @@ double GetDifficulty(const CChain& chain, const CBlockIndex* blockindex)\n     return dDiff;\n }\n \n-double GetDifficulty(const CBlockIndex* blockindex)\n+static int ComputeBlockConfirmations(const CBlockIndex* tip, const CBlockIndex* blockindex, const CBlockIndex*& next)\n {\n-    return GetDifficulty(chainActive, blockindex);\n+    next = tip->GetAncestor(blockindex->nHeight + 1);\n+    if (next && next->pprev == blockindex) {\n+        return tip->nHeight - blockindex->nHeight;\n+    }\n+    next = nullptr;\n+    return blockindex == tip ? 0 : -1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161087306",
      "id" : 161087306,
      "original_commit_id" : "f88df2e9c986ff49f9bf5c13838087ba0ef96858",
      "original_position" : 31,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 88318476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161087306",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161096849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096849"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Wrong order, should be `tip, pblockindex`.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T22:41:25Z",
      "diff_hunk" : "@@ -242,11 +243,7 @@ static bool rest_block(HTTPRequest* req,\n     }\n \n     case RF_JSON: {\n-        UniValue objBlock;\n-        {\n-            LOCK(cs_main);\n-            objBlock = blockToJSON(block, pblockindex, showTxDetails);\n-        }\n+        UniValue objBlock = std::move(blockToJSON(block, pblockindex, tip, showTxDetails));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161096849",
      "id" : 161096849,
      "original_commit_id" : "8ca09810e14a99de8ff8ed57f17f058a061c1943",
      "original_position" : 47,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 88331049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096849",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161096922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096922"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same.",
      "commit_id" : "f6d175ddc97a0d2b2614b44ddb9efbebf8d6eec5",
      "created_at" : "2018-01-11T22:41:47Z",
      "diff_hunk" : "@@ -785,7 +782,7 @@ UniValue getblock(const JSONRPCRequest& request)\n         return strHex;\n     }\n \n-    return blockToJSON(block, pblockindex, verbosity >= 2);\n+    return blockToJSON(block, pblockindex, chainActive.Tip(), verbosity >= 2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#discussion_r161096922",
      "id" : 161096922,
      "original_commit_id" : "8ca09810e14a99de8ff8ed57f17f058a061c1943",
      "original_position" : 117,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 88331049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12151",
      "updated_at" : "2018-01-11T22:43:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161096922",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed @TheBlueMatt and @jimpo comments, thanks.",
      "created_at" : "2018-01-11T22:52:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12151#issuecomment-357088015",
      "id" : 357088015,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12151",
      "updated_at" : "2018-01-11T22:52:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357088015",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
