[
   {
      "body" : "Improves security AND makes the code more readable, I like this.\n\nACK.",
      "created_at" : "2011-11-26T06:55:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2880284",
      "id" : 2880284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T06:55:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2880284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Using ::c_cstr at API boundaries does have the drawback that '\\0' characters are not allowed -- the canonical form of converting between string types is to use data() and size(), or .begin()/.end(). Then again, I don't think you can enter those in form fields anyway :)",
      "created_at" : "2011-11-26T07:43:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2880421",
      "id" : 2880421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T07:43:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2880421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Though it does make some code a bit easier to read, it is no more secure (in fact, with the additional conversions, one could argue its less secure, though not really).  Anyway, meh.",
      "created_at" : "2011-11-26T19:27:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2883409",
      "id" : 2883409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T19:27:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2883409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Less secure? How?",
      "created_at" : "2011-11-26T21:27:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884023",
      "id" : 2884023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T21:27:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : ".get_str().c_str() instead of .get_str() in several places means the string (likely) gets copied twice in memory instead of once.",
      "created_at" : "2011-11-26T21:33:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884043",
      "id" : 2884043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T21:33:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884043",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I really don't see how this could make things less secure. \r\n\r\n* By passing all the passphrases as SecureString all the way into the CWallet API, this makes sure the passphrases only exist in mlocked memory (except *in* Qt and inside the JSON parser, but  that was already the case before, and in the case of Qt there is little to do against it). Before, they were passed in plain std::strings.\r\n\r\n* As I understand the conversions don't cause any extra allocation/deallocation of insecure memory, the conversions just pass memory around (and there's not *that* many more) from one mlocked area to another, which is filled with zeros before freeing.  \r\n\r\n* By using a specific SecureString type it is signaled clearly that the data inside it should be handled with care.\r\n\r\nSigh, seems that sometimes you just want to disagree with things for the sake of disagreeing... do you really like arguing that much?\r\n\r\n",
      "created_at" : "2011-11-26T21:43:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884107",
      "id" : 2884107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T21:47:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "No, it does not copy anything (it can't, where would it copy to?). c_str() simply returns a pointer to the data inside the string.\r\n",
      "created_at" : "2011-11-26T21:49:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884135",
      "id" : 2884135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T21:49:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "re: 1 yes, but those strings were previously mlocked, so no security is gained.\r\n\r\nre: 2 yes, that is my bad, I had just forgotten that those were returning pointers, not creating new objects...just my C++ inexperience showing...",
      "created_at" : "2011-11-26T21:56:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884180",
      "id" : 2884180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T21:58:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Let my rephrase my original comment:\r\nMakes code easier to read, but doesnt add security, probably worth pulling. Meh.",
      "created_at" : "2011-11-26T22:00:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884212",
      "id" : 2884212,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T22:00:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "1) In the case of bitcoin-qt they weren't. That was my reason for saying this is more secure.\r\n\r\n2) STL has a bad name from the MSVC 6.0 implementation, but luckily is not *that* inefficient :)\r\n\r\nAlso this makes it harder to forget manually mlocking/munlocking (or maybe worse, skipping munlocking in the case of an exception so that memory stays locked indefinitely) in future usages of the API.\r\n",
      "created_at" : "2011-11-26T22:01:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884214",
      "id" : 2884214,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/666",
      "updated_at" : "2011-11-26T22:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2884214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
