[
   {
      "body" : "Tested with transaction id a0d85e45c4b54e98bb7c67044a88e20b434db58f75fad9dd4dac6d5ba215296f\r\n\r\nCreated using createrawtransaction, then modified the input sequence number and lock time by tweaking the hex\r\n\r\nAttempted to send before the locktime using sendrawtransaction. RESULT: TX rejected\r\n\r\nWaited until after the locktime, sendrawtransaction again:  Success\r\n\r\nNote: since this is an IsStandard() check, you can't test on -testnet...",
      "created_at" : "2013-01-26T19:54:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12741129",
      "id" : 12741129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T19:55:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12741129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "ACK\r\n",
      "created_at" : "2013-01-26T20:11:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12741405",
      "id" : 12741405,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T20:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12741405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/6f8730752cf92ff8269812c01a6d9d35fff82e75 for binaries and test log.",
      "created_at" : "2013-01-26T20:15:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12741468",
      "id" : 12741468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T20:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12741468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Doesn't this defeat the whole point of non-final transactions? Feels more like we're disabling a possibly-useful feature so that people can goof up and not be affected unless someone is trying (nothing stops them from relaying a non-final direct to the vulnerable service...).\r\n\r\nIn any case, as long as bitcoind and Bitcoin-Qt clearly expose the non-final status, I don't think this is a vulnerability in this code...",
      "created_at" : "2013-01-26T21:06:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12742273",
      "id" : 12742273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T21:07:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12742273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr Without  TX replacement the purpose non-final transactions have is very limitÃ¢ÂÂ the only difference this will make is that you have to transmit them out of band until they lock... which you already had to do if you wanted the ability to replace.\r\n\r\nWhat this fixes is that right now the wallet will display transactions that have no conceivable chance of confirming. Unless you have a more detailed understanding of the system and know to look for the impossibly far locktime you'll think that it at least has reasonable odds.  This is misleading and makes Bitcoin even more unsafe for people in practice. Limiting them also closes down some potential areas that DOS vectors could be found.\r\n\r\nThe obvious alternatives to outright disabling themÃ¢ÂÂ e.g. relaying transactions only x hours or less before they lockÃ¢ÂÂ turn out to be pretty complicated to implement in the wallet (e.g. what do you do about txn whos parents were above threshold but later fall below it) and don't make an obvious improvement.",
      "created_at" : "2013-01-26T21:24:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12742542",
      "id" : 12742542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T21:24:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12742542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gavinandresen Do you also account for the fact that an attacker can send a timeLocked tx and then a plain normal tx that builds on the first one? The second one looks normal but in fact will also be timeLocked.",
      "created_at" : "2013-01-26T21:38:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12742796",
      "id" : 12742796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T21:38:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12742796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=3",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "body" : "@goonie The non-final txn should not enter the memory pool, so its children should be treated as orphaned.",
      "created_at" : "2013-01-26T21:42:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12742861",
      "id" : 12742861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T21:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12742861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell I guess that makes sense... I suppose if someone comes up with other valid use cases, this can be reconsidered in the future anyway.",
      "created_at" : "2013-01-26T22:46:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12743900",
      "id" : 12743900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-26T22:46:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12743900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "ACK\r\n\r\nTested what Gavin did as well as tested various incoming transactions including chains. Also tested what happens with non-final tx's already in your wallet; an error ends up in your logs and they don't make it into the mempool. Re-transmission does occur, and provided that a conflict is not out there, they will eventually be re-transmitted when they are final.",
      "created_at" : "2013-01-27T00:22:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#issuecomment-12745143",
      "id" : 12745143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2223",
      "updated_at" : "2013-01-27T00:22:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12745143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2223#discussion_r2785818"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785818"
         }
      },
      "body" : "This doesn't pass block height/time. Shouldn't transactions be standard once their lock time has passed?",
      "commit_id" : "6f8730752cf92ff8269812c01a6d9d35fff82e75",
      "created_at" : "2013-01-27T01:06:16Z",
      "diff_hunk" : "@@ -368,6 +368,9 @@ bool CTransaction::IsStandard() const\n     if (nVersion > CTransaction::CURRENT_VERSION)\n         return false;\n \n+    if (!IsFinal())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#discussion_r2785818",
      "id" : 2785818,
      "original_commit_id" : "6f8730752cf92ff8269812c01a6d9d35fff82e75",
      "original_position" : 4,
      "path" : "src/main.cpp",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2223",
      "updated_at" : "2013-01-27T01:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/2223#discussion_r2785841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2223"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785841"
         }
      },
      "body" : "IsFinal() without arguments uses current adjusted time and best known block.",
      "commit_id" : "6f8730752cf92ff8269812c01a6d9d35fff82e75",
      "created_at" : "2013-01-27T01:18:08Z",
      "diff_hunk" : "@@ -368,6 +368,9 @@ bool CTransaction::IsStandard() const\n     if (nVersion > CTransaction::CURRENT_VERSION)\n         return false;\n \n+    if (!IsFinal())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2223#discussion_r2785841",
      "id" : 2785841,
      "original_commit_id" : "6f8730752cf92ff8269812c01a6d9d35fff82e75",
      "original_position" : 4,
      "path" : "src/main.cpp",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2223",
      "updated_at" : "2013-01-27T01:18:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2785841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   }
]
