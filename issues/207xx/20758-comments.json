[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Marked as WIP; definitely needs some review/testing.\r\n\r\nThe `move CNodeState into Peer` commit might not be the greatest idea -- the locking issues are a little subtle (assumign I got them right). Not sure the the locking guidelines for Peer make sense (see \"annotate lock guideline violation?\" commit) though (and generally not convinced we need the multiple per-peer state mutexes that Peer has).\r\n\r\nI think it might make sense to have CNode have an opaque Peer pointer member that's provided by net_processing when the connection is first made and passed back to net_processing via the PeerManager interface -- that would obsolete a lot of the \"state for this peer\" lookups, and might simplify locking substantially. Bit complicated to think about, so I stopped at this point, but that was what I was originally looking to explore here.",
      "created_at" : "2020-12-23T21:37:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20758#issuecomment-750483382",
      "id" : 750483382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20758",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MDQ4MzM4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-23T21:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750483382",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20729 (p2p: standardize on outbound-{full, block}-relay connection type naming by jonatack)\n* #20723 (p2p: improve logging in EvictExtraOutboundPeers() by jonatack)\n* #20721 (Net: Move ping data to net_processing by jnewbery)\n* #20649 (refactor: Remove nMyStartingHeight from CNode/Connman by MarcoFalke)\n* #20295 (rpc: getblockfrompeer by Sjors)\n* #20228 (addrman: Make addrman a top-level component by jnewbery)\n* #19438 (Introduce deploymentstatus by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-23T21:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20758#issuecomment-750483525",
      "id" : 750483525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20758",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MDQ4MzUyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-23T21:37:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750483525",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
