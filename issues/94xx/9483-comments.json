[
   {
      "body" : "(Prefer if we don't propagate the misuse of \"SPV\" for things that don't support fraud proofs)",
      "created_at" : "2017-01-06T17:14:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-270953023",
      "id" : 270953023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-06T17:14:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270953023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I kinda want to use an open lock icon instead of the likely meaningless to uses SPV in any case. \r\n\r\nWe also should do something about the confirmed counts in this mode. I'm not sure what. The issue is that confirmations mean less when you're not validating.  Perhaps displaying transactions like they are unconfirmed until they have 6 blocks might be the thing to do. Or displaying a visible \"not-verified\" on any transaction with the not validated flag. ",
      "created_at" : "2017-01-06T21:24:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271011343",
      "id" : 271011343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-06T21:24:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271011343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Indeed, I would assume any mode like this shouldn't count confirmation at all.",
      "created_at" : "2017-01-06T23:42:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271040132",
      "id" : 271040132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-06T23:42:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271040132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "How about a flag for showing confirmations during SPV mode? Default to off.\r\n\r\nPeople who understand the implications and just don't want to bother having to search their address on an explorer can enable in the menu / config",
      "created_at" : "2017-01-07T05:05:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271063561",
      "id" : 271063561,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-07T05:05:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271063561",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6586275?v=3",
         "events_url" : "https://api.github.com/users/dabura667/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dabura667/followers",
         "following_url" : "https://api.github.com/users/dabura667/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dabura667/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dabura667",
         "id" : 6586275,
         "login" : "dabura667",
         "organizations_url" : "https://api.github.com/users/dabura667/orgs",
         "received_events_url" : "https://api.github.com/users/dabura667/received_events",
         "repos_url" : "https://api.github.com/users/dabura667/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dabura667/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dabura667/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dabura667"
      }
   },
   {
      "body" : "@dabura667 Is it sufficient to simply show it in the transaction details dialog, perhaps?",
      "created_at" : "2017-01-07T05:52:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271065224",
      "id" : 271065224,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-07T05:52:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271065224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr I would think so, yes.",
      "created_at" : "2017-01-07T09:13:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271072461",
      "id" : 271072461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-07T09:13:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271072461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6586275?v=3",
         "events_url" : "https://api.github.com/users/dabura667/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dabura667/followers",
         "following_url" : "https://api.github.com/users/dabura667/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dabura667/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dabura667",
         "id" : 6586275,
         "login" : "dabura667",
         "organizations_url" : "https://api.github.com/users/dabura667/orgs",
         "received_events_url" : "https://api.github.com/users/dabura667/received_events",
         "repos_url" : "https://api.github.com/users/dabura667/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dabura667/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dabura667/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dabura667"
      }
   },
   {
      "body" : "On transactions screen, fully-confirmed receiving txs show only one confirmation, and fully-confirmed sending txs show \"unconfirmed\" with question marks.  \r\n![spv-txscreen](https://cloud.githubusercontent.com/assets/21127776/21752655/6e4431e0-d5aa-11e6-9493-141437b40085.png)\r\n",
      "created_at" : "2017-01-08T18:58:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271170997",
      "id" : 271170997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-08T18:58:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271170997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21127776?v=3",
         "events_url" : "https://api.github.com/users/molxyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/molxyz/followers",
         "following_url" : "https://api.github.com/users/molxyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/molxyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/molxyz",
         "id" : 21127776,
         "login" : "molxyz",
         "organizations_url" : "https://api.github.com/users/molxyz/orgs",
         "received_events_url" : "https://api.github.com/users/molxyz/received_events",
         "repos_url" : "https://api.github.com/users/molxyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/molxyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/molxyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/molxyz"
      }
   },
   {
      "body" : "@molxyz I've also noticed the same thing, confirmations in Transactions list don't update, unless I restart Core.\r\n\r\nOther than that it works great.\r\n\r\nI used this for testing: `./bitcoin-qt -spv=1 -autorequestblocks=0 -testnet`.",
      "created_at" : "2017-01-08T19:45:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271174040",
      "id" : 271174040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-08T19:45:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271174040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4371?v=3",
         "events_url" : "https://api.github.com/users/diegoviola/events{/privacy}",
         "followers_url" : "https://api.github.com/users/diegoviola/followers",
         "following_url" : "https://api.github.com/users/diegoviola/following{/other_user}",
         "gists_url" : "https://api.github.com/users/diegoviola/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/diegoviola",
         "id" : 4371,
         "login" : "diegoviola",
         "organizations_url" : "https://api.github.com/users/diegoviola/orgs",
         "received_events_url" : "https://api.github.com/users/diegoviola/received_events",
         "repos_url" : "https://api.github.com/users/diegoviola/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/diegoviola/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/diegoviola/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/diegoviola"
      }
   },
   {
      "body" : "Thanks for reporting. This seems to be a UI update issue. Will fix it in the next overhaul / PR update.",
      "created_at" : "2017-01-08T21:35:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271181374",
      "id" : 271181374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-08T21:35:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/271181374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Thought: Can this be made to work with external wallets/software?",
      "created_at" : "2017-01-20T20:25:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-274171231",
      "id" : 274171231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-20T20:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274171231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "> Thought: Can this be made to work with external wallets/software?\r\n\r\nI don't know what you mean by this.\r\nCan you make an use-case example?",
      "created_at" : "2017-01-21T09:29:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-274250613",
      "id" : 274250613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-21T09:29:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274250613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Needs rebase.\r\nConcept ACK\r\n\r\nWhat happens with -autorequestblocks=0 -spv=0?\r\nI assume both -spv and -autorequestblocks are 1 by default. With -spv=0 -autorequestblocks=1 you would get what you have today, but is it really so useful compared to -spv=1 -autorequestblocks=1 ?\r\n\r\nI don't know it seems overly complicated. I thought we would just have a single param spvonly that defaults to 0 (equivalent to this autorequestblocks, and your spv is always =1, ie spvonly=0 equivalent to -spv=1 -autorequestblocks=1, spvonly=1 equivalent to -spv=1 -autorequestblocks=0). Not sure, just thinking out loud.",
      "created_at" : "2017-01-24T14:12:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-274812696",
      "id" : 274812696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-24T14:12:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274812696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased.\r\n\r\n> What happens with -autorequestblocks=0 -spv=0?\r\n\r\nThis would result in a mode where no blocks are automatically requested (only headers are fetched).\r\n`autorequestblocks=0` is a debug option and I could imagine some interesting use-cases where you only want to fetch certain blocks with `requestblocks` RPC call.",
      "created_at" : "2017-01-24T15:10:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-274830852",
      "id" : 274830852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-24T15:10:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274830852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Adapted to work with bumpfee.\r\nAdded a fix for the UI update issue reported by @molxyz and @diegoviola (https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-271170997).",
      "created_at" : "2017-01-24T20:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-274924573",
      "id" : 274924573,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
      "updated_at" : "2017-01-24T20:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274924573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97670226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97670226"
         }
      },
      "body" : "It would be nice if you could choose one of the terms \"non-validation\" \"non-validated\" and \"nvs\" and use it consistently everywhere in the code (personally I like \"non-validated\"). Right now it seems like everything is named randomly and it's hard to remember what anything is called.",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T22:43:26Z",
      "diff_hunk" : "@@ -141,6 +141,9 @@ class CWalletDB : public CDB\n     bool WriteBestBlock(const CBlockLocator& locator);\n     bool ReadBestBlock(CBlockLocator& locator);\n \n+    bool WriteNonValidationBestBlock(const CBlockLocator& locator);\n+    bool ReadNonValidationBestBlock(CBlockLocator& locator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97670226",
      "id" : 97670226,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 5,
      "path" : "src/wallet/walletdb.h",
      "position" : 5,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97670226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97671419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97671419"
         }
      },
      "body" : "Comment is out of date. Could you update it to mention that this now checks the wallet, and also mention why it does this (maybe it should be obvious, but the reason isn't clear to me yet).",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T22:50:21Z",
      "diff_hunk" : "@@ -3085,13 +3122,16 @@ bool SendMessages(CNode* pto, CConnman& connman, std::atomic<bool>& interruptMsg\n                     }\n                     // Not in the mempool anymore? don't bother sending it.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97671419",
      "id" : 97671419,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 149,
      "path" : "src/net_processing.cpp",
      "position" : 149,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97671419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97672157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97672157"
         }
      },
      "body" : "Any reason not to use the same name as the signal this binds to (FindTransaction)? FindTransaction seems like a better name anyway because if this method is called, it will return a transaction whether it is in the mempool or not.",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T22:54:59Z",
      "diff_hunk" : "@@ -1182,6 +1212,14 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::GetNonMempoolTransaction(const uint256 &hash, CTransactionRef &txsp)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97672157",
      "id" : 97672157,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 94,
      "path" : "src/wallet/wallet.cpp",
      "position" : 94,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97672157",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97672320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97672320"
         }
      },
      "body" : "txsp = mi->second.tx; might be better to avoid a temporary.",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T22:55:55Z",
      "diff_hunk" : "@@ -1182,6 +1212,14 @@ void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex,\n     }\n }\n \n+void CWallet::GetNonMempoolTransaction(const uint256 &hash, CTransactionRef &txsp)\n+{\n+    map<uint256, CWalletTx>::const_iterator mi = mapWallet.find(hash);\n+    if (mi != mapWallet.end())\n+    {\n+        txsp = MakeTransactionRef(mi->second);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97672320",
      "id" : 97672320,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 99,
      "path" : "src/wallet/wallet.cpp",
      "position" : 99,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97672320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97673509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97673509"
         }
      },
      "body" : "I think you can just make pNVSLastKnownBestHeader and pNVSBestBlock into const pointers to avoid these const_casts.",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T23:03:13Z",
      "diff_hunk" : "@@ -1165,11 +1175,31 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n+void CWallet::UpdatedBlockHeaderTip(bool fInitialDownload, const CBlockIndex *pindexNew)\n {\n     LOCK2(cs_main, cs_wallet);\n \n-    if (!AddToWalletIfInvolvingMe(tx, pindex, posInBlock, true))\n+    if (pNVSLastKnownBestHeader && !headersChainActive.Contains(pNVSLastKnownBestHeader))\n+    {\n+        const CBlockIndex *pindexFork = headersChainActive.FindFork(pNVSLastKnownBestHeader);\n+        if (headersChainActive.Tip() && headersChainActive.Tip() != pindexFork)\n+        {\n+            pNVSLastKnownBestHeader = const_cast<CBlockIndex *>(pindexFork);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97673509",
      "id" : 97673509,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 71,
      "path" : "src/wallet/wallet.cpp",
      "position" : 71,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97673509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97673910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97673910"
         }
      },
      "body" : "fInitialDownload isn't actually used, though maybe it is worth keeping if you plan to unify with the NotifyHeaderTip signal in the future.",
      "commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "created_at" : "2017-01-24T23:05:25Z",
      "diff_hunk" : "@@ -1165,11 +1175,31 @@ void CWallet::MarkConflicted(const uint256& hashBlock, const uint256& hashTx)\n     }\n }\n \n-void CWallet::SyncTransaction(const CTransaction& tx, const CBlockIndex *pindex, int posInBlock)\n+void CWallet::UpdatedBlockHeaderTip(bool fInitialDownload, const CBlockIndex *pindexNew)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9483#discussion_r97673910",
      "id" : 97673910,
      "original_commit_id" : "254c94ca45d990d7eb745110486eb9c6ecfcb8b4",
      "original_position" : 61,
      "path" : "src/wallet/wallet.cpp",
      "position" : 61,
      "pull_request_review_id" : 18287308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
      "updated_at" : "2017-01-24T23:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97673910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
