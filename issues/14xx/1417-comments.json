[
   {
      "body" : "Does this wait until the client is actually shutdown?",
      "created_at" : "2012-06-08T22:10:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6214229",
      "id" : 6214229,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T22:10:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6214229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr The function is called, after we hide the main Window in preparation of a shutdown, which is the right place.",
      "created_at" : "2012-06-08T22:32:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6214532",
      "id" : 6214532,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T22:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6214532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "No, the current behaviour showing the icon until the client has exited completely is by design. See bug #908",
      "created_at" : "2012-06-08T22:40:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6214665",
      "id" : 6214665,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T22:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6214665",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Alright, then the call is miss-placed, but it IS needed to fix the icon still shown after shutdown issue. Will update to find a better place :), thanks for pointing that out.",
      "created_at" : "2012-06-08T22:46:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6214760",
      "id" : 6214760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T22:46:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6214760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@luke-jr\nOkay, I took a look and come to the conclusion as it's not possible to pretend, when trayIcon will be deleted, we have to call trayIcon->hide() as long as we know it is controllable.\n\nIn the present code from master branch this will not succeed and so the icon is displayed, even if the app is closed already. Which one is worse, a tray-icon when there is no app or a missing tray-icon, while shutting down the app?\n\nEdit: I think it's overkill to re-implement the class destructor from QSystemTrayIcon to call hide there.",
      "created_at" : "2012-06-08T23:45:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6215373",
      "id" : 6215373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T23:47:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6215373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Why can't you simply grab the pointer and hold onto it until shutdown completes?",
      "created_at" : "2012-06-08T23:50:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6215424",
      "id" : 6215424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-08T23:50:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6215424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Seems possible, but I'm not sure if I can do this in a clean and sufficient way. I'm sure other devs would say don't touch the Shutdown() function for hiding a system tray-icon and I think so too. If you have an easy and working solution for both problems here, you're welcome ;).",
      "created_at" : "2012-06-09T00:03:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6215535",
      "id" : 6215535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-09T00:04:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6215535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "```C++\n             Shutdown(NULL);\n+            window.hideTrayIcon();\n```",
      "created_at" : "2012-06-09T00:28:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6215739",
      "id" : 6215739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-09T00:28:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6215739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Well Shutdown(NULL) calls exit(), so it won't return and cannot reach window.hideTrayIcon();",
      "created_at" : "2012-06-09T00:33:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6215782",
      "id" : 6215782,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-09T00:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6215782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj Any idea for this one ;)?",
      "created_at" : "2012-06-09T13:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6219875",
      "id" : 6219875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-09T13:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6219875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Yeah, good catch. Shutdown calls exit()... that kind of sucks. This means that execution flow never leaves the function, and thus the destructor is never called.\n\nLuke-jr is right, though, that hiding the icon *before* the shutdown function also isn't desired behavior.\n\nThe reason that Shutdown calls exit is that, with bitcoind, any thread can call Shutdown(). No matter what thread calls it, it has to make sure that the process exits. With the UI, the UI thread is the only thread allowed to actually shutdown the core. Hence `uiinterface->QueueShutdown()`.\n\nAs with the UI we have control over what happens after Shutdown, this means that  you could #ifdef the final exit() from Shutdown to not be called when QT_GUI. This will fix the problem without needing any of the changes in this pull. \n\n",
      "created_at" : "2012-06-10T07:28:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6226533",
      "id" : 6226533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T07:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6226533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Sounds good, will test and update this pull to only do that change.",
      "created_at" : "2012-06-10T11:24:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6227644",
      "id" : 6227644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T11:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6227644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Updated and verified to work (on Windows). Tray icon is removed, but is visible until core is shutdown.",
      "created_at" : "2012-06-10T11:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6227750",
      "id" : 6227750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T11:46:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6227750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2012-06-10T14:20:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6228642",
      "id" : 6228642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T14:20:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6228642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "NACK, bitcoin-qt never exits if you send it SIGTERM after this (though, to be fair, its not really any worse to how it used to SEGFAULT every once in a while, in any case, maybe we could fix that too)",
      "created_at" : "2012-06-10T20:18:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231547",
      "id" : 6231547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:18:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "SIGTERM is non Windows stuff, I need your help here :D.\n\nWhen receiving that signal it is handled via HandleSIGTERM(), which simply sets fRequestShutdown to true. I could only find ThreadMessageHandler2(), which seems to initiate a Shutdown(), right?",
      "created_at" : "2012-06-10T20:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231617",
      "id" : 6231617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Correct, after SIGTERM, we end up just calling Shutdown.  I suppose we really just need to replace our Shutdown calls with uiInterface.QueueShutdown() (have I mentioned how ugly that looks when we are building without GUI?).",
      "created_at" : "2012-06-10T20:31:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231637",
      "id" : 6231637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:31:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Wouldn't it work if I just extend my pull to modify Shutdown() to be like this in the end:\n\n<pre>\n// ensure a clean exit for Bitcoin-Qt\n#ifndef QT_GUI\n        printf(\"Bitcoin exited\\n\\n\");\n        exit(0);\n#else\n        uiInterface.QueueShutdown();\n#endif\n</pre>",
      "created_at" : "2012-06-10T20:40:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231706",
      "id" : 6231706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Sounds like a good solution. That would also likely fix the current crashes\nwhen sending sigterm to the ui executable.",
      "created_at" : "2012-06-10T20:42:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231725",
      "id" : 6231725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:42:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Last comment was @bluematt.\n\nDo not call queueshutdown from Shutdown that will cause big trouble! The qt\nevent loop is long dead by that point and for non-ui you'd be calling\nshutdown recursively.",
      "created_at" : "2012-06-10T20:45:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231753",
      "id" : 6231753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:45:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I will update, but I need one of you (if you use Linux / Unix) to test and verify this.",
      "created_at" : "2012-06-10T20:46:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231761",
      "id" : 6231761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Personally, Id like to not have to see uiInterface.QueueShutdown everywhere, but be able to call Shutdown which calls uiInterface.QueueShutdown which can call FinishShutdown in its callback, or simply have Shutdown call FinishShutdown directly if we dont have GUI...but maybe Im the only one who doesnt like having to uiInterface in bitcoind...",
      "created_at" : "2012-06-10T20:47:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231777",
      "id" : 6231777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@laanwj Damn, I was too quick ... and missunderstood your comment :-/.",
      "created_at" : "2012-06-10T20:49:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231802",
      "id" : 6231802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T20:49:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj Well no, I don't get it ... calling ``uiInterface.QueueShutdown();`` triggers ``QMetaObject::invokeMethod(QCoreApplication::instance(), \"quit\", Qt::QueuedConnection);``, which puts a quit() command in the main event loop, right? So why should the event loop be gone when we are in ``Shutdown()``? I can't find the connection between the two.",
      "created_at" : "2012-06-10T21:09:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6231997",
      "id" : 6231997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T21:10:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6231997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@laanwj Don't bother with my last question, I had a discussion on IRC with BlueMatt and will come up with a new pull-request tomorrow and close this one.",
      "created_at" : "2012-06-10T21:39:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6232267",
      "id" : 6232267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-10T21:39:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6232267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "There is nothing wrong with the current sequence. QueueShutdown first winds down the Qt event loop, which, returning in the main function, properly calls Shutdown.\n\nYou cannot simply spawn Shutdown in a new thread when the UI is running, this results in crashes so it takes a safer way.\n\nI really don't care about \"seeing ui.QueueShutdown\" everywhere. That's confounding bikeshedding with a real issue. Sure, if you can come up with a more proper name in non-ui context that's great but don't try to fix what's not broken!!!\n",
      "created_at" : "2012-06-11T05:27:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6235592",
      "id" : 6235592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-11T05:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6235592",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "See #1439, which I think is rather elegant.",
      "created_at" : "2012-06-11T05:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1417#issuecomment-6235824",
      "id" : 6235824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1417",
      "updated_at" : "2012-06-11T05:53:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6235824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
