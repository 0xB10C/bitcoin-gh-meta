[
   {
      "body" : "\"Because the first transaction seen by most miners is Trx B, they will reject the block from Evil miner for being invalid and eventually the blockchain will confirm Trx B.\"\n\nI stopped reading here.  This isn't how bitcoin works. Blocks always superseed hearing transactions not in blocks.\n\nAlso I suspect you think a txn will still show confirmation 1 when its no longer in the longest chain. This isn't so, if the block the txn was confirmed in falls out of the longest chain the confirms will go back to zero.\n\nAlso, the client will not spend inputs with less than 6 confirms if it has a choice.",
      "created_at" : "2012-06-06T20:00:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1428#issuecomment-6161085",
      "id" : 6161085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1428",
      "updated_at" : "2012-06-06T20:00:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6161085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> Blocks always superseed hearing transactions not in blocks.\n\nYup, after re-reading vector76's post I see where I goofed on the details.  But the problem is still there.\n\nSo now Evil miner holds off on broadcasting his block which includes Trx A until he learns that a block at the same height has been mined elsewhere.  Immediately then Evil miner races his block with Trx A directly to Bob and then at the same time broadcasts Trx B to well connected nodes.\n\nSo the problem remains.  Bob sees the block with Trx A, rejects the block which has the same height when it finally arrives from elsewhere and rejects Trx B when that arrives as well.\n\nI've edited the report above to reflect this missing detail of Evil miner holding onto the block until it has been solved elsewhere.\n\nAs far as the client will not spend inputs with less than 6 confirms, that's why I clarified that \"Bob doesn't keep much of a balance\".  With security fears keeping coins in cold storage, the online (hot) wallet will frequently be completely spent.  If the intent is to grief Bob, Evil miner can withdraw coins to cause the hot wallet to run low or out, so it isn't like this scenario is one that won't ever occur.   There is no risk to Evil miner too  If Bob learns of the block from the network before Evil miner's block arrives, then simply Bob will never see Trx A.  Or if Evil miner's block to Bob propagates and is the one that gets built instead of being orphaned, the Trx B is rejected and Evil miner's transaction with Bob gets processed as a normal transaction.  So there's no risk to Evil miner to keep doing this over and over until Bob gets harmed.",
      "created_at" : "2012-06-07T04:38:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1428#issuecomment-6168673",
      "id" : 6168673,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1428",
      "updated_at" : "2012-06-07T05:02:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6168673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24884?v=3",
         "events_url" : "https://api.github.com/users/sgornick/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sgornick/followers",
         "following_url" : "https://api.github.com/users/sgornick/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sgornick/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sgornick",
         "id" : 24884,
         "login" : "sgornick",
         "organizations_url" : "https://api.github.com/users/sgornick/orgs",
         "received_events_url" : "https://api.github.com/users/sgornick/received_events",
         "repos_url" : "https://api.github.com/users/sgornick/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sgornick/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sgornick/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sgornick"
      }
   },
   {
      "body" : "Closing this.\r\n\r\nThe wallet will not spend recent outputs (<6 confirms) unless there is no other choice. So this is just a matter of waiting until there is enough balance 'old enough'.\r\n",
      "created_at" : "2014-09-25T10:19:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1428#issuecomment-56799798",
      "id" : 56799798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1428",
      "updated_at" : "2014-09-25T10:19:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56799798",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
