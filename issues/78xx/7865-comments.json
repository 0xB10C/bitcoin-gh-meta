[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59392178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59392178"
         }
      },
      "body" : "It seems to me default is simply \"not bip125\". Not sure the name \"default\" really fits, especially longer-term. ",
      "commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "created_at" : "2016-04-12T15:03:37Z",
      "diff_hunk" : "@@ -533,6 +533,11 @@ class CAccountingEntry\n     std::vector<char> _ssExtra;\n };\n \n+enum CreateTransactionFlags {\n+    CREATE_TX_DEFAULT     = 0,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59392178",
      "id" : 59392178,
      "original_commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865",
      "updated_at" : "2016-04-12T15:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59392178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59392983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59392983"
         }
      },
      "body" : "update the comment?",
      "commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "created_at" : "2016-04-12T15:07:44Z",
      "diff_hunk" : "@@ -2179,7 +2179,7 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                 // nLockTime set above actually works.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59392983",
      "id" : 59392983,
      "original_commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "original_position" : 86,
      "path" : "src/wallet/wallet.cpp",
      "position" : 86,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865",
      "updated_at" : "2016-04-12T15:07:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59392983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59393236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59393236"
         }
      },
      "body" : "Good catch! Will update.",
      "commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "created_at" : "2016-04-12T15:08:58Z",
      "diff_hunk" : "@@ -2179,7 +2179,7 @@ bool CWallet::CreateTransaction(const vector<CRecipient>& vecSend, CWalletTx& wt\n                 // nLockTime set above actually works.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59393236",
      "id" : 59393236,
      "original_commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "original_position" : 86,
      "path" : "src/wallet/wallet.cpp",
      "position" : 86,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865",
      "updated_at" : "2016-04-12T15:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59393236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59400373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59400373"
         }
      },
      "body" : "I think this delete outputs going to a watch-only wallet addresses. Perhaps check for isminetype we care about.",
      "commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "created_at" : "2016-04-12T15:47:14Z",
      "diff_hunk" : "@@ -2500,6 +2511,107 @@ UniValue fundrawtransaction(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue bumpfee(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+                            \"bumpfee \\\"txid\\\"\\n\"\n+                            \"\\nBumps the fee of a opt-in-RBF transaction.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"transactionid\\\"  (string, required) The transaction id\\n\"\n+                            \"\\nResult:\\n\"\n+                            \"{\\n\"\n+                            \"  \\\"txid\\\":    \\\"value\\\", (string)  The id of the new transaction\\n\"\n+                            \"  \\\"oldfee\\\":    n,         (numeric) Fee of the replaced transaction\\n\"\n+                            \"  \\\"fee\\\":       n,         (numeric) Fee the resulting transaction pays\\n\"\n+                            \"}\\n\"\n+                            \"\\nExamples:\\n\"\n+                            \"\\nBump the fee, get the new transactions txid\\n\"\n+                            + HelpExampleCli(\"bumpfee\", \"<txid>\")\n+                            );\n+\n+    RPCTypeCheck(params, boost::assign::list_of(UniValue::VSTR));\n+    uint256 hash;\n+    hash.SetHex(params[0].get_str());\n+\n+    // get the transaction\n+    if (!pwalletMain->mapWallet.count(hash))\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid or non-wallet transaction id\");\n+    const CWalletTx& wtx = pwalletMain->mapWallet[hash];\n+\n+    // ownly bump the fee if the transation signals opt-in-RBF after BIP125\n+    if (!SignalsOptInRBF(wtx))\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Transaction can't be replaced\");\n+\n+    // get the old fee to allow oldfee+newfee\n+    CAmount nDebit = wtx.GetDebit(ISMINE_SPENDABLE);\n+    CAmount nOldFee = -(wtx.IsFromMe(ISMINE_SPENDABLE) ? wtx.GetValueOut() - nDebit : 0);\n+    CAmount nFee = nOldFee; //set the old fee as the base fee\n+\n+    CMutableTransaction tx(wtx);\n+    // remove scriptSigs, the signatures are invalid after mutating the transaction\n+    for (std::vector<CTxIn>::iterator it(tx.vin.begin()); it != tx.vin.end(); ++it)\n+    {\n+        (*it).scriptSig = CScript();\n+    }\n+\n+    // remove \"old\" change outputs\n+    for (std::vector<CTxOut>::iterator it(tx.vout.begin()); it != tx.vout.end();)\n+    {\n+        if (pwalletMain->IsMine(*it))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7865#discussion_r59400373",
      "id" : 59400373,
      "original_commit_id" : "f68447ad7cc265e2b949e42b02abe901f426af1c",
      "original_position" : 178,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7865",
      "updated_at" : "2016-04-12T15:47:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59400373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
