[
   {
      "body" : "I managed to reproduce the issue on an Ubuntu 12.04 VM. Indeed, it fails at block 381.\r\n\r\n- Boost version: 104601\r\n- OpenSSL version: 1.0.1 14 Mar 2012\r\n- g++ version: 4.6.3",
      "created_at" : "2014-08-05T08:18:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51163909",
      "id" : 51163909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T08:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51163909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Will also try a fresh sync on Windows...",
      "created_at" : "2014-08-05T08:34:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51165231",
      "id" : 51165231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T08:34:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51165231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo a -reindex will also reproduce it.",
      "created_at" : "2014-08-05T08:43:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51166022",
      "id" : 51166022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T08:43:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51166022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "It syncs just fine, until now I'm at block 4136...",
      "created_at" : "2014-08-05T08:46:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51166297",
      "id" : 51166297,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T08:46:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51166297",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "The tests also fail, by the way, on CCoinsViewCache as expected.\r\n\r\nI can confirm that bc42503 is the commit that causes it. With that reverted, it gets past block 380 and the tests succeed.\r\n\r\nLooks like a problem with older boosts unordered_map combined with with custom hashers, still investigating further.\r\n",
      "created_at" : "2014-08-05T08:52:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51167159",
      "id" : 51167159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T08:52:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51167159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The following trivial patch appears to solve the problem: http://paste.ubuntu.com/7959542/\r\n",
      "created_at" : "2014-08-05T09:22:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51172516",
      "id" : 51172516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-05T09:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51172516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Original reporter here. I was able able to duplicate this on another Ubuntu 12.04 32-bit machine (physical machine this time). Per email to @sipa a git bisect brought me to this commit: bc42503f6ab304608c321986a870795e45f5a016. If I check that commit out, then back it out (using `git revert -n`) it successfully compiles is able to sync blocks as @laanwj found, too. I'll try the patch here and report back when I can.",
      "created_at" : "2014-08-06T17:44:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51370167",
      "id" : 51370167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-06T17:44:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51370167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/694298?v=3",
         "events_url" : "https://api.github.com/users/jessepeterson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jessepeterson/followers",
         "following_url" : "https://api.github.com/users/jessepeterson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jessepeterson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jessepeterson",
         "id" : 694298,
         "login" : "jessepeterson",
         "organizations_url" : "https://api.github.com/users/jessepeterson/orgs",
         "received_events_url" : "https://api.github.com/users/jessepeterson/received_events",
         "repos_url" : "https://api.github.com/users/jessepeterson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jessepeterson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jessepeterson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jessepeterson"
      }
   },
   {
      "body" : "Can confirm that the `size_t`/`uint64_t` patch from @laanwj allows syncing of blocks past 380 on bitcoin/bitcoin master branch (5e94d0036a76ea9d63e4ed17b12554caef7f55da) on Ubuntu 12.04/i386.",
      "created_at" : "2014-08-06T18:24:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4634#issuecomment-51375751",
      "id" : 51375751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4634",
      "updated_at" : "2014-08-06T18:24:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51375751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/694298?v=3",
         "events_url" : "https://api.github.com/users/jessepeterson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jessepeterson/followers",
         "following_url" : "https://api.github.com/users/jessepeterson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jessepeterson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jessepeterson",
         "id" : 694298,
         "login" : "jessepeterson",
         "organizations_url" : "https://api.github.com/users/jessepeterson/orgs",
         "received_events_url" : "https://api.github.com/users/jessepeterson/received_events",
         "repos_url" : "https://api.github.com/users/jessepeterson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jessepeterson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jessepeterson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jessepeterson"
      }
   }
]
