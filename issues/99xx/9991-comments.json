[
   {
      "body" : "1. Rebased and fixed conflicts\r\n2. Addressed @kallewoof nits\r\n3. Add the new parameter to `client.cpp`",
      "created_at" : "2017-03-14T16:56:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#issuecomment-286487382",
      "id" : 286487382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9991",
      "updated_at" : "2017-03-14T16:56:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/286487382",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "@luke-jr @jnewbery   @JeremyRubin nit addressed, can you re-ACK?",
      "created_at" : "2017-03-16T05:18:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#issuecomment-286960558",
      "id" : 286960558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9991",
      "updated_at" : "2017-03-16T05:19:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/286960558",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9991#discussion_r106419280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106419280"
         }
      },
      "body" : "Nit: Consider using named arguments here, instead of positional arguments (since the meaning of the arguments is not clear without having to go back to the definition of listreceivedbyaddress).",
      "commit_id" : "8c373d5feedb428d234278d484e5d2a932010fae",
      "created_at" : "2017-03-16T13:43:20Z",
      "diff_hunk" : "@@ -62,10 +62,22 @@ def run_test(self):\n         assert_array_result(self.nodes[1].listreceivedbyaddress(11),{\"address\":addr},{ },True)\n \n         #Empty Tx\n-        addr = self.nodes[1].getnewaddress()\n+        empty_addr = self.nodes[1].getnewaddress()\n         assert_array_result(self.nodes[1].listreceivedbyaddress(0,True),\n-                           {\"address\":addr},\n-                           {\"address\":addr, \"account\":\"\", \"amount\":0, \"confirmations\":0, \"txids\":[]})\n+                           {\"address\":empty_addr},\n+                           {\"address\":empty_addr, \"account\":\"\", \"amount\":0, \"confirmations\":0, \"txids\":[]})\n+\n+        #Test Address filtering\n+        #Only on addr\n+        expected = {\"address\":addr, \"account\":\"\", \"amount\":Decimal(\"0.1\"), \"confirmations\":10, \"txids\":[txid,]}\n+        res = self.nodes[1].listreceivedbyaddress(0, True, True, addr)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#discussion_r106419280",
      "id" : 106419280,
      "original_commit_id" : "8c373d5feedb428d234278d484e5d2a932010fae",
      "original_position" : 15,
      "path" : "qa/rpc-tests/receivedby.py",
      "position" : 15,
      "pull_request_review_id" : 27339297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9991",
      "updated_at" : "2017-03-16T13:43:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106419280",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9991#discussion_r106421452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106421452"
         }
      },
      "body" : "I'd prefer this test if `other_addr` (currently declared on line 78) received some funds before you did your tests on `listreceivedbyaddress()` with a filter address. This isn't currently testing the case where the wallet contains multiple addresses with funds and you want to see the transactions received by one of those addresses. Ideally the test case would be:\r\n\r\n- define addr and send funds to it (already done for you in lines 42-43)\r\n- define other_addr and send funds to it\r\n- call `listreceivedbyaddress()` filtering on `addr`. Assert only one transaction is returned.\r\n- call `listreceivedbyaddress()` filtering on `other_addr`. Assert only one transaction is returned.\r\n- call `listreceivedbyaddress()` with no filtering. Assert both transactions are returned.",
      "commit_id" : "8c373d5feedb428d234278d484e5d2a932010fae",
      "created_at" : "2017-03-16T13:52:10Z",
      "diff_hunk" : "@@ -62,10 +62,22 @@ def run_test(self):\n         assert_array_result(self.nodes[1].listreceivedbyaddress(11),{\"address\":addr},{ },True)\n \n         #Empty Tx\n-        addr = self.nodes[1].getnewaddress()\n+        empty_addr = self.nodes[1].getnewaddress()\n         assert_array_result(self.nodes[1].listreceivedbyaddress(0,True),\n-                           {\"address\":addr},\n-                           {\"address\":addr, \"account\":\"\", \"amount\":0, \"confirmations\":0, \"txids\":[]})\n+                           {\"address\":empty_addr},\n+                           {\"address\":empty_addr, \"account\":\"\", \"amount\":0, \"confirmations\":0, \"txids\":[]})\n+\n+        #Test Address filtering",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#discussion_r106421452",
      "id" : 106421452,
      "original_commit_id" : "8c373d5feedb428d234278d484e5d2a932010fae",
      "original_position" : 12,
      "path" : "qa/rpc-tests/receivedby.py",
      "position" : 12,
      "pull_request_review_id" : 27341570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9991",
      "updated_at" : "2017-03-16T13:52:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/106421452",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Looks good. A couple of nits and a suggestion on improving the test case.",
      "created_at" : "2017-03-16T14:30:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#issuecomment-287074963",
      "id" : 287074963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9991",
      "updated_at" : "2017-03-16T14:30:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287074963",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utAck",
      "created_at" : "2017-03-16T21:30:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9991#issuecomment-287197086",
      "id" : 287197086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9991",
      "updated_at" : "2017-03-16T21:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/287197086",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   }
]
