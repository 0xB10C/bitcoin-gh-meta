[
   {
      "body" : "`-maxuploadtarget` is in MB (1000000), not MiB (1048576), not currently documented, but just in case it does get documented.\r\n\r\nIf a user wants to control the total amount transferred, then I don't think MB per day is a good unit to use. If they have a transfer cap, then it is most likely tied to a monthly billing cycle, so MB/month is likely better. (For example, I think Comcast in the US has a 250GB/month cap, so a Comcast customer might like to allow 100GB/month, or something like that.)",
      "created_at" : "2015-09-03T14:47:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137473807",
      "id" : 137473807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-03T14:47:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137473807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1945?v=3",
         "events_url" : "https://api.github.com/users/casey/events{/privacy}",
         "followers_url" : "https://api.github.com/users/casey/followers",
         "following_url" : "https://api.github.com/users/casey/following{/other_user}",
         "gists_url" : "https://api.github.com/users/casey/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/casey",
         "id" : 1945,
         "login" : "casey",
         "organizations_url" : "https://api.github.com/users/casey/orgs",
         "received_events_url" : "https://api.github.com/users/casey/received_events",
         "repos_url" : "https://api.github.com/users/casey/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/casey/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/casey/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/casey"
      }
   },
   {
      "body" : "> MB/month is likely better\r\n\r\nWhich could result in all of the 100GB being eaten up on the first few days of the timeframe. Maybe the owner restarts the server mid-month and then serves 200GB of historic blocks that month.",
      "created_at" : "2015-09-03T14:54:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137475865",
      "id" : 137475865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-03T14:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137475865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> Which could result in all of the 100GB being eaten up on the first few days of the timeframe. Maybe the owner restarts the server mid-month and then serves 200GB of historic blocks that month.\r\n\r\nOnce combined with connection throttling, which would make the speed that the 100GB can be 'eaten up' configurable, (which @cfields is working on ) it's less of an issue. ",
      "created_at" : "2015-09-03T14:57:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137476598",
      "id" : 137476598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-03T14:57:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137476598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> -maxuploadtarget is in MB (1000000), not MiB (1048576), not currently documented, but just in case it does get documented.\r\n\r\n@casey Thanks. Will fix it.\r\n\r\nNot sure about limit per month or per day.\r\nPer month can be difficult because not every month has the same amount of days (30/31/27/28). Also it's unclear how one could get \"in sync\" with providers month rhythm (must not be first to last day of month). Though, it still would allow to use a daily measurement cycle (break down the month limit to days, keep focus on a day limit).\r\n\r\nFor now i think keep the day-limit does make things more easy and controllable.",
      "created_at" : "2015-09-03T15:09:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137479693",
      "id" : 137479693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-03T15:09:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137479693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I need some kind of goal set in kB/second, as I am often forced to shutdown my node for reliable phone calls. :(",
      "created_at" : "2015-09-03T15:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137490859",
      "id" : 137490859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-03T15:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137490859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Agree with @luke-jr here, we think about available bandwidth in terms of kB/sec rather than MB/day because that's how it's always reported to us - adverts from ISPs, speed checking websites, P2P torrenting apps etc.",
      "created_at" : "2015-09-04T00:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137605028",
      "id" : 137605028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T00:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137605028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6762681?v=3",
         "events_url" : "https://api.github.com/users/NanoAkron/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NanoAkron/followers",
         "following_url" : "https://api.github.com/users/NanoAkron/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NanoAkron/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NanoAkron",
         "id" : 6762681,
         "login" : "NanoAkron",
         "organizations_url" : "https://api.github.com/users/NanoAkron/orgs",
         "received_events_url" : "https://api.github.com/users/NanoAkron/received_events",
         "repos_url" : "https://api.github.com/users/NanoAkron/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NanoAkron/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NanoAkron/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NanoAkron"
      }
   },
   {
      "body" : "@NanoAkron: not sure if @luke-jr is for a bandwidth kB/sec limit.\r\nWhat is the most annoying thing that can happen when you download something over torrent? Probably if you connected and download from a throttled peer.\r\n\r\nBandwidth throttled peers is not something we should *not* encourage within bitcoin-core. If a node-operator likes to limit the bandwidth, he can use different tools. What we really should do is reducing bandwidth without impair the network quality and speed. My stats showed me that most traffic is done outbound and most of the outbound traffic is consumed by serving historical blocks (help other nodes to initial sync a new chain).\r\n\r\n**This PR can reduce bandwidth significant while not impair the network quality.**\r\n**An initial sync for a new peer is not something that is very time critical.**\r\n\r\nThere was a discussion on #bitcoin-dev about the -maxuploadtarget (gmaxwell, wumpus, me) http://bitcoinstats.com/irc/bitcoin-dev/logs/2015/09/02#l1441180902.0)",
      "created_at" : "2015-09-04T07:20:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137663963",
      "id" : 137663963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T07:20:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137663963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> download from a throttled [torrent] peer\r\n\r\nI don't think you can compare torrent to bitcoin-core serving blocks... Using torrent you are happy to get any transmission speed because it is parallel download anyway.\r\n\r\nOn the contrary, bitcoin-core is doing moving-window download (c.f. #4468). So you always want to fetch the blocks from peers which can upload to you not much slower than your download speed?\r\n\r\nThis PR makes the full node to disconnect from initial-download-peers instead of serving them at lower speed, which sounds like the better solution to me.",
      "created_at" : "2015-09-04T08:47:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137681449",
      "id" : 137681449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T08:47:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137681449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> This PR makes the full node to disconnect from initial-download-peers instead of serving them at lower speed, which sounds like the better solution to me.\r\n\r\nTwo questions:\r\n\r\n* What is the benefit for a peer in initial sync-state when it gets served with throttled bandwidth (lets assume 10kb/s) in comparison to a disconnect?\r\n* What is the benefit for a bandwidth limited peer to serve historical blocks with limited bandwidth rather then do a disconnect?",
      "created_at" : "2015-09-04T09:05:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137684346",
      "id" : 137684346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T09:05:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137684346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Since 0.10 it does not really hurt much anymore to be served by a throttled\npeer, as the download algorithm will download in parallel from many, and if\none is significantly slower than others, disconnect it itself.\n",
      "created_at" : "2015-09-04T09:12:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137685349",
      "id" : 137685349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T09:12:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137685349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jonasschnelli To answer your two questions: No, I don't see a benefit. My wording was confusing, so to be clear: I am *supporting* this PR/commit. (Just as @sipa said, throttling won't help as it results in disconnect anyway)",
      "created_at" : "2015-09-04T09:20:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137686528",
      "id" : 137686528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T09:20:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137686528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Having an \"instant\" bandwidth limit to work with can enable Core to make intelligent-ish decisions, like not inv'ing/uploading new blocks to more than one peer at a time unless the current-upload peer is downloading at a slow rate.",
      "created_at" : "2015-09-04T12:30:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137723150",
      "id" : 137723150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-04T12:30:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137723150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Surely we need some sort of scaling to our bandwidth limitations/throttling here - serving historic blocks to unsynced peers could 'trickle-feed' in the background at a few 10s of kB/sec, and anything within the last 60 blocks or so could then be served with greater priority. \r\n\r\nThis would need the unsynced peer to know with certainty the true current block height so that it didn't drop slow inbound connections, because this could be a new attack vector.",
      "created_at" : "2015-09-05T14:27:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-137960225",
      "id" : 137960225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-05T14:27:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/137960225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6762681?v=3",
         "events_url" : "https://api.github.com/users/NanoAkron/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NanoAkron/followers",
         "following_url" : "https://api.github.com/users/NanoAkron/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NanoAkron/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NanoAkron",
         "id" : 6762681,
         "login" : "NanoAkron",
         "organizations_url" : "https://api.github.com/users/NanoAkron/orgs",
         "received_events_url" : "https://api.github.com/users/NanoAkron/received_events",
         "repos_url" : "https://api.github.com/users/NanoAkron/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NanoAkron/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NanoAkron/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NanoAkron"
      }
   },
   {
      "body" : "@casey  of course, any longer window cap can be divided down.   Breaking it up into smaller groups has a side effect of allowing us more freedom to ignore the resource scheduling issue.\r\n\r\nImagine that a low monthly cap were widely deployed on the network.  Then the whole network might blow through its cap in a few days at the start of the month, and be unwilling to serve blocks for the rest of the month!   The daily limit (especially with the arbitrary start point) is less of an issue.\r\n\r\n@luke-jr Your phone call issue is largely orthogonal to what this is addressing.   Good behavior with respect to buffer bloat and general rate restriction are another matter from overall usage.  Those need to be address too, but in other PRs. :)\r\n\r\n\r\n\r\n",
      "created_at" : "2015-09-06T07:25:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138049630",
      "id" : 138049630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-06T07:25:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138049630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "With the above mentioned comparison bug fixed, I can confirm that the basic functionality works once the limit is crossed: new blocks are relayed without issue, old blocks result in disconnect.",
      "created_at" : "2015-09-07T08:10:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138227127",
      "id" : 138227127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-07T08:10:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138227127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell: Thanks for the review!\r\nUpdated the time check (block older than a week) and did some testing. Seems to work like this.",
      "created_at" : "2015-09-07T15:47:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138328237",
      "id" : 138328237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-07T15:47:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138328237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6622#discussion_r38875088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6622"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38875088"
         }
      },
      "body" : "Specify units (bytes? megabytes?) and window size (seconds, days?)",
      "commit_id" : "93f3de19530dd1179c5c612df4ec159f29514bc4",
      "created_at" : "2015-09-07T17:36:04Z",
      "diff_hunk" : "@@ -335,6 +335,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-whitebind=<addr>\", _(\"Bind to given address and whitelist peers connecting to it. Use [host]:port notation for IPv6\"));\n     strUsage += HelpMessageOpt(\"-whitelist=<netmask>\", _(\"Whitelist peers connecting from the given netmask or IP address. Can be specified multiple times.\") +\n         \" \" + _(\"Whitelisted peers cannot be DoS banned and their transactions are always relayed, even if they are already in the mempool, useful e.g. for a gateway\"));\n+    strUsage += HelpMessageOpt(\"-maxuploadtarget=<n>\", strprintf(_(\"Tries to keep outbound traffic under the given target, 0 = no limit (default: %d)\"), 0));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#discussion_r38875088",
      "id" : 38875088,
      "original_commit_id" : "32f685b7d54b11ec44f8ffd9bef42229f8441a53",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6622",
      "updated_at" : "2015-09-08T12:41:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/38875088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "might want to add a test so that it won't drop the last connection? I'm not sure but if you imagine e.g. someone using -connect and having several peers down already? -- then again is the peer really useful if its fetching old blocks?",
      "created_at" : "2015-09-07T18:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138354611",
      "id" : 138354611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-07T18:40:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138354611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Not sure how useful a peer with height < now-1week is. But it could catch up and then be helpful. Thought, I think we should respect the uploadtarget in the first place.\r\n\r\nExcluding -whitebind looks more important to me (could be implemented in a follow up PR).",
      "created_at" : "2015-09-07T20:26:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138371110",
      "id" : 138371110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-07T20:26:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138371110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "With respect to forcing a minimum on the argument. Perhaps it should just whine in the logs if you've asked for a value that is too small?    One consequence of the current setup is that every restart forces another 144MB of history transfer.   (I removed that code in my own copy because it makes the software much easier to test.)\r\n\r\n",
      "created_at" : "2015-09-07T23:15:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138391943",
      "id" : 138391943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-07T23:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138391943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "* Fixed @sipa nit (mention MiB as unit per 24h cycle).\r\n* Dropped forcing of a minimum target of 24 hours of blocks * MAX_BLOCKSIZE, only warn in a such case.",
      "created_at" : "2015-09-08T12:42:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6622#issuecomment-138548472",
      "id" : 138548472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6622",
      "updated_at" : "2015-09-08T12:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/138548472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
