[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\nCould for most part be a scripted-diff?",
      "created_at" : "2021-12-17T19:50:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-996993520",
      "id" : 996993520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847bOnw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996993520/reactions"
      },
      "updated_at" : "2021-12-17T19:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996993520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj changed the last commit (f282ffb) to scripted-diff.",
      "created_at" : "2021-12-17T23:16:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997085062",
      "id" : 997085062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847bk-G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997085062/reactions"
      },
      "updated_at" : "2021-12-17T23:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997085062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't thought a lot about this, but I have two questions:\r\n\r\nIs this going to cause any additional fingerprinting vectors? I guess not after commit 14ba286556faad794f288ef38493c540382897cb?\r\n\r\nAlso, could this break P2P address relay? I guess only for the local node?",
      "created_at" : "2021-12-18T08:59:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997172643",
      "id" : 997172643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847b6Wj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997172643/reactions"
      },
      "updated_at" : "2021-12-18T08:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997172643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Also, could this break P2P address relay? I guess only for the local node?\r\n\r\nYes, but so could a misadjusted time due to connecting to the wrong nodes. At the least it reduces variance between starts of `bitcoind`.",
      "created_at" : "2021-12-18T11:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997190177",
      "id" : 997190177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847b-oh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997190177/reactions"
      },
      "updated_at" : "2021-12-18T11:39:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997190177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also, could this break P2P address relay?\r\n\r\nThis PR doesn't affect address (gossip) relay, because that is independent from AddrMan:\r\nThe decision whether to forward an address will still be on an adjusted time basis after this, see https://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/net_processing.cpp#L2887-L2888\r\nand \r\nhttps://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/net_processing.cpp#L2933-L2936\r\n\r\nAlthough it would probably make sense to change `net_processing` as well to be consistent.",
      "created_at" : "2021-12-18T14:53:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997213391",
      "id" : 997213391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847cETP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997213391/reactions"
      },
      "updated_at" : "2021-12-18T14:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997213391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could you summarize the reasons for this change and put it in the OP post?\r\nIt's difficult to make sure everyone's on the same page otherwise.",
      "created_at" : "2021-12-20T07:56:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997680716",
      "id" : 997680716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847d2ZM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997680716/reactions"
      },
      "updated_at" : "2021-12-20T07:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997680716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@naumenkogs The main reason is to remove the use of GetAdjustedTime.\r\n\r\nAs @mzumsande said, this change does not affect the network layer (or other layers), only the local AddrMan so it seems safer and easier to test and review.\r\n\r\nI have a version of this PR that also removes `GetAdjustedTime` from `src/node/miner.cpp`, `src/validation.cpp`, `src/net.cpp`, `src/rpc/net.cpp` and `src/net_processing.cpp`.  While this passes the unit and functional tests (without changing them), I'm not sure what behavioral changes this might cause.\r\n\r\nIf reviewers think it's better, I can update the PR with this version.\r\n",
      "created_at" : "2021-12-20T14:26:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997971629",
      "id" : 997971629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847e9at",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997971629/reactions"
      },
      "updated_at" : "2021-12-20T14:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997971629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r772425919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what is this? I'd say please use `GetTime` or (if possible) `GetTime<chrono>`",
      "commit_id" : "f282ffb475dd6a29d5e2312696d9c4ee4e098f3a",
      "created_at" : "2021-12-20T14:49:49Z",
      "diff_hunk" : "@@ -73,6 +73,7 @@ class CMedianFilter\n /** Functions to keep track of adjusted P2P time */\n int64_t GetTimeOffset();\n int64_t GetAdjustedTime();\n+int64_t GetLocalTime();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r772425919",
      "id" : 772425919,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII584uCki_",
      "original_commit_id" : "f282ffb475dd6a29d5e2312696d9c4ee4e098f3a",
      "original_line" : 76,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/timedata.h",
      "position" : 4,
      "pull_request_review_id" : 836476307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T14:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If reviewers think it's better, I can update the PR with this version.\r\n\r\nIf this really doesn't change p2p behavior and is only a refactor (?), then I'd say to leave this pull as-is to simplify review. If this is not a refactor, it would be good to list all behavior changes.",
      "created_at" : "2021-12-20T14:52:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997993431",
      "id" : 997993431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847fCvX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997993431/reactions"
      },
      "updated_at" : "2021-12-20T14:52:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997993431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
