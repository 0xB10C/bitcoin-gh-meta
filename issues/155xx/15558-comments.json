[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-03-07T23:51:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-470748173",
      "id" : 470748173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDc0ODE3Mw==",
      "updated_at" : "2019-06-05T11:31:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470748173",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Wouldn't this mean if one DNS seed is compromised, it could potentially feed sybil addresses to nodes and its victims wouldn't have any honest nodes (eg, from other DNS seeds)?\r\n\r\nDoes the issue it intends to address actually exist? I would think DNS queries would get cached and proxied by ISP DNS servers sufficiently to deny any information to the real DNS servers, no?",
      "created_at" : "2019-03-08T02:57:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-470786101",
      "id" : 470786101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDc4NjEwMQ==",
      "updated_at" : "2019-03-08T02:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470786101",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "3 seems like an OK number to query for at once, but a reasonable thing to bikeshed a bit.\r\n\r\nCode looks good to me.",
      "created_at" : "2019-03-08T06:05:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-470816781",
      "id" : 470816781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDgxNjc4MQ==",
      "updated_at" : "2019-03-08T06:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470816781",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "node_id" : "MDQ6VXNlcjg4MTI1Mw==",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, my comment in IRC was that one creates an immediate eclipse vulnerability.  Three sounds reasonable.\r\n\r\nWe also really should look at why this is triggered as much as it is, locally I see it run on every restart these days.",
      "created_at" : "2019-03-08T10:09:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-470875656",
      "id" : 470875656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MDg3NTY1Ng==",
      "updated_at" : "2019-03-08T10:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/470875656",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\n> Yeah, my comment in IRC was that one creates an immediate eclipse vulnerability. Three sounds reasonable.\r\n\r\nBut only for new nodes, I suppose? If it already has gossiped peers before, then 'query one DNS seed' seems more reasonable. But okay, 3 is a safer option in any case.\r\n\r\n> We also really should look at why this is triggered as much as it is, locally I see it run on every restart these days.\r\n\r\nMy guess would be that the peers it tries initially to connect to might not be selected for connectability. Maybe 11 seconds is also too little. I think it would be fine to increase this to say, 30 or even 60 seconds.",
      "created_at" : "2019-03-09T05:19:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-471147040",
      "id" : 471147040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MTE0NzA0MA==",
      "updated_at" : "2019-03-09T05:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/471147040",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It may just be that we need to try connections faster initially. ... I dunno I really have the impression that it was frequently not using dns seeds in the past but is now, but I don't have hard data to support that. In theory feelers should mean that our tried table is better than ever before, but it might just be that there has been a lot of node churn lately.",
      "created_at" : "2019-03-09T06:20:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-471150395",
      "id" : 471150395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MTE1MDM5NQ==",
      "updated_at" : "2019-03-09T06:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/471150395",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "When the code was added circa 2014 in 2e7009d67b862cf822a1c70e181de6af659a3096, 11 seconds was completely arbitrary.   It was always the intent to adjust that number based on field experience.  It sounds like it needs to increase.\r\n\r\nThe driving theory is to make DNS seeds a fallback and \"give it a good try\" to avoid querying DNS seeds at all.\r\n\r\nThe code already skips the delay for an empty AddrMan -- ie. fresh bitcoind install -- thus narrowing the user impact of a longer delay to existing nodes that presumably have addrman data to sort through.\r\n\r\nIt boils down to a question of how much dependence should a node have on DNS seeds, in general?   *300 seconds* is a reasonable answer for the new delay, if we want to give AddrMan time to \"warm up\" and preserve privacy a bit more. ",
      "created_at" : "2019-03-09T18:25:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-471208937",
      "id" : 471208937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MTIwODkzNw==",
      "updated_at" : "2019-03-09T18:25:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/471208937",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/494411?v=4",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "node_id" : "MDQ6VXNlcjQ5NDQxMQ==",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It boils down to a question of how much dependence should a node have on DNS seeds, in general? \r\n\r\nIMO nodes should only consult DNS seeds at first run, and then never again.",
      "created_at" : "2019-03-10T02:03:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-471239506",
      "id" : 471239506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MTIzOTUwNg==",
      "updated_at" : "2019-03-10T02:03:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/471239506",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-03-15T06:16:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-473171758",
      "id" : 473171758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MzE3MTc1OA==",
      "updated_at" : "2019-03-15T06:16:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473171758",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK with > 1 seed per round.\r\n\r\nutACK 9f36b04fa039d4ddbd9a4b559a62a5d6e1a873e5 (3 seeds)\r\n\r\nThe frequent DNS queries recently have hopefully been addressed with #15486. \r\n\r\n> IMO nodes should only consult DNS seeds at first run, and then never again.\r\n\r\nI like that idea as well, but for another PR, as it requires much more thought than this change.\r\n\r\n> 11 seconds was completely arbitrary. It was always the intent to adjust that number based on field experience. It sounds like it needs to increase\r\n\r\nAs a GUI use I'd get antsy if \"nothing happens\" for 15+ seconds, but as long as there's some indicator that we're trying various new peers that should be fine. In that case we can wait much longer before trying the DNS again. ",
      "created_at" : "2019-03-15T16:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-473364080",
      "id" : 473364080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MzM2NDA4MA==",
      "updated_at" : "2019-03-15T17:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473364080",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15558#discussion_r276410000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276410000"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If the user specifies `-forcednsseed`, they might want/expect all of them to be queried?",
      "commit_id" : "9f36b04fa039d4ddbd9a4b559a62a5d6e1a873e5",
      "created_at" : "2019-04-17T20:00:20Z",
      "diff_hunk" : "@@ -1521,35 +1524,40 @@ void StopMapPort()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n-    // goal: only query DNS seeds if address need is acute\n-    // Avoiding DNS seeds when we don't need them improves user privacy by\n-    //  creating fewer identifying DNS requests, reduces trust by giving seeds\n-    //  less influence on the network topology, and reduces traffic to the seeds.\n-    if ((addrman.size() > 0) &&\n-        (!gArgs.GetBoolArg(\"-forcednsseed\", DEFAULT_FORCEDNSSEED))) {\n-        if (!interruptNet.sleep_for(std::chrono::seconds(11)))\n-            return;\n+    FastRandomContext rng;\n+    std::vector<std::string> seeds = Params().DNSSeeds();\n+    Shuffle(seeds.begin(), seeds.end(), rng);\n+    int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n+    int found = 0;\n \n-        LOCK(cs_vNodes);\n-        int nRelevant = 0;\n-        for (const CNode* pnode : vNodes) {\n-            nRelevant += pnode->fSuccessfullyConnected && !pnode->fFeeler && !pnode->fOneShot && !pnode->m_manual_connection && !pnode->fInbound;\n-        }\n-        if (nRelevant >= 2) {\n-            LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\");\n-            return;\n-        }\n+    if (gArgs.GetBoolArg(\"-forcednsseed\", DEFAULT_FORCEDNSSEED)) {\n+        seeds_right_now += DNSSEEDS_TO_QUERY_AT_ONCE;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#discussion_r276410000",
      "id" : 276410000,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NjQxMDAwMA==",
      "original_commit_id" : "9f36b04fa039d4ddbd9a4b559a62a5d6e1a873e5",
      "original_position" : 38,
      "path" : "src/net.cpp",
      "position" : 38,
      "pull_request_review_id" : 227967877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15558",
      "updated_at" : "2019-04-17T20:05:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276410000",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15558#discussion_r276411035"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276411035"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this might be more readable if the std::string type remained explicit here (since we LogPrintf it below).",
      "commit_id" : "9f36b04fa039d4ddbd9a4b559a62a5d6e1a873e5",
      "created_at" : "2019-04-17T20:03:26Z",
      "diff_hunk" : "@@ -1521,35 +1524,40 @@ void StopMapPort()\n \n void CConnman::ThreadDNSAddressSeed()\n {\n-    // goal: only query DNS seeds if address need is acute\n-    // Avoiding DNS seeds when we don't need them improves user privacy by\n-    //  creating fewer identifying DNS requests, reduces trust by giving seeds\n-    //  less influence on the network topology, and reduces traffic to the seeds.\n-    if ((addrman.size() > 0) &&\n-        (!gArgs.GetBoolArg(\"-forcednsseed\", DEFAULT_FORCEDNSSEED))) {\n-        if (!interruptNet.sleep_for(std::chrono::seconds(11)))\n-            return;\n+    FastRandomContext rng;\n+    std::vector<std::string> seeds = Params().DNSSeeds();\n+    Shuffle(seeds.begin(), seeds.end(), rng);\n+    int seeds_right_now = 0; // Number of seeds left before testing if we have enough connections\n+    int found = 0;\n \n-        LOCK(cs_vNodes);\n-        int nRelevant = 0;\n-        for (const CNode* pnode : vNodes) {\n-            nRelevant += pnode->fSuccessfullyConnected && !pnode->fFeeler && !pnode->fOneShot && !pnode->m_manual_connection && !pnode->fInbound;\n-        }\n-        if (nRelevant >= 2) {\n-            LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\");\n-            return;\n-        }\n+    if (gArgs.GetBoolArg(\"-forcednsseed\", DEFAULT_FORCEDNSSEED)) {\n+        seeds_right_now += DNSSEEDS_TO_QUERY_AT_ONCE;\n     }\n \n-    const std::vector<std::string> &vSeeds = Params().DNSSeeds();\n-    int found = 0;\n+    for (const auto& seed : seeds) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#discussion_r276411035",
      "id" : 276411035,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NjQxMTAzNQ==",
      "original_commit_id" : "9f36b04fa039d4ddbd9a4b559a62a5d6e1a873e5",
      "original_position" : 43,
      "path" : "src/net.cpp",
      "position" : 43,
      "pull_request_review_id" : 227967877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15558",
      "updated_at" : "2019-04-17T20:05:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276411035",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@naumenkogs Did you want to take a look here? \r\n\r\nThis has a number of Concept ACKs, have tagged with `0.19.0`.",
      "created_at" : "2019-08-04T06:16:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-517977282",
      "id" : 517977282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNzk3NzI4Mg==",
      "updated_at" : "2019-08-04T06:16:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/517977282",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-08-04T14:32:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-518008426",
      "id" : 518008426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxODAwODQyNg==",
      "updated_at" : "2019-08-04T14:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518008426",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "First of all, could we update the initial message of the PR so that it's clear that it suggests connecting to 3 (*not one*) without reading full discussion? Maybe strike-through would work.\r\n\r\nThe choice of 3 seeds and the general idea seems reasonable to me.\r\nutACK\r\n\r\n\r\n",
      "created_at" : "2019-08-05T15:11:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15558#issuecomment-518275038",
      "id" : 518275038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15558",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxODI3NTAzOA==",
      "updated_at" : "2019-08-05T15:14:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518275038",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   }
]
