[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225403119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225403119"
         }
      },
      "author_association" : "MEMBER",
      "body" : "concept ACKÃ¢ÂÂ\r\nthough please reword this message, the `#` is not so much *illegal*, it starts a legal comment; it's just that *probably* the user made a mistake, by assuming the `#`  will actually be part of the password",
      "commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "created_at" : "2018-10-16T05:39:51Z",
      "diff_hunk" : "@@ -840,6 +842,10 @@ static bool GetConfigOptions(std::istream& stream, std::string& error, std::vect\n             } else if ((pos = str.find('=')) != std::string::npos) {\n                 std::string name = prefix + TrimString(str.substr(0, pos), pattern);\n                 std::string value = TrimString(str.substr(pos + 1), pattern);\n+                if (used_hash && name == \"rpcpassword\") {\n+                    error = strprintf(\"parse error on line %i, illegal hash character used in rpcpassword\", linenr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225403119",
      "id" : 225403119,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTQwMzExOQ==",
      "original_commit_id" : "ec998827dc7542eb8640f7e3d41b0b64a15649ca",
      "original_position" : 16,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 164991721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494",
      "updated_at" : "2018-10-16T05:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225403119",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225405664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225405664"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed :)",
      "commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "created_at" : "2018-10-16T05:55:58Z",
      "diff_hunk" : "@@ -840,6 +842,10 @@ static bool GetConfigOptions(std::istream& stream, std::string& error, std::vect\n             } else if ((pos = str.find('=')) != std::string::npos) {\n                 std::string name = prefix + TrimString(str.substr(0, pos), pattern);\n                 std::string value = TrimString(str.substr(pos + 1), pattern);\n+                if (used_hash && name == \"rpcpassword\") {\n+                    error = strprintf(\"parse error on line %i, illegal hash character used in rpcpassword\", linenr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225405664",
      "id" : 225405664,
      "in_reply_to_id" : 225403119,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTQwNTY2NA==",
      "original_commit_id" : "ec998827dc7542eb8640f7e3d41b0b64a15649ca",
      "original_position" : 16,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 164994649,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494",
      "updated_at" : "2018-10-16T05:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225405664",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225412147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225412147"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could `#` be mentioned as \"reserved character\"?",
      "commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "created_at" : "2018-10-16T06:33:13Z",
      "diff_hunk" : "@@ -840,6 +842,10 @@ static bool GetConfigOptions(std::istream& stream, std::string& error, std::vect\n             } else if ((pos = str.find('=')) != std::string::npos) {\n                 std::string name = prefix + TrimString(str.substr(0, pos), pattern);\n                 std::string value = TrimString(str.substr(pos + 1), pattern);\n+                if (used_hash && name == \"rpcpassword\") {\n+                    error = strprintf(\"parse error on line %i, using # in rpcpassword can be ambiguous and should be avoided\", linenr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225412147",
      "id" : 225412147,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTQxMjE0Nw==",
      "original_commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "original_position" : 16,
      "path" : "src/util.cpp",
      "position" : 16,
      "pull_request_review_id" : 165002230,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494",
      "updated_at" : "2018-10-16T06:33:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225412147",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225451265"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225451265"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Alternative:\r\n```cpp\r\npos = str.find('#');\r\nconst bool has_comment = pos != std::string::npos;\r\nif (has_comment) str = str.substr(0, pos);\r\n```",
      "commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "created_at" : "2018-10-16T08:52:32Z",
      "diff_hunk" : "@@ -826,8 +826,10 @@ static bool GetConfigOptions(std::istream& stream, std::string& error, std::vect\n     std::string::size_type pos;\n     int linenr = 1;\n     while (std::getline(stream, str)) {\n+        bool used_hash = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#discussion_r225451265",
      "id" : 225451265,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNTQ1MTI2NQ==",
      "original_commit_id" : "fa3569dbf16bc40c36f036e191a9de8a679d81f8",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : 4,
      "pull_request_review_id" : 165049972,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14494",
      "updated_at" : "2018-10-16T09:04:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/225451265",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think allowing quotes makes the situation even more ambiguous and confusing, I mentioned it on IRC. The whitespace split seems ok but I'm not sure it's worth it, better safe than sorry?",
      "created_at" : "2018-10-16T09:45:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#issuecomment-430173336",
      "id" : 430173336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14494",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDE3MzMzNg==",
      "updated_at" : "2018-10-16T09:45:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430173336",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe it should also error with command line `-rpcpassword=foo#bar` to make it consistent?",
      "created_at" : "2018-10-16T09:50:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#issuecomment-430174975",
      "id" : 430174975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14494",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDE3NDk3NQ==",
      "updated_at" : "2018-10-16T09:50:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430174975",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is another approach that allows `#` in the `rpcpassword` value:\r\n```\r\nstatic bool GetConfigOptions(std::istream& stream, std::string& error, std::vector<std::pair<std::string, std::string>> &options)\r\n{\r\n    std::string str, prefix;\r\n    std::string::size_type pos;\r\n    int linenr = 1;\r\n    while (std::getline(stream, str)) {\r\n        // A number sign (#) at the beginning of the line indicates a comment. Comment lines are ignored. \r\n        if ((pos = str.find('#')) != 0) {\r\n            const static std::string pattern = \" \\t\\r\\n\";\r\n            str = TrimString(str, pattern);\r\n            if (!str.empty()) {\r\n                if (*str.begin() == '[' && *str.rbegin() == ']') {\r\n                    prefix = str.substr(1, str.size() - 2) + '.';\r\n                } else if (*str.begin() == '-') {\r\n                    error = strprintf(\"parse error on line %i: %s, options in configuration file must be specified without leading -\", linenr, str);\r\n                    return false;\r\n                } else if ((pos = str.find('=')) != std::string::npos) {\r\n                    std::string name = prefix + TrimString(str.substr(0, pos), pattern);\r\n                    std::string value = TrimString(str.substr(pos + 1), pattern);\r\n                    options.emplace_back(name, value);\r\n                } else {\r\n                    error = strprintf(\"parse error on line %i: %s\", linenr, str);\r\n                    if (str.size() >= 2 && str.substr(0, 2) == \"no\") {\r\n                        error += strprintf(\", if you intended to specify a negated option, use %s=1 instead\", str);\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        ++linenr;\r\n    }\r\n    return true;\r\n}\r\n```",
      "created_at" : "2018-10-16T20:09:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#issuecomment-430382492",
      "id" : 430382492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14494",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDM4MjQ5Mg==",
      "updated_at" : "2018-10-16T20:09:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430382492",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@hebasto unfortunately that is breaking change.",
      "created_at" : "2018-10-16T20:30:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#issuecomment-430389286",
      "id" : 430389286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14494",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDM4OTI4Ng==",
      "updated_at" : "2018-10-16T20:30:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430389286",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The error message should probably recommend rpcauth over rpcpassword.  I think just rejecting # in rpcpassword lines makes sense.",
      "created_at" : "2018-10-16T22:22:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14494#issuecomment-430422052",
      "id" : 430422052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14494",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMDQyMjA1Mg==",
      "updated_at" : "2018-10-16T22:22:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430422052",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
