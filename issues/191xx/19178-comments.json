[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r438999307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438999307"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems like `Lock` will try to acquire indefinitely by default (I'm looking at [these docs](https://docs.python.org/3/library/threading.html#threading.Lock.acquire)).\r\nI tried out some re-acquiring behavior with this code and it hangs forever as expected... Just in case someone like me does some dumb deadlocky stuff, would it be a good idea to make `mininode_lock` use something like`lock.acquire(timeout=60)` and/or `if lock.locked(): raise_assertion_error`?",
      "commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "created_at" : "2020-06-11T18:48:55Z",
      "diff_hunk" : "@@ -492,7 +492,7 @@ def test_function():\n # P2PConnection acquires this lock whenever delivering a message to a P2PInterface.\n # This lock should be acquired in the thread running the test logic to synchronize\n # access to any data shared with the P2PInterface or P2PConnection.\n-mininode_lock = threading.RLock()\n+mininode_lock = threading.Lock()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r438999307",
      "id" : 438999307,
      "line" : 495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk5OTMwNw==",
      "original_commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "original_line" : 495,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/mininode.py",
      "position" : 5,
      "pull_request_review_id" : 429193828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T19:34:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438999307",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r438999876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438999876"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch, I think this was from Amiti + me both adding it in separate PRs.",
      "commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "created_at" : "2020-06-11T18:50:01Z",
      "diff_hunk" : "@@ -658,8 +658,6 @@ def on_inv(self, message):\n                 # save txid\n                 self.tx_invs_received[i.hash] += 1\n \n-        super().on_inv(message)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r438999876",
      "id" : 438999876,
      "line" : 661,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk5OTg3Ng==",
      "original_commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "original_line" : 661,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/mininode.py",
      "position" : 13,
      "pull_request_review_id" : 429193828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T19:34:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438999876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r439020734"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439020734"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Actually I have a question because I'm not 100% sure how the test_runner works - does it allot a certain amount of time for each test? It looks like it would run infinitely? How would it affect Travis if 1 test is in deadlock?",
      "commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "created_at" : "2020-06-11T19:31:02Z",
      "diff_hunk" : "@@ -492,7 +492,7 @@ def test_function():\n # P2PConnection acquires this lock whenever delivering a message to a P2PInterface.\n # This lock should be acquired in the thread running the test logic to synchronize\n # access to any data shared with the P2PInterface or P2PConnection.\n-mininode_lock = threading.RLock()\n+mininode_lock = threading.Lock()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19178#discussion_r439020734",
      "id" : 439020734,
      "in_reply_to_id" : 438999307,
      "line" : 495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyMDczNA==",
      "original_commit_id" : "62068381a3b9c065d81300be79abba7aecfdb41b",
      "original_line" : 495,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/mininode.py",
      "position" : 5,
      "pull_request_review_id" : 429193828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19178",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T19:34:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439020734",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   }
]
