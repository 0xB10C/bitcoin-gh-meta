[
   {
      "author_association" : "NONE",
      "body" : "+1",
      "created_at" : "2021-03-06T10:21:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791908084",
      "id" : 791908084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTkwODA4NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T10:21:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791908084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=4",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "node_id" : "MDQ6VXNlcjEzNjkzMzU=",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-03-06T12:06:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791925483",
      "id" : 791925483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTkyNTQ4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T12:06:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791925483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-03-06T12:41:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791930950",
      "id" : 791930950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTkzMDk1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T12:41:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791930950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I take it that this PR doesn't preclude also migrating to BIP8-style height based activation?",
      "created_at" : "2021-03-06T14:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791956464",
      "id" : 791956464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTk1NjQ2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T14:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791956464",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21371712?v=4",
         "events_url" : "https://api.github.com/users/roconnor-blockstream/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roconnor-blockstream/followers",
         "following_url" : "https://api.github.com/users/roconnor-blockstream/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roconnor-blockstream/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roconnor-blockstream",
         "id" : 21371712,
         "login" : "roconnor-blockstream",
         "node_id" : "MDQ6VXNlcjIxMzcxNzEy",
         "organizations_url" : "https://api.github.com/users/roconnor-blockstream/orgs",
         "received_events_url" : "https://api.github.com/users/roconnor-blockstream/received_events",
         "repos_url" : "https://api.github.com/users/roconnor-blockstream/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roconnor-blockstream/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roconnor-blockstream/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roconnor-blockstream"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I take it that this PR doesn't preclude also migrating to BIP8-style height based activation?\r\n\r\nConcept ACK but would much rather have height based activation",
      "created_at" : "2021-03-06T14:56:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791967222",
      "id" : 791967222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTk2NzIyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T14:56:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791967222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588896840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588896840"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Can we add empty `default` statement which does nothing but avoids compiler warning and possible errors in future?",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-06T15:47:50Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588896840",
      "id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODg5Njg0MA==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605765962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588896840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nIt does seem like there is a preference for height based activation as opposed to time.\r\n\r\ni'd further request that -- to the extent this is getting BIP'd, that the activation date must not be within the range of the provided interval or we introduce some other sort of quantization / min interval parameter (e.g., every 3 block-months there is a new-rule activation window and we use the next one, or the activation blocks is something like  `current + max(2016*N, earliest - current)`.",
      "created_at" : "2021-03-06T16:35:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791985294",
      "id" : 791985294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTk4NTI5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T16:35:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791985294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't know (though I can guess) why people are trying to refer to BIP 9 now instead of BIP 8, especially as height based activation seems the superior option.\r\n\r\nAs a reminder, there have been community IRC meetings (which many Core contributors attended and disclosed their views) where there was broad consensus on using revised BIP 8 e.g. http://gnusha.org/taproot-activation/2021-02-02.log\r\n\r\nRusty's [conclusion](https://bitcoinhackers.org/@rusty/105664386728806153) post that meeting was \"Unanimous support for BIP 8. RIP BIP 9.\"\r\n\r\nThe outline of the various proposals used BIP 8 rather than BIP 9: https://en.bitcoin.it/wiki/Taproot_activation_proposals\r\n\r\nAnd various media articles reporting on the discussion referred to BIP 8 rather than BIP 9.\r\n\r\nThough I don't expect it to scupper the momentum this promising proposal is generating if people want to call this BIP 9 (or do mental gymnastics by opening a new BIP) please be clear on why it doesn't fit within the template of BIP 8.\r\n\r\nOther than that, I am delighted with the progress this proposal is making and having a PR up in such quick time really is great, so many thanks for your work on this.\r\n\r\nedit: Thinking about this more I don't think it would be mental gymnastics to open a new BIP for \"Speedy trial\" especially if it doesn't fit cleanly into a more flexible BIP 8. New BIP or more flexible BIP 8. BIP 9 is dead and if \"Speedy trial\" could be used for other soft forks it shouldn't be included in the Taproot BIPs.",
      "created_at" : "2021-03-06T16:48:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791987546",
      "id" : 791987546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTk4NzU0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T18:27:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791987546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe the best way to proceed would be to rebase a BIP8-height PR on top of this PR.  Once this PR is merged, we have the ability to produce an acceptable set of parameters for speedy trial.  If then the subsequent BIP8-height PR is merged afterwards then we get, what I believe to be, a superior set of activation parameters, but if the BIP8-height subsequent PR fails for whatever reason, that is okay.\r\n\r\nI'm anticipating test cases added to this PR that would in turn be valuable for the BIP8-height PR, and the BIP8-height speedy trial will need an analogous `activation_height` field as well.",
      "created_at" : "2021-03-06T16:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-791989090",
      "id" : 791989090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTk4OTA5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T16:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791989090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21371712?v=4",
         "events_url" : "https://api.github.com/users/roconnor-blockstream/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roconnor-blockstream/followers",
         "following_url" : "https://api.github.com/users/roconnor-blockstream/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roconnor-blockstream/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roconnor-blockstream",
         "id" : 21371712,
         "login" : "roconnor-blockstream",
         "node_id" : "MDQ6VXNlcjIxMzcxNzEy",
         "organizations_url" : "https://api.github.com/users/roconnor-blockstream/orgs",
         "received_events_url" : "https://api.github.com/users/roconnor-blockstream/received_events",
         "repos_url" : "https://api.github.com/users/roconnor-blockstream/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roconnor-blockstream/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roconnor-blockstream/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roconnor-blockstream"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588906179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588906179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's exactly what the *lack* of default case here does.\n\nIf a case is missed, the compiler will warn.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-06T17:14:09Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588906179",
      "id" : 588906179,
      "in_reply_to_id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODkwNjE3OQ==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605772138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588906179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21507 (Implement BIP8 lockinontimeout by achow101)\n* #21489 (fuzz: cleanups for versionbits fuzzer by ajtowns)\n* #21401 (Refactor versionbits deployments to avoid potential uninitialized variables by achow101)\n* #21393 (BIP 341: Add Speedy Trial activation parameters by achow101)\n* #21392 (Implement BIP 8 based Speedy Trial activation by achow101)\n* #21378 (Convert taproot to flag day activation by ajtowns)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-06T18:35:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792012294",
      "id" : 792012294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjAxMjI5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T00:10:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792012294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@roconnor-blockstream that sounds like one reasonable plan of attack -- merging this now is a concrete step, patching to use height can occur independently. I do fear there would not be consensus on a non-height based activation proposal, so it may be important to not rest on laurels for accepting those changes.\r\n\r\n\r\nMaking the case for BIP8 merge first then these changes, the BIP8 code is much more reviewed presently (with no code nacks, just conceptual ones?) and it may be a better utilization of developer time to rebase this onto BIP8.\r\n\r\nI think it would be best to hear from @luke-jr and @ajtowns on their preference as they seem to be primary contributors on the implementation/review of both.",
      "created_at" : "2021-03-06T19:36:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792036920",
      "id" : 792036920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjAzNjkyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T19:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792036920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Once this PR is merged, we have the ability to produce an acceptable set of parameters for speedy trial. If then the subsequent BIP8-height PR is merged afterwards\r\n\r\nThis seems dangerous as we could have people compile and start running after the activation params are merged, merging a following change to the params could cause people to be running different activation logic (one time based, one hieght based).",
      "created_at" : "2021-03-06T20:35:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792049634",
      "id" : 792049634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjA0OTYzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T20:35:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792049634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588928891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588928891"
         }
      },
      "author_association" : "NONE",
      "body" : "This bothered be too. IMO better to use `default`. Enums are bounded. The default state can reasonably be either `ACTIVE` or `FAILED`. This can be future-proofed by using a `static_asset` on the enum, which documents the assumption and guarantees catching it at compile time. Warnings arenât nearly as safe. ",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-06T20:44:03Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588928891",
      "id" : 588928891,
      "in_reply_to_id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODkyODg5MQ==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605786493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588928891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=4",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "node_id" : "MDQ6VXNlcjEzNjkzMzU=",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@benthecarman.  Not to worry this PR doesn't have activation parameters in it.  I would expect merger of activation parameters to be delayed until after a BIP8-height PR is done consideration.\r\n\r\nThat being said, I've chatted a bit with @achow101 and it may be the case that a BIP8-min-activation-height PR ends up being easier to implement as a stand alone PR rather than on top of this one.  There are issues with merging, and backporting etc.  So I'm going to stop myself from further back-seat deving and let the pros figure out the best way to hammer out PRs.",
      "created_at" : "2021-03-06T20:48:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792052121",
      "id" : 792052121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjA1MjEyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T20:48:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792052121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21371712?v=4",
         "events_url" : "https://api.github.com/users/roconnor-blockstream/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roconnor-blockstream/followers",
         "following_url" : "https://api.github.com/users/roconnor-blockstream/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roconnor-blockstream/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roconnor-blockstream",
         "id" : 21371712,
         "login" : "roconnor-blockstream",
         "node_id" : "MDQ6VXNlcjIxMzcxNzEy",
         "organizations_url" : "https://api.github.com/users/roconnor-blockstream/orgs",
         "received_events_url" : "https://api.github.com/users/roconnor-blockstream/received_events",
         "repos_url" : "https://api.github.com/users/roconnor-blockstream/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roconnor-blockstream/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roconnor-blockstream/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roconnor-blockstream"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Making the case for BIP8 merge first then these changes, the BIP8 code is much more reviewed presently (with no code nacks, just conceptual ones?) and it may be a better utilization of developer time to rebase this onto BIP8.\r\n\r\nI don't think the BIP8 code is adequately reviewed yet -- we had an off-by-one bug that would have left lot=true and lot=false nodes out of consensus found this past week, that wasn't discovered by reviewers or the automated tests. (Currently it isn't a clean merge either)\r\n\r\nThe main benefits of bip8 are lockinontimeout=true related -- that it specifies the option at all, and that it's height based, so loss of hashpower (due to miners preferring a chain that is invalid according to lockinontimeout=true) doesn't reduce the number of retarget periods available for activation. So I don't think there's any real benefits to doing this via bip8 rather than bip9 as far as the \"Speedy trial\" itself goes; but if bip8/height based code is thoroughly reviewed and ready to merge prior to setting activation parameters, that seems fine too as far as I can see.",
      "created_at" : "2021-03-06T22:17:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792072779",
      "id" : 792072779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjA3Mjc3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T22:17:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792072779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I don't think the BIP8 code is adequately reviewed yet -- we had an off-by-one bug that would have left lot=true and lot=false nodes out of consensus found this past week, that wasn't discovered by reviewers or the automated tests. \r\n\r\n@ajtowns: Are you referring to a bug Sjors [found](https://github.com/bitcoin/bitcoin/pull/21334) in the tests? That is hardly a consensus bug for LOT=true and LOT=false nodes on mainnet but you are right to say it wasn't yet ready to be merged. I have since recommended it be closed as some have expressed that they would not merge it with any LOT code (even if dead code).",
      "created_at" : "2021-03-06T22:34:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792077708",
      "id" : 792077708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjA3NzcwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T22:34:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792077708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@michaelfolkson No, that one [wasn't a bug](https://github.com/bitcoin/bitcoin/pull/19573#discussion_r586323690). I'm referring to [this one](https://github.com/bitcoin/bitcoin/pull/19573#discussion_r584741118).",
      "created_at" : "2021-03-06T23:05:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792104652",
      "id" : 792104652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjEwNDY1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T23:05:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792104652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.  Thank you, @ajtowns!  I'm happy to see that the change really is minimal.\r\n\r\nDo I understand correctly from reading the code that activation will occur in the first block of the next retarget period after the `activation_time`?  E.g., if the minimum activation time just passed but the height is 1234, the first block where taproot's rules are enforced still won't be until height 2016?  That seems fine to me for the sake of code simplicity, but it does mean that, if it looks like `activation_time` is going to fall near a retarget block, we'll have to communicate that taproot could either happen tomorrow or two weeks from now.  Maybe to avoid that communication challenge, it'd be better to use a height?\r\n\r\n@michaelfolkson \r\n\r\n> I don't know (though I can guess) why people are trying to refer to BIP 9 now instead of BIP 8, especially as height based activation seems the superior option.\r\n\r\nAs mentioned in [my email](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-March/018583.html), I thought basing the proposal on the existing BIP9 code in Bitcoin Core (as done in this PR) would be the smallest change and so fastest to get reviewed, merged, and released.  Since the goal of the Speedy Trial proposal is speed (with safety), that seems highly advantageous to me.\r\n\r\nI completely agree that using block heights for the `start` and `timeout` parameters has advantages for this proposal (giving miners a known number of signaling periods) and that, as also mentioned in my email, getting BIP8 included in the code now would have advantages if Speedy Trial fails and we decide to use BIP8 as originally imagined for a follow-up activation attempt.\r\n\r\nMy preference would be for whatever solution is most preferred by reviewers.",
      "created_at" : "2021-03-07T05:27:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792220340",
      "id" : 792220340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjIyMDM0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-07T05:27:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792220340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/61096?v=4",
         "events_url" : "https://api.github.com/users/harding/events{/privacy}",
         "followers_url" : "https://api.github.com/users/harding/followers",
         "following_url" : "https://api.github.com/users/harding/following{/other_user}",
         "gists_url" : "https://api.github.com/users/harding/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/harding",
         "id" : 61096,
         "login" : "harding",
         "node_id" : "MDQ6VXNlcjYxMDk2",
         "organizations_url" : "https://api.github.com/users/harding/orgs",
         "received_events_url" : "https://api.github.com/users/harding/received_events",
         "repos_url" : "https://api.github.com/users/harding/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/harding/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/harding/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/harding"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588997369"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588997369"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's already safe as a missing default case will simply cause the `return \"\"` after the switch to execute. The only time the return value of this function is used is to print a message if a test case is already failing, so the consequences of having an empty string are trivial -- CI is already failing at that point. Additionally, we bump those missing-case warnings to errors (`-Werror=switch`) when configured with enable-werror and I think we have that enabled on most CI builds (all except for win64?).",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-07T09:00:47Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r588997369",
      "id" : 588997369,
      "in_reply_to_id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODk5NzM2OQ==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605823592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/588997369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589001603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589001603"
         }
      },
      "author_association" : "NONE",
      "body" : "No worries, I agree itâs a nit. Just donât like to rely on comments and warnings.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-07T09:35:06Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589001603",
      "id" : 589001603,
      "in_reply_to_id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTAwMTYwMw==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605826456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589001603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=4",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "node_id" : "MDQ6VXNlcjEzNjkzMzU=",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "concept ACK.",
      "created_at" : "2021-03-07T14:37:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792289266",
      "id" : 792289266,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjI4OTI2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-07T14:37:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792289266",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/30683012?v=4",
         "events_url" : "https://api.github.com/users/MaxHillebrand/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MaxHillebrand/followers",
         "following_url" : "https://api.github.com/users/MaxHillebrand/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MaxHillebrand/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MaxHillebrand",
         "id" : 30683012,
         "login" : "MaxHillebrand",
         "node_id" : "MDQ6VXNlcjMwNjgzMDEy",
         "organizations_url" : "https://api.github.com/users/MaxHillebrand/orgs",
         "received_events_url" : "https://api.github.com/users/MaxHillebrand/received_events",
         "repos_url" : "https://api.github.com/users/MaxHillebrand/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MaxHillebrand/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MaxHillebrand/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MaxHillebrand"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589056828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589056828"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note that the first two commits of this PR have already been merged, in #21334.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-07T16:47:51Z",
      "diff_hunk" : "@@ -14,6 +14,18 @@\n /* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n static int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n \n+static const std::string StateName(ThresholdState state)\n+{\n+    switch (state) {\n+    case ThresholdState::DEFINED:   return \"DEFINED\";\n+    case ThresholdState::STARTED:   return \"STARTED\";\n+    case ThresholdState::LOCKED_IN: return \"LOCKED_IN\";\n+    case ThresholdState::ACTIVE:    return \"ACTIVE\";\n+    case ThresholdState::FAILED:    return \"FAILED\";\n+    } // no default case, so the compiler can warn about missing cases",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589056828",
      "id" : 589056828,
      "in_reply_to_id" : 588896840,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTA1NjgyOA==",
      "original_commit_id" : "3ba9283a47ac358168db9db7840ae559f443486c",
      "original_line" : 25,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 605864163,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589056828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589057339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589057339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe add a note here to never change this unless all soft forks are burried. Alternatively maybe we should have a separate variable for this speedy trial.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-07T16:51:20Z",
      "diff_hunk" : "@@ -80,7 +80,7 @@ class CMainParams : public CChainParams {\n         consensus.nPowTargetSpacing = 10 * 60;\n         consensus.fPowAllowMinDifficultyBlocks = false;\n         consensus.fPowNoRetargeting = false;\n-        consensus.nRuleChangeActivationThreshold = 1916; // 95% of 2016\n+        consensus.nRuleChangeActivationThreshold = 1815; // 90% of 2016",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589057339",
      "id" : 589057339,
      "line" : 81,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTA1NzMzOQ==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 81,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chainparams.cpp",
      "position" : 5,
      "pull_request_review_id" : 605864461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589057339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK for speedy trial support. However I'm not convinced we should permanently drop the BIP9 threshold to 90%.\r\n\r\n@JeremyRubin wrote:\r\n\r\n> merging this now is a concrete step, patching to use height can occur independently\r\n\r\nI'm fine with a height based approach too; slightly more code changes, but it seems easier to communicate when things happen. I also agree with Jeremy's point. Nothing here is set in stone until we actually apply it to Taproot (or another soft fork).\r\n\r\nThere is one downside though, in addition to more review work: other implementations probably already have BIP 9 code ready to go. Although compared to implementing all of Taproot this is not a big deal (and without implementing Taproot they can't verify the new consensus rules anyway). \r\n\r\n> Making the case for BIP8 merge first then these changes, the BIP8 code is much more reviewed presently (with no code nacks, just conceptual ones?)\r\n\r\nFor me that's only an option if the `LOT=true` stuff is stripped from that PR.\r\n\r\nIt doesn't seem terribly complicated to cherry-pick 9762562cc6a2c771ad0ddfb055ea17b90085425c, bcec418304ea3dd524cb3591e4af1b77a04cc968 (though I suggest a fresh BIP for the speedy trial) and a few more.",
      "created_at" : "2021-03-07T17:19:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792313943",
      "id" : 792313943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjMxMzk0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-07T17:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792313943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589061372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589061372"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We could add `reduced_threshold` which, if non-zero, overrides `nRuleChangeActivationThreshold`.\r\n",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-07T17:25:10Z",
      "diff_hunk" : "@@ -29,6 +29,8 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this time. */\n+    int64_t activation_time;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589061372",
      "id" : 589061372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTA2MTM3Mg==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 33,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : null,
      "pull_request_review_id" : 605867244,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589061372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> but it does mean that, if it looks like `activation_time` is going to fall near a retarget block, we'll have to communicate that taproot could either happen tomorrow or two weeks from now.\r\n\r\nI think it's worse than that -- if `activation_time` falls very near a retarget block, I think you could have the eleven last blocks of the retarget period have timestamps (relative to `activation_time`) like:  `-3000, -2400, -1800, -1200, -600, 0, 600, 1200, 1800, 2400, 3000` giving the last block a median time which satisfies `MedianTimePast() >= activation_time`, so the next block would switch to ACTIVE and people would likely start transacting with taproot, perhaps even racing to get a tx in the first block as some did with segwit, and setting nlocktime to ensure their transaction isn't mined early and the funds stolen.\r\n\r\nHowever in that case a 2 block reorg could change the last block's timestamp to `-400` (still greater than the mediantime of the prior block which is likely -600), which would change its median time from `0` to `-400`, which would then cause the new first block of the next period to still be in state LOCKED_IN. At that point replaying the taproot-using transactions people had sent prior to the reorg would allow funds to be stolen as taproot is not yet active after the reorg, and nlocktime would not have protected you.\r\n\r\n(EDIT: fixed mediantime rules misinterpretation -- blocks must have a timestamp greater than the previous block's mediantime; block's mediantime does include their own timestamp. And add the following...)\r\n\r\nI think the conclusion from this is just \"the height at which you transition from LOCKED_IN to ACTIVE must be fully determined as soon as you transition from STARTED to LOCKED_IN\". That way the entire LOCKED_IN period has to be reorged if you want to steal funds protected by both nlocktime and the new rules.",
      "created_at" : "2021-03-08T02:58:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792425221",
      "id" : 792425221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjQyNTIyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T10:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792425221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Bumped to `min_activation_height` instead of `activation_time`; also helps github notice that #21334 already merged.",
      "created_at" : "2021-03-08T03:27:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792435198",
      "id" : 792435198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjQzNTE5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T03:27:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792435198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Shameless plug for #19013 which adds backwards compatibility testing for v0.21; this should be useful when testing soft fork deployment.",
      "created_at" : "2021-03-08T09:38:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-792623013",
      "id" : 792623013,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjYyMzAxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T09:38:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792623013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "based on the reasoning here: https://gist.github.com/michaelfolkson/92899f27f1ab30aa2ebee82314f8fe7f#gistcomment-3658078 I have very limited concerns around using start/stop times (could be wrong)\r\n\r\n@ajtowns that's a great point -- MTP just has ambiguity baked into it, and we should prefer heights for the activation point.\r\n",
      "created_at" : "2021-03-08T20:28:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-793053309",
      "id" : 793053309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzA1MzMwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T20:28:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793053309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589726673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589726673"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think we can worry about genericity if we ever need to add 2 simultaneous vbit releases... which I've heard rumor not too many people think we'd be likely to ever do that (although I think it is fine)",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-08T20:29:51Z",
      "diff_hunk" : "@@ -29,6 +29,8 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this time. */\n+    int64_t activation_time;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r589726673",
      "id" : 589726673,
      "in_reply_to_id" : 589061372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTcyNjY3Mw==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 33,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : null,
      "pull_request_review_id" : 606680467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589726673",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on top of versionbits fuzzing harness changes in #21380 -- this captures a bunch of the \"it's not really bip9 anymore\" refactoring, without getting too hard to read, and should vastly improve test coverage.",
      "created_at" : "2021-03-09T09:56:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-793645727",
      "id" : 793645727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzY0NTcyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T09:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793645727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r590256395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590256395"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IIUC with the latest change, `nRuleChangeActivationThreshold` is only used for the \"the might be an unknown rule change\" warning system. Each deployment now has its own threshold.\r\n",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-09T11:29:00Z",
      "diff_hunk" : "@@ -29,6 +29,8 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this time. */\n+    int64_t activation_time;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r590256395",
      "id" : 590256395,
      "in_reply_to_id" : 589061372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDI1NjM5NQ==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 33,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : null,
      "pull_request_review_id" : 607299505,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590256395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r590318601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590318601"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See also https://github.com/bitcoin/bitcoin/pull/21392/commits/9e50401c8a593c569f586786d84554c027fd8e8d which in addition lowers the warning threshold even further.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-09T12:27:36Z",
      "diff_hunk" : "@@ -29,6 +29,8 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this time. */\n+    int64_t activation_time;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r590318601",
      "id" : 590318601,
      "in_reply_to_id" : 589061372,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDMxODYwMQ==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 33,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : null,
      "pull_request_review_id" : 607347155,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590318601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think a fully height based approach is easier to reason about, so I'm going to review #21392 first.",
      "created_at" : "2021-03-09T12:32:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-793818708",
      "id" : 793818708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzgxODcwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T12:32:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793818708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "#21380 updated to just provide a fuzz test and not do the refactoring, so this now also avoids refactoring -- it adds support for `min_activation_height`, adds support for the unit and fuzz tests to validate behaviour, and drops the threshold from 95% to 90%.",
      "created_at" : "2021-03-16T14:59:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-800333719",
      "id" : 800333719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMDMzMzcxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-16T14:59:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/800333719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK, I agree with @harding's line of reasoning:\r\n\r\n> As mentioned in my email, I thought basing the proposal on the existing BIP9 code in Bitcoin Core (as done in this PR) would be the smallest change and so fastest to get reviewed, merged, and released. Since the goal of the Speedy Trial proposal is speed (with safety), that seems highly advantageous to me.\r\n\r\nCombined with how minimal this change is- the bulk of this PR is tests, the changes in the source code are +26/-4 lines over 2 commits.\r\n\r\nI've taken a first pass and it all looks reasonable, but I plan to do a full review soon. These changes are simple but I'm currently trying to gain the appropriate codebase context.",
      "created_at" : "2021-03-16T21:14:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-800610436",
      "id" : 800610436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMDYxMDQzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-16T21:14:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/800610436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept NACK to MTP.",
      "created_at" : "2021-03-18T19:12:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802217810",
      "id" : 802217810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjIxNzgxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T19:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802217810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't have a strong view but it appears that @achow101 in https://github.com/bitcoin/bitcoin/pull/21392 and just by reading the comments in this PR @luke-jr @benthecarman @JeremyRubin @Sjors @roconnor-blockstream @harding all have a preference for a fully height based approach over any use of MTP.\r\n\r\nIf that isn't the case please correct me. And if anyone else has a view on entirely block height versus some limited use of MTP can you post it on IRC (##taproot-activation)?\r\n\r\nThe fuzzing [PR](https://github.com/bitcoin/bitcoin/pull/21380) looks very cool. On that PR @MarcoFalke also expresses an [expectation](https://github.com/bitcoin/bitcoin/pull/21380#pullrequestreview-613159162) that activation will be based on block heights.\r\n\r\nedit: Some additional comments from today's [Core dev meeting](http://www.erisian.com.au/bitcoin-core-dev/log-2021-03-18.html)\r\n\r\n\"it comes down to mtp vs block height\" @achow101 \r\n\r\n\"the main difference between these two PRs are using block height vs MTP \" @amitiuttarwar\r\n\r\n\"with mtp, we run the risk of losing 2 signaling periods. with already few signaling periods, this has the possibility of failing to activate due to bad luck\" @achow101\r\n\r\n\"the property that achow101's PR improves is a fixed (number) of signals\" @JeremyRubin\r\n",
      "created_at" : "2021-03-18T22:04:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802336038",
      "id" : 802336038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjMzNjAzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802336038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have a preference for fully height based design, correct. But I think that given the code base as it stands today, and comparing the diffs across the PR, and the tight timeline desired from merge to release using MTP really is a decent option, especially since the bulk of the code is already more widely tested. Longer term it makes sense to fully develop and test height based -- whether we do that, I don't know.\r\n\r\n@MarcoFalke's comment is a slight misunderstanding I believe of how the fuzzer simulates time; I recall AJ saying (somewhere) that block times are steady interval in the fuzzing so that it doesn't matter (can't find that comment now tho). Is that correct?\r\n\r\nI also emphasized numerous times in the meeting that I think for the purposes of a 3 month ST, forecasting to be a mid-period start/stopheight means that drift is very unlikely to hurt us, so the notion that we're \"risking two periods\" is a bit moot to me.\r\n\r\nThe counterarguments can be made that we have bigger issues to solve for if we miss two periods as a result of a hashrate decrease (where did the hashrate go -- we probably wouldn't want to activate if we're missing a big chunk of hashrate contemporaneously anyways) and that on the flip side, a hashrate increase would yield in the block heights going by more quickly which means there is less real time to coordinate enabling signaling. There are pros and cons either way, I think that height is superior longer term, but in this case I don't think there is sufficient technical risk to disqualify this PR as an activation method in favor of start/stop height.\r\n\r\n@luke-jr I would appreciate if you could justify your concept NACK more explicitly as I do not understand your concern.\r\n\r\n\r\n@amitiuttarwar made a great point in the meeting\r\n> my two cents: I don't think either PR is close to being RFM, both need significantly more review. looks like #21392 is currently failing CI. If the goal is to quickly merge with safety, I think #21377 makes more sense (as I stated on the PR)\r\n\r\nRough consensus and running code -- it seems to me that this is closer to a mergeable state. If there's a strong reason to the contrary, or if people decide to invest the requisite energy to get #21392 reviewed and RTM before then ok.",
      "created_at" : "2021-03-18T23:53:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802396191",
      "id" : 802396191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjM5NjE5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-18T23:54:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802396191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@JeremyRubin 's comment above pretty much matches my opinion -- heights seem better in the long term, and are much better if there's a risk of a UASF ending up with a minority hashrate and not being abandoned. But neither of those are concerns here; and making a small modification to bip9 seems a lot easier to get right on a tight deadline to me.",
      "created_at" : "2021-03-19T00:41:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802418304",
      "id" : 802418304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjQxODMwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-19T00:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802418304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased for updates to fuzzer, removed redundant override of `MinActivationHeight` for `WarningBitsConditionChecker`.",
      "created_at" : "2021-03-19T07:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-802622490",
      "id" : 802622490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjYyMjQ5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-19T07:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802622490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If we're in agreement (which we appear to be) that a fully height based approach over any use of MTP is superior (and an alternative PR has implemented it) going for the inferior option to meet a deadline doesn't seem optimal to me. We don't have much wiggle room with regards to timings if we want activation pre December but we have enough to ensure the superior option is implemented imo. Especially as fully height based isn't a huge change.",
      "created_at" : "2021-03-19T19:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-803084612",
      "id" : 803084612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMzA4NDYxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-19T19:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803084612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you rebase on master to drop the fuzzer commit?",
      "created_at" : "2021-03-20T12:57:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-803314548",
      "id" : 803314548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMzMxNDU0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-20T12:57:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803314548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598109083"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598109083"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would it make sense to always set `min_activation_height` to a retarget boundary (and assert that)?",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-20T13:00:14Z",
      "diff_hunk" : "@@ -29,6 +29,11 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this block\n+     *  height.  Note that activation will only occur on a retarget\n+     *  boundary.\n+     */\n+    int min_activation_height{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598109083",
      "id" : 598109083,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODEwOTA4Mw==",
      "original_commit_id" : "5dcc8f70e4e50a3f70d3c1155c9b53c5cff60040",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 8,
      "pull_request_review_id" : 616910768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598109083",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598167203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598167203"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If it's not on a retarget boundary, it will be treated as if it were at the next higher retarget boundary; so would be misleading but not actually buggy. Added a sanity check to versionbits_tests.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-20T22:25:50Z",
      "diff_hunk" : "@@ -29,6 +29,11 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this block\n+     *  height.  Note that activation will only occur on a retarget\n+     *  boundary.\n+     */\n+    int min_activation_height{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598167203",
      "id" : 598167203,
      "in_reply_to_id" : 598109083,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODE2NzIwMw==",
      "original_commit_id" : "5dcc8f70e4e50a3f70d3c1155c9b53c5cff60040",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 8,
      "pull_request_review_id" : 616948568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598167203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased now that fuzzer is merged; added fuzzing of min_activation_height even in always/never active cases; added sanity check of settings via unit test; added min_activation_height to getblockchaininfo output.",
      "created_at" : "2021-03-21T02:58:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-803503626",
      "id" : 803503626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMzUwMzYyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-21T02:58:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/803503626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598589081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598589081"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a reason that this isn't pure virtual (when the other simple getter functions are)?\r\n\r\n```suggestion\r\n    virtual int MinActivationHeight(const Consensus::Params& params) const =0;\r\n```",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-22T10:22:12Z",
      "diff_hunk" : "@@ -57,6 +57,7 @@ class AbstractThresholdConditionChecker {\n     virtual bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const =0;\n     virtual int64_t BeginTime(const Consensus::Params& params) const =0;\n     virtual int64_t EndTime(const Consensus::Params& params) const =0;\n+    virtual int MinActivationHeight(const Consensus::Params& params) const { return 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598589081",
      "id" : 598589081,
      "line" : 60,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODU4OTA4MQ==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 60,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/versionbits.h",
      "position" : 4,
      "pull_request_review_id" : 617356651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598589081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598896420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598896420"
         }
      },
      "author_association" : "MEMBER",
      "body" : "With this bip9-amended model, there is no such thing as a \"max_activation_height\" ? Either we reach  LOCKED_IN state during the starttime/timeout range and delay activation until a _fixed point_ or we fail back to FAILED ? Fixed point can be time-based or height-based but in anycase this is not an _activation window_ with lower/upper bounds. \r\n\r\nTo clear this potential ambiguity, I think this variable should just be called `activation_height` and the delayed semantic be documented around ThresholdState::ACTIVE as its state transition condition isn't true anymore.\r\n\r\nFurther, consensus risks around this variable setting should be documented.\r\n\r\nLet's say you have client version=X reach locked_in at block height T, and activation height is scheduled for block height T+N. If a client version=Y is deployed with same activation logic but activation height M, with M < N, it will start to enforce taproot rules at height M.\r\n\r\nDo you have a risk of chain split between X and Y as this latter client version will consider invalid-taproot block between M and N as valid ?",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-22T16:47:15Z",
      "diff_hunk" : "@@ -29,6 +29,11 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this block\n+     *  height.  Note that activation will only occur on a retarget\n+     *  boundary.\n+     */\n+    int min_activation_height{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598896420",
      "id" : 598896420,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODg5NjQyMA==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 8,
      "pull_request_review_id" : 617754202,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598896420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598900096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598900096"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note, think to update `getblockchaininfo` documentation around \"height\" in consequence.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-22T16:51:26Z",
      "diff_hunk" : "@@ -1258,6 +1258,9 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n         bip9.pushKV(\"statistics\", statsUV);\n     }\n+    if (consensusParams.vDeployments[id].min_activation_height != 0) {\n+        bip9.pushKV(\"min_activation_height\", consensusParams.vDeployments[id].min_activation_height);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r598900096",
      "id" : 598900096,
      "line" : 1262,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODkwMDA5Ng==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 1262,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 617754202,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598900096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r599202432"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599202432"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "None of the others have reasonable defaults, but min activation height does. Also, having min activation height default to zero means the condition checker maintains the same behaviour if left as default, which then allows the tests to be patched independently to test the new behaviours, and also means there's no change needed to the warning checker in validation.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-23T02:25:11Z",
      "diff_hunk" : "@@ -57,6 +57,7 @@ class AbstractThresholdConditionChecker {\n     virtual bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const =0;\n     virtual int64_t BeginTime(const Consensus::Params& params) const =0;\n     virtual int64_t EndTime(const Consensus::Params& params) const =0;\n+    virtual int MinActivationHeight(const Consensus::Params& params) const { return 0; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r599202432",
      "id" : 599202432,
      "in_reply_to_id" : 598589081,
      "line" : 60,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTIwMjQzMg==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 60,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/versionbits.h",
      "position" : 4,
      "pull_request_review_id" : 618153470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599202432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Ideally, height-based locked_in parameters would be better, as consensus rules around MTP are quite loose. AFAIU, it doesn't prevent a coalition of miners to scale down their mined blocks `nTime` to MTP + 1, thus preventing to reach a bip9 starttime at the expected real-world time\r\n\r\nSince it uses median time past, you'd need to be doing that for 6 out of every 11 blocks, which would require >50% of hashpower, and you'd have to take care to not manipulate the nTime of the first and last block of each retarget period so as not to make difficulty skyrocket; but you'd only need 10% of hashpower to block signalling.\r\n\r\nLosing hashpower was the concern for MTP with bip148, and it could be a theoretical concern here too -- if you lost 75% of hashpower, then instead of 14 weeks between timeout and starttime resulting in 6 or 7 retarget periods, it could result in just 1 or 2 retarget periods. But provided no new rules are added to cause blocks to be considered invalid (such as the required signalling rule in bip148), there's no reason to expect a drastic loss of hashpower.\r\n\r\nBut as you point out, in any event, we'd learn something new, and could try again afterwards taking that new knowledge into account.",
      "created_at" : "2021-03-23T02:40:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-804539447",
      "id" : 804539447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNDUzOTQ0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-23T02:40:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/804539447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r599222357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599222357"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's a **minimum** activation height, because activation could be later than that if min_activation_height is reached prior to  timeout MTP being reached. With a fast enough increase in hashrate, you could probably reach any reasonable min_activation_height prior to timeout MTP being reached; and of course min_activation_height could be deliberately set in prior to or in the middle of the signalling period.\r\n\r\nminimum activation height is a fixed value, not a delta; so for your example, if client version X specifies min_activation_height H1 and version Y specifies min_activation_height H2 with H2<H1 then you'd expect Y to be enforcing different rules between H2..H1, because that's what you've told it to do. The only time they'd agree on the rules is if lockin occurs at a height >= H1-2016.\r\n\r\nAny change to deployment parameters can cause a change to what a client considers to be a valid block, and cause a consensus split; this isn't any different to changing the bit, starttime, timeout, period or threshold...",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-23T02:50:45Z",
      "diff_hunk" : "@@ -29,6 +29,11 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this block\n+     *  height.  Note that activation will only occur on a retarget\n+     *  boundary.\n+     */\n+    int min_activation_height{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r599222357",
      "id" : 599222357,
      "in_reply_to_id" : 598896420,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTIyMjM1Nw==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 8,
      "pull_request_review_id" : 618162744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/599222357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600070455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600070455"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit \"tests: test versionbits delayed activation\"\r\n\r\nAdd a comment: \"round up to the next strictly larger multiple of 1000\"?",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T00:49:42Z",
      "diff_hunk" : "@@ -77,14 +85,16 @@ class VersionBitsTester\n     int num;\n \n public:\n-    VersionBitsTester() : num(0) {}\n+    VersionBitsTester() : num(1000) {}\n \n     VersionBitsTester& Reset() {\n+        num = num - (num % 1000) + 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600070455",
      "id" : 600070455,
      "line" : 92,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDA3MDQ1NQ==",
      "original_commit_id" : "aed054ff35fde8183c07cfcafec3403a72c36d29",
      "original_line" : 92,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : 31,
      "pull_request_review_id" : 619211686,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600070455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600075060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600075060"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit \"tests: test versionbits delayed activation\"\r\n\r\nNit: WEirD CapiTAlIZatIoN",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T00:57:31Z",
      "diff_hunk" : "@@ -226,6 +260,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWayS_ACTIVE and never active deployments",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600075060",
      "id" : 600075060,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDA3NTA2MA==",
      "original_commit_id" : "aed054ff35fde8183c07cfcafec3403a72c36d29",
      "original_line" : 265,
      "original_position" : 139,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 619211686,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:42:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600075060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211411"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added docs for `min_activation_height` field; the docs for `height` don't need updating?",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T06:45:17Z",
      "diff_hunk" : "@@ -1258,6 +1258,9 @@ static void BIP9SoftForkDescPushBack(UniValue& softforks, const std::string &nam\n         statsUV.pushKV(\"possible\", statsStruct.possible);\n         bip9.pushKV(\"statistics\", statsUV);\n     }\n+    if (consensusParams.vDeployments[id].min_activation_height != 0) {\n+        bip9.pushKV(\"min_activation_height\", consensusParams.vDeployments[id].min_activation_height);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211411",
      "id" : 600211411,
      "in_reply_to_id" : 598900096,
      "line" : 1262,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDIxMTQxMQ==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 1262,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 5,
      "pull_request_review_id" : 619371524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211628"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211628"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added a comment, though not that",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T06:45:41Z",
      "diff_hunk" : "@@ -77,14 +85,16 @@ class VersionBitsTester\n     int num;\n \n public:\n-    VersionBitsTester() : num(0) {}\n+    VersionBitsTester() : num(1000) {}\n \n     VersionBitsTester& Reset() {\n+        num = num - (num % 1000) + 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211628",
      "id" : 600211628,
      "in_reply_to_id" : 600070455,
      "line" : 92,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDIxMTYyOA==",
      "original_commit_id" : "aed054ff35fde8183c07cfcafec3403a72c36d29",
      "original_line" : 92,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : 31,
      "pull_request_review_id" : 619371737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:45:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211807"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211807"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should've bought the dip while you could, now it's all uppercase.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T06:46:09Z",
      "diff_hunk" : "@@ -226,6 +260,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWayS_ACTIVE and never active deployments",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600211807",
      "id" : 600211807,
      "in_reply_to_id" : 600075060,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDIxMTgwNw==",
      "original_commit_id" : "aed054ff35fde8183c07cfcafec3403a72c36d29",
      "original_line" : 265,
      "original_position" : 139,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 619371969,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T06:46:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600211807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on top of #21489 merge.",
      "created_at" : "2021-03-24T06:46:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#issuecomment-805547342",
      "id" : 805547342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21377",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTU0NzM0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T06:46:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805547342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600425852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600425852"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can be fixed (in a follow-up refactor) with commit 2be730c31de5e1496d893d2fe121af70879ceadf ",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T12:20:36Z",
      "diff_hunk" : "@@ -80,7 +80,7 @@ class CMainParams : public CChainParams {\n         consensus.nPowTargetSpacing = 10 * 60;\n         consensus.fPowAllowMinDifficultyBlocks = false;\n         consensus.fPowNoRetargeting = false;\n-        consensus.nRuleChangeActivationThreshold = 1916; // 95% of 2016\n+        consensus.nRuleChangeActivationThreshold = 1815; // 90% of 2016",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600425852",
      "id" : 600425852,
      "in_reply_to_id" : 589057339,
      "line" : 81,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDQyNTg1Mg==",
      "original_commit_id" : "d614299d6db82e15cdd6ae3c116b8b063ed4d0f4",
      "original_line" : 81,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chainparams.cpp",
      "position" : 5,
      "pull_request_review_id" : 619649659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T12:20:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600425852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600685950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600685950"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> It's a minimum activation height, because activation could be later than that if min_activation_height is reached prior to timeout MTP being reached. With a fast enough increase in hashrate, you could probably reach any reasonable min_activation_height prior to timeout MTP being reached; and of course min_activation_height could be deliberately set in prior to or in the middle of the signalling period.\r\n\r\nRight, that said if you want to achieve ST goal's of backend delay, you should have a retarget period buffer between expected height of timeout and min_activation_height to swallow even a doubling of hashrate, or any other kind of scaling factor we deem *physically* unlikely to happen. Though this conversation belongs more to activation parameters selection. I agree, this logic could serve beyond ST-style of deployment.\r\n\r\n> minimum activation height is a fixed value, not a delta; so for your example, if client version X specifies min_activation_height H1 and version Y specifies min_activation_height H2 with H2<H1 then you'd expect Y to be enforcing different rules between H2..H1, because that's what you've told it to do. The only time they'd agree on the rules is if lockin occurs at a height >= H1-2016.\r\n\r\nI'm just concerned about successfully LOCKED_IN then having uasf folks bothered by the backend delay and willingly to fasten activation by tweaking `min_activation_height`. I'm not sure the immutable semantic of `min_activation_height` is that much understood. Though there is a thousand ways to fork yourself of the network if you have the intent, we can't prevent all of them to happen...\r\n\r\n>  Any change to deployment parameters can cause a change to what a client considers to be a valid block, and cause a consensus split; this isn't any different to changing the bit, starttime, timeout, period or     threshold...\r\n\r\nYes, but I think \"Once activation parameters have been released for a consensus change, they MUST NOT be changed to avoid risks of consensus split until reaching a final deployment state\" on top `BIP9Deployment` is good practice. Future code reviewers might not be as much familiar than us w.r.t to those consensus subtleties.",
      "commit_id" : "4c7d858167a7f8cd4cb6b09787f07929d2abc3a1",
      "created_at" : "2021-03-24T17:06:08Z",
      "diff_hunk" : "@@ -29,6 +29,11 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** If lock in occurs, delay activation until at least this block\n+     *  height.  Note that activation will only occur on a retarget\n+     *  boundary.\n+     */\n+    int min_activation_height{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21377#discussion_r600685950",
      "id" : 600685950,
      "in_reply_to_id" : 598896420,
      "line" : 36,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDY4NTk1MA==",
      "original_commit_id" : "85485fb1abb4fc241548fa65c26f7a6f6f6e2423",
      "original_line" : 36,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 8,
      "pull_request_review_id" : 619994681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21377",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-24T17:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/600685950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   }
]
