[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21330 (Deal with missing data in signature hashes more consistently by sipa)\n* #21329 (descriptor wallet: Cache last hardened xpub and use in normalized descriptors by achow101)\n* #21283 (Implement BIP 370 PSBTv2 by achow101)\n* #21279 (scripted-diff: Regenerate key_io data deterministically by MarcoFalke)\n* #21238 (A few descriptor improvements to prepare for Taproot support by sipa)\n* #21207 (MOVEONLY: CWallet transaction code out of wallet.cpp/.h by ryanofsky)\n* #21206 (refactor: Make CWalletTx sync state type-safe by ryanofsky)\n* #21158 (lib: Add Taproot support to libconsensus by jrawsthorne)\n* #20861 (BIP 350: Implement Bech32m and use it for v1+ segwit addresses by sipa)\n* #16116 (Avoid unnecessary signing provider copies on descriptor expansion by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-04T23:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-791023366",
      "id" : 791023366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTAyMzM2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T08:14:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791023366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-03-05T02:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-791104360",
      "id" : 791104360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTEwNDM2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-05T02:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791104360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on top of #21246, renamed \"inner key\" everywhere in this PR to \"internal key\" as well, and added very basic PSBT support (you can have a watchonly tr(KEY) wallet now, and get it signed by an offline version that has the private key).",
      "created_at" : "2021-03-06T03:17:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-791851695",
      "id" : 791851695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MTg1MTY5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-06T03:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/791851695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK ð",
      "created_at" : "2021-03-07T18:34:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-792330093",
      "id" : 792330093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjMzMDA5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-07T18:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792330093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "TBH, I find your \"must be specified in depth-first search order\" somewhat confusing.  As an alternative syntax I suggest simply using some notation for a binary or.  For example.\r\n\r\n*  `tr(KEY)`: only taproot output key known (or is it an internal pubkey with common NUMS tweak??)\r\n*  `tr(KEY,A)`: internal pubkey with a single script `A` at level 0.\r\n*  `tr(KEY,[A|B])`: internal pubkey with a two scripts, `A` and `B` at level 1.\r\n*  `tr(KEY.[[A|B]|C])`: internal pubkey with a two scripts, `A` and `B` at level 2, and a third script at level 1.\r\n*  `tr(KEY.[A|[B|C]])`: same as above except for `A` is at level 1 and `C` is at level 2 instead.\r\n*  `tr(KEY.[[B|C]|A])`: equal to the above descriptor.\r\n*  `tr(KEY.[[A|B]|[C|D]])`: internal pubkey with a four scripts, all at level 2.\r\n*  `tr(KEY.[[A|C]|[B|D]])`: same four scripts as above, again all at level 2 but now associated differently which makes for a different tweak.\r\n*  `tr(KEY.[A|[[B|C]|D]])`: same four scripts as above, but no longer all at the same level.\r\n\r\nMy claimed advantages are the implicitness of the depth, and clearer notation indicating how the scripts are associated amongst each other.\r\n\r\nThe notation above is just an example and don't care too much about the specific syntax.\r\n\r\n---\r\n\r\nOther things to include in the list of features to be added later, a MerkleRoot descriptor for fixed but unknown branches.\r\n\r\n",
      "created_at" : "2021-03-08T14:32:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-792794101",
      "id" : 792794101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5Mjc5NDEwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T14:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792794101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21371712?v=4",
         "events_url" : "https://api.github.com/users/roconnor-blockstream/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roconnor-blockstream/followers",
         "following_url" : "https://api.github.com/users/roconnor-blockstream/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roconnor-blockstream/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roconnor-blockstream",
         "id" : 21371712,
         "login" : "roconnor-blockstream",
         "node_id" : "MDQ6VXNlcjIxMzcxNzEy",
         "organizations_url" : "https://api.github.com/users/roconnor-blockstream/orgs",
         "received_events_url" : "https://api.github.com/users/roconnor-blockstream/received_events",
         "repos_url" : "https://api.github.com/users/roconnor-blockstream/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roconnor-blockstream/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roconnor-blockstream/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roconnor-blockstream"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@roconnor-blockstream Yeah, I considered something like that, and am open to it. Both notations are equivalent in that you can fairly easily convert in both directions between them (counting bracing level in yours corresponds to the depth specified explicitly in mine, with leaves ultimately listed in the same order). The advantage I see to the current one is that I think it's a bit more readable, avoiding the need to go count braces to see relative depth of leaves. Yours is perhaps a bit easier to write (but maybe that's not something we really expect humans to do much for nontrivial cases).\r\n\r\nThere are many more variations possible. One extreme would be permitting arbitrary weights for every node, and have the descriptor expansion convert it to a Huffman tree. I'd prefer not to do this because it's adding information that can't be inferred back from the script tree it is converted to.",
      "created_at" : "2021-03-08T18:17:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-792966574",
      "id" : 792966574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5Mjk2NjU3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T18:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792966574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Right.  My concern with explicit levels is that it is so easy to violate the invariant that the sum of the weights has to add up to 1, and you cannot really splice together subexpressions to compose a descriptor from fragments without going through and globally adjusting all the levels to be sane.",
      "created_at" : "2021-03-08T18:25:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21365#issuecomment-792972451",
      "id" : 792972451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21365",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5Mjk3MjQ1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T18:25:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792972451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21371712?v=4",
         "events_url" : "https://api.github.com/users/roconnor-blockstream/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roconnor-blockstream/followers",
         "following_url" : "https://api.github.com/users/roconnor-blockstream/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roconnor-blockstream/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roconnor-blockstream",
         "id" : 21371712,
         "login" : "roconnor-blockstream",
         "node_id" : "MDQ6VXNlcjIxMzcxNzEy",
         "organizations_url" : "https://api.github.com/users/roconnor-blockstream/orgs",
         "received_events_url" : "https://api.github.com/users/roconnor-blockstream/received_events",
         "repos_url" : "https://api.github.com/users/roconnor-blockstream/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roconnor-blockstream/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roconnor-blockstream/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roconnor-blockstream"
      }
   }
]
