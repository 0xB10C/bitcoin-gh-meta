[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589800403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589800403"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: unneeded",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-08T22:39:29Z",
      "diff_hunk" : "@@ -226,7 +226,6 @@ struct MempoolAcceptResult {\n MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n                                        bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589800403",
      "id" : 589800403,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwMDQwMw==",
      "original_commit_id" : "b16a75572684865e4a54b7cb56f05c028ac98026",
      "original_line" : 229,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 606773707,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589800403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589804330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589804330"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it'd be worth adding the ability to set the `min_activation_height` for testing as well",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-08T22:44:02Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589804330",
      "id" : 589804330,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwNDMzMA==",
      "original_commit_id" : "b16a75572684865e4a54b7cb56f05c028ac98026",
      "original_line" : 26,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 5,
      "pull_request_review_id" : 606773707,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589804330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589808255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589808255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As it stands, `-vbparams` is only used to disable taproot activation to check soft-fork status, so this would only be useful if it came with an actual test.",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-08T22:52:02Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ void SetupChainParamsBaseOptions(ArgsManager& argsman)\n                  \"This is intended for regression testing tools and app development. Equivalent to -chain=regtest.\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n     argsman.AddArg(\"-segwitheight=<n>\", \"Set the activation height of segwit. -1 to disable. (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);\n     argsman.AddArg(\"-testnet\", \"Use the test chain. Equivalent to -chain=test.\", ArgsManager::ALLOW_ANY, OptionsCategory::CHAINPARAMS);\n-    argsman.AddArg(\"-vbparams=deployment:start:end\", \"Use given start/end times for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);\n+    argsman.AddArg(\"-vbparams=deployment:@startheight:@timeoutheight\", \"Use given start/timeout heights for specified version bits deployment (regtest-only)\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::CHAINPARAMS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589808255",
      "id" : 589808255,
      "in_reply_to_id" : 589804330,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgwODI1NQ==",
      "original_commit_id" : "b16a75572684865e4a54b7cb56f05c028ac98026",
      "original_line" : 26,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 5,
      "pull_request_review_id" : 606782162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589808255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe consider rebasing on #21380 ; it adds fuzz testing and removes the need for the `MinActivationHeight()` virtual functions, and should make the \"per-deployment-threshold\" part a bit simpler.",
      "created_at" : "2021-03-08T22:56:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793147434",
      "id" : 793147434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21392",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzE0NzQzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T22:56:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793147434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589810331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589810331"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-08T22:56:35Z",
      "diff_hunk" : "@@ -226,7 +226,6 @@ struct MempoolAcceptResult {\n MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n                                        bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589810331",
      "id" : 589810331,
      "in_reply_to_id" : 589800403,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTgxMDMzMQ==",
      "original_commit_id" : "b16a75572684865e4a54b7cb56f05c028ac98026",
      "original_line" : 229,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 606784846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589810331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Maybe consider rebasing on #21380 ; it adds fuzz testing and removes the need for the `MinActivationHeight()` virtual functions, and should make the \"per-deployment-threshold\" part a bit simpler.\r\n\r\nDone. It did indeed make this simpler. The fuzzer also caught one minor issue.",
      "created_at" : "2021-03-09T01:47:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793254716",
      "id" : 793254716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21392",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzI1NDcxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T01:47:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793254716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589881249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589881249"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should this be set to NEVER_ACTIVE?",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T01:54:18Z",
      "diff_hunk" : "@@ -20,24 +20,37 @@ enum DeploymentPos\n };\n \n /**\n- * Struct for each individual consensus rule change using BIP9.\n+ * Struct for each individual consensus rule change using version bits (BIP 8).\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int64_t startheight;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589881249",
      "id" : 589881249,
      "line" : 29,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4MTI0OQ==",
      "original_commit_id" : "3d6fa014f3f122bbcfcdbe39cc2bd043bf2fe915",
      "original_line" : 29,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 16,
      "pull_request_review_id" : 606866335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589881249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886135"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "there's not really a great way to rewrite this, but can we comment why it is +1",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:07:55Z",
      "diff_hunk" : "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886135",
      "id" : 589886135,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4NjEzNQ==",
      "original_commit_id" : "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "original_line" : 42,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/versionbits.cpp",
      "position" : 37,
      "pull_request_review_id" : 606866335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886501"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "how it is doc'd below is great",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:08:53Z",
      "diff_hunk" : "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886501",
      "id" : 589886501,
      "in_reply_to_id" : 589886135,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4NjUwMQ==",
      "original_commit_id" : "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "original_line" : 42,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/versionbits.cpp",
      "position" : 37,
      "pull_request_review_id" : 606866335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886850"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ibid -- a temporary makes this clearer",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:09:51Z",
      "diff_hunk" : "@@ -94,50 +103,54 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n-BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+VBitsStats ThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev) const\n {\n-    BIP9Stats stats = {};\n+    VBitsStats stats = {};\n \n-    stats.period = Period(params);\n-    stats.threshold = Threshold(params);\n+    stats.period = m_period;\n+    stats.threshold = m_dep.m_threshold;\n \n-    if (pindex == nullptr)\n+    if (pindexPrev == nullptr || (pindexPrev->nHeight + 1) < stats.period) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589886850",
      "id" : 589886850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg4Njg1MA==",
      "original_commit_id" : "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "original_line" : 113,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 606866335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589886850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891206"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891206"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The potential for uninitialized members here is concerning to me, so I am working on a followup to deal with those. That may be rolled into this PR.",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:21:54Z",
      "diff_hunk" : "@@ -20,24 +20,37 @@ enum DeploymentPos\n };\n \n /**\n- * Struct for each individual consensus rule change using BIP9.\n+ * Struct for each individual consensus rule change using version bits (BIP 8).\n  */\n-struct BIP9Deployment {\n+struct VBitsDeployment {\n     /** Bit position to select the particular bit in nVersion. */\n     int bit;\n-    /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n-    int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n-    int64_t nTimeout;\n+    /** Start block height for version bits miner confirmation. Must be a retarget block, can be in the past. */\n+    int64_t startheight;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891206",
      "id" : 589891206,
      "in_reply_to_id" : 589881249,
      "line" : 29,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTIwNg==",
      "original_commit_id" : "3d6fa014f3f122bbcfcdbe39cc2bd043bf2fe915",
      "original_line" : 29,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/consensus/params.h",
      "position" : 16,
      "pull_request_review_id" : 606877525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891266"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891266"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:22:00Z",
      "diff_hunk" : "@@ -30,8 +36,8 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n             cache[pindexPrev] = ThresholdState::DEFINED;\n             break;\n         }\n-        if (pindexPrev->GetMedianTimePast() < nTimeStart) {\n-            // Optimization: don't recompute down further, as we know every earlier block will be before the start time\n+        if (pindexPrev->nHeight + 1 < height_start) {\n+            // Optimization: don't recompute down further, as we know every earlier block will be before the start height",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891266",
      "id" : 589891266,
      "in_reply_to_id" : 589886135,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTI2Ng==",
      "original_commit_id" : "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "original_line" : 42,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/versionbits.cpp",
      "position" : 37,
      "pull_request_review_id" : 606877587,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891266",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891296"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9cb9a096d4b82333ef2e3f016dc890270c9a235e",
      "created_at" : "2021-03-09T02:22:04Z",
      "diff_hunk" : "@@ -94,50 +103,54 @@ ThresholdState AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex*\n     return state;\n }\n \n-BIP9Stats AbstractThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const\n+VBitsStats ThresholdConditionChecker::GetStateStatisticsFor(const CBlockIndex* pindexPrev) const\n {\n-    BIP9Stats stats = {};\n+    VBitsStats stats = {};\n \n-    stats.period = Period(params);\n-    stats.threshold = Threshold(params);\n+    stats.period = m_period;\n+    stats.threshold = m_dep.m_threshold;\n \n-    if (pindex == nullptr)\n+    if (pindexPrev == nullptr || (pindexPrev->nHeight + 1) < stats.period) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#discussion_r589891296",
      "id" : 589891296,
      "in_reply_to_id" : 589886850,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTg5MTI5Ng==",
      "original_commit_id" : "c25fe127af4e91da541e6d8c5c47ea733994d529",
      "original_line" : 113,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "src/versionbits.cpp",
      "position" : null,
      "pull_request_review_id" : 606877624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21392",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-09T02:30:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/589891296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21391 ([Bundle 5/n] Prune g_chainman usage in RPC modules by dongcarl)\n* #21380 (Add fuzzing harness for versionbits by ajtowns)\n* #21378 (Convert taproot to flag day activation by ajtowns)\n* #21377 (Speedy trial support for versionbits by ajtowns)\n* #21142 (fuzz: Add tx_pool fuzz target by MarcoFalke)\n* #20556 (rpc: Properly document return values (submitblock, gettxout, getblocktemplate, scantxoutset) by MarcoFalke)\n* #20354 (test: Add feature_taproot.py --previous_release by MarcoFalke)\n* #19438 (Introduce deploymentstatus by ajtowns)\n* #19259 (fuzz: Add fuzzing harness for LoadMempool(...) and DumpMempool(...) by practicalswift)\n* #10102 ([experimental] Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-09T04:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21392#issuecomment-793365182",
      "id" : 793365182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21392",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MzM2NTE4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T04:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/793365182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
