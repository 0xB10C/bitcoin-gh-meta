[
   {
      "author_association" : "MEMBER",
      "body" : "Just discovered #8394, will check if it contains anything I've overlooked. ",
      "created_at" : "2021-03-02T02:04:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#issuecomment-788518295",
      "id" : 788518295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODUxODI5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-02T02:04:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788518295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585277838"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585277838"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Usually `0` is used as \"dummy/invalid\" port. Port `1` is reserved for (from `/etc/services`):\r\n```\r\ntcpmux            1/tcp    #TCP Port Service Multiplexer\r\ntcpmux            1/udp    #TCP Port Service Multiplexer\r\n```",
      "commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "created_at" : "2021-03-02T05:44:48Z",
      "diff_hunk" : "@@ -83,31 +83,31 @@ BOOST_AUTO_TEST_CASE(netbase_properties)\n \n }\n \n-bool static TestSplitHost(std::string test, std::string host, int port)\n+bool static TestSplitHost(const std::string& test, const std::string& host, uint16_t port)\n {\n     std::string hostOut;\n-    int portOut = -1;\n+    uint16_t portOut = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585277838",
      "id" : 585277838,
      "line" : 89,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTI3NzgzOA==",
      "original_commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "original_line" : 89,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 9,
      "pull_request_review_id" : 601445624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-02T06:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585277838",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585280508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585280508"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "(github does not let me to comment on line `118`, so commenting on line `111` instead):\r\n\r\n```cpp\r\n118        int32_t n;\r\n119        if (ParseInt32(in.substr(colon + 1), &n) && n > 0 && n < 0x10000) {\r\n120            in = in.substr(0, colon);\r\n121            portOut = n;\r\n122        }\r\n```\r\n\r\n* Line `121` does not cause a warning?\r\n* Maybe change `0x10000` to `std::numeric_limits<uint16_t>::max()`.\r\n* If this pattern `if (ParseUint32() && n is in [0,64k])` is used in other places, then maybe worth adding `ParseUint16()`. We have `ParseUint{8,32,64}()`.",
      "commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "created_at" : "2021-03-02T05:52:47Z",
      "diff_hunk" : "@@ -107,7 +107,8 @@ std::vector<unsigned char> ParseHex(const std::string& str)\n     return ParseHex(str.c_str());\n }\n \n-void SplitHostPort(std::string in, int &portOut, std::string &hostOut) {\n+void SplitHostPort(std::string in, uint16_t& portOut, std::string& hostOut)\n+{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585280508",
      "id" : 585280508,
      "line" : 111,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTI4MDUwOA==",
      "original_commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "original_line" : 111,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 6,
      "pull_request_review_id" : 601445624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-02T06:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585280508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585283042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585283042"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`GetArg()` returns `uint64_t` and here we would silently narrow it down to `uint16_t`. It is ok since before this PR we would narrow it down to `int` and later narrow the `int` down to `uint16_t`.\r\n\r\nIf the user makes a typo and specifies `-rpcport=88332` we will bind on `22796` instead (with and without this PR). Best to print an error and refuse to start, not necessary in this PR.",
      "commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "created_at" : "2021-03-02T05:59:51Z",
      "diff_hunk" : "@@ -290,7 +290,7 @@ static bool ThreadHTTP(struct event_base* base)\n /** Bind HTTP server to specified addresses */\n static bool HTTPBindAddresses(struct evhttp* http)\n {\n-    int http_port = gArgs.GetArg(\"-rpcport\", BaseParams().RPCPort());\n+    uint16_t http_port = gArgs.GetArg(\"-rpcport\", BaseParams().RPCPort());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#discussion_r585283042",
      "id" : 585283042,
      "line" : 293,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NTI4MzA0Mg==",
      "original_commit_id" : "f8b1c2140eea958ab0e6f42ef2daab7000375d82",
      "original_line" : 293,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/httpserver.cpp",
      "position" : 5,
      "pull_request_review_id" : 601445624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21328",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-02T06:13:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/585283042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20452 (util: Replace use of locale dependent atoi(â¦) with locale-independent std::from_chars(â¦) (C++17) by practicalswift)\n* #20196 (net: fix GetListenPort() to derive the proper port by vasild)\n* #19415 (net: Make DNS lookup mockable, add fuzzing harness by practicalswift)\n* #19203 (net: Add regression fuzz harness for CVE-2017-18350. Add FuzzedSocket. by practicalswift)\n* #18061 (util: Pass size to ParseHex to assist preallocation by elichai)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-02T10:13:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#issuecomment-788792828",
      "id" : 788792828,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODc5MjgyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-02T10:13:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788792828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Strong Concept ACK\r\n\r\nThanks for removing this implicit conversion gotcha :)\r\n\r\n`uint16_t` should be used consistently for port numbers.\r\n\r\nSomewhat related: https://github.com/bitcoin/bitcoin/pull/19415#issuecomment-765811567",
      "created_at" : "2021-03-02T12:40:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21328#issuecomment-788879937",
      "id" : 788879937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21328",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4ODg3OTkzNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-02T12:40:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/788879937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
