[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214521982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214521982"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: these could go in the initializer list",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2018-09-01T19:58:41Z",
      "diff_hunk" : "@@ -195,6 +202,45 @@ TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets,\n     resizeInMemoryCounters(buckets.size());\n }\n \n+TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets, const std::map<double, unsigned int>& defaultBucketMap, const TxConfirmStats& txstatsSource)\n+    : buckets(defaultBuckets), bucketMap(defaultBucketMap)\n+{\n+    decay = txstatsSource.decay;\n+    scale = txstatsSource.scale;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214521982",
      "id" : 214521982,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDUyMTk4Mg==",
      "original_commit_id" : "f9dd933a75bd32a8eb80b408d5f94b45f58030ab",
      "original_position" : 22,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 151602212,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T02:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214521982",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214521993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214521993"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `++dst` here and elsewhere",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2018-09-01T19:59:22Z",
      "diff_hunk" : "@@ -195,6 +202,45 @@ TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets,\n     resizeInMemoryCounters(buckets.size());\n }\n \n+TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets, const std::map<double, unsigned int>& defaultBucketMap, const TxConfirmStats& txstatsSource)\n+    : buckets(defaultBuckets), bucketMap(defaultBucketMap)\n+{\n+    decay = txstatsSource.decay;\n+    scale = txstatsSource.scale;\n+\n+    const unsigned int maxPeriods = txstatsSource.confAvg.size();\n+    assert(txstatsSource.failAvg.size() == maxPeriods);\n+\n+    confAvg.resize(maxPeriods);\n+    for (unsigned int i = 0; i < maxPeriods; i++) {\n+        confAvg[i].resize(buckets.size());\n+    }\n+    failAvg.resize(maxPeriods);\n+    for (unsigned int i = 0; i < maxPeriods; i++) {\n+        failAvg[i].resize(buckets.size());\n+    }\n+\n+    txCtAvg.resize(buckets.size());\n+    avg.resize(buckets.size());\n+\n+    unsigned int src = 0;\n+    for (unsigned int dst = 0; dst < buckets.size(); dst++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214521993",
      "id" : 214521993,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDUyMTk5Mw==",
      "original_commit_id" : "f9dd933a75bd32a8eb80b408d5f94b45f58030ab",
      "original_position" : 40,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 151602226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T02:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214521993",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214522017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214522017"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: can move these conditions into the `for`, so that it manages both `src` and `dst`.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2018-09-01T20:00:40Z",
      "diff_hunk" : "@@ -195,6 +202,45 @@ TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets,\n     resizeInMemoryCounters(buckets.size());\n }\n \n+TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets, const std::map<double, unsigned int>& defaultBucketMap, const TxConfirmStats& txstatsSource)\n+    : buckets(defaultBuckets), bucketMap(defaultBucketMap)\n+{\n+    decay = txstatsSource.decay;\n+    scale = txstatsSource.scale;\n+\n+    const unsigned int maxPeriods = txstatsSource.confAvg.size();\n+    assert(txstatsSource.failAvg.size() == maxPeriods);\n+\n+    confAvg.resize(maxPeriods);\n+    for (unsigned int i = 0; i < maxPeriods; i++) {\n+        confAvg[i].resize(buckets.size());\n+    }\n+    failAvg.resize(maxPeriods);\n+    for (unsigned int i = 0; i < maxPeriods; i++) {\n+        failAvg[i].resize(buckets.size());\n+    }\n+\n+    txCtAvg.resize(buckets.size());\n+    avg.resize(buckets.size());\n+\n+    unsigned int src = 0;\n+    for (unsigned int dst = 0; dst < buckets.size(); dst++) {\n+        if (buckets[dst] < txstatsSource.buckets[src]) continue;\n+\n+        txCtAvg[dst] = txstatsSource.txCtAvg[src];\n+        avg[dst] = txstatsSource.avg[src];\n+        for (unsigned int i = 0; i < maxPeriods; i++) {\n+            confAvg[i][dst] = txstatsSource.confAvg[i][src];\n+            failAvg[i][dst] = txstatsSource.failAvg[i][src];\n+        }\n+\n+        src++;\n+        if (src >= txstatsSource.buckets.size()) break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r214522017",
      "id" : 214522017,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDUyMjAxNw==",
      "original_commit_id" : "f9dd933a75bd32a8eb80b408d5f94b45f58030ab",
      "original_position" : 51,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 151602247,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T02:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214522017",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The really high fee rates were due to not handling the buckets/bucketMap objects correctly, believe that's fixed now.",
      "created_at" : "2018-09-03T08:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-418045790",
      "id" : 418045790,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxODA0NTc5MA==",
      "updated_at" : "2018-09-03T08:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/418045790",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Dropped the WIP tag, this should be good to review/nitpick now.\r\n\r\nI couldn't come up with a reasonable way to add functional tests for this change; if someone has a good idea, suggestions/patches welcome :) Though... I guess just generating an estimates file directly in python, pointing bitcoind at it, and seeing what estimates bitcoind comes up with after upgrading it without ever actually putting txes in the blockchain could work okay...",
      "created_at" : "2018-09-07T04:39:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-419320374",
      "id" : 419320374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxOTMyMDM3NA==",
      "updated_at" : "2018-09-07T04:39:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419320374",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r232828219"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232828219"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Make `maxPeriods` â and the three following `i` â `size_t` instead to avoid implicit conversions?",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2018-11-12T22:03:15Z",
      "diff_hunk" : "@@ -195,6 +202,56 @@ TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets,\n     resizeInMemoryCounters(buckets.size());\n }\n \n+TxConfirmStats::TxConfirmStats(const std::vector<double>& defaultBuckets, const std::map<double, unsigned int>& defaultBucketMap, const TxConfirmStats& txstatsSource)\n+    : buckets(defaultBuckets), bucketMap(defaultBucketMap),\n+      decay(txstatsSource.decay), scale(txstatsSource.scale)\n+{\n+    const unsigned int maxPeriods = txstatsSource.confAvg.size();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r232828219",
      "id" : 232828219,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjgyODIxOQ==",
      "original_commit_id" : "7f1e3a4c6ab84a8abe6fd52331fda82c79ee0642",
      "original_position" : 22,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 174113544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T02:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232828219",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reworked based on a suggestion from @Sjors; could still use some functional tests to check that loading a particular set of fee rates produces an expected set of fee estimates.",
      "created_at" : "2019-01-03T15:33:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-451178577",
      "id" : 451178577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTE3ODU3Nw==",
      "updated_at" : "2019-01-03T15:33:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451178577",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18245 (Test some transaction creation with non-empty fee estimator by instagibbs)\n* #10443 (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-01-05T17:38:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-451674910",
      "id" : 451674910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MTY3NDkxMA==",
      "updated_at" : "2020-03-21T04:11:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/451674910",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r245672691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245672691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be `explicit`?",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2019-01-07T14:35:33Z",
      "diff_hunk" : "@@ -168,25 +168,27 @@ class CBlockPolicyEstimator\n     static constexpr double SUFFICIENT_TXS_SHORT = 0.5;\n \n     /** Minimum and Maximum values for tracking feerates\n-     * The MIN_BUCKET_FEERATE should just be set to the lowest reasonable feerate we\n-     * might ever want to track.  Historically this has been 1000 since it was\n-     * inheriting DEFAULT_MIN_RELAY_TX_FEE and changing it is disruptive as it\n-     * invalidates old estimates files. So leave it at 1000 unless it becomes\n-     * necessary to lower it, and then lower it substantially.\n+     * The MIN_BUCKET_FEERATE and MAX_BUCKET_FEERATE should just be set to\n+     * the lowest and highest reasonable feerate we might ever want to track.\n      */\n-    static constexpr double MIN_BUCKET_FEERATE = 1000;\n+    static constexpr double MIN_BUCKET_FEERATE = 4;\n     static constexpr double MAX_BUCKET_FEERATE = 1e7;\n \n     /** Spacing of FeeRate buckets\n-     * We have to lump transactions into buckets based on feerate, but we want to be able\n-     * to give accurate estimates over a large range of potential feerates\n-     * Therefore it makes sense to exponentially space the buckets\n+     * We have to lump transactions into buckets based on feerate,\n+     * but we want to be able to give accurate estimates over a large\n+     * range of potential feerates. Therefore it makes sense to exponentially\n+     * space the buckets, which we do via a factor of FEE_SPACING. In order\n+     * to support adjusting the MIN and MAX feerates above without invalidating\n+     * the buckets, we specify a BASE level for the buckets that we repeatedly\n+     * multiply (or divide) by the SPACING until we reach the MAX (or MIN).\n      */\n+    static constexpr double BASE_BUCKET_FEERATE = 1000;\n     static constexpr double FEE_SPACING = 1.05;\n \n public:\n     /** Create new BlockPolicyEstimator and initialize stats tracking classes with default values */\n-    CBlockPolicyEstimator();\n+    CBlockPolicyEstimator(double min_bucket_feerate = MIN_BUCKET_FEERATE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r245672691",
      "id" : 245672691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NTY3MjY5MQ==",
      "original_commit_id" : "f28cf3c0ab63e040e1b1e979c1a707f3ce614a47",
      "original_position" : 34,
      "path" : "src/policy/fees.h",
      "position" : null,
      "pull_request_review_id" : 189831996,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T02:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/245672691",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 431 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2020-03-09T20:35:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-596765883",
      "id" : 596765883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5Njc2NTg4Mw==",
      "updated_at" : "2020-03-09T20:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/596765883",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this work abandoned?",
      "created_at" : "2020-03-17T16:19:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-600162258",
      "id" : 600162258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMDE2MjI1OA==",
      "updated_at" : "2020-03-17T16:19:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/600162258",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-03-18T17:27:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-600763548",
      "id" : 600763548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMDc2MzU0OA==",
      "updated_at" : "2020-03-18T17:27:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/600763548",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Had stalled this on writing some tests. Having now written a test, it's found a bug, so now trying to fix that... :)",
      "created_at" : "2020-03-19T23:50:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-601467871",
      "id" : 601467871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMTQ2Nzg3MQ==",
      "updated_at" : "2020-03-19T23:50:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/601467871",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r396207234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/396207234"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yep.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-03-23T04:25:11Z",
      "diff_hunk" : "@@ -168,25 +168,27 @@ class CBlockPolicyEstimator\n     static constexpr double SUFFICIENT_TXS_SHORT = 0.5;\n \n     /** Minimum and Maximum values for tracking feerates\n-     * The MIN_BUCKET_FEERATE should just be set to the lowest reasonable feerate we\n-     * might ever want to track.  Historically this has been 1000 since it was\n-     * inheriting DEFAULT_MIN_RELAY_TX_FEE and changing it is disruptive as it\n-     * invalidates old estimates files. So leave it at 1000 unless it becomes\n-     * necessary to lower it, and then lower it substantially.\n+     * The MIN_BUCKET_FEERATE and MAX_BUCKET_FEERATE should just be set to\n+     * the lowest and highest reasonable feerate we might ever want to track.\n      */\n-    static constexpr double MIN_BUCKET_FEERATE = 1000;\n+    static constexpr double MIN_BUCKET_FEERATE = 4;\n     static constexpr double MAX_BUCKET_FEERATE = 1e7;\n \n     /** Spacing of FeeRate buckets\n-     * We have to lump transactions into buckets based on feerate, but we want to be able\n-     * to give accurate estimates over a large range of potential feerates\n-     * Therefore it makes sense to exponentially space the buckets\n+     * We have to lump transactions into buckets based on feerate,\n+     * but we want to be able to give accurate estimates over a large\n+     * range of potential feerates. Therefore it makes sense to exponentially\n+     * space the buckets, which we do via a factor of FEE_SPACING. In order\n+     * to support adjusting the MIN and MAX feerates above without invalidating\n+     * the buckets, we specify a BASE level for the buckets that we repeatedly\n+     * multiply (or divide) by the SPACING until we reach the MAX (or MIN).\n      */\n+    static constexpr double BASE_BUCKET_FEERATE = 1000;\n     static constexpr double FEE_SPACING = 1.05;\n \n public:\n     /** Create new BlockPolicyEstimator and initialize stats tracking classes with default values */\n-    CBlockPolicyEstimator();\n+    CBlockPolicyEstimator(double min_bucket_feerate = MIN_BUCKET_FEERATE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r396207234",
      "id" : 396207234,
      "in_reply_to_id" : 245672691,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjIwNzIzNA==",
      "original_commit_id" : "f28cf3c0ab63e040e1b1e979c1a707f3ce614a47",
      "original_position" : 34,
      "path" : "src/policy/fees.h",
      "position" : null,
      "pull_request_review_id" : 379125735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "updated_at" : "2020-03-23T04:25:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/396207234",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased, test case added as first commit, should be reviewable.\r\n\r\nNote that this only makes estimations work for fee rates below 1sat/byte if you ever actually accept fee rates that low into your mempool. To make your mempool accept/relay transactions that cheap requires setting `-minrelaytxfee` or changing `DEFAULT_MIN_RELAY_TX_FEE`; and to have your wallet use fees that low means setting`-mintxfee` or changing `DEFAULT_TRANSACTION_MINFEE` and potentially also `WALLET_INCREMENTAL_RELAY_FEE`. Doing those things now for mainnet would probably just be a spam vector, rather than particularly useful IMHO.",
      "created_at" : "2020-03-23T04:35:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-602380326",
      "id" : 602380326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjM4MDMyNg==",
      "updated_at" : "2020-03-23T04:35:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602380326",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Doing those things now for mainnet would probably just be a spam vector\r\n\r\nAlso open a huge surface for privacy leaks",
      "created_at" : "2020-03-23T12:31:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#issuecomment-602562227",
      "id" : 602562227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13990",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMjU2MjIyNw==",
      "updated_at" : "2020-03-23T12:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/602562227",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407094503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407094503"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's not very clear to me what these methods are supposed to return. Just from reading the definition, not the implementation.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T18:19:25Z",
      "diff_hunk" : "@@ -133,8 +133,83 @@ class TxConfirmStats\n      * variables with this state.\n      */\n     void Read(CAutoFile& filein, int nFileVersion, size_t numBuckets);\n+\n+    /**\n+     * Helper function to check that TxConfirmStats behavior is consistent\n+     */\n+    int CheckConsistent(size_t expected_bucket_count) const;\n+    int CheckConsistent(const std::vector<double>& exp_buckets, const std::map<double, unsigned int>& exp_bucket_map) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407094503",
      "id" : 407094503,
      "line" : 141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA5NDUwMw==",
      "original_commit_id" : "5f76ecbb094b2e7ca1a048b4147029a39ee2e127",
      "original_line" : 141,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/policy/fees.cpp",
      "position" : 9,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407094503",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407094611"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407094611"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For this method it's also not clear what it returns. I suppose either a method's name or documentation should make that clear.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T18:20:33Z",
      "diff_hunk" : "@@ -254,6 +257,9 @@ class CBlockPolicyEstimator\n     /** Initialise bucketMap */\n     void InitBucketMap() EXCLUSIVE_LOCKS_REQUIRED(m_cs_fee_estimator);\n \n+    /** Check stats are consistent (for unit tests) */\n+    int CheckConsistent() const EXCLUSIVE_LOCKS_REQUIRED(m_cs_fee_estimator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407094611",
      "id" : 407094611,
      "line" : 263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA5NDYxMQ==",
      "original_commit_id" : "5f76ecbb094b2e7ca1a048b4147029a39ee2e127",
      "original_line" : 261,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/policy/fees.h",
      "position" : 65,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407094611",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407115498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407115498"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The PR OP says \"8 satoshi\". I don't know if this conflicts with the concept ACKs on the PR.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T22:00:14Z",
      "diff_hunk" : "@@ -166,6 +166,7 @@ class CBlockPolicyEstimator\n      * The MIN_BUCKET_FEERATE and MAX_BUCKET_FEERATE should just be set to\n      * the lowest and highest reasonable feerate we might ever want to track.\n      */\n+    static constexpr double MIN_BUCKET_FEERATE = 4;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407115498",
      "id" : 407115498,
      "line" : 169,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExNTQ5OA==",
      "original_commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "original_line" : 169,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/fees.h",
      "position" : 13,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407115498",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407115531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407115531"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Will `BASE_BUCKET_FEERATE` still be used?",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T22:00:51Z",
      "diff_hunk" : "@@ -599,7 +599,8 @@ CBlockPolicyEstimator::CBlockPolicyEstimator(double min_bucket_feerate)\n     : nBestSeenHeight(0), firstRecordedHeight(0), historicalFirst(0), historicalBest(0), trackedTxs(0), untrackedTxs(0)\n {\n     assert(0 < min_bucket_feerate);\n-    static_assert(BASE_BUCKET_FEERATE > 0, \"Base feerate must be nonzero\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407115531",
      "id" : 407115531,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExNTUzMQ==",
      "original_commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "original_line" : 602,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407115531",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407116145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407116145"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would appreciate the documentation on this method to be a little bit more descriptive. IIUC it adds buckets on the lower end from min up to base?",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T22:08:32Z",
      "diff_hunk" : "@@ -260,6 +261,9 @@ class CBlockPolicyEstimator\n     /** Check stats are consistent (for unit tests) */\n     int CheckConsistent() const EXCLUSIVE_LOCKS_REQUIRED(m_cs_fee_estimator);\n \n+    /** Initialise buckets up to base */\n+    size_t ExtendBucketsUpTo(double base, double min) EXCLUSIVE_LOCKS_REQUIRED(m_cs_fee_estimator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407116145",
      "id" : 407116145,
      "line" : 266,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExNjE0NQ==",
      "original_commit_id" : "b8c7ec4be42619861fe453fcfded579742764524",
      "original_line" : 265,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "src/policy/fees.h",
      "position" : 68,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407116145",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407117574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407117574"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm, I think something weird happened in the separation of the commits. Here you seem to remove the `MIN_BUCKET_FEERATE` constant, while in https://github.com/bitcoin/bitcoin/pull/13990/commits/c68f796c41b9b145c9c1b2c24aea505362ad1b63 you're adding it again.",
      "commit_id" : "c68f796c41b9b145c9c1b2c24aea505362ad1b63",
      "created_at" : "2020-04-11T22:24:56Z",
      "diff_hunk" : "@@ -163,25 +163,26 @@ class CBlockPolicyEstimator\n     static constexpr double SUFFICIENT_TXS_SHORT = 0.5;\n \n     /** Minimum and Maximum values for tracking feerates\n-     * The MIN_BUCKET_FEERATE should just be set to the lowest reasonable feerate we\n-     * might ever want to track.  Historically this has been 1000 since it was\n-     * inheriting DEFAULT_MIN_RELAY_TX_FEE and changing it is disruptive as it\n-     * invalidates old estimates files. So leave it at 1000 unless it becomes\n-     * necessary to lower it, and then lower it substantially.\n+     * The MIN_BUCKET_FEERATE and MAX_BUCKET_FEERATE should just be set to\n+     * the lowest and highest reasonable feerate we might ever want to track.\n      */\n-    static constexpr double MIN_BUCKET_FEERATE = 1000;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13990#discussion_r407117574",
      "id" : 407117574,
      "line" : 172,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExNzU3NA==",
      "original_commit_id" : "b8c7ec4be42619861fe453fcfded579742764524",
      "original_line" : 172,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/policy/fees.h",
      "position" : 12,
      "pull_request_review_id" : 391789012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13990",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-11T22:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/407117574",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/853468?v=4",
         "events_url" : "https://api.github.com/users/stevenroose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stevenroose/followers",
         "following_url" : "https://api.github.com/users/stevenroose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stevenroose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stevenroose",
         "id" : 853468,
         "login" : "stevenroose",
         "node_id" : "MDQ6VXNlcjg1MzQ2OA==",
         "organizations_url" : "https://api.github.com/users/stevenroose/orgs",
         "received_events_url" : "https://api.github.com/users/stevenroose/received_events",
         "repos_url" : "https://api.github.com/users/stevenroose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stevenroose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stevenroose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stevenroose"
      }
   }
]
