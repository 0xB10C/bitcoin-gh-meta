[
   {
      "author_association" : "MEMBER",
      "body" : "The error was \"  Called Process failed with 'error: Could not locate RPC credentials. No authentication cookie could be found, and RPC password is not set.  See -rpcpassword and -stdinrpcpass.  Configuration file: (/home/travis/build/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_â¿_ð_20200417_132645/interface_bitcoin_cli_109/node0/bitcoin.conf) \"",
      "created_at" : "2020-04-17T20:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615455661",
      "id" : 615455661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ1NTY2MQ==",
      "updated_at" : "2020-04-17T20:45:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615455661",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes. I'm still looking at it, but since valgrind runs don't work out-of-repo, I wanted to see if the valgrind CI passes with this change while looking further.",
      "created_at" : "2020-04-17T20:53:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615458697",
      "id" : 615458697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ1ODY5Nw==",
      "updated_at" : "2020-04-17T20:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615458697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Am noting that no other tests use `get_auth_cookie`... seems undertested...",
      "created_at" : "2020-04-17T21:03:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615462413",
      "id" : 615462413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ2MjQxMw==",
      "updated_at" : "2020-04-17T21:03:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615462413",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`get_auth_cookie` is used by every single test. It reads the auth cookie from disk, though it fails when the file was not yet created.",
      "created_at" : "2020-04-17T21:08:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615464435",
      "id" : 615464435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ2NDQzNQ==",
      "updated_at" : "2020-04-17T21:08:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615464435",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18594 (cli: display multiwallet balances in -getinfo by jonatack)\n* #18453 (rpc, cli: add multiwallet balances rpc and use it in -getinfo by jonatack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-17T22:54:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615497907",
      "id" : 615497907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ5NzkwNw==",
      "updated_at" : "2020-04-17T22:54:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615497907",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Btw, this happens on cirrus reliably: https://cirrus-ci.com/task/6597545033990144?command=functional_test#L1053",
      "created_at" : "2020-04-18T15:39:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615891534",
      "id" : 615891534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTg5MTUzNA==",
      "updated_at" : "2020-04-18T15:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615891534",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Or, if you want to test locally:\r\n\r\n```diff\r\ndiff --git a/src/httprpc.cpp b/src/httprpc.cpp\r\nindex 60c4d06f12..3dd06c4758 100644\r\n--- a/src/httprpc.cpp\r\n+++ b/src/httprpc.cpp\r\n@@ -291,6 +291,7 @@ static bool InitRPCAuthentication()\r\n bool StartHTTPRPC()\r\n {\r\n     LogPrint(BCLog::RPC, \"Starting HTTP RPC server\\n\");\r\n+    UninterruptibleSleep(std::chrono::seconds{11});\r\n     if (!InitRPCAuthentication())\r\n         return false;\r\n \r\n",
      "created_at" : "2020-04-18T15:42:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615892030",
      "id" : 615892030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTg5MjAzMA==",
      "updated_at" : "2020-04-18T15:42:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615892030",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @MarcoFalke for your suggestions! Being able to reproduce makes all the difference. I updated the PR title and description and pushed a fix that seems to work.",
      "created_at" : "2020-04-18T16:54:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615902936",
      "id" : 615902936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTkwMjkzNg==",
      "updated_at" : "2020-04-18T16:54:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615902936",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410723624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410723624"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't really like offering two interfaces. The existing one that either returns an auth pair or thorws a ValueError should be sufficient.\r\n\r\nIf you don't like the generic ValueError, I believe python can create derived classes like this `RpcCredentialsMissing(ValueError)`, which you can then throw/catch.",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T17:06:25Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410723624",
      "id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcyMzYyNA==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395931825,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410723624",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I see that the CI for the latest merge on master (bump wallet_import timeout) failed for this same reason: https://travis-ci.org/github/bitcoin/bitcoin/jobs/676639823",
      "created_at" : "2020-04-18T18:44:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615924424",
      "id" : 615924424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTkyNDQyNA==",
      "updated_at" : "2020-04-18T18:44:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615924424",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410738978"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410738978"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for reviewing and your help. If I understand your comment correctly, I modified the conditional here not to change the interface, but to not raise when we're waiting for the cookie auth credentials. When they do become available, it still returns the auth pair which we're waiting for in `wait_for_cookie_credentials()`.",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T19:15:33Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410738978",
      "id" : 410738978,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczODk3OA==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395943012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410738978",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410739285"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410739285"
         }
      },
      "author_association" : "MEMBER",
      "body" : "E.g. since `wait_for_cookie` is false by default, there is no change in behavior except when it's called by `wait_for_cookie_credentials`.",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T19:17:55Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410739285",
      "id" : 410739285,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczOTI4NQ==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395943242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410739285",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410741317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410741317"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, I don't understand why `wait_for_cookie` is needed? Just because it is turned off by default doesn't mean that it doesn't complicate the interface",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T19:36:05Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410741317",
      "id" : 410741317,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTMxNw==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395944571,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410741317",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410741948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410741948"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hm, maybe it isn't. Good question.",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T19:42:09Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410741948",
      "id" : 410741948,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MTk0OA==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395945004,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410741948",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410742490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410742490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "They should never be empty. \r\n\r\nEither both are a string of length of at least 1 or a ValueError is thrown",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T19:47:23Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410742490",
      "id" : 410742490,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MjQ5MA==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395945383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410742490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410744291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410744291"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good catch, fixed.",
      "commit_id" : "83b037921fac34d4c85ce6a2e137407596fed91e",
      "created_at" : "2020-04-18T20:06:04Z",
      "diff_hunk" : "@@ -354,7 +354,7 @@ def get_auth_cookie(datadir, chain):\n             password = split_userpass[1]\n     except OSError:\n         pass\n-    if user is None or password is None:\n+    if (user is None or password is None) and wait_for_cookie is False:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#discussion_r410744291",
      "id" : 410744291,
      "in_reply_to_id" : 410723624,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0NDI5MQ==",
      "original_commit_id" : "72a079e3980a35f76e63829b2640cf588aaa9ecf",
      "original_line" : 357,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 395946727,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18691",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-18T20:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/410744291",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Simplified.\r\n\r\nEdit: FWIW I considered adding the following but don't think it's necessary? IIUC `wait_for_cookie_credentials` shouldn't see any other type of ValueError, nor ECONNREFUSED.\r\n```diff\r\n+            except OSError as e:\r\n+                if e.errno != errno.ECONNREFUSED:  # Port not yet open?\r\n+                    raise  # Unknown OS error\r\n-            except ValueError:\r\n-                pass\r\n+            except ValueError as e:  # Cookie file not found and no rpcuser or rpcassword; bitcoind still starting.\r\n+                if \"No RPC credentials\" not in str(e):\r\n+                    raise\r\n```",
      "created_at" : "2020-04-18T20:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18691#issuecomment-615939057",
      "id" : 615939057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18691",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTkzOTA1Nw==",
      "updated_at" : "2020-04-18T21:43:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615939057",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
