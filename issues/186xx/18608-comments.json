[
   {
      "author_association" : "MEMBER",
      "body" : "Concept NACK. This completely breaks down the layering/abstraction here... Simply adding new metadata shouldn't require touching the db layer, and the db layer shouldn't have visibility into stuff like `CTxDestination`",
      "created_at" : "2020-04-12T20:02:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18608#issuecomment-612668486",
      "id" : 612668486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18608",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMjY2ODQ4Ng==",
      "updated_at" : "2020-04-12T20:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612668486",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Simply adding new metadata shouldn't require touching the db layer\r\n\r\nAdding new metadata should touch the walletdb layer because it changes the database format. The reason why #13756 introduced a bug is no one understood how it was changing the database format. I try to look at format changes very closely and I didn't pay any attention at all to that PR because it wasn't modifying walletdb. (Implementation of #13756 would also have been smaller and simpler if it was adding a new walletdb key, in addition to avoiding the bug.)\r\n\r\n> the db layer shouldn't have visibility into stuff like `CTxDestination`\r\n\r\nWhere's this coming from? I could pretty easily move the EncodeDestination/DecodeDestination calls out of walletdb, but it's already accepting and returning CKeyMetadata, CPubKey, CKeyMetadata, CMasterKey, CWalletTx values so CTxDestination hardly seems like a bridge too far.\r\n\r\n> Concept NACK. This completely breaks down the layering/abstraction here... \r\n\r\nLet me know specifically what's broken. This PR gets rid of complexity and code and should make it safer and easier to make changes extending the database format in the future.",
      "created_at" : "2020-04-12T21:12:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18608#issuecomment-612676590",
      "id" : 612676590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18608",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMjY3NjU5MA==",
      "updated_at" : "2020-04-12T21:12:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612676590",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
