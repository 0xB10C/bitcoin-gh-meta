[
   {
      "author_association" : "MEMBER",
      "body" : "What are possible/expected use cases?",
      "created_at" : "2020-04-17T20:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-615439416",
      "id" : 615439416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQzOTQxNg==",
      "updated_at" : "2020-04-17T20:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615439416",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-04-17T20:09:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-615442110",
      "id" : 615442110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ0MjExMA==",
      "updated_at" : "2020-04-17T20:09:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615442110",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18809 (rpc: Do not advertise dumptxoutset as a way to flush the chainstate by MarcoFalke)\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n* #17623 (rpc: add extensive file checks for dumptxoutset and dumpwallet by brakmic)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-17T22:57:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-615498646",
      "id" : 615498646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ5ODY0Ng==",
      "updated_at" : "2020-04-30T01:53:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615498646",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@hebasto the most common use case will be for users to easily study the whole UTXO set in only a few minutes.\r\n\r\nWith this PR it should be really easy to dump any format you want via the `format` parameter (type of data, number of occurrences and order are all respected).\r\nAlso, just adding one element to the `ascii_types` vector allows you to dump any new type of ASCII data. \r\n\r\nFor example, you can now trivially plot a graph of when current UTXOs were created (took 3mn30 on my machine): \r\n\r\n```\r\n$ bitcoin-cli dumptxoutset utxos.dat '[\"height\",\"value\"]' false ' '\r\n$ awk '{if($1 in map) { map[$1] += $2; } else { map[$1] = $2 }} END { for(height in map) { print height, map[height]; }}' utxos.dat | sort -n > plot.dat\r\n$ gnuplot -e \"plot 'plot.dat' w l; pause -1;\"\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/946757/79625513-92edeb80-8164-11ea-8572-c638179ad158.png)\r\n\r\nAnother example would be to sum the amount of coinbase values in the UTXO set (took 2mn30):\r\n\r\n```\r\n$ bitcoin-cli dumptxoutset utxos.dat '[\"coinbase\",\"value\"]' false ' '\r\n$ fgrep \"1 \" utxos.dat | awk '{sum += $2} END {print sum/100000000, \"btc unspent coinbase\"}'\r\n1.76077e+06 btc unspent coinbase\r\n```\r\n\r\nOr really, just anything the user wants. With some more work from the user, it could also make it easier to track some indicators (such as bootstrapping/syncing [SOPR](https://medium.com/unconfiscatable/introducing-sopr-spent-outputs-to-predict-bitcoin-lows-and-tops-ceb4536b3b9)).\r\n\r\n\r\nAnother example: doing [bitcoin file archaeology](https://git.sr.ht/~pierrenn/barkaelogy). \r\nSince all methods using `scriptPubSig` to etch data on the blockchain spam the UTXO set, you can retrieve a superset of all TXIDs of \"files stored in the blockchain\" via this RPC call.",
      "created_at" : "2020-04-18T02:16:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-615540034",
      "id" : 615540034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTU0MDAzNA==",
      "updated_at" : "2020-04-18T04:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615540034",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/946757?v=4",
         "events_url" : "https://api.github.com/users/pierreN/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pierreN/followers",
         "following_url" : "https://api.github.com/users/pierreN/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pierreN/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pierreN",
         "id" : 946757,
         "login" : "pierreN",
         "node_id" : "MDQ6VXNlcjk0Njc1Nw==",
         "organizations_url" : "https://api.github.com/users/pierreN/orgs",
         "received_events_url" : "https://api.github.com/users/pierreN/received_events",
         "repos_url" : "https://api.github.com/users/pierreN/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pierreN/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pierreN/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pierreN"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-30T14:03:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-621873058",
      "id" : 621873058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTg3MzA1OA==",
      "updated_at" : "2020-04-30T14:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621873058",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "rebased cd20cb8",
      "created_at" : "2020-05-01T05:09:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#issuecomment-622251056",
      "id" : 622251056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18689",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjI1MTA1Ng==",
      "updated_at" : "2020-05-01T05:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622251056",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/946757?v=4",
         "events_url" : "https://api.github.com/users/pierreN/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pierreN/followers",
         "following_url" : "https://api.github.com/users/pierreN/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pierreN/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pierreN",
         "id" : 946757,
         "login" : "pierreN",
         "node_id" : "MDQ6VXNlcjk0Njc1Nw==",
         "organizations_url" : "https://api.github.com/users/pierreN/orgs",
         "received_events_url" : "https://api.github.com/users/pierreN/received_events",
         "repos_url" : "https://api.github.com/users/pierreN/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pierreN/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pierreN/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pierreN"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18689#discussion_r437784060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18689"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437784060"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`auto` doesn't really work in this context...\r\n\r\n```\r\nwarning: comparison of integer expressions of different signedness: âintâ and âsize_tâ {aka âlong unsigned intâ} [-Wsign-compare]\r\n```",
      "commit_id" : "cd20cb886deb0ef91ab89c66bbfb511e89eb77ee",
      "created_at" : "2020-06-09T23:51:06Z",
      "diff_hunk" : "@@ -2260,10 +2281,33 @@ UniValue dumptxoutset(const JSONRPCRequest& request)\n                 }\n         },\n         RPCExamples{\n-            HelpExampleCli(\"dumptxoutset\", \"utxo.dat\")\n+            HelpExampleCli(\"dumptxoutset\", \"utxo.dat\") +\n+            HelpExampleCli(\"dumptxoutset\", \"utxo.dat '[]'\") +\n+            HelpExampleCli(\"dumptxoutset\", \"utxo.dat '[\\\"txid\\\", \\\"vout\\\"]' false ':'\")\n         }\n     }.Check(request);\n \n+    // handle optional ASCII parameters\n+    const bool is_compact = request.params[1].isNull();\n+    const bool show_header = request.params[2].isNull() || request.params[2].get_bool();\n+    const std::string separator = request.params[3].isNull() ? \",\" : request.params[3].get_str();\n+    std::vector<std::pair<std::string, cb_t>> requested;\n+    if (!is_compact) {\n+        const auto& arr = request.params[1].get_array();\n+        const std::unordered_map<std::string, cb_t> ascii_map(std::begin(ascii_types), std::end(ascii_types));\n+        for(auto i = 0; i < arr.size(); ++i) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18689#discussion_r437784060",
      "id" : 437784060,
      "line" : 2298,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NDA2MA==",
      "original_commit_id" : "cd20cb886deb0ef91ab89c66bbfb511e89eb77ee",
      "original_line" : 2298,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 64,
      "pull_request_review_id" : 427620998,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18689",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-09T23:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437784060",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
