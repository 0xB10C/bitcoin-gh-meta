[
   {
      "body" : "Concept ACK. The six-byte hash is a good idea; I thought of replacing it with simply the `fd6b:88c0:8724::<seqnr>` of the DNS seed, but it needs to be compatible over time and those seeds could be added and removed so this solution is better.",
      "created_at" : "2017-05-24T10:19:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-303681810",
      "id" : 303681810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-05-24T10:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303681810",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK.",
      "created_at" : "2017-05-25T08:54:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-303959106",
      "id" : 303959106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-05-25T08:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303959106",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "It would be kinda nice if we blocked DNS names from resolving to internal IPs, since that should never happen, and unlike local/tor/whatever, there is no reason you'd ever want to -connect to them.",
      "created_at" : "2017-06-01T20:53:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-305617170",
      "id" : 305617170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-01T20:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305617170",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Agreed in principle. Though they do fail the IsValid test, so we'd never actually attempt a connection to them: https://github.com/bitcoin/bitcoin/pull/10446/files#diff-b64569708508232923e5fe3059396334R216\r\n\r\nI can add explicit filtering to resolving if that would make you more comfortable?",
      "created_at" : "2017-06-02T20:24:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-305900138",
      "id" : 305900138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-02T20:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305900138",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Concept ACK, but can you adapt the touched code to the style guide?\r\n\r\nAgree with @TheBlueMatt, but maybe we should also do that for onion addresses?",
      "created_at" : "2017-06-03T18:37:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-305993512",
      "id" : 305993512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-03T18:37:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305993512",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa well dns seeds and other dns queries are allowed to return bitcoin-onion-encoded results (I've done this as -addnode/-connect arguments in the past).\r\n\r\n@theuni Yea, I would feel a bit more comfortable doing that, thanks :).",
      "created_at" : "2017-06-07T15:19:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-306828380",
      "id" : 306828380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-07T15:19:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306828380",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Since there have been no (ut)ACKs and there were several things to change, I went ahead and made changes, squashed, and rebased. I believe this is good to go now.\r\n\r\nchanges since the first round:\r\n- rebased/squashed\r\n- adapted code style\r\n- use sha256 rather than sha256d for name mapping, for easier sanity checking\r\n- filter out internal addresses from the resolver\r\n- minor fixes",
      "created_at" : "2017-06-13T22:33:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-308267995",
      "id" : 308267995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-13T22:33:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308267995",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@sipa by filtering onion addresses the same way that internal ones are done here, we'd prevent dns seeds from handing out onion addresses. I'm not sure if the current seeders include those (I think they do), but I see no reason to filter them either way.",
      "created_at" : "2017-06-13T22:40:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#issuecomment-308269245",
      "id" : 308269245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10446",
      "updated_at" : "2017-06-13T22:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308269245",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10446#discussion_r121820993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10446"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121820993"
         }
      },
      "body" : "VERY BIG ERROR WOW: 'thir'",
      "commit_id" : "6cdc488e3604267b1e115da5c50ffb970cd30084",
      "created_at" : "2017-06-13T23:21:00Z",
      "diff_hunk" : "@@ -45,6 +46,12 @@ class CNetAddr\n          */\n         void SetRaw(Network network, const uint8_t *data);\n \n+        /**\n+          * Transform an arbitrary string into a non-routable ipv6 address.\n+          * Useful for mapping resolved addresses back to thir source.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#discussion_r121820993",
      "id" : 121820993,
      "original_commit_id" : "c992103559b852d1f46eceeb34c51ef2f097aa59",
      "original_position" : 14,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 43880680,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10446",
      "updated_at" : "2017-06-14T22:05:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/121820993",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10446#discussion_r122077180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10446"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122077180"
         }
      },
      "body" : "What, no responsible disclosure? Jeez!",
      "commit_id" : "6cdc488e3604267b1e115da5c50ffb970cd30084",
      "created_at" : "2017-06-14T22:08:06Z",
      "diff_hunk" : "@@ -45,6 +46,12 @@ class CNetAddr\n          */\n         void SetRaw(Network network, const uint8_t *data);\n \n+        /**\n+          * Transform an arbitrary string into a non-routable ipv6 address.\n+          * Useful for mapping resolved addresses back to thir source.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10446#discussion_r122077180",
      "id" : 122077180,
      "original_commit_id" : "c992103559b852d1f46eceeb34c51ef2f097aa59",
      "original_position" : 14,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 44161813,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10446",
      "updated_at" : "2017-06-14T22:08:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/122077180",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
