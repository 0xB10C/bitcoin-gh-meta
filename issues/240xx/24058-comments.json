[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nThis should fix https://github.com/bitcoin/bitcoin/issues/10542",
      "created_at" : "2022-01-13T13:04:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012118062",
      "id" : 1012118062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848U7Iu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012118062/reactions"
      },
      "updated_at" : "2022-01-13T13:12:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012118062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kallewoof do you know if any other wallet implemented BIP-322 yet, so we can compare the implementation?\r\n\r\nThis is really a good time to add test vectors to the BIP (and this PR).",
      "created_at" : "2022-01-13T13:39:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012145869",
      "id" : 1012145869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848VB7N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012145869/reactions"
      },
      "updated_at" : "2022-01-13T14:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012145869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783971038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Although `SIGHASH_DEFAULT` implies `SIGHASH_ALL`, AFAIK using `SIGHASH_ALL` is still possible for users who wish to waste 1 byte. So I think you need `m_require_sighash_all && nHashType != SIGHASH_ALL` here too.",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T13:46:38Z",
      "diff_hunk" : "@@ -1707,6 +1711,9 @@ bool GenericTransactionSignatureChecker<T>::CheckSchnorrSignature(Span<const uns\n \n     uint8_t hashtype = SIGHASH_DEFAULT;\n     if (sig.size() == 65) {\n+        if (m_require_sighash_all) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783971038",
      "id" : 783971038,
      "line" : 1714,
      "node_id" : "PRRC_kwDOABII584uunLe",
      "original_commit_id" : "ad0002c91bb683c5d484ac03e16aaa682bc5a3e2",
      "original_line" : 1714,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 15,
      "pull_request_review_id" : 851731536,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T13:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783982176"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This message implies the user can do something about it. Suggest instead: \"BIP-322 Proof of Funds is not supported\"",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T13:59:12Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783982176",
      "id" : 783982176,
      "line" : 352,
      "node_id" : "PRRC_kwDOABII584uup5g",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 352,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 5,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783983431"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not just throw in these other cases?",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T14:00:36Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?\n+    case MessageVerificationResult::INCONCLUSIVE:\n+        return false; // TODO: switch to a string based result? mix bool and strings?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783983431",
      "id" : 783983431,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584uuqNH",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 354,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 7,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783985638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm unsure, but perhaps we should make a fresh `enum BIP322VerificationResult`?",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T14:03:16Z",
      "diff_hunk" : "@@ -36,7 +36,23 @@ enum class MessageVerificationResult {\n     ERR_NOT_SIGNED,\n \n     //! The message verification was successful.\n-    OK\n+    OK,\n+\n+    //\n+    // BIP-322 extensions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783985638",
      "id" : 783985638,
      "line" : 53,
      "node_id" : "PRRC_kwDOABII584uuqvm",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 42,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/message.h",
      "position" : 8,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22793](https://github.com/bitcoin/bitcoin/pull/22793) (Simplify BaseSignatureChecker virtual functions and GenericTransactionSignatureChecker constructors by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-01-13T14:58:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012214536",
      "id" : 1012214536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848VSsI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012214536/reactions"
      },
      "updated_at" : "2022-01-28T18:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012214536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @kallewoof do you know if any other wallet implemented BIP-322 yet, so we can compare the implementation?\r\n> \r\n> This is really a good time to add test vectors to the BIP (and this PR).\r\n\r\nI have an implementation here: https://github.com/bitcoin-s/bitcoin-s/pull/3823",
      "created_at" : "2022-01-13T18:38:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012405794",
      "id" : 1012405794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848WBYi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012405794/reactions"
      },
      "updated_at" : "2022-01-13T18:38:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012405794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784367872"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784367872"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Isn't that a malleability? Anyway, gotcha.",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T22:18:53Z",
      "diff_hunk" : "@@ -1707,6 +1711,9 @@ bool GenericTransactionSignatureChecker<T>::CheckSchnorrSignature(Span<const uns\n \n     uint8_t hashtype = SIGHASH_DEFAULT;\n     if (sig.size() == 65) {\n+        if (m_require_sighash_all) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784367872",
      "id" : 784367872,
      "in_reply_to_id" : 783971038,
      "line" : 1714,
      "node_id" : "PRRC_kwDOABII584uwIEA",
      "original_commit_id" : "ad0002c91bb683c5d484ac03e16aaa682bc5a3e2",
      "original_line" : 1714,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 15,
      "pull_request_review_id" : 852302598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784367872/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T22:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784367872",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784369323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784369323"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sounds good. The intention is to actually add this functionality, but I think it should be its own PR.",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T22:21:45Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784369323",
      "id" : 784369323,
      "in_reply_to_id" : 783982176,
      "line" : 352,
      "node_id" : "PRRC_kwDOABII584uwIar",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 352,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 5,
      "pull_request_review_id" : 852304631,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784369323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T22:21:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784369323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784370137"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784370137"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Because these aren't errors? But yeah, that would be one way to return a message. I think I'd prefer to expand the returned value from simple bool to true|false|\"inconclusive\", but not sure that would be appreciated.",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T22:23:14Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?\n+    case MessageVerificationResult::INCONCLUSIVE:\n+        return false; // TODO: switch to a string based result? mix bool and strings?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784370137",
      "id" : 784370137,
      "in_reply_to_id" : 783983431,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584uwInZ",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 354,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 7,
      "pull_request_review_id" : 852305720,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784370137/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T22:23:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784370137",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784393378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784393378"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oftentimes you won't know which type it is until you finish verifying, so unifying the two types seems sensible to me.",
      "commit_id" : "8eb5031829390b1f746f54d08d28e51d507f3077",
      "created_at" : "2022-01-13T23:10:12Z",
      "diff_hunk" : "@@ -36,7 +36,23 @@ enum class MessageVerificationResult {\n     ERR_NOT_SIGNED,\n \n     //! The message verification was successful.\n-    OK\n+    OK,\n+\n+    //\n+    // BIP-322 extensions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784393378",
      "id" : 784393378,
      "in_reply_to_id" : 783985638,
      "line" : 53,
      "node_id" : "PRRC_kwDOABII584uwOSi",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 53,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/message.h",
      "position" : 26,
      "pull_request_review_id" : 852337021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784393378/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T23:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784393378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I will make test vectors very soon. Let's compare notes at that point @benthecarman.",
      "created_at" : "2022-01-13T23:10:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012602458",
      "id" : 1012602458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848WxZa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012602458/reactions"
      },
      "updated_at" : "2022-01-13T23:10:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012602458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I will make test vectors very soon. Let's compare notes at that point @benthecarman.\n\nSounds good, I made some in pr if you want to try those ",
      "created_at" : "2022-01-13T23:14:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012604302",
      "id" : 1012604302,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848Wx2O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012604302/reactions"
      },
      "updated_at" : "2022-01-13T23:14:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012604302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yep. I will try them, once I make my own. I don't want to adjust the code to fit your test vectors, I'd rather both implementations independently passing both sets.",
      "created_at" : "2022-01-13T23:15:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012604804",
      "id" : 1012604804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848Wx-E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012604804/reactions"
      },
      "updated_at" : "2022-01-13T23:15:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012604804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784803179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784803179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Some RPCs return `false` as the result and an error message field. Others just throw with an error code and message. It's an error in the vague sense that the RPC failed to verify what it was asked to verify.",
      "commit_id" : "93a9c688541eb4a241156ac35d81ac735c1dd437",
      "created_at" : "2022-01-14T12:25:25Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?\n+    case MessageVerificationResult::INCONCLUSIVE:\n+        return false; // TODO: switch to a string based result? mix bool and strings?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r784803179",
      "id" : 784803179,
      "in_reply_to_id" : 783983431,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584uxyVr",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 354,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 7,
      "pull_request_review_id" : 852859400,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784803179/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-14T12:25:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/784803179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r785221182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785221182"
         }
      },
      "author_association" : "MEMBER",
      "body" : "OK, but what about \"OK_TIMELOCKED\"?",
      "commit_id" : "93a9c688541eb4a241156ac35d81ac735c1dd437",
      "created_at" : "2022-01-14T23:09:17Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?\n+    case MessageVerificationResult::INCONCLUSIVE:\n+        return false; // TODO: switch to a string based result? mix bool and strings?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r785221182",
      "id" : 785221182,
      "in_reply_to_id" : 783983431,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584uzYY-",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 354,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 7,
      "pull_request_review_id" : 853453250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785221182/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-14T23:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785221182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would like to see BIP 322 address the distinction between the current \"signer receives fund with the address\" and the long-desired \"signer sent a prior transaction\" even if not supported by this PR.",
      "created_at" : "2022-01-15T22:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1013761616",
      "id" : 1013761616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848bMZQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013761616/reactions"
      },
      "updated_at" : "2022-01-15T22:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013761616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr I'm not sure if you're suggesting a BIP change or a code feature. If the latter, I think the ideal path forward is for you to open a pull request follow-up to this one (maybe post-merge) to do what you are requesting. If former, open a PR to the BIP?",
      "created_at" : "2022-01-16T12:10:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1013864335",
      "id" : 1013864335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848bleP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013864335/reactions"
      },
      "updated_at" : "2022-01-16T12:10:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013864335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is now a WIP with test vectors in https://github.com/bitcoin/bips/pull/1279 which needs to be filled in (possibly with @benthecarman's cases).",
      "created_at" : "2022-01-26T10:20:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1022060067",
      "id" : 1022060067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII584862Yj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022060067/reactions"
      },
      "updated_at" : "2022-01-26T10:20:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022060067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r795181706"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795181706"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note that `HASHER_BIP322` and some other identifiers are not available yet at this commit, i.e. compiling b23186d9f816aefe2fcf95e6f77d941c65e9c71c currently fails:\r\n```\r\n...\r\n  CXX      wallet/libbitcoin_wallet_tool_a-wallettool.o\r\nutil/message.cpp:105:41: error: use of undeclared identifier 'HASHER_BIP322'\r\n    uint256 message_hash = (CHashWriter(HASHER_BIP322) << message).GetSHA256();\r\n                                        ^\r\nutil/message.cpp:116:22: error: use of undeclared identifier 'DecodeTx'\r\n    if (signature && DecodeTx(to_sign, *signature, /* try_no_witness */ true, /* try_witness */ true)) {\r\n                     ^\r\nutil/message.cpp:120:49: error: no member named 'ERR_POF' in 'MessageVerificationResult'\r\n            result = MessageVerificationResult::ERR_POF;\r\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nutil/message.cpp:128:49: error: no member named 'ERR_INVALID' in 'MessageVerificationResult'\r\n            result = MessageVerificationResult::ERR_INVALID;\r\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\nutil/message.cpp:141:57: error: no member named 'ERR_INVALID' in 'MessageVerificationResult'\r\n            result = MessageVerificationResult::ERR_INVALID;\r\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^\r\n5 errors generated.\r\n...\r\n```",
      "commit_id" : "93a9c688541eb4a241156ac35d81ac735c1dd437",
      "created_at" : "2022-01-30T13:24:08Z",
      "diff_hunk" : "@@ -90,3 +90,65 @@ std::string SigningResultString(const SigningResult res)\n     }\n     assert(false);\n }\n+\n+std::optional<BIP322Txs> BIP322Txs::Create(const CTxDestination& destination, const std::string& message, MessageVerificationResult& result, const std::vector<unsigned char>* signature)\n+{\n+    // attempt to get script pub key for destination\n+    CScript message_challenge = GetScriptForDestination(destination);\n+    if (message_challenge.size() == 0) {\n+        // NoDestination; failure\n+        // (use legacy result)\n+        return std::nullopt;\n+    }\n+\n+    // prepare message hash\n+    uint256 message_hash = (CHashWriter(HASHER_BIP322) << message).GetSHA256();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r795181706",
      "id" : 795181706,
      "line" : 166,
      "node_id" : "PRRC_kwDOABII584vZYKK",
      "original_commit_id" : "b23186d9f816aefe2fcf95e6f77d941c65e9c71c",
      "original_line" : 105,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/util/message.cpp",
      "position" : 16,
      "pull_request_review_id" : 867105720,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795181706/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-30T13:27:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795181706",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@theStack Thanks for the review. You're right, I meant SIMPLE not SINGLE. Fixed.\r\n\r\nI did some clean-up and I think this also fixes the issues with HASHER_BIP322 being used before it is added.",
      "created_at" : "2022-01-31T04:23:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1025366737",
      "id" : 1025366737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5849HdrR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025366737/reactions"
      },
      "updated_at" : "2022-01-31T04:23:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025366737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   }
]
