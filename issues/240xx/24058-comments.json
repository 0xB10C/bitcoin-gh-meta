[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nThis should fix https://github.com/bitcoin/bitcoin/issues/10542",
      "created_at" : "2022-01-13T13:04:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012118062",
      "id" : 1012118062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848U7Iu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012118062/reactions"
      },
      "updated_at" : "2022-01-13T13:12:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012118062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kallewoof do you know if any other wallet implemented BIP-322 yet, so we can compare the implementation?\r\n\r\nThis is really a good time to add test vectors to the BIP (and this PR).",
      "created_at" : "2022-01-13T13:39:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012145869",
      "id" : 1012145869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848VB7N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012145869/reactions"
      },
      "updated_at" : "2022-01-13T14:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012145869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783971038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Although `SIGHASH_DEFAULT` implies `SIGHASH_ALL`, AFAIK using `SIGHASH_ALL` is still possible for users who wish to waste 1 byte. So I think you need `m_require_sighash_all && nHashType != SIGHASH_ALL` here too.",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T13:46:38Z",
      "diff_hunk" : "@@ -1707,6 +1711,9 @@ bool GenericTransactionSignatureChecker<T>::CheckSchnorrSignature(Span<const uns\n \n     uint8_t hashtype = SIGHASH_DEFAULT;\n     if (sig.size() == 65) {\n+        if (m_require_sighash_all) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783971038",
      "id" : 783971038,
      "line" : 1714,
      "node_id" : "PRRC_kwDOABII584uunLe",
      "original_commit_id" : "ad0002c91bb683c5d484ac03e16aaa682bc5a3e2",
      "original_line" : 1714,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/script/interpreter.cpp",
      "position" : 15,
      "pull_request_review_id" : 851731536,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T13:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783971038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783982176"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This message implies the user can do something about it. Suggest instead: \"BIP-322 Proof of Funds is not supported\"",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T13:59:12Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783982176",
      "id" : 783982176,
      "line" : 352,
      "node_id" : "PRRC_kwDOABII584uup5g",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 352,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 5,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783982176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783983431"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not just throw in these other cases?",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T14:00:36Z",
      "diff_hunk" : "@@ -348,9 +348,16 @@ static RPCHelpMan verifymessage()\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n     case MessageVerificationResult::ERR_MALFORMED_SIGNATURE:\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Malformed base64 encoding\");\n+    case MessageVerificationResult::ERR_POF:\n+        throw JSONRPCError(RPC_TYPE_ERROR, \"Proof of funds require UTXO set access to verify\"); // TODO: get access to UTXO set / mempool to handle this, then remove this error code?\n+    case MessageVerificationResult::INCONCLUSIVE:\n+        return false; // TODO: switch to a string based result? mix bool and strings?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783983431",
      "id" : 783983431,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584uuqNH",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 354,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 7,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783983431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783985638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm unsure, but perhaps we should make a fresh `enum BIP322VerificationResult`?",
      "commit_id" : "c1a5cf0033210f69af98a653895af801d452f041",
      "created_at" : "2022-01-13T14:03:16Z",
      "diff_hunk" : "@@ -36,7 +36,23 @@ enum class MessageVerificationResult {\n     ERR_NOT_SIGNED,\n \n     //! The message verification was successful.\n-    OK\n+    OK,\n+\n+    //\n+    // BIP-322 extensions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#discussion_r783985638",
      "id" : 783985638,
      "line" : 53,
      "node_id" : "PRRC_kwDOABII584uuqvm",
      "original_commit_id" : "aed56aa486b6258aa03fd8c9a6154bb9bd7db973",
      "original_line" : 42,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/message.h",
      "position" : 8,
      "pull_request_review_id" : 851747231,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24058",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783985638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22793](https://github.com/bitcoin/bitcoin/pull/22793) (Simplify BaseSignatureChecker virtual functions and GenericTransactionSignatureChecker constructors by achow101)\n* [#21702](https://github.com/bitcoin/bitcoin/pull/21702) (Implement BIP-119 Validation (CheckTemplateVerify) by JeremyRubin)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-01-13T14:58:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012214536",
      "id" : 1012214536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848VSsI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012214536/reactions"
      },
      "updated_at" : "2022-01-13T14:58:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012214536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @kallewoof do you know if any other wallet implemented BIP-322 yet, so we can compare the implementation?\r\n> \r\n> This is really a good time to add test vectors to the BIP (and this PR).\r\n\r\nI have an implementation here: https://github.com/bitcoin-s/bitcoin-s/pull/3823",
      "created_at" : "2022-01-13T18:38:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24058#issuecomment-1012405794",
      "id" : 1012405794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24058",
      "node_id" : "IC_kwDOABII5848WBYi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012405794/reactions"
      },
      "updated_at" : "2022-01-13T18:38:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1012405794",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   }
]
