[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Something like this was previously proposed in #21401. Deployments have been left uninitialised in the past, see #20157 and also [taproot activation in elements](https://github.com/ElementsProject/elements/pull/1044#pullrequestreview-757081000) so this seems worth having the compiler check for similar mistakes. I think it ends up pretty readable too.",
      "created_at" : "2022-01-11T06:02:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#issuecomment-1009625159",
      "id" : 1009625159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24032",
      "node_id" : "IC_kwDOABII5848LahH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009625159/reactions"
      },
      "updated_at" : "2022-01-11T06:02:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009625159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23829](https://github.com/bitcoin/bitcoin/pull/23829) (refactor: use braced init for integer literals instead of c style casts by PastaPastaPasta)\n* [#23810](https://github.com/bitcoin/bitcoin/pull/23810) (refactor: destroy all C-style casts; use modern C++ casts, enforce via `-Wold-style-cast` by PastaPastaPasta)\n* [#23536](https://github.com/bitcoin/bitcoin/pull/23536) (Enforce Taproot script flags whenever WITNESS is set by MarcoFalke)\n* [#23508](https://github.com/bitcoin/bitcoin/pull/23508) (Add getdeploymentinfo RPC by ajtowns)\n* [#22953](https://github.com/bitcoin/bitcoin/pull/22953) (refactor: introduce single-separator split helper (boost::split replacement) by theStack)\n* [#21702](https://github.com/bitcoin/bitcoin/pull/21702) (Implement BIP-119 Validation (CheckTemplateVerify) by JeremyRubin)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-01-11T06:19:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#issuecomment-1009633346",
      "id" : 1009633346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24032",
      "node_id" : "IC_kwDOABII5848LchC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009633346/reactions"
      },
      "updated_at" : "2022-01-11T06:19:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1009633346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r781845456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781845456"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\nC:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\src\\deploymentinfo.cpp(9,109): error C2220: the following warning is treated as an error [C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\build_msvc\\libbitcoin_common\\libbitcoin_common.vcxproj]\r\nC:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\src\\deploymentinfo.cpp(9,109): warning C4099: 'std::array<VBDeploymentInfo,2>': type name first seen using 'class' now seen using 'struct' [C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\build_msvc\\libbitcoin_common\\libbitcoin_common.vcxproj]\r\nC:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\src\\deploymentinfo.h(20): message : see declaration of 'std::array<VBDeploymentInfo,2>' [C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\build_msvc\\libbitcoin_common\\libbitcoin_common.vcxproj]",
      "commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "created_at" : "2022-01-11T08:01:46Z",
      "diff_hunk" : "@@ -6,7 +6,7 @@\n \n #include <consensus/params.h>\n \n-const struct VBDeploymentInfo VersionBitsDeploymentInfo[Consensus::MAX_VERSION_BITS_DEPLOYMENTS] = {\n+const struct std::array<VBDeploymentInfo, Consensus::MAX_VERSION_BITS_DEPLOYMENTS> VersionBitsDeploymentInfo{{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r781845456",
      "id" : 781845456,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584umgPQ",
      "original_commit_id" : "02bda4e42c0c10fe854197dc0eb28a80ad42f751",
      "original_line" : 9,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/deploymentinfo.cpp",
      "position" : null,
      "pull_request_review_id" : 848792956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781845456/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T08:01:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781845456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r781901594"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781901594"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Huh, I can't get clang to duplicate that error, even with `-Wmismatched-tags`. Anyway, fixed.",
      "commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "created_at" : "2022-01-11T08:50:16Z",
      "diff_hunk" : "@@ -6,7 +6,7 @@\n \n #include <consensus/params.h>\n \n-const struct VBDeploymentInfo VersionBitsDeploymentInfo[Consensus::MAX_VERSION_BITS_DEPLOYMENTS] = {\n+const struct std::array<VBDeploymentInfo, Consensus::MAX_VERSION_BITS_DEPLOYMENTS> VersionBitsDeploymentInfo{{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r781901594",
      "id" : 781901594,
      "in_reply_to_id" : 781845456,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584umt8a",
      "original_commit_id" : "02bda4e42c0c10fe854197dc0eb28a80ad42f751",
      "original_line" : 9,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/deploymentinfo.cpp",
      "position" : null,
      "pull_request_review_id" : 848851531,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781901594/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T08:50:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/781901594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783609218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783609218"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Typo: `constrexpr` has too many r's.",
      "commit_id" : "08aa93bf5fb2fce682512db8d800229f9340b11b",
      "created_at" : "2022-01-13T03:44:32Z",
      "diff_hunk" : "@@ -0,0 +1,107 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SYNTAXHELP_H\n+#define BITCOIN_UTIL_SYNTAXHELP_H\n+\n+/* Syntactic sugar / helpers\n+ * Perhaps can be replaced by C++20 designated initializers.\n+ */\n+\n+namespace util {\n+\n+/* Fakes named arguments in C++.\n+ *\n+ * If you have:\n+ *\n+ *    bool _f(int x, int y) { ... }\n+ *\n+ * Then writing:\n+ *\n+ *    static constrexpr NamedArgument<int, struct x_arg> _x;\n+ *    static constrexpr NamedArgument<int, struct y_arg> _y;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783609218",
      "id" : 783609218,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584utO2C",
      "original_commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/util/syntaxhelp.h",
      "position" : null,
      "pull_request_review_id" : 851222304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783609218/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T04:02:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783609218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783612010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783612010"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Constructors should be `explicit` otherwise you can call as `f(3, 4)` instead of `f(_x=3, _y=4)`.",
      "commit_id" : "08aa93bf5fb2fce682512db8d800229f9340b11b",
      "created_at" : "2022-01-13T03:53:27Z",
      "diff_hunk" : "@@ -0,0 +1,107 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SYNTAXHELP_H\n+#define BITCOIN_UTIL_SYNTAXHELP_H\n+\n+/* Syntactic sugar / helpers\n+ * Perhaps can be replaced by C++20 designated initializers.\n+ */\n+\n+namespace util {\n+\n+/* Fakes named arguments in C++.\n+ *\n+ * If you have:\n+ *\n+ *    bool _f(int x, int y) { ... }\n+ *\n+ * Then writing:\n+ *\n+ *    static constrexpr NamedArgument<int, struct x_arg> _x;\n+ *    static constrexpr NamedArgument<int, struct y_arg> _y;\n+ *    bool f(decltype(_x)::Arg x, decltype(_y)::Arg y) { return _f(x.v, y.v); }\n+ *\n+ * allows you to invoke f(_x=3, _y=4) instead of _f(3, 4) and\n+ * will give a compile time error if you reverse the labels\n+ * (ie, f(_y=3, _x=4)).\n+ */\n+\n+template<typename T, typename TAG>\n+struct NamedArgument\n+{\n+    struct Arg {\n+        using Tag = TAG;\n+        const T v;\n+        Arg(T&& v) : v{std::move(v)} { }\n+        Arg(const T& v) : v{v} { }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783612010",
      "id" : 783612010,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584utPhq",
      "original_commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "original_line" : 38,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "src/util/syntaxhelp.h",
      "position" : null,
      "pull_request_review_id" : 851222304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783612010/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T04:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783612010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783613365"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783613365"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this potentially copies its arguments unnecessarily and would be better as `ArrayInitElement(I&&... i) : t{std::forward<I>(i)...} { }`. Also, no need for a semicolon.",
      "commit_id" : "08aa93bf5fb2fce682512db8d800229f9340b11b",
      "created_at" : "2022-01-13T03:58:13Z",
      "diff_hunk" : "@@ -0,0 +1,107 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SYNTAXHELP_H\n+#define BITCOIN_UTIL_SYNTAXHELP_H\n+\n+/* Syntactic sugar / helpers\n+ * Perhaps can be replaced by C++20 designated initializers.\n+ */\n+\n+namespace util {\n+\n+/* Fakes named arguments in C++.\n+ *\n+ * If you have:\n+ *\n+ *    bool _f(int x, int y) { ... }\n+ *\n+ * Then writing:\n+ *\n+ *    static constrexpr NamedArgument<int, struct x_arg> _x;\n+ *    static constrexpr NamedArgument<int, struct y_arg> _y;\n+ *    bool f(decltype(_x)::Arg x, decltype(_y)::Arg y) { return _f(x.v, y.v); }\n+ *\n+ * allows you to invoke f(_x=3, _y=4) instead of _f(3, 4) and\n+ * will give a compile time error if you reverse the labels\n+ * (ie, f(_y=3, _x=4)).\n+ */\n+\n+template<typename T, typename TAG>\n+struct NamedArgument\n+{\n+    struct Arg {\n+        using Tag = TAG;\n+        const T v;\n+        Arg(T&& v) : v{std::move(v)} { }\n+        Arg(const T& v) : v{v} { }\n+    };\n+\n+    Arg operator=(T&& v) const\n+    {\n+        return Arg(std::move(v));\n+    }\n+    Arg operator=(const T& v) const\n+    {\n+        return Arg(v);\n+    }\n+};\n+\n+/* Helper for std::array initialization.\n+ *\n+ * Allows for specifying the expected index of each initializer to make\n+ * review easier, and will give a compile-time error if any initializers\n+ * are missing, extraneous or out of order.\n+ */\n+\n+template<size_t O, typename T>\n+struct ArrayInitElement\n+{\n+    static constexpr size_t offset = O;\n+    const T t;\n+\n+    template<typename... I>\n+    ArrayInitElement(I... i) : t{i...} { };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783613365",
      "id" : 783613365,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584utP21",
      "original_commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "original_line" : 65,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/util/syntaxhelp.h",
      "position" : null,
      "pull_request_review_id" : 851222304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783613365/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T04:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783613365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783614076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783614076"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "FYI: this `if constexpr` is only here to avoid redundant warnings that `std::get<N>` and `step<N+1>` would generate.",
      "commit_id" : "08aa93bf5fb2fce682512db8d800229f9340b11b",
      "created_at" : "2022-01-13T04:00:41Z",
      "diff_hunk" : "@@ -0,0 +1,107 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_SYNTAXHELP_H\n+#define BITCOIN_UTIL_SYNTAXHELP_H\n+\n+/* Syntactic sugar / helpers\n+ * Perhaps can be replaced by C++20 designated initializers.\n+ */\n+\n+namespace util {\n+\n+/* Fakes named arguments in C++.\n+ *\n+ * If you have:\n+ *\n+ *    bool _f(int x, int y) { ... }\n+ *\n+ * Then writing:\n+ *\n+ *    static constrexpr NamedArgument<int, struct x_arg> _x;\n+ *    static constrexpr NamedArgument<int, struct y_arg> _y;\n+ *    bool f(decltype(_x)::Arg x, decltype(_y)::Arg y) { return _f(x.v, y.v); }\n+ *\n+ * allows you to invoke f(_x=3, _y=4) instead of _f(3, 4) and\n+ * will give a compile time error if you reverse the labels\n+ * (ie, f(_y=3, _x=4)).\n+ */\n+\n+template<typename T, typename TAG>\n+struct NamedArgument\n+{\n+    struct Arg {\n+        using Tag = TAG;\n+        const T v;\n+        Arg(T&& v) : v{std::move(v)} { }\n+        Arg(const T& v) : v{v} { }\n+    };\n+\n+    Arg operator=(T&& v) const\n+    {\n+        return Arg(std::move(v));\n+    }\n+    Arg operator=(const T& v) const\n+    {\n+        return Arg(v);\n+    }\n+};\n+\n+/* Helper for std::array initialization.\n+ *\n+ * Allows for specifying the expected index of each initializer to make\n+ * review easier, and will give a compile-time error if any initializers\n+ * are missing, extraneous or out of order.\n+ */\n+\n+template<size_t O, typename T>\n+struct ArrayInitElement\n+{\n+    static constexpr size_t offset = O;\n+    const T t;\n+\n+    template<typename... I>\n+    ArrayInitElement(I... i) : t{i...} { };\n+};\n+\n+template<typename T, size_t N>\n+class ArrayInitHelper\n+{\n+private:\n+    using Arr = std::array<T, N>;\n+\n+    template<size_t E>\n+    static inline void step(Arr& a)\n+    {\n+        static_assert(E == N, \"too few initializers for array\");\n+    }\n+\n+    template<size_t E, size_t O, typename... I>\n+    static inline void step(Arr& a, const ArrayInitElement<O, T>& aie, const I&... i)\n+    {\n+        static_assert(E < N, \"too many initializers for array\");\n+        static_assert(E == O, \"array initializer element is out of order\");\n+        if constexpr (E < N) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24032#discussion_r783614076",
      "id" : 783614076,
      "line" : 88,
      "node_id" : "PRRC_kwDOABII584utQB8",
      "original_commit_id" : "6eaf3afcbeb15cbdc540edaa01d7c93eb059ad48",
      "original_line" : 88,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/util/syntaxhelp.h",
      "position" : 88,
      "pull_request_review_id" : 851222304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24032",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783614076/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-13T04:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/783614076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
