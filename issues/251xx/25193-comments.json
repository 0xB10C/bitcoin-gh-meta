[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "One thing I'm unsure about is that part 1) of this PR  will now make it impossible to go back if we don't know the top block of the locator for some reason - although I don't know how this would be possible because I don't know of a process that would prune stale blocks from the Block Index (except the contrib/linearize script).\r\n\r\nThe old code could recover an index with a no-longer existing best block from that (at the cost of corrupting the coinstatsindex), but I wonder if it would be good to still call `FindForkInGlobalIndex()`, maybe as a fallback, for the other indexes.",
      "created_at" : "2022-05-23T21:28:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135154066",
      "id" : 1135154066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqROS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135154066/reactions"
      },
      "updated_at" : "2022-05-23T21:28:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135154066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25192](https://github.com/bitcoin/bitcoin/pull/25192) (test: add coverage for unknown value to -blockfilterindex by brunoerg)\n* [#22485](https://github.com/bitcoin/bitcoin/pull/22485) (index: doc/log BaseIndex sync behavior with empty datadir by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-05-23T21:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135165802",
      "id" : 1135165802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqUFq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135165802/reactions"
      },
      "updated_at" : "2022-05-25T04:00:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135165802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-05-23T22:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1135206510",
      "id" : 1135206510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DqeBu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135206510/reactions"
      },
      "updated_at" : "2022-05-23T22:42:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135206510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-25T08:21:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#issuecomment-1136941599",
      "id" : 1136941599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
      "node_id" : "IC_kwDOABII585DxFof",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136941599/reactions"
      },
      "updated_at" : "2022-05-25T08:21:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136941599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893905682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: Use first block from locator instead of looking for fork point\" (20bd2219894e53ab39d2b11edf9a7f3c7bda489b)\r\n\r\nMight be better to call `vHave.at(0)` or check explicitly for an empty vector because `vHave.front()` behavior is undefined if the vector is empty.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:00:48Z",
      "diff_hunk" : "@@ -67,7 +67,13 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893905682",
      "id" : 893905682,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII5841R-sS",
      "original_commit_id" : "20bd2219894e53ab39d2b11edf9a7f3c7bda489b",
      "original_line" : 72,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 7,
      "pull_request_review_id" : 1001910809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:00:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893905682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893913934"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"node: add fReindexChainState flag to node\" (8898261ac03945e559c98a0abcb9455942ab4775)\r\n\r\nI understand that what this is doing with the new `fReindexChainState` global is similar to what happens with the existing `fReindex` global, but I think what happens with the `fReindex` global is not ideal. I think it's unnecessarily fragile how the value starts off false, then switches to true, then switches back to false again, and think a one way latch would be better. I think it's bad the the variable doesn't have any straightforward meaning but is some combination \"was reindexing requested?\" and \"is reindexing in progress?\". Also in this commit, `fReindexChainState` is different local variables subtly replaced by a global so you can't tell just looking at a diff whether all the existing `fReindexChainState` references were updated correctly.\r\n\r\nI'd suggest leaving `fReindexChainState` alone, and adding a simpler `atomic_bool g_indexes_ready_to_sync = false` global variable, and setting it to true here, and in the normal code path. I think this would make the diff and the overall initialization sequence simpler and easier to understand.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:11:56Z",
      "diff_hunk" : "@@ -885,6 +886,7 @@ void ThreadImport(ChainstateManager& chainman, std::vector<fs::path> vImportFile\n                 StartShutdown();\n                 return;\n             }\n+            fReindexChainState = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893913934",
      "id" : 893913934,
      "line" : 889,
      "node_id" : "PRRC_kwDOABII5841SAtO",
      "original_commit_id" : "8898261ac03945e559c98a0abcb9455942ab4775",
      "original_line" : 889,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 12,
      "pull_request_review_id" : 1001922704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893913934",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893918940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"index: Enable reindex-chainstate with active indexes\" (1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc)\r\n\r\nThis is pretty opaque and could use a comment. I'm also not sure it is better to be looking at `fPruneMode` here, than just checking whether reindexing is happening, when it sounds like reindexing is the real problem, and checking for `fPruneMode` is just a proxy for avoiding the real source of the problem?\r\n\r\nAlso it is not obvious to me that just because pruning isn't currently enabled doesn't mean pruning wasn't previously enabled and there couldn't be missing blocks worth checking for here.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-09T20:18:59Z",
      "diff_hunk" : "@@ -76,7 +78,7 @@ bool BaseIndex::Init()\n         SetBestBlockIndex(locator_index);\n     }\n     m_synced = m_best_block_index.load() == active_chain.Tip();\n-    if (!m_synced) {\n+    if (!m_synced && fPruneMode) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r893918940",
      "id" : 893918940,
      "line" : 81,
      "node_id" : "PRRC_kwDOABII5841SB7c",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 81,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1001922704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-09T20:21:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/893918940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just leaving as a note, but I think this allows the `if (!active_chain.Contains(block_to_test)) {` case to be hit. Previously `FindForkInGlobalIndex` would return a `CBlockIndex` only in the current chain and so `active_chain.Contains` would always be true.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-22T18:15:22Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952",
      "id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII584142To",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1015681435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T18:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904094952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904408112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904094952\r\n\r\nIn commit \"index: Use first block from locator instead of looking for fork point\" (20bd2219894e53ab39d2b11edf9a7f3c7bda489b)\r\n\r\nYes, this seems to be the case. This is a good indication the original author or this code expecting was expecting to FindForkInGlobalIndex to just return a block based on the locator, not necessarily a block on the current chain. So new code is probably closer to intent of original code.",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:04:19Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904408112",
      "id" : 904408112,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416Cww",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016169995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:04:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904408112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736"
         }
      },
      "author_association" : "NONE",
      "body" : "Thank you your a angle",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:38:06Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421736",
      "id" : 904421736,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416GFo",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016202899,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:38:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89423062?v=4",
         "events_url" : "https://api.github.com/users/Bat3an/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bat3an/followers",
         "following_url" : "https://api.github.com/users/Bat3an/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bat3an/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bat3an",
         "id" : 89423062,
         "login" : "Bat3an",
         "node_id" : "MDQ6VXNlcjg5NDIzMDYy",
         "organizations_url" : "https://api.github.com/users/Bat3an/orgs",
         "received_events_url" : "https://api.github.com/users/Bat3an/received_events",
         "repos_url" : "https://api.github.com/users/Bat3an/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bat3an/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bat3an/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bat3an"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985"
         }
      },
      "author_association" : "NONE",
      "body" : "The both you are gods sent angle's ",
      "commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "created_at" : "2022-06-23T00:38:45Z",
      "diff_hunk" : "@@ -67,10 +69,16 @@ bool BaseIndex::Init()\n     if (locator.IsNull()) {\n         SetBestBlockIndex(nullptr);\n     } else {\n-        SetBestBlockIndex(m_chainstate->FindForkInGlobalIndex(locator));\n+        // Setting the best block to the locator's top block. If it is not part of the\n+        // best chain, we will rewind to the fork point during index sync\n+        const CBlockIndex* locator_index{m_chainstate->m_blockman.LookupBlockIndex(locator.vHave.front())};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25193#discussion_r904421985",
      "id" : 904421985,
      "in_reply_to_id" : 904094952,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII58416GJh",
      "original_commit_id" : "1e598cfb2b3d0e56b1fb301bcf6870f42453c7cc",
      "original_line" : 74,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 16,
      "pull_request_review_id" : 1016203164,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-23T00:38:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904421985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89423062?v=4",
         "events_url" : "https://api.github.com/users/Bat3an/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bat3an/followers",
         "following_url" : "https://api.github.com/users/Bat3an/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bat3an/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bat3an",
         "id" : 89423062,
         "login" : "Bat3an",
         "node_id" : "MDQ6VXNlcjg5NDIzMDYy",
         "organizations_url" : "https://api.github.com/users/Bat3an/orgs",
         "received_events_url" : "https://api.github.com/users/Bat3an/received_events",
         "repos_url" : "https://api.github.com/users/Bat3an/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bat3an/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bat3an/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bat3an"
      }
   }
]
