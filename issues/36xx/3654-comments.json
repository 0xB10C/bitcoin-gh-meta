[
   {
      "body" : "Strong ACK. From the user's point of view the attack can make coins vanish; much better to just temporarily annoy people until a better fix is implemented.\r\n\r\nIf the getbalance change is simple, I'd say go for it too.",
      "created_at" : "2014-02-11T21:28:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34809022",
      "id" : 34809022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:28:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34809022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Not couning unconfirmed change in getbalance will result in users complaining \"I had 15000 BTC in my wallet, I sent 0.001 to a friend, and now all of it is GONE!!!\".",
      "created_at" : "2014-02-11T21:34:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810058",
      "id" : 34810058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:34:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34810058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "It's worth documenting it somewhere though.",
      "created_at" : "2014-02-11T21:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810522",
      "id" : 34810522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34810522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/251852?v=3",
         "events_url" : "https://api.github.com/users/drak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drak/followers",
         "following_url" : "https://api.github.com/users/drak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drak",
         "id" : 251852,
         "login" : "drak",
         "organizations_url" : "https://api.github.com/users/drak/orgs",
         "received_events_url" : "https://api.github.com/users/drak/received_events",
         "repos_url" : "https://api.github.com/users/drak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drak"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/e7d1e1eb4e8b584adfdc44bac6f52938e134b8a4 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/pull-tester)\n2. It adds/modifies tests which test network rules (thanks for doing that), which conflicts with a patch applied at test time\n3. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n4. The test suite fails on either Linux i386 or Win32\n5. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n\nIf you believe this to be in error, please ping BlueMatt on freenode or TheBlueMatt here.\n\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-02-11T21:41:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34810758",
      "id" : 34810758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:41:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34810758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@sipa Excellent point.",
      "created_at" : "2014-02-11T21:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34811234",
      "id" : 34811234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34811234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "On the other hand, if you DO count unconfirmed change, I'm afraid balances may be off in the other direction (too high), if you get a mutated transactions in your wallet. I'm not sure about this though - balance is computed in multiple ways.",
      "created_at" : "2014-02-11T21:46:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34811817",
      "id" : 34811817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:46:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34811817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Agreed. I think if the wallet is fixed to remove/hide duplicated (due to malleability) unconfirmed transactions, the balance will be fixed too, and we don't need to do anything else.",
      "created_at" : "2014-02-11T21:50:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34812183",
      "id" : 34812183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-11T21:50:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34812183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "You should *never* try to hide reality.\r\n\r\nYou're over-engineering. Just show the user *both* the confirmed and unconfirmed balances, particularly when they differ (and particularly when unconfirmed change has been set to be treated as truly unconfirmed).\r\n\r\nFor starters, CWalletTx::IsConfirmed() needs to be updated to reflect reality; see this pull request: https://github.com/bitcoin/bitcoin/pull/3657",
      "created_at" : "2014-02-12T05:54:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34841366",
      "id" : 34841366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-12T05:54:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34841366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6531420?v=3",
         "events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/events{/privacy}",
         "followers_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/followers",
         "following_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/following{/other_user}",
         "gists_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "id" : 6531420,
         "login" : "b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "organizations_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/orgs",
         "received_events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/received_events",
         "repos_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53"
      }
   },
   {
      "body" : "@sipa if balances are too *high* when counting unconfirmed change, then balance is being calculated wrong. Two conflicting unconfirmed transactions cannot both contribute to getbalance. If there are multiple conflicting futures, it can't sum all of them together, it has to choose one. But this is out of scope anyway. If there are merely mutated same-spend transactions in the mempool, the worst case should be the mutated tx hits the blockchain, and it breaks a spend-chain which would then cause getbalance to jump UP.",
      "created_at" : "2014-02-12T07:49:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34846281",
      "id" : 34846281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-12T07:49:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34846281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2410087?v=3",
         "events_url" : "https://api.github.com/users/jspilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jspilman/followers",
         "following_url" : "https://api.github.com/users/jspilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jspilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jspilman",
         "id" : 2410087,
         "login" : "jspilman",
         "organizations_url" : "https://api.github.com/users/jspilman/orgs",
         "received_events_url" : "https://api.github.com/users/jspilman/received_events",
         "repos_url" : "https://api.github.com/users/jspilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jspilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jspilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jspilman"
      }
   },
   {
      "body" : "This is causing a pull tester failure because default wallet behavior changed (\"unconfirmed balance\").\r\n",
      "created_at" : "2014-02-12T08:36:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34848695",
      "id" : 34848695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-12T08:37:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34848695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@jspilman I'm very aware that something is wrong. Fixing it requires a lot more work though.",
      "created_at" : "2014-02-12T13:39:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-34869045",
      "id" : 34869045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-12T13:39:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34869045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I don't want this as default.\r\n\r\n(Spending unconfirmed change gives a larger chance of never-confirming transactions, but it sure makes the wallet a lot more user friendly in the goodweather case. With dead transaction handling the duplicates are handled better and having this as default is not needed)",
      "created_at" : "2014-02-14T06:00:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3654#issuecomment-35058721",
      "id" : 35058721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3654",
      "updated_at" : "2014-02-14T06:03:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35058721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
