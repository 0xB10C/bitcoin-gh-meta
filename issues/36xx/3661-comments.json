[
   {
      "body" : "Can you fix all of the bash nits in qa/rpc-tests/wallet.sh, test with directories with spaces/etc. and submit a pull request for that?  I based the txnmall.sh code on wallet.sh, and, frankly, making it work if you've got a wacky directory hierarchy is not high on my TODO list.\r\n",
      "created_at" : "2014-02-12T20:15:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34912332",
      "id" : 34912332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-12T20:15:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34912332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Sorry, I didn't realize line comments would become so obtrusive; I'll remove them presently.\r\n\r\nThat being said, there is a real danger here, particularly with your EXIT trap.",
      "created_at" : "2014-02-12T20:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34912728",
      "id" : 34912728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-12T20:30:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34912728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6531420?v=3",
         "events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/events{/privacy}",
         "followers_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/followers",
         "following_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/following{/other_user}",
         "gists_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "id" : 6531420,
         "login" : "b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "organizations_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/orgs",
         "received_events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/received_events",
         "repos_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53"
      }
   },
   {
      "body" : "Agree with @gavinandresen, perfecting the hacky test script is not the first priority. Feel free to do this in a separate pull though!\r\n\r\nThe focus of testing and review should be the change in wallet.h here.\r\n\r\nEdit: @b6393ce9-d324-4fe1-996b-acf82dbc3d53 the rm -rf in the EXIT trap can indeed lead to problems if you have a datadir with a space in it, it's could be dangerous if it results in a recursive remove of the wrong directory. Putting \"$D\" there would be wise precaution :)\r\n",
      "created_at" : "2014-02-12T20:24:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34913186",
      "id" : 34913186,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-12T21:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34913186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "[I'm uncomfortable](https://github.com/bitcoin/bitcoin/pull/3657) with considering as \"confirmed\" what we are all already acknowledging as \"unconfirmed\" transactions.\r\n\r\nWhat the Bitcoin world has come to understand recently is that even a transaction created by a trusted partyÃ¢ÂÂnamely by yourselfÃ¢ÂÂis not necessarily ever going to get into the blockchain; thus, it's fairly risky to base *any* calculation on *any* transaction that is not already buried in the blockchain.\r\n\r\n**More to the point of this commit, though**: Your \"confirmed\" balance is meaningless unless you *can* spend that value, and yet that value *cannot* be spent unless the Bitcoin networkÃ¢ÂÂyes, the *third-party payment processor*Ã¢ÂÂsays you can spend it; your personal, individual client really has very little say in the matter, a point that is compounded by mutable (malleable) transactions.\r\n\r\nSo, I don't think either `CWalletTx::IsConfirmed()` or the balance of *confirmed* value is the proper place to be accounting for *unconfirmed* change. These issues need to be handled altogether differently.",
      "created_at" : "2014-02-12T22:21:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34925430",
      "id" : 34925430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-12T22:23:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34925430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6531420?v=3",
         "events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/events{/privacy}",
         "followers_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/followers",
         "following_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/following{/other_user}",
         "gists_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "id" : 6531420,
         "login" : "b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "organizations_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/orgs",
         "received_events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/received_events",
         "repos_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53"
      }
   },
   {
      "body" : "That's a confusion that afaik as existed forever in the source code: IsConfirmed should be called IsTrusted or something instead (it means confirmed OR from ourselves).",
      "created_at" : "2014-02-12T22:33:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34926668",
      "id" : 34926668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-12T22:33:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34926668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "But the larger point is that a transaction from oneself cannot actually be trusted; due to transaction mutability, any source other than the blockchain itself is irrelevant (for various degrees of risk aversion). So, this is not just a question of naming; it's a question of real risk.\r\n\r\nWhen you think about it, you cannot be terribly miffed about this larger point, because that's all Bitcoin ever proffered, anyway: \"Data buried in the blockchain is what can be trusted.\" It's better to work with that reality rather than against it.",
      "created_at" : "2014-02-13T01:43:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34940046",
      "id" : 34940046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-13T01:45:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34940046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6531420?v=3",
         "events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/events{/privacy}",
         "followers_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/followers",
         "following_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/following{/other_user}",
         "gists_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "id" : 6531420,
         "login" : "b6393ce9-d324-4fe1-996b-acf82dbc3d53",
         "organizations_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/orgs",
         "received_events_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/received_events",
         "repos_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/b6393ce9-d324-4fe1-996b-acf82dbc3d53"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/efd8eb3f371369914a84d489ec86873cbc327285 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-02-13T16:45:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-34998039",
      "id" : 34998039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-13T16:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/34998039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Replaced with a deeper level fix (make GetDepthInMainChain() return -1 for transactions that are unconfirmed and no longer in the memory pool).",
      "created_at" : "2014-02-13T17:32:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3661#issuecomment-35003545",
      "id" : 35003545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3661",
      "updated_at" : "2014-02-13T17:32:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35003545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
