[
   {
      "author_association" : "MEMBER",
      "body" : "Can you explain what this is doing, and why it's a good fix (assuming builds work).",
      "created_at" : "2022-02-15T11:17:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#issuecomment-1040151529",
      "id" : 1040151529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24348",
      "node_id" : "IC_kwDOABII5849_3Pp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040151529/reactions"
      },
      "updated_at" : "2022-02-15T11:17:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040151529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fwiw \"newlib\" is a basic C library intended for embedded systems development, i would guess disabling it is acceptable for windows if it's interfering\r\n\r\nedit: at least it's a nice minimal fix that doesn't clutter workarounds all over the code, will test !",
      "created_at" : "2022-02-15T11:19:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#issuecomment-1040153750",
      "id" : 1040153750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24348",
      "node_id" : "IC_kwDOABII5849_3yW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040153750/reactions"
      },
      "updated_at" : "2022-02-15T11:34:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040153750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can you explain what this is doing\r\n\r\nAs it was discovered Windows build fails because  the `_GLIBCXX_HAVE__WFOPEN` macro is undefined in Guix environment:\r\n- https://github.com/bitcoin/bitcoin/pull/24300#issuecomment-1035988901\r\n- https://github.com/bitcoin/bitcoin/pull/24300#issuecomment-1036891125\r\n\r\nThe following [code](https://github.com/gcc-mirror/gcc/blob/f00b5710a30f22efc3171c393e56aeb335c3cd39/libstdc%2B%2B-v3/crossconfig.m4#L200)\r\n```\r\n    AC_CHECK_FUNCS(_wfopen)\r\n```\r\ndefined in `GLIBCXX_CROSSCONFIG` which in turn [is available](https://github.com/gcc-mirror/gcc/blob/f00b5710a30f22efc3171c393e56aeb335c3cd39/libstdc%2B%2B-v3/configure.ac#L317-L353) when `with_newlib != yes`:\r\n```\r\n  # First, test for \"known\" system libraries.  We may be using newlib even\r\n  # on a hosted environment.\r\n  if test \"x${with_newlib}\" = \"xyes\"; then\r\n    os_include_dir=\"os/newlib\"\r\n    AC_DEFINE(HAVE_HYPOT)\r\n\r\n\r\n    # GLIBCXX_CHECK_STDLIB_SUPPORT\r\n    AC_DEFINE(HAVE_STRTOF)\r\n\r\n\r\n    AC_DEFINE(HAVE_ACOSF)\r\n    AC_DEFINE(HAVE_ASINF)\r\n    AC_DEFINE(HAVE_ATAN2F)\r\n    AC_DEFINE(HAVE_ATANF)\r\n    AC_DEFINE(HAVE_CEILF)\r\n    AC_DEFINE(HAVE_COSF)\r\n    AC_DEFINE(HAVE_COSHF)\r\n    AC_DEFINE(HAVE_EXPF)\r\n    AC_DEFINE(HAVE_FABSF)\r\n    AC_DEFINE(HAVE_FLOORF)\r\n    AC_DEFINE(HAVE_FMODF)\r\n    AC_DEFINE(HAVE_FREXPF)\r\n    AC_DEFINE(HAVE_LDEXPF)\r\n    AC_DEFINE(HAVE_LOG10F)\r\n    AC_DEFINE(HAVE_LOGF)\r\n    AC_DEFINE(HAVE_MODFF)\r\n    AC_DEFINE(HAVE_POWF)\r\n    AC_DEFINE(HAVE_SINF)\r\n    AC_DEFINE(HAVE_SINHF)\r\n    AC_DEFINE(HAVE_SQRTF)\r\n    AC_DEFINE(HAVE_TANF)\r\n    AC_DEFINE(HAVE_TANHF)\r\n\r\n\r\n    AC_DEFINE(HAVE_ICONV)\r\n    AC_DEFINE(HAVE_MEMALIGN)\r\n  else\r\n    GLIBCXX_CROSSCONFIG\r\n  fi\r\n```\r\n\r\n> and why it's a good fix (assuming builds work).\r\n\r\nI cannot prove that this is a good fix. Maybe @dongcarl could?",
      "created_at" : "2022-02-15T11:31:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#issuecomment-1040165387",
      "id" : 1040165387,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24348",
      "node_id" : "IC_kwDOABII5849_6oL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040165387/reactions"
      },
      "updated_at" : "2022-02-15T11:31:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040165387",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24348#discussion_r806736405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736405"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could you split this out something like:\r\n```scheme\r\n;; why we are doing this\r\n(define (make-gcc-without-newlib gcc)\r\n  (package-with-extra-configure-variable gcc \"--with-newlib\" \"no\"))\r\n```\r\n\r\n```suggestion\r\n                                    #:xgcc (make-gcc-without-newlib (make-ssp-fixed-gcc base-gcc))\r\n```",
      "commit_id" : "e4ff31c800b88e091ce2b852a80a582d806fc31f",
      "created_at" : "2022-02-15T11:35:02Z",
      "diff_hunk" : "@@ -168,7 +168,7 @@ desirable for building Bitcoin Core release binaries.\"\n          (pthreads-xlibc mingw-w64-x86_64-winpthreads)\n          (pthreads-xgcc (make-gcc-with-pthreads\n                          (cross-gcc target\n-                                    #:xgcc (make-ssp-fixed-gcc base-gcc)\n+                                    #:xgcc (package-with-extra-configure-variable (make-ssp-fixed-gcc base-gcc) \"--with-newlib\" \"no\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#discussion_r806736405",
      "id" : 806736405,
      "line" : 171,
      "node_id" : "PRRC_kwDOABII584wFdIV",
      "original_commit_id" : "e4ff31c800b88e091ce2b852a80a582d806fc31f",
      "original_line" : 171,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/guix/manifest.scm",
      "position" : 5,
      "pull_request_review_id" : 882852775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24348",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736405/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-15T11:35:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24348#discussion_r806736886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24348"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736886"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Guix builds:\r\n\r\nIf we're changing the time-machine commit we need to do builds for all HOSTS, not just Windows.",
      "commit_id" : "e4ff31c800b88e091ce2b852a80a582d806fc31f",
      "created_at" : "2022-02-15T11:35:38Z",
      "diff_hunk" : "@@ -239,7 +239,7 @@ SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:-$(git -c log.showSignature=false log --f\n time-machine() {\n     # shellcheck disable=SC2086\n     guix time-machine --url=https://git.savannah.gnu.org/git/guix.git \\\n-                      --commit=1ef7a03a148cf5f83ab1820444f6bd50d8e732d1 \\\n+                      --commit=ae03f401381e956c4c41b4cf495cbde964fa43d0 \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#discussion_r806736886",
      "id" : 806736886,
      "line" : 242,
      "node_id" : "PRRC_kwDOABII584wFdP2",
      "original_commit_id" : "e4ff31c800b88e091ce2b852a80a582d806fc31f",
      "original_line" : 242,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/guix/guix-build",
      "position" : 5,
      "pull_request_review_id" : 882852775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24348",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736886/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-15T11:35:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806736886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Builds succeed and get the same output (haven't actually tested anything on windows):\r\n```\r\n6ca4205e4bd4942d81942ce2a77cc1d0f9dc2e768dc2f3882e79a07d67b347d3  guix-build-e4ff31c800b8/output/dist-archive/bitcoin-e4ff31c800b8.tar.gz\r\n5e3ecd0f8aea2ac4d45432a0833c0eb51712f8a4b7cc4064e910d9c98be173e8  guix-build-e4ff31c800b8/output/x86_64-w64-mingw32/SHA256SUMS.part\r\ndb21a7770b965824b0d287294efa31f8e71beb34a4bc98a430ed322b56eb58df  guix-build-e4ff31c800b8/output/x86_64-w64-mingw32/bitcoin-e4ff31c800b8-win-unsigned.tar.gz\r\n140b4f32061b3bb269dcb4f0f6cab854a9febd147a3cac93f305e46a61e22a3d  guix-build-e4ff31c800b8/output/x86_64-w64-mingw32/bitcoin-e4ff31c800b8-win64-debug.zip\r\n150c09c21e88e97c49a7ee4c0e7278462db4c87fc66d85109043f9944154edbc  guix-build-e4ff31c800b8/output/x86_64-w64-mingw32/bitcoin-e4ff31c800b8-win64-setup-unsigned.exe\r\n898c8bda4dc5f3c8708fe4bb41c40a5103f873fc36b13c1c3a0ebdfb58995db8  guix-build-e4ff31c800b8/output/x86_64-w64-mingw32/bitcoin-e4ff31c800b8-win64.zip\r\n```",
      "created_at" : "2022-02-15T13:48:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24348#issuecomment-1040296407",
      "id" : 1040296407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24348",
      "node_id" : "IC_kwDOABII584-AanX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040296407/reactions"
      },
      "updated_at" : "2022-02-15T13:48:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1040296407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
