[
   {
      "body" : "I'm proposing a simpler api; see http://www.bitcoin.org/smf/index.php?topic=2647.0\r\n\r\nI believe you can build what you want on top of the lower-level \"tell me when there are new blocks and transactions\".\r\n\r\nFor example, note the transaction ID when you get notified of a new transaction.  Then when you get notified of new blocks, call gettransaction <txid> to get the status of transactions that had fewer than $minconf confirmations.\r\n",
      "created_at" : "2011-01-06T19:40:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20#issuecomment-658519",
      "id" : 658519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20",
      "updated_at" : "2011-01-06T19:40:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Hey Gavin,\r\n\r\nI can see there would be applications for what you're doing with that API.\r\n\r\nSeems like it would be painful to work with for e-commerce, though. Right now I can just poll an account/label linked to an open purchase order to check the balance and confirmations. Using this API would require (I think) responding to the JSON-RPC callback POST by sending a flurry of RPC calls to check on the each of the transactions in the new block. Given the complexity and traffic involved in that, I'd probably just continue to use periodic polling.",
      "created_at" : "2011-01-06T19:51:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20#issuecomment-658540",
      "id" : 658540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20",
      "updated_at" : "2011-01-06T19:51:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/118625?v=3",
         "events_url" : "https://api.github.com/users/mikegogulski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikegogulski/followers",
         "following_url" : "https://api.github.com/users/mikegogulski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikegogulski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikegogulski",
         "id" : 118625,
         "login" : "mikegogulski",
         "organizations_url" : "https://api.github.com/users/mikegogulski/orgs",
         "received_events_url" : "https://api.github.com/users/mikegogulski/received_events",
         "repos_url" : "https://api.github.com/users/mikegogulski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikegogulski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikegogulski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikegogulski"
      }
   },
   {
      "body" : "You could replace polling every N minutes with a monitorblocks callback that did what you are doing now-- because you know that transactions won't get more confirmations unless new blocks have been received.  You should end up with more accurate results (you'll update as soon as bitcoind sees a new block) with less polling.\r\n\r\nYou would probably ignore the transactions in the block, unless you want to do something with 1-confirmation transactions.\r\n",
      "created_at" : "2011-01-07T01:10:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20#issuecomment-659336",
      "id" : 659336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20",
      "updated_at" : "2011-01-07T01:10:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I see how it could work, sure. But the sample JSON output you provided on the forum post showed the callback passing some general block info and then simply a list of transaction IDs.\r\n\r\nFor each transaction ID, I would have to determine if it's relevant to my open orders, then check each relevant transaction for the number of confirmations and the balance on the associated account/address in the wallet. Right now that would mean one RPC method call per transaction in the block. \r\n\r\nUnless monitorblocks is going to cough up some per-transaction data correlating transactions with accounts/addresses, I can't see an advantage to using it over polling.\r\n\r\nActually, maybe I'm totally missing something. The current implementation of gettransaction returns something like:\r\n\r\n    $ bitcoind gettransaction 270d70635927aac5ec9b42fda27e539ae50a7a06bc3bb2fb98e086e11446a3e6\r\n    {\r\n    \"amount\" : -0.02000000,\r\n    \"fee\" : 0.00000000,\r\n    \"confirmations\" : 248,\r\n    \"txid\" : \"270d70635927aac5ec9b42fda27e539ae50a7a06bc3bb2fb98e086e11446a3e6\",\r\n    \"message\" : \"comment\",\r\n    \"to\" : \"comment-to\"\r\n    }\r\n\r\nHow do I associate this with an account or address?",
      "created_at" : "2011-01-07T01:29:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20#issuecomment-659367",
      "id" : 659367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20",
      "updated_at" : "2011-01-07T01:29:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/118625?v=3",
         "events_url" : "https://api.github.com/users/mikegogulski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikegogulski/followers",
         "following_url" : "https://api.github.com/users/mikegogulski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikegogulski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikegogulski",
         "id" : 118625,
         "login" : "mikegogulski",
         "organizations_url" : "https://api.github.com/users/mikegogulski/orgs",
         "received_events_url" : "https://api.github.com/users/mikegogulski/received_events",
         "repos_url" : "https://api.github.com/users/mikegogulski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikegogulski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikegogulski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikegogulski"
      }
   },
   {
      "body" : "I submitted a pull request today to add \"details\" to gettransaction output.  You'll get one or more objects that give category (send or receive), account, and address.\r\n",
      "created_at" : "2011-01-08T02:38:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20#issuecomment-661975",
      "id" : 661975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20",
      "updated_at" : "2011-01-08T02:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
