[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[Comments in IRC](http://www.erisian.com.au/bitcoin-core-dev/log-2020-01-17.html#l-49) provide some context: without the information in rules field \"miners have no way to know what rules are being used and might produce invalid blocks\"",
      "created_at" : "2020-01-17T17:08:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575713292",
      "id" : 575713292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTcxMzI5Mg==",
      "updated_at" : "2020-01-17T17:08:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575713292",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Discussion in 16060 is here: https://github.com/bitcoin/bitcoin/pull/16060#discussion_r308043941",
      "created_at" : "2020-01-17T17:47:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575727268",
      "id" : 575727268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTcyNzI2OA==",
      "updated_at" : "2020-01-17T17:47:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575727268",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(For clarity, I didn't mean fixing *this* bug in a separate PR, but rather the missing `\"!\"` and/or bad name/description of the `gbt_force` flag.)",
      "created_at" : "2020-01-17T18:14:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575736743",
      "id" : 575736743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTczNjc0Mw==",
      "updated_at" : "2020-01-17T18:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575736743",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#9955 introduced a bug, sure, but that bug would only have impacted Segwit-unaware miners. Segwit-aware miners would have continued to work correctly because they saw that segwit was an active rule.\r\n\r\nRemoving the rule entirely means that sigops are counted differently, and transactions may not include witness data. I don't know if there are any real-world miners impacted by this, but it is at least theoretically possible (IIRC, at least some branches of Eloipool support a safety trim based on sigop counts).",
      "created_at" : "2020-01-17T19:45:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575768913",
      "id" : 575768913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTc2ODkxMw==",
      "updated_at" : "2020-01-17T19:45:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575768913",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> that bug would only have impacted Segwit-unaware miners.\r\n\r\nI think you have this the wrong way round. Segwit-unaware miners would see \"segwit\" in the rules, but according to BIP 9:\r\n\r\n> Without this [\"!\"] prefix, GBT clients may assume the rule will not impact usage of the template as-is;\r\n\r\nand so the segwit-unaware miner would use the template, but not be able to add the witness commitment to the coinbase.\r\n\r\n> sigops are counted differently\r\n\r\nSince #14811, the GBT request must include \"segwit\" in the rule array, so sigops are always counted according to BIP 141 rules. Whether or not the return object includes \"segwit\" in the rules doesn't change this.\r\n\r\nIn any case, I think it's fine to make this change because it doesn't really matter. Segwit has been active for two years and all miners using 0.18 onwards have to set \"segwit\" in the rules. I find it very hard to believe that any are reading what's returned in the rules field.",
      "created_at" : "2020-01-17T20:22:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575780961",
      "id" : 575780961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTc4MDk2MQ==",
      "updated_at" : "2020-01-17T20:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575780961",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think you have this the wrong way round. Segwit-unaware miners would see \"segwit\" in the rules, \r\n\r\nThey would fail by mining invalid blocks, instead of failing explicitly. Either way, they fail.\r\n\r\nSegwit-capable miners, on the other hand, shouldn't fail, but might because they think they're mining a non-segwit block.\r\n\r\n> Since #14811, the GBT request must include \"segwit\" in the rule array, so sigops are always counted according to BIP 141 rules.\r\n\r\nThe request rule doesn't affect sigop counting, only indicates the client can understand a segwit template. Sigop counting is enabled only when the template has segwit in its rules list.",
      "created_at" : "2020-01-18T01:40:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17946#issuecomment-575853886",
      "id" : 575853886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTg1Mzg4Ng==",
      "updated_at" : "2020-01-18T01:40:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575853886",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
