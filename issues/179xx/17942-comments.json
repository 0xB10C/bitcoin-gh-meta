[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367620113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367620113"
         }
      },
      "author_association" : "NONE",
      "body" : "If you are using clang you will need to substitute `afl-gcc` with `afl-clang`\r\nand `afl-g++` with `afl-clang++` so the first line above becomes:\r\n```\r\n./configure --disable-ccache --disable-shared --enable-tests --enable-fuzz CC=${AFLPATH}/afl-clang CXX=${AFLPATH}/afl-clang++\r\n```",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-16T19:57:31Z",
      "diff_hunk" : "@@ -51,6 +57,10 @@ export AFL_HARDEN=1\n cd src/\n make\n ```\n+\n+If you are using clang you will need to substitute `afl-gcc` with `afl-clang`\n+and `afl-g++` with `afl-clang++`.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367620113",
      "id" : 367620113,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyMDExMw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 52,
      "path" : "doc/fuzzing.md",
      "position" : 52,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-16T20:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367620113",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367623864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367623864"
         }
      },
      "author_association" : "NONE",
      "body" : "I seem to be missing the ${FUZZ_TARGET} declaration. The comment below contains the two rows from the similar section at https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-16T20:06:17Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367623864",
      "id" : 367623864,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyMzg2NA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 62,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-16T20:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367623864",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367626269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367626269"
         }
      },
      "author_association" : "NONE",
      "body" : "```\r\nexport FUZZ_TARGET=fuzz_target_foo  # Pick a fuzz_target from ${DIR_FUZZ_IN}\r\nmkdir ${AFLOUT}/${FUZZ_TARGET}\r\nAFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}\r\n",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-16T20:11:43Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367626269",
      "id" : 367626269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyNjI2OQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 62,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-16T20:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367626269",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks. Much needed!",
      "created_at" : "2020-01-16T20:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#issuecomment-575329349",
      "id" : 575329349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17942",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTMyOTM0OQ==",
      "updated_at" : "2020-01-16T20:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575329349",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367793910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367793910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What errors are you seeing with the asm? Can you post logs?",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-17T07:04:16Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367793910",
      "id" : 367793910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5MzkxMA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 93,
      "path" : "doc/fuzzing.md",
      "position" : 93,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-17T07:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367793910",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367794053"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367794053"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What errors are you seeing with Boost? Can you post logs?",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-17T07:04:52Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367794053",
      "id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5NDA1Mw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : 100,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-17T07:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367794053",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367797061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367797061"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this is needed, we should be using something like `$(xcrun --show-sdk-path)` (same as we do in [depends](https://github.com/bitcoin/bitcoin/blob/master/depends/builders/darwin.mk#L14)), rather than hard-coding a path to a specific SDK version.\r\n\r\n\r\nAlthough I'm curious to know why this is would be required, as it's already added to the compiler flags by clang. i.e:\r\n\r\n```bash\r\n/usr/local/Cellar/llvm/9.0.0_1/bin/clang++ test.cpp -o test -v\r\n...\r\n\"/usr/local/Cellar/llvm/9.0.0_1/bin/clang-9\" \r\n-cc1 \r\n-triple x86_64-apple-macosx10.14.0 \r\n< snip a bunch of args> \r\n-target-linker-version 512.4 \r\n-v -resource-dir /usr/local/Cellar/llvm/9.0.0_1/lib/clang/9.0.0 \r\n-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\r\n``",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-17T07:17:31Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries\n+can't be found, like boost.thread or boost.filesystem, add this to your\n+configure:\n+```\n+CXXFLAGS=\"-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367797061",
      "id" : 367797061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5NzA2MQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 104,
      "path" : "doc/fuzzing.md",
      "position" : 104,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-17T07:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367797061",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368000737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368000737"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have not seen this particular error myself but included it for others since it seems to have been an issue here: https://github.com/bitcoin/bitcoin/issues/17657#issuecomment-562869600. So I can remove it or improve it as you describe in the comment on the flags. Or maybe @brakmic can help (sorry for including you unsolicited).",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-17T15:42:52Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368000737",
      "id" : 368000737,
      "in_reply_to_id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMDczNw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : 100,
      "pull_request_review_id" : 344664206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-17T15:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368000737",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368002707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368002707"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, I am sure I had an issue without it before but I can not reproduce it right now and I did not keep the logs since I tried libFuzzer one week ago. So it is possible that it is not an issue anymore or I simply mistook this as fixing an unrelated issue. However, the issue is also noted in the docs on sanitizers: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#sanitizers",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-17T15:46:31Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368002707",
      "id" : 368002707,
      "in_reply_to_id" : 367793910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMjcwNw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 93,
      "path" : "doc/fuzzing.md",
      "position" : 93,
      "pull_request_review_id" : 344666762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-17T15:46:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368002707",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218269"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have seen such errors when experimenting with libFuzzer and after some search through GitHub I found a solution to a similar problem: macOS should be provided an **isysroot** variable that points to the proper SDK. However, this could maybe only be a problem when working with macOs Catalina. I've never tested it under older variants. Catalina, in many ways, is a \"breaking change\" regarding handling of SDK paths, include directories etc.  ",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-18T09:50:07Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218269",
      "id" : 368218269,
      "in_reply_to_id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxODI2OQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : 100,
      "pull_request_review_id" : 344935768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-18T09:50:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218269",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218457"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218457"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The **sysroot** there is pointing to /Library/Developer which is not correct when using under Catalina (but could be correct under previous macOS versions). Here a link to a question from SO regarding this particular problem: https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-18T09:54:15Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries\n+can't be found, like boost.thread or boost.filesystem, add this to your\n+configure:\n+```\n+CXXFLAGS=\"-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218457",
      "id" : 368218457,
      "in_reply_to_id" : 367797061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxODQ1Nw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 104,
      "path" : "doc/fuzzing.md",
      "position" : 104,
      "pull_request_review_id" : 344935921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-18T09:54:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218457",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   }
]
