[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367620113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367620113"
         }
      },
      "author_association" : "NONE",
      "body" : "If you are using clang you will need to substitute `afl-gcc` with `afl-clang`\r\nand `afl-g++` with `afl-clang++` so the first line above becomes:\r\n```\r\n./configure --disable-ccache --disable-shared --enable-tests --enable-fuzz CC=${AFLPATH}/afl-clang CXX=${AFLPATH}/afl-clang++\r\n```",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-16T19:57:31Z",
      "diff_hunk" : "@@ -51,6 +57,10 @@ export AFL_HARDEN=1\n cd src/\n make\n ```\n+\n+If you are using clang you will need to substitute `afl-gcc` with `afl-clang`\n+and `afl-g++` with `afl-clang++`.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367620113",
      "id" : 367620113,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyMDExMw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 52,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367620113",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367623864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367623864"
         }
      },
      "author_association" : "NONE",
      "body" : "I seem to be missing the ${FUZZ_TARGET} declaration. The comment below contains the two rows from the similar section at https://github.com/bitcoin/bitcoin/blob/master/doc/fuzzing.md",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-16T20:06:17Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367623864",
      "id" : 367623864,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyMzg2NA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 67,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367623864",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367626269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367626269"
         }
      },
      "author_association" : "NONE",
      "body" : "```\r\nexport FUZZ_TARGET=fuzz_target_foo  # Pick a fuzz_target from ${DIR_FUZZ_IN}\r\nmkdir ${AFLOUT}/${FUZZ_TARGET}\r\nAFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}\r\n",
      "commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-16T20:11:43Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367626269",
      "id" : 367626269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYyNjI2OQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 62,
      "pull_request_review_id" : 344177257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-16T20:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367626269",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks. Much needed!",
      "created_at" : "2020-01-16T20:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#issuecomment-575329349",
      "id" : 575329349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17942",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTMyOTM0OQ==",
      "updated_at" : "2020-01-16T20:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575329349",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367793910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367793910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What errors are you seeing with the asm? Can you post logs?",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-17T07:04:16Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367793910",
      "id" : 367793910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5MzkxMA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 93,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367793910",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367794053"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367794053"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What errors are you seeing with Boost? Can you post logs?",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-17T07:04:52Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367794053",
      "id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5NDA1Mw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367794053",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367797061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367797061"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this is needed, we should be using something like `$(xcrun --show-sdk-path)` (same as we do in [depends](https://github.com/bitcoin/bitcoin/blob/master/depends/builders/darwin.mk#L14)), rather than hard-coding a path to a specific SDK version.\r\n\r\n\r\nAlthough I'm curious to know why this is would be required, as it's already added to the compiler flags by clang. i.e:\r\n\r\n```bash\r\n/usr/local/Cellar/llvm/9.0.0_1/bin/clang++ test.cpp -o test -v\r\n...\r\n\"/usr/local/Cellar/llvm/9.0.0_1/bin/clang-9\" \r\n-cc1 \r\n-triple x86_64-apple-macosx10.14.0 \r\n< snip a bunch of args> \r\n-target-linker-version 512.4 \r\n-v -resource-dir /usr/local/Cellar/llvm/9.0.0_1/lib/clang/9.0.0 \r\n-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\r\n``",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-17T07:17:31Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries\n+can't be found, like boost.thread or boost.filesystem, add this to your\n+configure:\n+```\n+CXXFLAGS=\"-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r367797061",
      "id" : 367797061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc5NzA2MQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 104,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344393456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367797061",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368000737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368000737"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have not seen this particular error myself but included it for others since it seems to have been an issue here: https://github.com/bitcoin/bitcoin/issues/17657#issuecomment-562869600. So I can remove it or improve it as you describe in the comment on the flags. Or maybe @brakmic can help (sorry for including you unsolicited).",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-17T15:42:52Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368000737",
      "id" : 368000737,
      "in_reply_to_id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMDczNw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344664206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368000737",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368002707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368002707"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, I am sure I had an issue without it before but I can not reproduce it right now and I did not keep the logs since I tried libFuzzer one week ago. So it is possible that it is not an issue anymore or I simply mistook this as fixing an unrelated issue. However, the issue is also noted in the docs on sanitizers: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#sanitizers",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-17T15:46:31Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368002707",
      "id" : 368002707,
      "in_reply_to_id" : 367793910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMjcwNw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 93,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344666762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368002707",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218269"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have seen such errors when experimenting with libFuzzer and after some search through GitHub I found a solution to a similar problem: macOS should be provided an **isysroot** variable that points to the proper SDK. However, this could maybe only be a problem when working with macOs Catalina. I've never tested it under older variants. Catalina, in many ways, is a \"breaking change\" regarding handling of SDK paths, include directories etc.  ",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-18T09:50:07Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218269",
      "id" : 368218269,
      "in_reply_to_id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxODI2OQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344935768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218269",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218457"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218457"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The **sysroot** there is pointing to /Library/Developer which is not correct when using under Catalina (but could be correct under previous macOS versions). Here a link to a question from SO regarding this particular problem: https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-18T09:54:15Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries\n+can't be found, like boost.thread or boost.filesystem, add this to your\n+configure:\n+```\n+CXXFLAGS=\"-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368218457",
      "id" : 368218457,
      "in_reply_to_id" : 367797061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxODQ1Nw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 104,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 344935921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368218457",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368339639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368339639"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The sysroot there is pointing to /Library/Developer which is not correct when using under Catalina (but could be correct under previous macOS versions). \r\n\r\n@brakmic Sure, however that's why we'd want to use `xcrun --show-sdk-path`, because it should point to the right location for the SDK regardless of the OS it's being run on. What does it output when you run it on Catalina?",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-20T01:02:58Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries\n+can't be found, like boost.thread or boost.filesystem, add this to your\n+configure:\n+```\n+CXXFLAGS=\"-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368339639",
      "id" : 368339639,
      "in_reply_to_id" : 367797061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMzOTYzOQ==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 104,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 345043161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368339639",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks!\r\nutACK 76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "created_at" : "2020-01-20T04:11:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#issuecomment-576098578",
      "id" : 576098578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17942",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NjA5ODU3OA==",
      "updated_at" : "2020-01-20T04:11:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576098578",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368717877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368717877"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\nexport FUZZ_TARGET=fuzz_target_foo  # Pick a fuzz_target from ${DIR_FUZZ_IN}\r\nmkdir ${AFLOUT}/${FUZZ_TARGET}\r\nAFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}\r\n```",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-20T20:36:24Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r368717877",
      "id" : 368717877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODcxNzg3Nw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 67,
      "pull_request_review_id" : 345522645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368717877",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/20860124?v=4",
         "events_url" : "https://api.github.com/users/eriknylund/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eriknylund/followers",
         "following_url" : "https://api.github.com/users/eriknylund/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eriknylund/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eriknylund",
         "id" : 20860124,
         "login" : "eriknylund",
         "node_id" : "MDQ6VXNlcjIwODYwMTI0",
         "organizations_url" : "https://api.github.com/users/eriknylund/orgs",
         "received_events_url" : "https://api.github.com/users/eriknylund/received_events",
         "repos_url" : "https://api.github.com/users/eriknylund/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eriknylund/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eriknylund/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eriknylund"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403117"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-23T23:09:47Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403117",
      "id" : 370403117,
      "in_reply_to_id" : 368717877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMzExNw==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 67,
      "pull_request_review_id" : 347668834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403117",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403630"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated to use xcrun --show-sdk-path.",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-23T23:11:24Z",
      "diff_hunk" : "@@ -87,11 +102,33 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on MacOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+When executing ./configure you should put --disable-asm to avoid errors\n+with certain assembly code from Bitcoin Core's code.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+If you run into problems with \"boost sleep\" or some of boost's libraries",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403630",
      "id" : 370403630,
      "in_reply_to_id" : 367794053,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMzYzMA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 100,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 347669461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403630",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403722"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-23T23:11:40Z",
      "diff_hunk" : "@@ -75,10 +85,15 @@ $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -\n You may have to change a few kernel parameters to test optimally - `afl-fuzz`\n will print an error and suggestion if so.\n \n+On macOS you may need to set `AFL_NO_FORKSRV=1` to get the target to run.\n+```\n+AFL_NO_FORKSRV=1 $AFLPATH/afl-fuzz -i ${DIR_FUZZ_IN}/${FUZZ_TARGET} -o ${AFLOUT}/${FUZZ_TARGET} -m52 -- test/fuzz/${FUZZ_TARGET}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403722",
      "id" : 370403722,
      "in_reply_to_id" : 367623864,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMzcyMg==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 62,
      "path" : "doc/fuzzing.md",
      "position" : 67,
      "pull_request_review_id" : 347669571,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403722",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403764"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403764"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-23T23:11:48Z",
      "diff_hunk" : "@@ -51,6 +57,10 @@ export AFL_HARDEN=1\n cd src/\n make\n ```\n+\n+If you are using clang you will need to substitute `afl-gcc` with `afl-clang`\n+and `afl-g++` with `afl-clang++`.\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r370403764",
      "id" : 370403764,
      "in_reply_to_id" : 367620113,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwMzc2NA==",
      "original_commit_id" : "76f589d6b8a4d74735f3987fdf054eaad662a2a0",
      "original_position" : 52,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 347669634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/370403764",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated to include feedback by @eriknylund and @fanquake .",
      "created_at" : "2020-01-23T23:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#issuecomment-577921582",
      "id" : 577921582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17942",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzkyMTU4Mg==",
      "updated_at" : "2020-01-23T23:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577921582",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "With the fix in #18008 the fuzzers compiled with libFuzzer run for me now. I did not need to specify the system path or `--disable-asm`. After looking at some of the build code I agree with @fanquake that the system path should not be necessary in any case, so I removed it. But I left `--disable-asm` and linked to the mention of the problem in the developer notes. I also made some minor editing changes.",
      "created_at" : "2020-01-28T11:16:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#issuecomment-579197708",
      "id" : 579197708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17942",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTE5NzcwOA==",
      "updated_at" : "2020-01-28T11:16:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579197708",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371784569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371784569"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You should be able to drop `--with-boost` here.",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-28T12:55:28Z",
      "diff_hunk" : "@@ -87,11 +107,28 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on macOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+Should you run into problems with the address sanitizer, it is possible you\n+may need to run `./configure` with `--disable-asm` to avoid errors\n+with certain assembly code from Bitcoin Core's code. See [developer notes on sanitizers](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#sanitizers)\n+for more information.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+Full configure that was tested on macOS Catalina with `brew` installed `llvm`:\n+```\n+./configure --disable-ccache --enable-fuzz --with-sanitizers=fuzzer,address,undefined --with-boost CC=/usr/local/opt/llvm/bin/clang CXX=/usr/local/opt/llvm/bin/clang++ --disable-asm",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371784569",
      "id" : 371784569,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc4NDU2OQ==",
      "original_commit_id" : "465ea827871c24fe59f0c5b3ddff9b52ce8d725f",
      "original_position" : 109,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 349350964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371784569",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371785051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371785051"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Was this something you ran into, or also a suggestion from elsewhere in the docs?",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-28T12:56:27Z",
      "diff_hunk" : "@@ -41,6 +44,9 @@ make\n export AFLPATH=$PWD\n ```\n \n+For macOS you may need to ignore x86 compilation checks when running `make`:\n+`AFL_NO_X86=1 make`.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371785051",
      "id" : 371785051,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc4NTA1MQ==",
      "original_commit_id" : "465ea827871c24fe59f0c5b3ddff9b52ce8d725f",
      "original_position" : 40,
      "path" : "doc/fuzzing.md",
      "position" : 40,
      "pull_request_review_id" : 349350964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371785051",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371898726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371898726"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I had a problem with this. I got this output without the flag:\r\n```\r\n$ make\r\n[*] Checking for the ability to compile x86 code...\r\n[+] Everything seems to be working, ready to compile.\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-gcc.c -o afl-gcc\r\nset -e; for i in afl-g++ afl-clang afl-clang++; do ln -sf afl-gcc $i; done\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-fuzz.c -o afl-fuzz\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-showmap.c -o afl-showmap\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-tmin.c -o afl-tmin\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-gotcpu.c -o afl-gotcpu\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-analyze.c -o afl-analyze\r\ncc -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" afl-as.c -o afl-as\r\nln -sf afl-as as\r\n[*] Testing the CC wrapper and instrumentation output...\r\nunset AFL_USE_ASAN AFL_USE_MSAN; AFL_QUIET=1 AFL_INST_RATIO=100 AFL_PATH=. ./afl-clang -O3 -funroll-loops -Wall -D_FORTIFY_SOURCE=2 -g -Wno-pointer-sign -DAFL_PATH=\\\"/usr/local/lib/afl\\\" -DDOC_PATH=\\\"/usr/local/share/doc/afl\\\" -DBIN_PATH=\\\"/usr/local/bin\\\" test-instr.c -o test-instr\r\necho 0 | ./afl-showmap -m none -q -o .test-instr0 ./test-instr\r\necho 1 | ./afl-showmap -m none -q -o .test-instr1 ./test-instr\r\n\r\nOops, the instrumentation does not seem to be behaving correctly!\r\n\r\nPlease ping <lcamtuf@google.com> to troubleshoot the issue.\r\n\r\nmake: *** [test_build] Error 1\r\n```",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-28T16:07:03Z",
      "diff_hunk" : "@@ -41,6 +44,9 @@ make\n export AFLPATH=$PWD\n ```\n \n+For macOS you may need to ignore x86 compilation checks when running `make`:\n+`AFL_NO_X86=1 make`.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371898726",
      "id" : 371898726,
      "in_reply_to_id" : 371785051,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5ODcyNg==",
      "original_commit_id" : "465ea827871c24fe59f0c5b3ddff9b52ce8d725f",
      "original_position" : 40,
      "path" : "doc/fuzzing.md",
      "position" : 40,
      "pull_request_review_id" : 349500036,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371898726",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371900872"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371900872"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done (also tested it)",
      "commit_id" : "8126f5e6f1f32e9892eaf73dbc3c41ba1ebf2dcd",
      "created_at" : "2020-01-28T16:10:34Z",
      "diff_hunk" : "@@ -87,11 +107,28 @@ To build all fuzz targets with libFuzzer, run\n make\n ```\n \n-The fuzzer needs some inputs to work on, but the inputs or seeds can be used\n-interchangeably between libFuzzer and AFL.\n-\n See https://llvm.org/docs/LibFuzzer.html#running on how to run the libFuzzer\n instrumented executable.\n \n Alternatively run the script in `./test/fuzz/test_runner.py` and provide it\n with the `${DIR_FUZZ_IN}` created earlier.\n+\n+### macOS hints for libFuzzer\n+\n+The default clang/llvm version supplied by Apple on macOS does not include\n+fuzzing libraries, so macOS users will need to install a full version, for\n+example using `brew install llvm`.\n+\n+Should you run into problems with the address sanitizer, it is possible you\n+may need to run `./configure` with `--disable-asm` to avoid errors\n+with certain assembly code from Bitcoin Core's code. See [developer notes on sanitizers](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#sanitizers)\n+for more information.\n+\n+You may also need to take care of giving the correct path for clang and\n+clang++, like `CC=/path/to/clang CXX=/path/to/clang++` if the non-systems\n+clang does not come first in your path.\n+\n+Full configure that was tested on macOS Catalina with `brew` installed `llvm`:\n+```\n+./configure --disable-ccache --enable-fuzz --with-sanitizers=fuzzer,address,undefined --with-boost CC=/usr/local/opt/llvm/bin/clang CXX=/usr/local/opt/llvm/bin/clang++ --disable-asm",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17942#discussion_r371900872",
      "id" : 371900872,
      "in_reply_to_id" : 371784569,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTkwMDg3Mg==",
      "original_commit_id" : "465ea827871c24fe59f0c5b3ddff9b52ce8d725f",
      "original_position" : 109,
      "path" : "doc/fuzzing.md",
      "position" : null,
      "pull_request_review_id" : 349502965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17942",
      "updated_at" : "2020-01-28T16:10:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/371900872",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
