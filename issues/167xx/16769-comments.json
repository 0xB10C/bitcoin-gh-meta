[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "We talked about the uninstall.exe icon here: https://github.com/bitcoin/bitcoin/pull/16760\r\n\r\nThe uninstall.exe icon looks like it's from 2010 (horrible) and the previous PR didn't really change that - it was more of a quick fix, but only for newer versions of Windows (maybe only Windows 10 and 8).\r\nAdding an extra black bitcoin icon or not is to be decided - personally I'd like to include it, but if not, we could simply assign the orange bitcoin logo to the uninstall.exe as well.\r\n\r\nCurrent uninstall.exe icon:\r\n![Screenshot_91](https://user-images.githubusercontent.com/42591821/64076605-7759d180-ccb6-11e9-8e59-7bc7fb88bcef.png)\r\n\r\n\r\nThe extra 2 lines in setup.nsi.in delete the remaining registry values after the uninstall. See below the registry values in question.\r\n\r\n`HKCU \"SOFTWARE\\Bitcoin\"`\r\n![Screenshot_88](https://user-images.githubusercontent.com/42591821/64063727-c258e380-cbe7-11e9-9f5d-b009a2cc8568.png)\r\n\r\n`HKLM \"SOFTWARE\\Bitcoin Core (@WINDOWS_BITS@-bit)\"`\r\n![Screenshot_89](https://user-images.githubusercontent.com/42591821/64063726-c258e380-cbe7-11e9-9f60-5d31260cecf7.png)\r\n\r\n",
      "created_at" : "2019-08-31T12:07:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526825345",
      "id" : 526825345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjgyNTM0NQ==",
      "updated_at" : "2019-09-01T12:48:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526825345",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/42591821?v=4",
         "events_url" : "https://api.github.com/users/GChuf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GChuf/followers",
         "following_url" : "https://api.github.com/users/GChuf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GChuf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GChuf",
         "id" : 42591821,
         "login" : "GChuf",
         "node_id" : "MDQ6VXNlcjQyNTkxODIx",
         "organizations_url" : "https://api.github.com/users/GChuf/orgs",
         "received_events_url" : "https://api.github.com/users/GChuf/received_events",
         "repos_url" : "https://api.github.com/users/GChuf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GChuf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GChuf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GChuf"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You can split this into two commits, each with a more descriptive commit message. i.e One for the registry modifications, with an explanation of the values being removed, and one for updating the uninstaller icon.\r\n\r\ncc @sipsorcery @NicolasDorier ",
      "created_at" : "2019-08-31T13:20:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526830198",
      "id" : 526830198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjgzMDE5OA==",
      "updated_at" : "2019-08-31T13:20:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526830198",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fanquake got it, done.\r\n--> updated commit message and pushed commits again",
      "created_at" : "2019-09-01T15:12:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526927106",
      "id" : 526927106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjkyNzEwNg==",
      "updated_at" : "2019-09-01T15:32:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526927106",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/42591821?v=4",
         "events_url" : "https://api.github.com/users/GChuf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GChuf/followers",
         "following_url" : "https://api.github.com/users/GChuf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GChuf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GChuf",
         "id" : 42591821,
         "login" : "GChuf",
         "node_id" : "MDQ6VXNlcjQyNTkxODIx",
         "organizations_url" : "https://api.github.com/users/GChuf/orgs",
         "received_events_url" : "https://api.github.com/users/GChuf/received_events",
         "repos_url" : "https://api.github.com/users/GChuf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GChuf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GChuf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GChuf"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@GChuf you are missing a double quote:\r\n\r\n`DeleteRegKey HKLM \"SOFTWARE\\Bitcoin Core (@WINDOWS_BITS@-bit)`\r\n",
      "created_at" : "2019-09-04T16:49:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-527987876",
      "id" : 527987876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNzk4Nzg3Ng==",
      "updated_at" : "2019-09-04T16:49:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/527987876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@GChuf the registry keys on my machine under HKCU and HKLM are both `Bitcoin Core (64-bit)`. Is there any reason you've deleted them with different names? How do they appear on your machine?",
      "created_at" : "2019-09-04T17:33:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528004592",
      "id" : 528004592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODAwNDU5Mg==",
      "updated_at" : "2019-09-04T17:33:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528004592",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipsorcery nice catch on double quotes, thank you.\r\n\r\nWhich windows version are you using?\r\nAlso, which bitcoin version? Can you post some registry screenshots?\r\n\r\nKeys on my Win10 (1709) and my Windows 7 (I just tested) appear just how I've set to delete them.\r\n\r\nThis is from my Win7 machine after uninstall:\r\n![untitled4](https://user-images.githubusercontent.com/42591821/64331188-a5028b80-cfd2-11e9-90f8-ca41d2c54db3.png)\r\n\r\nIn any case, we can simply add a line to delete `HKCU SOFTWARE\\Bitcoin Core (@WINDOWS_BITS@-bit)` as well.",
      "created_at" : "2019-09-05T09:48:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528288484",
      "id" : 528288484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODI4ODQ4NA==",
      "updated_at" : "2019-09-05T14:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528288484",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/42591821?v=4",
         "events_url" : "https://api.github.com/users/GChuf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GChuf/followers",
         "following_url" : "https://api.github.com/users/GChuf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GChuf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GChuf",
         "id" : 42591821,
         "login" : "GChuf",
         "node_id" : "MDQ6VXNlcjQyNTkxODIx",
         "organizations_url" : "https://api.github.com/users/GChuf/orgs",
         "received_events_url" : "https://api.github.com/users/GChuf/received_events",
         "repos_url" : "https://api.github.com/users/GChuf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GChuf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GChuf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GChuf"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@GChuf I think we should only delete registry keys in the uninstall script that are explicitly set in the install script. If there is somewhere in the Bitcoin app that is setting an additional registry key then IMHO we should add it to the install script.\r\n\r\nIt seems a bit dangerous to simply delete keys that use the word Bitcoin. There are some other notable products that may have very similar names. ",
      "created_at" : "2019-09-05T18:33:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528516348",
      "id" : 528516348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODUxNjM0OA==",
      "updated_at" : "2019-09-05T18:33:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528516348",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Well the registry keys deleted don't just contain the word \"bitcoin\", they're exactly specified. If there is no key named `Bitcoin Core (64-bit)` under `HKLM\\SOFTWARE`, nothing gets deleted.\r\n\r\nOther products would be wise to avoid naming registry keys (or anything else) exactly `Bitcoin Core` anyway.\r\n\r\nThe fact is that the installer generates these keys and does not delete them, unlike other keys.\r\n\r\nAlso, you haven't answered my question earlier - what windows version are you using, and what bitcoin version?",
      "created_at" : "2019-09-05T19:01:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528527395",
      "id" : 528527395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODUyNzM5NQ==",
      "updated_at" : "2019-09-05T19:01:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528527395",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/42591821?v=4",
         "events_url" : "https://api.github.com/users/GChuf/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GChuf/followers",
         "following_url" : "https://api.github.com/users/GChuf/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GChuf/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GChuf",
         "id" : 42591821,
         "login" : "GChuf",
         "node_id" : "MDQ6VXNlcjQyNTkxODIx",
         "organizations_url" : "https://api.github.com/users/GChuf/orgs",
         "received_events_url" : "https://api.github.com/users/GChuf/received_events",
         "repos_url" : "https://api.github.com/users/GChuf/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GChuf/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GChuf/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GChuf"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Windows 10 Pro Insider Preview Build 18956.rs_prerelease.190803-1414.\r\nBitcoin version was built from master with your patch included.\r\n\r\n> Well the registry keys deleted don't just contain the word \"bitcoin\", they're exactly specified. If there is no key named Bitcoin Core (64-bit) under HKLM\\SOFTWARE, nothing gets deleted.\r\n\r\nThis delete command from your PR is just \"Bitcoin\".\r\n\r\n`DeleteRegKey HKCU \"SOFTWARE\\Bitcoin\"`\r\n\r\nWith some more testing I've found that the `HKCU\\SOFTWARE\\Bitcoin` is where some user specific settings are stored, seems to be mainly GUI and default settings. It's debatable whether this should be cleaned up when the app is uninstalled however that's outweighed by the fact that it's existing behaviour that users will certainly be depending on. IMHO this key needs to stay as is.\r\n\r\nThe other delete key in the PR wasn't needed in my testing:\r\n\r\n`DeleteRegKey HKLM \"SOFTWARE\\Bitcoin Core (@WINDOWS_BITS@-bit)`\r\n\r\nThe existing installer (bitcoin-0.18.1-win64-setup.exe from https://bitcoin.org/en/download) already deletes that key as a result of:\r\n\r\n`DeleteRegKey /IfEmpty HKCU \"${REGKEY}\"`",
      "created_at" : "2019-09-05T19:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528546259",
      "id" : 528546259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16769",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODU0NjI1OQ==",
      "updated_at" : "2019-09-05T19:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528546259",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   }
]
