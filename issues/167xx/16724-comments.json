[
   {
      "author_association" : "NONE",
      "body" : "`feature_fee_estimation.py` passes locally, and doesn't seem related.",
      "created_at" : "2019-08-26T03:00:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-524697669",
      "id" : 524697669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDY5NzY2OQ==",
      "updated_at" : "2019-08-26T03:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524697669",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/938827?v=4",
         "events_url" : "https://api.github.com/users/bhinesley/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bhinesley/followers",
         "following_url" : "https://api.github.com/users/bhinesley/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bhinesley/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bhinesley",
         "id" : 938827,
         "login" : "bhinesley",
         "node_id" : "MDQ6VXNlcjkzODgyNw==",
         "organizations_url" : "https://api.github.com/users/bhinesley/orgs",
         "received_events_url" : "https://api.github.com/users/bhinesley/received_events",
         "repos_url" : "https://api.github.com/users/bhinesley/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bhinesley/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bhinesley/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bhinesley"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n> CWallet::ImportPrivKeys() in previous code block already imports the\r\nwpkh script\r\n\r\nDo you know where this happens? That function doesn't seem to do it directly, at least.",
      "created_at" : "2019-08-26T10:04:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-524802368",
      "id" : 524802368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDgwMjM2OA==",
      "updated_at" : "2019-08-26T10:04:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524802368",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It's done by `FillableSigningProvider::ImplicitlyLearnRelatedKeyScripts()`:\r\nhttps://github.com/bitcoin/bitcoin/blob/adff8fe32101b2c007a85415c3ec565a7f137252/src/script/signingprovider.cpp#L87-L92\r\n\r\nHere's a stack trace showing how it's called by `CWallet::ImportPrivKeys()`:\r\n```\r\n(gdb) bt\r\n#0  FillableSigningProvider::ImplicitlyLearnRelatedKeyScripts (this=0x555556634590, pubkey=...) at script/signingprovider.cpp:73\r\n#1  0x0000555555c4319f in FillableSigningProvider::AddKeyPubKey (this=0x555556634590, key=..., pubkey=...) at script/signingprovider.cpp:109\r\n#2  0x0000555555ae8454 in CWallet::AddKeyPubKeyInner (this=0x555556634590, key=..., pubkey=...) at wallet/wallet.cpp:4913\r\n#3  0x0000555555ac5ba4 in CWallet::AddKeyPubKeyWithDB (this=0x555556634590, batch=..., secret=..., pubkey=...) at wallet/wallet.cpp:370\r\n#4  0x0000555555acfb9c in CWallet::ImportPrivKeys (this=0x555556634590, privkey_map=std::map with 1 element = {...}, timestamp=1)\r\n    at wallet/wallet.cpp:1820\r\n#5  0x0000555555b80e99 in importprivkey (request=...) at wallet/rpcdump.cpp:189\r\n```",
      "created_at" : "2019-08-26T20:37:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-525022017",
      "id" : 525022017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNTAyMjAxNw==",
      "updated_at" : "2019-08-26T20:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/525022017",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/938827?v=4",
         "events_url" : "https://api.github.com/users/bhinesley/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bhinesley/followers",
         "following_url" : "https://api.github.com/users/bhinesley/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bhinesley/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bhinesley",
         "id" : 938827,
         "login" : "bhinesley",
         "node_id" : "MDQ6VXNlcjkzODgyNw==",
         "organizations_url" : "https://api.github.com/users/bhinesley/orgs",
         "received_events_url" : "https://api.github.com/users/bhinesley/received_events",
         "repos_url" : "https://api.github.com/users/bhinesley/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bhinesley/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bhinesley/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bhinesley"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks! That's pretty sneaky, I was indeed searching for `AddCScript` or something similar, not something that bypasses everything and adds directly to the map.\r\n\r\nLooks good to me then. Code review ACK b6e7aa8c4c0162a3515a4efa93c2898a2c4d24b4",
      "created_at" : "2019-08-29T17:35:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-526286583",
      "id" : 526286583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjI4NjU4Mw==",
      "updated_at" : "2019-08-29T17:35:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526286583",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It _is_ sneaky. The author of these lines obviously didn't see it either. Thanks for the review!",
      "created_at" : "2019-08-29T18:18:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-526302760",
      "id" : 526302760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjMwMjc2MA==",
      "updated_at" : "2019-08-29T18:18:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526302760",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/938827?v=4",
         "events_url" : "https://api.github.com/users/bhinesley/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bhinesley/followers",
         "following_url" : "https://api.github.com/users/bhinesley/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bhinesley/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bhinesley",
         "id" : 938827,
         "login" : "bhinesley",
         "node_id" : "MDQ6VXNlcjkzODgyNw==",
         "organizations_url" : "https://api.github.com/users/bhinesley/orgs",
         "received_events_url" : "https://api.github.com/users/bhinesley/received_events",
         "repos_url" : "https://api.github.com/users/bhinesley/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bhinesley/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bhinesley/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bhinesley"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, the fix makes sense, haven't checked that the behaviour of ImplicitlyLearnRelatedKeyScripts behaves in the same way as ImportScripts though (with respect to writing to the wallet).\r\n\r\nI think this is fine. Light utACK b6e7aa8c4c0162a3515a4efa93c2898a2c4d24b4",
      "created_at" : "2019-08-30T01:46:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-526422797",
      "id" : 526422797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjQyMjc5Nw==",
      "updated_at" : "2019-08-30T01:46:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526422797",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This will prevent the segwit output script from being written to the wallet file. While `ImplicitlyLoadRelatedScripts` allowed for those same scripts to be loaded, if the wallet were to be loaded into an older version of Bitcoin Core (without segwit I think, don't remember when this was added, but probably with segwit), outputs involving such scripts will not be recognized as they won't be loaded into the wallet in any way.",
      "created_at" : "2019-08-30T01:56:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16724#issuecomment-526424873",
      "id" : 526424873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16724",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNjQyNDg3Mw==",
      "updated_at" : "2019-08-30T01:56:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/526424873",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
