[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4259#discussion_r13260339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13260339"
         }
      },
      "body" : "Does this section rely on getaddrinfo_a?",
      "commit_id" : "b28a3bee9f8250e083b715a98df7dd7208db0f37",
      "created_at" : "2014-05-31T09:47:07Z",
      "diff_hunk" : "@@ -71,9 +83,30 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n         }\n     }\n \n+#ifdef HAVE_GETADDRINFO_A",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#discussion_r13260339",
      "id" : 13260339,
      "original_commit_id" : "b28a3bee9f8250e083b715a98df7dd7208db0f37",
      "original_position" : 23,
      "path" : "src/netbase.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4259",
      "updated_at" : "2014-05-31T09:47:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13260339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4259#discussion_r13265068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13265068"
         }
      },
      "body" : "@sipa No, it doesn't.  But It would be unnecessary if getaddrinfo_a() is unavailable, since placing a call to inet_pton()/inet_addr() first is to avoid the extra thread inside getaddrinfo_a(), else getaddrinfo() can take care of everything.",
      "commit_id" : "b28a3bee9f8250e083b715a98df7dd7208db0f37",
      "created_at" : "2014-06-01T04:10:38Z",
      "diff_hunk" : "@@ -71,9 +83,30 @@ bool static LookupIntern(const char *pszName, std::vector<CNetAddr>& vIP, unsign\n         }\n     }\n \n+#ifdef HAVE_GETADDRINFO_A",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#discussion_r13265068",
      "id" : 13265068,
      "original_commit_id" : "b28a3bee9f8250e083b715a98df7dd7208db0f37",
      "original_position" : 23,
      "path" : "src/netbase.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4259",
      "updated_at" : "2014-06-01T04:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/13265068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "Seems straightforward enough, but simplistic.  getaddrinfo_a() allows for async callbacks, eliminating the need for any wait loop.\r\n",
      "created_at" : "2014-06-04T18:58:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45135825",
      "id" : 45135825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-04T18:58:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45135825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik But the point here is only to make the DNS lookup interruptible, I think getting a hand-rolled callback-based system to cooperate with boost threads will be complicated.\r\nMight as well switch to boost::asio which implements all this already, and in a cross-platform way.\r\n",
      "created_at" : "2014-06-04T19:09:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45137363",
      "id" : 45137363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-04T19:09:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45137363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Yes using Asio sounds a better way, let me test it locally and report back.",
      "created_at" : "2014-06-05T04:34:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45180123",
      "id" : 45180123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-05T04:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45180123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "@4tar Though you may run into other, new problems there, as the rest of the net/netbase code doesn't use boost::asio, and you have to convert addresses, BoostAsioToCNetAddr which I introduced with the subnet matching may come in handy here, see ee21912 and 21bf3d2.",
      "created_at" : "2014-06-05T04:42:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45180430",
      "id" : 45180430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-05T04:42:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45180430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Boost ASIO is pretty awful in my experience, it's buggy, non-performant (it spends a bunch of time thrashing the allocator), results in random deadlocks in even moderately complex code, and its virtually impossible to debug.\r\n\r\nI'm not clear on what needs to change here wrt DNS resolutionÃ¢ÂÂ we've already move the dnsseeds into a thread. If we're doing anything performance critical depending on DNS that in and of itself might be the mistake. :)",
      "created_at" : "2014-06-05T08:02:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45191467",
      "id" : 45191467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-05T08:02:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45191467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell This is not about performance, it doesn't matter at this particular point. The pull just aims to make shutdown more reliable. getaddrinfo is not interruptible, which means that shutdown of bitcoind will wait which may take a long time.\r\n\r\nIf boost::asio is so awful (which I sort-of agree on, at least the debugging aspect), any points for a better network library we could switch to for at least RPC? I'm sure this is something that has been done and re-done over the ages and it serves us no purpose to try to reinvent everything.\r\n",
      "created_at" : "2014-06-05T08:09:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45192088",
      "id" : 45192088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-05T08:09:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45192088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Wow, didn't notice your previous comment and had done it again...  Yes, this method is pretty handy for this purpose, I'd like suggest to put it as another CNetAddr constructor instead of a independent function.  Actually I've implement it so, will submit a PR including this change soon, and I have to say that boost::asio was discovered to be not perfect for this case...\r\n\r\n",
      "created_at" : "2014-06-06T18:34:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-45370094",
      "id" : 45370094,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-06T18:34:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45370094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/882771?v=3",
         "events_url" : "https://api.github.com/users/4tar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/4tar/followers",
         "following_url" : "https://api.github.com/users/4tar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/4tar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/4tar",
         "id" : 882771,
         "login" : "4tar",
         "organizations_url" : "https://api.github.com/users/4tar/orgs",
         "received_events_url" : "https://api.github.com/users/4tar/received_events",
         "repos_url" : "https://api.github.com/users/4tar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/4tar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/4tar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/4tar"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/p4259_b28a3bee9f8250e083b715a98df7dd7208db0f37/ for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-23T06:00:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4259#issuecomment-46808766",
      "id" : 46808766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4259",
      "updated_at" : "2014-06-23T06:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46808766",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   }
]
