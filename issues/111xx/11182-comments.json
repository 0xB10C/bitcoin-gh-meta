[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135608494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135608494"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`self.nodes[2].p2p.block_receive_map`, right?",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T19:14:56Z",
      "diff_hunk" : "@@ -195,28 +190,26 @@ def run_test(self):\n         connect_nodes(self.nodes[1], 2)\n \n         self.log.info(\"Add P2P connection to node2\")\n-        node2 = BaseNode()\n-        connections.append(NodeConn('127.0.0.1', p2p_port(2), self.nodes[2], node2))\n-        node2.add_connection(connections[1])\n-        node2.wait_for_verack()\n+        self.nodes[2].add_p2p_connection(p2p_conn_type=BaseNode)\n+        self.nodes[2].p2p.wait_for_verack()\n \n         self.log.info(\"Wait for node2 reach current tip. Test that it has propagated all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(2, block))\n-        node2.send_message(getdata_request)\n+        self.nodes[2].send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # NodeConnCB objects.\n-        wait_until(lambda: sorted(blocks) == sorted(list(node2.block_receive_map.keys())), timeout=5, lock=mininode_lock)\n+        wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].block_receive_map.keys())), timeout=5, lock=mininode_lock)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135608494",
      "id" : 135608494,
      "original_commit_id" : "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "original_position" : 66,
      "path" : "test/functional/example_test.py",
      "position" : null,
      "pull_request_review_id" : 59039098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135608494",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135609557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135609557"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Where is `add_p2p_connections` defined? Is it virtual?",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T19:19:41Z",
      "diff_hunk" : "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+        if self.p2p is None:\n+            self.p2p = self.p2ps[0]\n+        self.p2p_connected = True\n+        self.p2p_ever_connected = True\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        if not self.p2p_ever_connected:\n+            self.add_p2p_connections()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135609557",
      "id" : 135609557,
      "original_commit_id" : "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "original_position" : 81,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 59039098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135609557",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135610294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135610294"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems very common to refer to `self.nodes[i].p2p`. Maybe this method should return the new connection so the client code can assign to a local variable.",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T19:23:04Z",
      "diff_hunk" : "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135610294",
      "id" : 135610294,
      "original_commit_id" : "c3730eff46b498df59cd0b80632dceb9de35fcd3",
      "original_position" : 66,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 67,
      "pull_request_review_id" : 59039098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135610294",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647278"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647278"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yes. Thank you!",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T22:03:20Z",
      "diff_hunk" : "@@ -195,28 +190,26 @@ def run_test(self):\n         connect_nodes(self.nodes[1], 2)\n \n         self.log.info(\"Add P2P connection to node2\")\n-        node2 = BaseNode()\n-        connections.append(NodeConn('127.0.0.1', p2p_port(2), self.nodes[2], node2))\n-        node2.add_connection(connections[1])\n-        node2.wait_for_verack()\n+        self.nodes[2].add_p2p_connection(p2p_conn_type=BaseNode)\n+        self.nodes[2].p2p.wait_for_verack()\n \n         self.log.info(\"Wait for node2 reach current tip. Test that it has propagated all the blocks to us\")\n \n         getdata_request = msg_getdata()\n         for block in blocks:\n             getdata_request.inv.append(CInv(2, block))\n-        node2.send_message(getdata_request)\n+        self.nodes[2].send_message(getdata_request)\n \n         # wait_until() will loop until a predicate condition is met. Use it to test properties of the\n         # NodeConnCB objects.\n-        wait_until(lambda: sorted(blocks) == sorted(list(node2.block_receive_map.keys())), timeout=5, lock=mininode_lock)\n+        wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].block_receive_map.keys())), timeout=5, lock=mininode_lock)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647278",
      "id" : 135647278,
      "in_reply_to_id" : 135608494,
      "original_commit_id" : "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "original_position" : 66,
      "path" : "test/functional/example_test.py",
      "position" : null,
      "pull_request_review_id" : 59082154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647278",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647329"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647329"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good idea. I'll add that",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T22:03:36Z",
      "diff_hunk" : "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647329",
      "id" : 135647329,
      "in_reply_to_id" : 135610294,
      "original_commit_id" : "c3730eff46b498df59cd0b80632dceb9de35fcd3",
      "original_position" : 66,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : 67,
      "pull_request_review_id" : 59082206,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647329",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647541"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oops. This is vestigial. I previously had an `add_p2p_connections()`, but it turned out to not be very useful. I'll fix this up. Thanks for pointing this out.",
      "commit_id" : "278a5ef6ae6c1c121af363cae676343a113e7109",
      "created_at" : "2017-08-28T22:04:45Z",
      "diff_hunk" : "@@ -141,6 +160,33 @@ def node_encrypt_wallet(self, passphrase):\n         self.rpc = None\n         self.rpc_connected = False\n \n+    def add_p2p_connection(self, p2p_conn_type, dstaddr='127.0.0.1', dstport=None, services=NODE_NETWORK, send_version=True):\n+        \"\"\"Add a p2p connection to the node.\"\"\"\n+        if dstport is None:\n+            dstport = p2p_port(self.index)\n+        p2p_conn = p2p_conn_type()\n+        self.p2ps.append(p2p_conn)\n+        p2p_conn.add_connection(NodeConn(dstaddr, dstport, self.rpc, p2p_conn, services=services, send_version=send_version))\n+        if self.p2p is None:\n+            self.p2p = self.p2ps[0]\n+        self.p2p_connected = True\n+        self.p2p_ever_connected = True\n+\n+    def send_message(self, message):\n+        \"\"\"Send a p2p message to the node.\"\"\"\n+        if not self.p2p_ever_connected:\n+            self.add_p2p_connections()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#discussion_r135647541",
      "id" : 135647541,
      "in_reply_to_id" : 135609557,
      "original_commit_id" : "ba30027a70c328e45bfa7ce4afc100c847da5d2c",
      "original_position" : 81,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 59082441,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11182",
      "updated_at" : "2017-09-01T17:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135647541",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jimpo - thanks for the review. I'm glad you like the new framework. My aim was to make test-writing easier and quicker for contributors, so I appreciate the feedback.\r\n\r\nI think I've addressed your review comments.",
      "created_at" : "2017-08-29T15:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-325694720",
      "id" : 325694720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-08-29T15:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325694720",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2017-09-01T17:01:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-326633134",
      "id" : 326633134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-09-01T17:01:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326633134",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2017-09-14T14:53:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-329507649",
      "id" : 329507649,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-09-14T14:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329507649",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2017-09-20T13:49:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-330857445",
      "id" : 330857445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-09-20T13:49:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330857445",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "## p2p vs p2ps\r\n\r\nI am not 100% sure about the `p2p` and `p2ps` magic. What would somebody expect in a case where two p2p connections are made, we disconnect the first peer and call `send_message`?\r\n\r\nWhen we disconnect a peer should the `p2p` variable be updated? Maybe `p2p` should be a method which returns the first connection in the `p2ps` array.\r\n\r\nImo the behavior is not really predictable and a cleaner way would be to always call `p2ps[0]` or whatever index is needed, despite less syntax sugar.\r\n\r\n## import *\r\n\r\nSince you modified the files in this patch, do you think it would be a good idea to replace `import *` with specific imports? (exceptions could be `p2p-segwit` and `p2p-compactblocks` since the imports would be quite big).\r\n\r\n## ACK\r\n\r\nI think this patch is really helpful, way cleaner peer connection initialization.\r\n\r\nIf the above mentioned points are not relevant, ACK https://github.com/bitcoin/bitcoin/pull/11182/commits/5f9294759df348eca9a6361f7e98360fc07cd3f4",
      "created_at" : "2017-09-21T21:12:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331283336",
      "id" : 331283336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-09-21T21:12:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331283336",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/226170?v=4",
         "events_url" : "https://api.github.com/users/mess110/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mess110/followers",
         "following_url" : "https://api.github.com/users/mess110/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mess110/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mess110",
         "id" : 226170,
         "login" : "mess110",
         "organizations_url" : "https://api.github.com/users/mess110/orgs",
         "received_events_url" : "https://api.github.com/users/mess110/received_events",
         "repos_url" : "https://api.github.com/users/mess110/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mess110/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mess110/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mess110"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @mess110 . Responses:\r\n\r\n**p2p vs p2ps**: You're right that this is syntactic sugar, but I think being able to use `node.p2p` in place of `node.p2ps[0]` is useful. Most tests that use the p2p interface will only have a single p2p connection to the node, so writing `node.p2ps[0]` many times is redundant and distracts from the intent of the test. However, your feedback has convinced me to remove some of the syntactic sugar and simplify the implementation:\r\n\r\n- I've removed the `ever_connected` latch and automatic connecting on first `send_message`. Test cases should explicitly create a p2p connection if they wish to use it.\r\n- I've turned `self.p2p` into a property which returns the `p2ps[0]`\r\n- I've removed the redundant `connected` variable, which should always be equivalent to `p2ps is []`\r\n\r\n**wildcard imports**: yes, I'd love to clean this up, but I meet resistance whenever I try to do that! I've left it out of this PR so this only focuses on adding the p2p interface.",
      "created_at" : "2017-09-22T14:45:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11182#issuecomment-331467540",
      "id" : 331467540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11182",
      "updated_at" : "2017-09-22T14:45:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331467540",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
