[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11196"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135976260"
         }
      },
      "author_association" : "OWNER",
      "body" : "This comment doesn't seem to apply in the current form of the code.",
      "commit_id" : "9c4f8b5188a53f39c0849f860c8227fbb5a77bc6",
      "created_at" : "2017-08-30T05:54:58Z",
      "diff_hunk" : "@@ -5,9 +5,36 @@\n \n #include \"cleanse.h\"\n \n-#include <openssl/crypto.h>\n+#include <string.h>\n \n+/* Use asm directives to protect OPENSSL_cleanse.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976260",
      "id" : 135976260,
      "original_commit_id" : "084674dc9420c5151880ac38c14e0bd342fe931c",
      "original_position" : 7,
      "path" : "src/support/cleanse.cpp",
      "position" : null,
      "pull_request_review_id" : 59451561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11196",
      "updated_at" : "2017-08-30T07:27:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135976260",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11196"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135976563"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'm not sure OpenSSL's headers expose such a macro, and even if they do, this risks breaking things if OpenSSL gets removed entirely at some point. I believe you just want `_MSC_VER` here to detect MSVC (as the `else` branch should work fine in MinGW).",
      "commit_id" : "9c4f8b5188a53f39c0849f860c8227fbb5a77bc6",
      "created_at" : "2017-08-30T05:57:41Z",
      "diff_hunk" : "@@ -5,9 +5,36 @@\n \n #include \"cleanse.h\"\n \n-#include <openssl/crypto.h>\n+#include <string.h>\n \n+/* Use asm directives to protect OPENSSL_cleanse.\n+ *\n+ * Compilers have a bad habit of removing \"superfluous\" memset calls that\n+ * are trying to zero memory. For example, when memset()ing a buffer and\n+ * then free()ing it, the compiler might decide that the memset is\n+ * unobservable and thus can be removed.\n+ *\n+ * Previously we tried to stop this by a) implementing memset in assembly\n+ * on x86 and b) putting the function in its own file for other platforms.\n+ *\n+ * This change removes those tricks in favour of using asm directives to\n+ * scare the compiler away. As best as our compiler folks can tell, this is\n+ * sufficient and will continue to be so.\n+ *\n+ * Adam Langley <agl@google.com>\n+ * Commit: ad1907fe73334d6c696c8539646c21b11178f20f\n+ * BoringSSL (LICENSE: ISC)\n+ */\n void memory_cleanse(void *ptr, size_t len)\n {\n-    OPENSSL_cleanse(ptr, len);\n+    memset(ptr, 0, len);\n+\n+    /* As best as we can tell, this is sufficient to break any optimisations that\n+       might try to eliminate \"superfluous\" memsets. If there's an easy way to\n+       detect memset_s, it would be better to use that. */\n+#if defined(OPENSSL_WINDOWS)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976563",
      "id" : 135976563,
      "original_commit_id" : "084674dc9420c5151880ac38c14e0bd342fe931c",
      "original_position" : 33,
      "path" : "src/support/cleanse.cpp",
      "position" : null,
      "pull_request_review_id" : 59451561,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11196",
      "updated_at" : "2017-08-30T07:27:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135976563",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Nits addressed (don't push code late at night!)",
      "created_at" : "2017-08-30T07:28:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325906731",
      "id" : 325906731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11196",
      "updated_at" : "2017-08-30T07:28:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325906731",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/69154?v=4",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK!\r\n\r\nToo bad there is no bulletproof way to detect `memset_s(Ã¢ÂÂ¦)` :-(",
      "created_at" : "2017-08-30T08:20:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325918807",
      "id" : 325918807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11196",
      "updated_at" : "2017-08-30T08:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325918807",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 9c4f8b5188a53f39c0849f860c8227fbb5a77bc6",
      "created_at" : "2017-08-30T08:31:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325921631",
      "id" : 325921631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11196",
      "updated_at" : "2017-08-30T08:31:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325921631",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK - minimizing OpenSSL exposure is good. \r\n\r\nISC seems less strict than even MIT, appears compatible. ",
      "created_at" : "2017-08-30T16:18:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326042739",
      "id" : 326042739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11196",
      "updated_at" : "2017-08-30T16:18:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326042739",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/14876936?v=4",
         "events_url" : "https://api.github.com/users/Leviathn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Leviathn/followers",
         "following_url" : "https://api.github.com/users/Leviathn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Leviathn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Leviathn",
         "id" : 14876936,
         "login" : "Leviathn",
         "organizations_url" : "https://api.github.com/users/Leviathn/orgs",
         "received_events_url" : "https://api.github.com/users/Leviathn/received_events",
         "repos_url" : "https://api.github.com/users/Leviathn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Leviathn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Leviathn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Leviathn"
      }
   }
]
