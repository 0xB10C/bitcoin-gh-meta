[
   {
      "body" : "Hmm, we should also handle the case where they have orphans in their locator similarly (ie parse their locator further back to find the first locator entry that is on our main chain).",
      "created_at" : "2017-08-22T21:44:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-324160641",
      "id" : 324160641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-22T21:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324160641",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt This is the case where the locator is empty and only the stopHash is set. It's a special case request for a particular header by hash.",
      "created_at" : "2017-08-22T22:03:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-324164657",
      "id" : 324164657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-22T22:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324164657",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "body" : "@jimpo yes, sorry, I had since edited my comment to note that we should do something similar for locator-present requests.",
      "created_at" : "2017-08-22T22:13:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-324166578",
      "id" : 324166578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-22T22:13:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324166578",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r134616874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134616874"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Generally referred to as \"Orphans\" not \"SideBlocks\".",
      "commit_id" : "d07a788f256427f861b2bac5cf2784a5ed26e654",
      "created_at" : "2017-08-22T22:24:03Z",
      "diff_hunk" : "@@ -725,6 +725,17 @@ void Misbehaving(NodeId pnode, int howmuch)\n // blockchain -> download logic notification\n //\n \n+// To prevent fingerprinting attacks, only send blocks/headers outside of the\n+// active chain if they are no more than a month older (both in time, and in\n+// best equivalent proof of work) than the best header chain we know about.\n+static bool SideBlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r134616874",
      "id" : 134616874,
      "original_commit_id" : "4f559f1d884e6999cf2c7b31741664238695752f",
      "original_position" : 7,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 57929673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113",
      "updated_at" : "2017-09-08T20:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134616874",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Concept ACK, good catch.  Would be great to have a p2p test case for this too.",
      "created_at" : "2017-08-24T20:49:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-324753419",
      "id" : 324753419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-24T20:49:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324753419",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar Added a test with 58bc23d.",
      "created_at" : "2017-08-26T00:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-325063036",
      "id" : 325063036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-26T00:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325063036",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "body" : "Code review ACK, and thanks for writing the test!  I just looked at the travis failure, and it appears to be a subtle merge conflict because the semantics of `wait_until` was just changed in master, see #11068.",
      "created_at" : "2017-08-26T02:07:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-325073512",
      "id" : 325073512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-26T02:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325073512",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "utACK fed7483751cc94a7ce27fc6057a2080af8178223. Only had a casual look at the tests.",
      "created_at" : "2017-08-27T19:30:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-325219111",
      "id" : 325219111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-27T19:30:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325219111",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 3d61d72",
      "created_at" : "2017-08-30T19:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-326089822",
      "id" : 326089822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-08-30T19:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/326089822",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r136873279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136873279"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Constants should be caps with snake case",
      "commit_id" : "d07a788f256427f861b2bac5cf2784a5ed26e654",
      "created_at" : "2017-09-04T22:13:42Z",
      "diff_hunk" : "@@ -725,6 +725,17 @@ void Misbehaving(NodeId pnode, int howmuch)\n // blockchain -> download logic notification\n //\n \n+// To prevent fingerprinting attacks, only send blocks/headers outside of the\n+// active chain if they are no more than a month older (both in time, and in\n+// best equivalent proof of work) than the best header chain we know about.\n+static bool OrphanBlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+{\n+    static const int nOneMonth = 30 * 24 * 60 * 60;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r136873279",
      "id" : 136873279,
      "original_commit_id" : "3d61d728d114b26eb2b49292f0da32ce4c90b3c3",
      "original_position" : 9,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 60471109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113",
      "updated_at" : "2017-09-08T20:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136873279",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r136873326"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136873326"
         }
      },
      "author_association" : "MEMBER",
      "body" : "snake_case argument names",
      "commit_id" : "d07a788f256427f861b2bac5cf2784a5ed26e654",
      "created_at" : "2017-09-04T22:15:00Z",
      "diff_hunk" : "@@ -725,6 +725,17 @@ void Misbehaving(NodeId pnode, int howmuch)\n // blockchain -> download logic notification\n //\n \n+// To prevent fingerprinting attacks, only send blocks/headers outside of the\n+// active chain if they are no more than a month older (both in time, and in\n+// best equivalent proof of work) than the best header chain we know about.\n+static bool OrphanBlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r136873326",
      "id" : 136873326,
      "original_commit_id" : "3d61d728d114b26eb2b49292f0da32ce4c90b3c3",
      "original_position" : 7,
      "path" : "src/net_processing.cpp",
      "position" : 22,
      "pull_request_review_id" : 60471109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113",
      "updated_at" : "2017-09-08T20:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/136873326",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r137432772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137432772"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`consensusParams` is camelCase everywhere else in the file, so I think it's better to leave as is. Feel free to replace everywhere in a separate PR.",
      "commit_id" : "d07a788f256427f861b2bac5cf2784a5ed26e654",
      "created_at" : "2017-09-07T02:09:24Z",
      "diff_hunk" : "@@ -725,6 +725,17 @@ void Misbehaving(NodeId pnode, int howmuch)\n // blockchain -> download logic notification\n //\n \n+// To prevent fingerprinting attacks, only send blocks/headers outside of the\n+// active chain if they are no more than a month older (both in time, and in\n+// best equivalent proof of work) than the best header chain we know about.\n+static bool OrphanBlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r137432772",
      "id" : 137432772,
      "in_reply_to_id" : 136873326,
      "original_commit_id" : "3d61d728d114b26eb2b49292f0da32ce4c90b3c3",
      "original_position" : 7,
      "path" : "src/net_processing.cpp",
      "position" : 22,
      "pull_request_review_id" : 61098230,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113",
      "updated_at" : "2017-09-08T20:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137432772",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK.\r\n\r\nPerhaps a small test nit, if I'm not misreading the test, I think the test would pass if it started failing for all really old headers even if they're on the active chain.  We should have a check that that is still successful.   We should also include a note in the tests that we don't test both criteria (both time and PET) as those tests would be good to add later.\r\n\r\nobNitpickSummoning: @sipa you're okay with calling this function 'orphanblock' rather than something like 'staleblock'? :)\r\n\r\n",
      "created_at" : "2017-09-08T18:35:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-328181819",
      "id" : 328181819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-09-08T18:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328181819",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gmaxwell Thanks, added another test for that case. What do you mean by PET?\r\n\r\nAlso, yeah, I don't like the term orphan block (because it's ambiguous). Is stale block the preferred term now? I originally named it \"side block\" but I hear no one else calls it that.\r\n\r\nEDIT: Nevermind, PET = Proof (of work) Equivalent Time. Will add the comment.",
      "created_at" : "2017-09-08T20:21:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#issuecomment-328204347",
      "id" : 328204347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11113",
      "updated_at" : "2017-09-08T20:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/328204347",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r137891976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137891976"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Style-only PRs are highly discouraged, developer guide says to use the style in all new code regardless of style around it, because eventually it will all be replaced",
      "commit_id" : "d07a788f256427f861b2bac5cf2784a5ed26e654",
      "created_at" : "2017-09-08T21:19:00Z",
      "diff_hunk" : "@@ -725,6 +725,17 @@ void Misbehaving(NodeId pnode, int howmuch)\n // blockchain -> download logic notification\n //\n \n+// To prevent fingerprinting attacks, only send blocks/headers outside of the\n+// active chain if they are no more than a month older (both in time, and in\n+// best equivalent proof of work) than the best header chain we know about.\n+static bool OrphanBlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Params& consensusParams)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11113#discussion_r137891976",
      "id" : 137891976,
      "in_reply_to_id" : 136873326,
      "original_commit_id" : "3d61d728d114b26eb2b49292f0da32ce4c90b3c3",
      "original_position" : 7,
      "path" : "src/net_processing.cpp",
      "position" : 22,
      "pull_request_review_id" : 61625488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11113",
      "updated_at" : "2017-09-08T21:19:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/137891976",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   }
]
