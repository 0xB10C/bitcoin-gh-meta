[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511716"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511716"
         }
      },
      "body" : "Do you use typeof anywhere?",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-20T23:01:13Z",
      "diff_hunk" : "@@ -22,6 +22,8 @@\n \n #include <boost/tuple/tuple.hpp>\n #include <boost/type_traits/is_fundamental.hpp>\n+#include <boost/typeof/typeof.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511716",
      "id" : 16511716,
      "original_commit_id" : "e979b9fc8df49652f76a702018bae4f3f212a188",
      "original_position" : 4,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511900"
         }
      },
      "body" : "    bool fRead = boost::is_same<Operation, CSerActionUnserialize>();",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-20T23:06:02Z",
      "diff_hunk" : "@@ -22,6 +22,8 @@\n \n #include <boost/tuple/tuple.hpp>\n #include <boost/type_traits/is_fundamental.hpp>\n+#include <boost/typeof/typeof.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511900",
      "id" : 16511900,
      "original_commit_id" : "e979b9fc8df49652f76a702018bae4f3f212a188",
      "original_position" : 4,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/993296?v=3",
         "events_url" : "https://api.github.com/users/kdomanski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kdomanski/followers",
         "following_url" : "https://api.github.com/users/kdomanski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kdomanski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kdomanski",
         "id" : 993296,
         "login" : "kdomanski",
         "organizations_url" : "https://api.github.com/users/kdomanski/orgs",
         "received_events_url" : "https://api.github.com/users/kdomanski/received_events",
         "repos_url" : "https://api.github.com/users/kdomanski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kdomanski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kdomanski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kdomanski"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511976"
         }
      },
      "body" : "Oh, right; see my next commit to get rid of that :)",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-20T23:08:09Z",
      "diff_hunk" : "@@ -22,6 +22,8 @@\n \n #include <boost/tuple/tuple.hpp>\n #include <boost/type_traits/is_fundamental.hpp>\n+#include <boost/typeof/typeof.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16511976",
      "id" : 16511976,
      "original_commit_id" : "e979b9fc8df49652f76a702018bae4f3f212a188",
      "original_position" : 4,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16511976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630004"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630004"
         }
      },
      "body" : "pthis shouldn't be needed anymore.",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-23T10:18:36Z",
      "diff_hunk" : "@@ -83,20 +85,23 @@ class CAddress : public CService\n \n         void Init();\n \n-        IMPLEMENT_SERIALIZE\n-            (\n-             CAddress* pthis = const_cast<CAddress*>(this);\n-             CService* pip = (CService*)pthis;\n-             if (fRead)\n-                 pthis->Init();\n-             if (nType & SER_DISK)\n-                 READWRITE(nVersion);\n-             if ((nType & SER_DISK) ||\n-                 (nVersion >= CADDR_TIME_VERSION && !(nType & SER_GETHASH)))\n-                 READWRITE(nTime);\n-             READWRITE(nServices);\n-             READWRITE(*pip);\n-            )\n+        IMPLEMENT_SERIALIZE;\n+\n+        template <typename Stream, typename Operation>\n+        inline void SerializationOp(Stream& s, Operation ser_action, int nType, int nVersion) {\n+            bool fRead = ser_action.ForRead();\n+\n+            CAddress* pthis = const_cast<CAddress*>(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630004",
      "id" : 16630004,
      "original_commit_id" : "ba4d03ab24c4027344a2c89f30ce7ba2743783c5",
      "original_position" : 47,
      "path" : "src/protocol.h",
      "position" : 47,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630006"
         }
      },
      "body" : "pthis shouldn't be needed anymore.",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-23T10:19:06Z",
      "diff_hunk" : "@@ -24,8 +24,12 @@ class RecentRequestEntry\n     QDateTime date;\n     SendCoinsRecipient recipient;\n \n-    IMPLEMENT_SERIALIZE\n-    (\n+    IMPLEMENT_SERIALIZE;\n+\n+    template <typename Stream, typename Operation>\n+    inline void SerializationOp(Stream& s, Operation ser_action, int nType, int nVersion) {\n+        bool fRead = ser_action.ForRead();\n+\n         RecentRequestEntry* pthis = const_cast<RecentRequestEntry*>(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630006",
      "id" : 16630006,
      "original_commit_id" : "ba4d03ab24c4027344a2c89f30ce7ba2743783c5",
      "original_position" : 12,
      "path" : "src/qt/recentrequeststablemodel.h",
      "position" : 12,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630009"
         }
      },
      "body" : "Not needed.",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-23T10:19:27Z",
      "diff_hunk" : "@@ -23,6 +23,7 @@\n #include <boost/tuple/tuple.hpp>\n #include <boost/type_traits/is_fundamental.hpp>\n \n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16630009",
      "id" : 16630009,
      "original_commit_id" : "ba4d03ab24c4027344a2c89f30ce7ba2743783c5",
      "original_position" : 4,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16630009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Untested ACK.\r\n\r\nThere are a few unnecessary constcasted pthis pointers left (more than the ones I commented on), but perhaps let's fix that afterwards, to minimize the diff here.",
      "created_at" : "2014-08-23T10:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53148999",
      "id" : 53148999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T10:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53148999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The pointers I added were called **thisPtr**. Others were here before. I'd rather not mess with them in this particular PR.",
      "created_at" : "2014-08-23T10:25:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53149086",
      "id" : 53149086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T10:25:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53149086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/993296?v=3",
         "events_url" : "https://api.github.com/users/kdomanski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kdomanski/followers",
         "following_url" : "https://api.github.com/users/kdomanski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kdomanski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kdomanski",
         "id" : 993296,
         "login" : "kdomanski",
         "organizations_url" : "https://api.github.com/users/kdomanski/orgs",
         "received_events_url" : "https://api.github.com/users/kdomanski/received_events",
         "repos_url" : "https://api.github.com/users/kdomanski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kdomanski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kdomanski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kdomanski"
      }
   },
   {
      "body" : "Fair enough. I was indeed referring to clutter code that was already there, that is made obsolete by the new serialization structure here. Let's not touch those for now. ",
      "created_at" : "2014-08-23T10:28:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53149125",
      "id" : 53149125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T10:28:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53149125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Normal network sync seems to work fine.",
      "created_at" : "2014-08-23T10:31:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53149196",
      "id" : 53149196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T10:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53149196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I killed that newline.",
      "created_at" : "2014-08-23T10:47:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53149503",
      "id" : 53149503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T10:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53149503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/993296?v=3",
         "events_url" : "https://api.github.com/users/kdomanski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kdomanski/followers",
         "following_url" : "https://api.github.com/users/kdomanski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kdomanski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kdomanski",
         "id" : 993296,
         "login" : "kdomanski",
         "organizations_url" : "https://api.github.com/users/kdomanski/orgs",
         "received_events_url" : "https://api.github.com/users/kdomanski/received_events",
         "repos_url" : "https://api.github.com/users/kdomanski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kdomanski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kdomanski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kdomanski"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16633136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16633136"
         }
      },
      "body" : "Any chance you can move the \\s left? They were off my screen on github and they're past 80 chars when they dont seem to need to be.",
      "commit_id" : "31e9a8384a77947f6777d035992f4734618ed206",
      "created_at" : "2014-08-23T22:51:15Z",
      "diff_hunk" : "@@ -79,48 +87,26 @@ enum\n     SER_GETHASH         = (1 << 2),\n };\n \n-#define IMPLEMENT_SERIALIZE(statements)    \\\n-    unsigned int GetSerializeSize(int nType, int nVersion) const  \\\n-    {                                           \\\n-        CSerActionGetSerializeSize ser_action;  \\\n-        const bool fGetSize = true;             \\\n-        const bool fWrite = false;              \\\n-        const bool fRead = false;               \\\n-        unsigned int nSerSize = 0;              \\\n-        ser_streamplaceholder s;                \\\n-        assert(fGetSize||fWrite||fRead); /* suppress warning */ \\\n-        s.nType = nType;                        \\\n-        s.nVersion = nVersion;                  \\\n-        {statements}                            \\\n-        return nSerSize;                        \\\n-    }                                           \\\n-    template<typename Stream>                   \\\n-    void Serialize(Stream& s, int nType, int nVersion) const  \\\n-    {                                           \\\n-        CSerActionSerialize ser_action;         \\\n-        const bool fGetSize = false;            \\\n-        const bool fWrite = true;               \\\n-        const bool fRead = false;               \\\n-        unsigned int nSerSize = 0;              \\\n-        assert(fGetSize||fWrite||fRead); /* suppress warning */ \\\n-        {statements}                            \\\n-    }                                           \\\n-    template<typename Stream>                   \\\n-    void Unserialize(Stream& s, int nType, int nVersion)  \\\n-    {                                           \\\n-        CSerActionUnserialize ser_action;       \\\n-        const bool fGetSize = false;            \\\n-        const bool fWrite = false;              \\\n-        const bool fRead = true;                \\\n-        unsigned int nSerSize = 0;              \\\n-        assert(fGetSize||fWrite||fRead); /* suppress warning */ \\\n-        {statements}                            \\\n-    }\n-\n-#define READWRITE(obj)      (nSerSize += ::SerReadWrite(s, (obj), nType, nVersion, ser_action))\n-\n-\n+#define READWRITE(obj)      (::SerReadWrite(s, (obj), nType, nVersion, ser_action))\n \n+/* Implement three methods for serializable objects. These are actually wrappers over\n+ * \"SerializationOp\" template, which implements the body of each class' serialization\n+ * code. Adding \"IMPLEMENT_SERIALIZE\" in the body of the class causes these wrappers to be\n+ * added as members. */\n+#define IMPLEMENT_SERIALIZE                                                                         \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#discussion_r16633136",
      "id" : 16633136,
      "original_commit_id" : "a1323f37aaf78ae15fc450f17a053ff2e5e8546c",
      "original_position" : 66,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4737",
      "updated_at" : "2014-08-31T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/16633136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Is it just me or are all the const_casts in serialize methods unnecessary now?",
      "created_at" : "2014-08-23T22:57:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53169409",
      "id" : 53169409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T22:57:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53169409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Would it be more readable to change the name of IMPLEMENT_SERIALIZE now that its not implementing it, but just wrapping the implementation usually immediately below?\r\nSomething like ADD_SERIALIZE_METHODS or so.",
      "created_at" : "2014-08-23T22:58:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53169447",
      "id" : 53169447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T22:58:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53169447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Indeed, all those const_cast's are unnecessary now. To keep the patch small it doesn't hurt to leave those as-in for now (though I wouldn't object to getting rid of them either).",
      "created_at" : "2014-08-23T23:15:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53169938",
      "id" : 53169938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T23:15:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53169938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "`SerializationOp` is never a const method, so it can't be called on const objects indeed. However, the added `Serialize` and `GetSerializeSize` methods added by IMPLEMENT_SERIALIZE do the un-const cast before calling `SerializationOp`, essentially making the assumption that `GetSerializationOp` will not modify the state of the object when called in serialization mode.",
      "created_at" : "2014-08-23T23:19:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53170038",
      "id" : 53170038,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-23T23:19:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53170038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Moved the backslashes left.",
      "created_at" : "2014-08-24T09:12:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53185063",
      "id" : 53185063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-24T18:24:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53185063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/993296?v=3",
         "events_url" : "https://api.github.com/users/kdomanski/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kdomanski/followers",
         "following_url" : "https://api.github.com/users/kdomanski/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kdomanski/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kdomanski",
         "id" : 993296,
         "login" : "kdomanski",
         "organizations_url" : "https://api.github.com/users/kdomanski/orgs",
         "received_events_url" : "https://api.github.com/users/kdomanski/received_events",
         "repos_url" : "https://api.github.com/users/kdomanski/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kdomanski/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kdomanski/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kdomanski"
      }
   },
   {
      "body" : "ut ACK\r\n",
      "created_at" : "2014-08-27T20:13:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53633490",
      "id" : 53633490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-27T20:13:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53633490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Needs trivial rebase after #4778.",
      "created_at" : "2014-08-30T01:12:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53944638",
      "id" : 53944638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-30T01:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53944638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased commits:\r\n\r\n* laanwj@706a96b - Use CSizeComputer to avoid counting sizes in SerializationOp\r\n* laanwj@c7e2682 - rework overhauled serialization methods to non-static\r\n* laanwj@45573d5 - remove fields of ser_streamplaceholder\r\n* laanwj@e9fff52 - overhaul serialization code\r\n",
      "created_at" : "2014-08-30T04:26:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53948346",
      "id" : 53948346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-30T04:37:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53948346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Idea ack",
      "created_at" : "2014-08-30T10:57:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53955255",
      "id" : 53955255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-30T10:57:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53955255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4737_31e9a8384a77947f6777d035992f4734618ed206/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-08-31T00:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-53974652",
      "id" : 53974652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-08-31T00:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53974652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@laanwj Is that an ACK?",
      "created_at" : "2014-09-01T13:00:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-54056371",
      "id" : 54056371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-09-01T13:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54056371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa I'm testing it on my own nodes, hence the rebases.\r\nACK on the code changes, and haven't encountered any problems yet.",
      "created_at" : "2014-09-01T13:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4737#issuecomment-54061686",
      "id" : 54061686,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4737",
      "updated_at" : "2014-09-01T13:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54061686",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
