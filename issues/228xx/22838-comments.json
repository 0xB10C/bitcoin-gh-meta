[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23171](https://github.com/bitcoin/bitcoin/pull/23171) (qa: test descriptors with mixed xpubs and const pubkeys by darosior)\n* [#22260](https://github.com/bitcoin/bitcoin/pull/22260) (Make bech32m the default, except where needed. Update GUI checkbox. by Sjors)\n* [#19602](https://github.com/bitcoin/bitcoin/pull/19602) (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-08-30T22:28:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-908748127",
      "id" : 908748127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5842KmVf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908748127/reactions"
      },
      "updated_at" : "2021-10-05T17:46:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/908748127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Strong concept ACK!\r\n\r\nGlad this is getting a fix.  As discussed in 17190 and OP, there's more improvements that can come after this.\r\n",
      "created_at" : "2021-09-01T05:48:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-909916556",
      "id" : 909916556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5842PDmM",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T05:48:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909916556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept and Approach ACK. I plan on updating the test and docs introduced in #22067 to take advantage of this in a follow up PR. So I will try to do a more thorough review and testing of this after that is merged and I start on the followup based on this branch. (or if it looks like this will get merged first I will do that earlier)",
      "created_at" : "2021-09-03T19:10:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-912752496",
      "id" : 912752496,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5842Z39w",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-03T19:10:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912752496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Note that the path specifier is different from what was proposed. It uses angle brackets and the semicolon because these are unused characters available in the character set and I wanted to avoid conflicts with characters already in use in descriptors.\r\n\r\n`{0,1}` seems more readable and would at least be a subset of [BIP 88](https://github.com/bitcoin/bips/blob/master/bip-0088.mediawiki). The conflict is with taproot descriptors, which use `{` and `,` for nesting the scripts.\r\n\r\nAs an example `tr([00000000/1']xpub/{0,1}/*,{pk([00000000/2']xpub/{0,1}/*),pk([00000000/3']xpub/{0,1}/*)})` doesn't look terrible to me. How much does it really complicate the parsing code? They're always either inside `()` of a descriptor function like `pkh()` or within `[]` of an origin (if we even allow that).\r\n\r\nAllowing a mix of hardened and unhardened like `<0;1h>` seems unnecessary to me and might make alternative implementations more complicated (though perhaps it's trivial; I haven't tried).",
      "created_at" : "2021-09-29T09:36:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-930013431",
      "id" : 930013431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5843buD3",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T09:36:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930013431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The conflict is with taproot descriptors, which use `{` and `,` for nesting the scripts.\r\n\r\nThe conflict is actually with the `,` in a variety of descriptors. The particular issue I had run into was using `,` in a `multi()` descriptor. Since `,` is used to separate the components of `multi()`, the parser would look for the next `,` for the next item to parse. If we use `,` for the multipath specifier, then it would run into that and parse too little. The parser could be changed to not do that, but that was more work than to just use unused characters. `{` did not cause any issues, but to make it easier for other implementations which may be parsing differently, I decided to go with a different character as well.",
      "created_at" : "2021-09-29T17:16:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-930374136",
      "id" : 930374136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5843dGH4",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T17:16:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930374136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm doing some more review/testing of this PR, but when I checkout this PR and rebase to master, I get build error:\r\n```bash\r\nwallet/rpcwallet.cpp:3387:45: error: no viable conversion from 'std::pair<std::unique_ptr<Descriptor>, std::unique_ptr<Descriptor> >' to 'std::unique_ptr<Descriptor>'\r\n  std::unique_ptr<Descriptor> desc = Parse(desc_str, desc_out, error, true);\r\n```",
      "created_at" : "2021-10-18T19:09:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946080177",
      "id" : 946080177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844ZAmx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946080177/reactions"
      },
      "updated_at" : "2021-10-18T19:09:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946080177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixed the silent merge conflict.",
      "created_at" : "2021-10-18T20:58:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946159692",
      "id" : 946159692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844ZUBM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946159692/reactions"
      },
      "updated_at" : "2021-10-18T20:58:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946159692",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So in my tests, from this multipath descriptor string: `f\"wsh(sortedmulti(M},{f'/<0;1>/*,'.join(xpubs)}/<0;1>/*))\"`\r\n\r\nI have a descriptor that looks like this:\r\n\r\n```python\r\n{\r\n  'descriptor': 'wsh(sortedmulti(2,tpubDCcZnBitiPCBqsdLWx8Lkc2BrsvVTdZU2Gcioi8yY76HrGSvp4oWyxZ5GUKGVcjdv4wzWbfntfLdcEEfVRamhSgwi1ZxgfNtayQ2QEEjfTv/0/*,tpubDCMtV5vMS9Zn2paRcw7o83ytLY7WHMCGYRSDxhz7HWnZ4ix19EQpi7g3wvYxEvuoXRfLy5XpXJP5VEr7qPzS92TWnVrBMPJYzfupdACC6vP/0/*,tpubDDBi5pEGAmG7k8t2udh8vbYb1Zpwnt5E9bxd86z6xR66r6tYH1aXy5J3kxR2NDBWhVzgcyiAjFw3kCbkf8YcxDx4wjsnvKjKu3SfPVi4dzf/0/*))#shfp6kvs', \r\n  'descriptor_change': 'wsh(sortedmulti(2,tpubDCcZnBitiPCBqsdLWx8Lkc2BrsvVTdZU2Gcioi8yY76HrGSvp4oWyxZ5GUKGVcjdv4wzWbfntfLdcEEfVRamhSgwi1ZxgfNtayQ2QEEjfTv/1/*,tpubDCMtV5vMS9Zn2paRcw7o83ytLY7WHMCGYRSDxhz7HWnZ4ix19EQpi7g3wvYxEvuoXRfLy5XpXJP5VEr7qPzS92TWnVrBMPJYzfupdACC6vP/1/*,tpubDDBi5pEGAmG7k8t2udh8vbYb1Zpwnt5E9bxd86z6xR66r6tYH1aXy5J3kxR2NDBWhVzgcyiAjFw3kCbkf8YcxDx4wjsnvKjKu3SfPVi4dzf/1/*))#ghxep260', \r\n  'checksum': 'e82r9xv3', \r\n  'isrange': True, \r\n  'issolvable': True, \r\n  'hasprivatekeys': False\r\n}\r\n```\r\n\r\nBut now, `multisig.getrawchangeaddress()` fails with error: `This wallet has no available keys (-4)`:\r\n```shell\r\n2021-10-18T22:26:50.595000Z TestFramework (INFO): Check that every participant's multisig generates the same addresses...\r\n2021-10-18T22:26:50.602000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/Users/michaeldietz/Documents/bitcoin/test/functional/test_framework/test_framework.py\", line 132, in main\r\n    self.run_test()\r\n  File \"/Users/michaeldietz/Documents/bitcoin/test/functional/wallet_multisig_descriptor_psbt.py\", line 95, in run_test\r\n    change_addresses = [multisig.getrawchangeaddress() for multisig in participants[\"multisigs\"]]\r\n  File \"/Users/michaeldietz/Documents/bitcoin/test/functional/wallet_multisig_descriptor_psbt.py\", line 95, in <listcomp>\r\n    change_addresses = [multisig.getrawchangeaddress() for multisig in participants[\"multisigs\"]]\r\n  File \"/Users/michaeldietz/Documents/bitcoin/test/functional/test_framework/coverage.py\", line 49, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/Users/michaeldietz/Documents/bitcoin/test/functional/test_framework/authproxy.py\", line 144, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: Error: This wallet has no available keys (-4)\r\n```\r\n\r\nAny ideas? I am updating #22067 to use multipath descriptors and using it as a chance to test this PR more",
      "created_at" : "2021-10-18T22:32:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946220198",
      "id" : 946220198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844Ziym",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946220198/reactions"
      },
      "updated_at" : "2021-10-18T22:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946220198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mjdietzx `importdescriptors` is probably failing. You should check the result of the import and see if there are any errors.\r\n\r\nIs your branch pushed so I can have a look?",
      "created_at" : "2021-10-18T22:52:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946228642",
      "id" : 946228642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844Zk2i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946228642/reactions"
      },
      "updated_at" : "2021-10-18T22:54:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946228642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "In my code I actually have:\r\n\r\n```python\r\nresult = multisig.importdescriptors([\r\n                {\r\n                    \"desc\": descriptor[\"descriptor\"],\r\n                    \"active\": True,\r\n                    \"timestamp\": \"now\",\r\n                },\r\n            ])\r\n            assert all(r[\"success\"] for r in result)\r\n```\r\n\r\nAnd that doesn't catch any errors. I will push my branch shortly and reply w/ it",
      "created_at" : "2021-10-18T22:56:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946230118",
      "id" : 946230118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844ZlNm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946230118/reactions"
      },
      "updated_at" : "2021-10-18T22:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946230118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I had an error in my tests - it seems everything in this PR is working properly.\r\n\r\nThis works:\r\n```python\r\nresult = multisig.importdescriptors([\r\n  {\r\n    \"desc\": descsum_create(f\"wsh(sortedmulti({self.M},{f'/<0;1>/*,'.join(xpubs)}/<0;1>/*))\"),\r\n    \"active\": True,\r\n    \"timestamp\": \"now\",\r\n  },\r\n])\r\n```\r\n\r\nre the error I posted eariler, I was trying to do this (using `getdescriptorinfo` instead of `descsum_create`):\r\n```python\r\ndescriptor = multisig.getdescriptorinfo(f\"wsh(sortedmulti({self.M},{f'/<0;1>/*,'.join(xpubs)}/<0;1>/*))\")\r\nresult = multisig.importdescriptors([\r\n    {\r\n        \"desc\": descriptor[\"descriptor\"],\r\n        \"active\": True,\r\n        \"timestamp\": \"now\",\r\n    },\r\n])\r\n```\r\n\r\nBut I was not importing or doing anything with `descriptor[\"descriptor_change\"]`, hence the (obvious in hindsight) error.\r\n\r\n---\r\n\r\nWe used `getdescriptorinfo` instead of `descsum_create` so `test/functional/wallet_multisig_descriptor_psbt.py` will only use node functions without an additional script for the checksum (see review of #22067 for more info). I wonder if this is useful user feedback at all @achow101? I'm specifically wondering about the interface of `getdescriptorinfo` now, and if it would make sense to return something like:\r\n```js\r\n{\r\n  descriptor // still the multipath descriptor, similar to output of descsum_create\r\n  // now the broken out descriptors:\r\n  descriptor_receiving\r\n  descriptor_change\r\n // ... and the other fields are unchanged\r\n}\r\n```",
      "created_at" : "2021-10-18T23:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946250177",
      "id" : 946250177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844ZqHB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946250177/reactions"
      },
      "updated_at" : "2021-10-18T23:41:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946250177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> We used `getdescriptorinfo` instead of `descsum_create` so `test/functional/wallet_multisig_descriptor_psbt.py` will only use node functions without an additional script for the checksum (see review of #22067 for more info). I wonder if this is useful user feedback at all @achow101? I'm specifically wondering about the interface of `getdescriptorinfo` now, and if it would make sense to return something like:\r\n\r\nThe `checksum` field is for that purpose. You can concatenate the descriptor input, `#`, and that checksum.",
      "created_at" : "2021-10-18T23:50:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22838#issuecomment-946253347",
      "id" : 946253347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22838",
      "node_id" : "IC_kwDOABII5844Zq4j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946253347/reactions"
      },
      "updated_at" : "2021-10-18T23:50:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946253347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
