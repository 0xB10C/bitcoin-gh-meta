[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23123](https://github.com/bitcoin/bitcoin/pull/23123) (Remove `-rescan` startup parameter by meshcollider)\n* [#15719](https://github.com/bitcoin/bitcoin/pull/15719) (Wallet passive startup by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-04T15:21:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-912990892",
      "id" : 912990892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842ayKs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912990892/reactions"
      },
      "updated_at" : "2021-09-29T21:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/912990892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Why this change is safe?",
      "created_at" : "2021-09-07T18:55:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-914545809",
      "id" : 914545809,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842gtyR",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-07T18:55:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/914545809",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@hebasto what is the concern? The lock can be acquired inside the load handler. This change also avoids recursive locks on `cs_wallet`.",
      "created_at" : "2021-09-07T20:31:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-914610671",
      "id" : 914610671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842g9nv",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-07T20:31:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/914610671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> what is the concern?\r\n\r\nThis does seem probably safe, but it would save reviewers some effort to know when the lock was added, when it stopped being necessary, and the specific reason why it was necessary whenever it was needed (for example whether it was avoiding deadlocks or asserts by acquiring recursive locks in a consistent order, or whether it was avoiding race condition.) This information could go in the PR description.\r\n\r\nOne concern might be that one of the `wallet_load_fns` callbacks could call a wallet method and acquire cs_wallet mutex *after* context.wallets_mutex, and maybe this would be in inconsistent order.",
      "created_at" : "2021-09-08T20:39:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-915553755",
      "id" : 915553755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842kj3b",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-08T20:39:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915553755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky \r\n\r\n> but it would save reviewers some effort to know when the lock was added, when it stopped being necessary\r\n\r\nMy bad for not writing this, I went thru history before making the change, will redo and update this.\r\n\r\n> One concern might be that one of the `wallet_load_fns` callbacks could call a wallet method and acquire cs_wallet mutex _after_ context.wallets_mutex, and maybe this would be in inconsistent order.\r\n\r\nWould be bad to lock one `cs_wallet` after `wallets_mutex`? In master that already happens but works because `cs_wallet` is recursive. Couldn't find more cases of cs_wallet -> wallets_mutex lock order.",
      "created_at" : "2021-09-11T22:12:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-917493065",
      "id" : 917493065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842r9VJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-11T22:14:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917493065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky see https://github.com/bitcoin/bitcoin/pull/11634/files#r227725517 for when the lock was added and @practicalswift submitted a similar change #14560 but @MarcoFalke rejected it.",
      "created_at" : "2021-09-12T20:49:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-917707805",
      "id" : 917707805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5842sxwd",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-12T21:23:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917707805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky thanks! You might want to see https://github.com/bitcoin-core/gui/pull/417/commits/c09fd3acb9aee9245a033e9d7251cd29de1d24bb, it needs this change otherwise it deadlocks.",
      "created_at" : "2021-09-24T15:08:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-926702933",
      "id" : 926702933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5843PF1V",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T15:08:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926702933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-30T20:30:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22868#issuecomment-931642508",
      "id" : 931642508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22868",
      "node_id" : "IC_kwDOABII5843h7yM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931642508/reactions"
      },
      "updated_at" : "2021-09-30T20:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931642508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
