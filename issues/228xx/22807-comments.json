[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think #19762 is a better solution to the problem of supporting large numbers of optional arguments. #19762 allows options to be specified without having to quote JSON on the command line and provides a more natural calling interface for languages like python that support named arguments. Unlike this PR, it is fully generic and does not require adding and maintaining confusing backwards compatibility code inside individual RPC method implementations.\r\n\r\n#19762 can also be a foundation for supporting future usability improvements like being able to declare individual arguments keyword-only (only allowed to be passed by name and not position).",
      "created_at" : "2021-08-26T17:26:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22807#issuecomment-906601116",
      "id" : 906601116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22807",
      "node_id" : "IC_kwDOABII5842CaKc",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-26T17:26:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906601116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\n>I think #19762 is a better solution to the problem of supporting large numbers of optional arguments.\r\n\r\nIt's a good idea, but non-standard and IMO complimentary.\r\n\r\n> #19762 can also be a foundation for supporting future usability improvements like being able to declare individual arguments keyword-only (only allowed to be passed by name and not position).\r\n\r\nThis would make sense if positional use was deprecated, which it is not (and should not be sabotaged by making poor parameter positions or options unavailable).",
      "created_at" : "2021-08-26T21:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22807#issuecomment-906754176",
      "id" : 906754176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22807",
      "node_id" : "IC_kwDOABII5842C_iA",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-26T21:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906754176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22807#discussion_r696989866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696989866"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    if (options.type() == UniValue::VNUM) {\r\n    ...\r\n    } else if (!options.isNull()) {\r\n```",
      "commit_id" : "aab6389b10b92eeecf4ae93af6ff508e67e03ee1",
      "created_at" : "2021-08-26T21:27:48Z",
      "diff_hunk" : "@@ -1469,9 +1474,26 @@ static RPCHelpMan listtransactions()\n     int nCount = 10;\n     if (!request.params[1].isNull())\n         nCount = request.params[1].get_int();\n+\n     int nFrom = 0;\n-    if (!request.params[2].isNull())\n-        nFrom = request.params[2].get_int();\n+    const UniValue& options = request.params[2];\n+    if (!options.isNull()) {\n+        if (options.type() == UniValue::VNUM) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22807#discussion_r696989866",
      "id" : 696989866,
      "line" : 1481,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5Njk4OTg2Ng==",
      "original_commit_id" : "aab6389b10b92eeecf4ae93af6ff508e67e03ee1",
      "original_line" : 1481,
      "original_position" : 36,
      "original_start_line" : 1480,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 36,
      "pull_request_review_id" : 739952262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22807",
      "side" : "RIGHT",
      "start_line" : 1480,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-26T21:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696989866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22807#discussion_r696991289"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696991289"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                }, /* allow missing/null keys */ true, /* disallow unknown keys */ true);\r\n```",
      "commit_id" : "aab6389b10b92eeecf4ae93af6ff508e67e03ee1",
      "created_at" : "2021-08-26T21:30:21Z",
      "diff_hunk" : "@@ -1469,9 +1474,26 @@ static RPCHelpMan listtransactions()\n     int nCount = 10;\n     if (!request.params[1].isNull())\n         nCount = request.params[1].get_int();\n+\n     int nFrom = 0;\n-    if (!request.params[2].isNull())\n-        nFrom = request.params[2].get_int();\n+    const UniValue& options = request.params[2];\n+    if (!options.isNull()) {\n+        if (options.type() == UniValue::VNUM) {\n+            // backward compatibility int only fallback\n+            nFrom = request.params[2].get_int();\n+        }\n+        else {\n+            RPCTypeCheckArgument(options, UniValue::VOBJ);\n+            RPCTypeCheckObj(options,\n+                {\n+                    {\"skip\", UniValueType(UniValue::VNUM)},\n+                }, true, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22807#discussion_r696991289",
      "id" : 696991289,
      "line" : 1490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5Njk5MTI4OQ==",
      "original_commit_id" : "aab6389b10b92eeecf4ae93af6ff508e67e03ee1",
      "original_line" : 1490,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 45,
      "pull_request_review_id" : 739952262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22807",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-26T21:30:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/696991289",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK\r\n> \r\n> > I think #19762 is a better solution to the problem of supporting large numbers of optional arguments.\r\n> \r\n> It's a good idea\r\n\r\nGreat, review is welcome.\r\n\r\n> , but non-standard\r\n\r\nnon-standard != not standardized\r\n\r\nThe \"args\" parameter added by #19762 is documented, but not standardized, in the exact same way the \"options\" parameter added by this PR is documented, but not standardized\r\n\r\n> and IMO complimentary.\r\n\r\nComplimentary to what? It is not complimentary to this PR. It is incompatible with this PR.\r\n\r\n> > #19762 can also be a foundation for supporting future usability improvements like being able to declare individual arguments keyword-only (only allowed to be passed by name and not position).\r\n> \r\n> This would make sense if positional use was deprecated, which it is not\r\n\r\nIt makes sense in combination with #19762, period.",
      "created_at" : "2021-08-26T21:59:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22807#issuecomment-906771444",
      "id" : 906771444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22807",
      "node_id" : "IC_kwDOABII5842DDv0",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-26T21:59:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906771444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
