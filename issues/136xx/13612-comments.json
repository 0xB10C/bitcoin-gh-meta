[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, seems reasonable if it's an issue.",
      "created_at" : "2018-07-08T01:32:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13612#issuecomment-403254845",
      "id" : 403254845,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13612",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMzI1NDg0NQ==",
      "updated_at" : "2018-07-08T01:32:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/403254845",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could do an early return to avoid wrapping the whole function scope in two\nsets of braces and indenting it by 4 spaces\n\nOn Sat, Jul 7, 2018 at 2:33 PM, Pieter Wuille <notifications@github.com>\nwrote:\n\n> Concept ACK, seems reasonable if it's an issue.\n>\n> Ã¢ÂÂ\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/13612#issuecomment-403254845>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AGGmv7wlo1WfWRJHWaMjiwiIGZ2r5nfSks5uEWFPgaJpZM4VGdUl>\n> .\n>\n",
      "created_at" : "2018-07-08T06:48:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13612#issuecomment-403266746",
      "id" : 403266746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13612",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMzI2Njc0Ng==",
      "updated_at" : "2018-07-08T06:48:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/403266746",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It takes a fair amount of blocks and transactions before the issue shows up.\r\nCPU usage scales with both the chain height and number of transactions.\r\n\r\ngprof results show most of the time is taken by all the GetDepthInMainChain calls from IsTrusted\r\n\r\nTesting on a regtest node with 10k blocks and 10k txns htop shows:\r\n+-6 CPU% before the changes and\r\n+-0.7 CPU% after\r\n\r\n20k blocks and 10k txns:\r\n+-6.5 CPU% before the changes and\r\n+-0.7 CPU% after\r\n\r\n40k blocks and 39.6k txns:\r\n+-20 CPU% before the changes and\r\n+-0.7 CPU% after",
      "created_at" : "2018-07-08T14:11:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13612#issuecomment-403290459",
      "id" : 403290459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13612",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMzI5MDQ1OQ==",
      "updated_at" : "2018-07-08T14:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/403290459",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/8041488?v=4",
         "events_url" : "https://api.github.com/users/tecnovert/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tecnovert/followers",
         "following_url" : "https://api.github.com/users/tecnovert/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tecnovert/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tecnovert",
         "id" : 8041488,
         "login" : "tecnovert",
         "node_id" : "MDQ6VXNlcjgwNDE0ODg=",
         "organizations_url" : "https://api.github.com/users/tecnovert/orgs",
         "received_events_url" : "https://api.github.com/users/tecnovert/received_events",
         "repos_url" : "https://api.github.com/users/tecnovert/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tecnovert/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tecnovert/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tecnovert"
      }
   }
]
