[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202412914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202412914"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there any reason why not just leave this here? It could very well be used by the gui or some other interface to the wallet in the future and had to be moved back. Generally, I'd prefer if code was only moved when necessary, since unnecessary code movement/refactoring makes backports easier to mess up and consumes scarce review resources.",
      "commit_id" : "65c06a369950da0915c9d207156f1b5044022ce7",
      "created_at" : "2018-07-13T16:56:47Z",
      "diff_hunk" : "@@ -935,7 +933,6 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) override;\n     void BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) override;\n     bool AddToWalletIfInvolvingMe(const CTransactionRef& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    int64_t RescanFromTime(int64_t startTime, const WalletRescanReserver& reserver, bool update);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202412914",
      "id" : 202412914,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQxMjkxNA==",
      "original_commit_id" : "3259024e702c6208ed0f8ad36f8923fcf9d50906",
      "original_position" : 22,
      "path" : "src/wallet/wallet.h",
      "position" : 22,
      "pull_request_review_id" : 137114141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658",
      "updated_at" : "2018-07-13T18:59:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202412914",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202439254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202439254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This move reduces the surface area of CWallet, which is pretty sprawling at the moment (wallet.cpp is ~4500 lines, the 3rd-largest *.cpp file, and the largest outside `/qt/`), and localizes this code to one implementation file from being more broadly available (wallet.h is included into 26 files).\r\n\r\nGrant the concerns you note are serious, and we should draw the line somewhere, but if the codebase is to be in play for a long time, it needs to evolve and progress. Moving incrementally toward minimizing scope of code, dependencies, etc. is attractive from that perspective as it should have payoffs in reducing the overall complexity of the codebase, which should ease changes on an ongoing and cumulative basis.\r\n\r\nOther approaches to making better use of scarce review resources come to mind:\r\n* I've thought of implementing a web site to helps rank PRs by ACKs and other indications of importance. Current solutions like: https://github.com/bitcoin/bitcoin/projects/8 are pretty limited and not decentralized and ACKs are not currently well-exposed across PRs in aggregate.\r\n* We could add a feature to output the changes between force pushes to the same PR, so that reviewers could review just the incremental subset, and the historical changes are recorded.\r\n* We could potentially examine and report changes to the build output to give reviewers a sense of the consequence to the output to the binaries.\r\n\r\nSeems like these are the sorts of things that will help the project to scale and accelerate.",
      "commit_id" : "65c06a369950da0915c9d207156f1b5044022ce7",
      "created_at" : "2018-07-13T18:39:04Z",
      "diff_hunk" : "@@ -935,7 +933,6 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) override;\n     void BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) override;\n     bool AddToWalletIfInvolvingMe(const CTransactionRef& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    int64_t RescanFromTime(int64_t startTime, const WalletRescanReserver& reserver, bool update);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202439254",
      "id" : 202439254,
      "in_reply_to_id" : 202412914,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQzOTI1NA==",
      "original_commit_id" : "3259024e702c6208ed0f8ad36f8923fcf9d50906",
      "original_position" : 22,
      "path" : "src/wallet/wallet.h",
      "position" : 22,
      "pull_request_review_id" : 137146988,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658",
      "updated_at" : "2018-07-13T18:59:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202439254",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This refactor raises the following questions:\r\n* Why does rpc `importmulti` call `pwallet->ReacceptWalletTransactions` before aborting on `pwallet->IsAbortingRescan()`. Should it flip that ordering like the others do?\r\n* Why do 3 of the 5 calls call `pwallet->ReacceptWalletTransactions`, while rpc `importwallet` calls `pwallet->MarkDirty()` and rpc `importprivkey` calls neither? This seems like a possible bug in rpc `importprivkey`.",
      "created_at" : "2018-07-13T18:45:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#issuecomment-404919955",
      "id" : 404919955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13658",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNDkxOTk1NQ==",
      "updated_at" : "2018-07-13T18:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/404919955",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202441739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202441739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I've thought of implementing a web site to helps rank PRs by ACKs and other indications of importance. Current solutions like: https://github.com/bitcoin/bitcoin/projects/8 are pretty limited and not decentralized and ACKs are not currently well-exposed across PRs in aggregate.\r\n\r\nAre you aware of https://bitcoinacks.com/?desc=1&flt3_label_not_contains=Needs+rebase&flt0_merged_empty=1&flt4_ci_contains=Success&flt1_closed_empty=1&sort=7&flt2_mergeable_contains=Mergeable",
      "commit_id" : "65c06a369950da0915c9d207156f1b5044022ce7",
      "created_at" : "2018-07-13T18:49:04Z",
      "diff_hunk" : "@@ -935,7 +933,6 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) override;\n     void BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) override;\n     bool AddToWalletIfInvolvingMe(const CTransactionRef& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    int64_t RescanFromTime(int64_t startTime, const WalletRescanReserver& reserver, bool update);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202441739",
      "id" : 202441739,
      "in_reply_to_id" : 202412914,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ0MTczOQ==",
      "original_commit_id" : "3259024e702c6208ed0f8ad36f8923fcf9d50906",
      "original_position" : 22,
      "path" : "src/wallet/wallet.h",
      "position" : 22,
      "pull_request_review_id" : 137150087,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658",
      "updated_at" : "2018-07-13T18:59:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202441739",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to minimize `git diff --color-moved=dimmed_zebra --minimal head^^`",
      "created_at" : "2018-07-13T19:00:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#issuecomment-404923884",
      "id" : 404923884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13658",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNDkyMzg4NA==",
      "updated_at" : "2018-07-13T19:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/404923884",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202444691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202444691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nice, hadn't see that. Ã°ÂÂÂ ",
      "commit_id" : "65c06a369950da0915c9d207156f1b5044022ce7",
      "created_at" : "2018-07-13T19:01:05Z",
      "diff_hunk" : "@@ -935,7 +933,6 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n     void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex *pindex, const std::vector<CTransactionRef>& vtxConflicted) override;\n     void BlockDisconnected(const std::shared_ptr<const CBlock>& pblock) override;\n     bool AddToWalletIfInvolvingMe(const CTransactionRef& tx, const CBlockIndex* pIndex, int posInBlock, bool fUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    int64_t RescanFromTime(int64_t startTime, const WalletRescanReserver& reserver, bool update);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#discussion_r202444691",
      "id" : 202444691,
      "in_reply_to_id" : 202412914,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMjQ0NDY5MQ==",
      "original_commit_id" : "3259024e702c6208ed0f8ad36f8923fcf9d50906",
      "original_position" : 22,
      "path" : "src/wallet/wallet.h",
      "position" : 22,
      "pull_request_review_id" : 137154041,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13658",
      "updated_at" : "2018-07-13T19:01:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/202444691",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #13651 ([moveonly] Extract CWallet::MarkInputsDirty, and privatize AddToWalletIfInvolvingMe by Empact)\n* #13076 (Fix ScanForWalletTransactions to return an enum indicating scan result: success / failure / user_abort by Empact)\n* #12992 ([wallet] Add wallet name to log messages by PierreRochard)\n* #12705 ([WIP] Importmulti private key support by kallewoof)\n* #12257 ([wallet] Use destination groups instead of coins in coin select by kallewoof)\n* #11484 (Optional update rescan option in importmulti RPC by pedrobranco)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-07-13T19:20:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13658#issuecomment-404928944",
      "id" : 404928944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13658",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNDkyODk0NA==",
      "updated_at" : "2018-07-14T00:17:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/404928944",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
