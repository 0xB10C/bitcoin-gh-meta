[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "pinging @achow101 @gruve-p ",
      "created_at" : "2022-03-13T21:28:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066185389",
      "id" : 1066185389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_jLKt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066185389/reactions"
      },
      "updated_at" : "2022-03-13T21:28:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066185389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just tested and this fixes the issue",
      "created_at" : "2022-03-13T22:18:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066193463",
      "id" : 1066193463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_jNI3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066193463/reactions"
      },
      "updated_at" : "2022-03-13T22:18:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066193463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11212268?v=4",
         "events_url" : "https://api.github.com/users/gruve-p/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gruve-p/followers",
         "following_url" : "https://api.github.com/users/gruve-p/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gruve-p/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gruve-p",
         "id" : 11212268,
         "login" : "gruve-p",
         "node_id" : "MDQ6VXNlcjExMjEyMjY4",
         "organizations_url" : "https://api.github.com/users/gruve-p/orgs",
         "received_events_url" : "https://api.github.com/users/gruve-p/received_events",
         "repos_url" : "https://api.github.com/users/gruve-p/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gruve-p/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gruve-p"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code Review ACK 4e1503dbc84b712fcbfdae3ba667ecc4ec8b710c",
      "created_at" : "2022-03-14T10:18:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066606762",
      "id" : 1066606762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_kyCq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066606762/reactions"
      },
      "updated_at" : "2022-03-14T10:18:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066606762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This doesn't seem right? The walletprocesspsbt docs say\r\n\r\n> 3. sighashtype    (string, optional, default=\"DEFAULT for Taproot, ALL otherwise\") The signature hash type to sign with if not specified by the PSBT.\r\n\r\nbut in this case the signature hash type is specified by the PSBT, so we're just getting a redundant error?\r\n\r\nIf we do have to specify the sighash type via RPC as well as the PSBT, you don't need to remove the `-stdin` to do it; this works:\r\n\r\n```diff\r\n-        psbt_signed = json.loads(args.bcli(\"-stdin\", \"walletprocesspsbt\", input=psbt.encode('utf8')))\r\n+        psbt_signed = json.loads(args.bcli(\"-stdin\", \"walletprocesspsbt\", input=(psbt.encode('utf8') + b\"\\ntrue\\nALL\")))\r\n```\r\n\r\n(Passing the psbt via stdin is necessary, as otherwise the block size is limited by your shell's maximum argument length)",
      "created_at" : "2022-03-14T10:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066608163",
      "id" : 1066608163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_kyYj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066608163/reactions"
      },
      "updated_at" : "2022-03-14T10:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066608163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This doesn't seem right? The walletprocesspsbt docs say\r\n> \r\n> > 3. sighashtype    (string, optional, default=\"DEFAULT for Taproot, ALL otherwise\") The signature hash type to sign with if not specified by the PSBT.\r\n> \r\n> but in this case the signature hash type is specified by the PSBT, so we're just getting a redundant error?\r\n\r\nGood point. Looking at the code, the sighash passed for the `walletprocesspsbt` (or, the default value SIGHASH_DEFAULT) is always compared to each input's sighash if it is specified in the PSBT:\r\nhttps://github.com/bitcoin/bitcoin/blob/25d045a9ecc24a2752685d176c28f8f75bb100f6/src/wallet/scriptpubkeyman.cpp#L643-L645\r\n\r\nSo it seems the help text should be changed?\r\n\r\n> \r\n> If we do have to specify the sighash type via RPC as well as the PSBT, you don't need to remove the `-stdin` to do it; this works:\r\n> \r\n> ```diff\r\n> -        psbt_signed = json.loads(args.bcli(\"-stdin\", \"walletprocesspsbt\", input=psbt.encode('utf8')))\r\n> +        psbt_signed = json.loads(args.bcli(\"-stdin\", \"walletprocesspsbt\", input=(psbt.encode('utf8') + b\"\\ntrue\\nALL\")))\r\n> ```\r\n> \r\n> (Passing the psbt via stdin is necessary, as otherwise the block size is limited by your shell's maximum argument length)\r\n\r\nThanks, that works indeed. I think yesterday when I tried this I accidentially swapped the argument order of \"walletprocesspsbt\" and \"-stdin\" and wondered why it doesn't work - d'oh! Done; used `os.linesep` instead of `\\n` directly in order to be more portable (OTOH I don't know if the mining script even works on a non-unixoid system).\r\n",
      "created_at" : "2022-03-14T11:12:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066656341",
      "id" : 1066656341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_k-JV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066656341/reactions"
      },
      "updated_at" : "2022-03-14T11:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066656341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "#24563 has a patch to make walleprocesspsbt work the way I thought it was meant to, which seems like it's also enough to get contrib/signet/miner working again",
      "created_at" : "2022-03-14T15:35:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24553#issuecomment-1066960057",
      "id" : 1066960057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24553",
      "node_id" : "IC_kwDOABII584_mIS5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066960057/reactions"
      },
      "updated_at" : "2022-03-14T15:35:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066960057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   }
]
