[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-03-14T21:50:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24559#issuecomment-1067332709",
      "id" : 1067332709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24559",
      "node_id" : "IC_kwDOABII584_njRl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1067332709/reactions"
      },
      "updated_at" : "2022-03-26T02:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1067332709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, thanks for adding tests",
      "created_at" : "2022-04-05T12:06:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24559#issuecomment-1088622795",
      "id" : 1088622795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24559",
      "node_id" : "IC_kwDOABII585A4xDL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1088622795/reactions"
      },
      "updated_at" : "2022-04-05T12:06:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1088622795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24559#discussion_r842715566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24559"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/842715566"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think it's good to leave it like this, if we use `bitcoin-util` in the functional tests we'd at least need to\r\n\r\n- Add a `self.options.bitcoinutil` in `BitcoinTestFramework.setup`, analogous to the other two, overridable with `BITCOINUTIL`\r\n\r\n- we also need an entry in `config.ini.in` for `BUILD_BITCOIN_UTIL` â an `is_bitcoin_util_compiled()` â and an `skip_if_no_bitcoin_util`\r\n",
      "commit_id" : "d1d98c247d35316211830b8bf8de8284c3c7afa8",
      "created_at" : "2022-04-05T12:17:38Z",
      "diff_hunk" : "@@ -0,0 +1,72 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test signet miner tool\"\"\"\n+\n+import os.path\n+import subprocess\n+import sys\n+import time\n+\n+from test_framework.key import ECKey\n+from test_framework.script_util import keys_to_multisig_script\n+from test_framework.test_framework import (\n+    BitcoinTestFramework,\n+    SkipTest,\n+)\n+from test_framework.util import assert_equal\n+from test_framework.wallet_util import bytes_to_wif\n+\n+\n+CHALLENGE_PRIVATE_KEY = (42).to_bytes(32, 'big')\n+\n+\n+class SignetMinerTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.chain = \"signet\"\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+        # generate and specify signet challenge (simple 1-of-1 multisig script)\n+        privkey = ECKey()\n+        privkey.set(CHALLENGE_PRIVATE_KEY, True)\n+        pubkey = privkey.get_pubkey().get_bytes()\n+        challenge = keys_to_multisig_script([pubkey])\n+        self.extra_args = [[f'-signetchallenge={challenge.hex()}']]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_cli()\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_bdb()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        # import private key needed for signing block\n+        node.importprivkey(bytes_to_wif(CHALLENGE_PRIVATE_KEY))\n+\n+        # determine paths to tools\n+        base_dir = self.config[\"environment\"][\"SRCDIR\"]\n+        signet_miner_path = os.path.join(base_dir, \"contrib\", \"signet\", \"miner\")\n+        # TODO: this is a dirty hack; the path to bitcoin-util should ideally",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24559#discussion_r842715566",
      "id" : 842715566,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII584yOtGu",
      "original_commit_id" : "d1d98c247d35316211830b8bf8de8284c3c7afa8",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "test/functional/tool_signet_miner.py",
      "position" : 51,
      "pull_request_review_id" : 931759930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24559",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/842715566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-05T12:17:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/842715566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24559#discussion_r843127163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24559"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843127163"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the guide, will add a commit with these preliminaries within the next days.",
      "commit_id" : "d1d98c247d35316211830b8bf8de8284c3c7afa8",
      "created_at" : "2022-04-05T18:13:59Z",
      "diff_hunk" : "@@ -0,0 +1,72 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test signet miner tool\"\"\"\n+\n+import os.path\n+import subprocess\n+import sys\n+import time\n+\n+from test_framework.key import ECKey\n+from test_framework.script_util import keys_to_multisig_script\n+from test_framework.test_framework import (\n+    BitcoinTestFramework,\n+    SkipTest,\n+)\n+from test_framework.util import assert_equal\n+from test_framework.wallet_util import bytes_to_wif\n+\n+\n+CHALLENGE_PRIVATE_KEY = (42).to_bytes(32, 'big')\n+\n+\n+class SignetMinerTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.chain = \"signet\"\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+        # generate and specify signet challenge (simple 1-of-1 multisig script)\n+        privkey = ECKey()\n+        privkey.set(CHALLENGE_PRIVATE_KEY, True)\n+        pubkey = privkey.get_pubkey().get_bytes()\n+        challenge = keys_to_multisig_script([pubkey])\n+        self.extra_args = [[f'-signetchallenge={challenge.hex()}']]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_cli()\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_bdb()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        # import private key needed for signing block\n+        node.importprivkey(bytes_to_wif(CHALLENGE_PRIVATE_KEY))\n+\n+        # determine paths to tools\n+        base_dir = self.config[\"environment\"][\"SRCDIR\"]\n+        signet_miner_path = os.path.join(base_dir, \"contrib\", \"signet\", \"miner\")\n+        # TODO: this is a dirty hack; the path to bitcoin-util should ideally",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24559#discussion_r843127163",
      "id" : 843127163,
      "in_reply_to_id" : 842715566,
      "line" : 51,
      "node_id" : "PRRC_kwDOABII584yQRl7",
      "original_commit_id" : "d1d98c247d35316211830b8bf8de8284c3c7afa8",
      "original_line" : 51,
      "original_position" : 51,
      "original_start_line" : null,
      "path" : "test/functional/tool_signet_miner.py",
      "position" : 51,
      "pull_request_review_id" : 932320528,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24559",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843127163/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-05T18:14:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/843127163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
