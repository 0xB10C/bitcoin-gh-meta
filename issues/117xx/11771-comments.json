[
   {
      "author_association" : "MEMBER",
      "body" : "Needs a rebase.",
      "created_at" : "2017-11-30T01:26:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11771#issuecomment-348052948",
      "id" : 348052948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11771",
      "updated_at" : "2017-11-30T01:26:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348052948",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2017-11-30T03:33:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11771#issuecomment-348072720",
      "id" : 348072720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11771",
      "updated_at" : "2017-11-30T03:33:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348072720",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and made slight improvements to the P2PStub class.",
      "created_at" : "2017-12-02T16:23:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11771#issuecomment-348702632",
      "id" : 348702632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11771",
      "updated_at" : "2017-12-02T16:23:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348702632",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11771#discussion_r154506637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11771"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154506637"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unnecessary comment?",
      "commit_id" : "f4c080ff63ae819d794fb11634af00397714f844",
      "created_at" : "2017-12-02T20:50:45Z",
      "diff_hunk" : "@@ -412,3 +414,110 @@ def run(self):\n             [obj.handle_close() for obj in disconnected]\n             asyncore.loop(0.1, use_poll=True, map=mininode_socket_map, count=1)\n         logger.debug(\"Network thread closing\")\n+\n+class P2PStub(P2PInterface):\n+    \"\"\"A P2P Stub class.\n+\n+    Keeps a block and transaction store and responds correctly to getdata and getheaders requests.\"\"\"\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.reject_code_received = None\n+        self.reject_reason_received = None\n+        self.block_store = OrderedDict()\n+        self.tx_store = {}\n+        self.getdata_requests = []\n+\n+    def on_getdata(self, message):\n+        for inv in message.inv:\n+            self.getdata_requests.append(inv.hash)\n+            if inv.type == 1 or inv.type == 1 | MSG_WITNESS_FLAG:\n+                if inv.hash in self.tx_store.keys():\n+                    self.send_message(msg_tx(self.tx_store[inv.hash]))\n+            elif inv.type == 2 or inv.type == 2 | MSG_WITNESS_FLAG:\n+                if inv.hash in self.block_store.keys():\n+                    self.send_message(msg_block(self.block_store[inv.hash]))\n+\n+    def on_getheaders(self, message):\n+        locator, hash_stop = message.locator, message.hashstop\n+\n+        # Assume that the most recent block added is the tip\n+        if len(self.block_store) == 0:\n+            return\n+        current_block_header = self.block_store[next(reversed(self.block_store))]\n+        # current_block_header = super(current_tip)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11771#discussion_r154506637",
      "id" : 154506637,
      "original_commit_id" : "f4c080ff63ae819d794fb11634af00397714f844",
      "original_position" : 67,
      "path" : "test/functional/test_framework/mininode.py",
      "position" : 67,
      "pull_request_review_id" : 80684762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11771",
      "updated_at" : "2017-12-02T20:58:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154506637",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   }
]
