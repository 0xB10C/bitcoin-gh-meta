[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Can't test right now, but what happens if the absolute path doesn't exist?",
      "created_at" : "2017-11-28T10:29:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347480078",
      "id" : 347480078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T10:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347480078",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> Can't test right now, but what happens if the absolute path doesn't exist?\r\n```\r\nbitcoind: /home/orion/projects/bitcoin/bitcoin/src/util.cpp:359: int LogPrintStr(const std::string &): Assertion `vMsgsBeforeOpenLog' failed.\r\nAborted (core dumped)\r\n```\r\nGah, seems like we need a check in init before the logging stuff is initialized.\r\n",
      "created_at" : "2017-11-28T10:31:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347480745",
      "id" : 347480745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T10:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347480745",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, current code knows that data dir exists.",
      "created_at" : "2017-11-28T10:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347481915",
      "id" : 347481915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T10:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347481915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If you do handle that, then add an init test for inexistent path.",
      "created_at" : "2017-11-28T10:37:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347482171",
      "id" : 347482171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T10:37:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347482171",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@promag Apparently there is some logic for handling the case that the debug log could not be opened: https://github.com/bitcoin/bitcoin/blob/master/src/util.cpp#L201 . So it's a matter of passing it on to the caller.\r\n",
      "created_at" : "2017-11-28T10:38:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347482490",
      "id" : 347482490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T10:38:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347482490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Pushed error handling when the log file could not be opened.\r\n```\r\n$ src/bitcoind -testnet -debuglogfile=/dfdf                                                                                                             \r\nError: Could not open debug log file /dfdf\r\n```\r\n(currently this segfaults afterwards, but that is due to an unrelated problem introduced in #10286, see #11783)\r\n",
      "created_at" : "2017-11-28T11:06:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#issuecomment-347489817",
      "id" : 347489817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11781",
      "updated_at" : "2017-11-28T11:26:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347489817",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153473818"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153473818"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, missing test.",
      "commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "created_at" : "2017-11-28T12:12:26Z",
      "diff_hunk" : "@@ -1208,8 +1209,11 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n         ShrinkDebugFile();\n     }\n \n-    if (fPrintToDebugLog)\n-        OpenDebugLog();\n+    if (fPrintToDebugLog) {\n+        if (!OpenDebugLog()) {\n+            return InitError(strprintf(\"Could not open debug log file %s\", GetDebugLogPath().string()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153473818",
      "id" : 153473818,
      "original_commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "original_position" : 16,
      "path" : "src/init.cpp",
      "position" : 16,
      "pull_request_review_id" : 79482738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781",
      "updated_at" : "2017-11-28T12:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153473818",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153479727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153479727"
         }
      },
      "author_association" : "OWNER",
      "body" : "Will add a test, though testing this particular message only makes sense after #11783 goes in",
      "commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "created_at" : "2017-11-28T12:40:00Z",
      "diff_hunk" : "@@ -1208,8 +1209,11 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n         ShrinkDebugFile();\n     }\n \n-    if (fPrintToDebugLog)\n-        OpenDebugLog();\n+    if (fPrintToDebugLog) {\n+        if (!OpenDebugLog()) {\n+            return InitError(strprintf(\"Could not open debug log file %s\", GetDebugLogPath().string()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153479727",
      "id" : 153479727,
      "in_reply_to_id" : 153473818,
      "original_commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "original_position" : 16,
      "path" : "src/init.cpp",
      "position" : 16,
      "pull_request_review_id" : 79489545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781",
      "updated_at" : "2017-11-28T12:40:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153479727",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153482746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153482746"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fix `=<dir>`.",
      "commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "created_at" : "2017-11-28T12:54:47Z",
      "diff_hunk" : "@@ -342,6 +342,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     if (showDebug)\n         strUsage += HelpMessageOpt(\"-feefilter\", strprintf(\"Tell other nodes to filter invs to us by our mempool min fee (default: %u)\", DEFAULT_FEEFILTER));\n     strUsage += HelpMessageOpt(\"-loadblock=<file>\", _(\"Imports blocks from external blk000??.dat file on startup\"));\n+    strUsage += HelpMessageOpt(\"-debuglogfile=<dir>\", _(\"Specify location of debug log file (default: debug.log in datadir)\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11781#discussion_r153482746",
      "id" : 153482746,
      "original_commit_id" : "2501383615dd043488d5cd26e4cca6ba2cbc1f52",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 79493035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11781",
      "updated_at" : "2017-11-28T12:54:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153482746",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
