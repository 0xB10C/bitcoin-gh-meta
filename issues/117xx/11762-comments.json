[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 9f857d5.\r\n\r\nAre these random picks? For instance, `CTxMemPool::CalculateMemPoolAncestors` can assert the lock too right?",
      "created_at" : "2017-11-27T16:29:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347237975",
      "id" : 347237975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T16:29:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347237975",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Why would we need the runtime check when there is a compile time check?",
      "created_at" : "2017-11-27T17:44:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347263671",
      "id" : 347263671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T17:44:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347263671",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag No, these are not random picks. They were the ones I could find, verify manually and passes both `make check` + `test/functional/test_runner.py` with nothing but trivial changes :-)\r\n\r\nThe lock in `CTxMemPool::UpdateTransactionsFromBlock` you suggested could also be removed but that would require more fine grained locking in the corresponding tests. If you have time then please post a diff of that locking change and I'll make it part of this PR :-)",
      "created_at" : "2017-11-27T19:27:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347298049",
      "id" : 347298049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T19:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347298049",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I replaced the `LOCK(Ã¢ÂÂ¦);` with `AssertLockHeld(Ã¢ÂÂ¦);` to make it easy to verify also for reviewers not building with Clang thread safety analysis warnings enabled. Should I remove them? :-)",
      "created_at" : "2017-11-27T19:29:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347298583",
      "id" : 347298583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T19:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347298583",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag Do you have any additional suggestions beyond `CTxMemPool::CalculateMemPoolAncestors(Ã¢ÂÂ¦)`? :-)",
      "created_at" : "2017-11-27T19:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347300371",
      "id" : 347300371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T19:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347300371",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it is fine to leave them for now, but it seems arbitrary to add run time checks to a subset of methods that already have the compile time check. I know that not everyone compiles with clang, but at least for releases we do and I am sure some developers build with clang, so it should be noticed quickly.",
      "created_at" : "2017-11-27T19:36:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11762#issuecomment-347300814",
      "id" : 347300814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11762",
      "updated_at" : "2017-11-27T19:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347300814",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
