[
   {
      "body" : "Concept ACK. Though if we're going to be exposing this value to our apis, we need to define it sanely first.\r\n\r\nATM it's just an int, so it's tricky encode/decode it safely. I'd prefer change it to a uint32_t first, so that we can use ParseUInt32 here.",
      "created_at" : "2017-04-03T20:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291263527",
      "id" : 291263527,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T20:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291263527",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Concept ACK, I've wanted this many times before... but I'm concerned about the nodeid--- right now if it wraps bad things happen, and it will be harder to fix if we've made it a part of the API.",
      "created_at" : "2017-04-03T21:23:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291278184",
      "id" : 291278184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T21:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291278184",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "edit: Decided I didn't like this thought and bailed. Meant to cancel, closed instead. Sorry!",
      "created_at" : "2017-04-03T21:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291285238",
      "id" : 291285238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T22:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291285238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I suppose it would be prudent to\r\n- determine where we assume nodeids are increasing in value, as opposed to just being unique. I should hope there are none of these, other than generally being able to assume that higher node == earlier connection\r\n- determine when we assume a nodeid to be globally unique. For example, if there's a global map<nodeid,int> that tallies sent bytes, that would be broken by duplicated values when ids wrapped.\r\n- determine when we assume that a nodeid is a unique identifier among current nodes.\r\n\r\nThe last one is what happens all over the place, and is fine as long as we ensure that the values really are unique. To do so, we can either:\r\n- maintain a set of currently used nodeids, and make sure that new values aren't in use before assigning a new one\r\n- disconnect all nodes when we hit max, forcing new connections starting from 0.\r\n\r\nObviously the first is cleaner, and would probably end up being simpler too.",
      "created_at" : "2017-04-03T23:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291314820",
      "id" : 291314820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T23:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291314820",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "See https://github.com/theuni/bitcoin/commit/57ea0cc55e0368466c32f3fd272e48504ab2871d for the wrapping/defining changes. Still need to verify the first two points above, though.\r\n\r\n@jnewbery If you don't object, I'll go ahead and PR that as a prerequisite for this one.",
      "created_at" : "2017-04-04T03:05:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291381298",
      "id" : 291381298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T03:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291381298",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109587798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109587798"
         }
      },
      "body" : "Concept ACK, but please make this API explicit.\r\n\r\n- APIs that switch based on magic heuristics on how a value 'looks'. Initially this seems user friendly, but it will quickly grow to maintainable, insecure monsters of obscure rules. It should be made completely explicit.\r\n\r\n- Also: do not encode integers as strings and use functions like std::stoi. Just use .get_int() if you need an int value and leave the encoding of values up to the RPC mechanism.\r\n\r\nThe most straightforward way would be to just add a function `disconnectnodebyid`.",
      "commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "created_at" : "2017-04-04T06:48:21Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109587798",
      "id" : 109587798,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : 7,
      "pull_request_review_id" : 30698091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-04T06:48:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109587798",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Concept ACK. Though if we're going to be exposing this value to our apis, we need to define it sanely first.\r\n\r\nThis value is already exposed in APIs since `getpeerinfo` added `{\"id\": 14669}`. Handling wrapping sanely is important, but I don't think this is a blocker for more usage on the RPC API. Client applications should treat these numbers as opaque identifiers and the only thing they can rely on is that that an ID won't be reused for a different node within a very short timespan.",
      "created_at" : "2017-04-04T06:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291410743",
      "id" : 291410743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T06:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291410743",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Found myself wanting this for disconnect after reading debug.log many times, annoying to have to getpeerinfo for it.",
      "created_at" : "2017-04-04T09:30:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291445489",
      "id" : 291445489,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T09:30:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291445489",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109783590"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109783590"
         }
      },
      "body" : "Yes, I agree that APIs shouldn't be magic. I thought it wouldn't be too problematic here because there can't be any ambiguity at all between nodeIds and IP addresses (and `disconnectnode()` is already a bit magic - it can take either IPv4 or IPv6 addresses).\r\n\r\nI don't like the proliferation of additional RPCs that perform a very small function if we can avoid it.\r\n\r\nHow about we add a new argument to this RPC called \"nodeId\"? The RPC can be called with strictly one of the arguments. There's no magic or ambiguity, and the node disconnection logic is contained within one RPC.",
      "commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "created_at" : "2017-04-04T21:35:31Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109783590",
      "id" : 109783590,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : 7,
      "pull_request_review_id" : 30908582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-04T21:35:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109783590",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@theuni - of course, no objection at all!",
      "created_at" : "2017-04-04T21:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291639710",
      "id" : 291639710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T21:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291639710",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> ÃÂ there can't be any ambiguity at all between nodeIds and IP addresses\n\nWell you can write an IPv4 address as a decimal integer... I guess we're excluding that (very uncommon) usage?",
      "created_at" : "2017-04-04T22:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291654066",
      "id" : 291654066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T22:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291654066",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109867692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109867692"
         }
      },
      "body" : "> How about we add a new argument to this RPC called \"nodeId\"? The RPC can be called with strictly one of the arguments. There's no magic or ambiguity, and the node disconnection logic is contained within one RPC.\r\n\r\nSounds reasonable to me. To be clear: anything that doesn't encode the integer as a string is more reasonable to me than this (another reason: because it allows passing the 'id' value literally without having to string-encode it in the client). I don't have a strong opinion whether it should be one or multiple RPCs.",
      "commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "created_at" : "2017-04-05T09:21:52Z",
      "diff_hunk" : "@@ -248,7 +248,16 @@ UniValue disconnectnode(const JSONRPCRequest& request)\n     if(!g_connman)\n         throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n \n-    bool ret = g_connman->DisconnectNode(request.params[0].get_str());\n+    std::string node = (request.params[0].get_str());\n+    bool ret;\n+    if (std::all_of(node.begin(), node.end(), ::isdigit)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#discussion_r109867692",
      "id" : 109867692,
      "original_commit_id" : "54695963da369e47fd16f1685e3d0da911f8349d",
      "original_position" : 7,
      "path" : "src/rpc/net.cpp",
      "position" : 7,
      "pull_request_review_id" : 30996049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10143",
      "updated_at" : "2017-04-05T09:24:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109867692",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Well you can write an IPv4 address as a decimal integer... I guess we're excluding that (very uncommon) usage?\r\n\r\n+1. Exactly. This is exactly why these things get ugly. There's always overlaps in representations that you may not be thinking about in the initial design, then get realized later. Let's just take the sane route here and make the ambiguity impossible.",
      "created_at" : "2017-04-05T09:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291804273",
      "id" : 291804273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T09:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291804273",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Let's just take the sane route here and make the ambiguity impossible.\r\n\r\nYep, fine.",
      "created_at" : "2017-04-05T14:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291873071",
      "id" : 291873071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T14:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291873071",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "ok, another idea. I think it's reasonable that people might want to update node by id in other ways (ie switching whitelisting on and off, changing ban score, etc). How would you feel about an updatenode RPC to do those things? To begin with it will allow disconnecting and turning whitelisting on/off, and it can be added to later if people think further functionality is useful.\r\n\r\nI already have a branch with an updatenode RPC here: https://github.com/jnewbery/bitcoin/commit/5bbe24fd7597237388b73017036f5fe18c8470a6 . Adding a 'disconnect' argument to it is trivial.\r\n\r\nWe should keep this RPC hidden in order to not commit ourselves to a public API that we might want to change later (eg if we break out whitelisting into more granular behaviour at some point).\r\n\r\nThoughts?",
      "created_at" : "2017-04-05T14:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291874889",
      "id" : 291874889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T14:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291874889",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've added an `updatepeer` RPC here: #10160 which I think is better and more extensible, but I'd be interested to hear others' thoughts.",
      "created_at" : "2017-04-05T21:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292008255",
      "id" : 292008255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-05T21:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292008255",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I don't think 'updatepeer X disconnect' is clearer than 'disconnectnode'. Having the RPC call as the verb is easier to use and remember.\r\n\r\nWe have an example of a very bad multiplexed call in the API: `addnode X remove`. Your proposal isn't half as crazy as that :) And the idea of having a `updatenode` makes sense for changing other per-node variables, certainly for testing/debugging, but I don't think it's a good place to place disconnect.",
      "created_at" : "2017-04-07T15:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292561280",
      "id" : 292561280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T15:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292561280",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yes, `addnode X remove` is nuts, and I agree that having the RPC call as the verb is sensible.\r\n\r\nI'll reimplement this as an additional argument to disconnectnode.\r\n\r\nLonger term, my thinking around updatepeer is that it'd be handy as a swiss army knife for peer interop. We may wish to disconnect/ban/whitelist/change other attributes/etc for peers, and having a single RPC that does all of that would be a sensible API, and certainly better than a different RPC for each attribute. On the other hand, I do agree that 'disconnect' is a verb, so naturally `updatenode disconnect` is a bit weird.",
      "created_at" : "2017-04-07T16:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292580430",
      "id" : 292580430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T16:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292580430",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I've pushed a version where disconnectnode now takes two arguments: address and nodeid. Strictly one argument must be given. (note: with named arguments, you can just supply a single argument, with positional arguments you need to set 'address' to the empty string if you want to use 'nodeid').\r\n\r\nI changed the name of the existing argument from 'node' to 'address', since it only takes address. I think that's the right thing to do since the current name is misleading, but we'll need release notes to document the API change.\r\n\r\nThis should only be merged after @theuni's branch here: https://github.com/theuni/bitcoin/commit/57ea0cc55e0368466c32f3fd272e48504ab2871d.",
      "created_at" : "2017-04-07T20:55:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-292649420",
      "id" : 292649420,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-07T20:55:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/292649420",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
