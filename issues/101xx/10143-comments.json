[
   {
      "body" : "Concept ACK. Though if we're going to be exposing this value to our apis, we need to define it sanely first.\r\n\r\nATM it's just an int, so it's tricky encode/decode it safely. I'd prefer change it to a uint32_t first, so that we can use ParseUInt32 here.",
      "created_at" : "2017-04-03T20:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291263527",
      "id" : 291263527,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T20:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291263527",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Concept ACK, I've wanted this many times before... but I'm concerned about the nodeid--- right now if it wraps bad things happen, and it will be harder to fix if we've made it a part of the API.",
      "created_at" : "2017-04-03T21:23:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291278184",
      "id" : 291278184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T21:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291278184",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "edit: Decided I didn't like this thought and bailed. Meant to cancel, closed instead. Sorry!",
      "created_at" : "2017-04-03T21:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291285238",
      "id" : 291285238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T22:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291285238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I suppose it would be prudent to\r\n- determine where we assume nodeids are increasing in value, as opposed to just being unique. I should hope there are none of these, other than generally being able to assume that higher node == earlier connection\r\n- determine when we assume a nodeid to be globally unique. For example, if there's a global map<nodeid,int> that tallies sent bytes, that would be broken by duplicated values when ids wrapped.\r\n- determine when we assume that a nodeid is a unique identifier among current nodes.\r\n\r\nThe last one is what happens all over the place, and is fine as long as we ensure that the values really are unique. To do so, we can either:\r\n- maintain a set of currently used nodeids, and make sure that new values aren't in use before assigning a new one\r\n- disconnect all nodes when we hit max, forcing new connections starting from 0.\r\n\r\nObviously the first is cleaner, and would probably end up being simpler too.",
      "created_at" : "2017-04-03T23:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291314820",
      "id" : 291314820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-03T23:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291314820",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "See https://github.com/theuni/bitcoin/commit/57ea0cc55e0368466c32f3fd272e48504ab2871d for the wrapping/defining changes. Still need to verify the first two points above, though.\r\n\r\n@jnewbery If you don't object, I'll go ahead and PR that as a prerequisite for this one.",
      "created_at" : "2017-04-04T03:05:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10143#issuecomment-291381298",
      "id" : 291381298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10143",
      "updated_at" : "2017-04-04T03:59:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291381298",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
