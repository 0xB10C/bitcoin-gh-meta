[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10150#discussion_r109834797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10150"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109834797"
         }
      },
      "body" : "Don't do this! This existed for a reason. What you did will reduce libevent performance extremely by always enabling their internal debugging. Same is probably true for leveldb. I'd prefer just not to allow to switch those at runtime.\r\n(unless it can be done in a thread-safe way later on, but I don't think so)",
      "commit_id" : "0365458af7a11ea00649905569894eceb69fba24",
      "created_at" : "2017-04-05T05:52:41Z",
      "diff_hunk" : "@@ -385,13 +385,7 @@ bool InitHTTPServer()\n     // Redirect libevent's logging to our own log\n     event_set_log_callback(&libevent_log_cb);\n #if LIBEVENT_VERSION_NUMBER >= 0x02010100\n-    // If -debug=libevent, set full libevent debugging.\n-    // Otherwise, disable all libevent debugging.\n-    if (LogAcceptCategory(BCLog::LIBEVENT)) {\n-        event_enable_debug_logging(EVENT_DBG_ALL);\n-    } else {\n-        event_enable_debug_logging(EVENT_DBG_NONE);\n-    }\n+    event_enable_debug_logging(EVENT_DBG_ALL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10150#discussion_r109834797",
      "id" : 109834797,
      "original_commit_id" : "0365458af7a11ea00649905569894eceb69fba24",
      "original_position" : 11,
      "path" : "src/httpserver.cpp",
      "position" : 11,
      "pull_request_review_id" : 30960982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10150",
      "updated_at" : "2017-04-05T09:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109834797",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Concept ACK ofcourse",
      "created_at" : "2017-04-05T06:49:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10150#issuecomment-291770269",
      "id" : 291770269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10150",
      "updated_at" : "2017-04-05T06:49:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291770269",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Oh. That's great.\r\nConcept ACK. Will test soon.",
      "created_at" : "2017-04-05T06:53:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10150#issuecomment-291770883",
      "id" : 291770883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10150",
      "updated_at" : "2017-04-05T06:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291770883",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10150#discussion_r109924304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10150"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109924304"
         }
      },
      "body" : "Are you sure? I've tested this and logging is only enabled when libevent is built in debug mode:\r\n\r\nhttps://github.com/libevent/libevent/blob/2e52bace9f9998826bd3819af328efc8d18decf9/log-internal.h#L46\r\n\r\nand\r\n\r\nhttps://github.com/libevent/libevent/blob/2e52bace9f9998826bd3819af328efc8d18decf9/log-internal.h#L86\r\n\r\nI would have thought that if we're running libevent in debug, then performance is already hosed.\r\n\r\nIf I'm wrong, I left this as a separate commit so we can leave it out if needed. The first commit forbids trying to change libevent logging during runtime and stands on its own.\r\n\r\nleveldb: #9999 always hands a logging class to leveldb at startup, even if logging is disabled. I don't know if that affects performance. This PR doesn't change that behaviour.",
      "commit_id" : "0365458af7a11ea00649905569894eceb69fba24",
      "created_at" : "2017-04-05T14:05:03Z",
      "diff_hunk" : "@@ -385,13 +385,7 @@ bool InitHTTPServer()\n     // Redirect libevent's logging to our own log\n     event_set_log_callback(&libevent_log_cb);\n #if LIBEVENT_VERSION_NUMBER >= 0x02010100\n-    // If -debug=libevent, set full libevent debugging.\n-    // Otherwise, disable all libevent debugging.\n-    if (LogAcceptCategory(BCLog::LIBEVENT)) {\n-        event_enable_debug_logging(EVENT_DBG_ALL);\n-    } else {\n-        event_enable_debug_logging(EVENT_DBG_NONE);\n-    }\n+    event_enable_debug_logging(EVENT_DBG_ALL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10150#discussion_r109924304",
      "id" : 109924304,
      "original_commit_id" : "0365458af7a11ea00649905569894eceb69fba24",
      "original_position" : 11,
      "path" : "src/httpserver.cpp",
      "position" : 11,
      "pull_request_review_id" : 31057669,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10150",
      "updated_at" : "2017-04-05T14:05:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109924304",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
