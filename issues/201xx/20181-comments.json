[
   {
      "author_association" : "NONE",
      "body" : "`time` in [getrawtransaction](https://bitcoincore.org/en/doc/0.20.0/rpc/rawtransactions/getrawtransaction/) is same as `block time`\r\n\r\n>   \"blocktime\" : xxx,                 (numeric) The block time expressed in UNIX epoch time\r\n  \"time\" : n                         (numeric) **Same as \"blocktime\"**\r\n\r\nThere are 3 different variables for time in results of [gettransaction](https://bitcoincore.org/en/doc/0.20.0/rpc/wallet/gettransaction/)\r\n\r\n>   **\"blocktime\" : xxx,                       (numeric) The block time expressed in UNIX epoch time.**\r\n  \"txid\" : \"hex\",                          (string) The transaction id.\r\n  \"walletconflicts\" : [                    (json array) Conflicting transaction ids.\r\n    \"hex\",                                 (string) The transaction id.\r\n    ...\r\n  ],\r\n  **\"time\" : xxx,                            (numeric) The transaction time expressed in UNIX epoch time.\r\n  \"timereceived\" : xxx,                    (numeric) The time received expressed in UNIX epoch time.**",
      "created_at" : "2020-10-18T22:21:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20181#issuecomment-711432462",
      "id" : 711432462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20181",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTQzMjQ2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-18T22:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711432462",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks, right, so I see this explains the `getrawtransaction` time.\r\nStill, this doesn't explain the issue that all imported transactions after rescan have the time of the most recent transaction detected.",
      "created_at" : "2020-10-25T15:38:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20181#issuecomment-716167404",
      "id" : 716167404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20181",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjE2NzQwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-25T15:38:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716167404",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/10667901?v=4",
         "events_url" : "https://api.github.com/users/ben-kaufman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ben-kaufman/followers",
         "following_url" : "https://api.github.com/users/ben-kaufman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ben-kaufman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ben-kaufman",
         "id" : 10667901,
         "login" : "ben-kaufman",
         "node_id" : "MDQ6VXNlcjEwNjY3OTAx",
         "organizations_url" : "https://api.github.com/users/ben-kaufman/orgs",
         "received_events_url" : "https://api.github.com/users/ben-kaufman/received_events",
         "repos_url" : "https://api.github.com/users/ben-kaufman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ben-kaufman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ben-kaufman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ben-kaufman"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "As a specter user, I had the same problem with multiple incorrect date across several wallet.\r\n\r\nI've look at the Bitcoin Core code and the function ComputeSmartTime in wallet.cpp attire my attention.\r\nThe algorithm try to search for the best time between the received one, the block time one and a smart one wich is produced by a lot of time corrections.\r\nThis ComputeSmartTime method is conceived with a real time approach in mind.\r\nThe technique used to determine the smart version of the time is based on the hypothesis that you can't discover transactions in the wrong order.\r\nAnd if you suppose that transcations can be discovered in the wrong order, the lastestEntry variable is going to be wrong for every transactions discovered after and be the exact same date.\r\nThat's exactly what I saw in my Bitcoin Core wallet, a lot of transactions with the exact same date, which is incorrect.\r\n\r\nI've not found yet a simple example where transactions could be dicovered in the wrong order, but I'm looking for a case where you start with a small rescan and after a larger one.\r\nTo be more precise : if you rescan only the latest part of the history (2020 year only), and proceed to a larger rescan after (full rescan),\r\nevery transaction before 2020 will be noted in 2020 du to the lastEntry constraint in nTimeSmart = std::max(latestEntry, std::min(blocktime, latestNow));\r\n\r\nWhen you think about it, in a rescanning scenario, the blocktime is the only exploitable time. The received one means nothing and you can't find a better value.\r\n\r\nThat's why I've patched the problem like this :\r\n\r\nadd a rescanning_old_block boolean to ComputeSmartTime\r\nIn case of rescanning_old_block don't use anything else than blocktime.\r\npropagate this boolean in the methods hierarchy to differenciate realtime incoming transactions with rescanning case.\r\nI'm currently testing my patch. Tests cases stay all green. If everything is repaired in my wallets,\r\nI'll submit this little patch in another comment to get feedback on it.",
      "created_at" : "2020-12-02T17:22:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20181#issuecomment-737375928",
      "id" : 737375928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20181",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzM3NTkyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T17:22:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737375928",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/75384375?v=4",
         "events_url" : "https://api.github.com/users/BitcoinTsunami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinTsunami/followers",
         "following_url" : "https://api.github.com/users/BitcoinTsunami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinTsunami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinTsunami",
         "id" : 75384375,
         "login" : "BitcoinTsunami",
         "node_id" : "MDQ6VXNlcjc1Mzg0Mzc1",
         "organizations_url" : "https://api.github.com/users/BitcoinTsunami/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinTsunami/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinTsunami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinTsunami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinTsunami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinTsunami"
      }
   }
]
