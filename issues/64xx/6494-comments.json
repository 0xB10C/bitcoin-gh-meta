[
   {
      "body" : "This isn't really needed is it? If a node is already sending \"getheaders\" then presumably a node can assume it prefers headers rather than invs, perhaps?",
      "created_at" : "2015-07-30T20:55:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6494#issuecomment-126483990",
      "id" : 126483990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6494",
      "updated_at" : "2015-07-30T20:55:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126483990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "@rebroad  Sorry, I just realized I should have emphasized more clearly that this PR also includes code to enable direct-fetching of blocks based on headers messages.  Without that change, nodes that received a headers message would otherwise wait to download blocks through the existing parallel fetch mechanism, which would generally make headers-announcement inferior to inv-announcements (because we have direct-fetch code in the inv-processing logic, which means we'd be quicker to request a new block).\r\n\r\nConsequently I think it makes sense for nodes to somehow opt-in to the new behavior.  0.10 and 0.11 nodes should continue to receive inv's even after this code is merged.\r\n\r\nOne thing that wasn't clear to me was whether it's really necessary to do the protocol version bump in order to deploy the new p2p message, given that the new message is backwards compatible -- nodes are free to ignore it.  However I'm not sure I have a good grasp of how the protocol versions should be thought about.\r\n",
      "created_at" : "2015-07-31T00:28:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6494#issuecomment-126529816",
      "id" : 126529816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6494",
      "updated_at" : "2015-07-31T00:28:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126529816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar Why not use the existing parallel fetch mechanism? I don't see any advantage in fetching the block outside of that.",
      "created_at" : "2015-07-31T11:35:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6494#issuecomment-126661302",
      "id" : 126661302,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6494",
      "updated_at" : "2015-07-31T11:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126661302",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "The existing parallel fetch mechanism has a delay and an extra roundtrip,\nbecause it first needs to ask for headers before it can start fetching any\nblock.\n\nSending all headers immediately when announcing the block avoids that\nround-trip, potentially improving propagation speed significantly over\nhigh-latency links.\n",
      "created_at" : "2015-07-31T12:37:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6494#issuecomment-126677054",
      "id" : 126677054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6494",
      "updated_at" : "2015-07-31T12:37:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/126677054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Fixed @casey's nits",
      "created_at" : "2015-08-03T17:44:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6494#issuecomment-127344879",
      "id" : 127344879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6494",
      "updated_at" : "2015-08-03T17:44:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127344879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
