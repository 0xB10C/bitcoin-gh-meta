[
   {
      "body" : "I think this is a great idea, particularly for pruning nodes, where avoiding a reindex means avoiding redownloading all the old blocks.",
      "created_at" : "2016-05-10T12:07:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-218138303",
      "id" : 218138303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-05-10T12:07:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/218138303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Right. For pruning there may be an additional constraints (and/or a few old blocks may have to be re-downloaded, to ensure that the last 550MB of blocks is there), but I don't see why it couldn't work in principle, and it'd still be possible to restore much faster than starting entirely from scratch.\r\n\r\nEdit: Hm thinking about this that may not even be necessary. If the database backup is not too old, from before the last pruned block, it would just revisit the blocks on disk and end up where it left.",
      "created_at" : "2016-05-10T12:15:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-218139815",
      "id" : 218139815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-05-10T12:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/218139815",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Great idea!\r\nI guess there is no easy way to dump only the differential between the last periodical dump to speed up the dump time? If the dump is running on a background thread this probably doesn't matter that much.",
      "created_at" : "2016-05-11T18:33:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-218549310",
      "id" : 218549310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-05-11T18:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/218549310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli The differential between two UTXO sets is called the blockchain (without the signatures) :p",
      "created_at" : "2016-05-11T18:36:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-218550068",
      "id" : 218550068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-05-11T18:36:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/218550068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I've been making periodic chainstate database backups at the file system level. Since the `*.ldb` files are write-once, they can be backed up using hard links. This saves disk space, as the backup can share many files with the live database. Also, it means the backup happens nearly instantly, only taking time to create the new links to the inodes. In my setup, I do shut down the node while taking the snapshot of the database, but if this functionality were built in, presumably the database could simply be closed briefly while the snapshot is made, and the whole process wouldn't have exit.\r\n\r\nI guess there is some kind of equivalent of hard links on Windows. Not as elegant as the Unix way, but it should still work as well, I'd think.",
      "created_at" : "2016-05-19T21:09:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-220453020",
      "id" : 220453020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-05-19T21:09:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220453020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/797782?v=3",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> Since the *.ldb files are write-once, they can be backed up using hard links. \n\nThat's a very interesting suggestion. Indeed, unlike a background copy this does require closing the database to be able to do this without interference, but only momentarily.\n\nThis won't work on OSes without hardlinks though, such as Windows.\n",
      "created_at" : "2016-06-22T10:17:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-227702562",
      "id" : 227702562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2016-08-17T10:33:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/227702562",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Are you sure it's safe to create a backup using hard links? LevelDB has additional metadata in it that maps which key ranges belong to which files, and that has to be in a consistent state with the rest of the database. The only way to do this atomically is via code in LevelDB (which could be written to use hard links, but it's not just a matter of saving all the .ldb files).",
      "created_at" : "2018-03-10T07:26:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-372009839",
      "id" : 372009839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2018-03-10T07:26:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372009839",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Are you sure it's safe to create a backup using hard links?\r\n\r\nDon't do it while LevelDB is *running*! But yes, if the application is shut down, then you can make a backup of the database using hard links. Note that some files should be copied rather than hard linked, as only the `*.ldb` files are write-once. The `*.log` file is appended to and must be backed up using a full copy. I don't know about the `MANIFEST*` file, so I've been backing it up using full copies as well. But the `*.ldb` files are never modified once fully written Ã¢ÂÂ they are only deleted once they are obsolete Ã¢ÂÂ so they're safe to back up by hard linking.",
      "created_at" : "2018-03-10T12:07:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8037#issuecomment-372024957",
      "id" : 372024957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8037",
      "updated_at" : "2018-03-10T12:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372024957",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   }
]
