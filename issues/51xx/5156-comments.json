[
   {
      "body" : "I've seen this problem too. I was debugging it to discard any blame on my own code, but yes, it looks like an off by one error somewhere in the undo handling code.",
      "created_at" : "2014-10-28T16:34:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5156#issuecomment-60786891",
      "id" : 60786891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5156",
      "updated_at" : "2014-10-28T16:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60786891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "Might this be related to the breakage of IsInitialBlockDownload? I think I haven't seen this issue since I'm running #5158 in my test nodes....",
      "created_at" : "2014-11-13T14:20:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5156#issuecomment-62896293",
      "id" : 62896293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5156",
      "updated_at" : "2014-11-13T14:20:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/62896293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1192483?v=3",
         "events_url" : "https://api.github.com/users/rdponticelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rdponticelli/followers",
         "following_url" : "https://api.github.com/users/rdponticelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rdponticelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rdponticelli",
         "id" : 1192483,
         "login" : "rdponticelli",
         "organizations_url" : "https://api.github.com/users/rdponticelli/orgs",
         "received_events_url" : "https://api.github.com/users/rdponticelli/received_events",
         "repos_url" : "https://api.github.com/users/rdponticelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rdponticelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rdponticelli"
      }
   },
   {
      "body" : "This may be fixed by #5241; before that was not always a guarantee that data is synced to disk before a database record is written that refers to it. Though I would be surprised if it was introduced recently; it's been that way since 0.8.0.",
      "created_at" : "2014-11-13T14:48:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5156#issuecomment-62900410",
      "id" : 62900410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5156",
      "updated_at" : "2014-11-13T14:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/62900410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@rdponticelli Oh, IsInitialBlockDownload() not working would indeed potentially make this worse, as there used to be a sync call only when not in IBD.",
      "created_at" : "2014-11-13T14:50:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5156#issuecomment-62900626",
      "id" : 62900626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5156",
      "updated_at" : "2014-11-13T14:50:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/62900626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Closing this, I haven't had this issue running master for a long time.",
      "created_at" : "2014-12-05T11:36:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5156#issuecomment-65778837",
      "id" : 65778837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5156",
      "updated_at" : "2014-12-05T11:36:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65778837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
