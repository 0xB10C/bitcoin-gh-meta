[
   {
      "body" : "For non-Bitcoin Core nodes, they should know that relaying alerts to a /Satoshi/ node that are not signed by the /Satoshi/ key will be rejected, so should probably just relay based on the version field. Still, no objection if the point is to not ban after alert-key-rotate.",
      "created_at" : "2014-10-30T19:13:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-61153006",
      "id" : 61153006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-10-30T19:13:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61153006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Actually, I take that back, even satoshi clients should just relay based on the version the other peer gives them, in the case of an alert key change.",
      "created_at" : "2014-10-30T19:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-61153910",
      "id" : 61153910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-10-30T19:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61153910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I'm slightly against this.\r\n\r\nThere is a theoretical DoS attack possible; it might be possible to keep a node with high bandwidth but not much CPU busy doing nothing but validating invalid alert signatures (CPU exhaustion attack). Banning after getting 10 invalid-signature-alerts prevents that.\r\n\r\nMostly not a practical attack, most nodes are bandwidth-constrained not CPU-constrained. But I could imagine attacking a VPS running in a datacenter from another machine in the same datacenter.\r\n\r\nIn any case, if others think this should be done then there should be a regression test to make sure bitcoind doesn't behave badly if it gets a bunch of zero-size alerts with bad signatures, max-message-size-alerts with bad signatures, etc.....\r\n",
      "created_at" : "2014-10-30T19:42:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-61157284",
      "id" : 61157284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-10-30T19:42:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61157284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Sigantures use a variable length encoding. ignoring the alert format and just thinking about signatures lone, I expect you could hard saturate the cpu on an arbtirary host with about 1-2 mbit/sec of bogus signatures.",
      "created_at" : "2014-10-31T05:52:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-61221751",
      "id" : 61221751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-10-31T05:52:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/61221751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "If we want the alert messages to be usable by other clients without us banning them, can't we add a 'client type' marker?\r\n\r\nIf that doesn't match 'Satoshi', don't even check the signature just ignore it. If we DO have to verify the signature and it fails, give the penalty, that avoids the DoS angle. We only want to punish fake bitcoin  core alerts.\r\n\r\nOther clients can then sent alert messages at will, with their own marker, and we'll ignore the messages without eventually banning them.",
      "created_at" : "2014-12-16T10:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-67140964",
      "id" : 67140964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-12-16T10:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67140964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj that doesn't really help, because you cannot get connectivity that way, you'll end up partitioned and not getting the messages.  If you're going to implement a seperate topology to avoid this, you don't even need to use alerts, just use another message type and it will be ignored.",
      "created_at" : "2014-12-16T10:43:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-67141179",
      "id" : 67141179,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-12-16T10:43:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67141179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Well achieving connectivity is up to them. The only thing it'd achieve is to make the alert message usable by other clients and remove the 'satoshi preference' from the protocol.\r\n\r\nAgree that using another message type would work just as well though!\r\n",
      "created_at" : "2014-12-16T10:44:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-67141336",
      "id" : 67141336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-12-16T10:44:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67141336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Anyhow - closing this, as it opens up to a DoS angle without any gain. I like @gmaxwell's idea: just use a different message instead of sending `alert` with your own signature, making bitcoin core clients unnecessarily validate signatures.\r\n\r\nIdeally `alert` should then have been `alert_satoshi` (or have a client name field) as it only applies to us but there's no turning back...\r\n",
      "created_at" : "2014-12-16T10:47:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5179#issuecomment-67141651",
      "id" : 67141651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5179",
      "updated_at" : "2014-12-16T10:48:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67141651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
