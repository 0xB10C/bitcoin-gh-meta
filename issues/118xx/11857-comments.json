[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11857#discussion_r155908730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11857"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155908730"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Instead of blocking, give 503?",
      "commit_id" : "ae276cead580e459d881db5b7439b618ec0854a6",
      "created_at" : "2017-12-09T01:32:57Z",
      "diff_hunk" : "@@ -350,6 +351,10 @@ static bool rest_tx(HTTPRequest* req, const std::string& strURIPart)\n     if (!ParseHashStr(hashStr, hash))\n         return RESTERR(req, HTTP_BAD_REQUEST, \"Invalid hash: \" + hashStr);\n \n+    if (g_txindex) {\n+        g_txindex->BlockUntilSyncedToCurrentChain();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11857#discussion_r155908730",
      "id" : 155908730,
      "original_commit_id" : "ae276cead580e459d881db5b7439b618ec0854a6",
      "original_position" : 13,
      "path" : "src/rest.cpp",
      "position" : 13,
      "pull_request_review_id" : 82311538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11857",
      "updated_at" : "2017-12-09T01:32:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155908730",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11857#discussion_r155915071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11857"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155915071"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Comment incomplete or outdated?",
      "commit_id" : "ae276cead580e459d881db5b7439b618ec0854a6",
      "created_at" : "2017-12-09T06:51:20Z",
      "diff_hunk" : "@@ -1426,9 +1433,9 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n \n                 if (fRequestShutdown) break;\n \n-                // LoadBlockIndex will load fTxIndex from the db, or set it if\n+                // LoadBlockIndex will load fHavePruned if we've ever removed a",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11857#discussion_r155915071",
      "id" : 155915071,
      "original_commit_id" : "ae276cead580e459d881db5b7439b618ec0854a6",
      "original_position" : 33,
      "path" : "src/init.cpp",
      "position" : 33,
      "pull_request_review_id" : 82318411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11857",
      "updated_at" : "2017-12-09T06:51:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155915071",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "High-Level Concept ACK. As for your two notes:\r\n\r\n> an alternative would be to split the txindex into a separate DB and do a data migration on upgrade.\r\n\r\nI'd vote strongly for this. Keeping them separate is good.\r\n\r\n> though it may be fine to just do the TxIndex write directly in the BlockConnected method.\r\n\r\nYes, I think you should just do this. I'd like to move the CValidationInterface semantics to no longer be a single thread run on the scheduler but instead multiple scheduler threads that process events and only guarantee order for individual clients instead of globally.",
      "created_at" : "2017-12-09T16:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11857#issuecomment-350481060",
      "id" : 350481060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11857",
      "updated_at" : "2017-12-09T16:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/350481060",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
