[
   {
      "author_association" : "MEMBER",
      "body" : "I don't think the datadir should ever be specified in the bitcoin.conf file. That would imply that the conf file is in one place (the original datadir) and the actual data is elsewhere. This splits up the contents of the datadir which I don't think we should allow.\r\n\r\nI think it would be better to throw an error if it sees the datadir option there or ignore it.",
      "created_at" : "2017-12-05T16:21:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11829#issuecomment-349356525",
      "id" : 349356525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11829",
      "updated_at" : "2017-12-05T16:21:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349356525",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree with @achow101, in that case we should fail if `datadir` is specified in .conf file?\r\n\r\n> throw an error if it sees the datadir option there\r\n\r\nEdit: Ã¢ÂÂÃ¯Â¸Â Ã°ÂÂÂ @achow101 ",
      "created_at" : "2017-12-05T16:25:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11829#issuecomment-349357973",
      "id" : 349357973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11829",
      "updated_at" : "2017-12-05T16:26:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349357973",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 it's already possible to split up the datadir in the same way by specifying `-conf` isn't it?",
      "created_at" : "2017-12-05T23:35:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11829#issuecomment-349477571",
      "id" : 349477571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11829",
      "updated_at" : "2017-12-05T23:35:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349477571",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11829#discussion_r155149625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11829"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155149625"
         }
      },
      "author_association" : "OWNER",
      "body" : "Any reason why you're once using `GetDataDir(false)` and once `gArgs.GetArg(\"-datadir\", \"\")`? It's a bit confusing if they can ever differ, and if so, why they're used here.",
      "commit_id" : "529b8667599ad74f6dae639b889d22e907353070",
      "created_at" : "2017-12-06T05:30:45Z",
      "diff_hunk" : "@@ -639,6 +639,9 @@ void ArgsManager::ReadConfigFile(const std::string& confPath)\n     }\n     // If datadir is changed in .conf file:\n     ClearDatadirCache();\n+    if (!fs::is_directory(GetDataDir(false))) {\n+        throw std::runtime_error(strprintf(\"specified data directory \\\"%s\\\" does not exist.\", gArgs.GetArg(\"-datadir\", \"\").c_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11829#discussion_r155149625",
      "id" : 155149625,
      "original_commit_id" : "529b8667599ad74f6dae639b889d22e907353070",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : 5,
      "pull_request_review_id" : 81419621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11829",
      "updated_at" : "2017-12-06T05:31:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/155149625",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@achow101 It's more complicated, as it is possible to specify the config file on the command line too (which then on its turn can set the datadir). This will get even harder once we add network-specific config (#10996). I'd suggest merging this as is, and then separately thinking hard about what configurations should be supported.",
      "created_at" : "2017-12-06T06:44:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11829#issuecomment-349550441",
      "id" : 349550441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11829",
      "updated_at" : "2017-12-06T06:44:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349550441",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
