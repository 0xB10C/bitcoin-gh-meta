[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I mean looks cool, but I dont know how many parallell things we're gonna have (seems like mostly just the rescanning stuff, afaiu, everything is is gonna block RPC), it seems like it'd be a bit of building a neat progress framework that nothing is gonna use. If we were to go down the route of encouraging more rescanning or so this may make sense, but I konw a bunch of folks hate rescan generally.",
      "created_at" : "2017-12-05T03:14:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349182080",
      "id" : 349182080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T03:14:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349182080",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I already have identified a bunch of stuff other than rescanning. Everything that happens asynchronously to the UI has the potential to be an activity: creating transactions, dump/import wallets, process blocks, db verification, blockchain check...\r\n\r\nBeside, IMO the RAII here fits better (because of all it's benefits) than the signal. Also, the interface turns to be more organised.\r\n\r\nThis is an alternative solution to #11200.",
      "created_at" : "2017-12-05T07:54:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349224375",
      "id" : 349224375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T07:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349224375",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pinging @jonasschnelli @ryanofsky @luke-jr since you have been working on the UI.",
      "created_at" : "2017-12-05T07:57:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349224971",
      "id" : 349224971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T07:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349224971",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Following https://github.com/bitcoin/bitcoin/pull/11200#pullrequestreview-59957173\r\n\r\n@ryanofsky with this approach callbacks are not needed.",
      "created_at" : "2017-12-05T08:11:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349227966",
      "id" : 349227966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T08:11:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349227966",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sounds great! I would love to see the code changes. An RAII class seems perfect for managing start/stop/progress of ongoing tasks. \r\n\r\nAs far as UI, I would probably suggest embedding activity display into the main window to avoid the distracting popup. In the special case when activity is triggered by an RPC console command, progress for that one activity could be mirrored in the RPC console (as well as overall activity display).\r\n\r\n> @ryanofsky with this approach callbacks are not needed\r\n\r\nJust a semantic nitpick but in my mind signals, virtual methods, and function pointers are all \"callbacks\", so any `Activity` class implementation would need to use some form of callback to avoid creating a dependency of non-gui code on gui code.",
      "created_at" : "2017-12-05T12:06:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349285184",
      "id" : 349285184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T12:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349285184",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> An RAII class seems perfect for managing start/stop/progress of ongoing tasks.\r\n\r\n:+1:\r\n\r\n> to avoid the distracting popup\r\n\r\nAt the moment it's not a popup, it is up to the user to open the activity window. I don't think this is a first class citizen for the main window. Maybe add an activity icon on the status bar, like:\r\n\r\n![ajax-loader](https://user-images.githubusercontent.com/3534524/33612551-d3ec0c10-d9c9-11e7-9651-4d28eddbeb89.gif).\r\n\r\nAnyway, for now I'm more interested in having concept ACK's than discussing the looks of it.\r\n\r\nRegarding the *callback* discussion, this is what I'm planning to support:\r\n```cpp\r\nActivity a(...);\r\na.SetAllowCancel(true);\r\n\r\nwhile (!a.IsCancelled()) {\r\n    ...\r\n    a.SetProgress(current, total);\r\n}\r\n```",
      "created_at" : "2017-12-05T14:40:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349323373",
      "id" : 349323373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T14:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349323373",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> At the moment it's not a popup\r\n\r\nOh, misinterpreted the animation. In any case I just wanted to bring up the possibility integrating the progress display into existing windows instead of having a separate window. Just a suggestion which you should feel free to take or leave.\r\n\r\n> I don't think this is a first class citizen for the main window. Maybe add an activity icon on the status bar\r\n\r\nAn activity indicator with optional progress bar and pause / cancel buttons on or above the status line was what I was thinking. The same display could be shown in the RPC console for actions triggered by console commands. Again though, this is just a suggestion.\r\n\r\n> Regarding the callback discussion, this is what I'm planning to support [...]\r\n\r\nI personally like that a lot. I think it looks better than adding more arguments to `uiInterface.ShowProgress`, and would be less error-prone (though equivalent). @TheBlueMatt, I don't think I understand your fears of this turning into some kind of \"progress framework.\" It just seems like replacing or wrapping the overloaded `uiInterface.ShowProgress` callback with a pretty simple class.",
      "created_at" : "2017-12-05T15:22:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11826#issuecomment-349336677",
      "id" : 349336677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11826",
      "updated_at" : "2017-12-05T15:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/349336677",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
