[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19306 (refactor: Replace RecursiveMutex with Mutex in CTxMemPool by hebasto)\n* #18191 (Change UpdateForDescendants to use Epochs by JeremyRubin)\n* #18086 (Accurately account for mempool index memory by sipa)\n* #18044 (Use wtxid for transaction relay by sdaftuar)\n* #18017 (txmempool: split epoch logic into class by ajtowns)\n* #17786 (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-07-10T02:21:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-656443703",
      "id" : 656443703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NjQ0MzcwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-19T12:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656443703",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is cool! How much memory would be saved by this change on average, do you think?",
      "created_at" : "2020-07-15T12:24:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-658736321",
      "id" : 658736321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1ODczNjMyMQ==",
      "updated_at" : "2020-07-15T12:24:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658736321",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "std::sets are awful for memory. I think you can get like a max of 220k txns in the mempool... let's assume that average is 50k? I don't know if that's a good assumption though. the overhead for a map entry is very high. I would guess that it's somewhere around 64 bytes per entry? Can double check, but based on:\r\n```\r\n struct stl_tree_node\r\n {\r\n private:\r\n     int color;\r\n     void* parent;\r\n     void* left;\r\n     void* right;\r\n     std::pair<txiter, txlinks>;\r\n };\r\n```\r\nThat's 4 bytes + 4 bytes alignment + 8 * 3 bytes pointers + 8 bytes txiter (ignoring txlinks itself since we still store those in the CTxMempoolEntry, but adding another 8 bytes for alignments and padding) = 6 * 8 = 48 byes of raw overhead. Then with mallocusage, this gives us 64 bytes. So it may not *use* 64 bytes per element, but we certainly count that many! Depending on how big txlinks is itself, we may have some extra overhead (implementation dependent).\r\n\r\nAnyways, let's assume 64 bytes.\r\n\r\n\r\n64*50,000 bytes = 3.2 MB, 64 * 200,000 bytes = 12.8 MB.\r\n\r\nFor a 300MB pool, 1-3% memory savings. Note that this doesn't account for the fact that there are other downsides to the memory fragmentation of doing so many allocations, but a pooled allocator could also help with this issue.\r\n\r\n\r\n \r\n\r\n(A further change which is maybe worth looking at is the Children themselves -- because there is so much memory overhead, storing a std::vector<hash> and std::vector<element> might be more efficient for many txs with small numbers of vins/vouts, especially since you can super optimize checking if a H is in a vector v.s. log N random memory compares)\r\n\r\n",
      "created_at" : "2020-07-15T19:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-658946971",
      "id" : 658946971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1ODk0Njk3MQ==",
      "updated_at" : "2020-07-15T20:11:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658946971",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "```c++\r\n  template <size_t s1, size_t s2> struct static_check {\r\n       static_check() {\r\n       static_assert(s1 == s2);\r\n       }\r\n   };\r\n       auto s = static_check<48, sizeof(setEntries)>();\r\n       auto s2 = static_check<48*2, sizeof(TxLinks)>();\r\n       auto s3 = static_check<136, sizeof(memusage::stl_tree_node<std::pair<const txiter, TxLinks>>)>();\r\n       auto s4 = static_check<160, ((31 + sizeof(memusage::stl_tree_node<std::pair<const txiter, TxLinks>>)) >> 4)<<4 >();\r\n```\r\nThis confirms that a setEntries uses 48 bytes for the container itself, and the overhead is 64 bytes per node for each TxLinks in the mapLinks data structure compared to inlined TxLinks in CTxMempoolEntry. Even though the nodes themselves are only 136 bytes, the MallocUsage accounting pads out to 160 bytes.",
      "created_at" : "2020-07-15T20:35:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-658995547",
      "id" : 658995547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1ODk5NTU0Nw==",
      "updated_at" : "2020-07-15T20:35:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/658995547",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457078253"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457078253"
         }
      },
      "author_association" : "MEMBER",
      "body" : "da53f15e\r\n```suggestion\r\n        const CTxMemPoolEntry::Children& setChildren = cit.GetMemPoolChildrenConst();\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T05:57:54Z",
      "diff_hunk" : "@@ -59,21 +59,21 @@ size_t CTxMemPoolEntry::GetTxSize() const\n // descendants.\n void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendants, const std::set<uint256> &setExclude)\n {\n-    setEntries stageEntries, setAllDescendants;\n-    stageEntries = GetMemPoolChildren(updateIt);\n+    CTxMemPoolEntry::Children stageEntries, setAllDescendants;\n+    stageEntries = updateIt->GetMemPoolChildrenConst();\n \n     while (!stageEntries.empty()) {\n-        const txiter cit = *stageEntries.begin();\n+        const CTxMemPoolEntry& cit = *stageEntries.begin();\n         setAllDescendants.insert(cit);\n         stageEntries.erase(cit);\n-        const setEntries &setChildren = GetMemPoolChildren(cit);\n-        for (txiter childEntry : setChildren) {\n-            cacheMap::iterator cacheIt = cachedDescendants.find(childEntry);\n+        const CTxMemPoolEntry::Children &setChildren = cit.GetMemPoolChildrenConst();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457078253",
      "id" : 457078253,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3ODI1Mw==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 69,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451314404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457078253",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457078529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457078529"
         }
      },
      "author_association" : "MEMBER",
      "body" : "da53f15e\r\n```suggestion\r\n        const CTxMemPoolEntry::Parents& setMemPoolParents = stageit->GetMemPoolParentsConst();\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T05:58:28Z",
      "diff_hunk" : "@@ -195,11 +196,13 @@ bool CTxMemPool::CalculateMemPoolAncestors(const CTxMemPoolEntry &entry, setEntr\n             return false;\n         }\n \n-        const setEntries & setMemPoolParents = GetMemPoolParents(stageit);\n-        for (txiter phash : setMemPoolParents) {\n+        const CTxMemPoolEntry::Parents & setMemPoolParents = stageit->GetMemPoolParentsConst();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457078529",
      "id" : 457078529,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3ODUyOQ==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 199,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451314404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457078529",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "da53f15e be sure phash and hash are used in the right places here",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T05:59:59Z",
      "diff_hunk" : "@@ -195,11 +196,13 @@ bool CTxMemPool::CalculateMemPoolAncestors(const CTxMemPoolEntry &entry, setEntr\n             return false;\n         }\n \n-        const setEntries & setMemPoolParents = GetMemPoolParents(stageit);\n-        for (txiter phash : setMemPoolParents) {\n+        const CTxMemPoolEntry::Parents & setMemPoolParents = stageit->GetMemPoolParentsConst();\n+        for (const CTxMemPoolEntry& hash : setMemPoolParents) {\n+            txiter phash = mapTx.iterator_to(hash);\n+\n             // If this is a new ancestor, add it.\n             if (setAncestors.count(phash) == 0) {\n-                parentHashes.insert(phash);\n+                parentHashes.insert(hash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079277",
      "id" : 457079277,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3OTI3Nw==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 205,
      "original_position" : 102,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451314404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079277",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "da53f15e\r\n```suggestion\r\n    const CTxMemPoolEntry::Children& setMemPoolChildren = it->GetMemPoolChildrenConst();\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T06:00:23Z",
      "diff_hunk" : "@@ -242,9 +245,9 @@ void CTxMemPool::UpdateEntryForAncestors(txiter it, const setEntries &setAncesto\n \n void CTxMemPool::UpdateChildrenForRemoval(txiter it)\n {\n-    const setEntries &setMemPoolChildren = GetMemPoolChildren(it);\n-    for (txiter updateIt : setMemPoolChildren) {\n-        UpdateParent(updateIt, it, false);\n+    const CTxMemPoolEntry::Children &setMemPoolChildren = it->GetMemPoolChildrenConst();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079482",
      "id" : 457079482,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3OTQ4Mg==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 248,
      "original_position" : 127,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451314404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079482",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079774"
         }
      },
      "author_association" : "MEMBER",
      "body" : "da53f15e\r\n```suggestion\r\n        const CTxMemPoolEntry::Children& setChildren = it->GetMemPoolChildrenConst();\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T06:00:59Z",
      "diff_hunk" : "@@ -457,8 +460,9 @@ void CTxMemPool::CalculateDescendants(txiter entryit, setEntries& setDescendants\n         setDescendants.insert(it);\n         stage.erase(it);\n \n-        const setEntries &setChildren = GetMemPoolChildren(it);\n-        for (txiter childiter : setChildren) {\n+        const CTxMemPoolEntry::Children &setChildren = it->GetMemPoolChildrenConst();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457079774",
      "id" : 457079774,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3OTc3NA==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 463,
      "original_position" : 200,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451314404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457079774",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "nit: maybe a less violent PR title :axe: :slightly_smiling_face: :+1: (joking, but s/kill/remove/ works) and add the component prefix",
      "created_at" : "2020-07-20T07:01:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-660843578",
      "id" : 660843578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDg0MzU3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T07:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660843578",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack You must have hated https://github.com/bitcoin/bitcoin/pull/9260.",
      "created_at" : "2020-07-20T07:06:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-660845507",
      "id" : 660845507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDg0NTUwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T07:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660845507",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not bad :) The description even required translation. https://github.com/bitcoin/bitcoin/pull/9260#issuecomment-267325376",
      "created_at" : "2020-07-20T07:14:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-660848975",
      "id" : 660848975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDg0ODk3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T07:14:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660848975",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "One run each of all benchmarks (though I suspect there is a fair amount of variation between runs).\r\n\r\n<details><summary>all benchmarks, master vs this branch rebased on master</summary><p>\r\n\r\ncurrent master\r\n```\r\n(master)$ ./src/bench/bench_bitcoin\r\n# Benchmark, evals, iterations, total, min, max, median\r\nAddrManAdd, 5, 5, 1.72099, 0.063045, 0.0772824, 0.0669075\r\nAddrManGetAddr, 5, 500, 5.81175, 0.0022402, 0.00251569, 0.0022842\r\nAddrManGood, 5, 2, 6.0441, 0.584628, 0.624264, 0.596058\r\nAddrManSelect, 5, 1000000, 2.69665, 5.28107e-07, 5.52293e-07, 5.3419e-07\r\nAssembleBlock, 5, 700, 1.62831, 0.000441994, 0.000487594, 0.000469525\r\nBase58CheckEncode, 5, 320000, 4.00335, 2.45396e-06, 2.58267e-06, 2.48388e-06\r\nBase58Decode, 5, 800000, 4.13891, 9.41483e-07, 1.20126e-06, 9.73678e-07\r\nBase58Encode, 5, 470000, 3.47461, 1.45507e-06, 1.49106e-06, 1.48153e-06\r\nBech32Decode, 5, 800000, 2.02791, 4.81211e-07, 5.65706e-07, 4.93396e-07\r\nBech32Encode, 5, 800000, 2.97694, 6.88539e-07, 8.73764e-07, 7.08336e-07\r\nBenchLockedPool, 5, 1300, 6.36001, 0.000945641, 0.00101048, 0.000980838\r\nBenchTimeDeprecated, 5, 100000000, 3.06631, 5.61812e-09, 7.04958e-09, 6.02113e-09\r\nBenchTimeMillis, 5, 6000000, 2.88408, 9.29844e-08, 1.00058e-07, 9.63667e-08\r\nBenchTimeMillisSys, 5, 6000000, 2.92817, 9.08119e-08, 1.17317e-07, 9.40587e-08\r\nBenchTimeMock, 5, 300000000, 3.31172, 2.1875e-09, 2.21985e-09, 2.21037e-09\r\nBlockToJsonVerbose, 5, 10, 4.90092, 0.0940476, 0.100517, 0.0993346\r\nBnBExhaustion, 5, 650, 3.83522, 0.00111645, 0.00123052, 0.00119955\r\nCCheckQueueSpeedPrevectorJob, 5, 1400, 7.23464, 0.000990455, 0.00107279, 0.00103406\r\nCCoinsCaching, 5, 170000, 0.356379, 3.90721e-07, 4.65786e-07, 4.13522e-07\r\nCHACHA20_1MB, 5, 340, 3.97313, 0.00228695, 0.00236048, 0.00235003\r\nCHACHA20_256BYTES, 5, 250000, 0.744309, 5.75571e-07, 6.18917e-07, 5.97898e-07\r\nCHACHA20_64BYTES, 5, 500000, 0.39087, 1.54202e-07, 1.60676e-07, 1.55381e-07\r\nCHACHA20_POLY1305_AEAD_1MB_ENCRYPT_DECRYPT, 5, 340, 11.3753, 0.0064394, 0.00718509, 0.00649879\r\nCHACHA20_POLY1305_AEAD_1MB_ONLY_ENCRYPT, 5, 340, 5.56076, 0.00322281, 0.00332228, 0.00327013\r\nCHACHA20_POLY1305_AEAD_256BYTES_ENCRYPT_DECRYPT, 5, 250000, 2.77848, 2.16111e-06, 2.28038e-06, 2.22017e-06\r\nCHACHA20_POLY1305_AEAD_256BYTES_ONLY_ENCRYPT, 5, 250000, 1.40301, 1.09434e-06, 1.14021e-06, 1.13141e-06\r\nCHACHA20_POLY1305_AEAD_64BYTES_ENCRYPT_DECRYPT, 5, 500000, 2.62965, 1.01675e-06, 1.09266e-06, 1.05452e-06\r\nCHACHA20_POLY1305_AEAD_64BYTES_ONLY_ENCRYPT, 5, 500000, 1.3327, 5.12329e-07, 5.47454e-07, 5.30224e-07\r\nCoinSelection, 5, 650, 0.755947, 0.000220572, 0.000257613, 0.000226304\r\nComplexMemPool, 5, 1, 1.96453, 0.377724, 0.41796, 0.389692\r\nConstructGCSFilter, 5, 1000, 10.173, 0.00198849, 0.00209198, 0.00204057\r\nDeserializeAndCheckBlockTest, 5, 160, 6.35808, 0.0076843, 0.00885282, 0.007737\r\nDeserializeBlockTest, 5, 130, 4.11579, 0.00605016, 0.00697307, 0.00626367\r\nDuplicateInputs, 5, 10, 0.643048, 0.0107885, 0.014601, 0.0130247\r\nFastRandom_1bit, 5, 440000000, 5.20149, 2.31664e-09, 2.42676e-09, 2.33602e-09\r\nFastRandom_32bit, 5, 110000000, 6.10483, 1.08269e-08, 1.13123e-08, 1.11124e-08\r\nHASH_1MB, 5, 340, 6.63799, 0.00383218, 0.00397389, 0.00389316\r\nHASH_256BYTES, 5, 250000, 1.97735, 1.49095e-06, 1.78286e-06, 1.54661e-06\r\nHASH_64BYTES, 5, 500000, 2.0604, 7.66024e-07, 9.86615e-07, 7.89013e-07\r\nMatchGCSFilter, 5, 50000, 7.91817, 2.90019e-05, 3.72023e-05, 3.08161e-05\r\nMempoolEviction, 5, 41000, 9.86147, 4.14122e-05, 5.192e-05, 4.86635e-05\r\nMerkleRoot, 5, 800, 6.25447, 0.00153309, 0.00158666, 0.00156357\r\nPOLY1305_1MB, 5, 340, 1.58711, 0.000894605, 0.00101961, 0.000919736\r\nPOLY1305_256BYTES, 5, 250000, 0.299447, 2.30486e-07, 2.54892e-07, 2.37903e-07\r\nPOLY1305_64BYTES, 5, 500000, 0.189159, 7.41961e-08, 7.89804e-08, 7.44001e-08\r\nPrePadded, 5, 10000, 0.0126671, 2.47568e-07, 2.73122e-07, 2.48886e-07\r\nPrevectorClearNontrivial, 5, 28300, 9.39727, 6.36911e-05, 6.8178e-05, 6.71331e-05\r\nPrevectorClearTrivial, 5, 88600, 23.0503, 5.17078e-05, 5.25987e-05, 5.19458e-05\r\nPrevectorDeserializeNontrivial, 5, 6800, 5.32902, 0.00013906, 0.000195636, 0.000142078\r\nPrevectorDeserializeTrivial, 5, 52000, 3.72396, 1.33016e-05, 1.64363e-05, 1.39542e-05\r\nPrevectorDestructorNontrivial, 5, 28800, 8.92926, 5.91341e-05, 6.46597e-05, 6.28898e-05\r\nPrevectorDestructorTrivial, 5, 88900, 7.11175, 1.53554e-05, 1.63233e-05, 1.61115e-05\r\nPrevectorResizeNontrivial, 5, 28900, 5.94407, 3.94754e-05, 4.21574e-05, 4.12122e-05\r\nPrevectorResizeTrivial, 5, 90300, 5.85012, 1.26935e-05, 1.35717e-05, 1.28682e-05\r\nRIPEMD160, 5, 440, 6.42822, 0.00282782, 0.00305228, 0.00292482\r\nRegularPadded, 5, 10000, 0.0279986, 4.90113e-07, 6.5017e-07, 5.60703e-07\r\nRollingBloom, 5, 1500000, 5.31282, 6.39848e-07, 7.7822e-07, 6.86684e-07\r\nRollingBloomReset, 5, 20000, 7.80648, 7.52528e-05, 8.27285e-05, 7.69287e-05\r\nRpcMempool, 5, 40, 2.98067, 0.0144245, 0.0157567, 0.0149161\r\nSHA1, 5, 570, 6.74604, 0.00219204, 0.00275459, 0.00231692\r\nSHA256, 5, 340, 6.32523, 0.00362398, 0.00384323, 0.00371196\r\nSHA256D64_1024, 5, 7400, 5.96159, 0.000154711, 0.000171021, 0.000159504\r\nSHA256_32b, 5, 4700000, 6.35779, 2.57318e-07, 2.83581e-07, 2.7218e-07\r\nSHA512, 5, 330, 6.03323, 0.00348758, 0.00388368, 0.00367868\r\nSipHash_32b, 5, 40000000, 6.60139, 3.16447e-08, 3.39715e-08, 3.30938e-08\r\nSleep100ms, 5, 10, 5.00574, 0.100082, 0.100135, 0.100122\r\nTrig, 5, 12000000, 1.0619, 1.55502e-08, 2.09141e-08, 1.66462e-08\r\nVerifyNestedIfScript, 5, 100, 0.0642893, 0.000114644, 0.000145037, 0.000127313\r\nVerifyScriptBench, 5, 6300, 5.78638, 0.00017174, 0.000196193, 0.000180358\r\nWalletBalanceClean, 5, 8000, 1.91247, 4.34781e-05, 5.36606e-05, 4.7943e-05\r\nWalletBalanceDirty, 5, 2500, 3.90809, 0.000291278, 0.000342813, 0.00031049\r\nWalletBalanceMine, 5, 16000, 1.77235, 2.108e-05, 2.35293e-05, 2.18813e-05\r\nWalletBalanceWatch, 5, 8000, 1.88894, 4.62994e-05, 4.81851e-05, 4.72744e-05\r\n```\r\n\r\nthis branch, rebased to master\r\n```\r\n(pr/19478)$ ./src/bench/bench_bitcoin\r\n# Benchmark, evals, iterations, total, min, max, median\r\nAddrManAdd, 5, 5, 1.64512, 0.0651763, 0.0661761, 0.0659298\r\nAddrManGetAddr, 5, 500, 6.3247, 0.00239997, 0.00279001, 0.0024759\r\nAddrManGood, 5, 2, 6.62272, 0.629379, 0.739089, 0.634495\r\nAddrManSelect, 5, 1000000, 3.32086, 5.37746e-07, 9.32109e-07, 5.66366e-07\r\nAssembleBlock, 5, 700, 1.5542, 0.000426625, 0.000465905, 0.000444475\r\nBase58CheckEncode, 5, 320000, 4.17478, 2.46738e-06, 2.91027e-06, 2.561e-06\r\nBase58Decode, 5, 800000, 3.85293, 9.4571e-07, 9.81843e-07, 9.65822e-07\r\nBase58Encode, 5, 470000, 3.51497, 1.43368e-06, 1.5361e-06, 1.52626e-06\r\nBech32Decode, 5, 800000, 2.25873, 5.30087e-07, 6.44574e-07, 5.52377e-07\r\nBech32Encode, 5, 800000, 3.19484, 7.32648e-07, 8.20117e-07, 8.15208e-07\r\nBenchLockedPool, 5, 1300, 7.35172, 0.000980906, 0.00140676, 0.00106936\r\nBenchTimeDeprecated, 5, 100000000, 3.30681, 6.27607e-09, 7.04851e-09, 6.62835e-09\r\nBenchTimeMillis, 5, 6000000, 2.84261, 9.23429e-08, 9.91789e-08, 9.44398e-08\r\nBenchTimeMillisSys, 5, 6000000, 2.97928, 9.24101e-08, 1.07893e-07, 9.93668e-08\r\nBenchTimeMock, 5, 300000000, 3.33207, 2.18275e-09, 2.28349e-09, 2.21065e-09\r\nBlockToJsonVerbose, 5, 10, 5.00496, 0.0960341, 0.105335, 0.100521\r\nBnBExhaustion, 5, 650, 3.97426, 0.00111834, 0.00137522, 0.00117855\r\nCCheckQueueSpeedPrevectorJob, 5, 1400, 7.85864, 0.00100836, 0.00120258, 0.00111514\r\nCCoinsCaching, 5, 170000, 0.416761, 3.99718e-07, 6.26237e-07, 4.6736e-07\r\nCHACHA20_1MB, 5, 340, 4.15272, 0.00232247, 0.00256342, 0.00241795\r\nCHACHA20_256BYTES, 5, 250000, 0.821719, 6.04351e-07, 7.16052e-07, 6.47608e-07\r\nCHACHA20_64BYTES, 5, 500000, 0.392367, 1.55135e-07, 1.60704e-07, 1.55682e-07\r\nCHACHA20_POLY1305_AEAD_1MB_ENCRYPT_DECRYPT, 5, 340, 11.2433, 0.0064071, 0.00696151, 0.00653254\r\nCHACHA20_POLY1305_AEAD_1MB_ONLY_ENCRYPT, 5, 340, 5.67251, 0.00320464, 0.00347243, 0.00329092\r\nCHACHA20_POLY1305_AEAD_256BYTES_ENCRYPT_DECRYPT, 5, 250000, 2.72123, 2.14751e-06, 2.23938e-06, 2.16475e-06\r\nCHACHA20_POLY1305_AEAD_256BYTES_ONLY_ENCRYPT, 5, 250000, 1.42395, 1.07704e-06, 1.25263e-06, 1.10776e-06\r\nCHACHA20_POLY1305_AEAD_64BYTES_ENCRYPT_DECRYPT, 5, 500000, 2.51465, 9.83994e-07, 1.0357e-06, 9.93211e-07\r\nCHACHA20_POLY1305_AEAD_64BYTES_ONLY_ENCRYPT, 5, 500000, 1.28575, 5.03617e-07, 5.34522e-07, 5.09937e-07\r\nCoinSelection, 5, 650, 0.754373, 0.00021323, 0.000260981, 0.000223156\r\nComplexMemPool, 5, 1, 1.72752, 0.329097, 0.376804, 0.341924\r\nConstructGCSFilter, 5, 1000, 10.5092, 0.00204965, 0.00214565, 0.00210984\r\nDeserializeAndCheckBlockTest, 5, 160, 6.12895, 0.00726007, 0.00793475, 0.0076974\r\nDeserializeBlockTest, 5, 130, 4.25455, 0.00636748, 0.00672154, 0.00647489\r\nDuplicateInputs, 5, 10, 0.632548, 0.0107695, 0.0151279, 0.0130934\r\nFastRandom_1bit, 5, 440000000, 5.37446, 2.20134e-09, 2.76454e-09, 2.4326e-09\r\nFastRandom_32bit, 5, 110000000, 6.259, 1.07203e-08, 1.26064e-08, 1.11061e-08\r\nHASH_1MB, 5, 340, 6.68846, 0.0037417, 0.00407083, 0.00404221\r\nHASH_256BYTES, 5, 250000, 1.93397, 1.43203e-06, 1.61792e-06, 1.55341e-06\r\nHASH_64BYTES, 5, 500000, 1.9273, 7.53427e-07, 7.92554e-07, 7.69106e-07\r\nMatchGCSFilter, 5, 50000, 7.41827, 2.9138e-05, 3.08851e-05, 2.91944e-05\r\nMempoolEviction, 5, 41000, 8.62135, 4.0131e-05, 4.33651e-05, 4.2242e-05\r\nMerkleRoot, 5, 800, 6.1202, 0.00146477, 0.00158029, 0.00154912\r\nPOLY1305_1MB, 5, 340, 1.60954, 0.00093638, 0.000971838, 0.000939872\r\nPOLY1305_256BYTES, 5, 250000, 0.299708, 2.3101e-07, 2.53748e-07, 2.39605e-07\r\nPOLY1305_64BYTES, 5, 500000, 0.199672, 7.49288e-08, 8.58498e-08, 7.96427e-08\r\nPrePadded, 5, 10000, 0.0145195, 2.46289e-07, 3.66109e-07, 2.7668e-07\r\nPrevectorClearNontrivial, 5, 28300, 9.12451, 6.1713e-05, 6.81542e-05, 6.43679e-05\r\nPrevectorClearTrivial, 5, 88600, 23.7796, 5.16061e-05, 5.61612e-05, 5.26222e-05\r\nPrevectorDeserializeNontrivial, 5, 6800, 4.70353, 0.000125809, 0.000155278, 0.0001387\r\nPrevectorDeserializeTrivial, 5, 52000, 4.00423, 1.4031e-05, 1.73909e-05, 1.49766e-05\r\nPrevectorDestructorNontrivial, 5, 28800, 10.0167, 6.71979e-05, 7.25358e-05, 6.8967e-05\r\nPrevectorDestructorTrivial, 5, 88900, 6.70445, 1.45854e-05, 1.55963e-05, 1.51922e-05\r\nPrevectorResizeNontrivial, 5, 28900, 5.86289, 3.87845e-05, 4.19374e-05, 4.1117e-05\r\nPrevectorResizeTrivial, 5, 90300, 6.17383, 1.30828e-05, 1.48376e-05, 1.35303e-05\r\nRIPEMD160, 5, 440, 6.65392, 0.00289608, 0.00322838, 0.00296501\r\nRegularPadded, 5, 10000, 0.024881, 4.61499e-07, 5.36864e-07, 4.99317e-07\r\nRollingBloom, 5, 1500000, 5.26776, 6.34446e-07, 7.91226e-07, 6.99945e-07\r\nRollingBloomReset, 5, 20000, 8.06222, 7.65343e-05, 8.62762e-05, 7.88462e-05\r\nRpcMempool, 5, 40, 2.85708, 0.0141566, 0.0145827, 0.0142359\r\nSHA1, 5, 570, 6.69593, 0.00221977, 0.00245258, 0.00232601\r\nSHA256, 5, 340, 6.37176, 0.00357123, 0.00393608, 0.0037714\r\nSHA256D64_1024, 5, 7400, 5.96427, 0.000156924, 0.000165802, 0.000161775\r\nSHA256_32b, 5, 4700000, 6.34025, 2.61224e-07, 2.77951e-07, 2.69953e-07\r\nSHA512, 5, 330, 5.99635, 0.0035573, 0.00368859, 0.0036532\r\nSipHash_32b, 5, 40000000, 6.50056, 3.13885e-08, 3.40995e-08, 3.22946e-08\r\nSleep100ms, 5, 10, 5.00548, 0.100081, 0.100137, 0.100105\r\nTrig, 5, 12000000, 1.15828, 1.48329e-08, 2.88076e-08, 1.67105e-08\r\nVerifyNestedIfScript, 5, 100, 0.0523492, 8.93512e-05, 0.000123463, 0.000103065\r\nVerifyScriptBench, 5, 6300, 5.64757, 0.000166801, 0.00019268, 0.000176785\r\nWalletBalanceClean, 5, 8000, 1.95422, 4.57885e-05, 5.51424e-05, 4.67078e-05\r\nWalletBalanceDirty, 5, 2500, 3.97355, 0.000295304, 0.000335195, 0.000318887\r\nWalletBalanceMine, 5, 16000, 1.9643, 2.28496e-05, 2.7418e-05, 2.38308e-05\r\nWalletBalanceWatch, 5, 8000, 2.03689, 4.80869e-05, 5.49796e-05, 4.97744e-05\r\n```\r\n</p></details>\r\n",
      "created_at" : "2020-07-20T08:18:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-660878330",
      "id" : 660878330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDg3ODMzMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T08:18:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660878330",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457558263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457558263"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yep! CTxMemPool::Parents stores reference_wrappers (hash) whereas phash is a txiter as stored in setAncestors. \r\n\r\nIn some places we may eventually want to replace things like setAncestors with set<reference_wrappers> to get rid of the casting, but that's a more invasive change with less clear benefits so it is not done for now.",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T16:59:14Z",
      "diff_hunk" : "@@ -195,11 +196,13 @@ bool CTxMemPool::CalculateMemPoolAncestors(const CTxMemPoolEntry &entry, setEntr\n             return false;\n         }\n \n-        const setEntries & setMemPoolParents = GetMemPoolParents(stageit);\n-        for (txiter phash : setMemPoolParents) {\n+        const CTxMemPoolEntry::Parents & setMemPoolParents = stageit->GetMemPoolParentsConst();\n+        for (const CTxMemPoolEntry& hash : setMemPoolParents) {\n+            txiter phash = mapTx.iterator_to(hash);\n+\n             // If this is a new ancestor, add it.\n             if (setAncestors.count(phash) == 0) {\n-                parentHashes.insert(phash);\n+                parentHashes.insert(hash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457558263",
      "id" : 457558263,
      "in_reply_to_id" : 457079277,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU1ODI2Mw==",
      "original_commit_id" : "dc0d3fb62666fd4d5dad25455e0c12aa9395e7d7",
      "original_line" : 205,
      "original_position" : 102,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 451792331,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457558263",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457581996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457581996"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "When we say \"we require\" in this comment, previously we had an assertion that this was true, this patch removes this assertion. This should be safe to do, as it would have previously resulted in crashes. But if we want the assertion checked, we should add back a lookup to mapTX.",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T17:40:47Z",
      "diff_hunk" : "@@ -172,16 +172,17 @@ bool CTxMemPool::CalculateMemPoolAncestors(const CTxMemPoolEntry &entry, setEntr\n         // If we're not searching for parents, we require this to be an\n         // entry in the mempool already.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457581996",
      "id" : 457581996,
      "line" : 173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU4MTk5Ng==",
      "original_commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "original_line" : 173,
      "original_position" : 106,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 106,
      "pull_request_review_id" : 451822191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:40:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457581996",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457592605"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457592605"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is because previously we had to consistency check constantly to make sure we weren't looking at a dead mempool entry https://github.com/bitcoin/bitcoin/pull/19478/files#diff-ca74c4b28865382863b8fe7633a85cd6L987\r\n\r\nMaybe one way to get around this would be to make CTxMemPoolEntry contain bool \"dead\" if the entry has been evicted but a valid reference is dangling somewhere? This is unconditionally a bug, but then we could add asserts back to CTxMempoolEntry::GetMempool{Children,Parents}{,Const}.\r\n\r\nI think this can be handled in follow up work though, as the major need for this consistency check was a fraught ownership model in mapLinks.",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-20T17:59:10Z",
      "diff_hunk" : "@@ -172,16 +172,17 @@ bool CTxMemPool::CalculateMemPoolAncestors(const CTxMemPoolEntry &entry, setEntr\n         // If we're not searching for parents, we require this to be an\n         // entry in the mempool already.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r457592605",
      "id" : 457592605,
      "in_reply_to_id" : 457581996,
      "line" : 173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU5MjYwNQ==",
      "original_commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "original_line" : 173,
      "original_position" : 106,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 106,
      "pull_request_review_id" : 451835323,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-20T17:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457592605",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@jonatack thanks for the review! Cool to see it making an even bigger impact on other people's systems -- can you share your hardware specs? Mine were run on AMD Ryzen 7 1800X Eight-Core, 3.6ghz, 32 gb ram 2133 MT/s. It generally makes sense that if you're on lesser hardware (more total time on your benches) there may be some other factors contributing to a bigger speedup.\r\n\r\nW.r.t. boost features, iterator_to is a member function of multiindex, so it's not a new feature it's an existing API. In any case, it has been in use in the mempool since 2015 on line 174 60de0d5826f1b848a43ec989ff712f002eddc3dc, so it should be fine.\r\n\r\nAll nits have been addressed.\r\n\r\n",
      "created_at" : "2020-07-20T18:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-661250398",
      "id" : 661250398,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTI1MDM5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-20T18:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661250398",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Intel i7-6500U 4 core @ 2.5GHz, 32 gb RAM DDR4 2666, SSD nvme Samsung 960 Pro 1T, running Debian bullseye/sid with Coreboot (I need to upgrade to a faster CPU but it's not likely to happen soon).\r\n\r\nCode review re-ACK 2a47af4 per `git diff dc0d3fb 2a47af4`",
      "created_at" : "2020-07-21T08:15:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#issuecomment-661708383",
      "id" : 661708383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MTcwODM4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-21T08:16:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/661708383",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458543318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458543318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "c977ecc917ecf40c554173a52700973ea7d42f07\r\nI'd remove this comment as needless and confusing.\r\nWhich type from `std::reference_wrapper<T>&` and `T&` is a pointer to `T`?",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-22T05:30:01Z",
      "diff_hunk" : "@@ -49,6 +49,17 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+struct CompareIteratorByHashGeneric {\n+    // SFINAE for a is a pointer or a reference",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458543318",
      "id" : 458543318,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU0MzMxOA==",
      "original_commit_id" : "c977ecc917ecf40c554173a52700973ea7d42f07",
      "original_line" : 53,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 5,
      "pull_request_review_id" : 453004743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-22T06:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458543318",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458543707"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458543707"
         }
      },
      "author_association" : "MEMBER",
      "body" : "c977ecc917ecf40c554173a52700973ea7d42f07\r\nThis typedef is not used, and should be dropped.",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-22T05:31:18Z",
      "diff_hunk" : "@@ -523,26 +546,15 @@ class CTxMemPool\n     using txiter = indexed_transaction_set::nth_index<0>::type::const_iterator;\n     std::vector<std::pair<uint256, txiter>> vTxHashes GUARDED_BY(cs); //!< All tx witness hashes/entries in mapTx, in random order\n \n-    struct CompareIteratorByHash {\n-        bool operator()(const txiter &a, const txiter &b) const {\n-            return a->GetTx().GetHash() < b->GetTx().GetHash();\n-        }\n-    };\n-    typedef std::set<txiter, CompareIteratorByHash> setEntries;\n+    typedef std::set<txiter, CompareIteratorByHashGeneric> setEntries;\n+    typedef std::vector<txiter> vecEntries;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458543707",
      "id" : 458543707,
      "line" : 550,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU0MzcwNw==",
      "original_commit_id" : "c977ecc917ecf40c554173a52700973ea7d42f07",
      "original_line" : 550,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 57,
      "pull_request_review_id" : 453004743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-22T06:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458543707",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458553828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458553828"
         }
      },
      "author_association" : "MEMBER",
      "body" : "c977ecc917ecf40c554173a52700973ea7d42f07\r\nSince `add` has `bool` type, could be\r\n```suggestion\r\n    } else if (entry->GetMemPoolChildren().erase(child)) {\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-22T06:02:50Z",
      "diff_hunk" : "@@ -966,38 +962,34 @@ void CTxMemPool::addUnchecked(const CTxMemPoolEntry &entry, bool validFeeEstimat\n \n void CTxMemPool::UpdateChild(txiter entry, txiter child, bool add)\n {\n-    setEntries s;\n-    if (add && mapLinks[entry].children.insert(child).second) {\n+    CTxMemPoolEntry::Children s;\n+    if (add && entry->GetMemPoolChildren().insert(child).second) {\n         cachedInnerUsage += memusage::IncrementalDynamicUsage(s);\n-    } else if (!add && mapLinks[entry].children.erase(child)) {\n+    } else if (!add && entry->GetMemPoolChildren().erase(child)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458553828",
      "id" : 458553828,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU1MzgyOA==",
      "original_commit_id" : "c977ecc917ecf40c554173a52700973ea7d42f07",
      "original_line" : 968,
      "original_position" : 100,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 453004743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-22T06:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458553828",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458554036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458554036"
         }
      },
      "author_association" : "MEMBER",
      "body" : "c977ecc917ecf40c554173a52700973ea7d42f07\r\nSince `add` has `bool` type, could be\r\n```suggestion\r\n    } else if (entry->GetMemPoolParents().erase(parent)) {\r\n```",
      "commit_id" : "2a47af487401d61e6f4418859f063d8f18f75caf",
      "created_at" : "2020-07-22T06:03:23Z",
      "diff_hunk" : "@@ -966,38 +962,34 @@ void CTxMemPool::addUnchecked(const CTxMemPoolEntry &entry, bool validFeeEstimat\n \n void CTxMemPool::UpdateChild(txiter entry, txiter child, bool add)\n {\n-    setEntries s;\n-    if (add && mapLinks[entry].children.insert(child).second) {\n+    CTxMemPoolEntry::Children s;\n+    if (add && entry->GetMemPoolChildren().insert(child).second) {\n         cachedInnerUsage += memusage::IncrementalDynamicUsage(s);\n-    } else if (!add && mapLinks[entry].children.erase(child)) {\n+    } else if (!add && entry->GetMemPoolChildren().erase(child)) {\n         cachedInnerUsage -= memusage::IncrementalDynamicUsage(s);\n     }\n }\n \n void CTxMemPool::UpdateParent(txiter entry, txiter parent, bool add)\n {\n-    setEntries s;\n-    if (add && mapLinks[entry].parents.insert(parent).second) {\n+    CTxMemPoolEntry::Parents s;\n+    if (add && entry->GetMemPoolParents().insert(parent).second) {\n         cachedInnerUsage += memusage::IncrementalDynamicUsage(s);\n-    } else if (!add && mapLinks[entry].parents.erase(parent)) {\n+    } else if (!add && entry->GetMemPoolParents().erase(parent)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19478#discussion_r458554036",
      "id" : 458554036,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU1NDAzNg==",
      "original_commit_id" : "c977ecc917ecf40c554173a52700973ea7d42f07",
      "original_line" : 978,
      "original_position" : 113,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 453004743,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-07-22T06:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458554036",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
