[
   {
      "body" : "Which version of the client are you using? You could try to delete everything but wallet.dat to force a FULL re-download of the block chain.",
      "created_at" : "2013-03-21T07:20:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15222713",
      "id" : 15222713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-21T07:20:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15222713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "0.8.0. I tried deleting everything except wallet. No help.",
      "created_at" : "2013-03-21T07:47:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15223396",
      "id" : 15223396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-21T07:47:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15223396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3927607?v=3",
         "events_url" : "https://api.github.com/users/ContinuumQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ContinuumQ/followers",
         "following_url" : "https://api.github.com/users/ContinuumQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ContinuumQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ContinuumQ",
         "id" : 3927607,
         "login" : "ContinuumQ",
         "organizations_url" : "https://api.github.com/users/ContinuumQ/orgs",
         "received_events_url" : "https://api.github.com/users/ContinuumQ/received_events",
         "repos_url" : "https://api.github.com/users/ContinuumQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ContinuumQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ContinuumQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ContinuumQ"
      }
   },
   {
      "body" : "1st thing you could try is an upgrade to 0.8.1, which was released a few days ago.",
      "created_at" : "2013-03-21T08:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15224447",
      "id" : 15224447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-21T08:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15224447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "using 0.8.1 beta. Running. Let's see how far it goes...",
      "created_at" : "2013-03-21T21:37:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15267203",
      "id" : 15267203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-21T22:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15267203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3927607?v=3",
         "events_url" : "https://api.github.com/users/ContinuumQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ContinuumQ/followers",
         "following_url" : "https://api.github.com/users/ContinuumQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ContinuumQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ContinuumQ",
         "id" : 3927607,
         "login" : "ContinuumQ",
         "organizations_url" : "https://api.github.com/users/ContinuumQ/orgs",
         "received_events_url" : "https://api.github.com/users/ContinuumQ/received_events",
         "repos_url" : "https://api.github.com/users/ContinuumQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ContinuumQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ContinuumQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ContinuumQ"
      }
   },
   {
      "body" : "Same error. Failed a little later, with ~40k blocks remaining. Help!",
      "created_at" : "2013-03-22T01:32:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15276594",
      "id" : 15276594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T01:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15276594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3927607?v=3",
         "events_url" : "https://api.github.com/users/ContinuumQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ContinuumQ/followers",
         "following_url" : "https://api.github.com/users/ContinuumQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ContinuumQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ContinuumQ",
         "id" : 3927607,
         "login" : "ContinuumQ",
         "organizations_url" : "https://api.github.com/users/ContinuumQ/orgs",
         "received_events_url" : "https://api.github.com/users/ContinuumQ/received_events",
         "repos_url" : "https://api.github.com/users/ContinuumQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ContinuumQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ContinuumQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ContinuumQ"
      }
   },
   {
      "body" : "Are you running out of memory or disk space?  What operating system?",
      "created_at" : "2013-03-22T01:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15277076",
      "id" : 15277076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T01:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15277076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Vista home premium. There's plenty of ram and hd space. 2G ram, 22G hd. Same error at 40k blocks remaining",
      "created_at" : "2013-03-22T03:00:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15278727",
      "id" : 15278727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T03:00:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15278727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3927607?v=3",
         "events_url" : "https://api.github.com/users/ContinuumQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ContinuumQ/followers",
         "following_url" : "https://api.github.com/users/ContinuumQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ContinuumQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ContinuumQ",
         "id" : 3927607,
         "login" : "ContinuumQ",
         "organizations_url" : "https://api.github.com/users/ContinuumQ/orgs",
         "received_events_url" : "https://api.github.com/users/ContinuumQ/received_events",
         "repos_url" : "https://api.github.com/users/ContinuumQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ContinuumQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ContinuumQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ContinuumQ"
      }
   },
   {
      "body" : "IMHO you should show us the debug.log that your client creates when this happens. It should reside in your datadir (open the debug Window and you can use the open button to see the debug.log).",
      "created_at" : "2013-03-22T06:55:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15283614",
      "id" : 15283614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T06:55:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15283614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "debug log:\r\nAfter many entries similar to \r\nSetBestChain: new best=00000000000003ad796c280afd86b04d3663f9aeec8be538124a248f037968ad  height=187089  work=373009993956651511368  tx=4621096  date=2012-07-01 21:32:04\r\nProcessBlock: ACCEPTED\r\n\r\ncomes the following\r\n\r\n*** System error: CWalletDB::ListAccountCreditDebit() : cannot create DB cursor\r\nERROR: AcceptBlock() : AddToBlockIndex failed\r\nERROR: ProcessBlock() : AcceptBlock FAILED\r\nLoaded 1539 blocks from external file in 52114ms\r\nFlush(false)\r\nwallet.dat refcount=0\r\nwallet.dat checkpoint\r\nwallet.dat detach\r\nwallet.dat closed\r\nDBFlush(false) ended               1ms\r\nStopNode()\r\nThreadOpenConnections exited\r\nThreadSocketHandler exited\r\nThreadMessageHandler exited\r\nipcThread exited\r\nUPNP_DeletePortMapping() returned : 714\r\nThreadMapPort exited\r\nFlushed 12801 addresses to peers.dat  150ms\r\nCommitting 37957 changed transactions to coin database...\r\nFlush(true)\r\nDBFlush(true) ended               0ms\r\nEnvShutdown exception: DB_RUNRECOVERY: Fatal error, run database recovery (-30974)\r\nBitcoin exited\r\n\r\n\r\n\r\ndb.log may be more informative but I'm not sure what it means:\r\n\r\nfile wallet.dat has LSN 516/7366925, past end of log at 1/2280115\r\nCommonly caused by moving a database from one database environment\r\nto another without clearing the database LSNs, or by removing all of\r\nthe log files from a database environment\r\nDB_ENV->log_flush: LSN of 516/7366925 past current end-of-log of 1/2280115\r\nDatabase environment corrupt; the wrong log files may have been removed or incompatible database files imported from another environment\r\nPANIC: DB_RUNRECOVERY: Fatal error, run database recovery\r\nwallet.dat: unable to flush page: 11\r\ntxn_checkpoint: failed to flush the buffer cache: DB_RUNRECOVERY: Fatal error, run database recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nPANIC: fatal region error detected; run recovery\r\nFile handles still open at environment close\r\nOpen file handle: C:\\Users\\xxx\\AppData\\Roaming\\Bitcoin\\wallet.dat\r\nOpen file handle: C:\\Users\\xxx\\AppData\\Roaming\\Bitcoin\\database\\log.0000000001\r\nPANIC: fatal region error detected; run recovery\r\n\r\n\r\nThanks in advance!",
      "created_at" : "2013-03-22T08:57:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15286630",
      "id" : 15286630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T08:57:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15286630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3927607?v=3",
         "events_url" : "https://api.github.com/users/ContinuumQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ContinuumQ/followers",
         "following_url" : "https://api.github.com/users/ContinuumQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ContinuumQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ContinuumQ",
         "id" : 3927607,
         "login" : "ContinuumQ",
         "organizations_url" : "https://api.github.com/users/ContinuumQ/orgs",
         "received_events_url" : "https://api.github.com/users/ContinuumQ/received_events",
         "repos_url" : "https://api.github.com/users/ContinuumQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ContinuumQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ContinuumQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ContinuumQ"
      }
   },
   {
      "body" : "The wallet.dat LSN errors indicate that the wallet.dat's BerkeleyDB was not properly closed (as detachdb does for the blockchain, issuing a LSN RESET), and the log file is either missing or does not correspond with the wallet.dat that was put in the data directory. This can also come from (a similar type of BDB database log desynchronization can be created by) a large change in the (BDB) database version or environment used in Bitcoin.\r\n\r\nThe way I would proceed with this particular issue is to rename the wallet.dat file (and make backups of it if you don't have a before-upgrade backup), remove the database subdirectory (or all .log files inside it), and launch Bitcoin again (which creates a blank wallet.dat). After Bitcoin has completed the blockchain download, then shut it down, substitute back your original wallet.dat, remove the db.log and debug.log, and launch with the -rescan and -upgradewallet options. If Bitcoin completes startup and shows your balance, I would still send the Bitcoins to a new wallet if any strange errors appear in the logs.",
      "created_at" : "2013-03-22T18:24:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15313395",
      "id" : 15313395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-04-13T07:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15313395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1425520?v=3",
         "events_url" : "https://api.github.com/users/qubez/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubez/followers",
         "following_url" : "https://api.github.com/users/qubez/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubez/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubez",
         "id" : 1425520,
         "login" : "qubez",
         "organizations_url" : "https://api.github.com/users/qubez/orgs",
         "received_events_url" : "https://api.github.com/users/qubez/received_events",
         "repos_url" : "https://api.github.com/users/qubez/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubez/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubez/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubez"
      }
   },
   {
      "body" : "@qubez Since 0.8, BDB is only used for the wallet, so that is the problem, and syncing the block chain without the walelt won't change anything.\r\n\r\nI don't understand why -salvagewallet doesn't solve this, as it rebuilds the wallet from scratch. The only thing I can imagine is something very broken in in of the database/* files. I'd try wiping database/*, and then starting with -salvagewallet.",
      "created_at" : "2013-03-22T18:27:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15313585",
      "id" : 15313585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T18:27:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15313585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I have a 0.3.24 corrupted wallet I can send you that will prevent an upgrade or blockchain sync, however it can be dropped into a fully synced 0.8.0, and an automatic salvagewallet will complete successfully. My advice is based on this experience.",
      "created_at" : "2013-03-22T18:54:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2395#issuecomment-15315081",
      "id" : 15315081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2395",
      "updated_at" : "2013-03-22T18:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15315081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1425520?v=3",
         "events_url" : "https://api.github.com/users/qubez/events{/privacy}",
         "followers_url" : "https://api.github.com/users/qubez/followers",
         "following_url" : "https://api.github.com/users/qubez/following{/other_user}",
         "gists_url" : "https://api.github.com/users/qubez/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/qubez",
         "id" : 1425520,
         "login" : "qubez",
         "organizations_url" : "https://api.github.com/users/qubez/orgs",
         "received_events_url" : "https://api.github.com/users/qubez/received_events",
         "repos_url" : "https://api.github.com/users/qubez/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/qubez/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/qubez/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/qubez"
      }
   }
]
