[
   {
      "body" : "@gavinandresen @laanwj Travis should pass now and I'm also able to extend unit-tests after this is merged. Can you review and/or comment this? I know there are quite a few open payment request related pulls, but hey you wanted me to to something more valuable than just cleanups ^^.",
      "created_at" : "2015-01-12T14:38:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#issuecomment-69578401",
      "id" : 69578401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5642",
      "updated_at" : "2015-01-12T14:38:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69578401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Untested ACK. You should edit the first comment in this pull request to describe what the pull request does.",
      "created_at" : "2015-01-12T15:08:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#issuecomment-69583216",
      "id" : 69583216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5642",
      "updated_at" : "2015-01-12T15:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69583216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen Thanks, I updated the initial comment. Would be great if we could get that in soon :).\r\n@laanwj Mind also giving an ACK here?",
      "created_at" : "2015-01-12T18:48:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#issuecomment-69622333",
      "id" : 69622333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5642",
      "updated_at" : "2015-01-13T10:41:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69622333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22921103"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22921103"
         }
      },
      "body" : "Why change these to QString just to compare? std::strings compare in the same way.\r\n",
      "commit_id" : "17005bc0fcc1e1b5e3d17e58080af952202723af",
      "created_at" : "2015-01-14T08:06:02Z",
      "diff_hunk" : "@@ -745,3 +744,16 @@ void PaymentServer::handlePaymentACK(const QString& paymentACKMsg)\n     // currently we don't futher process or store the paymentACK message\n     emit message(tr(\"Payment acknowledged\"), paymentACKMsg, CClientUIInterface::ICON_INFORMATION | CClientUIInterface::MODAL);\n }\n+\n+bool PaymentServer::verifyNetwork(const payments::PaymentDetails& requestDetails)\n+{\n+    const QString requestNetwork = QString::fromStdString(requestDetails.network());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22921103",
      "id" : 22921103,
      "original_commit_id" : "a5babb7f8416209a7088a86843cc96082055e0bf",
      "original_position" : 17,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642",
      "updated_at" : "2015-01-14T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22921103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22921833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22921833"
         }
      },
      "body" : "@laanwj The logging only works when converted to QString ;).",
      "commit_id" : "17005bc0fcc1e1b5e3d17e58080af952202723af",
      "created_at" : "2015-01-14T08:26:12Z",
      "diff_hunk" : "@@ -745,3 +744,16 @@ void PaymentServer::handlePaymentACK(const QString& paymentACKMsg)\n     // currently we don't futher process or store the paymentACK message\n     emit message(tr(\"Payment acknowledged\"), paymentACKMsg, CClientUIInterface::ICON_INFORMATION | CClientUIInterface::MODAL);\n }\n+\n+bool PaymentServer::verifyNetwork(const payments::PaymentDetails& requestDetails)\n+{\n+    const QString requestNetwork = QString::fromStdString(requestDetails.network());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22921833",
      "id" : 22921833,
      "original_commit_id" : "a5babb7f8416209a7088a86843cc96082055e0bf",
      "original_position" : 17,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642",
      "updated_at" : "2015-01-14T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22921833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22927563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22927563"
         }
      },
      "body" : "@laanwj If you want I can change this into:\r\n```\r\nbool fVerified = requestDetails.network() == Params().NetworkIDString();\r\nif (!fVerified) {\r\n    qWarning() << QString(\"PaymentServer::%1: Payment request network \\\"%2\\\" doesn't match client network \\\"%3\\\".\")\r\n        .arg(__func__)\r\n        .arg(QString::fromStdString(requestDetails.network()))\r\n        .arg(QString::fromStdString(Params().NetworkIDString()));\r\n}\r\nreturn fVerified;\r\n```\r\n",
      "commit_id" : "17005bc0fcc1e1b5e3d17e58080af952202723af",
      "created_at" : "2015-01-14T10:16:03Z",
      "diff_hunk" : "@@ -745,3 +744,16 @@ void PaymentServer::handlePaymentACK(const QString& paymentACKMsg)\n     // currently we don't futher process or store the paymentACK message\n     emit message(tr(\"Payment acknowledged\"), paymentACKMsg, CClientUIInterface::ICON_INFORMATION | CClientUIInterface::MODAL);\n }\n+\n+bool PaymentServer::verifyNetwork(const payments::PaymentDetails& requestDetails)\n+{\n+    const QString requestNetwork = QString::fromStdString(requestDetails.network());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22927563",
      "id" : 22927563,
      "original_commit_id" : "a5babb7f8416209a7088a86843cc96082055e0bf",
      "original_position" : 17,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642",
      "updated_at" : "2015-01-14T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22927563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22932024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22932024"
         }
      },
      "body" : "Yes. That's better, just convert as needed.\r\n",
      "commit_id" : "17005bc0fcc1e1b5e3d17e58080af952202723af",
      "created_at" : "2015-01-14T11:56:07Z",
      "diff_hunk" : "@@ -745,3 +744,16 @@ void PaymentServer::handlePaymentACK(const QString& paymentACKMsg)\n     // currently we don't futher process or store the paymentACK message\n     emit message(tr(\"Payment acknowledged\"), paymentACKMsg, CClientUIInterface::ICON_INFORMATION | CClientUIInterface::MODAL);\n }\n+\n+bool PaymentServer::verifyNetwork(const payments::PaymentDetails& requestDetails)\n+{\n+    const QString requestNetwork = QString::fromStdString(requestDetails.network());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#discussion_r22932024",
      "id" : 22932024,
      "original_commit_id" : "a5babb7f8416209a7088a86843cc96082055e0bf",
      "original_position" : 17,
      "path" : "src/qt/paymentserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5642",
      "updated_at" : "2015-01-14T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22932024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ACK, more tests is good.\r\n",
      "created_at" : "2015-01-14T11:56:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#issuecomment-69906240",
      "id" : 69906240,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5642",
      "updated_at" : "2015-01-14T11:56:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69906240",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Great, that counts 2 ACKs now. The last rebase just changed ``PaymentServer::verifyNetwork()`` to only convert networks as needed.\r\n\r\nI'll be happy to add aditional testing for payment requests :).",
      "created_at" : "2015-01-14T12:17:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5642#issuecomment-69908236",
      "id" : 69908236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5642",
      "updated_at" : "2015-01-14T12:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69908236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
