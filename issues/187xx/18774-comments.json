[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of modifying the test_framwork/util.py, you could just remove the line `[regtest]` from the bitcoin.conf in the 16.3 datadir before starting the nodes",
      "commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "created_at" : "2020-04-26T16:22:48Z",
      "diff_hunk" : "@@ -0,0 +1,87 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+\n+        self.start_nodes()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346339",
      "id" : 415346339,
      "line" : 54,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0NjMzOQ==",
      "original_commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "original_line" : 54,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 54,
      "pull_request_review_id" : 400522178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T16:22:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
