[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of modifying the test_framwork/util.py, you could just remove the line `[regtest]` from the bitcoin.conf in the 16.3 datadir before starting the nodes",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T16:22:48Z",
      "diff_hunk" : "@@ -0,0 +1,87 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+\n+        self.start_nodes()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346339",
      "id" : 415346339,
      "line" : 56,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0NjMzOQ==",
      "original_commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "original_line" : 56,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 56,
      "pull_request_review_id" : 400522178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346876"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, but wouldn't be better to make this generally available? For example the [comment](https://github.com/bitcoin/bitcoin/blob/master/test/functional/feature_backwards_compatibility.py#L11) in `feature_backwards_compatibility.py` states that it's not possible to test older nodes.",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T16:25:38Z",
      "diff_hunk" : "@@ -0,0 +1,87 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+\n+        self.start_nodes()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415346876",
      "id" : 415346876,
      "in_reply_to_id" : 415346339,
      "line" : 56,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0Njg3Ng==",
      "original_commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "original_line" : 56,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 56,
      "pull_request_review_id" : 400522497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415346876",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354718"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, if you want, you can create a generally available util method like\r\n\r\n```py\r\ndef adjust_bitcoin_conf_for_pre_16_3(conf_file):\r\n  ...",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T17:06:52Z",
      "diff_hunk" : "@@ -0,0 +1,87 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+\n+        self.start_nodes()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354718",
      "id" : 415354718,
      "in_reply_to_id" : 415346339,
      "line" : 56,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM1NDcxOA==",
      "original_commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "original_line" : 56,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 56,
      "pull_request_review_id" : 400526397,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354718",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sed does not exist on windows. I think this is possible entirely in python?",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T17:07:36Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+import subprocess\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+        # older bitcoind's like v0.16.3 don't recognize config sections\n+        subprocess.call([\"sed\",\"-i\", \"-e\", \"s/\\[regtest\\]/ /g\", self.nodes[1].bitcoinconf])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354824",
      "id" : 415354824,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM1NDgyNA==",
      "original_commit_id" : "64dd4032fee93f6c45372966fdb8981555238880",
      "original_line" : 55,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : null,
      "pull_request_review_id" : 400526461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354824",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354963"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354963"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, will implement it. Have just force pushed a change that uses *sed* to make an in-file replacement.",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T17:08:13Z",
      "diff_hunk" : "@@ -0,0 +1,87 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+\n+        self.start_nodes()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415354963",
      "id" : 415354963,
      "in_reply_to_id" : 415346339,
      "line" : 56,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM1NDk2Mw==",
      "original_commit_id" : "efd68292966ada54d96ac964b4157c1d2d485ada",
      "original_line" : 56,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 56,
      "pull_request_review_id" : 400526525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415354963",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415355171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415355171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, just came to my mind. Windows!\r\nI'll use python's own regex utils. \r\n",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T17:09:23Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+import subprocess\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+        # older bitcoind's like v0.16.3 don't recognize config sections\n+        subprocess.call([\"sed\",\"-i\", \"-e\", \"s/\\[regtest\\]/ /g\", self.nodes[1].bitcoinconf])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415355171",
      "id" : 415355171,
      "in_reply_to_id" : 415354824,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM1NTE3MQ==",
      "original_commit_id" : "64dd4032fee93f6c45372966fdb8981555238880",
      "original_line" : 55,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : null,
      "pull_request_review_id" : 400526636,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415355171",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke \r\nThere are several error messages in travis that I don't know how to fix. Maybe because the v0.16.3 binaries are missing on test envs?",
      "created_at" : "2020-04-26T18:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#issuecomment-619602160",
      "id" : 619602160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18774",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTYwMjE2MA==",
      "updated_at" : "2020-04-26T18:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619602160",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415374788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415374788"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    'wallet_upgradewallet.py',\r\n```",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-26T18:49:05Z",
      "diff_hunk" : "@@ -180,6 +180,7 @@\n     'mempool_expiry.py',\n     'wallet_import_rescan.py',\n     'wallet_import_with_label.py',\n+    'wallet_upgradewallet',",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415374788",
      "id" : 415374788,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM3NDc4OA==",
      "original_commit_id" : "af3ff0efdce689e06261f5ee6012d902b2e7d3a6",
      "original_line" : 183,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_runner.py",
      "position" : null,
      "pull_request_review_id" : 400536644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-26T18:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415374788",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You'll also need to adjust ci/test/05_before_script.sh",
      "created_at" : "2020-04-26T18:49:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#issuecomment-619604633",
      "id" : 619604633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18774",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTYwNDYzMw==",
      "updated_at" : "2020-04-26T18:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619604633",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #16549 ([WIP] UI external signer support (e.g. hardware wallet) by Sjors)\n* #16546 ([WIP] External signer support - Wallet Box edition by Sjors)\n* #16528 (Native Descriptor Wallets using DescriptorScriptPubKeyMan by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-26T19:38:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#issuecomment-619613229",
      "id" : 619613229,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18774",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTYxMzIyOQ==",
      "updated_at" : "2020-04-26T19:38:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619613229",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-27T00:34:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#issuecomment-619650567",
      "id" : 619650567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18774",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTY1MDU2Nw==",
      "updated_at" : "2020-04-27T00:34:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619650567",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415449758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415449758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "python `with` context manager should simplify this",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-27T01:20:13Z",
      "diff_hunk" : "@@ -326,6 +326,16 @@ def initialize_datadir(dirname, n, chain):\n         os.makedirs(os.path.join(datadir, 'stdout'), exist_ok=True)\n     return datadir\n \n+def adjust_bitcoin_conf_for_pre_16_3(conf_file):\n+    conf = open(conf_file,'r', encoding='utf8')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415449758",
      "id" : 415449758,
      "line" : 330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ0OTc1OA==",
      "original_commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "original_line" : 330,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 5,
      "pull_request_review_id" : 400577111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T01:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415449758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415450429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415450429"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can this be factored out into a `def skip_if_no_previous_release(self)`? Maybe a future pull?",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-27T01:22:34Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_16_3,\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415450429",
      "id" : 415450429,
      "line" : 42,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ1MDQyOQ==",
      "original_commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "original_line" : 42,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 42,
      "pull_request_review_id" : 400577551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T01:22:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415450429",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415450717"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415450717"
         }
      },
      "author_association" : "MEMBER",
      "body" : "don't you need to shut down first?",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-27T01:23:30Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_16_3,\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300\n+        ], binary=[\n+            self.options.bitcoind,\n+            releases_path + \"/v0.16.3/bin/bitcoind\",\n+        ], binary_cli=[\n+            self.options.bitcoincli,\n+            releases_path + \"/v0.16.3/bin/bitcoin-cli\",\n+        ])\n+        # older bitcoind's like v0.16.3 don't recognize config sections\n+        adjust_bitcoin_conf_for_pre_16_3(self.nodes[1].bitcoinconf)\n+        self.start_nodes()\n+\n+    def run_test(self):\n+        self.nodes[0].generatetoaddress(101, self.nodes[0].getnewaddress())\n+        # # Sanity check the test framework:\n+        res = self.nodes[0].getblockchaininfo()\n+        assert_equal(res['blocks'], 101)\n+        node_master = self.nodes[0]\n+        v16_3_node  = self.nodes[1]\n+\n+        self.log.info(\"Test upgradewallet RPC...\")\n+        # Prepare for copying of the older wallet\n+        node_master_wallets_dir = os.path.join(node_master.datadir, \"regtest/wallets\")\n+        v16_3_wallets_dir       = os.path.join(v16_3_node.datadir, \"regtest/wallets\")\n+        node_master.unloadwallet(\"\")\n+\n+        # Copy the 0.16.3 wallet to the last Bitcoin Core version and open it:\n+        shutil.rmtree(node_master_wallets_dir)\n+        shutil.copytree(\n+            v16_3_wallets_dir,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415450717",
      "id" : 415450717,
      "line" : 75,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ1MDcxNw==",
      "original_commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "original_line" : 75,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 75,
      "pull_request_review_id" : 400577744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T01:23:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415450717",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415454548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415454548"
         }
      },
      "author_association" : "MEMBER",
      "body" : "would it be possible to user version 15, so that `-usehd=0` can be passed to the wallet?",
      "commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "created_at" : "2020-04-27T01:38:19Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"upgradewallet RPC functional test\n+\n+Test upgradewallet RPC. Download v0.16.3 node binary:\n+\n+contrib/devtools/previous_release.sh -b v0.16.3\n+\"\"\"\n+\n+import os\n+import shutil\n+\n+from test_framework.test_framework import BitcoinTestFramework, SkipTest\n+from test_framework.util import (\n+    adjust_bitcoin_conf_for_pre_16_3,\n+    assert_equal,\n+    assert_greater_than\n+)\n+\n+class UpgradeWalletTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-addresstype=bech32\"],\n+            []\n+        ]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def setup_nodes(self):\n+        if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"false\":\n+            raise SkipTest(\"upgradewallet RPC tests\")\n+\n+        releases_path = os.getenv(\"PREVIOUS_RELEASES_DIR\") or os.getcwd() + \"/releases\"\n+        if not os.path.isdir(releases_path):\n+            if os.getenv(\"TEST_PREVIOUS_RELEASES\") == \"true\":\n+                raise AssertionError(\"TEST_PREVIOUS_RELEASES=1 but releases missing: \" + releases_path)\n+            raise SkipTest(\"This test requires binaries for previous releases\")\n+\n+        self.add_nodes(self.num_nodes, extra_args=self.extra_args, versions=[\n+            None,\n+            160300",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18774#discussion_r415454548",
      "id" : 415454548,
      "line" : 46,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQ1NDU0OA==",
      "original_commit_id" : "f8049ba065a38db458e7a0826e69efe4b3b68f86",
      "original_line" : 46,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "test/functional/wallet_upgradewallet.py",
      "position" : 46,
      "pull_request_review_id" : 400580618,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18774",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T01:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415454548",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
