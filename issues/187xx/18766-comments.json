[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19621 ([RFC] Package-relay:  sender-initiated by ariard)\n* #19619 (Remove wallet.dat path handling from wallet.cpp, rpcwallet.cpp by ryanofsky)\n* #19611 (p2p: refactor CInv::type from public int to private uint32_t by jonatack)\n* #19610 (p2p, refactor: add `CInv` block message helpers; use in net processing by jonatack)\n* #19604 (Pass mempool pointer to UnloadBlockIndex/GetCoinsCacheSizeState by MarcoFalke)\n* #19590 (p2p, refactor: add `CInv` transaction message helpers; use in net processing by jonatack)\n* #19569 (Enable fetching of orphan parents from wtxid peers by sipa)\n* #19340 (Preserve the `LockData` initial state if \"potential deadlock detected\" exception thrown by hebasto)\n* #19337 (sync: detect double lock from the same thread by vasild)\n* #19306 (refactor: Replace RecursiveMutex with Mutex in CTxMemPool by hebasto)\n* #19271 (validation: Warm coins cache during prevalidation to connect blocks faster by andrewtoth)\n* #19099 (refactor: Move wallet methods out of chain.h and node.h by ryanofsky)\n* #19098 (test: Remove duplicate NodeContext hacks by ryanofsky)\n* #19064 (refactor: Cleanup thread ctor calls by hebasto)\n* #18731 (refactor: Make CCheckQueue RAII-styled by hebasto)\n* #18710 (Add local thread pool to CCheckQueue by hebasto)\n* #18354 (Use shared pointers only in validation interface by bvbfan)\n* #18245 (Test some transaction creation with non-empty fee estimator by instagibbs)\n* #18017 (txmempool: split epoch logic into class by ajtowns)\n* #17786 (refactor: Nuke policy/fees->mempool circular dependencies by hebasto)\n* #15719 (Wallet passive startup by ryanofsky)\n* #15367 (feature: Added ability for users to add a startup command by benthecarman)\n* #13990 (Allow fee estimation to work with lower fees by ajtowns)\n* #10443 (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-25T17:36:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-619414860",
      "id" : 619414860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTQxNDg2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-30T03:48:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619414860",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415650678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415650678"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why read the file then? You could early check like:\r\n```cpp\r\n// Don't initialize fee estimation if we don't relay transactions.\r\nif (!g_relay_txes) {\r\n    fs::path est_path = GetDataDir() / FEE_ESTIMATES_FILENAME;\r\n    CAutoFile est_filein(fsbridge::fopen(est_path, \"rb\"), SER_DISK, CLIENT_VERSION);\r\n    if (!est_filein.IsNull()) ::feeEstimator.Read(est_filein);\r\n    fFeeEstimatesInitialized = true;\r\n}\r\n```\r\nThis also avoids writing to estimates file in `Shutdown`.",
      "commit_id" : "33ca35902435a162c526bf6c8bd82145585dfbd9",
      "created_at" : "2020-04-27T09:20:00Z",
      "diff_hunk" : "@@ -1750,8 +1750,10 @@ bool AppInitMain(NodeContext& node)\n \n     fs::path est_path = GetDataDir() / FEE_ESTIMATES_FILENAME;\n     CAutoFile est_filein(fsbridge::fopen(est_path, \"rb\"), SER_DISK, CLIENT_VERSION);\n-    // Allowed to fail as this file IS missing on first startup.\n-    if (!est_filein.IsNull())\n+    // Allowed to fail as this file IS missing on first startup. Also, don't initialize\n+    // fee estimation with old data if we don't relay transactions, as they would never be\n+    // updated.\n+    if (!est_filein.IsNull() && g_relay_txes)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415650678",
      "id" : 415650678,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY1MDY3OA==",
      "original_commit_id" : "9cf5c47e351054a2557f10732080d0abd7ce85be",
      "original_line" : 1756,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 400772886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T10:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415650678",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415668117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415668117"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think\r\n```cpp\r\nfFeeEstimatesInitialized = true;\r\n```\r\nshould be set anyway ?\r\n\r\nWhat do you think about this conceptually ?",
      "commit_id" : "33ca35902435a162c526bf6c8bd82145585dfbd9",
      "created_at" : "2020-04-27T09:45:46Z",
      "diff_hunk" : "@@ -1750,8 +1750,10 @@ bool AppInitMain(NodeContext& node)\n \n     fs::path est_path = GetDataDir() / FEE_ESTIMATES_FILENAME;\n     CAutoFile est_filein(fsbridge::fopen(est_path, \"rb\"), SER_DISK, CLIENT_VERSION);\n-    // Allowed to fail as this file IS missing on first startup.\n-    if (!est_filein.IsNull())\n+    // Allowed to fail as this file IS missing on first startup. Also, don't initialize\n+    // fee estimation with old data if we don't relay transactions, as they would never be\n+    // updated.\n+    if (!est_filein.IsNull() && g_relay_txes)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415668117",
      "id" : 415668117,
      "in_reply_to_id" : 415650678,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY2ODExNw==",
      "original_commit_id" : "9cf5c47e351054a2557f10732080d0abd7ce85be",
      "original_line" : 1756,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 400792228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T10:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415668117",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415672000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415672000"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think `fFeeEstimatesInitialized` exists to handle early shutdowns. But if you don't read estimates then writing will clear it right?",
      "commit_id" : "33ca35902435a162c526bf6c8bd82145585dfbd9",
      "created_at" : "2020-04-27T09:51:31Z",
      "diff_hunk" : "@@ -1750,8 +1750,10 @@ bool AppInitMain(NodeContext& node)\n \n     fs::path est_path = GetDataDir() / FEE_ESTIMATES_FILENAME;\n     CAutoFile est_filein(fsbridge::fopen(est_path, \"rb\"), SER_DISK, CLIENT_VERSION);\n-    // Allowed to fail as this file IS missing on first startup.\n-    if (!est_filein.IsNull())\n+    // Allowed to fail as this file IS missing on first startup. Also, don't initialize\n+    // fee estimation with old data if we don't relay transactions, as they would never be\n+    // updated.\n+    if (!est_filein.IsNull() && g_relay_txes)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415672000",
      "id" : 415672000,
      "in_reply_to_id" : 415650678,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY3MjAwMA==",
      "original_commit_id" : "9cf5c47e351054a2557f10732080d0abd7ce85be",
      "original_line" : 1756,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 400796497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T10:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415672000",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415677781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415677781"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm right",
      "commit_id" : "33ca35902435a162c526bf6c8bd82145585dfbd9",
      "created_at" : "2020-04-27T10:00:03Z",
      "diff_hunk" : "@@ -1750,8 +1750,10 @@ bool AppInitMain(NodeContext& node)\n \n     fs::path est_path = GetDataDir() / FEE_ESTIMATES_FILENAME;\n     CAutoFile est_filein(fsbridge::fopen(est_path, \"rb\"), SER_DISK, CLIENT_VERSION);\n-    // Allowed to fail as this file IS missing on first startup.\n-    if (!est_filein.IsNull())\n+    // Allowed to fail as this file IS missing on first startup. Also, don't initialize\n+    // fee estimation with old data if we don't relay transactions, as they would never be\n+    // updated.\n+    if (!est_filein.IsNull() && g_relay_txes)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#discussion_r415677781",
      "id" : 415677781,
      "in_reply_to_id" : 415650678,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTY3Nzc4MQ==",
      "original_commit_id" : "9cf5c47e351054a2557f10732080d0abd7ce85be",
      "original_line" : 1756,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 400802965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T10:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/415677781",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag : addressed your feedback. Would be interested about what do you think about disabling the fee estimation in `blocksonly` conceptually though.",
      "created_at" : "2020-04-27T10:28:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-619889201",
      "id" : 619889201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTg4OTIwMQ==",
      "updated_at" : "2020-04-27T10:28:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619889201",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK / Sounds reasonable.",
      "created_at" : "2020-04-30T17:37:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-621999260",
      "id" : 621999260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTk5OTI2MA==",
      "updated_at" : "2020-04-30T17:37:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621999260",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. ",
      "created_at" : "2020-05-01T10:48:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-622341098",
      "id" : 622341098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjM0MTA5OA==",
      "updated_at" : "2020-05-01T10:48:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622341098",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but I don't know enough about the underlying mechanism to be sure if this is a reasonable way to accomplish it.",
      "created_at" : "2020-05-04T14:37:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-623503344",
      "id" : 623503344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzUwMzM0NA==",
      "updated_at" : "2020-05-04T14:37:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623503344",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Would be interested about what do you think about disabling the fee estimation in `blocksonly` conceptually though.\r\n\r\nSame opinion as above.",
      "created_at" : "2020-05-04T14:48:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-623509291",
      "id" : 623509291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzUwOTI5MQ==",
      "updated_at" : "2020-05-04T14:48:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623509291",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, while the fee estimation should work for some limited time after the mempool has been turned off (see https://github.com/bitcoin/bitcoin/issues/16840#issuecomment-529904220), I can see the point to fail early on startup instead of later at runtime.",
      "created_at" : "2020-05-04T15:03:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-623518006",
      "id" : 623518006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzUxODAwNg==",
      "updated_at" : "2020-05-04T15:03:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623518006",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK 33ca35902435a162c526bf6c8bd82145585dfbd9",
      "created_at" : "2020-05-04T15:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-623518645",
      "id" : 623518645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzUxODY0NQ==",
      "updated_at" : "2020-05-04T15:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623518645",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sdaftuar (ping because you reviewed the previous PR) : what do you think of this approach compared to the previous one ?\r\n\r\n@morcos (ping because you implemented the fee estimation) : what do you think of it implementation-wise ?",
      "created_at" : "2020-06-12T09:14:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-643168066",
      "id" : 643168066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzE2ODA2Ng==",
      "updated_at" : "2020-06-12T09:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643168066",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This was intended to be a \"quick fix\", but the approach seems to be too much of a workaround.\r\n\r\nI've reworked this to opt for a more involved approach based on #19556. This now:\r\n- Removes the fee estimator related globals.\r\n- Conditionally creates the fee estimator: if we don't relay transactions we don't even bother to allocate the `CBlockPolicyEstimator`.\r\n\r\nThis is rebased on top of #19556 (which i itself rebased on top of #19604).",
      "created_at" : "2020-07-29T16:14:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-665759886",
      "id" : 665759886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NTc1OTg4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-29T16:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665759886",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-07-30T14:29:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-666400604",
      "id" : 666400604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NjQwMDYwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-30T14:29:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666400604",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on  #19556 now that the remove-mempool-global series is almost over.",
      "created_at" : "2020-09-06T20:07:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-687887730",
      "id" : 687887730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Nzg4NzczMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-06T20:07:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687887730",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review after 19556 goes in. ",
      "created_at" : "2020-09-06T20:16:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-687889938",
      "id" : 687889938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Nzg4OTkzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-06T20:16:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687889938",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-09-06T20:31:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-687893655",
      "id" : 687893655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Nzg5MzY1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-06T20:31:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687893655",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Intuitively, I don't think the mempool should 'own' the fee estimator, but rather I see the fee estimator as a client of the mempool. I'd suggest constructing the fee estimator in `AppInitMain()` and owning the memory in `NodeContext`, like the other components.",
      "created_at" : "2020-09-06T20:52:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18766#issuecomment-687898700",
      "id" : 687898700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4Nzg5ODcwMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-06T20:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687898700",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
