[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK fa74f6c5390a433342ce04359f592483a8d8cf97, but I think it would be worth trying to improve the macro if it is going to spread.\r\n\r\nI was initially confused by PR description, but it seems like problem this solves is that C++20 forbids aggregate initialization if a class has any constructors, while C++17 allows it and lets you have constructors and aggregate initialization together at the same time. Because we want to use aggregate initialization, we will be forced to get rid of some constructors when we update to c++20, and the macro helps work around that.\r\n\r\nI'm not sure this macro is ideal, though, and I think it might be good to try to improve it. I'm mainly concerned it will be applied places it doesn't belong. Two cases where no-copy-only-move behavior is useful are:\r\n\r\n1. When you have a class that is expensive to copy, and a cheap to move, and you want to disable default copy behavior to avoid slow copying by accident.\r\n2.  When you are using a low level C API, and are trying to wrap up low level C pointers or file descriptors or handles in RAII classes.\r\n\r\nI don't think we have a lot of examples of the second case, so can probably ignore it. But for the first case, the macro sucks a little because it disable copying _entirely_ instead of disabling copying by _default_ which makes code annoying to work with and test, especially since when you test you often do want to be able to copy entire data structures. Also starting the name with AGGREGATE_ probably means developers will apply macro to aggregate initialized structs freely, which will make this even more annoying.\r\n\r\nI think a better version of this macro would be called something like `DISABLE_IMPLICIT_COPIES` and would disable the copy constructor and assignment methods, while adding `T Copy() const` and `void CopyFrom(const T&)` methods that do allow convenient copying where intended",
      "created_at" : "2022-03-22T18:35:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24641#issuecomment-1075490057",
      "id" : 1075490057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24641",
      "node_id" : "IC_kwDOABII585AGq0J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075490057/reactions"
      },
      "updated_at" : "2022-03-22T18:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1075490057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thx, edited OP/title and reworked code.",
      "created_at" : "2022-03-23T08:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24641#issuecomment-1076085452",
      "id" : 1076085452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24641",
      "node_id" : "IC_kwDOABII585AI8LM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076085452/reactions"
      },
      "updated_at" : "2022-03-23T08:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1076085452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
