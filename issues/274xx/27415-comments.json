[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@kylezs Could you program your test to use the `--fallbackfee` if it recieves the error in reponse, or as Antoine reponded to you on SE, fill up your test mempool so that `estimatesmartfee` works as intended?\r\n\r\nAccessing `--fallbackfee` from within the fee estimation rpc involves importing a lot of wallet code which would be preferable to avoid...",
      "created_at" : "2023-04-05T21:49:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1498202324",
      "id" : 1498202324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585ZTMDU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1498202324/reactions"
      },
      "updated_at" : "2023-04-16T07:59:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1498202324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "+1 this would be nice, applications like CLN use this rpc and makes it hard to test in regtest / signet environments",
      "created_at" : "2023-04-24T19:01:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1520674421",
      "id" : 1520674421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585ao6Z1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1520674421/reactions"
      },
      "updated_at" : "2023-04-24T19:01:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1520674421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What's the problem with just doing error handling, and manually applying your own fallback fee? Faking a result is another layer of confusion imo",
      "created_at" : "2023-05-02T15:12:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1531653495",
      "id" : 1531653495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585bSy13",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531653495/reactions"
      },
      "updated_at" : "2023-05-02T15:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531653495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> What's the problem with just doing error handling, and manually applying your own fallback fee? Faking a result is another layer of confusion imo\r\n\r\nBecause a -fallback fee already exists. Why can't it exist for other use cases? \r\n\r\nAlso because the manually applying a fallback case is not actually testing the case I want to test, the case where the fee is returned by the RPC, which is going to be the case 99% of the time on mainnet.",
      "created_at" : "2023-05-02T15:36:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1531690323",
      "id" : 1531690323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585bS71T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531690323/reactions"
      },
      "updated_at" : "2023-05-02T15:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531690323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8342557?v=4",
         "events_url" : "https://api.github.com/users/kylezs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kylezs/followers",
         "following_url" : "https://api.github.com/users/kylezs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kylezs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kylezs",
         "id" : 8342557,
         "login" : "kylezs",
         "node_id" : "MDQ6VXNlcjgzNDI1NTc=",
         "organizations_url" : "https://api.github.com/users/kylezs/orgs",
         "received_events_url" : "https://api.github.com/users/kylezs/received_events",
         "repos_url" : "https://api.github.com/users/kylezs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kylezs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kylezs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kylezs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If you absolutely cannot handle RPC exceptions your test harness could also:\r\n\r\n1) mock out estimatesmartfee calls to give something deterministic\r\n2) load a saved fee estimation file\r\n\r\n",
      "created_at" : "2023-05-02T15:49:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1531711091",
      "id" : 1531711091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585bTA5z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531711091/reactions"
      },
      "updated_at" : "2023-05-02T15:49:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531711091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Because a -fallback fee already exists. Why can't it exist for other use cases?\r\n\r\nNode and wallet are 2 separate components; it doesn't makes sense for a wallet option to bleed into node behavior. Another example: the wallet setting `-walletrejectlongchains=0` does not mean the mempool should also accept long chains of transactions, and the existence of that wallet option does not mean we should also add that option to the node. If inheritance exists, the wallet's options should be informed by the node's options instead of the other way around. e.g. if the node is configured to disallow descendant count larger than 5, then the wallet shouldn't make chain longer than 5 since the node it submits transactions to won't allow it.\r\n\r\nIf we were to do this, we should have a separate set of fallback feerates for the fee estimator (perhaps they would have the same values as the wallet ones, but these should be independent concepts).\r\n\r\nHowever, I also don't think it makes sense for our fee estimator to fall back to hard-coded values. When there is no data, it should say so rather than blindly guess. That can be pretty dangerous.\r\n\r\nIt also sounds like your application here should add error handling for this case. Just because your mainnet fee estimator hasn't given you this error (yet) doesn't mean you shouldn't handle this case.\r\n\r\nIf your test cares about the fee estimator's behavior, the the test setup should include some chain activity with transactions getting mined at various feerates so you can assert the results are what you expect.\r\nIf your test isn't concerned with the fee estimator's exact behavior, as @instagibbs says, you can mock it or load a placeholder fee_estimates.dat file to populate the estimator with data.",
      "created_at" : "2023-06-01T12:30:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1571967192",
      "id" : 1571967192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585dslDY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1571967192/reactions"
      },
      "updated_at" : "2023-06-01T12:30:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1571967192",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> If your test isn't concerned with the fee estimator's exact behavior, as @instagibbs says, you can mock it or load a placeholder fee_estimates.dat file to populate the estimator with data.\r\n\r\nThis might be the way to go, is there one that exists that can be downloaded and loaded in? I don't really mind what the exact behaviour of the estimator is.",
      "created_at" : "2023-06-02T07:22:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1573276009",
      "id" : 1573276009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585dxklp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573276009/reactions"
      },
      "updated_at" : "2023-06-02T07:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573276009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8342557?v=4",
         "events_url" : "https://api.github.com/users/kylezs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kylezs/followers",
         "following_url" : "https://api.github.com/users/kylezs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kylezs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kylezs",
         "id" : 8342557,
         "login" : "kylezs",
         "node_id" : "MDQ6VXNlcjgzNDI1NTc=",
         "organizations_url" : "https://api.github.com/users/kylezs/orgs",
         "received_events_url" : "https://api.github.com/users/kylezs/received_events",
         "repos_url" : "https://api.github.com/users/kylezs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kylezs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kylezs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kylezs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Any long-running node has them if the node has ever restarted. I just grabbed one locally when needed. ",
      "created_at" : "2023-06-02T13:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1573751777",
      "id" : 1573751777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585dzYvh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573751777/reactions"
      },
      "updated_at" : "2023-06-02T13:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573751777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/27622 might want to keep an eye on this though, I think we should probably have a flag allowing any age of file, exposed on regtest/hidden only?",
      "created_at" : "2023-06-02T13:46:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/27415#issuecomment-1573767151",
      "id" : 1573767151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27415",
      "node_id" : "IC_kwDOABII585dzcfv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573767151/reactions"
      },
      "updated_at" : "2023-06-02T13:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1573767151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
