[
   {
      "author_association" : "MEMBER",
      "body" : "#10903 was the last time this was suggested. The conclusion then was that this isn't necessarily something we want to maintain here, and would probably be better suited to an external repo.\r\n\r\nSee:\r\nhttps://github.com/Sjors/docker-bitcoin-core\r\nhttps://github.com/NicolasDorier/docker-bitcoin\r\nhttps://github.com/jamesob/docker-bitcoind\r\n\r\nfor some examples of such repositories.\r\n\r\n@stakauskas What's your motivation for adding the Dockerfiles here?\r\n\r\n",
      "created_at" : "2018-06-27T10:45:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400629343",
      "id" : 400629343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDYyOTM0Mw==",
      "updated_at" : "2018-06-27T10:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400629343",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Agree with @fanquake ",
      "created_at" : "2018-06-27T10:51:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400630654",
      "id" : 400630654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDYzMDY1NA==",
      "updated_at" : "2018-06-27T10:51:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400630654",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NACK for the same reasons.",
      "created_at" : "2018-06-27T11:17:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400636954",
      "id" : 400636954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDYzNjk1NA==",
      "updated_at" : "2018-06-27T11:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400636954",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It was first created as an addition to ElementsProject in - https://github.com/ElementsProject/elements/pull/372 , thus appeared here.\r\n\r\nThough having Docker images could be beneficial for community wanting to run software in containers and one image would target Windows/Mac/Linux instead of having separate packages for each of them.",
      "created_at" : "2018-06-27T11:21:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400637748",
      "id" : 400637748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDYzNzc0OA==",
      "updated_at" : "2018-06-27T11:21:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400637748",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15116193?v=4",
         "events_url" : "https://api.github.com/users/stakauskas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stakauskas/followers",
         "following_url" : "https://api.github.com/users/stakauskas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stakauskas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stakauskas",
         "id" : 15116193,
         "login" : "stakauskas",
         "node_id" : "MDQ6VXNlcjE1MTE2MTkz",
         "organizations_url" : "https://api.github.com/users/stakauskas/orgs",
         "received_events_url" : "https://api.github.com/users/stakauskas/received_events",
         "repos_url" : "https://api.github.com/users/stakauskas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stakauskas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stakauskas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stakauskas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think maintaining several `Dockerfile` like this as one big advantage: We can use those as part of the CI to be sure bitcoind build correctly on the different OS which should be supported by Bitcoin, as well as running the tests on different distro. (Actually I think this is what we do for now only on ubuntu?)\r\n\r\n@sipsorcery for example maintain a dockerfile for building on Windows via msvc, and configured CI to run it. This way he can warn you when something break Windows msvc build. \r\nEven if you are not fan of windows, I think you will see the advantage to have it for your favorite linux distro instead of relying on outdated documentation and untested dev environment.\r\n\r\nIt is also way more useful than maintaining a documentation, as anybody can reproduce the build on their environment just by reading the dockerfile related to their OS.\r\n\r\nSee this as a documentation which can be checked automatically during CI.\r\n\r\nIt also has the advantage that people can easily distribute their own bitcoin core image with their favorite freshly backed commits.\r\n\r\nMy repo https://github.com/NicolasDorier/docker-bitcoin is good if you want just an official release, but I totally see the advantage of providing dockerfiles which build from sources.\r\n\r\nIt is big ACK for me. It is better than trying to maintain a documentation, but serve also other purposes.",
      "created_at" : "2018-06-27T12:50:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400660199",
      "id" : 400660199,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDY2MDE5OQ==",
      "updated_at" : "2018-06-27T12:55:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400660199",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I consider these different:\r\n - Dockerfile(s) to build the *official* image - usually in a separate repository with multiple versions/variants - and usually download the office source code;\r\n - docker-compose to launch 3rd party services to aid development - not relevant here I think.\r\n - docker-compose + multiple Dockerfile to build from local source in different *flavours*  - usually to aid development or CI.",
      "created_at" : "2018-06-27T15:17:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400712339",
      "id" : 400712339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDcxMjMzOQ==",
      "updated_at" : "2018-06-27T15:17:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400712339",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It also has the advantage that people can easily distribute their own bitcoin core image with their favorite freshly backed commits.\r\n\r\nThis is also possible with external Dockerfile.",
      "created_at" : "2018-06-27T15:20:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400713269",
      "id" : 400713269,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDcxMzI2OQ==",
      "updated_at" : "2018-06-27T15:20:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400713269",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'd compare Dockerfile to RPM spec and docker-compose as a way to manage your containers, e.g systemctl/systemd for services, just portable across different OS versions. While you can run any docker image with 'docker run', it's much easier to start with docker-compose, which allows easier and faster configuration for running containers. In this case testnet/mainnet nodes can be started within one go, scale if needed. Network isolation/ports management provided out of the box, if you wanted 3 nodes, you do not need to change configuration for port mapping, as compose will assign random host -> same port in container, etc...",
      "created_at" : "2018-06-27T15:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400722289",
      "id" : 400722289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDcyMjI4OQ==",
      "updated_at" : "2018-06-27T15:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400722289",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15116193?v=4",
         "events_url" : "https://api.github.com/users/stakauskas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stakauskas/followers",
         "following_url" : "https://api.github.com/users/stakauskas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stakauskas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stakauskas",
         "id" : 15116193,
         "login" : "stakauskas",
         "node_id" : "MDQ6VXNlcjE1MTE2MTkz",
         "organizations_url" : "https://api.github.com/users/stakauskas/orgs",
         "received_events_url" : "https://api.github.com/users/stakauskas/received_events",
         "repos_url" : "https://api.github.com/users/stakauskas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stakauskas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stakauskas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stakauskas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't see what advantage a dockerfile gives us to our existing processes. Note that it is already possible to build any commit from source deterministically by using it's gitian descriptor. Using a dockerfile to create a docker image as opposed to using gitian to create a binary wouldn't be deterministic any more.\r\n\r\nAlso note that the actual build step is just a single line `./configure && make`. Installing the dependencies is what differs per dist and usually the cause of issues. Instead of having a Dockerfile for each distribution, it seems easier to me to just list the dependencies in a readme (and maybe a one-liner for common distributions to install all dependencies)\r\n\r\nNote that on travis we already use docker, but I don't see how a Dockerfile would simplify anything there.\r\n\r\nIf there is a valid use case for a Dockerfile that makes our process easier, I am all in, otherwise I think this will lead to a maintenance burden and nit-picking, because everyone has their own use case and wants the Dockerfile to match that use case.",
      "created_at" : "2018-06-27T15:54:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400728058",
      "id" : 400728058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDcyODA1OA==",
      "updated_at" : "2018-06-27T15:54:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400728058",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> RPM spec\r\n\r\nSorry for ot, but we had someone contribute an rpm spec file and then it would just sit there unmaintained and now it is unclear what to do with it: #13137\r\n\r\nI think we want to avoid doing the same with a Dockerfile.",
      "created_at" : "2018-06-27T16:02:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400730860",
      "id" : 400730860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDczMDg2MA==",
      "updated_at" : "2018-06-27T16:02:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400730860",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Installing the dependencies is what differs per dist and usually the cause of issues. Instead of having a Dockerfile for each distribution, it seems easier to me to just list the dependencies in a readme (and maybe a one-liner for common distributions to install all dependencies)\r\n\r\nThere's no need to have Dockerfile per each distribution, though it's possible and not difficult to maintain. After choosing base image, the whole lifecycle of running(also removing/updating/etc) software is as easy as choosing image:tag, bitcoin:version, instead of downloading package for Windows/Linux/Mac and figuring out deps individually.",
      "created_at" : "2018-06-27T16:57:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400754899",
      "id" : 400754899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13542",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDc1NDg5OQ==",
      "updated_at" : "2018-06-27T16:57:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400754899",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15116193?v=4",
         "events_url" : "https://api.github.com/users/stakauskas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stakauskas/followers",
         "following_url" : "https://api.github.com/users/stakauskas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stakauskas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stakauskas",
         "id" : 15116193,
         "login" : "stakauskas",
         "node_id" : "MDQ6VXNlcjE1MTE2MTkz",
         "organizations_url" : "https://api.github.com/users/stakauskas/orgs",
         "received_events_url" : "https://api.github.com/users/stakauskas/received_events",
         "repos_url" : "https://api.github.com/users/stakauskas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stakauskas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stakauskas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stakauskas"
      }
   }
]
