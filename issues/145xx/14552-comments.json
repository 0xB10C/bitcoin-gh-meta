[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Would prefer to check this at database level, rather than in higher level wallet code. I think it's better if high level code just passes along wallet paths and isn't concerned with how data is stored in them.\r\n\r\nI posted a tweaked version of this PR at 40a6475e59950838be532b0a2c58f4359eae5625 which moves the check. @ken2812221, could you incorporate 40a6475e59950838be532b0a2c58f4359eae5625 into this PR if you think it makes sense?",
      "created_at" : "2018-10-23T19:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14552#issuecomment-432389031",
      "id" : 432389031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14552",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMjM4OTAzMQ==",
      "updated_at" : "2018-10-23T19:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/432389031",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky The element in mapDb is not always exist.\r\n\r\nFor example:\r\n1. Load wallet `dir/w1`\r\n2. Load wallet `dir/w2`\r\n3. Unload wallet `dir/w1`\r\n\r\nNow mapDb contains neither `dir/w1` nor `dir/w2` because it would flush all wallet files that share same BerkeleyEnvironment\r\n",
      "created_at" : "2018-10-23T20:34:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14552#issuecomment-432409103",
      "id" : 432409103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14552",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMjQwOTEwMw==",
      "updated_at" : "2018-10-24T09:05:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/432409103",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14350](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14350.html) (Add WalletLocation class by promag)\n* [#11911](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/11911.html) (Free BerkeleyEnvironment instances when not in use by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-10-23T22:01:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14552#issuecomment-432437568",
      "id" : 432437568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14552",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMjQzNzU2OA==",
      "updated_at" : "2018-11-02T14:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/432437568",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky The element in mapDb is not always exist.\r\n\r\nGood catch. I think a small refactoring could fix this: 9c945d011abde24f8649d877e694d392e1a5727e. And then the fix would change slightly to aef19be5851ceb3b324fd80756060a00aad8e61c.\r\n\r\nI pushed a branch with these two commits to: https://github.com/ryanofsky/bitcoin/commits/pr/bloaded\r\n\r\nI think this is a better than checking for wallet.dat files outside the database layer, but let me know what you think, and feel free to use the code or commits in this PR if you think this approach makes sense.",
      "created_at" : "2018-10-24T21:02:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14552#issuecomment-432826947",
      "id" : 432826947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14552",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMjgyNjk0Nw==",
      "updated_at" : "2018-10-24T21:02:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/432826947",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2018-11-05T13:28:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14552#issuecomment-435873156",
      "id" : 435873156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14552",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTg3MzE1Ng==",
      "updated_at" : "2018-11-05T13:28:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435873156",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   }
]
