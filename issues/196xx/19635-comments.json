[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ff/ an example how to use this parameter \r\n\r\n``` Diff\r\ndiff --git a/src/torcontrol.cpp b/src/torcontrol.cpp\r\nindex 84118b36e..3131e6793 100644\r\n--- a/src/torcontrol.cpp\r\n+++ b/src/torcontrol.cpp\r\n@@ -532,7 +532,7 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\r\n         }\r\n \r\n         // Finally - now create the service\r\n-        if (private_key.empty()) // No private key, generate one\r\n+        if (private_key.empty() || gArgs.GetBoolArg(\"-ephemeraltoronion\", DEFAULT_EPHEMERAL_TOR_ONION)) // No private key, generate one\r\n             private_key = \"NEW:RSA1024\"; // Explicitly request RSA1024 - see issue #9214\r\n         // Request hidden service, redirect port.\r\n         // Note that the 'virtual' port is always the default port to avoid decloaking nodes using other ports.\r\n\r\n```",
      "created_at" : "2020-07-31T19:44:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-667319868",
      "id" : 667319868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzMxOTg2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-31T19:44:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667319868",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This has been proposed before, but I still don't think this is particularly useful:\r\n\r\n- You can already achieve this by deleting the private key file (`~/.bitcoin/onion_private_key`) before launch.\r\n- It takes quite a while to gossip a generated onion address over the network, the average run time of bitcoind is likely not long enough to get *any* incoming connections. So then, why create an onion service at all?\r\n",
      "created_at" : "2020-08-02T13:55:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-667677093",
      "id" : 667677093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzY3NzA5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-02T13:55:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667677093",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This has been proposed before, but I still don't think this is particularly useful:\r\n\r\n@laanwj  .... not for v2 that was dismissed and like you said could be easy mitigated, but be assured you will want that in some form for v3, just a hint\r\n\r\n> the` average run time of bitcoind is likely not long enough to get any incoming connections\r\n\r\ntyi, I had often probing inbound connections even after one restart when testing transition to  v3.\r\n\r\n\r\n\r\n",
      "created_at" : "2020-08-02T16:24:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-667694818",
      "id" : 667694818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzY5NDgxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-02T16:24:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667694818",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj .... not for v2 that was dismissed and like you said could be easy mitigated, but be assured you will want that in some form for v3, just a hint\r\n\r\nI have no idea what you're trying to say here, or why the situation would be any different for v2 vs v3.",
      "created_at" : "2020-09-14T18:38:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-692238364",
      "id" : 692238364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjIzODM2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-14T18:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692238364",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa \r\n> I have no idea what you're trying to say here, or why the situation would be any different for v2 vs v3.\r\n\r\nI want not go further since i did not file a tor trac all those years and also doubt tor will ever change v3 directory and relay logic for an ip dox prone app as is.\r\n\r\ntyi; while i dev'ed the base layer in tor support for c-ln some years ago, i stumbled upon an v3 tor edge case and when testing core and dev'ed my private v3 in old v2 ADDR ipv6 tunnel message non BIP tunnel patch, i saw it again against the ADDRv2 test nodes,\r\n\r\nBut aside all of this, genuine temporary V3 addr might be useful to have for one shot side synced pruned top version nodes that just want stealth tx or for those that are always behind a NAT but also want not there ip or region known but enable short time inbound they advertise by other means, ie, over c-ln invoices or DLC's \r\n \r\nbtw, since AFAICS u came up with the wrapped in ipv6 v2 address PR https://github.com/bitcoin/bitcoin/pull/1174 after enable https://github.com/bitcoin/bitcoin/pull/1021 and use the OnionCat addr space , i really keen to know what was the motivation in first place to do it that way then?",
      "created_at" : "2020-09-15T08:48:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-692567732",
      "id" : 692567732,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjU2NzczMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T09:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692567732",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> while i dev'ed the base layer in tor support for c-ln some years ago, i stumbled upon an v3 tor edge case and when testing core and dev'ed my private v3 in old v2 ADDR ipv6 tunnel message non BIP tunnel patch, i saw it again against the ADDRv2 test nodes,\n\nOk, what is the edge case? I have a very hard time understanding you.\n\n> But aside all of this, genuine temporary V3 addr might be useful to have for one shot side synced pruned top version nodes that just want stealth tx\n\nFor broadcasting over Tor you don't need a hidden service at all.\n\n> or for those that are always behind a NAT but also want not there ip or region known but enable short time inbound they advertise by other means, ie, over c-ln invoices or DLC's\n\nAgree, in theory that seems useful and feasible. But in practice I have not seen demand for such a mode of operation. It's also independent of v2 vs v3.\n\n> btw, since AFAICS u came up with the wrapped in ipv6 v2 address PR #1174 after enable #1021 and use the OnionCat addr space , i really keen to know what was the motivation in first place to do it that way then?\n\nIt was an easy and somewhat standardized way of making the network relay onion addresses without protocol changes. Perhaps it was a mistake in retrospect, and we should have done something like BIP155 back then immediately, but that was not something I was considering.",
      "created_at" : "2020-09-15T16:17:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-692822407",
      "id" : 692822407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MjgyMjQwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T16:17:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692822407",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> not for v2 that was dismissed and like you said could be easy mitigated, but be assured you will want that in some form for v3, just a hint\r\n\r\n@Saibato Not sure why we will need new address on each restart for v3\r\n\r\nAlso sipa mentioned it will affect the way node works and end up not listening to anyone. We need a solution which doesn't affect the functionality and also improves the privacy. I am not sure what kind of attacks are possible if same address is used for long time. I need to experiment more, research, consult few experienced people who are involved in things related to Tor like author of this post: https://www.hackerfactor.com/blog/index.php?/archives/896-Tor-0day-Finding-IP-Addresses.html",
      "created_at" : "2020-09-15T17:31:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19635#issuecomment-692863273",
      "id" : 692863273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19635",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5Mjg2MzI3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-15T17:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692863273",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   }
]
