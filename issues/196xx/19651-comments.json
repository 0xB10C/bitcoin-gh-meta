[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Could we change `BerkeleyBatch::WriteKey` to return an enum describing the error? that will be inconsistent with the current API though.\r\nbut it will allow us to print a good error for the user, as he should probably know he already have that descriptor ",
      "created_at" : "2020-08-03T12:09:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19651#issuecomment-667987452",
      "id" : 667987452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19651",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2Nzk4NzQ1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T12:09:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667987452",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
         "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
         "followers_url" : "https://api.github.com/users/elichai/followers",
         "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
         "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/elichai",
         "id" : 2167860,
         "login" : "elichai",
         "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
         "organizations_url" : "https://api.github.com/users/elichai/orgs",
         "received_events_url" : "https://api.github.com/users/elichai/received_events",
         "repos_url" : "https://api.github.com/users/elichai/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/elichai"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think we should go with option 2: To update the existing spkman. The keys should either already exist or are being imported at that time. I don't think it's good to add keys in memory and not write them to disk as this could potentially result in lost keys.",
      "created_at" : "2020-08-03T16:07:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19651#issuecomment-668107138",
      "id" : 668107138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19651",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2ODEwNzEzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T16:07:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/668107138",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Could we change `BerkeleyBatch::WriteKey` to return an enum describing the error? that will be inconsistent with the current API though.\r\n> but it will allow us to print a good error for the user, as he should probably know he already have that descriptor\r\n\r\n@elichai I believe it's better to process the command rather than just show better error message, because it allows to modify some meta data: for example descriptor's range. However I added a trivial commit to make error message less misleading.\r\n\r\n> I think we should go with option 2: To update the existing spkman. The keys should either already exist or are being imported at that time. I don't think it's good to add keys in memory and not write them to disk as this could potentially result in lost keys.\r\n\r\n@achow101 Indeed, this aligns with my intuition as well. I changed the implementation and it looks cleaner to me. Hope I got the update semantics correct for the `DescriptorScriptPubKeyMan`. Could you please check?\r\n\r\n\r\n\r\n",
      "created_at" : "2020-08-06T08:45:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19651#issuecomment-669798234",
      "id" : 669798234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19651",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2OTc5ODIzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-06T08:45:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669798234",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   }
]
