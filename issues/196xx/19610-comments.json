[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19596 (Deduplicate parent txid loop of requested transactions and missing parents of orphan transactions by sdaftuar)\n* #19339 (validation: re-delegate absurd fee checking from mempool to clients by gzhao408)\n* #19306 (refactor: Replace RecursiveMutex with Mutex in CTxMemPool by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-07-28T17:03:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-665159957",
      "id" : 665159957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NTE1OTk1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-08T21:43:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665159957",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on merged #19590.",
      "created_at" : "2020-07-30T15:59:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-666486685",
      "id" : 666486685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NjQ4NjY4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-30T15:59:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666486685",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-07-31T13:23:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-667117386",
      "id" : 667117386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzExNzM4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-31T13:23:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667117386",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r463994428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463994428"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could re-use the helper methods from above here in the combined helpers",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-01T19:52:03Z",
      "diff_hunk" : "@@ -431,12 +431,20 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r463994428",
      "id" : 463994428,
      "line" : 426,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk5NDQyOA==",
      "original_commit_id" : "517152034a8b33e89adcdcfddf9605f02384f62f",
      "original_line" : 426,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 36,
      "pull_request_review_id" : 459600088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/463994428",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r464420392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464420392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks Fabian. I mulled on doing this, but I think I'd rather keep the method definitions independent.",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-03T13:41:22Z",
      "diff_hunk" : "@@ -431,12 +431,20 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r464420392",
      "id" : 464420392,
      "in_reply_to_id" : 463994428,
      "line" : 426,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyMDM5Mg==",
      "original_commit_id" : "517152034a8b33e89adcdcfddf9605f02384f62f",
      "original_line" : 426,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 36,
      "pull_request_review_id" : 460035143,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464420392",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think a better approach than the changes within `AlreadyHave()` is to split that function up into `AlreadyHaveTx()` and `AlreadyHaveBlock()` since those are two totally separate concepts. @jonatack would you be interested in taking the commits from here: https://github.com/jnewbery/bitcoin/commits/2020-07-split-already-have? (see also https://github.com/bitcoin/bitcoin/pull/19569#discussion_r462887483) \r\n\r\n",
      "created_at" : "2020-08-03T16:09:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-668108043",
      "id" : 668108043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2ODEwODA0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-03T16:09:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/668108043",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r465175043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465175043"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should this contain `MSG_FILTERED_WITNESS_BLOCK`?",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-04T16:25:00Z",
      "diff_hunk" : "@@ -431,12 +431,20 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsMsgBlkOrMsgWitnessBlk() const { return type == MSG_BLOCK || type == MSG_WITNESS_BLOCK; }\n+    bool IsGenBlkMsg() const { return type == MSG_BLOCK || type == MSG_FILTERED_BLOCK || type == MSG_CMPCT_BLOCK || type == MSG_WITNESS_BLOCK; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r465175043",
      "id" : 465175043,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE3NTA0Mw==",
      "original_commit_id" : "82c92976792f9c9c11b38cb0092f18728c97e64e",
      "original_line" : 447,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 460974346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465175043",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467468070"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467468070"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Well-spotted; added it in the rebase for now. The one place this helper is currently used (https://github.com/bitcoin/bitcoin/pull/19610/files#diff-eff7adeaec73a769788bb78858815c91L1763) did not include `MSG_FILTERED_WITNESS_BLOCK`, so we'd need to be sure including it doesn't change behavior (or was an oversight).",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-08T14:02:50Z",
      "diff_hunk" : "@@ -431,12 +431,20 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsMsgBlkOrMsgWitnessBlk() const { return type == MSG_BLOCK || type == MSG_WITNESS_BLOCK; }\n+    bool IsGenBlkMsg() const { return type == MSG_BLOCK || type == MSG_FILTERED_BLOCK || type == MSG_CMPCT_BLOCK || type == MSG_WITNESS_BLOCK; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467468070",
      "id" : 467468070,
      "in_reply_to_id" : 465175043,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ2ODA3MA==",
      "original_commit_id" : "82c92976792f9c9c11b38cb0092f18728c97e64e",
      "original_line" : 447,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 463804949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467468070",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased with four commits pulled in from @jnewbery's https://github.com/bitcoin/bitcoin/compare/master...jnewbery:2020-07-split-already-have branch as well as the changes in #19611.",
      "created_at" : "2020-08-08T14:12:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-670933625",
      "id" : 670933625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MDkzMzYyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-08T14:12:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/670933625",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think a better approach than the changes within AlreadyHave() is to split that function up into AlreadyHaveTx() and AlreadyHaveBlock() since those are two totally separate concepts.\r\n\r\nGreat idea. The block and transaction paths have drifted apart so much that it no longer makes sense to have a common function there.\r\n",
      "created_at" : "2020-08-09T18:49:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-671087745",
      "id" : 671087745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTA4Nzc0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T18:49:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671087745",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467616315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467616315"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Personally I don't really know if it makes sense for \"plain-data\" network message types like CInv to have private fields. I see it more as a struct with helper methods than really an encapsulated object with functionality.",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-09T18:52:56Z",
      "diff_hunk" : "@@ -400,9 +400,11 @@ enum GetDataMsg : uint32_t {\n /** inv message data */\n class CInv\n {\n+private:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467616315",
      "id" : 467616315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYxNjMxNQ==",
      "original_commit_id" : "4789cff6f6e37b42e25d1cb97c21c2a5c363a082",
      "original_line" : 403,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 463895483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467616315",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467677277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467677277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh ok, in that case we may want to make CInv a struct to avoid confusion. As a class, it looked like encapsulation was desirable, and only one place in the code was still accessing `CInv::type` from the outside so it was easy to make it private.",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-10T03:55:50Z",
      "diff_hunk" : "@@ -400,9 +400,11 @@ enum GetDataMsg : uint32_t {\n /** inv message data */\n class CInv\n {\n+private:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r467677277",
      "id" : 467677277,
      "in_reply_to_id" : 467616315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzY3NzI3Nw==",
      "original_commit_id" : "4789cff6f6e37b42e25d1cb97c21c2a5c363a082",
      "original_line" : 403,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 463946161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467677277",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-10T19:22:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-671541313",
      "id" : 671541313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTU0MTMxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-10T19:22:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671541313",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468496660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468496660"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Er, renaming `CInv` to `Inv` to make it a struct would be too much noise. Done, dropped the last commit \"p2p: refactor CInv::type from public to private class member\".",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-11T10:59:48Z",
      "diff_hunk" : "@@ -400,9 +400,11 @@ enum GetDataMsg : uint32_t {\n /** inv message data */\n class CInv\n {\n+private:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468496660",
      "id" : 468496660,
      "in_reply_to_id" : 467616315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ5NjY2MA==",
      "original_commit_id" : "4789cff6f6e37b42e25d1cb97c21c2a5c363a082",
      "original_line" : 403,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 464959685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T10:59:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468496660",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468497256"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468497256"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "[continuing conversation from [another PR](https://github.com/bitcoin/bitcoin/pull/19611#discussion_r463552637)]\r\n\r\nnit: `s/Blk/Block/`\r\n\r\n```sh\r\n$ git grep -i blk src |wc -l\r\n     108\r\n$ git grep -i block src |wc -l\r\n   11014\r\n```",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-11T11:00:53Z",
      "diff_hunk" : "@@ -412,14 +412,22 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468497256",
      "id" : 468497256,
      "line" : 417,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ5NzI1Ng==",
      "original_commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "original_line" : 417,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 26,
      "pull_request_review_id" : 464960335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T11:52:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468497256",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468502188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468502188"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Did you consider making these switch statements without defaults, so that the compiler warns if a new type is added to the enum but not here?",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-11T11:11:26Z",
      "diff_hunk" : "@@ -412,14 +412,22 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468502188",
      "id" : 468502188,
      "line" : 426,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUwMjE4OA==",
      "original_commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "original_line" : 426,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 36,
      "pull_request_review_id" : 464966438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T11:28:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468502188",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468510147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468510147"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, it looks like `MSG_FILTERED_WITNESS_BLOCK` isn't actually used and is 'reserved for future use': https://github.com/bitcoin/bips/blob/master/bip-0144.mediawiki#relay. I recommend removing it from here, removing `IsMsgFilteredWitnessBlk()` (since it's not used anywhere) and adding a comment to `MSG_FILTERED_WITNESS_BLOCK` saying it's unused (I think we could even comment out the value since it's unused in the code).",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-11T11:28:10Z",
      "diff_hunk" : "@@ -431,12 +431,20 @@ class CInv\n     std::string ToString() const;\n \n     // Single-message helper methods\n-    bool IsMsgTx()        const { return type == MSG_TX; }\n-    bool IsMsgWtx()       const { return type == MSG_WTX; }\n+    bool IsUndefined() const { return type == UNDEFINED; }\n+    bool IsMsgTx() const { return type == MSG_TX; }\n+    bool IsMsgBlk() const { return type == MSG_BLOCK; }\n+    bool IsMsgWtx() const { return type == MSG_WTX; }\n+    bool IsMsgFilteredBlk() const { return type == MSG_FILTERED_BLOCK; }\n+    bool IsMsgCmpctBlk() const { return type == MSG_CMPCT_BLOCK; }\n+    bool IsMsgWitnessBlk() const { return type == MSG_WITNESS_BLOCK; }\n     bool IsMsgWitnessTx() const { return type == MSG_WITNESS_TX; }\n+    bool IsMsgFilteredWitnessBlk() const { return type == MSG_FILTERED_WITNESS_BLOCK; }\n \n     // Combined-message helper methods\n-    bool IsGenTxMsg()     const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsGenTxMsg() const { return type == MSG_TX || type == MSG_WTX || type == MSG_WITNESS_TX; }\n+    bool IsMsgBlkOrMsgWitnessBlk() const { return type == MSG_BLOCK || type == MSG_WITNESS_BLOCK; }\n+    bool IsGenBlkMsg() const { return type == MSG_BLOCK || type == MSG_FILTERED_BLOCK || type == MSG_CMPCT_BLOCK || type == MSG_WITNESS_BLOCK; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468510147",
      "id" : 468510147,
      "in_reply_to_id" : 465175043,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxMDE0Nw==",
      "original_commit_id" : "82c92976792f9c9c11b38cb0092f18728c97e64e",
      "original_line" : 447,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : null,
      "pull_request_review_id" : 464966438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-11T11:28:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468510147",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468518248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468518248"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could this result in unintended behavioral change?\r\n\r\nPreviously if `inv.type == MSG_FILTERED_WITNESS_BLOCK` we would not execute the code inside this `if` block. With this patch we would execute it.\r\n\r\nRelated to https://github.com/bitcoin/bitcoin/pull/19610#discussion_r465175043",
      "commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "created_at" : "2020-08-11T11:44:34Z",
      "diff_hunk" : "@@ -1771,7 +1761,7 @@ void static ProcessGetData(CNode& pfrom, const CChainParams& chainparams, CConnm\n     // expensive to process.\n     if (it != pfrom.vRecvGetData.end() && !pfrom.fPauseSend) {\n         const CInv &inv = *it++;\n-        if (inv.type == MSG_BLOCK || inv.type == MSG_FILTERED_BLOCK || inv.type == MSG_CMPCT_BLOCK || inv.type == MSG_WITNESS_BLOCK) {\n+        if (inv.IsGenBlkMsg()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#discussion_r468518248",
      "id" : 468518248,
      "line" : 1764,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODI0OA==",
      "original_commit_id" : "806f12427dfafc85c7b176ad073550842b6970be",
      "original_line" : 1764,
      "original_position" : 127,
      "original_start_line" : 1774,
      "path" : "src/net_processing.cpp",
      "position" : 127,
      "pull_request_review_id" : 464960335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19610",
      "side" : "RIGHT",
      "start_line" : 1774,
      "start_side" : "LEFT",
      "updated_at" : "2020-08-11T11:52:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/468518248",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> In commits p2p: remove unused nFetchFlags from NetMsgType::(TX|INV) processing - why would it be unused? It looks used to me. Maybe I am missing something obscure? If that is the case, then maybe the commit messages warrant some more elaborate explanations?\r\n\r\nBecause `GetFetchFlags()` can only add the `MSG_WITNESS_FLAG`, which is added to the `CInv.type` field. That `CInv` only passed to `AlreadyHave()` or `ToGenTxid()` and neither of those functions do anything different depending on whether the `CInv` type is `MSG_TX` MSG_WITNESS_TX`. I agree that the git commit log could be expanded to explain this.\r\n\r\n> The change [...] does not belong to commit [net processing] Remove mempool argument from AlreadyHaveBlock()\r\n\r\nIt's an important change. See https://github.com/bitcoin/bitcoin/pull/19569#discussion_r462887483 for context. Perhaps it should be split into a separate commit or have a commit log explaining why it's needed.",
      "created_at" : "2020-08-11T13:49:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19610#issuecomment-671958676",
      "id" : 671958676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19610",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTk1ODY3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-11T13:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671958676",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
