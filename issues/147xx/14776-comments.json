[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235272587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235272587"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You could do\r\n```C++\r\nbool mitigatespectre_default = !gArgs.GetBoolArg(\"-disablewallet\", false) && DEFAULT_MITIGATE_SPECTE;\r\nSpectreMitigation(gArgs.GetBoolArg(\"-mitigatespectre\", mitigatespectre_default));\r\n```\r\n",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:09:44Z",
      "diff_hunk" : "@@ -888,6 +889,20 @@ bool AppInitBasicSetup()\n     if (setProcDEPPol != nullptr) setProcDEPPol(PROCESS_DEP_ENABLE);\n #endif\n \n+    if (gArgs.GetBoolArg(\"-disablewallet\", false)) {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", false)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    } else {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", DEFAULT_MITIGATE_SPECTRE)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235272587",
      "id" : 235272587,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3MjU4Nw==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : 20,
      "pull_request_review_id" : 177099473,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:49:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235272587",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275199"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't seem safe. What if a kernel has number 52 with a different meaning?",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:23:07Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275199",
      "id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NTE5OQ==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177102103,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:49:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275199",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yeah, that's def much cleaner",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:24:00Z",
      "diff_hunk" : "@@ -888,6 +889,20 @@ bool AppInitBasicSetup()\n     if (setProcDEPPol != nullptr) setProcDEPPol(PROCESS_DEP_ENABLE);\n #endif\n \n+    if (gArgs.GetBoolArg(\"-disablewallet\", false)) {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", false)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    } else {\n+        if (gArgs.GetBoolArg(\"-mitigatespectre\", DEFAULT_MITIGATE_SPECTRE)) {\n+            SpectreMitigation(true);\n+        } else {\n+            SpectreMitigation(false);\n+        }\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235275374",
      "id" : 235275374,
      "in_reply_to_id" : 235272587,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NTM3NA==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 25,
      "path" : "src/init.cpp",
      "position" : 20,
      "pull_request_review_id" : 177102718,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:49:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235275374",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14169](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14169.html) (add -debuglogsize=<n> option by SuckShit)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-11-21T07:32:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#issuecomment-440565114",
      "id" : 440565114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MDU2NTExNA==",
      "updated_at" : "2018-11-21T07:32:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/440565114",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235277564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235277564"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The default-exception language here doesn't match elsewhere.\r\n\r\nMaybe something like:\r\n```C++\r\n    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\r\n#ifdef ENABLE_WALLET\r\n    DEFAULT_MITIGATE_SPECTRE ? \"0 or 1 if -disablewallet set\" : \"0\"\r\n#else\r\n    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)\r\n#endif\r\n    )), true, OptionsCategory::OPTIONS);\r\n```",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:35:40Z",
      "diff_hunk" : "@@ -369,6 +369,7 @@ void SetupServerArgs()\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u, defaults to disabled if -disablewallet is set)\", DEFAULT_MITIGATE_SPECTRE), true, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235277564",
      "id" : 235277564,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3NzU2NA==",
      "original_commit_id" : "26525e5ad337696f716be0275006aeb6b790f6e2",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177105478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:49:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235277564",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235278207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235278207"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Alphabetic ordering seems to happen here, so move this entry up to below `-minimumchainwork`",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:38:04Z",
      "diff_hunk" : "@@ -369,6 +369,7 @@ void SetupServerArgs()\n             \"(default: 0 = disable pruning blocks, 1 = allow manual pruning via RPC, >=%u = automatically prune block files to stay under the specified target size in MiB)\", MIN_DISK_SPACE_FOR_BLOCK_FILES / 1024 / 1024), false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex\", \"Rebuild chain state and block index from the blk*.dat files on disk\", false, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-reindex-chainstate\", \"Rebuild chain state from the currently indexed blocks. When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\", false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u, defaults to disabled if -disablewallet is set)\", DEFAULT_MITIGATE_SPECTRE), true, OptionsCategory::OPTIONS);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235278207",
      "id" : 235278207,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI3ODIwNw==",
      "original_commit_id" : "26525e5ad337696f716be0275006aeb6b790f6e2",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 177106043,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:49:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235278207",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235281472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235281472"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "AFAIK the linux kernel API is supposed to be stable for these types of calls so that should not change.",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T07:52:25Z",
      "diff_hunk" : "@@ -67,6 +67,31 @@\n \n #ifdef HAVE_SYS_PRCTL_H\n #include <sys/prctl.h>\n+// Set spectre prctl defines so that we can build on older kernels",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235281472",
      "id" : 235281472,
      "in_reply_to_id" : 235275199,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MTQ3Mg==",
      "original_commit_id" : "aa21a4ecfc7e577a0ad3d28f572f5eef9b62dde0",
      "original_position" : 4,
      "path" : "src/util/system.cpp",
      "position" : 4,
      "pull_request_review_id" : 177109549,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T07:52:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235281472",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283402"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will turn into `00` if `!DEFAULT_MITIGATE_SPECTE`, I think? Probably want end to go `: \"\"`.",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:00:35Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283402",
      "id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MzQwMg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 177111667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:00:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283402",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283644"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Am I misreading this code completely? This looks like it will print out `DEFAULT_MITIGATE_SPECTRE` twice.",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:01:36Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235283644",
      "id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4MzY0NA==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : 8,
      "pull_request_review_id" : 177111966,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:01:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235283644",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284006"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "debug help shows with wallet enabled:  \r\n```\r\n  -mitigatespectre\r\n       Attempt to enable per process spectre mitigations (default: 1 or 0 if\r\n       -disablewallet set)\r\n```",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:03:30Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284006",
      "id" : 235284006,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NDAwNg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 177112438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:03:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284006",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284566"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you set `DEFAULT_MITIGATE_SPECTRE` to `false` it will say `00` I think.",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:06:06Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235284566",
      "id" : 235284566,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NDU2Ng==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 177113127,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:06:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235284566",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285092"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`DEFAULT_MITIGATE_SPECTRE` is somewhat redundant in `DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"` since `DEFAULT_MITIGATE_SPECTRE` is controlled by `ENABLE_WALLET`, doesn't look like it would be printed twice.",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:08:27Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"\n+#else\n+    strprintf(\"%u\", DEFAULT_MITIGATE_SPECTRE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285092",
      "id" : 235285092,
      "in_reply_to_id" : 235283644,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NTA5Mg==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 8,
      "path" : "src/init.cpp",
      "position" : 8,
      "pull_request_review_id" : 177113778,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285092",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285513"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yeah, it only works because `DEFAULT_MITIGATE_SPECTRE` is controlled by `ENABLE_WALLET`",
      "commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "created_at" : "2018-11-21T08:10:06Z",
      "diff_hunk" : "@@ -358,6 +358,13 @@ void SetupServerArgs()\n     gArgs.AddArg(\"-minimumchainwork=<hex>\", strprintf(\"Minimum work assumed to exist on a valid chain in hex (default: %s, testnet: %s)\", defaultChainParams->GetConsensus().nMinimumChainWork.GetHex(), testnetChainParams->GetConsensus().nMinimumChainWork.GetHex()), true, OptionsCategory::OPTIONS);\n     gArgs.AddArg(\"-par=<n>\", strprintf(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\",\n         -GetNumCores(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS), false, OptionsCategory::OPTIONS);\n+    gArgs.AddArg(\"-mitigatespectre\", strprintf(\"Attempt to enable per process spectre mitigations (default: %u%s)\", DEFAULT_MITIGATE_SPECTRE, (\n+#ifdef ENABLE_WALLET\n+    DEFAULT_MITIGATE_SPECTRE ? \" or 0 if -disablewallet set\" : \"0\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14776#discussion_r235285513",
      "id" : 235285513,
      "in_reply_to_id" : 235283402,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNTI4NTUxMw==",
      "original_commit_id" : "6dbaed44dec9ab1e41094244dd8d22ebe5a6c653",
      "original_position" : 6,
      "path" : "src/init.cpp",
      "position" : 6,
      "pull_request_review_id" : 177114257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14776",
      "updated_at" : "2018-11-21T08:10:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/235285513",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3298484?v=4",
         "events_url" : "https://api.github.com/users/jameshilliard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jameshilliard/followers",
         "following_url" : "https://api.github.com/users/jameshilliard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jameshilliard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jameshilliard",
         "id" : 3298484,
         "login" : "jameshilliard",
         "node_id" : "MDQ6VXNlcjMyOTg0ODQ=",
         "organizations_url" : "https://api.github.com/users/jameshilliard/orgs",
         "received_events_url" : "https://api.github.com/users/jameshilliard/received_events",
         "repos_url" : "https://api.github.com/users/jameshilliard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jameshilliard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jameshilliard"
      }
   }
]
