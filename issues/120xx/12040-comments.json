[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm, I mean in general its probably a terrible idea to be calling bitcoind's RPC from a browser directly...I would probably be happy to see this if we force the setting of an -alloworigin=$ORIGIN option (which implies IP whitelist as well) to force users to use it at least somewhat securely.",
      "created_at" : "2018-01-03T16:41:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-355059998",
      "id" : 355059998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-01-03T16:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355059998",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "There's plenty of good reason to enable RPC from browser, but I agree we have to make it opt-in. Will add that to the patch.",
      "created_at" : "2018-01-05T01:19:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-355447184",
      "id" : 355447184,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-01-05T01:19:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355447184",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/591860?v=4",
         "events_url" : "https://api.github.com/users/lionello/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lionello/followers",
         "following_url" : "https://api.github.com/users/lionello/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lionello/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lionello",
         "id" : 591860,
         "login" : "lionello",
         "organizations_url" : "https://api.github.com/users/lionello/orgs",
         "received_events_url" : "https://api.github.com/users/lionello/received_events",
         "repos_url" : "https://api.github.com/users/lionello/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lionello/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lionello/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lionello"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Things like this are not sufficient to make access from browsers safe, because we must also be safe even if the user has old browsers with CORS bugs on their system. (e.g. IIRC old IE was trivially bypassable).\r\n\r\nAs a result there would have to be a lot of developer resources available to implement, review, and characterize the full set of protections needed to prevent that from being a gaping vulnerability-- and a commensurate really good application for it.\r\n  ",
      "created_at" : "2018-01-08T02:01:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-355872083",
      "id" : 355872083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-01-08T02:03:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355872083",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@gmaxwell Done: I've added the flag `-rpccorsdomain` to match the existing options (and similar option in Ethereum's Geth.)\r\n\r\nI've also added tests for that flag.\r\n\r\nAs for your question: we have an internal website that we use to sign transactions with hardware wallets. We use RPC to send out the signed transactions. We'd prefer to do this without a service (which needs audits, security updates, etc..)",
      "created_at" : "2018-02-06T04:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-363307306",
      "id" : 363307306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-02-06T04:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363307306",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/591860?v=4",
         "events_url" : "https://api.github.com/users/lionello/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lionello/followers",
         "following_url" : "https://api.github.com/users/lionello/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lionello/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lionello",
         "id" : 591860,
         "login" : "lionello",
         "organizations_url" : "https://api.github.com/users/lionello/orgs",
         "received_events_url" : "https://api.github.com/users/lionello/received_events",
         "repos_url" : "https://api.github.com/users/lionello/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lionello/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lionello/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lionello"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Needs rebase. I'm generally a fan of correct CORS / CSP headers, will review later.",
      "created_at" : "2018-02-20T16:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-367026886",
      "id" : 367026886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-02-20T16:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367026886",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "POST works (assuming `bitcoin:bitcoin` credentials, running on port 8085):\r\n```\r\n\r\ncurl -X POST \\\r\n  http://localhost:8085/ \\\r\n  -H 'Authorization: Basic Yml0Y29pbjpiaXRjb2lu=' \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Content-Type: application/json' \\\r\n  -d '{\r\n\t\"method\": \"getblockchaininfo\"\r\n}'\r\n```\r\n\r\nBut OPTIONS doesn't:\r\n\r\n```\r\ncurl -X OPTIONS \\\r\n  http://localhost:8085/ \\\r\n  -H 'Authorization: Basic Yml0Y29pbjpiaXRjb2lu=' \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Content-Type: application/json'\r\nJSONRPC server handles only POST requests\r\n```\r\n\r\nThat was using [Postman](https://www.getpostman.com) which doesn't set the origin header, but I get the same error from a browser for the OPTIONS request.\r\n",
      "created_at" : "2018-02-20T20:32:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-367109475",
      "id" : 367109475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-02-20T20:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367109475",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@Sjors Just using `OPTIONS` doesn't make it a valid CORS pre-flight request. Try this:\r\n\r\n```\r\ncurl -X OPTIONS \\\r\n    http://localhost:8085/ \\\r\n    -H 'Authorization: Basic Yml0Y29pbjpiaXRjb2lu=' \\\r\n    -H 'Cache-Control: no-cache' \\\r\n    -H 'Content-Type: application/json' \\\r\n    -H 'Origin: null' \\\r\n    -H 'access-control-request-method: POST' \\\r\n    -d '{\r\n\t\"method\": \"getblockchaininfo\"\r\n  }'\r\n```",
      "created_at" : "2018-02-21T00:22:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12040#issuecomment-367169299",
      "id" : 367169299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12040",
      "updated_at" : "2018-02-21T00:22:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367169299",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/591860?v=4",
         "events_url" : "https://api.github.com/users/lionello/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lionello/followers",
         "following_url" : "https://api.github.com/users/lionello/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lionello/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lionello",
         "id" : 591860,
         "login" : "lionello",
         "organizations_url" : "https://api.github.com/users/lionello/orgs",
         "received_events_url" : "https://api.github.com/users/lionello/received_events",
         "repos_url" : "https://api.github.com/users/lionello/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lionello/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lionello/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lionello"
      }
   }
]
