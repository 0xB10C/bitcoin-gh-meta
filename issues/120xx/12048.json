{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "This replaces the first-fit algorithm used in the Arena with a best-fit. According to \"Dynamic Storage Allocation: A Survey and Critical Review\", Wilson et. al. 1995, http://www.scs.stanford.edu/14wi-cs140/sched/readings/wilson.pdf, both startegies work well in practice.\r\n\r\nThe advantage of using best-fit is that we can switch the O(n) allocation to O(log(n)). Additionally, some previously O(log(n)) operations are now O(1) operations by using hash maps. The end effect is that the benchmark runs about 2.5 times faster on my machine:\r\n\r\n    # Benchmark, evals, iterations, total, min, max, median\r\n    old: BenchLockedPool, 5, 530, 5.25749, 0.00196938, 0.00199755, 0.00198172\r\n    new: BenchLockedPool, 5, 1300, 5.11313, 0.000781493, 0.000793314, 0.00078606\r\n\r\nI've run all unit tests and benchmarks, and increased the number of iterations so that BenchLockedPool takes about 5 seconds again.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12048/comments",
   "created_at" : "2017-12-29T10:40:25Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12048/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/12048",
   "id" : 285071693,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12048/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 12048,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/12048.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12048",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/12048.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Use best-fit strategy in Arena, now O(log(n)) instead O(n)",
   "updated_at" : "2017-12-29T11:31:13Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12048",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/14386?v=4",
      "events_url" : "https://api.github.com/users/martinus/events{/privacy}",
      "followers_url" : "https://api.github.com/users/martinus/followers",
      "following_url" : "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url" : "https://api.github.com/users/martinus/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/martinus",
      "id" : 14386,
      "login" : "martinus",
      "organizations_url" : "https://api.github.com/users/martinus/orgs",
      "received_events_url" : "https://api.github.com/users/martinus/received_events",
      "repos_url" : "https://api.github.com/users/martinus/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/martinus/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/martinus"
   }
}
