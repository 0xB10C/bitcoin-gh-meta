[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22868](https://github.com/bitcoin/bitcoin/pull/22868) (wallet: Call load handlers without cs_wallet locked by promag)\n* [#22805](https://github.com/bitcoin/bitcoin/pull/22805) (refactor: use CWallet const shared pointers in dump{privkey,wallet} by theStack)\n* [#22787](https://github.com/bitcoin/bitcoin/pull/22787) (refactor: actual immutable pointing by kallewoof)\n* [#22372](https://github.com/bitcoin/bitcoin/pull/22372) (Support multiple -*notify commands by luke-jr)\n* [#22260](https://github.com/bitcoin/bitcoin/pull/22260) (Make bech32m the default, except where needed. Update GUI checkbox. by Sjors)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#15719](https://github.com/bitcoin/bitcoin/pull/15719) (Wallet passive startup by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-09T12:51:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#issuecomment-916062994",
      "id" : 916062994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22928",
      "node_id" : "IC_kwDOABII5842mgMS",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-09T12:51:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916062994",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709323884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709323884"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Remove `gArgs` from `wallet.h` and `wallet.cpp`\" (d7b904551b4ee337a5b02ebddb1d27fd86d21a8f)\r\n\r\nI think it's mistake to be adding `gArgs` references so many places when the goal is to not use `gArgs`. Most of these uses can be replaced by `m_args`. Would suggest the following change:\r\n\r\n- Diff: https://github.com/ryanofsky/bitcoin/compare/review.22928.1..review.22928.1-edit\r\n- Tag: [review.22928.1-edit.1](https://github.com/ryanofsky/bitcoin/commits/review.22928.1-edit.1)\r\n- Commit: bb118a81a51de93a59497638d8f51ee561f60a1f\r\n",
      "commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "created_at" : "2021-09-15T15:52:02Z",
      "diff_hunk" : "@@ -34,7 +34,7 @@ BOOST_AUTO_TEST_CASE(ismine_standard)\n \n     // P2PK compressed\n     {\n-        CWallet keystore(chain.get(), \"\", CreateDummyWalletDatabase());\n+        CWallet keystore(chain.get(), \"\", gArgs, CreateDummyWalletDatabase());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709323884",
      "id" : 709323884,
      "line" : 37,
      "node_id" : "PRRC_kwDOABII584qR2xs",
      "original_commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "original_line" : 37,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/ismine_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 755307256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-15T16:15:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709323884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709329492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709329492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Remove `gArgs` from `wallet.h` and `wallet.cpp`\" (d7b904551b4ee337a5b02ebddb1d27fd86d21a8f)\r\n\r\n`args` argument is redundant here and should be dropped. Just say `ArgsManager& args = walletInstance->m_args` inside the function.",
      "commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "created_at" : "2021-09-15T15:58:34Z",
      "diff_hunk" : "@@ -2749,7 +2749,7 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n     return walletInstance;\n }\n \n-bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interfaces::Chain& chain, bilingual_str& error, std::vector<bilingual_str>& warnings)\n+bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, const ArgsManager& args, interfaces::Chain& chain, bilingual_str& error, std::vector<bilingual_str>& warnings)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709329492",
      "id" : 709329492,
      "line" : 2752,
      "node_id" : "PRRC_kwDOABII584qR4JU",
      "original_commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "original_line" : 2752,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 47,
      "pull_request_review_id" : 755307256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-15T16:15:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709329492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709356532"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709356532"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the feedback! My approach overall is to progress from the bottom up. I find the way I did it here very conservative so that we are sure that nothing breaks. You are right that `m_args` can be used here, I wanted to do that later but if you find it better use `m_args` right away, then great.",
      "commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "created_at" : "2021-09-15T16:32:17Z",
      "diff_hunk" : "@@ -34,7 +34,7 @@ BOOST_AUTO_TEST_CASE(ismine_standard)\n \n     // P2PK compressed\n     {\n-        CWallet keystore(chain.get(), \"\", CreateDummyWalletDatabase());\n+        CWallet keystore(chain.get(), \"\", gArgs, CreateDummyWalletDatabase());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709356532",
      "id" : 709356532,
      "in_reply_to_id" : 709323884,
      "line" : 37,
      "node_id" : "PRRC_kwDOABII584qR-v0",
      "original_commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "original_line" : 37,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/ismine_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 755351318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-15T16:32:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709356532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709366609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709366609"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! Normally I'd agree with being incremental and conservative, but if it is important to do this transition away from gArgs I think it is also important to try to make transition painless as possible to reviewers, and to other PR authors working on conflicting PRs by avoiding changing the same code multiple times in multiple PRs.\r\n\r\nMaybe changing the same code in different PRs makes sense if one change is a bulk change and the second change is a manual change. But if two changes are both bulk changes, then splitting into conservative and non-conservative PRs just delays the inevitable non-conservative part of the change and prolongs the transition for no benefit. Also, these are changes to test code so there is basically no need to be conservative because it will be obvious if the tests are broken.",
      "commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "created_at" : "2021-09-15T16:45:24Z",
      "diff_hunk" : "@@ -34,7 +34,7 @@ BOOST_AUTO_TEST_CASE(ismine_standard)\n \n     // P2PK compressed\n     {\n-        CWallet keystore(chain.get(), \"\", CreateDummyWalletDatabase());\n+        CWallet keystore(chain.get(), \"\", gArgs, CreateDummyWalletDatabase());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709366609",
      "id" : 709366609,
      "in_reply_to_id" : 709323884,
      "line" : 37,
      "node_id" : "PRRC_kwDOABII584qSBNR",
      "original_commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "original_line" : 37,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/ismine_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 755364352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-15T16:45:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709366609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709371350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709371350"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In general it would be great to be to see a consolidated final PR with all the future changes in one place. Or if that is too much work, it would be good to have a roadmap describing what the future changes will be. At very least if a PR has changes that are known to be temporary, it would be good to identify which parts of the PR are temporary, and which parts are permanent in the PR description.",
      "commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "created_at" : "2021-09-15T16:51:34Z",
      "diff_hunk" : "@@ -34,7 +34,7 @@ BOOST_AUTO_TEST_CASE(ismine_standard)\n \n     // P2PK compressed\n     {\n-        CWallet keystore(chain.get(), \"\", CreateDummyWalletDatabase());\n+        CWallet keystore(chain.get(), \"\", gArgs, CreateDummyWalletDatabase());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#discussion_r709371350",
      "id" : 709371350,
      "in_reply_to_id" : 709323884,
      "line" : 37,
      "node_id" : "PRRC_kwDOABII584qSCXW",
      "original_commit_id" : "d7b904551b4ee337a5b02ebddb1d27fd86d21a8f",
      "original_line" : 37,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/ismine_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 755370262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22928",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-15T16:51:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709371350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also it would be good if PR description linked to issue #21005 as the true motivation for this PR, instead of saying that I suggested this. I think the current description which says the PR \"follows the suggestion by ryanofsky\" is a misleading, even though it is technically true, because I don't have any opinion on whether `gArgs` should be removed from wallet code, and I didn't suggest doing that. My suggestions have only been about how to pass `ArgsManager` references if you did decide it was important to get rid of `gArgs`.\r\n\r\nSorry for putting words to your mouth ð ",
      "created_at" : "2021-09-15T18:33:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22928#issuecomment-920276140",
      "id" : 920276140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22928",
      "node_id" : "IC_kwDOABII58422kys",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T18:33:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920276140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   }
]
