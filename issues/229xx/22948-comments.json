[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706516144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706516144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this check is actually probably superfluous with the iteration not including combos -1 (the all bits set).",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-10T23:21:03Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706516144",
      "id" : 706516144,
      "line" : 200,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxNjE0NA==",
      "original_commit_id" : "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "original_line" : 200,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 29,
      "pull_request_review_id" : 751852066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-10T23:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706516144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706518296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706518296"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "update: it's not, because of the TrimFlags",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-10T23:30:25Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706518296",
      "id" : 706518296,
      "in_reply_to_id" : 706516144,
      "line" : 200,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxODI5Ng==",
      "original_commit_id" : "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "original_line" : 200,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 29,
      "pull_request_review_id" : 751854312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-10T23:30:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706518296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If anyone doesn't like the submask code, I could swap it for this algorithm (which is more efficient but not-obvious)  https://cp-algorithms.com/algebra/all-submasks.html#toc-tgt-0",
      "created_at" : "2021-09-11T14:53:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917420245",
      "id" : 917420245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22948",
      "node_id" : "IC_kwDOABII5842rrjV",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-11T14:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917420245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706728574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706728574"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you might be missing a `* 8` here",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-12T01:59:39Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706728574",
      "id" : 706728574,
      "line" : 178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyODU3NA==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 178,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 5,
      "pull_request_review_id" : 752061278,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T02:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706728574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/667132?v=4",
         "events_url" : "https://api.github.com/users/esneider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esneider/followers",
         "following_url" : "https://api.github.com/users/esneider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esneider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esneider",
         "id" : 667132,
         "login" : "esneider",
         "node_id" : "MDQ6VXNlcjY2NzEzMg==",
         "organizations_url" : "https://api.github.com/users/esneider/orgs",
         "received_events_url" : "https://api.github.com/users/esneider/received_events",
         "repos_url" : "https://api.github.com/users/esneider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esneider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esneider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esneider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706729262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706729262"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The doc is out of date now",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-12T02:08:10Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706729262",
      "id" : 706729262,
      "line" : 174,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjcyOTI2Mg==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 174,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 1,
      "pull_request_review_id" : 752061278,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T02:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706729262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/667132?v=4",
         "events_url" : "https://api.github.com/users/esneider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esneider/followers",
         "following_url" : "https://api.github.com/users/esneider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esneider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esneider",
         "id" : 667132,
         "login" : "esneider",
         "node_id" : "MDQ6VXNlcjY2NzEzMg==",
         "organizations_url" : "https://api.github.com/users/esneider/orgs",
         "received_events_url" : "https://api.github.com/users/esneider/received_events",
         "repos_url" : "https://api.github.com/users/esneider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esneider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esneider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esneider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706730907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706730907"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Notice that `TrimFlags` only removes flags, so it is, indeed, superfluous:\r\n`flags_excluding_one â excluded_flags â flags`\r\n\r\nHaving said that, there's no harm in leaving it here.",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-12T02:28:46Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        auto flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const auto combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const auto& excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706730907",
      "id" : 706730907,
      "in_reply_to_id" : 706516144,
      "line" : 200,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjczMDkwNw==",
      "original_commit_id" : "125fb1c8dce51b1992cee6aa2c5b6faa6bd97b1d",
      "original_line" : 200,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 29,
      "pull_request_review_id" : 752061278,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T02:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706730907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/667132?v=4",
         "events_url" : "https://api.github.com/users/esneider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esneider/followers",
         "following_url" : "https://api.github.com/users/esneider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esneider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esneider",
         "id" : 667132,
         "login" : "esneider",
         "node_id" : "MDQ6VXNlcjY2NzEzMg==",
         "organizations_url" : "https://api.github.com/users/esneider/orgs",
         "received_events_url" : "https://api.github.com/users/esneider/received_events",
         "repos_url" : "https://api.github.com/users/esneider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esneider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esneider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esneider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706731875"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706731875"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not sure if this is a problem, but notice that `TrimFlags` might cause the resulting `flag_combos` to have duplicate elements.\r\n\r\nEg, if `SCRIPT_VERIFY_P2SH` and `SCRIPT_VERIFY_WITNESS` are set in `flags`, the mapping done by `TrimFlags` will make 25% of the resulting elements duplicates.",
      "commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "created_at" : "2021-09-12T02:40:41Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const unsigned int excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {\n             flags_combos.insert(flags_excluding_one);\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706731875",
      "id" : 706731875,
      "line" : 202,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjczMTg3NQ==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 202,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 31,
      "pull_request_review_id" : 752061278,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T02:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706731875",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/667132?v=4",
         "events_url" : "https://api.github.com/users/esneider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esneider/followers",
         "following_url" : "https://api.github.com/users/esneider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esneider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esneider",
         "id" : 667132,
         "login" : "esneider",
         "node_id" : "MDQ6VXNlcjY2NzEzMg==",
         "organizations_url" : "https://api.github.com/users/esneider/orgs",
         "received_events_url" : "https://api.github.com/users/esneider/received_events",
         "repos_url" : "https://api.github.com/users/esneider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esneider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esneider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esneider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706767923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706767923"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ð¤¦ --> will fix",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T06:06:59Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706767923",
      "id" : 706767923,
      "in_reply_to_id" : 706728574,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2NzkyMw==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 178,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 752095910,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T06:06:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706767923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768096"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yeah I could do a de-dup pass with TrimFlags. It makes more sense IMO to keep TrimFlags even if superfluos with the above as TrimFlags is a separate validity of flag combo check v.s. the dumb subset generator.",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T06:08:35Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.\n std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int);\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n+        }\n+    }\n+\n     std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n+    for (const unsigned int excluded_flags : all_flag_combos) {\n+        const unsigned int flags_excluding_one = TrimFlags(excluded_flags);\n         if (flags != flags_excluding_one) {\n             flags_combos.insert(flags_excluding_one);\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768096",
      "id" : 706768096,
      "in_reply_to_id" : 706731875,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2ODA5Ng==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 202,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 752096007,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T06:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768676"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "i can't tell what line you are commenting on",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T06:13:53Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706768676",
      "id" : 706768676,
      "in_reply_to_id" : 706729262,
      "line" : 173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc2ODY3Ng==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 173,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 9,
      "pull_request_review_id" : 752096376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T06:13:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706768676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706770414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706770414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, sorry about that.\r\n```c\r\n// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\r\n// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\r\n// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\r\n```",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T06:30:55Z",
      "diff_hunk" : "@@ -174,9 +174,29 @@ unsigned int FillFlags(unsigned int flags)\n // Assumes that mapFlagNames contains all script verify flags.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706770414",
      "id" : 706770414,
      "in_reply_to_id" : 706729262,
      "line" : 173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjc3MDQxNA==",
      "original_commit_id" : "7812cff7c3cd90235c4d8d7a74901d81ac239128",
      "original_line" : 173,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 9,
      "pull_request_review_id" : 752097399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T06:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706770414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/667132?v=4",
         "events_url" : "https://api.github.com/users/esneider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esneider/followers",
         "following_url" : "https://api.github.com/users/esneider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esneider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esneider",
         "id" : 667132,
         "login" : "esneider",
         "node_id" : "MDQ6VXNlcjY2NzEzMg==",
         "organizations_url" : "https://api.github.com/users/esneider/orgs",
         "received_events_url" : "https://api.github.com/users/esneider/received_events",
         "repos_url" : "https://api.github.com/users/esneider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esneider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esneider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esneider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706849538"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706849538"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, clang-format\r\n```diff\r\n@@ -174,7 +174,7 @@ unsigned int FillFlags(unsigned int flags)\r\n std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\r\n {\r\n     std::vector<unsigned int> set_flags;\r\n-    const size_t n_flags = sizeof(unsigned int)*8;\r\n+    const size_t n_flags = sizeof(unsigned int) * 8;\r\n     set_flags.reserve(n_flags);\r\n@@ -184,10 +184,10 @@ std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\r\n     }\r\n     const size_t combos = 1 << set_flags.size();\r\n     // skip last all set flags\r\n-    std::vector<unsigned int> all_flag_combos(combos-1);\r\n-    for (size_t i = 0; i < combos-1; ++i){\r\n-        for(size_t j = 0; j < set_flags.size(); ++j) {\r\n-            if (i & (1<<j)) {\r\n+    std::vector<unsigned int> all_flag_combos(combos - 1);\r\n+    for (size_t i = 0; i < combos - 1; ++i) {\r\n+        for (size_t j = 0; j < set_flags.size(); ++j) {\r\n+            if (i & (1 << j)) {\r\n                 all_flag_combos[i] |= set_flags[j];\r\n```\r\n",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T14:53:17Z",
      "diff_hunk" : "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){\n+        for(size_t j = 0; j < set_flags.size(); ++j) {\n+            if (i & (1<<j)) {\n+                all_flag_combos[i] |= set_flags[j];\n+            }\n         }\n     }\n+\n+    std::set<unsigned int> flags_combos;\n+    for (const unsigned int submask : all_flag_combos) {\n+        flags_combos.insert(TrimFlags(submask));\n+    }\n+    flags_combos.erase(flags);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706849538",
      "id" : 706849538,
      "line" : 200,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg0OTUzOA==",
      "original_commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "original_line" : 200,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 42,
      "pull_request_review_id" : 752167645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T15:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706849538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850182"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850182"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, can use braced initialization on these for type safety\r\n```diff\r\n-    const size_t n_flags = sizeof(unsigned int)*8;\r\n+    const size_t n_flags{sizeof(unsigned int) * 8};\r\n     set_flags.reserve(n_flags);\r\n     for (size_t i = 0; i < n_flags; ++i) {\r\n-        const unsigned int flag = flags & (1 << i);\r\n+        const unsigned int flag{flags & (1 << i)};\r\n```\r\n",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T14:58:26Z",
      "diff_hunk" : "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850182",
      "id" : 706850182,
      "line" : 180,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg1MDE4Mg==",
      "original_commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "original_line" : 180,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 22,
      "pull_request_review_id" : 752167645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T15:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850718"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe hoist subtracting one to the declaration of `combos`\r\n```diff\r\n-    const size_t combos = 1 << set_flags.size();\r\n+    const size_t combos = (1 << set_flags.size()) - 1;\r\n     // skip last all set flags\r\n-    std::vector<unsigned int> all_flag_combos(combos-1);\r\n-    for (size_t i = 0; i < combos-1; ++i){\r\n+    std::vector<unsigned int> all_flag_combos(combos);\r\n+    for (size_t i = 0; i < combos; ++i) {\r\n```\r\n",
      "commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "created_at" : "2021-09-12T15:02:30Z",
      "diff_hunk" : "@@ -168,19 +168,36 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n-// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n-// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Exclude each possible script verify flag from flags. Returns a set of all\n+// submasks.\n // Assumes that mapFlagNames contains all script verify flags.\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+std::set<unsigned int> GenerateAllSubMasks(unsigned int flags)\n {\n-    std::set<unsigned int> flags_combos;\n-    for (const auto& pair : mapFlagNames) {\n-        const unsigned int flags_excluding_one = TrimFlags(flags & ~(pair.second));\n-        if (flags != flags_excluding_one) {\n-            flags_combos.insert(flags_excluding_one);\n+    std::vector<unsigned int> set_flags;\n+    const size_t n_flags = sizeof(unsigned int)*8;\n+    set_flags.reserve(n_flags);\n+    for (size_t i = 0; i < n_flags; ++i) {\n+        const unsigned int flag = flags & (1 << i);\n+        if (flag) {\n+            set_flags.push_back(flag);\n+        }\n+    }\n+    const size_t combos = 1 << set_flags.size();\n+    // skip last all set flags\n+    std::vector<unsigned int> all_flag_combos(combos-1);\n+    for (size_t i = 0; i < combos-1; ++i){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#discussion_r706850718",
      "id" : 706850718,
      "line" : 188,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjg1MDcxOA==",
      "original_commit_id" : "885bf41580c7a7043cc3445179c76aec3dca38c6",
      "original_line" : 188,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/test/transaction_tests.cpp",
      "position" : 30,
      "pull_request_review_id" : 752167645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22948",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-12T15:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706850718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22954](https://github.com/bitcoin/bitcoin/pull/22954) ([TESTS] Allow tx_invalid.json tests to include flag rules for if_unset: [A,B,C] then_unset: [D] by JeremyRubin)\n* [#22876](https://github.com/bitcoin/bitcoin/pull/22876) ([TESTS] Update Transaction Tests to permit setting a flag as always on and disabling the exhaustive failure test by JeremyRubin)\n* [#21702](https://github.com/bitcoin/bitcoin/pull/21702) (Implement BIP-119 Validation (CheckTemplateVerify) by JeremyRubin)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-12T15:40:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917659491",
      "id" : 917659491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22948",
      "node_id" : "IC_kwDOABII5842sl9j",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-12T15:40:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917659491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I added the textbook algorithm for this: feel free to test that the output is the same then I can squash.",
      "created_at" : "2021-09-12T19:06:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22948#issuecomment-917692386",
      "id" : 917692386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22948",
      "node_id" : "IC_kwDOABII5842st_i",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-12T19:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917692386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   }
]
