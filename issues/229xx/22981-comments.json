[
   {
      "author_association" : "MEMBER",
      "body" : "Setup clang-tidy:\r\n\r\n```\r\napt install clang-tidy bear clang\r\n./autogen.sh && ./configure --with-incompatible-bdb CC=clang CXX=clang++\r\nmake clean && bear make -j $(nproc)     # For bear 2.x\r\nmake clean && bear -- make -j $(nproc)  # For bear 3.x\r\n```\r\n\r\nFull test:\r\n\r\n```\r\n( cd ./src/ && run-clang-tidy  -j $(nproc) )\r\n```\r\n\r\nDiff test:\r\n```\r\ngit diff | ( cd ./src/ && clang-tidy-diff -p2 -j $(nproc) )",
      "created_at" : "2021-09-15T12:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#issuecomment-919971778",
      "id" : 919971778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22981",
      "node_id" : "IC_kwDOABII58421afC",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T12:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/919971778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, being able to check these automatically with a tool is a good idea.",
      "created_at" : "2021-09-15T18:36:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#issuecomment-920277921",
      "id" : 920277921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22981",
      "node_id" : "IC_kwDOABII58422lOh",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T18:36:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920277921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22918](https://github.com/bitcoin/bitcoin/pull/22918) (rpc: Add level 3 verbosity to getblock RPC call (#21245 modified) by kiminuo)\n* [#22793](https://github.com/bitcoin/bitcoin/pull/22793) (Simplify BaseSignatureChecker virtual functions and GenericTransactionSignatureChecker constructors by achow101)\n* [#22564](https://github.com/bitcoin/bitcoin/pull/22564) ([WIP] refactor: Move mutable globals cleared in `::UnloadBlockIndex` to `BlockManager` by dongcarl)\n* [#22290](https://github.com/bitcoin/bitcoin/pull/22290) (Package Mempool Submission with Package Fee-Bumping by glozow)\n* [#21206](https://github.com/bitcoin/bitcoin/pull/21206) (refactor: Make CWalletTx sync state type-safe by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-15T21:56:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#issuecomment-920410437",
      "id" : 920410437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22981",
      "node_id" : "IC_kwDOABII58423FlF",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T21:56:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920410437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22981#discussion_r709731245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709731245"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        setenv(\"QT_QPA_PLATFORM\", \"minimal\", /* overwrite */0);\r\n```\r\n\r\nI assume this isn't updated to `/*overwrite=*/` because that will fail the check:\r\n```bash\r\n/bitcoin/src/qt/test/test_main.cpp:73:46: error: argument name 'overwrite' in comment does not match parameter name '__replace' [bugprone-argument-comment,-warnings-as-errors]\r\n        setenv(\"QT_QPA_PLATFORM\", \"minimal\", /*overwrite=*/0);\r\n                                             ^\r\n/usr/include/stdlib.h:653:65: note: '__replace' declared here\r\nextern int setenv (const char *__name, const char *__value, int __replace)\r\n```\r\n\r\nIf that's the case, why move the argument to before the comment, `clang-tidy` still works when it's trailing.",
      "commit_id" : "fab6b32322d8be844f9b50b700bb05e9b9e41e84",
      "created_at" : "2021-09-16T03:53:01Z",
      "diff_hunk" : "@@ -70,7 +70,7 @@ int main(int argc, char* argv[])\n     #if defined(WIN32)\n         if (getenv(\"QT_QPA_PLATFORM\") == nullptr) _putenv_s(\"QT_QPA_PLATFORM\", \"minimal\");\n     #else\n-        setenv(\"QT_QPA_PLATFORM\", \"minimal\", /* overwrite */ 0);\n+        setenv(\"QT_QPA_PLATFORM\", \"minimal\", 0 /* overwrite */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#discussion_r709731245",
      "id" : 709731245,
      "line" : 73,
      "node_id" : "PRRC_kwDOABII584qTaOt",
      "original_commit_id" : "fab6b32322d8be844f9b50b700bb05e9b9e41e84",
      "original_line" : 73,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/test/test_main.cpp",
      "position" : 5,
      "pull_request_review_id" : 755806056,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22981",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-16T04:03:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709731245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22981#discussion_r709823031"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22981"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709823031"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think for consistency named args that are not enforced should be trailing. If it was kept in the beginning, it could confuse devs and trick them into adding an `=`, which again would fail clang-tidy. See also the comment in `src/test/fuzz/tx_pool.cpp`, which I moved to the end.",
      "commit_id" : "fab6b32322d8be844f9b50b700bb05e9b9e41e84",
      "created_at" : "2021-09-16T06:42:45Z",
      "diff_hunk" : "@@ -70,7 +70,7 @@ int main(int argc, char* argv[])\n     #if defined(WIN32)\n         if (getenv(\"QT_QPA_PLATFORM\") == nullptr) _putenv_s(\"QT_QPA_PLATFORM\", \"minimal\");\n     #else\n-        setenv(\"QT_QPA_PLATFORM\", \"minimal\", /* overwrite */ 0);\n+        setenv(\"QT_QPA_PLATFORM\", \"minimal\", 0 /* overwrite */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#discussion_r709823031",
      "id" : 709823031,
      "in_reply_to_id" : 709731245,
      "line" : 73,
      "node_id" : "PRRC_kwDOABII584qTwo3",
      "original_commit_id" : "fab6b32322d8be844f9b50b700bb05e9b9e41e84",
      "original_line" : 73,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/qt/test/test_main.cpp",
      "position" : 5,
      "pull_request_review_id" : 755912052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22981",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-16T06:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709823031",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> we should be integrating this into the CI at some point soon.\r\n\r\nHappy to review a pull doing this. Though, I think it is also acceptable to run it only once before every major release.",
      "created_at" : "2021-09-16T06:43:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22981#issuecomment-920622887",
      "id" : 920622887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22981",
      "node_id" : "IC_kwDOABII584235cn",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-16T06:43:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920622887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
