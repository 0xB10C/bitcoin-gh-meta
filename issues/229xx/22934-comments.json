[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22646](https://github.com/bitcoin/bitcoin/pull/22646) ([POC] Tighter Univalue integration, remove `--with-system-univalue` by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-10T09:48:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#issuecomment-916778111",
      "id" : 916778111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22934",
      "node_id" : "IC_kwDOABII5842pOx_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-10T09:48:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916778111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-09-13T17:42:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#issuecomment-918424840",
      "id" : 918424840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22934",
      "node_id" : "IC_kwDOABII5842vg0I",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-13T17:42:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/918424840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r707554273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707554273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For API safeness it's probably better to clear the output `sig` if ret is `false`.",
      "commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "created_at" : "2021-09-13T17:48:20Z",
      "diff_hunk" : "@@ -275,6 +275,13 @@ bool CKey::SignSchnorr(const uint256& hash, Span<unsigned char> sig, const uint2\n         if (!secp256k1_keypair_xonly_tweak_add(GetVerifyContext(), &keypair, tweak.data())) return false;\n     }\n     bool ret = secp256k1_schnorrsig_sign(secp256k1_context_sign, sig.data(), hash.data(), &keypair, aux ? (unsigned char*)aux->data() : nullptr);\n+#ifdef ENABLE_SCHNORR_VERIFY\n+    if(ret){\n+        secp256k1_xonly_pubkey pubkey_verify;\n+        ret = secp256k1_keypair_xonly_pub(GetVerifyContext(), &pubkey_verify, nullptr, &keypair);\n+        ret &= secp256k1_schnorrsig_verify(GetVerifyContext(), sig.data(), hash.begin(), 32, &pubkey_verify);\n+    }\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r707554273",
      "id" : 707554273,
      "line" : 284,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNzU1NDI3Mw==",
      "original_commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "original_line" : 284,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/key.cpp",
      "position" : 10,
      "pull_request_review_id" : 753047125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-13T17:49:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707554273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r707554485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707554485"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Style nit: spaces before and after `(ret)`.",
      "commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "created_at" : "2021-09-13T17:48:38Z",
      "diff_hunk" : "@@ -275,6 +275,13 @@ bool CKey::SignSchnorr(const uint256& hash, Span<unsigned char> sig, const uint2\n         if (!secp256k1_keypair_xonly_tweak_add(GetVerifyContext(), &keypair, tweak.data())) return false;\n     }\n     bool ret = secp256k1_schnorrsig_sign(secp256k1_context_sign, sig.data(), hash.data(), &keypair, aux ? (unsigned char*)aux->data() : nullptr);\n+#ifdef ENABLE_SCHNORR_VERIFY\n+    if(ret){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r707554485",
      "id" : 707554485,
      "line" : 279,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNzU1NDQ4NQ==",
      "original_commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "original_line" : 279,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/key.cpp",
      "position" : 5,
      "pull_request_review_id" : 753047125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-13T17:49:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/707554485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r708316250"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708316250"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "resolved, thanks",
      "commit_id" : "c660374a37f4a83a774db55e15e4e67d1d33ef3c",
      "created_at" : "2021-09-14T14:15:18Z",
      "diff_hunk" : "@@ -275,6 +275,13 @@ bool CKey::SignSchnorr(const uint256& hash, Span<unsigned char> sig, const uint2\n         if (!secp256k1_keypair_xonly_tweak_add(GetVerifyContext(), &keypair, tweak.data())) return false;\n     }\n     bool ret = secp256k1_schnorrsig_sign(secp256k1_context_sign, sig.data(), hash.data(), &keypair, aux ? (unsigned char*)aux->data() : nullptr);\n+#ifdef ENABLE_SCHNORR_VERIFY\n+    if(ret){",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r708316250",
      "id" : 708316250,
      "in_reply_to_id" : 707554485,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584qOAxa",
      "original_commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "original_line" : 279,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/key.cpp",
      "position" : null,
      "pull_request_review_id" : 754010138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-14T14:15:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708316250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/35263201?v=4",
         "events_url" : "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amadeuszpawlik/followers",
         "following_url" : "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amadeuszpawlik",
         "id" : 35263201,
         "login" : "amadeuszpawlik",
         "node_id" : "MDQ6VXNlcjM1MjYzMjAx",
         "organizations_url" : "https://api.github.com/users/amadeuszpawlik/orgs",
         "received_events_url" : "https://api.github.com/users/amadeuszpawlik/received_events",
         "repos_url" : "https://api.github.com/users/amadeuszpawlik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amadeuszpawlik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amadeuszpawlik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r708318159"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708318159"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Like [this](https://github.com/bitcoin/bitcoin/pull/22934/commits/c660374a37f4a83a774db55e15e4e67d1d33ef3c)?",
      "commit_id" : "c660374a37f4a83a774db55e15e4e67d1d33ef3c",
      "created_at" : "2021-09-14T14:17:08Z",
      "diff_hunk" : "@@ -275,6 +275,13 @@ bool CKey::SignSchnorr(const uint256& hash, Span<unsigned char> sig, const uint2\n         if (!secp256k1_keypair_xonly_tweak_add(GetVerifyContext(), &keypair, tweak.data())) return false;\n     }\n     bool ret = secp256k1_schnorrsig_sign(secp256k1_context_sign, sig.data(), hash.data(), &keypair, aux ? (unsigned char*)aux->data() : nullptr);\n+#ifdef ENABLE_SCHNORR_VERIFY\n+    if(ret){\n+        secp256k1_xonly_pubkey pubkey_verify;\n+        ret = secp256k1_keypair_xonly_pub(GetVerifyContext(), &pubkey_verify, nullptr, &keypair);\n+        ret &= secp256k1_schnorrsig_verify(GetVerifyContext(), sig.data(), hash.begin(), 32, &pubkey_verify);\n+    }\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#discussion_r708318159",
      "id" : 708318159,
      "in_reply_to_id" : 707554273,
      "line" : 284,
      "node_id" : "PRRC_kwDOABII584qOBPP",
      "original_commit_id" : "b16428cd7996037065c23c20ae7a7df7524a722a",
      "original_line" : 284,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/key.cpp",
      "position" : 10,
      "pull_request_review_id" : 754012657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22934",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-14T14:17:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/708318159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/35263201?v=4",
         "events_url" : "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amadeuszpawlik/followers",
         "following_url" : "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amadeuszpawlik",
         "id" : 35263201,
         "login" : "amadeuszpawlik",
         "node_id" : "MDQ6VXNlcjM1MjYzMjAx",
         "organizations_url" : "https://api.github.com/users/amadeuszpawlik/orgs",
         "received_events_url" : "https://api.github.com/users/amadeuszpawlik/received_events",
         "repos_url" : "https://api.github.com/users/amadeuszpawlik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amadeuszpawlik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amadeuszpawlik"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "As per @sipa's suggestion, I added verification step to ECDSA signing functions too.\r\nChanged the disable flag name to reflect that.",
      "created_at" : "2021-09-15T15:04:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#issuecomment-920102752",
      "id" : 920102752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22934",
      "node_id" : "IC_kwDOABII584216dg",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-15T15:04:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920102752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/35263201?v=4",
         "events_url" : "https://api.github.com/users/amadeuszpawlik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amadeuszpawlik/followers",
         "following_url" : "https://api.github.com/users/amadeuszpawlik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amadeuszpawlik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amadeuszpawlik",
         "id" : 35263201,
         "login" : "amadeuszpawlik",
         "node_id" : "MDQ6VXNlcjM1MjYzMjAx",
         "organizations_url" : "https://api.github.com/users/amadeuszpawlik/orgs",
         "received_events_url" : "https://api.github.com/users/amadeuszpawlik/received_events",
         "repos_url" : "https://api.github.com/users/amadeuszpawlik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amadeuszpawlik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amadeuszpawlik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amadeuszpawlik"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Please squash your commits\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "created_at" : "2021-09-16T15:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22934#issuecomment-920989594",
      "id" : 920989594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22934",
      "node_id" : "IC_kwDOABII58425S-a",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-16T15:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/920989594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   }
]
