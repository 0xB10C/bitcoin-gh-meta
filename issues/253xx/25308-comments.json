[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25527](https://github.com/bitcoin/bitcoin/pull/25527) ([kernel 3c/n] Decouple validation cache initialization from `ArgsManager` by dongcarl)\n* [#25499](https://github.com/bitcoin/bitcoin/pull/25499) (Use steady clock for all millis bench logging by MarcoFalke)\n* [#25466](https://github.com/bitcoin/bitcoin/pull/25466) (ci: add unused-using-decls to clang-tidy by fanquake)\n* [#24232](https://github.com/bitcoin/bitcoin/pull/24232) (assumeutxo: add init and completion logic by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-06-08T15:00:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1150036779",
      "id" : 1150036779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585EjCsr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150036779/reactions"
      },
      "updated_at" : "2022-07-02T01:27:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150036779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in the last commit. Maybe have this file checked by iwyu?\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/25065#discussion_r890170373",
      "commit_id" : "3981f5e7c090959b98a7fa0b9e92b52c36e60e96",
      "created_at" : "2022-06-08T15:06:42Z",
      "diff_hunk" : "@@ -7,21 +7,22 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713",
      "id" : 892505713,
      "line" : 10,
      "node_id" : "PRRC_kwDOABII5841Mo5x",
      "original_commit_id" : "5ceae5c40400037669e06fb759b7698e92d2b254",
      "original_line" : 10,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 4,
      "pull_request_review_id" : 999942048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-08T15:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892505713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892611428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892505713\r\n\r\n> nit in the last commit. Maybe have this file checked by iwyu?\r\n\r\nSure, done in new commit",
      "commit_id" : "3981f5e7c090959b98a7fa0b9e92b52c36e60e96",
      "created_at" : "2022-06-08T16:41:12Z",
      "diff_hunk" : "@@ -7,21 +7,22 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r892611428",
      "id" : 892611428,
      "in_reply_to_id" : 892505713,
      "line" : 10,
      "node_id" : "PRRC_kwDOABII5841NCtk",
      "original_commit_id" : "5ceae5c40400037669e06fb759b7698e92d2b254",
      "original_line" : 10,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 4,
      "pull_request_review_id" : 1000103150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-08T16:42:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/892611428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK! Code looks shorter and more readable.",
      "created_at" : "2022-06-08T18:12:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1150236792",
      "id" : 1150236792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585Ejzh4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150236792/reactions"
      },
      "updated_at" : "2022-06-08T18:12:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1150236792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-14T11:01:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1155033936",
      "id" : 1155033936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585E2GtQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033936/reactions"
      },
      "updated_at" : "2022-06-14T11:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1155033936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I really want to avoid reintroducing stringy error returns and coupling with `util/translation` if at all possible, why do you prefer error strings?",
      "created_at" : "2022-06-16T17:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1157967764",
      "id" : 1157967764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585FBS-U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157967764/reactions"
      },
      "updated_at" : "2022-06-16T17:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1157967764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I really want to avoid reintroducing stringy error returns and coupling with `util/translation` if at all possible, why do you prefer error strings?\r\n\r\nFrom most important to least important reasons:\r\n\r\n- Better user experience. Users can see complete information about an error instead of an error code with no context (flashback to https://en.wikipedia.org/wiki/Blue_screen_of_death#/media/File:Windows_9X_BSOD.png)\r\n- Better developer experience. Developers can call an API and have maybe 3-4 cases they need to handle, not 11 cases they need to decide what to do about.\r\n- Better separation of concerns and encapsulation. The too-narrow error codes that were here exposed implementation details of low level code to high level code\r\n- Maintainability. Getting rid of these error codes saves many lines of code. It makes code clearer, because putting error messages at error sites puts the error descriptions at the error site, not in some separate place. Putting error strings at error sites avoids possibilities of error codes getting mismapped or falling through unhandled (things we have no test coverage for, would be unlikely to be detected in manual testing, and could become broken at any time)\r\n- API compatibility. Related to the previous point about encapsulation, it's nice to use an API that doesn't break compatibility every time an internal implementation detail is changed, and some new error case is added, or an old one is removed\r\n\r\nError codes can be great. Error strings can be great. Right tool for the job.\r\n\r\n---\r\n\r\nRebased 3981f5e7c090959b98a7fa0b9e92b52c36e60e96 -> f3ec82fc466b247e9ed6b329554e6938799fadb5 ([`pr/retcode.4`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.4) -> [`pr/retcode.5`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.4-rebase..pr/retcode.5)) due to conflict with #25306",
      "created_at" : "2022-06-16T18:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1158012441",
      "id" : 1158012441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585FBd4Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1158012441/reactions"
      },
      "updated_at" : "2022-06-16T18:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1158012441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could we just use `std::string` here? I don't want to introduce further coupling with translation.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:34:04Z",
      "diff_hunk" : "@@ -7,21 +7,24 @@\n #include <key.h>\n #include <random.h>\n #include <util/time.h>\n+#include <util/translation.h>\n+\n+#include <memory>\n \n namespace kernel {\n \n-std::optional<SanityCheckError> SanityChecks(const Context&)\n+std::optional<bilingual_str> SanityChecks(const Context&)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817356",
      "id" : 907817356,
      "line" : 16,
      "node_id" : "PRRC_kwDOABII5842HDGM",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 16,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/kernel/checks.cpp",
      "position" : 11,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could we just use `std::string` here? I don't want to introduce further coupling with translation.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:34:18Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907817504",
      "id" : 907817504,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5842HDIg",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 44,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907817504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907818166"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    options.coins_error_cb = [] { return false; };\r\n```",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:35:21Z",
      "diff_hunk" : "@@ -83,27 +84,19 @@ int main(int argc, char* argv[])\n     };\n     ChainstateManager chainman{chainman_opts};\n \n-    auto rv = node::LoadChainstate(false,\n-                                   std::ref(chainman),\n-                                   nullptr,\n-                                   false,\n-                                   false,\n-                                   2 << 20,\n-                                   2 << 22,\n-                                   (450 << 20) - (2 << 20) - (2 << 22),\n-                                   false,\n-                                   false,\n-                                   []() { return false; });\n-    if (rv.has_value()) {\n+    node::CacheSizes cache_sizes;\n+    cache_sizes.block_tree_db = 2 << 20;\n+    cache_sizes.coins_db = 2 << 22;\n+    cache_sizes.coins =  (450 << 20) - (2 << 20) - (2 << 22);\n+    node::InitOptions options;\n+    options.coins_error_cb=[] { return false; };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907818166",
      "id" : 907818166,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII5842HDS2",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 92,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 29,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907818166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907819347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps we can add some Doxygen comments hinting callers on how they should behave when encountering each case.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:37:27Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907819347",
      "id" : 907819347,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5842HDlT",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 38,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 41,
      "pull_request_review_id" : 1020809374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:39:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907819347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907822463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Perhaps rename to `LoadChainstateResult` so that it's clearer it's specifically about `LoadChainstate` and not all of init? Not a big deal either way.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-27T21:42:16Z",
      "diff_hunk" : "@@ -16,19 +18,28 @@ struct Params;\n } // namespace Consensus\n \n namespace node {\n-enum class ChainstateLoadingError {\n-    ERROR_LOADING_BLOCK_DB,\n-    ERROR_BAD_GENESIS_BLOCK,\n-    ERROR_PRUNED_NEEDS_REINDEX,\n-    ERROR_LOAD_GENESIS_BLOCK_FAILED,\n-    ERROR_CHAINSTATE_UPGRADE_FAILED,\n-    ERROR_REPLAYBLOCKS_FAILED,\n-    ERROR_LOADCHAINTIP_FAILED,\n-    ERROR_GENERIC_BLOCKDB_OPEN_FAILED,\n-    ERROR_BLOCKS_WITNESS_INSUFFICIENTLY_VALIDATED,\n-    SHUTDOWN_PROBED,\n+\n+struct CacheSizes;\n+\n+struct InitOptions\n+{\n+    CTxMemPool* mempool = nullptr;\n+    bool block_tree_db_in_memory = false;\n+    bool coins_db_in_memory = false;\n+    bool reindex = false;\n+    bool reindex_chainstate = false;\n+    bool prune = false;\n+    int64_t check_blocks = DEFAULT_CHECKBLOCKS;\n+    int64_t check_level = DEFAULT_CHECKLEVEL;\n+    std::function<bool()> check_interrupt;\n+    std::function<void()> coins_error_cb;\n };\n \n+enum class InitStatus { SUCCESS, FAILURE, FAILURE_INCOMPATIBLE_DB, INTERRUPTED };\n+\n+//! Status code and optional error string.\n+using InitResult = std::tuple<InitStatus, bilingual_str>;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r907822463",
      "id" : 907822463,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5842HEV_",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 41,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/chainstate.h",
      "position" : 44,
      "pull_request_review_id" : 1020816819,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T21:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907822463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r908250663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We want to use/are migrating to the C++ headers. I know IWYU suggests `<assert.h>` (have been meaning to make it suggest the newer headers), but it will be equally as happy with [`<cassert>`](https://en.cppreference.com/w/cpp/error/assert). Thanks for fixing these up in any case.",
      "commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "created_at" : "2022-06-28T09:21:08Z",
      "diff_hunk" : "@@ -4,16 +4,32 @@\n \n #include <kernel/coinstats.h>\n \n+#include <chain.h>\n #include <coins.h>\n #include <crypto/muhash.h>\n #include <hash.h>\n+#include <node/blockstorage.h>\n+#include <primitives/transaction.h>\n+#include <script/script.h>\n #include <serialize.h>\n+#include <span.h>\n+#include <streams.h>\n+#include <sync.h>\n+#include <tinyformat.h>\n #include <uint256.h>\n+#include <util/check.h>\n #include <util/overflow.h>\n #include <util/system.h>\n #include <validation.h>\n+#include <version.h>\n \n+#include <assert.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#discussion_r908250663",
      "id" : 908250663,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII5842Is4n",
      "original_commit_id" : "f3ec82fc466b247e9ed6b329554e6938799fadb5",
      "original_line" : 26,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/kernel/coinstats.cpp",
      "position" : 23,
      "pull_request_review_id" : 1021409265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25308",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-28T09:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/908250663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 7d97076cb7d4020110a830ae9fe4107f82511c41 -> 9ac9a11d4aa1c051c9d486657ff3021019e802e5 ([`pr/retcode.6`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.6) -> [`pr/retcode.7`](https://github.com/ryanofsky/bitcoin/commits/pr/retcode.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/retcode.6-rebase..pr/retcode.7)) due to conflict with #25290",
      "created_at" : "2022-07-05T21:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1175498816",
      "id" : 1175498816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25308",
      "node_id" : "IC_kwDOABII585GELBA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1175498816/reactions"
      },
      "updated_at" : "2022-07-05T21:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1175498816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
