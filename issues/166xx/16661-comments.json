[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16341](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16341.html) (Introduce ScriptPubKeyMan interface and use it for key and script management (aka wallet boxes) by achow101)\n* [#16224](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16224.html) (gui: Bilingual GUI error messages by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-08-19T21:48:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16661#issuecomment-522767234",
      "id" : 522767234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjc2NzIzNA==",
      "updated_at" : "2019-08-19T21:48:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522767234",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK -- very good find!\r\n\r\nThe problem was introduced in #15491 which was merged into `master` on March 18, 2019.\r\n\r\n@MarcoFalke While checking this PR I stumbled upon what seems to be another lifetime issue in `wallet.cpp` (introduced in #14941 which was merged into `master` on January 15, 2019):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/fa6431055abfacea4f72ef11d061c7c755de327a/src/wallet/wallet.cpp#L107-L111\r\n\r\n/cc @promag regarding the latter issue\r\n\r\nI guess we could make use of more static analysis to help us catch cases like this before merge :-)",
      "created_at" : "2019-08-19T21:52:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16661#issuecomment-522768643",
      "id" : 522768643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjc2ODY0Mw==",
      "updated_at" : "2019-08-19T22:01:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522768643",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift I think it would be better to open a new issue for the lifetime issue you mention. And either explain why it is a lifetime issue or even better, include a test case that fails on current master.",
      "created_at" : "2019-08-19T23:05:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16661#issuecomment-522787041",
      "id" : 522787041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjc4NzA0MQ==",
      "updated_at" : "2019-08-19T23:05:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522787041",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think it would be better to open a new issue for the lifetime issue you mention.\r\n\r\nI've now submitted #16668.\r\n\r\n> And either explain why it is a lifetime issue or even better, include a test case that fails on current master.\r\n\r\nConstructing a test case that fails on current `master` will be tricky since lifetime issues are typically not handled consistently across C++ compiler implementations (or even across optimisation levels for the same implementation), but explaining is easy:\r\n\r\nAfter `delete wallet;` the pointer is invalid and shouldn't be used like in the call `g_unloading_wallet_set.erase(wallet)` :-)\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/fa6431055abfacea4f72ef11d061c7c755de327a/src/wallet/wallet.cpp#L107-L111",
      "created_at" : "2019-08-20T10:28:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16661#issuecomment-522954202",
      "id" : 522954202,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjk1NDIwMg==",
      "updated_at" : "2019-08-20T10:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522954202",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
