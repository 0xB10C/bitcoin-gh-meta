[
   {
      "author_association" : "MEMBER",
      "body" : "Are you sure this is due to the stale tip detection? It looks more like a thread that does not join on shutdown",
      "created_at" : "2019-08-21T15:10:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16642#issuecomment-523500641",
      "id" : 523500641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16642",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUwMDY0MQ==",
      "updated_at" : "2019-08-21T15:10:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523500641",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "\nI have almost zero Bitcoin competence. I'm not sure in anything.\nWhat can I do next to investigate the problem? Why Bitcoin Core rejects all information of whole running period if was shut down not gracefully? ÑÑÐµÐ´Ð°, 21 Ð°Ð²Ð³ÑÑÑÐ° 2019Ð³., 18:13 +03:00 Ð¾Ñ MarcoFalke  notifications@github.com :\n\n>Are you sure this is due to the stale tip detection? It looks more like a thread that does not join on shutdown\n>â\n>You are receiving this because you authored the thread.\n>Reply to this email directly,  view it on GitHub , or  mute the thread .",
      "created_at" : "2019-08-21T15:18:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16642#issuecomment-523504568",
      "id" : 523504568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16642",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUwNDU2OA==",
      "updated_at" : "2019-08-21T15:18:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523504568",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/54221205?v=4",
         "events_url" : "https://api.github.com/users/Nikolay-Po/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nikolay-Po/followers",
         "following_url" : "https://api.github.com/users/Nikolay-Po/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nikolay-Po/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nikolay-Po",
         "id" : 54221205,
         "login" : "Nikolay-Po",
         "node_id" : "MDQ6VXNlcjU0MjIxMjA1",
         "organizations_url" : "https://api.github.com/users/Nikolay-Po/orgs",
         "received_events_url" : "https://api.github.com/users/Nikolay-Po/received_events",
         "repos_url" : "https://api.github.com/users/Nikolay-Po/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nikolay-Po/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nikolay-Po/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nikolay-Po"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Based on the debug.log, it is stuck in this line (or any later line):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2472733a24a9364e4c6233ccd04166a26a68cc65/src/init.cpp#L221-L304\r\n\r\nThe `Flushed 66639 addresses to peers.dat` (happens inside of `CConnman::Stop`).\r\n\r\nIf you feel comfortable debugging this yourself, you can do that (for example) by adding log statements to the shutdown function. So maybe add `LogPrintf(\"%s: Passed %s\\n\", __func__, __LINE__);` in every other line after line `if (g_connman) g_connman->Stop();` and the next time this happens, at least you will see which line caused the deadlock.\r\n",
      "created_at" : "2019-08-21T16:19:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16642#issuecomment-523533374",
      "id" : 523533374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16642",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUzMzM3NA==",
      "updated_at" : "2019-08-21T16:19:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523533374",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
