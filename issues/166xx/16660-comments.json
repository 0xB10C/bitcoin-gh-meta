[
   {
      "author_association" : "MEMBER",
      "body" : "Closing as duplicate of #14210",
      "created_at" : "2019-08-21T14:54:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16660#issuecomment-523493818",
      "id" : 523493818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16660",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzQ5MzgxOA==",
      "updated_at" : "2019-08-21T14:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523493818",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\nDo you know if we have any tests for the eviction logic? Perhaps my measurements are incorrect.\r\n\r\nAFAICT the eviction logic is by far the most critical code path not covered at all by any test. I mean \"at all\" in the most literal sense: the code path it isn't even entered (if my measurements are correct) when running the full test suite :-)\r\n\r\nI'm not super convinced that this very specific observation/issue is a duplicate of the general observation/issue \"we could do better network testing in general\" (#14210). Fixing the former can be done quickly - fixing the latter will take quite some time. Don't you think? :-)",
      "created_at" : "2019-08-21T15:21:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16660#issuecomment-523506098",
      "id" : 523506098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16660",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUwNjA5OA==",
      "updated_at" : "2019-08-21T15:21:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523506098",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixing #14210 is a requirement for fixing this issue. This issue is also mentioned as motivating example in #14210.",
      "created_at" : "2019-08-21T16:00:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16660#issuecomment-523525145",
      "id" : 523525145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16660",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUyNTE0NQ==",
      "updated_at" : "2019-08-21T16:00:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523525145",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I can see the dependency on #14210 for functional testing, but unit tests could easily be written to cover these functions AFAICT:\r\n\r\n```\r\nstatic bool ReverseCompareNodeMinPingTime(const NodeEvictionCandidate& a, const NodeEvictionCandidate& b)\r\nstatic bool ReverseCompareNodeTimeConnected(const NodeEvictionCandidate& a, const NodeEvictionCandidate& b)\r\nstatic bool CompareNetGroupKeyed(const NodeEvictionCandidate& a, const NodeEvictionCandidate& b)\r\nstatic bool CompareNodeBlockTime(const NodeEvictionCandidate& a, const NodeEvictionCandidate& b)\r\nstatic bool CompareNodeTXTime(const NodeEvictionCandidate& a, const NodeEvictionCandidate& b)\r\nstatic void EraseLastKElements(std::vector<T>& elements, Comparator comparator, size_t k)\r\n```\r\n\r\nThat would be good even if #14210 takes time to resolve :-)",
      "created_at" : "2019-08-21T16:15:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16660#issuecomment-523531532",
      "id" : 523531532,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16660",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzUzMTUzMg==",
      "updated_at" : "2019-08-21T16:16:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523531532",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
