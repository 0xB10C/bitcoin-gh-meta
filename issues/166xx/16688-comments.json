[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316934773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316934773"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Compiling without including transaction header (already included in txmempool.h)",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T00:21:43Z",
      "diff_hunk" : "@@ -5,9 +5,13 @@\n \n #include <validationinterface.h>\n \n+#include <chain.h>\n+#include <logging.h>\n #include <primitives/block.h>\n+#include <primitives/transaction.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316934773",
      "id" : 316934773,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjkzNDc3Mw==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 7,
      "path" : "src/validationinterface.cpp",
      "position" : 7,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316934773",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17004](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17004.html) (validation: Remove REJECT code from CValidationState by jnewbery)\n* [#16910](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16910.html) (wallet: reduce loading time by using unordered maps by achow101)\n* [#16698](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16698.html) ([WIP] Mempool: rework rebroadcast logic to improve privacy by amitiuttarwar)\n* [#16365](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16365.html) (Log RPC parameters (arguments) if -debug=rpcparams by LarryRuane)\n* [#15921](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15921.html) (validation: Tidy up ValidationState interface by jnewbery)\n* [#14384](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14384.html) (Fire TransactionRemovedFromMempool callbacks from mempool by l2a5b1)\n* [#14053](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14053.html) (Add address-based index (attempt 4?) by marcinja)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-08-23T00:52:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#issuecomment-524131064",
      "id" : 524131064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDEzMTA2NA==",
      "updated_at" : "2019-10-09T23:20:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524131064",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316940139"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316940139"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What's the rational defining func instead of directly as LogPrint arg ?",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T00:56:46Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316940139",
      "id" : 316940139,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjk0MDEzOQ==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 19,
      "path" : "src/validationinterface.cpp",
      "position" : 41,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316940139",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316940553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316940553"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could you use a ternary to check pindexFork instead of two call to LogPrint? Also fInitialDownload could be logged",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T00:59:03Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316940553",
      "id" : 316940553,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjk0MDU1Mw==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 21,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316940553",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316941180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316941180"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks to pindex, maybe log the height too",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T01:03:00Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n             m_internals->TransactionRemovedFromMempool(ptx);\n         });\n     }\n }\n \n void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, pindex, pvtxConflicted, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316941180",
      "id" : 316941180,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjk0MTE4MA==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 51,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316941180",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316942251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316942251"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: maybe \"top block hash %s bottom block hash\"",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T01:09:35Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n             m_internals->TransactionRemovedFromMempool(ptx);\n         });\n     }\n }\n \n void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, pindex, pvtxConflicted, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());\n         m_internals->BlockConnected(pblock, pindex, *pvtxConflicted);\n     });\n }\n \n void CMainSignals::BlockDisconnected(const std::shared_ptr<const CBlock> &pblock) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());\n         m_internals->BlockDisconnected(pblock);\n     });\n }\n \n void CMainSignals::ChainStateFlushed(const CBlockLocator &locator) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([locator, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, locator, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, locator.IsNull() ? \"null\" : locator.vHave.front().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316942251",
      "id" : 316942251,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjk0MjI1MQ==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 69,
      "path" : "src/validationinterface.cpp",
      "position" : 92,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316942251",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316942492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316942492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You may add MemPoolRemovalReasonString somewhere, like TransactionErrorString in util/error.cp. IMO that's an interesting info to log",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T01:11:03Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r316942492",
      "id" : 316942492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNjk0MjQ5Mg==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 41,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 278747465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/316942492",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317000871"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317000871"
         }
      },
      "author_association" : "MEMBER",
      "body" : "From the [Developer Notes - Source code organization](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#source-code-organization):\r\n> - Every `.cpp` and `.h` file should `#include` every header file it directly uses classes, functions or other definitions from, even if those headers are already included indirectly through other headers.\r\n>    -  _Rationale_: Excluding headers because they are already indirectly included results in compilation failures when those indirect dependencies change. Furthermore, it obscures what the real code dependencies are.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T07:12:56Z",
      "diff_hunk" : "@@ -5,9 +5,13 @@\n \n #include <validationinterface.h>\n \n+#include <chain.h>\n+#include <logging.h>\n #include <primitives/block.h>\n+#include <primitives/transaction.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317000871",
      "id" : 317000871,
      "in_reply_to_id" : 316934773,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzAwMDg3MQ==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 7,
      "path" : "src/validationinterface.cpp",
      "position" : 7,
      "pull_request_review_id" : 278830194,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317000871",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317143843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317143843"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah thanks, didn't know it!",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-23T13:56:48Z",
      "diff_hunk" : "@@ -5,9 +5,13 @@\n \n #include <validationinterface.h>\n \n+#include <chain.h>\n+#include <logging.h>\n #include <primitives/block.h>\n+#include <primitives/transaction.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317143843",
      "id" : 317143843,
      "in_reply_to_id" : 316934773,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzE0Mzg0Mw==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 7,
      "path" : "src/validationinterface.cpp",
      "position" : 7,
      "pull_request_review_id" : 279015148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317143843",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-08-24T17:56:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#issuecomment-524569491",
      "id" : 524569491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNDU2OTQ5MQ==",
      "updated_at" : "2019-08-24T17:56:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/524569491",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317672379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317672379"
         }
      },
      "author_association" : "NONE",
      "body" : "Using it directly will give the name of the lambda, i.e. `operator()`, which is not desirable.\r\n\r\nIdeally, I could use `__func__` in the lambda capture. However, this is not allowed because it has static storage duration. With C++14, we could use capture initializers instead.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-26T15:58:14Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r317672379",
      "id" : 317672379,
      "in_reply_to_id" : 316940139,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzY3MjM3OQ==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 19,
      "path" : "src/validationinterface.cpp",
      "position" : 41,
      "pull_request_review_id" : 279678717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317672379",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r318809816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/318809816"
         }
      },
      "author_association" : "NONE",
      "body" : "I believe the bottom block hash will always be the genesis block hash, so logging it probably won't be very useful. Plus it may be a little confusing given only the top block is being flushed.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-08-28T21:55:34Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n             m_internals->TransactionRemovedFromMempool(ptx);\n         });\n     }\n }\n \n void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, pindex, pvtxConflicted, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());\n         m_internals->BlockConnected(pblock, pindex, *pvtxConflicted);\n     });\n }\n \n void CMainSignals::BlockDisconnected(const std::shared_ptr<const CBlock> &pblock) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());\n         m_internals->BlockDisconnected(pblock);\n     });\n }\n \n void CMainSignals::ChainStateFlushed(const CBlockLocator &locator) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([locator, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, locator, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, locator.IsNull() ? \"null\" : locator.vHave.front().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r318809816",
      "id" : 318809816,
      "in_reply_to_id" : 316942251,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxODgwOTgxNg==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 69,
      "path" : "src/validationinterface.cpp",
      "position" : 92,
      "pull_request_review_id" : 281124970,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:02:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/318809816",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406870"
         }
      },
      "author_association" : "NONE",
      "body" : "Good call! I had misinterpreted the frequency of this being non-null. Fixed in 4bacb54.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-09-03T18:07:11Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406870",
      "id" : 320406870,
      "in_reply_to_id" : 316940553,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMDQwNjg3MA==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 21,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 283169608,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406870",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406900"
         }
      },
      "author_association" : "NONE",
      "body" : "Added in 4bacb54.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-09-03T18:07:16Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n             m_internals->TransactionRemovedFromMempool(ptx);\n         });\n     }\n }\n \n void CMainSignals::BlockConnected(const std::shared_ptr<const CBlock> &pblock, const CBlockIndex *pindex, const std::shared_ptr<const std::vector<CTransactionRef>>& pvtxConflicted) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([pblock, pindex, pvtxConflicted, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pblock, pindex, pvtxConflicted, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: block hash=%s\\n\", func, pblock->GetHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406900",
      "id" : 320406900,
      "in_reply_to_id" : 316941180,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMDQwNjkwMA==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 51,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 283169647,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:07:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406900",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406935"
         }
      },
      "author_association" : "NONE",
      "body" : "Done in 504d009.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-09-03T18:07:19Z",
      "diff_hunk" : "@@ -133,47 +137,62 @@ void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockInd\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        if (pindexFork) LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: fork block hash=%s\\n\", func, pindexFork->GetBlockHash().ToString());\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s\\n\", func, pindexNew->GetBlockHash().ToString());\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());\n         m_internals->TransactionAddedToMempool(ptx);\n     });\n }\n \n void CMainSignals::TransactionRemovedFromMempool(CTransactionRef ptx, MemPoolRemovalReason reason) {\n     if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+        auto func = __func__;\n+        m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+            LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r320406935",
      "id" : 320406935,
      "in_reply_to_id" : 316942492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyMDQwNjkzNQ==",
      "original_commit_id" : "e13e0f85dcb4c7f2f682c9baa19445ee9f4dc98b",
      "original_position" : 41,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 283169687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-09-03T18:07:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/320406935",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Addressed all comments and add correct formatting for valid `CValidationState` in b303865.\r\n\r\nAlso updated `CValidationState` accessors in 3ff8755 to return strings by constant reference to avoid copying. Although this means the references are only valid for the lifetime of the object, which should be okay.",
      "created_at" : "2019-09-03T18:14:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#issuecomment-527575841",
      "id" : 527575841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNzU3NTg0MQ==",
      "updated_at" : "2019-09-03T18:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/527575841",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332730670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332730670"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Refer to this as \"IBD\" or \"Initial Block Download\" rather than \"initial download\". I suggest: `\"%s: new block hash=%s fork block hash=%s (In IBD=%d)\\n\"` or similar.\r\n\r\n(These are low-level logs. Anyone reading them should understand what IBD means.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-10-08T20:59:48Z",
      "diff_hunk" : "@@ -128,52 +132,69 @@ void SyncWithValidationInterfaceQueue() {\n     promise.get_future().wait();\n }\n \n-void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n-    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n-            m_internals->TransactionRemovedFromMempool(ptx);\n-        });\n-    }\n-}\n-\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n     // Dependencies exist that require UpdatedBlockTip events to be delivered in the order in which\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s fork block hash=%s initial download=%d\\n\", func,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332730670",
      "id" : 332730670,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjczMDY3MA==",
      "original_commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "original_position" : 43,
      "path" : "src/validationinterface.cpp",
      "position" : 43,
      "pull_request_review_id" : 299046396,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-10-08T21:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332730670",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332733417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332733417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: call this the 'txid' instead of 'tx hash', and also log the wtxid (use `GetWitnessHash()`)",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-10-08T21:06:15Z",
      "diff_hunk" : "@@ -128,52 +132,69 @@ void SyncWithValidationInterfaceQueue() {\n     promise.get_future().wait();\n }\n \n-void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n-    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n-            m_internals->TransactionRemovedFromMempool(ptx);\n-        });\n-    }\n-}\n-\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n     // Dependencies exist that require UpdatedBlockTip events to be delivered in the order in which\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: new block hash=%s fork block hash=%s initial download=%d\\n\", func,\n+                 pindexNew->GetBlockHash().ToString(),\n+                 pindexFork ? pindexFork->GetBlockHash().ToString() : \"null\",\n+                 fInitialDownload);\n         m_internals->UpdatedBlockTip(pindexNew, pindexFork, fInitialDownload);\n     });\n }\n \n void CMainSignals::TransactionAddedToMempool(const CTransactionRef &ptx) {\n-    m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, ptx, this] {\n+        LogPrint(BCLog::VALIDATIONINTERFACE, \"%s: tx hash=%s\\n\", func, ptx->GetHash().ToString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332733417",
      "id" : 332733417,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjczMzQxNw==",
      "original_commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "original_position" : 55,
      "path" : "src/validationinterface.cpp",
      "position" : 55,
      "pull_request_review_id" : 299046396,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-10-08T21:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332733417",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332735487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332735487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think these strings could just be `EXPIRY`, `SIZELIMIT`, etc. These strings are for logs only, so will only be read by engineers.\r\n\r\nTrying to make these strings more generally accessible obscures some of the nuance. For example `MemPoolRemovalReason::REORG` means that a transaction was removed during a re-org because it spent a coinbase transaction that is no longer mature, or because it is no longer final, or because mempool policy changed since it first entered the mempool so it can no longer be added or because the re-org was too large and we dropped transactions to avoid memory exhaustion.",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-10-08T21:11:25Z",
      "diff_hunk" : "@@ -1098,3 +1100,22 @@ void CTxMemPool::SetIsLoaded(bool loaded)\n }\n \n SaltedTxidHasher::SaltedTxidHasher() : k0(GetRand(std::numeric_limits<uint64_t>::max())), k1(GetRand(std::numeric_limits<uint64_t>::max())) {}\n+\n+std::string MemPoolRemovalReasonString(const MemPoolRemovalReason reason)\n+{\n+    switch (reason) {\n+    case MemPoolRemovalReason::EXPIRY:\n+        return \"Expired from mempool\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332735487",
      "id" : 332735487,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjczNTQ4Nw==",
      "original_commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "original_position" : 18,
      "path" : "src/txmempool.cpp",
      "position" : 18,
      "pull_request_review_id" : 299046396,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-10-08T21:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332735487",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332745377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332745377"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For all of these async validationinterface callbacks, I think it'd be useful to log both when the event is enqueued and dequeued, with some kind of counter to correlate the two logs. Thoughts?",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-10-08T21:37:39Z",
      "diff_hunk" : "@@ -128,52 +132,69 @@ void SyncWithValidationInterfaceQueue() {\n     promise.get_future().wait();\n }\n \n-void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n-    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n-            m_internals->TransactionRemovedFromMempool(ptx);\n-        });\n-    }\n-}\n-\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n     // Dependencies exist that require UpdatedBlockTip events to be delivered in the order in which\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r332745377",
      "id" : 332745377,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMjc0NTM3Nw==",
      "original_commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "original_position" : 42,
      "path" : "src/validationinterface.cpp",
      "position" : 42,
      "pull_request_review_id" : 299046396,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-10-08T21:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/332745377",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I did some light testing and this looks good. If you wanted to add automated tests, take a look at `assert_debug_log()` in the `TestNode` object. That allows you to test that specific strings have been written to the debug log.\r\n\r\n> updated CValidationState accessors in 3ff8755 to return strings by constant reference to avoid copying.\r\n\r\nWas this required for the PR? Those accessors aren't used very much, so performance isn't critical. I'd suggest not changing them in this PR.",
      "created_at" : "2019-10-09T22:03:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#issuecomment-540222219",
      "id" : 540222219,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDIyMjIxOQ==",
      "updated_at" : "2019-10-09T22:03:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540222219",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r335228213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335228213"
         }
      },
      "author_association" : "NONE",
      "body" : "The scheduler client guarantees these callbacks are executed serially in the order in which they were enqueued. Unless there is a need to correlate the enqueuing with the execution of `BlockChecked` and `NewPowValidBlock`, I'm hesitant to add more complexity to the code.\r\n\r\nIs there a specific case where you think the additional logging would be useful? If so, would correlation using data from the log message be sufficient rather than adding a counter?",
      "commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "created_at" : "2019-10-16T00:01:31Z",
      "diff_hunk" : "@@ -128,52 +132,69 @@ void SyncWithValidationInterfaceQueue() {\n     promise.get_future().wait();\n }\n \n-void CMainSignals::MempoolEntryRemoved(CTransactionRef ptx, MemPoolRemovalReason reason) {\n-    if (reason != MemPoolRemovalReason::BLOCK && reason != MemPoolRemovalReason::CONFLICT) {\n-        m_internals->m_schedulerClient.AddToProcessQueue([ptx, this] {\n-            m_internals->TransactionRemovedFromMempool(ptx);\n-        });\n-    }\n-}\n-\n void CMainSignals::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n     // Dependencies exist that require UpdatedBlockTip events to be delivered in the order in which\n     // the chain actually updates. One way to ensure this is for the caller to invoke this signal\n     // in the same critical section where the chain is updated\n \n-    m_internals->m_schedulerClient.AddToProcessQueue([pindexNew, pindexFork, fInitialDownload, this] {\n+    auto func = __func__;\n+    m_internals->m_schedulerClient.AddToProcessQueue([func, pindexNew, pindexFork, fInitialDownload, this] {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16688#discussion_r335228213",
      "id" : 335228213,
      "in_reply_to_id" : 332745377,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTIyODIxMw==",
      "original_commit_id" : "b303865bc68f2bfecd6bd3b8c7baf2c836f30549",
      "original_position" : 42,
      "path" : "src/validationinterface.cpp",
      "position" : 42,
      "pull_request_review_id" : 302260704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16688",
      "updated_at" : "2019-10-16T00:01:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335228213",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4015903?v=4",
         "events_url" : "https://api.github.com/users/jkczyz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jkczyz/followers",
         "following_url" : "https://api.github.com/users/jkczyz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jkczyz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jkczyz",
         "id" : 4015903,
         "login" : "jkczyz",
         "node_id" : "MDQ6VXNlcjQwMTU5MDM=",
         "organizations_url" : "https://api.github.com/users/jkczyz/orgs",
         "received_events_url" : "https://api.github.com/users/jkczyz/received_events",
         "repos_url" : "https://api.github.com/users/jkczyz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jkczyz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jkczyz"
      }
   }
]
