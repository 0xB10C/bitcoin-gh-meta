[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #16127 (More thread safety annotation coverage by ajtowns)\n* #15719 (Drop Chain::requestMempoolTransactions method by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-08-21T03:01:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-523275433",
      "id" : 523275433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzI3NTQzMw==",
      "updated_at" : "2020-05-12T18:00:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523275433",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-08-21T13:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-523454836",
      "id" : 523454836,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMzQ1NDgzNg==",
      "updated_at" : "2019-08-21T13:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/523454836",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r317415261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317415261"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do you really want `unexpected_msgs` to preserve parameter state between calls? :-)\r\n\r\n```\r\n>>> def foobar(foo, bar=[]):\r\n...     bar.append(foo)\r\n...     print(bar)\r\n...\r\n>>> foobar(\"hello\")\r\n['hello']\r\n>>> foobar(\"hello\")\r\n['hello', 'hello']\r\n>>> foobar(\"hello\")\r\n['hello', 'hello', 'hello']\r\n```\r\n\r\nI think this is what you want:\r\n\r\n```\r\ndef assert_debug_log(self, expected_msgs, unexpected_msgs, timeout=2):\r\n    if unexpected_msgs is None:\r\n        unexpected_msgs = []\r\n```\r\n\r\nFWIW I think we should use a linter to guard against this Python gotcha :-)",
      "commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "created_at" : "2019-08-25T21:18:07Z",
      "diff_hunk" : "@@ -307,7 +307,7 @@ def wait_until_stopped(self, timeout=BITCOIND_PROC_WAIT_TIMEOUT):\n         wait_until(self.is_node_stopped, timeout=timeout)\n \n     @contextlib.contextmanager\n-    def assert_debug_log(self, expected_msgs, timeout=2):\n+    def assert_debug_log(self, expected_msgs, unexpected_msgs=[], timeout=2):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r317415261",
      "id" : 317415261,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzQxNTI2MQ==",
      "original_commit_id" : "d252dfe814044450ee8af029f5b26b812f56e053",
      "original_position" : 5,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 279353607,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673",
      "updated_at" : "2020-01-19T18:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317415261",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r317442421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317442421"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Great catch, I had no idea! I fixed this in #16115 (where it was introduced) and force-pushed rebased this PR onto that branch.",
      "commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "created_at" : "2019-08-26T03:48:02Z",
      "diff_hunk" : "@@ -307,7 +307,7 @@ def wait_until_stopped(self, timeout=BITCOIND_PROC_WAIT_TIMEOUT):\n         wait_until(self.is_node_stopped, timeout=timeout)\n \n     @contextlib.contextmanager\n-    def assert_debug_log(self, expected_msgs, timeout=2):\n+    def assert_debug_log(self, expected_msgs, unexpected_msgs=[], timeout=2):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r317442421",
      "id" : 317442421,
      "in_reply_to_id" : 317415261,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNzQ0MjQyMQ==",
      "original_commit_id" : "d252dfe814044450ee8af029f5b26b812f56e053",
      "original_position" : 5,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 279388220,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673",
      "updated_at" : "2020-01-19T18:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/317442421",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r319257343"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/319257343"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift, I don't think this was an actual problem. I added a debug print and `unexpected_msgs` didn't include previous values. I think it's not broken because this function, `assert_debug_log()`, doesn't modify the variable (it's not mutable). Here's an extremely simplified version of this function and some sample calls to it:\r\n```\r\ndef assert_debug_log(unexpected_msgs=[]):\r\n    print(unexpected_msgs)\r\n    for unexpected_msg in unexpected_msgs:\r\n        print('  ', unexpected_msg)\r\n\r\nassert_debug_log()\r\nassert_debug_log([\"foo\"])\r\nassert_debug_log(unexpected_msgs=[\"foo\"])\r\nassert_debug_log(\"bar\") # not actually called this way but just curious\r\nassert_debug_log()\r\n```\r\nThe output:\r\n```\r\n[]\r\n['foo']\r\n   foo\r\n['foo']\r\n   foo\r\nbar\r\n   b\r\n   a\r\n   r\r\n[]\r\n```\r\nWhat prompted me to investigate this further is that I wondered if any of our existing python code has this problem. I found just one instance, which is in `wallet_importmulti.py`:\r\n```\r\ndef test_importmulti(self, req, success, error_code=None, error_message=None, warnings=[]):\r\n```\r\nBut adding a debug print to that function showed everything was okay. I believe that's because `warnings` isn't modified in that function.",
      "commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "created_at" : "2019-08-29T20:27:43Z",
      "diff_hunk" : "@@ -307,7 +307,7 @@ def wait_until_stopped(self, timeout=BITCOIND_PROC_WAIT_TIMEOUT):\n         wait_until(self.is_node_stopped, timeout=timeout)\n \n     @contextlib.contextmanager\n-    def assert_debug_log(self, expected_msgs, timeout=2):\n+    def assert_debug_log(self, expected_msgs, unexpected_msgs=[], timeout=2):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r319257343",
      "id" : 319257343,
      "in_reply_to_id" : 317415261,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxOTI1NzM0Mw==",
      "original_commit_id" : "d252dfe814044450ee8af029f5b26b812f56e053",
      "original_position" : 5,
      "path" : "test/functional/test_framework/test_node.py",
      "position" : null,
      "pull_request_review_id" : 281703538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673",
      "updated_at" : "2020-01-19T18:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/319257343",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-09-05T12:03:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-528331157",
      "id" : 528331157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODMzMTE1Nw==",
      "updated_at" : "2019-09-05T12:03:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528331157",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-16T14:22:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-542726145",
      "id" : 542726145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjcyNjE0NQ==",
      "updated_at" : "2019-10-16T14:22:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542726145",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased onto https://github.com/bitcoin/bitcoin/pull/16115 (only the last commit here, 339a1e3, is unique to this PR; the previous commits are part of https://github.com/bitcoin/bitcoin/pull/16115)",
      "created_at" : "2019-11-21T23:11:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-557314189",
      "id" : 557314189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NzMxNDE4OQ==",
      "updated_at" : "2019-11-21T23:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557314189",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-12-13T11:19:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-565405510",
      "id" : 565405510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NTQwNTUxMA==",
      "updated_at" : "2019-12-13T11:19:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/565405510",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-12-19T20:16:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-567646404",
      "id" : 567646404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2NzY0NjQwNA==",
      "updated_at" : "2019-12-19T20:16:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/567646404",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r368313230"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368313230"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It may be better to have entries for `m_print_to_file` (and also `m_print_to_console` above) in the `m_print_callbacks` list, rather than having them here as special cases.  I may investigate that approach, and if it seems reasonable, make a separate PR (to merge ahead of the current PR).",
      "commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "created_at" : "2020-01-19T18:41:52Z",
      "diff_hunk" : "@@ -282,9 +286,6 @@ void BCLog::Logger::LogPrintStr(const std::string& str)\n         fwrite(str_prefixed.data(), 1, str_prefixed.size(), stdout);\n         fflush(stdout);\n     }\n-    for (const auto& cb : m_print_callbacks) {\n-        cb(str_prefixed);\n-    }\n     if (m_print_to_file) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r368313230",
      "id" : 368313230,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxMzIzMA==",
      "original_commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "original_position" : 31,
      "path" : "src/logging.cpp",
      "position" : 31,
      "pull_request_review_id" : 345018648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673",
      "updated_at" : "2020-01-19T18:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368313230",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r368313636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368313636"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's bad that this loop is duplicated here, and weird too, because the various unknown future print callbacks probably don't care that the log was rotated. But this is necessary for the test (which uses the callback mechanism). It may be better for the test to simply open the real `debug.log` file, as it used to, even though that's not quite as nice and clean.",
      "commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "created_at" : "2020-01-19T18:49:34Z",
      "diff_hunk" : "@@ -296,10 +297,27 @@ void BCLog::Logger::LogPrintStr(const std::string& str)\n                 setbuf(new_fileout, nullptr); // unbuffered\n                 fclose(m_fileout);\n                 m_fileout = new_fileout;\n+\n+                // Re-log important messages to the new file.\n+                bool save_started_new_line = m_started_new_line;\n+                m_started_new_line = true;\n+                for (const std::string& msg : m_msgs_relog) {\n+                    std::string s = AddPrefix(msg) + '\\n';\n+                    FileWriteStr(s, m_fileout);\n+                    for (const auto& cb : m_print_callbacks) {\n+                        cb(s);\n+                    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#discussion_r368313636",
      "id" : 368313636,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODMxMzYzNg==",
      "original_commit_id" : "773660c16124363bb946d9215b141090054bd53a",
      "original_position" : 47,
      "path" : "src/logging.cpp",
      "position" : 47,
      "pull_request_review_id" : 345018648,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16673",
      "updated_at" : "2020-01-19T18:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/368313636",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased onto latest master",
      "created_at" : "2020-02-18T17:32:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-587580882",
      "id" : 587580882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzU4MDg4Mg==",
      "updated_at" : "2020-02-18T17:32:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587580882",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-28T00:19:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16673#issuecomment-635014029",
      "id" : 635014029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16673",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTAxNDAyOQ==",
      "updated_at" : "2020-05-28T00:19:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635014029",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
