[
   {
      "body" : "Concept ACK",
      "created_at" : "2016-10-05T03:35:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#issuecomment-251573908",
      "id" : 251573908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8888",
      "updated_at" : "2016-10-05T03:35:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251573908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Test failure:\r\n```\r\nstart_node: RPC succesfully started\r\nJSONRPC error: Error: Peer-to-peer functionality missing or disabled\r\nStopping nodes\r\nNot cleaning up dir /tmp/testk3xseb1n/41\r\nFailed\r\nstderr:\r\n  File \"/home/travis/build/bitcoin/bitcoin/qa/rpc-tests/test_framework/test_framework.py\", line 148, in main\r\n    self.run_test()\r\n  File \"/home/travis/build/bitcoin/bitcoin/build/../qa/rpc-tests/wallet.py\", line 208, in run_test\r\n    txIdNotBroadcasted  = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 2)\r\n  File \"/home/travis/build/bitcoin/bitcoin/qa/rpc-tests/test_framework/coverage.py\", line 49, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/travis/build/bitcoin/bitcoin/qa/rpc-tests/test_framework/authproxy.py\", line 151, in __call__\r\n    raise JSONRPCException(response['error'])\r\nPass: False, Duration: 15 s\r\n```",
      "created_at" : "2016-10-05T06:53:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#issuecomment-251596570",
      "id" : 251596570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8888",
      "updated_at" : "2016-10-05T06:53:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251596570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8888#discussion_r81913716"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8888"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81913716"
         }
      },
      "body" : "This will now throw the error if `-walletbroadcast` is turned off?",
      "commit_id" : "ea26e5670ebb371f35f7ede8ecdb46ec1aed2db1",
      "created_at" : "2016-10-05T07:28:01Z",
      "diff_hunk" : "@@ -346,7 +346,7 @@ static void SendMoney(const CTxDestination &address, CAmount nValue, bool fSubtr\n     if (nValue > curBalance)\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Insufficient funds\");\n \n-    if (pwalletMain->GetBroadcastTransactions() && !g_connman)\n+    if (!pwalletMain->GetBroadcastTransactions())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#discussion_r81913716",
      "id" : 81913716,
      "original_commit_id" : "ea26e5670ebb371f35f7ede8ecdb46ec1aed2db1",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 2857645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8888",
      "updated_at" : "2016-10-05T07:28:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81913716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8888#discussion_r81915516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8888"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81915516"
         }
      },
      "body" : "Maybe keep a `bool isConnmanMissing()` for now?",
      "commit_id" : "ea26e5670ebb371f35f7ede8ecdb46ec1aed2db1",
      "created_at" : "2016-10-05T07:41:32Z",
      "diff_hunk" : "@@ -346,7 +346,7 @@ static void SendMoney(const CTxDestination &address, CAmount nValue, bool fSubtr\n     if (nValue > curBalance)\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Insufficient funds\");\n \n-    if (pwalletMain->GetBroadcastTransactions() && !g_connman)\n+    if (!pwalletMain->GetBroadcastTransactions())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#discussion_r81915516",
      "id" : 81915516,
      "original_commit_id" : "ea26e5670ebb371f35f7ede8ecdb46ec1aed2db1",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 2859286,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8888",
      "updated_at" : "2016-10-05T07:41:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81915516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "This change results is two new `-Wshadow` warnings:\r\n```\r\nqt/peertablemodel.cpp:62:2445: warning: declaration shadows a local variable [-Wshadow]\r\nqt/peertablemodel.cpp:74:264: warning: declaration shadows a local variable [-Wshadow]\r\n\r\nqt/peertablemodel.cpp:54:49: note: previous declaration is here\r\n    void refreshPeers(QList<CNodeCombinedStats> stats)\r\n```\r\n",
      "created_at" : "2016-10-05T11:05:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#issuecomment-251645286",
      "id" : 251645286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8888",
      "updated_at" : "2016-10-05T11:05:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251645286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Before fixing up here, I'd like to get opinions on an alternate approach to the wallet: https://github.com/theuni/bitcoin/commit/349edab789557db615b29a5869118b4b08c50dab . Note that this was done quickly, it needs to be fixed up for correctness in a few places.\r\n\r\nThere, rather than passing the connman instance into the wallet, the wallet loses the ability to relay. Instead, callers are expected to handle relaying themselves. I really like this approach as it removes the p2p layer dependency from the wallet.\r\n\r\n@jonasschnelli / @laanwj: Thoughts?\r\n",
      "created_at" : "2016-10-05T18:12:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#issuecomment-251754237",
      "id" : 251754237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8888",
      "updated_at" : "2016-10-05T18:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251754237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni Personally I like the new approach better (wallet does not require the connman). Even though this would require some \"glue logic\" in the caller for sending out the inv, it would reduce the complexity of our \"modular\" design. For example, it would make error handling easier. Right now the wallet can be seen as a proxy between GUI/RPC and Mempool/p2p. And the wallet needs to handle mempool rejections and pass on the error message to the GUI. (Which it does *not* do right now as you can see [in the code](https://github.com/theuni/bitcoin/commit/349edab789557db615b29a5869118b4b08c50dab#diff-b2bb174788c7409b671c46ccc86034bdL2509) and on [irc](https://botbot.me/freenode/bitcoin-core-dev/2016-07-01/?msg=68925563&page=1).)\r\n\r\nSo Concept ACK from me on your new suggestion.",
      "created_at" : "2016-10-06T08:22:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8888#issuecomment-251897415",
      "id" : 251897415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8888",
      "updated_at" : "2016-10-06T08:22:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251897415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
