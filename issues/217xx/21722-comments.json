[
   {
      "author_association" : "MEMBER",
      "body" : "Hi @benjamin-wilson, which version of bitcoin core are you running (`bitcoind -version`)? Default configuration options?",
      "created_at" : "2021-04-18T15:09:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822006635",
      "id" : 822006635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAwNjYzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T15:09:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822006635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "version .21\r\nbitcoin.conf:\r\n```\r\n# bitcoind configuration\r\n# mainnet/testnet\r\ntestnet=0\r\n# Bitcoind options\r\nserver=1\r\ndaemon=1\r\ntxindex=0\r\ndisablewallet=1\r\npeerbloomfilters=1\r\n# Connection settings\r\nrpcuser=raspibolt\r\nrpcpassword=c4w0Mh2q\r\nrpcport=8332\r\nrpcallowip=127.0.0.1\r\nrpcbind=127.0.0.1:8332\r\nzmqpubrawblock=tcp://127.0.0.1:28332\r\nzmqpubrawtx=tcp://127.0.0.1:28333\r\n# Raspberry Pi optimizations\r\ndbcache=512\r\nmaxorphantx=10\r\nmaxmempool=300\r\nmaxconnections=40\r\nmaxuploadtarget=5000\r\ndatadir=/mnt/hdd/bitcoin\r\ndebug=bench\r\n```\r\n\r\n",
      "created_at" : "2021-04-18T16:46:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822021893",
      "id" : 822021893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyMTg5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T16:46:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822021893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1399163?v=4",
         "events_url" : "https://api.github.com/users/benjamin-wilson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benjamin-wilson/followers",
         "following_url" : "https://api.github.com/users/benjamin-wilson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benjamin-wilson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benjamin-wilson",
         "id" : 1399163,
         "login" : "benjamin-wilson",
         "node_id" : "MDQ6VXNlcjEzOTkxNjM=",
         "organizations_url" : "https://api.github.com/users/benjamin-wilson/orgs",
         "received_events_url" : "https://api.github.com/users/benjamin-wilson/received_events",
         "repos_url" : "https://api.github.com/users/benjamin-wilson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benjamin-wilson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benjamin-wilson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benjamin-wilson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you report the corresponding cache= values on the \"UpdateTip\" lines? It's expected that I/O is higher when the cache is small.",
      "created_at" : "2021-04-18T16:49:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822022233",
      "id" : 822022233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyMjIzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T16:49:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822022233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The cache value increases from nothing to just above the dbcache config value and then dumps to disk. I've tried from 512mb to 3072. Doesn't seem to make a difference. The slowness doesn't seem to correlate to the size of the current cache. ",
      "created_at" : "2021-04-18T16:58:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822023685",
      "id" : 822023685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyMzY4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T16:58:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822023685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1399163?v=4",
         "events_url" : "https://api.github.com/users/benjamin-wilson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benjamin-wilson/followers",
         "following_url" : "https://api.github.com/users/benjamin-wilson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benjamin-wilson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benjamin-wilson",
         "id" : 1399163,
         "login" : "benjamin-wilson",
         "node_id" : "MDQ6VXNlcjEzOTkxNjM=",
         "organizations_url" : "https://api.github.com/users/benjamin-wilson/orgs",
         "received_events_url" : "https://api.github.com/users/benjamin-wilson/received_events",
         "repos_url" : "https://api.github.com/users/benjamin-wilson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benjamin-wilson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benjamin-wilson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benjamin-wilson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I see you have swap space configured. Could it be that your whole system memory usage goes too high and starts needing swap? Have you tried without swap?\r\n\r\nOther than that, perhaps your system is overheating?",
      "created_at" : "2021-04-18T17:02:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822024175",
      "id" : 822024175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyNDE3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T17:02:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822024175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hmm might be right with the swap, I saw I had free memory so I didn't think if it.  I'll poke around and see.\r\n",
      "created_at" : "2021-04-18T17:11:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822025675",
      "id" : 822025675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyNTY3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T17:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822025675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1399163?v=4",
         "events_url" : "https://api.github.com/users/benjamin-wilson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benjamin-wilson/followers",
         "following_url" : "https://api.github.com/users/benjamin-wilson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benjamin-wilson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benjamin-wilson",
         "id" : 1399163,
         "login" : "benjamin-wilson",
         "node_id" : "MDQ6VXNlcjEzOTkxNjM=",
         "organizations_url" : "https://api.github.com/users/benjamin-wilson/orgs",
         "received_events_url" : "https://api.github.com/users/benjamin-wilson/received_events",
         "repos_url" : "https://api.github.com/users/benjamin-wilson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benjamin-wilson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benjamin-wilson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benjamin-wilson"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok looks like bitcoind was using swap (non-zero from `vmstat`) even when I turned swappiness down to 10.\r\n\r\nI ran `sudo swapoff -a` and free is showing 2.9G available.\r\n\r\n```\r\nadmin@raspberrypi:~ $ free -m\r\n              total        used        free      shared  buff/cache   available\r\nMem:           3845         824          51           8        2968        2937\r\nSwap:             0           0           0\r\n\r\n```\r\n\r\nI'm still seeing` si `and `so` from vmstat though and a lot of disk reads?\r\n```\r\n\r\nadmin@raspberrypi:~ $ vmstat\r\nprocs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\r\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\r\n 1  1      0  52608    936 3015432   95   95 42789  1962 1705  770 15 19 57  9  0\r\n\r\n```",
      "created_at" : "2021-04-18T17:34:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21722#issuecomment-822029054",
      "id" : 822029054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21722",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjAyOTA1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-18T17:34:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822029054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1399163?v=4",
         "events_url" : "https://api.github.com/users/benjamin-wilson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benjamin-wilson/followers",
         "following_url" : "https://api.github.com/users/benjamin-wilson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benjamin-wilson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benjamin-wilson",
         "id" : 1399163,
         "login" : "benjamin-wilson",
         "node_id" : "MDQ6VXNlcjEzOTkxNjM=",
         "organizations_url" : "https://api.github.com/users/benjamin-wilson/orgs",
         "received_events_url" : "https://api.github.com/users/benjamin-wilson/received_events",
         "repos_url" : "https://api.github.com/users/benjamin-wilson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benjamin-wilson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benjamin-wilson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benjamin-wilson"
      }
   }
]
