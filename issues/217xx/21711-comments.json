[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615129019"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615129019"
         }
      },
      "author_association" : "NONE",
      "body" : "dostane btc",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-16T21:23:20Z",
      "diff_hunk" : "@@ -1,5 +1,7 @@\n # Bootstrappable Bitcoin Core Builds",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615129019",
      "id" : 615129019,
      "line" : 1,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTEyOTAxOQ==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 1,
      "pull_request_review_id" : 638093205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-16T21:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615129019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/37097169?v=4",
         "events_url" : "https://api.github.com/users/78051301012/events{/privacy}",
         "followers_url" : "https://api.github.com/users/78051301012/followers",
         "following_url" : "https://api.github.com/users/78051301012/following{/other_user}",
         "gists_url" : "https://api.github.com/users/78051301012/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/78051301012",
         "id" : 37097169,
         "login" : "78051301012",
         "node_id" : "MDQ6VXNlcjM3MDk3MTY5",
         "organizations_url" : "https://api.github.com/users/78051301012/orgs",
         "received_events_url" : "https://api.github.com/users/78051301012/received_events",
         "repos_url" : "https://api.github.com/users/78051301012/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/78051301012/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/78051301012/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/78051301012"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615203071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615203071"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: s/effect/affect/",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-17T04:06:08Z",
      "diff_hunk" : "@@ -9,79 +11,835 @@ downloads.\n \n We achieve bootstrappability by using Guix as a functional package manager.\n \n-## Requirements\n+# Requirements\n \n Conservatively, a x86_64 machine with:\n \n - 16GB of free disk space on the partition that /gnu/store will reside in\n - 8GB of free disk space per platform triple you're planning on building (see\n   the `HOSTS` environment variable description)\n \n-## Setup\n+# Installation and Setup\n+\n+At the time of writing, the latest Guix release is v1.2.0, which has a known\n+problems w/re building GnuTLS from source. Solutions and workarounds are\n+documented [here](), but I would recommend that you install v1.2.1 (planned for\n+release on April 18th, 2021) or later if your choice of installation option\n+allows.\n+\n+This only needs to be done once per machine. If you have already completed the\n+installation and setup, please proceed to [perform a build](#usage).\n+\n+Otherwise, you may choose from one of the following options to install Guix:\n+\n+1. Using the official **shell installer script** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Easiest (automatically performs *most* setup)\n+   - Works on nearly all Linux distributions\n+   - Only installs latest release\n+   - Binary installation only, requires high level of trust\n+   - Note: The script needs to be run as root, so it should be inspected before it's run\n+2. Using the official **binary tarball** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Normal difficulty (full manual setup required)\n+   - Works on nearly all Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+3. Using fanquake's **Docker image** [âï¸ external instructions]()\n+   - Maintained by fanquake\n+   - Easy (automatically performs *some* setup)\n+   - Works on most Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+4. Using a **distribution-maintained package** [â¤ skip to section]()\n+   - Maintained by distribution's Guix package maintainer\n+   - Normal difficulty (manual setup required)\n+   - Works only on distributions with Guix packaged, at time of writing:\n+     - Debian Bullseye or later\n+     - Ubuntu Hirsute or later\n+     - Arch Linux (via AUR)\n+   - Installs a release decided on by package maintainer\n+   - Source or binary installation depending on distribution\n+5. Building **from source** [â¤ skip to section]()\n+   - Maintained by you\n+   - Hard, but rewarding\n+   - Can be made to work on most Linux distributions\n+   - Installs any commit (more granular)\n+   - Source installation, requires lower level of trust\n+\n+## Option 1: Using the official shell installer script\n+\n+The shell installer script provided by the Guix maintainers automates the\n+download, installation, and initial configuration steps detailed\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+\n+To install Guix using this method, do the following as `root` (e.g. via `su -`):\n+\n+```sh\n+# Use /tmp as the working directory\n+cd /tmp\n+\n+# Download the script\n+wget https://git.savannah.gnu.org/cgit/guix.git/plain/etc/guix-install.sh\n+\n+# Inspect the script\n+less guix-install.sh\n+\n+# Make the script executable\n+chmod +x guix-install.sh\n+\n+# Run the script\n+./guix-install.sh\n+```\n+\n+\n+## Option 2: Using the official binary tarball\n+\n+Follow the binary installation instructions step-by-step in the Guix Reference\n+Manual\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+Ignore the note about using the shell installer script since that does not\n+apply. This is largely equivalent to maually performing what the shell installer\n+script does.\n+\n+## Option 3: TODO fanquake docker\n+\n+## Option 4: Using a distribution-maintained package\n+\n+### Debian/Ubuntu\n+\n+Guix v1.2.0 is available as a distribution package starting in [Debian\n+11](https://packages.debian.org/bullseye/guix) (\"bullseye\") and [Ubuntu\n+21.04](https://packages.ubuntu.com/hirsute/guix) (Hirsute Hippo).\n+\n+To install:\n+```sh\n+sudo apt install guix\n+```\n+\n+For up-to-date information on Debian and Ubuntu's release history:\n+- [Debian release history](https://www.debian.org/releases/)\n+- [Ubuntu release history](https://ubuntu.com/about/release-cycle)\n+\n+### Arch Linux\n+\n+Guix is available in the AUR as\n+[`guix`](https://aur.archlinux.org/packages/guix/), please follow the\n+installation instructions in the Arch Linux Wiki ([live\n+link](https://wiki.archlinux.org/index.php/Guix#AUR_Package_Installation),\n+[2021/03/30\n+permalink](https://wiki.archlinux.org/index.php?title=Guix&oldid=637559#AUR_Package_Installation))\n+to install Guix.\n+\n+At the time of writing (2021/03/30), the `check` phase will fail if the path to\n+guix's build directory is longer than 36 characters due to an anachronistic\n+character limit on the shebang line. Since the `check` phase happens after the\n+`build` phase, which may take quite a long time, it is recommended that users\n+either:\n+\n+1. Skip the `check` phase\n+    - For `makepkg`: `makepkg --nocheck ...`\n+    - For `yay`: `yay --mflags=\"--nocheck\" ...`\n+    - For `paru`: `paru --nocheck ...`\n+2. Or, check their build directory's length beforehand\n+    - For those building with `makepkg`: `pwd | wc -c`\n+\n+## Option 5: Building from source\n+\n+Building Guix from source is a rather involved process but a rewarding one for\n+those looking to minimize trust and maximize customizability (e.g. building a\n+particular commit of Guix). Previous experience with using autotools-style build\n+systems to build packages from source will be helpful. *hic sunt dracones.*\n+\n+### Installing common build tools\n+\n+There are a few basic build tools that are required for most things we'll build,\n+so let's install them now:\n+\n+Text transformation/i18n:\n+- `autopoint` (sometimes packaged in `gettext`)\n+- `help2man`\n+- `po4a`\n+- `texinfo`\n+\n+Build system tools:\n+- `g++` w/ C++11 support\n+- `libtool`\n+- `autoconf`\n+- `automake`\n+- `pkg-config` (sometimes packaged as `pkgconf`)\n+- `make`\n+- `cmake`\n+\n+Miscellaneous:\n+- `git`\n+- `gnupg`\n+- `python3`\n+\n+### Building and Installing Guix's dependencies\n+\n+In order to build Guix itself from source, we need to first make sure that the\n+necessary dependencies are installed and discoverable. The most up-to-date list\n+of Guix's dependencies is kept in the [\"Requirements\"\n+section](https://guix.gnu.org/manual/en/html_node/Requirements.html) of the Guix\n+Reference Manual.\n+\n+Depending on your distribution, most or all of these dependencies may already be\n+packaged and installable without manually building and installing.\n+\n+#### Guile\n+\n+##### Choosing a Guile version and sticking to it\n+\n+One of the first things you need to decide is which Guile version you want to\n+use: Guile v2.2 or Guile v3.0. Unlike the python2 to python3 transition, Guile\n+v2.2 and Guile v3.0 are largely compatible, as evidenced by the fact that most\n+Guile packages and even [Guix\n+itself](https://guix.gnu.org/en/blog/2020/guile-3-and-guix/) support running on\n+both.\n+\n+What is important here is that you **choose one**, and you **remain consistent**\n+with your choice throughout **all Guile-related packages**, no matter if they\n+are installed via the distribution's package manager or installed from source.\n+This is because the files for Guile packages are installed to directories which\n+are separated based on the Guile version.\n+\n+###### Example: Checking that Ubuntu's `guile-git` is compatible with your chosen Guile version\n+\n+On Ubuntu Focal:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-2.2, guile-bytestructures, libgit2-dev\n+...\n+```\n+\n+As you can see, the package `guile-git` depends on `guile-2.2`, meaning that it\n+was likely built for Guile v2.2. This means that if you decided to use Guile\n+v3.0 on Ubuntu Focal, you would need to build guile-git from source instead of\n+using the distribution package.\n+\n+On Ubuntu Hirsute:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-3.0 | guile-2.2, guile-bytestructures (>= 1.0.7-3~), libgit2-dev (>= 1.0)\n+...\n+```\n+\n+In this case, `guile-git` depends on either `guile-3.0` or `guile-2.2`, meaning\n+that it would work no matter what Guile version you decided to use.\n+\n+###### Corner case: Multiple versions of Guile on one system\n+\n+It is recommended to only install one version of Guile, so that build systems do\n+not get confused about which Guile to use.\n+\n+However, if you insist on having both Guile v2.2 and Guile v3.0 installed on\n+your system, then you need to **consistently** specify one of\n+`GUILE_EFFECTIVE_VERSION=3.0` or `GUILE_EFFECTIVE_VERSION=2.2` to all\n+`./configure` invocations for Guix and its dependencies.\n+\n+##### Installing Guile\n+\n+Guile is most likely already packaged for your distribution, so after you have\n+[chosen a Guile version](), install it via your distribution's package manager.\n+\n+If your distribution splits packages into `-dev`-suffixed and\n+non-`-dev`-suffixed sub-packages (as is the case for debian-derived\n+distributions), please make sure to install both. For example, to install Guile\n+v2.2 on Debian/Ubuntu:\n+\n+```sh\n+apt install guile-2.2 guile-2.2-dev\n+```\n+\n+#### Mixing distribution packages and source-built packages\n+\n+At the time of writing, most distributions have _some_ of Guix's dependencies\n+packaged, but not all. This means that you may want to install the distribution\n+package for some dependencies, and manually build-from-source for others.\n+\n+Distribution packages usually install to `/usr`, which is different from the\n+default `./configure` prefix of source-built packages: `/usr/local`.\n+\n+This means that if you mix-and-match distribution packages and source-built\n+packages and do not specify exactly `--prefix=/usr` to `./configure` for\n+source-built packages, you will need to augment the `GUILE_LOAD_PATH` and\n+`GUILE_LOAD_COMPILED_PATH` environment variables so that Guile will look\n+under the right prefix and find your source-built packages.\n+\n+For example, if you are using Guile v2.2, and have Guile packages in the\n+`/usr/local` prefix, either add the following lines to your `.profile` or\n+`.bash_profile` so that the environment variable is properly set for all future\n+shell logins, or paste the lines into a POSIX-style shell to temporarily modify\n+the environment variables of your current shell session.\n+\n+```sh\n+# Help Guile v2.2.x find packages in /usr/local\n+export GUILE_LOAD_PATH=\"/usr/local/share/guile/site/2.2${GUILE_LOAD_PATH:+:}$GUILE_LOAD_PATH\"\n+export GUILE_LOAD_COMPILED_PATH=\"/usr/local/lib/guile/2.2/site-ccache${GUILE_LOAD_COMPILED_PATH:+:}$GUILE_COMPILED_LOAD_PATH\"\n+```\n+\n+Note that these environment variables are used to check for packages during\n+`./configure`, so they should be set as soon as possible should you want to use\n+a prefix other than `/usr`.\n+\n+<!-- ##### Example: Consistently using Guile 3.0 on Ubuntu -->\n+\n+<!-- For example, on Ubuntu, if you choose to use Guile 3.0 and install the -->\n+<!-- `guile-3.0` package, you want to make sure that if you also want to install the -->\n+<!-- `guile-git` package with `apt` that said `guile-git` package was built for Guile -->\n+<!-- v3.0. This can be checked by invoking the following: -->\n+\n+<!-- ``` -->\n+<!-- apt update -->\n+<!-- apt show guile-git -->\n+<!-- ``` -->\n+\n+#### Building and installing source-built packages\n+\n+*A few dependencies have non-obvious quirks/erratas which are documented in the\n+sub-sections immediately below. Please read these sections before proceeding to\n+build and install these packages.*\n+\n+Although you should always refer to the README or INSTALL files for the most\n+accurate information, most of these dependencies use autoconf-style build\n+systems (check if there's a `configure.ac` file), and will likely do the right\n+thing with this simple routine:\n+\n+```sh\n+git clone <git-repo-of-dependency>/<dependency>.git\n+cd <dependency>\n+git tag -l  # check for the latest release\n+git checkout <latest-release>\n+\n+autoreconf -vfi\n+./configure --prefix=<prefix>\n+make\n+sudo make install\n+```\n+\n+If you choose not to specify exactly `--prefix=/usr` to `./configure`, please\n+make sure you've carefully read the [previous section] on mixing distribution\n+packages and source-built packages.\n+\n+##### Binding packages require `-dev`-suffixed packages\n+\n+Relevant for:\n+- Everyone\n+\n+When building bindings, the `-dev`-suffixed version of the original package\n+needs to be installed. For example, building `Guile-zlib` requires that a\n+debian-derived distribution has `zlib1g-dev` installed.\n+\n+When using bindings, the `-dev`-suffixed version of the original package still\n+needs to be installed. This is particularly problematic when distribution\n+packages are mispackaged like `guile-sqlite3` is in Ubuntu Focal such that\n+installing `guile-sqlite3` does not automatically install `libsqlite3-dev` as a\n+dependency.\n+\n+Below is a list of relevant Guile bindings and their corresponding `-dev`\n+packages in Debian at the time of writing.\n+\n+| Guile binding package | -dev Debian package |\n+|-----------------------|---------------------|\n+| guile-gcrypt          | libgcrypt-dev       |\n+| guile-git             | libgit2-dev         |\n+| guile-lzlib           | liblz-dev           |\n+| guile-ssh             | libssh-dev          |\n+| guile-sqlite3         | libsqlite3-dev      |\n+| guile-zlib            | zlib1g-dev          |\n+\n+##### `guile-git` actually depends on `libgit2 >= 1.1`\n+\n+Relevant for:\n+- Those building `guile-git` from source against `libgit2 < 1.1`\n+- Those installing `guile-git` from their distribution where `guile-git` is\n+  built against `libgit2 < 1.1`\n+\n+As of v0.4.0, `guile-git` claims to only require `libgit2 >= 0.28.0`, however,\n+it actually requires `libgit2 >= 1.1`, otherwise, it will be confused by a\n+reference of `origin/keyring`: instead of interpreting the reference as \"the\n+'keyring' branch of the 'origin' remote\", the reference is interpreted as \"the\n+branch literally named 'origin/keyring'\"\n+\n+This is especially notable because Ubuntu Focal packages `libgit2 v0.28.4`, and\n+`guile-git` is built against it.\n+\n+Should you be in this situation, you need to build both `libgit2 v1.1.x` and\n+`guile-git` from source.\n+\n+Source: http://logs.guix.gnu.org/guix/2020-11-12.log#232527\n+\n+##### `{scheme,guile}-bytestructures` v1.0.8 and v1.0.9 are broken for Guile v2.2\n+\n+Relevant for:\n+- Those building `{scheme,guile}-bytestructures` from source against Guile v2.2\n+\n+Commit\n+[707eea3](https://github.com/TaylanUB/scheme-bytestructures/commit/707eea3a85e1e375e86702229ebf73d496377669)\n+introduced a regression for Guile v2.2 and was first included in v1.0.8, this\n+was later corrected in commit\n+[ec9a721](https://github.com/TaylanUB/scheme-bytestructures/commit/ec9a721957c17bcda13148f8faa5f06934431ff7)\n+and included in v1.1.0.\n+\n+TL;DR If you decided to use Guile v2.2, do not use `{scheme,guile}-bytestructures` v1.0.8 or v1.0.9.\n+\n+### Building and Installing Guix itself\n+\n+Start by cloning Guix:\n+\n+```\n+git clone https://git.savannah.gnu.org/git/guix.git\n+cd guix\n+```\n+\n+You will likely want to build the latest release, however, if the latest release\n+when you're reading this is still 1.2.0 then you may want to use 95aca29 instead\n+to avoid a problem in the GnuTLS test suite.\n+\n+```\n+git branch -a -l 'origin/version-*'  # check for the latest release\n+git checkout <latest-release>\n+```\n+\n+Bootstrap the build system:\n+```\n+./bootstrap\n+```\n+\n+Configure with the recommended `--localstatedir` flag:\n+```\n+./configure --localstatedir=/var\n+```\n+\n+Note: If you intend to hack on Guix in the future, you will need to supply the\n+same `--localstatedir=` flag for all future Guix `./configure` invocations. See\n+the last paragraph of this\n+[section](https://guix.gnu.org/manual/en/html_node/Requirements.html) for more\n+details.\n+\n+Build Guix (this will take a while):\n+```\n+make -j$(nproc)\n+```\n+\n+Install Guix:\n+\n+```\n+sudo make install\n+```\n+\n+##### Setting Up the Daemon\n+\n+###### Fixing `argv[0]`\n+\n+At this point, guix will be installed to `${bindir}`, which is likely\n+`/usr/local/bin` if you did not override directory variables at\n+`./configure`-time. More information on standard Automake directory variables\n+can be found\n+[here](https://www.gnu.org/software/automake/manual/html_node/Standard-Directory-Variables.html).\n+\n+However, the Guix init scripts and service configurations for Upstart, systemd,\n+SysV, and OpenRC are installed to launch\n+`${localstatedir}/guix/profiles/per-user/root/current-guix/bin/guix-daemon`,\n+which does not yet exist, and will only exist after `root` performs their first\n+`guix pull`.\n+\n+We need to create a `-original` version of these init scripts that's pointed to\n+binaries in `${bindir}` (normally, `/usr/local/bin`).\n+\n+Example for `systemd`, run as `root`:\n+\n+```sh\n+# Create guix-daemon-original.service by modifying guix-daemon.service\n+bindir=\"$(dirname $(command -v guix-daemon))\"\n+sed -E -e \"s|/\\S*/guix/profiles/per-user/root/current-guix/bin/guix-daemon|${bindir}/guix-daemon|\" /etc/systemd/system/guix-daemon.service > /etc/systemd/system/guix-daemon-original.service\n+chmod 664 /etc/systemd/system/guix-daemon-original.service\n+\n+# Make systemd recognize the new service\n+systemctl daemon-reload\n+\n+# Make sure that the non-working guix-daemon.service is stopped and disabled\n+systemctl stop guix-daemon\n+systemctl disable guix-daemon\n+\n+# Make sure that the working guix-daemon-original.service is started and enabled\n+systemctl enable guix-daemon-original\n+systemctl start guix-daemon-original\n+```\n+\n+###### Create guix-daemon users / groups\n+\n+Please see the [relevant\n+section](https://guix.gnu.org/manual/en/html_node/Build-Environment-Setup.html)\n+in the Guix Reference Manual for more details.\n+\n+## Optional setup\n+\n+At this point, you are set up to [use Guix to build bitcoin](). However, if you\n+want to polish your setup a bit and make it \"what Guix intended\", then read the\n+next few subsections.\n+\n+### Add an `/etc/profile.d` entry\n+\n+Although Guix knows how to update itself and its packages, it does so in a\n+non-invasive way (it does not modify `/usr/local/bin/guix`).\n+\n+Instead, it does the following:\n+\n+- After a `guix pull`, it updates\n+  `/var/guix/profiles/per-user/$USER/current-guix`, and creates a symlink\n+  targeting this directory at `$HOME/.config/guix/current`\n+\n+- After a `guix install`, it updates\n+  `/var/guix/profiles/per-user/$USER/guix-profile`, and creates a symlink\n+  targeting this directory at `$HOME/.guix-profile`\n+\n+Therefore, in order for these operations to effect your shell/desktop sessions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615203071",
      "id" : 615203071,
      "line" : 504,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTIwMzA3MQ==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 504,
      "original_position" : 504,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 504,
      "pull_request_review_id" : 638195828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-17T04:33:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615203071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615205208"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615205208"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you mean `guix-daemon` here.",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-17T04:30:19Z",
      "diff_hunk" : "@@ -9,79 +11,835 @@ downloads.\n \n We achieve bootstrappability by using Guix as a functional package manager.\n \n-## Requirements\n+# Requirements\n \n Conservatively, a x86_64 machine with:\n \n - 16GB of free disk space on the partition that /gnu/store will reside in\n - 8GB of free disk space per platform triple you're planning on building (see\n   the `HOSTS` environment variable description)\n \n-## Setup\n+# Installation and Setup\n+\n+At the time of writing, the latest Guix release is v1.2.0, which has a known\n+problems w/re building GnuTLS from source. Solutions and workarounds are\n+documented [here](), but I would recommend that you install v1.2.1 (planned for\n+release on April 18th, 2021) or later if your choice of installation option\n+allows.\n+\n+This only needs to be done once per machine. If you have already completed the\n+installation and setup, please proceed to [perform a build](#usage).\n+\n+Otherwise, you may choose from one of the following options to install Guix:\n+\n+1. Using the official **shell installer script** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Easiest (automatically performs *most* setup)\n+   - Works on nearly all Linux distributions\n+   - Only installs latest release\n+   - Binary installation only, requires high level of trust\n+   - Note: The script needs to be run as root, so it should be inspected before it's run\n+2. Using the official **binary tarball** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Normal difficulty (full manual setup required)\n+   - Works on nearly all Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+3. Using fanquake's **Docker image** [âï¸ external instructions]()\n+   - Maintained by fanquake\n+   - Easy (automatically performs *some* setup)\n+   - Works on most Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+4. Using a **distribution-maintained package** [â¤ skip to section]()\n+   - Maintained by distribution's Guix package maintainer\n+   - Normal difficulty (manual setup required)\n+   - Works only on distributions with Guix packaged, at time of writing:\n+     - Debian Bullseye or later\n+     - Ubuntu Hirsute or later\n+     - Arch Linux (via AUR)\n+   - Installs a release decided on by package maintainer\n+   - Source or binary installation depending on distribution\n+5. Building **from source** [â¤ skip to section]()\n+   - Maintained by you\n+   - Hard, but rewarding\n+   - Can be made to work on most Linux distributions\n+   - Installs any commit (more granular)\n+   - Source installation, requires lower level of trust\n+\n+## Option 1: Using the official shell installer script\n+\n+The shell installer script provided by the Guix maintainers automates the\n+download, installation, and initial configuration steps detailed\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+\n+To install Guix using this method, do the following as `root` (e.g. via `su -`):\n+\n+```sh\n+# Use /tmp as the working directory\n+cd /tmp\n+\n+# Download the script\n+wget https://git.savannah.gnu.org/cgit/guix.git/plain/etc/guix-install.sh\n+\n+# Inspect the script\n+less guix-install.sh\n+\n+# Make the script executable\n+chmod +x guix-install.sh\n+\n+# Run the script\n+./guix-install.sh\n+```\n+\n+\n+## Option 2: Using the official binary tarball\n+\n+Follow the binary installation instructions step-by-step in the Guix Reference\n+Manual\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+Ignore the note about using the shell installer script since that does not\n+apply. This is largely equivalent to maually performing what the shell installer\n+script does.\n+\n+## Option 3: TODO fanquake docker\n+\n+## Option 4: Using a distribution-maintained package\n+\n+### Debian/Ubuntu\n+\n+Guix v1.2.0 is available as a distribution package starting in [Debian\n+11](https://packages.debian.org/bullseye/guix) (\"bullseye\") and [Ubuntu\n+21.04](https://packages.ubuntu.com/hirsute/guix) (Hirsute Hippo).\n+\n+To install:\n+```sh\n+sudo apt install guix\n+```\n+\n+For up-to-date information on Debian and Ubuntu's release history:\n+- [Debian release history](https://www.debian.org/releases/)\n+- [Ubuntu release history](https://ubuntu.com/about/release-cycle)\n+\n+### Arch Linux\n+\n+Guix is available in the AUR as\n+[`guix`](https://aur.archlinux.org/packages/guix/), please follow the\n+installation instructions in the Arch Linux Wiki ([live\n+link](https://wiki.archlinux.org/index.php/Guix#AUR_Package_Installation),\n+[2021/03/30\n+permalink](https://wiki.archlinux.org/index.php?title=Guix&oldid=637559#AUR_Package_Installation))\n+to install Guix.\n+\n+At the time of writing (2021/03/30), the `check` phase will fail if the path to\n+guix's build directory is longer than 36 characters due to an anachronistic\n+character limit on the shebang line. Since the `check` phase happens after the\n+`build` phase, which may take quite a long time, it is recommended that users\n+either:\n+\n+1. Skip the `check` phase\n+    - For `makepkg`: `makepkg --nocheck ...`\n+    - For `yay`: `yay --mflags=\"--nocheck\" ...`\n+    - For `paru`: `paru --nocheck ...`\n+2. Or, check their build directory's length beforehand\n+    - For those building with `makepkg`: `pwd | wc -c`\n+\n+## Option 5: Building from source\n+\n+Building Guix from source is a rather involved process but a rewarding one for\n+those looking to minimize trust and maximize customizability (e.g. building a\n+particular commit of Guix). Previous experience with using autotools-style build\n+systems to build packages from source will be helpful. *hic sunt dracones.*\n+\n+### Installing common build tools\n+\n+There are a few basic build tools that are required for most things we'll build,\n+so let's install them now:\n+\n+Text transformation/i18n:\n+- `autopoint` (sometimes packaged in `gettext`)\n+- `help2man`\n+- `po4a`\n+- `texinfo`\n+\n+Build system tools:\n+- `g++` w/ C++11 support\n+- `libtool`\n+- `autoconf`\n+- `automake`\n+- `pkg-config` (sometimes packaged as `pkgconf`)\n+- `make`\n+- `cmake`\n+\n+Miscellaneous:\n+- `git`\n+- `gnupg`\n+- `python3`\n+\n+### Building and Installing Guix's dependencies\n+\n+In order to build Guix itself from source, we need to first make sure that the\n+necessary dependencies are installed and discoverable. The most up-to-date list\n+of Guix's dependencies is kept in the [\"Requirements\"\n+section](https://guix.gnu.org/manual/en/html_node/Requirements.html) of the Guix\n+Reference Manual.\n+\n+Depending on your distribution, most or all of these dependencies may already be\n+packaged and installable without manually building and installing.\n+\n+#### Guile\n+\n+##### Choosing a Guile version and sticking to it\n+\n+One of the first things you need to decide is which Guile version you want to\n+use: Guile v2.2 or Guile v3.0. Unlike the python2 to python3 transition, Guile\n+v2.2 and Guile v3.0 are largely compatible, as evidenced by the fact that most\n+Guile packages and even [Guix\n+itself](https://guix.gnu.org/en/blog/2020/guile-3-and-guix/) support running on\n+both.\n+\n+What is important here is that you **choose one**, and you **remain consistent**\n+with your choice throughout **all Guile-related packages**, no matter if they\n+are installed via the distribution's package manager or installed from source.\n+This is because the files for Guile packages are installed to directories which\n+are separated based on the Guile version.\n+\n+###### Example: Checking that Ubuntu's `guile-git` is compatible with your chosen Guile version\n+\n+On Ubuntu Focal:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-2.2, guile-bytestructures, libgit2-dev\n+...\n+```\n+\n+As you can see, the package `guile-git` depends on `guile-2.2`, meaning that it\n+was likely built for Guile v2.2. This means that if you decided to use Guile\n+v3.0 on Ubuntu Focal, you would need to build guile-git from source instead of\n+using the distribution package.\n+\n+On Ubuntu Hirsute:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-3.0 | guile-2.2, guile-bytestructures (>= 1.0.7-3~), libgit2-dev (>= 1.0)\n+...\n+```\n+\n+In this case, `guile-git` depends on either `guile-3.0` or `guile-2.2`, meaning\n+that it would work no matter what Guile version you decided to use.\n+\n+###### Corner case: Multiple versions of Guile on one system\n+\n+It is recommended to only install one version of Guile, so that build systems do\n+not get confused about which Guile to use.\n+\n+However, if you insist on having both Guile v2.2 and Guile v3.0 installed on\n+your system, then you need to **consistently** specify one of\n+`GUILE_EFFECTIVE_VERSION=3.0` or `GUILE_EFFECTIVE_VERSION=2.2` to all\n+`./configure` invocations for Guix and its dependencies.\n+\n+##### Installing Guile\n+\n+Guile is most likely already packaged for your distribution, so after you have\n+[chosen a Guile version](), install it via your distribution's package manager.\n+\n+If your distribution splits packages into `-dev`-suffixed and\n+non-`-dev`-suffixed sub-packages (as is the case for debian-derived\n+distributions), please make sure to install both. For example, to install Guile\n+v2.2 on Debian/Ubuntu:\n+\n+```sh\n+apt install guile-2.2 guile-2.2-dev\n+```\n+\n+#### Mixing distribution packages and source-built packages\n+\n+At the time of writing, most distributions have _some_ of Guix's dependencies\n+packaged, but not all. This means that you may want to install the distribution\n+package for some dependencies, and manually build-from-source for others.\n+\n+Distribution packages usually install to `/usr`, which is different from the\n+default `./configure` prefix of source-built packages: `/usr/local`.\n+\n+This means that if you mix-and-match distribution packages and source-built\n+packages and do not specify exactly `--prefix=/usr` to `./configure` for\n+source-built packages, you will need to augment the `GUILE_LOAD_PATH` and\n+`GUILE_LOAD_COMPILED_PATH` environment variables so that Guile will look\n+under the right prefix and find your source-built packages.\n+\n+For example, if you are using Guile v2.2, and have Guile packages in the\n+`/usr/local` prefix, either add the following lines to your `.profile` or\n+`.bash_profile` so that the environment variable is properly set for all future\n+shell logins, or paste the lines into a POSIX-style shell to temporarily modify\n+the environment variables of your current shell session.\n+\n+```sh\n+# Help Guile v2.2.x find packages in /usr/local\n+export GUILE_LOAD_PATH=\"/usr/local/share/guile/site/2.2${GUILE_LOAD_PATH:+:}$GUILE_LOAD_PATH\"\n+export GUILE_LOAD_COMPILED_PATH=\"/usr/local/lib/guile/2.2/site-ccache${GUILE_LOAD_COMPILED_PATH:+:}$GUILE_COMPILED_LOAD_PATH\"\n+```\n+\n+Note that these environment variables are used to check for packages during\n+`./configure`, so they should be set as soon as possible should you want to use\n+a prefix other than `/usr`.\n+\n+<!-- ##### Example: Consistently using Guile 3.0 on Ubuntu -->\n+\n+<!-- For example, on Ubuntu, if you choose to use Guile 3.0 and install the -->\n+<!-- `guile-3.0` package, you want to make sure that if you also want to install the -->\n+<!-- `guile-git` package with `apt` that said `guile-git` package was built for Guile -->\n+<!-- v3.0. This can be checked by invoking the following: -->\n+\n+<!-- ``` -->\n+<!-- apt update -->\n+<!-- apt show guile-git -->\n+<!-- ``` -->\n+\n+#### Building and installing source-built packages\n+\n+*A few dependencies have non-obvious quirks/erratas which are documented in the\n+sub-sections immediately below. Please read these sections before proceeding to\n+build and install these packages.*\n+\n+Although you should always refer to the README or INSTALL files for the most\n+accurate information, most of these dependencies use autoconf-style build\n+systems (check if there's a `configure.ac` file), and will likely do the right\n+thing with this simple routine:\n+\n+```sh\n+git clone <git-repo-of-dependency>/<dependency>.git\n+cd <dependency>\n+git tag -l  # check for the latest release\n+git checkout <latest-release>\n+\n+autoreconf -vfi\n+./configure --prefix=<prefix>\n+make\n+sudo make install\n+```\n+\n+If you choose not to specify exactly `--prefix=/usr` to `./configure`, please\n+make sure you've carefully read the [previous section] on mixing distribution\n+packages and source-built packages.\n+\n+##### Binding packages require `-dev`-suffixed packages\n+\n+Relevant for:\n+- Everyone\n+\n+When building bindings, the `-dev`-suffixed version of the original package\n+needs to be installed. For example, building `Guile-zlib` requires that a\n+debian-derived distribution has `zlib1g-dev` installed.\n+\n+When using bindings, the `-dev`-suffixed version of the original package still\n+needs to be installed. This is particularly problematic when distribution\n+packages are mispackaged like `guile-sqlite3` is in Ubuntu Focal such that\n+installing `guile-sqlite3` does not automatically install `libsqlite3-dev` as a\n+dependency.\n+\n+Below is a list of relevant Guile bindings and their corresponding `-dev`\n+packages in Debian at the time of writing.\n+\n+| Guile binding package | -dev Debian package |\n+|-----------------------|---------------------|\n+| guile-gcrypt          | libgcrypt-dev       |\n+| guile-git             | libgit2-dev         |\n+| guile-lzlib           | liblz-dev           |\n+| guile-ssh             | libssh-dev          |\n+| guile-sqlite3         | libsqlite3-dev      |\n+| guile-zlib            | zlib1g-dev          |\n+\n+##### `guile-git` actually depends on `libgit2 >= 1.1`\n+\n+Relevant for:\n+- Those building `guile-git` from source against `libgit2 < 1.1`\n+- Those installing `guile-git` from their distribution where `guile-git` is\n+  built against `libgit2 < 1.1`\n+\n+As of v0.4.0, `guile-git` claims to only require `libgit2 >= 0.28.0`, however,\n+it actually requires `libgit2 >= 1.1`, otherwise, it will be confused by a\n+reference of `origin/keyring`: instead of interpreting the reference as \"the\n+'keyring' branch of the 'origin' remote\", the reference is interpreted as \"the\n+branch literally named 'origin/keyring'\"\n+\n+This is especially notable because Ubuntu Focal packages `libgit2 v0.28.4`, and\n+`guile-git` is built against it.\n+\n+Should you be in this situation, you need to build both `libgit2 v1.1.x` and\n+`guile-git` from source.\n+\n+Source: http://logs.guix.gnu.org/guix/2020-11-12.log#232527\n+\n+##### `{scheme,guile}-bytestructures` v1.0.8 and v1.0.9 are broken for Guile v2.2\n+\n+Relevant for:\n+- Those building `{scheme,guile}-bytestructures` from source against Guile v2.2\n+\n+Commit\n+[707eea3](https://github.com/TaylanUB/scheme-bytestructures/commit/707eea3a85e1e375e86702229ebf73d496377669)\n+introduced a regression for Guile v2.2 and was first included in v1.0.8, this\n+was later corrected in commit\n+[ec9a721](https://github.com/TaylanUB/scheme-bytestructures/commit/ec9a721957c17bcda13148f8faa5f06934431ff7)\n+and included in v1.1.0.\n+\n+TL;DR If you decided to use Guile v2.2, do not use `{scheme,guile}-bytestructures` v1.0.8 or v1.0.9.\n+\n+### Building and Installing Guix itself\n+\n+Start by cloning Guix:\n+\n+```\n+git clone https://git.savannah.gnu.org/git/guix.git\n+cd guix\n+```\n+\n+You will likely want to build the latest release, however, if the latest release\n+when you're reading this is still 1.2.0 then you may want to use 95aca29 instead\n+to avoid a problem in the GnuTLS test suite.\n+\n+```\n+git branch -a -l 'origin/version-*'  # check for the latest release\n+git checkout <latest-release>\n+```\n+\n+Bootstrap the build system:\n+```\n+./bootstrap\n+```\n+\n+Configure with the recommended `--localstatedir` flag:\n+```\n+./configure --localstatedir=/var\n+```\n+\n+Note: If you intend to hack on Guix in the future, you will need to supply the\n+same `--localstatedir=` flag for all future Guix `./configure` invocations. See\n+the last paragraph of this\n+[section](https://guix.gnu.org/manual/en/html_node/Requirements.html) for more\n+details.\n+\n+Build Guix (this will take a while):\n+```\n+make -j$(nproc)\n+```\n+\n+Install Guix:\n+\n+```\n+sudo make install\n+```\n+\n+##### Setting Up the Daemon\n+\n+###### Fixing `argv[0]`\n+\n+At this point, guix will be installed to `${bindir}`, which is likely\n+`/usr/local/bin` if you did not override directory variables at\n+`./configure`-time. More information on standard Automake directory variables\n+can be found\n+[here](https://www.gnu.org/software/automake/manual/html_node/Standard-Directory-Variables.html).\n+\n+However, the Guix init scripts and service configurations for Upstart, systemd,\n+SysV, and OpenRC are installed to launch\n+`${localstatedir}/guix/profiles/per-user/root/current-guix/bin/guix-daemon`,\n+which does not yet exist, and will only exist after `root` performs their first\n+`guix pull`.\n+\n+We need to create a `-original` version of these init scripts that's pointed to\n+binaries in `${bindir}` (normally, `/usr/local/bin`).\n+\n+Example for `systemd`, run as `root`:\n+\n+```sh\n+# Create guix-daemon-original.service by modifying guix-daemon.service\n+bindir=\"$(dirname $(command -v guix-daemon))\"\n+sed -E -e \"s|/\\S*/guix/profiles/per-user/root/current-guix/bin/guix-daemon|${bindir}/guix-daemon|\" /etc/systemd/system/guix-daemon.service > /etc/systemd/system/guix-daemon-original.service\n+chmod 664 /etc/systemd/system/guix-daemon-original.service\n+\n+# Make systemd recognize the new service\n+systemctl daemon-reload\n+\n+# Make sure that the non-working guix-daemon.service is stopped and disabled\n+systemctl stop guix-daemon\n+systemctl disable guix-daemon\n+\n+# Make sure that the working guix-daemon-original.service is started and enabled\n+systemctl enable guix-daemon-original\n+systemctl start guix-daemon-original\n+```\n+\n+###### Create guix-daemon users / groups\n+\n+Please see the [relevant\n+section](https://guix.gnu.org/manual/en/html_node/Build-Environment-Setup.html)\n+in the Guix Reference Manual for more details.\n+\n+## Optional setup\n+\n+At this point, you are set up to [use Guix to build bitcoin](). However, if you\n+want to polish your setup a bit and make it \"what Guix intended\", then read the\n+next few subsections.\n+\n+### Add an `/etc/profile.d` entry\n+\n+Although Guix knows how to update itself and its packages, it does so in a\n+non-invasive way (it does not modify `/usr/local/bin/guix`).\n+\n+Instead, it does the following:\n+\n+- After a `guix pull`, it updates\n+  `/var/guix/profiles/per-user/$USER/current-guix`, and creates a symlink\n+  targeting this directory at `$HOME/.config/guix/current`\n+\n+- After a `guix install`, it updates\n+  `/var/guix/profiles/per-user/$USER/guix-profile`, and creates a symlink\n+  targeting this directory at `$HOME/.guix-profile`\n+\n+Therefore, in order for these operations to effect your shell/desktop sessions\n+(and for the principle of least astonishment to hold), their corresponding\n+directories have to be added to well-known environment variables like `$PATH`,\n+`$INFOPATH`, `$XDG_DATA_DIRS`, etc.\n+\n+In other words, if `$HOME/.config/guix/current/bin` does not exist in your\n+`$PATH`, a `guix pull` will have no effect on what `guix` you are using. Same\n+goes for `$HOME/.guix-profile/bin`, `guix install`, and installed packages.\n+\n+Helpfully, after a `guix pull` or `guix install`, a message will be printed like\n+so:\n+\n+```\n+hint: Consider setting the necessary environment variables by running:\n+\n+     GUIX_PROFILE=\"$HOME/.guix-profile\"\n+     . \"$GUIX_PROFILE/etc/profile\"\n+\n+Alternately, see `guix package --search-paths -p \"$HOME/.guix-profile\"'.\n+```\n+\n+However, this is somewhat tedious to do for both `guix pull` and `guix install`\n+for each user on the system that wants to properly use `guix`. I recommend that\n+you instead add an entry to `/etc/profile.d` instead. This is done by default\n+when installing the Debian package later than 1.2.0-4 and when using the shell\n+script installer.\n+\n+Create `/etc/profile.d/guix.sh` with the following content:\n+```sh\n+# _GUIX_PROFILE: `guix pull` profile\n+_GUIX_PROFILE=\"$HOME/.config/guix/current\"\n+if [ -L $_GUIX_PROFILE ]; then\n+  export PATH=\"$_GUIX_PROFILE/bin${PATH:+:}$PATH\"\n+  # Export INFOPATH so that the updated info pages can be found\n+  # and read by both /usr/bin/info and/or $GUIX_PROFILE/bin/info\n+  # When INFOPATH is unset, add a trailing colon so that Emacs\n+  # searches 'Info-default-directory-list'.\n+  export INFOPATH=\"$_GUIX_PROFILE/share/info:$INFOPATH\"\n+fi\n+\n+# GUIX_PROFILE: User's default profile\n+GUIX_PROFILE=\"$HOME/.guix-profile\"\n+[ -L $GUIX_PROFILE ] || return\n+GUIX_LOCPATH=\"$GUIX_PROFILE/lib/locale\"\n+export GUIX_PROFILE GUIX_LOCPATH\n+\n+[ -f \"$GUIX_PROFILE/etc/profile\" ] && . \"$GUIX_PROFILE/etc/profile\"\n+\n+# set XDG_DATA_DIRS to include Guix installations\n+export XDG_DATA_DIRS=\"$GUIX_PROFILE/share:${XDG_DATA_DIRS:-/usr/local/share/:/usr/share/}\"\n+```\n+\n+Please note that this will not take effect until the next shell or desktop\n+session (log out and log back in).\n+\n+### `guix pull` as root\n+\n+Before you do this, you need to read [choose your security model]() and adjust\n+`guix` and `guix-daemon` flags according to your choice, as invoking `guix pull`\n+may pull substitutes from substitute servers (which you may not want).\n+\n+As mentioned in a previous section, Guix expects\n+`${localstatedir}/guix/profiles/per-user/root/current-guix` to be populated with\n+`root`'s Guix profile, `guix pull`-ed and built by some former version of Guix.\n+However, this is not the case when we build from source. Therefore, we need to\n+perform a `guix pull` as `root`:\n+\n+```sh\n+sudo --login guix pull --branch=version-<latest-release-version>\n+# or\n+sudo --login guix pull --commit=<particular-commit>\n+```\n+\n+`guix pull` is quite a long process (espcially if you're using\n+`--no-substitute`). If you encounter build problems, please refer to the\n+[troubleshooting section]().\n+\n+Note that running a bare `guix pull` with no commit or branch specified will\n+pull the latest commit on Guix's master branch, which is likely fine, but not\n+recommended.\n+\n+If you installed Guix from source, you may get an error like the following:\n+```sh\n+error: while creating symlink '/root/.config/guix/current' No such file or directory\n+```\n+To resolve this, simply:\n+```\n+sudo mkdir -p /root/.config/guix\n+```\n+Then try the `guix pull` command again.\n+\n+After the `guix pull` finishes successfully,\n+`${localstatedir}/guix/profiles/per-user/root/current-guix` should be populated.\n+\n+### Restarting the daemon\n+\n+If you built Guix from source and followed the instructions for [fixing argv\\[0\\]](), you can\n+now do the following:\n+\n+```sh\n+systemctl stop guix-daemon-original\n+systemctl disable guix-daemon-original\n+\n+systemctl enable guix-daemon\n+systemctl start guix-daemon\n+```\n+\n+Otherwise, simply do:\n \n-### Installing Guix\n+```sh\n+systemctl restart guix-daemon\n+```\n+\n+### Checking everything\n+\n+If you followed all the steps above to make your Guix setup \"prim and proper,\"\n+you can check that you did everything properly by running through this\n+checklist.\n+\n+1. `/etc/profile.d/guix.sh` should exist and be sourced at each shell login\n \n-If you're just testing this out, you can use the\n-[Dockerfile][fanquake/guix-docker] for convenience. It automatically speeds up\n-your builds by [using substitutes](#speeding-up-builds-with-substitute-servers).\n-If you don't want this behaviour, refer to the [next\n-section](#choosing-your-security-model).\n+2. `guix describe` should not print `guix describe: error: failed to determine\n+   origin`, but rather something like:\n \n-Otherwise, follow the [Guix installation guide][guix/bin-install].\n+   ```\n+   Generation 38   Feb 22 2021 16:39:31    (current)\n+     guix f350df4\n+       repository URL: https://git.savannah.gnu.org/git/guix.git\n+       branch: version-1.2.0\n+       commit: f350df405fbcd5b9e27e6b6aa500da7f101f41e7\n+   ```\n \n-> Note: For those who like to keep their filesystems clean, Guix is designed to\n-> be very standalone and _will not_ conflict with your system's package\n-> manager/existing setup. It _only_ touches `/var/guix`, `/gnu`, and\n-> `~/.config/guix`.\n+3. `guix-daemon` should be running from `${localstatedir}/guix/profiles/per-user/root/current-guix`\n \n-### Choosing your security model\n+\n+# Choosing your security model\n+\n+No matter how you installed Guix, you need to now decide on your security model\n+for building packages with Guix.\n \n Guix allows us to achieve better binary security by using our CPU time to build\n everything from scratch. However, it doesn't sacrifice user choice in pursuit of\n-this: users can decide whether or not to bootstrap and to use substitutes\n-(pre-built packages).\n+this: users can decide whether or not to use substitutes (pre-built packages).\n+\n+## Option 1: Building with substitutes\n+\n+### Step 1: Authorize the signing keys\n+\n+Depending on the installation procedure you followed, you may have already\n+authorized the Guix build farm key. In particular, the official shell installer\n+script asks you if you want the key installed, and the debian distribution\n+package authorized the key during installation.\n+\n+You can check the current list of authorized keys at `/etc/guix/acl`.\n+\n+At the time of writing, a `/etc/guix/acl` with just the Guix build farm key\n+authorized looks something like:\n+```lisp\n+(acl\n+ (entry\n+  (public-key\n+   (ecc\n+    (curve Ed25519)\n+    (q #8D156F295D24B0D9A86FA5741A840FF2D24F60F7B6C4134814AD55625971B394#)\n+    )\n+   )\n+  (tag\n+   (guix import)\n+   )\n+  )\n+ )\n+```\n \n-After installation, you may want to consider [adding substitute\n-servers](#speeding-up-builds-with-substitute-servers) from which to download\n-pre-built packages to speed up your build if that fits your security model (say,\n-if you're just testing that this works). Substitute servers are set up by\n-default if you're using the [Dockerfile][fanquake/guix-docker].\n+If you've determined that the official Guix build farm key hasn't been\n+authorized, and you would like to authorize it, run the following as root:\n+\n+```\n+guix archive --authorize < /var/guix/profiles/per-user/root/current-guix/share/guix/ci.guix.gnu.org.pub\n+```\n+\n+If\n+`/var/guix/profiles/per-user/root/current-guix/share/guix/ci.guix.gnu.org.pub`\n+doesn't exist, try:\n+\n+```sh\n+guix archive --authorize < <PREFIX>/share/guix/ci.guix.gnu.org.pub\n+```\n+\n+Where <PREFIX> is likely:\n+- `/usr` if you installed from a distribution package\n+- `/usr/local` if you installed Guix from source and didn't supply any\n+  prefix-modifying flags to Guix's `./configure`\n+\n+For dongcarl's substitute server at https://guix.carldong.io, run as root:\n+\n+```sh\n+wget -qO- 'https://guix.carldong.io/signing-key.pub' | guix archive --authorize\n+```\n+\n+### Step 2: Specify the substitute servers\n+\n+Once its key is authorized, the official Guix build farm at\n+https://ci.guix.gnu.org is automatically used unless the `--no-substitutes` flag\n+is supplied. This behaviour is overridable. See examples below for the various\n+ways of adding dongcarl's substitute server after having [authorized his signing\n+key](#authorize-the-signing-keys).\n+\n+Change the default list of substitute servers by starting `guix-daemon` with the\n+`--substitute-urls` option:\n+```\n+guix <cmd> --substitute-urls=\"https://guix.carldong.io https://ci.guix.gnu.org\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615205208",
      "id" : 615205208,
      "line" : 714,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTIwNTIwOA==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 714,
      "original_position" : 733,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 733,
      "pull_request_review_id" : 638195828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-17T04:33:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615205208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615296503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615296503"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: s/maually/manually/",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-17T19:41:40Z",
      "diff_hunk" : "@@ -9,79 +11,835 @@ downloads.\n \n We achieve bootstrappability by using Guix as a functional package manager.\n \n-## Requirements\n+# Requirements\n \n Conservatively, a x86_64 machine with:\n \n - 16GB of free disk space on the partition that /gnu/store will reside in\n - 8GB of free disk space per platform triple you're planning on building (see\n   the `HOSTS` environment variable description)\n \n-## Setup\n+# Installation and Setup\n+\n+At the time of writing, the latest Guix release is v1.2.0, which has a known\n+problems w/re building GnuTLS from source. Solutions and workarounds are\n+documented [here](), but I would recommend that you install v1.2.1 (planned for\n+release on April 18th, 2021) or later if your choice of installation option\n+allows.\n+\n+This only needs to be done once per machine. If you have already completed the\n+installation and setup, please proceed to [perform a build](#usage).\n+\n+Otherwise, you may choose from one of the following options to install Guix:\n+\n+1. Using the official **shell installer script** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Easiest (automatically performs *most* setup)\n+   - Works on nearly all Linux distributions\n+   - Only installs latest release\n+   - Binary installation only, requires high level of trust\n+   - Note: The script needs to be run as root, so it should be inspected before it's run\n+2. Using the official **binary tarball** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Normal difficulty (full manual setup required)\n+   - Works on nearly all Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+3. Using fanquake's **Docker image** [âï¸ external instructions]()\n+   - Maintained by fanquake\n+   - Easy (automatically performs *some* setup)\n+   - Works on most Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+4. Using a **distribution-maintained package** [â¤ skip to section]()\n+   - Maintained by distribution's Guix package maintainer\n+   - Normal difficulty (manual setup required)\n+   - Works only on distributions with Guix packaged, at time of writing:\n+     - Debian Bullseye or later\n+     - Ubuntu Hirsute or later\n+     - Arch Linux (via AUR)\n+   - Installs a release decided on by package maintainer\n+   - Source or binary installation depending on distribution\n+5. Building **from source** [â¤ skip to section]()\n+   - Maintained by you\n+   - Hard, but rewarding\n+   - Can be made to work on most Linux distributions\n+   - Installs any commit (more granular)\n+   - Source installation, requires lower level of trust\n+\n+## Option 1: Using the official shell installer script\n+\n+The shell installer script provided by the Guix maintainers automates the\n+download, installation, and initial configuration steps detailed\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+\n+To install Guix using this method, do the following as `root` (e.g. via `su -`):\n+\n+```sh\n+# Use /tmp as the working directory\n+cd /tmp\n+\n+# Download the script\n+wget https://git.savannah.gnu.org/cgit/guix.git/plain/etc/guix-install.sh\n+\n+# Inspect the script\n+less guix-install.sh\n+\n+# Make the script executable\n+chmod +x guix-install.sh\n+\n+# Run the script\n+./guix-install.sh\n+```\n+\n+\n+## Option 2: Using the official binary tarball\n+\n+Follow the binary installation instructions step-by-step in the Guix Reference\n+Manual\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+Ignore the note about using the shell installer script since that does not\n+apply. This is largely equivalent to maually performing what the shell installer",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615296503",
      "id" : 615296503,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTI5NjUwMw==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 102,
      "original_position" : 102,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 102,
      "pull_request_review_id" : 638270471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-17T19:52:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615296503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615297055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615297055"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: s/espcially/especially/",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-17T19:47:10Z",
      "diff_hunk" : "@@ -9,79 +11,835 @@ downloads.\n \n We achieve bootstrappability by using Guix as a functional package manager.\n \n-## Requirements\n+# Requirements\n \n Conservatively, a x86_64 machine with:\n \n - 16GB of free disk space on the partition that /gnu/store will reside in\n - 8GB of free disk space per platform triple you're planning on building (see\n   the `HOSTS` environment variable description)\n \n-## Setup\n+# Installation and Setup\n+\n+At the time of writing, the latest Guix release is v1.2.0, which has a known\n+problems w/re building GnuTLS from source. Solutions and workarounds are\n+documented [here](), but I would recommend that you install v1.2.1 (planned for\n+release on April 18th, 2021) or later if your choice of installation option\n+allows.\n+\n+This only needs to be done once per machine. If you have already completed the\n+installation and setup, please proceed to [perform a build](#usage).\n+\n+Otherwise, you may choose from one of the following options to install Guix:\n+\n+1. Using the official **shell installer script** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Easiest (automatically performs *most* setup)\n+   - Works on nearly all Linux distributions\n+   - Only installs latest release\n+   - Binary installation only, requires high level of trust\n+   - Note: The script needs to be run as root, so it should be inspected before it's run\n+2. Using the official **binary tarball** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Normal difficulty (full manual setup required)\n+   - Works on nearly all Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+3. Using fanquake's **Docker image** [âï¸ external instructions]()\n+   - Maintained by fanquake\n+   - Easy (automatically performs *some* setup)\n+   - Works on most Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+4. Using a **distribution-maintained package** [â¤ skip to section]()\n+   - Maintained by distribution's Guix package maintainer\n+   - Normal difficulty (manual setup required)\n+   - Works only on distributions with Guix packaged, at time of writing:\n+     - Debian Bullseye or later\n+     - Ubuntu Hirsute or later\n+     - Arch Linux (via AUR)\n+   - Installs a release decided on by package maintainer\n+   - Source or binary installation depending on distribution\n+5. Building **from source** [â¤ skip to section]()\n+   - Maintained by you\n+   - Hard, but rewarding\n+   - Can be made to work on most Linux distributions\n+   - Installs any commit (more granular)\n+   - Source installation, requires lower level of trust\n+\n+## Option 1: Using the official shell installer script\n+\n+The shell installer script provided by the Guix maintainers automates the\n+download, installation, and initial configuration steps detailed\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+\n+To install Guix using this method, do the following as `root` (e.g. via `su -`):\n+\n+```sh\n+# Use /tmp as the working directory\n+cd /tmp\n+\n+# Download the script\n+wget https://git.savannah.gnu.org/cgit/guix.git/plain/etc/guix-install.sh\n+\n+# Inspect the script\n+less guix-install.sh\n+\n+# Make the script executable\n+chmod +x guix-install.sh\n+\n+# Run the script\n+./guix-install.sh\n+```\n+\n+\n+## Option 2: Using the official binary tarball\n+\n+Follow the binary installation instructions step-by-step in the Guix Reference\n+Manual\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+Ignore the note about using the shell installer script since that does not\n+apply. This is largely equivalent to maually performing what the shell installer\n+script does.\n+\n+## Option 3: TODO fanquake docker\n+\n+## Option 4: Using a distribution-maintained package\n+\n+### Debian/Ubuntu\n+\n+Guix v1.2.0 is available as a distribution package starting in [Debian\n+11](https://packages.debian.org/bullseye/guix) (\"bullseye\") and [Ubuntu\n+21.04](https://packages.ubuntu.com/hirsute/guix) (Hirsute Hippo).\n+\n+To install:\n+```sh\n+sudo apt install guix\n+```\n+\n+For up-to-date information on Debian and Ubuntu's release history:\n+- [Debian release history](https://www.debian.org/releases/)\n+- [Ubuntu release history](https://ubuntu.com/about/release-cycle)\n+\n+### Arch Linux\n+\n+Guix is available in the AUR as\n+[`guix`](https://aur.archlinux.org/packages/guix/), please follow the\n+installation instructions in the Arch Linux Wiki ([live\n+link](https://wiki.archlinux.org/index.php/Guix#AUR_Package_Installation),\n+[2021/03/30\n+permalink](https://wiki.archlinux.org/index.php?title=Guix&oldid=637559#AUR_Package_Installation))\n+to install Guix.\n+\n+At the time of writing (2021/03/30), the `check` phase will fail if the path to\n+guix's build directory is longer than 36 characters due to an anachronistic\n+character limit on the shebang line. Since the `check` phase happens after the\n+`build` phase, which may take quite a long time, it is recommended that users\n+either:\n+\n+1. Skip the `check` phase\n+    - For `makepkg`: `makepkg --nocheck ...`\n+    - For `yay`: `yay --mflags=\"--nocheck\" ...`\n+    - For `paru`: `paru --nocheck ...`\n+2. Or, check their build directory's length beforehand\n+    - For those building with `makepkg`: `pwd | wc -c`\n+\n+## Option 5: Building from source\n+\n+Building Guix from source is a rather involved process but a rewarding one for\n+those looking to minimize trust and maximize customizability (e.g. building a\n+particular commit of Guix). Previous experience with using autotools-style build\n+systems to build packages from source will be helpful. *hic sunt dracones.*\n+\n+### Installing common build tools\n+\n+There are a few basic build tools that are required for most things we'll build,\n+so let's install them now:\n+\n+Text transformation/i18n:\n+- `autopoint` (sometimes packaged in `gettext`)\n+- `help2man`\n+- `po4a`\n+- `texinfo`\n+\n+Build system tools:\n+- `g++` w/ C++11 support\n+- `libtool`\n+- `autoconf`\n+- `automake`\n+- `pkg-config` (sometimes packaged as `pkgconf`)\n+- `make`\n+- `cmake`\n+\n+Miscellaneous:\n+- `git`\n+- `gnupg`\n+- `python3`\n+\n+### Building and Installing Guix's dependencies\n+\n+In order to build Guix itself from source, we need to first make sure that the\n+necessary dependencies are installed and discoverable. The most up-to-date list\n+of Guix's dependencies is kept in the [\"Requirements\"\n+section](https://guix.gnu.org/manual/en/html_node/Requirements.html) of the Guix\n+Reference Manual.\n+\n+Depending on your distribution, most or all of these dependencies may already be\n+packaged and installable without manually building and installing.\n+\n+#### Guile\n+\n+##### Choosing a Guile version and sticking to it\n+\n+One of the first things you need to decide is which Guile version you want to\n+use: Guile v2.2 or Guile v3.0. Unlike the python2 to python3 transition, Guile\n+v2.2 and Guile v3.0 are largely compatible, as evidenced by the fact that most\n+Guile packages and even [Guix\n+itself](https://guix.gnu.org/en/blog/2020/guile-3-and-guix/) support running on\n+both.\n+\n+What is important here is that you **choose one**, and you **remain consistent**\n+with your choice throughout **all Guile-related packages**, no matter if they\n+are installed via the distribution's package manager or installed from source.\n+This is because the files for Guile packages are installed to directories which\n+are separated based on the Guile version.\n+\n+###### Example: Checking that Ubuntu's `guile-git` is compatible with your chosen Guile version\n+\n+On Ubuntu Focal:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-2.2, guile-bytestructures, libgit2-dev\n+...\n+```\n+\n+As you can see, the package `guile-git` depends on `guile-2.2`, meaning that it\n+was likely built for Guile v2.2. This means that if you decided to use Guile\n+v3.0 on Ubuntu Focal, you would need to build guile-git from source instead of\n+using the distribution package.\n+\n+On Ubuntu Hirsute:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-3.0 | guile-2.2, guile-bytestructures (>= 1.0.7-3~), libgit2-dev (>= 1.0)\n+...\n+```\n+\n+In this case, `guile-git` depends on either `guile-3.0` or `guile-2.2`, meaning\n+that it would work no matter what Guile version you decided to use.\n+\n+###### Corner case: Multiple versions of Guile on one system\n+\n+It is recommended to only install one version of Guile, so that build systems do\n+not get confused about which Guile to use.\n+\n+However, if you insist on having both Guile v2.2 and Guile v3.0 installed on\n+your system, then you need to **consistently** specify one of\n+`GUILE_EFFECTIVE_VERSION=3.0` or `GUILE_EFFECTIVE_VERSION=2.2` to all\n+`./configure` invocations for Guix and its dependencies.\n+\n+##### Installing Guile\n+\n+Guile is most likely already packaged for your distribution, so after you have\n+[chosen a Guile version](), install it via your distribution's package manager.\n+\n+If your distribution splits packages into `-dev`-suffixed and\n+non-`-dev`-suffixed sub-packages (as is the case for debian-derived\n+distributions), please make sure to install both. For example, to install Guile\n+v2.2 on Debian/Ubuntu:\n+\n+```sh\n+apt install guile-2.2 guile-2.2-dev\n+```\n+\n+#### Mixing distribution packages and source-built packages\n+\n+At the time of writing, most distributions have _some_ of Guix's dependencies\n+packaged, but not all. This means that you may want to install the distribution\n+package for some dependencies, and manually build-from-source for others.\n+\n+Distribution packages usually install to `/usr`, which is different from the\n+default `./configure` prefix of source-built packages: `/usr/local`.\n+\n+This means that if you mix-and-match distribution packages and source-built\n+packages and do not specify exactly `--prefix=/usr` to `./configure` for\n+source-built packages, you will need to augment the `GUILE_LOAD_PATH` and\n+`GUILE_LOAD_COMPILED_PATH` environment variables so that Guile will look\n+under the right prefix and find your source-built packages.\n+\n+For example, if you are using Guile v2.2, and have Guile packages in the\n+`/usr/local` prefix, either add the following lines to your `.profile` or\n+`.bash_profile` so that the environment variable is properly set for all future\n+shell logins, or paste the lines into a POSIX-style shell to temporarily modify\n+the environment variables of your current shell session.\n+\n+```sh\n+# Help Guile v2.2.x find packages in /usr/local\n+export GUILE_LOAD_PATH=\"/usr/local/share/guile/site/2.2${GUILE_LOAD_PATH:+:}$GUILE_LOAD_PATH\"\n+export GUILE_LOAD_COMPILED_PATH=\"/usr/local/lib/guile/2.2/site-ccache${GUILE_LOAD_COMPILED_PATH:+:}$GUILE_COMPILED_LOAD_PATH\"\n+```\n+\n+Note that these environment variables are used to check for packages during\n+`./configure`, so they should be set as soon as possible should you want to use\n+a prefix other than `/usr`.\n+\n+<!-- ##### Example: Consistently using Guile 3.0 on Ubuntu -->\n+\n+<!-- For example, on Ubuntu, if you choose to use Guile 3.0 and install the -->\n+<!-- `guile-3.0` package, you want to make sure that if you also want to install the -->\n+<!-- `guile-git` package with `apt` that said `guile-git` package was built for Guile -->\n+<!-- v3.0. This can be checked by invoking the following: -->\n+\n+<!-- ``` -->\n+<!-- apt update -->\n+<!-- apt show guile-git -->\n+<!-- ``` -->\n+\n+#### Building and installing source-built packages\n+\n+*A few dependencies have non-obvious quirks/erratas which are documented in the\n+sub-sections immediately below. Please read these sections before proceeding to\n+build and install these packages.*\n+\n+Although you should always refer to the README or INSTALL files for the most\n+accurate information, most of these dependencies use autoconf-style build\n+systems (check if there's a `configure.ac` file), and will likely do the right\n+thing with this simple routine:\n+\n+```sh\n+git clone <git-repo-of-dependency>/<dependency>.git\n+cd <dependency>\n+git tag -l  # check for the latest release\n+git checkout <latest-release>\n+\n+autoreconf -vfi\n+./configure --prefix=<prefix>\n+make\n+sudo make install\n+```\n+\n+If you choose not to specify exactly `--prefix=/usr` to `./configure`, please\n+make sure you've carefully read the [previous section] on mixing distribution\n+packages and source-built packages.\n+\n+##### Binding packages require `-dev`-suffixed packages\n+\n+Relevant for:\n+- Everyone\n+\n+When building bindings, the `-dev`-suffixed version of the original package\n+needs to be installed. For example, building `Guile-zlib` requires that a\n+debian-derived distribution has `zlib1g-dev` installed.\n+\n+When using bindings, the `-dev`-suffixed version of the original package still\n+needs to be installed. This is particularly problematic when distribution\n+packages are mispackaged like `guile-sqlite3` is in Ubuntu Focal such that\n+installing `guile-sqlite3` does not automatically install `libsqlite3-dev` as a\n+dependency.\n+\n+Below is a list of relevant Guile bindings and their corresponding `-dev`\n+packages in Debian at the time of writing.\n+\n+| Guile binding package | -dev Debian package |\n+|-----------------------|---------------------|\n+| guile-gcrypt          | libgcrypt-dev       |\n+| guile-git             | libgit2-dev         |\n+| guile-lzlib           | liblz-dev           |\n+| guile-ssh             | libssh-dev          |\n+| guile-sqlite3         | libsqlite3-dev      |\n+| guile-zlib            | zlib1g-dev          |\n+\n+##### `guile-git` actually depends on `libgit2 >= 1.1`\n+\n+Relevant for:\n+- Those building `guile-git` from source against `libgit2 < 1.1`\n+- Those installing `guile-git` from their distribution where `guile-git` is\n+  built against `libgit2 < 1.1`\n+\n+As of v0.4.0, `guile-git` claims to only require `libgit2 >= 0.28.0`, however,\n+it actually requires `libgit2 >= 1.1`, otherwise, it will be confused by a\n+reference of `origin/keyring`: instead of interpreting the reference as \"the\n+'keyring' branch of the 'origin' remote\", the reference is interpreted as \"the\n+branch literally named 'origin/keyring'\"\n+\n+This is especially notable because Ubuntu Focal packages `libgit2 v0.28.4`, and\n+`guile-git` is built against it.\n+\n+Should you be in this situation, you need to build both `libgit2 v1.1.x` and\n+`guile-git` from source.\n+\n+Source: http://logs.guix.gnu.org/guix/2020-11-12.log#232527\n+\n+##### `{scheme,guile}-bytestructures` v1.0.8 and v1.0.9 are broken for Guile v2.2\n+\n+Relevant for:\n+- Those building `{scheme,guile}-bytestructures` from source against Guile v2.2\n+\n+Commit\n+[707eea3](https://github.com/TaylanUB/scheme-bytestructures/commit/707eea3a85e1e375e86702229ebf73d496377669)\n+introduced a regression for Guile v2.2 and was first included in v1.0.8, this\n+was later corrected in commit\n+[ec9a721](https://github.com/TaylanUB/scheme-bytestructures/commit/ec9a721957c17bcda13148f8faa5f06934431ff7)\n+and included in v1.1.0.\n+\n+TL;DR If you decided to use Guile v2.2, do not use `{scheme,guile}-bytestructures` v1.0.8 or v1.0.9.\n+\n+### Building and Installing Guix itself\n+\n+Start by cloning Guix:\n+\n+```\n+git clone https://git.savannah.gnu.org/git/guix.git\n+cd guix\n+```\n+\n+You will likely want to build the latest release, however, if the latest release\n+when you're reading this is still 1.2.0 then you may want to use 95aca29 instead\n+to avoid a problem in the GnuTLS test suite.\n+\n+```\n+git branch -a -l 'origin/version-*'  # check for the latest release\n+git checkout <latest-release>\n+```\n+\n+Bootstrap the build system:\n+```\n+./bootstrap\n+```\n+\n+Configure with the recommended `--localstatedir` flag:\n+```\n+./configure --localstatedir=/var\n+```\n+\n+Note: If you intend to hack on Guix in the future, you will need to supply the\n+same `--localstatedir=` flag for all future Guix `./configure` invocations. See\n+the last paragraph of this\n+[section](https://guix.gnu.org/manual/en/html_node/Requirements.html) for more\n+details.\n+\n+Build Guix (this will take a while):\n+```\n+make -j$(nproc)\n+```\n+\n+Install Guix:\n+\n+```\n+sudo make install\n+```\n+\n+##### Setting Up the Daemon\n+\n+###### Fixing `argv[0]`\n+\n+At this point, guix will be installed to `${bindir}`, which is likely\n+`/usr/local/bin` if you did not override directory variables at\n+`./configure`-time. More information on standard Automake directory variables\n+can be found\n+[here](https://www.gnu.org/software/automake/manual/html_node/Standard-Directory-Variables.html).\n+\n+However, the Guix init scripts and service configurations for Upstart, systemd,\n+SysV, and OpenRC are installed to launch\n+`${localstatedir}/guix/profiles/per-user/root/current-guix/bin/guix-daemon`,\n+which does not yet exist, and will only exist after `root` performs their first\n+`guix pull`.\n+\n+We need to create a `-original` version of these init scripts that's pointed to\n+binaries in `${bindir}` (normally, `/usr/local/bin`).\n+\n+Example for `systemd`, run as `root`:\n+\n+```sh\n+# Create guix-daemon-original.service by modifying guix-daemon.service\n+bindir=\"$(dirname $(command -v guix-daemon))\"\n+sed -E -e \"s|/\\S*/guix/profiles/per-user/root/current-guix/bin/guix-daemon|${bindir}/guix-daemon|\" /etc/systemd/system/guix-daemon.service > /etc/systemd/system/guix-daemon-original.service\n+chmod 664 /etc/systemd/system/guix-daemon-original.service\n+\n+# Make systemd recognize the new service\n+systemctl daemon-reload\n+\n+# Make sure that the non-working guix-daemon.service is stopped and disabled\n+systemctl stop guix-daemon\n+systemctl disable guix-daemon\n+\n+# Make sure that the working guix-daemon-original.service is started and enabled\n+systemctl enable guix-daemon-original\n+systemctl start guix-daemon-original\n+```\n+\n+###### Create guix-daemon users / groups\n+\n+Please see the [relevant\n+section](https://guix.gnu.org/manual/en/html_node/Build-Environment-Setup.html)\n+in the Guix Reference Manual for more details.\n+\n+## Optional setup\n+\n+At this point, you are set up to [use Guix to build bitcoin](). However, if you\n+want to polish your setup a bit and make it \"what Guix intended\", then read the\n+next few subsections.\n+\n+### Add an `/etc/profile.d` entry\n+\n+Although Guix knows how to update itself and its packages, it does so in a\n+non-invasive way (it does not modify `/usr/local/bin/guix`).\n+\n+Instead, it does the following:\n+\n+- After a `guix pull`, it updates\n+  `/var/guix/profiles/per-user/$USER/current-guix`, and creates a symlink\n+  targeting this directory at `$HOME/.config/guix/current`\n+\n+- After a `guix install`, it updates\n+  `/var/guix/profiles/per-user/$USER/guix-profile`, and creates a symlink\n+  targeting this directory at `$HOME/.guix-profile`\n+\n+Therefore, in order for these operations to effect your shell/desktop sessions\n+(and for the principle of least astonishment to hold), their corresponding\n+directories have to be added to well-known environment variables like `$PATH`,\n+`$INFOPATH`, `$XDG_DATA_DIRS`, etc.\n+\n+In other words, if `$HOME/.config/guix/current/bin` does not exist in your\n+`$PATH`, a `guix pull` will have no effect on what `guix` you are using. Same\n+goes for `$HOME/.guix-profile/bin`, `guix install`, and installed packages.\n+\n+Helpfully, after a `guix pull` or `guix install`, a message will be printed like\n+so:\n+\n+```\n+hint: Consider setting the necessary environment variables by running:\n+\n+     GUIX_PROFILE=\"$HOME/.guix-profile\"\n+     . \"$GUIX_PROFILE/etc/profile\"\n+\n+Alternately, see `guix package --search-paths -p \"$HOME/.guix-profile\"'.\n+```\n+\n+However, this is somewhat tedious to do for both `guix pull` and `guix install`\n+for each user on the system that wants to properly use `guix`. I recommend that\n+you instead add an entry to `/etc/profile.d` instead. This is done by default\n+when installing the Debian package later than 1.2.0-4 and when using the shell\n+script installer.\n+\n+Create `/etc/profile.d/guix.sh` with the following content:\n+```sh\n+# _GUIX_PROFILE: `guix pull` profile\n+_GUIX_PROFILE=\"$HOME/.config/guix/current\"\n+if [ -L $_GUIX_PROFILE ]; then\n+  export PATH=\"$_GUIX_PROFILE/bin${PATH:+:}$PATH\"\n+  # Export INFOPATH so that the updated info pages can be found\n+  # and read by both /usr/bin/info and/or $GUIX_PROFILE/bin/info\n+  # When INFOPATH is unset, add a trailing colon so that Emacs\n+  # searches 'Info-default-directory-list'.\n+  export INFOPATH=\"$_GUIX_PROFILE/share/info:$INFOPATH\"\n+fi\n+\n+# GUIX_PROFILE: User's default profile\n+GUIX_PROFILE=\"$HOME/.guix-profile\"\n+[ -L $GUIX_PROFILE ] || return\n+GUIX_LOCPATH=\"$GUIX_PROFILE/lib/locale\"\n+export GUIX_PROFILE GUIX_LOCPATH\n+\n+[ -f \"$GUIX_PROFILE/etc/profile\" ] && . \"$GUIX_PROFILE/etc/profile\"\n+\n+# set XDG_DATA_DIRS to include Guix installations\n+export XDG_DATA_DIRS=\"$GUIX_PROFILE/share:${XDG_DATA_DIRS:-/usr/local/share/:/usr/share/}\"\n+```\n+\n+Please note that this will not take effect until the next shell or desktop\n+session (log out and log back in).\n+\n+### `guix pull` as root\n+\n+Before you do this, you need to read [choose your security model]() and adjust\n+`guix` and `guix-daemon` flags according to your choice, as invoking `guix pull`\n+may pull substitutes from substitute servers (which you may not want).\n+\n+As mentioned in a previous section, Guix expects\n+`${localstatedir}/guix/profiles/per-user/root/current-guix` to be populated with\n+`root`'s Guix profile, `guix pull`-ed and built by some former version of Guix.\n+However, this is not the case when we build from source. Therefore, we need to\n+perform a `guix pull` as `root`:\n+\n+```sh\n+sudo --login guix pull --branch=version-<latest-release-version>\n+# or\n+sudo --login guix pull --commit=<particular-commit>\n+```\n+\n+`guix pull` is quite a long process (espcially if you're using",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615297055",
      "id" : 615297055,
      "line" : 577,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTI5NzA1NQ==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 577,
      "original_position" : 577,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 577,
      "pull_request_review_id" : 638270471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-17T19:52:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615297055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615297288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615297288"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit: s/subsitutes/substitutes/",
      "commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "created_at" : "2021-04-17T19:49:00Z",
      "diff_hunk" : "@@ -9,79 +11,835 @@ downloads.\n \n We achieve bootstrappability by using Guix as a functional package manager.\n \n-## Requirements\n+# Requirements\n \n Conservatively, a x86_64 machine with:\n \n - 16GB of free disk space on the partition that /gnu/store will reside in\n - 8GB of free disk space per platform triple you're planning on building (see\n   the `HOSTS` environment variable description)\n \n-## Setup\n+# Installation and Setup\n+\n+At the time of writing, the latest Guix release is v1.2.0, which has a known\n+problems w/re building GnuTLS from source. Solutions and workarounds are\n+documented [here](), but I would recommend that you install v1.2.1 (planned for\n+release on April 18th, 2021) or later if your choice of installation option\n+allows.\n+\n+This only needs to be done once per machine. If you have already completed the\n+installation and setup, please proceed to [perform a build](#usage).\n+\n+Otherwise, you may choose from one of the following options to install Guix:\n+\n+1. Using the official **shell installer script** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Easiest (automatically performs *most* setup)\n+   - Works on nearly all Linux distributions\n+   - Only installs latest release\n+   - Binary installation only, requires high level of trust\n+   - Note: The script needs to be run as root, so it should be inspected before it's run\n+2. Using the official **binary tarball** [â¤ skip to section]()\n+   - Maintained by Guix developers\n+   - Normal difficulty (full manual setup required)\n+   - Works on nearly all Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+3. Using fanquake's **Docker image** [âï¸ external instructions]()\n+   - Maintained by fanquake\n+   - Easy (automatically performs *some* setup)\n+   - Works on most Linux distributions\n+   - Installs any release\n+   - Binary installation only, requires high level of trust\n+4. Using a **distribution-maintained package** [â¤ skip to section]()\n+   - Maintained by distribution's Guix package maintainer\n+   - Normal difficulty (manual setup required)\n+   - Works only on distributions with Guix packaged, at time of writing:\n+     - Debian Bullseye or later\n+     - Ubuntu Hirsute or later\n+     - Arch Linux (via AUR)\n+   - Installs a release decided on by package maintainer\n+   - Source or binary installation depending on distribution\n+5. Building **from source** [â¤ skip to section]()\n+   - Maintained by you\n+   - Hard, but rewarding\n+   - Can be made to work on most Linux distributions\n+   - Installs any commit (more granular)\n+   - Source installation, requires lower level of trust\n+\n+## Option 1: Using the official shell installer script\n+\n+The shell installer script provided by the Guix maintainers automates the\n+download, installation, and initial configuration steps detailed\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+\n+To install Guix using this method, do the following as `root` (e.g. via `su -`):\n+\n+```sh\n+# Use /tmp as the working directory\n+cd /tmp\n+\n+# Download the script\n+wget https://git.savannah.gnu.org/cgit/guix.git/plain/etc/guix-install.sh\n+\n+# Inspect the script\n+less guix-install.sh\n+\n+# Make the script executable\n+chmod +x guix-install.sh\n+\n+# Run the script\n+./guix-install.sh\n+```\n+\n+\n+## Option 2: Using the official binary tarball\n+\n+Follow the binary installation instructions step-by-step in the Guix Reference\n+Manual\n+[here](https://guix.gnu.org/manual/en/html_node/Binary-Installation.html).\n+Ignore the note about using the shell installer script since that does not\n+apply. This is largely equivalent to maually performing what the shell installer\n+script does.\n+\n+## Option 3: TODO fanquake docker\n+\n+## Option 4: Using a distribution-maintained package\n+\n+### Debian/Ubuntu\n+\n+Guix v1.2.0 is available as a distribution package starting in [Debian\n+11](https://packages.debian.org/bullseye/guix) (\"bullseye\") and [Ubuntu\n+21.04](https://packages.ubuntu.com/hirsute/guix) (Hirsute Hippo).\n+\n+To install:\n+```sh\n+sudo apt install guix\n+```\n+\n+For up-to-date information on Debian and Ubuntu's release history:\n+- [Debian release history](https://www.debian.org/releases/)\n+- [Ubuntu release history](https://ubuntu.com/about/release-cycle)\n+\n+### Arch Linux\n+\n+Guix is available in the AUR as\n+[`guix`](https://aur.archlinux.org/packages/guix/), please follow the\n+installation instructions in the Arch Linux Wiki ([live\n+link](https://wiki.archlinux.org/index.php/Guix#AUR_Package_Installation),\n+[2021/03/30\n+permalink](https://wiki.archlinux.org/index.php?title=Guix&oldid=637559#AUR_Package_Installation))\n+to install Guix.\n+\n+At the time of writing (2021/03/30), the `check` phase will fail if the path to\n+guix's build directory is longer than 36 characters due to an anachronistic\n+character limit on the shebang line. Since the `check` phase happens after the\n+`build` phase, which may take quite a long time, it is recommended that users\n+either:\n+\n+1. Skip the `check` phase\n+    - For `makepkg`: `makepkg --nocheck ...`\n+    - For `yay`: `yay --mflags=\"--nocheck\" ...`\n+    - For `paru`: `paru --nocheck ...`\n+2. Or, check their build directory's length beforehand\n+    - For those building with `makepkg`: `pwd | wc -c`\n+\n+## Option 5: Building from source\n+\n+Building Guix from source is a rather involved process but a rewarding one for\n+those looking to minimize trust and maximize customizability (e.g. building a\n+particular commit of Guix). Previous experience with using autotools-style build\n+systems to build packages from source will be helpful. *hic sunt dracones.*\n+\n+### Installing common build tools\n+\n+There are a few basic build tools that are required for most things we'll build,\n+so let's install them now:\n+\n+Text transformation/i18n:\n+- `autopoint` (sometimes packaged in `gettext`)\n+- `help2man`\n+- `po4a`\n+- `texinfo`\n+\n+Build system tools:\n+- `g++` w/ C++11 support\n+- `libtool`\n+- `autoconf`\n+- `automake`\n+- `pkg-config` (sometimes packaged as `pkgconf`)\n+- `make`\n+- `cmake`\n+\n+Miscellaneous:\n+- `git`\n+- `gnupg`\n+- `python3`\n+\n+### Building and Installing Guix's dependencies\n+\n+In order to build Guix itself from source, we need to first make sure that the\n+necessary dependencies are installed and discoverable. The most up-to-date list\n+of Guix's dependencies is kept in the [\"Requirements\"\n+section](https://guix.gnu.org/manual/en/html_node/Requirements.html) of the Guix\n+Reference Manual.\n+\n+Depending on your distribution, most or all of these dependencies may already be\n+packaged and installable without manually building and installing.\n+\n+#### Guile\n+\n+##### Choosing a Guile version and sticking to it\n+\n+One of the first things you need to decide is which Guile version you want to\n+use: Guile v2.2 or Guile v3.0. Unlike the python2 to python3 transition, Guile\n+v2.2 and Guile v3.0 are largely compatible, as evidenced by the fact that most\n+Guile packages and even [Guix\n+itself](https://guix.gnu.org/en/blog/2020/guile-3-and-guix/) support running on\n+both.\n+\n+What is important here is that you **choose one**, and you **remain consistent**\n+with your choice throughout **all Guile-related packages**, no matter if they\n+are installed via the distribution's package manager or installed from source.\n+This is because the files for Guile packages are installed to directories which\n+are separated based on the Guile version.\n+\n+###### Example: Checking that Ubuntu's `guile-git` is compatible with your chosen Guile version\n+\n+On Ubuntu Focal:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-2.2, guile-bytestructures, libgit2-dev\n+...\n+```\n+\n+As you can see, the package `guile-git` depends on `guile-2.2`, meaning that it\n+was likely built for Guile v2.2. This means that if you decided to use Guile\n+v3.0 on Ubuntu Focal, you would need to build guile-git from source instead of\n+using the distribution package.\n+\n+On Ubuntu Hirsute:\n+\n+```sh\n+$ apt show guile-git\n+Package: guile-git\n+...\n+Depends: guile-3.0 | guile-2.2, guile-bytestructures (>= 1.0.7-3~), libgit2-dev (>= 1.0)\n+...\n+```\n+\n+In this case, `guile-git` depends on either `guile-3.0` or `guile-2.2`, meaning\n+that it would work no matter what Guile version you decided to use.\n+\n+###### Corner case: Multiple versions of Guile on one system\n+\n+It is recommended to only install one version of Guile, so that build systems do\n+not get confused about which Guile to use.\n+\n+However, if you insist on having both Guile v2.2 and Guile v3.0 installed on\n+your system, then you need to **consistently** specify one of\n+`GUILE_EFFECTIVE_VERSION=3.0` or `GUILE_EFFECTIVE_VERSION=2.2` to all\n+`./configure` invocations for Guix and its dependencies.\n+\n+##### Installing Guile\n+\n+Guile is most likely already packaged for your distribution, so after you have\n+[chosen a Guile version](), install it via your distribution's package manager.\n+\n+If your distribution splits packages into `-dev`-suffixed and\n+non-`-dev`-suffixed sub-packages (as is the case for debian-derived\n+distributions), please make sure to install both. For example, to install Guile\n+v2.2 on Debian/Ubuntu:\n+\n+```sh\n+apt install guile-2.2 guile-2.2-dev\n+```\n+\n+#### Mixing distribution packages and source-built packages\n+\n+At the time of writing, most distributions have _some_ of Guix's dependencies\n+packaged, but not all. This means that you may want to install the distribution\n+package for some dependencies, and manually build-from-source for others.\n+\n+Distribution packages usually install to `/usr`, which is different from the\n+default `./configure` prefix of source-built packages: `/usr/local`.\n+\n+This means that if you mix-and-match distribution packages and source-built\n+packages and do not specify exactly `--prefix=/usr` to `./configure` for\n+source-built packages, you will need to augment the `GUILE_LOAD_PATH` and\n+`GUILE_LOAD_COMPILED_PATH` environment variables so that Guile will look\n+under the right prefix and find your source-built packages.\n+\n+For example, if you are using Guile v2.2, and have Guile packages in the\n+`/usr/local` prefix, either add the following lines to your `.profile` or\n+`.bash_profile` so that the environment variable is properly set for all future\n+shell logins, or paste the lines into a POSIX-style shell to temporarily modify\n+the environment variables of your current shell session.\n+\n+```sh\n+# Help Guile v2.2.x find packages in /usr/local\n+export GUILE_LOAD_PATH=\"/usr/local/share/guile/site/2.2${GUILE_LOAD_PATH:+:}$GUILE_LOAD_PATH\"\n+export GUILE_LOAD_COMPILED_PATH=\"/usr/local/lib/guile/2.2/site-ccache${GUILE_LOAD_COMPILED_PATH:+:}$GUILE_COMPILED_LOAD_PATH\"\n+```\n+\n+Note that these environment variables are used to check for packages during\n+`./configure`, so they should be set as soon as possible should you want to use\n+a prefix other than `/usr`.\n+\n+<!-- ##### Example: Consistently using Guile 3.0 on Ubuntu -->\n+\n+<!-- For example, on Ubuntu, if you choose to use Guile 3.0 and install the -->\n+<!-- `guile-3.0` package, you want to make sure that if you also want to install the -->\n+<!-- `guile-git` package with `apt` that said `guile-git` package was built for Guile -->\n+<!-- v3.0. This can be checked by invoking the following: -->\n+\n+<!-- ``` -->\n+<!-- apt update -->\n+<!-- apt show guile-git -->\n+<!-- ``` -->\n+\n+#### Building and installing source-built packages\n+\n+*A few dependencies have non-obvious quirks/erratas which are documented in the\n+sub-sections immediately below. Please read these sections before proceeding to\n+build and install these packages.*\n+\n+Although you should always refer to the README or INSTALL files for the most\n+accurate information, most of these dependencies use autoconf-style build\n+systems (check if there's a `configure.ac` file), and will likely do the right\n+thing with this simple routine:\n+\n+```sh\n+git clone <git-repo-of-dependency>/<dependency>.git\n+cd <dependency>\n+git tag -l  # check for the latest release\n+git checkout <latest-release>\n+\n+autoreconf -vfi\n+./configure --prefix=<prefix>\n+make\n+sudo make install\n+```\n+\n+If you choose not to specify exactly `--prefix=/usr` to `./configure`, please\n+make sure you've carefully read the [previous section] on mixing distribution\n+packages and source-built packages.\n+\n+##### Binding packages require `-dev`-suffixed packages\n+\n+Relevant for:\n+- Everyone\n+\n+When building bindings, the `-dev`-suffixed version of the original package\n+needs to be installed. For example, building `Guile-zlib` requires that a\n+debian-derived distribution has `zlib1g-dev` installed.\n+\n+When using bindings, the `-dev`-suffixed version of the original package still\n+needs to be installed. This is particularly problematic when distribution\n+packages are mispackaged like `guile-sqlite3` is in Ubuntu Focal such that\n+installing `guile-sqlite3` does not automatically install `libsqlite3-dev` as a\n+dependency.\n+\n+Below is a list of relevant Guile bindings and their corresponding `-dev`\n+packages in Debian at the time of writing.\n+\n+| Guile binding package | -dev Debian package |\n+|-----------------------|---------------------|\n+| guile-gcrypt          | libgcrypt-dev       |\n+| guile-git             | libgit2-dev         |\n+| guile-lzlib           | liblz-dev           |\n+| guile-ssh             | libssh-dev          |\n+| guile-sqlite3         | libsqlite3-dev      |\n+| guile-zlib            | zlib1g-dev          |\n+\n+##### `guile-git` actually depends on `libgit2 >= 1.1`\n+\n+Relevant for:\n+- Those building `guile-git` from source against `libgit2 < 1.1`\n+- Those installing `guile-git` from their distribution where `guile-git` is\n+  built against `libgit2 < 1.1`\n+\n+As of v0.4.0, `guile-git` claims to only require `libgit2 >= 0.28.0`, however,\n+it actually requires `libgit2 >= 1.1`, otherwise, it will be confused by a\n+reference of `origin/keyring`: instead of interpreting the reference as \"the\n+'keyring' branch of the 'origin' remote\", the reference is interpreted as \"the\n+branch literally named 'origin/keyring'\"\n+\n+This is especially notable because Ubuntu Focal packages `libgit2 v0.28.4`, and\n+`guile-git` is built against it.\n+\n+Should you be in this situation, you need to build both `libgit2 v1.1.x` and\n+`guile-git` from source.\n+\n+Source: http://logs.guix.gnu.org/guix/2020-11-12.log#232527\n+\n+##### `{scheme,guile}-bytestructures` v1.0.8 and v1.0.9 are broken for Guile v2.2\n+\n+Relevant for:\n+- Those building `{scheme,guile}-bytestructures` from source against Guile v2.2\n+\n+Commit\n+[707eea3](https://github.com/TaylanUB/scheme-bytestructures/commit/707eea3a85e1e375e86702229ebf73d496377669)\n+introduced a regression for Guile v2.2 and was first included in v1.0.8, this\n+was later corrected in commit\n+[ec9a721](https://github.com/TaylanUB/scheme-bytestructures/commit/ec9a721957c17bcda13148f8faa5f06934431ff7)\n+and included in v1.1.0.\n+\n+TL;DR If you decided to use Guile v2.2, do not use `{scheme,guile}-bytestructures` v1.0.8 or v1.0.9.\n+\n+### Building and Installing Guix itself\n+\n+Start by cloning Guix:\n+\n+```\n+git clone https://git.savannah.gnu.org/git/guix.git\n+cd guix\n+```\n+\n+You will likely want to build the latest release, however, if the latest release\n+when you're reading this is still 1.2.0 then you may want to use 95aca29 instead\n+to avoid a problem in the GnuTLS test suite.\n+\n+```\n+git branch -a -l 'origin/version-*'  # check for the latest release\n+git checkout <latest-release>\n+```\n+\n+Bootstrap the build system:\n+```\n+./bootstrap\n+```\n+\n+Configure with the recommended `--localstatedir` flag:\n+```\n+./configure --localstatedir=/var\n+```\n+\n+Note: If you intend to hack on Guix in the future, you will need to supply the\n+same `--localstatedir=` flag for all future Guix `./configure` invocations. See\n+the last paragraph of this\n+[section](https://guix.gnu.org/manual/en/html_node/Requirements.html) for more\n+details.\n+\n+Build Guix (this will take a while):\n+```\n+make -j$(nproc)\n+```\n+\n+Install Guix:\n+\n+```\n+sudo make install\n+```\n+\n+##### Setting Up the Daemon\n+\n+###### Fixing `argv[0]`\n+\n+At this point, guix will be installed to `${bindir}`, which is likely\n+`/usr/local/bin` if you did not override directory variables at\n+`./configure`-time. More information on standard Automake directory variables\n+can be found\n+[here](https://www.gnu.org/software/automake/manual/html_node/Standard-Directory-Variables.html).\n+\n+However, the Guix init scripts and service configurations for Upstart, systemd,\n+SysV, and OpenRC are installed to launch\n+`${localstatedir}/guix/profiles/per-user/root/current-guix/bin/guix-daemon`,\n+which does not yet exist, and will only exist after `root` performs their first\n+`guix pull`.\n+\n+We need to create a `-original` version of these init scripts that's pointed to\n+binaries in `${bindir}` (normally, `/usr/local/bin`).\n+\n+Example for `systemd`, run as `root`:\n+\n+```sh\n+# Create guix-daemon-original.service by modifying guix-daemon.service\n+bindir=\"$(dirname $(command -v guix-daemon))\"\n+sed -E -e \"s|/\\S*/guix/profiles/per-user/root/current-guix/bin/guix-daemon|${bindir}/guix-daemon|\" /etc/systemd/system/guix-daemon.service > /etc/systemd/system/guix-daemon-original.service\n+chmod 664 /etc/systemd/system/guix-daemon-original.service\n+\n+# Make systemd recognize the new service\n+systemctl daemon-reload\n+\n+# Make sure that the non-working guix-daemon.service is stopped and disabled\n+systemctl stop guix-daemon\n+systemctl disable guix-daemon\n+\n+# Make sure that the working guix-daemon-original.service is started and enabled\n+systemctl enable guix-daemon-original\n+systemctl start guix-daemon-original\n+```\n+\n+###### Create guix-daemon users / groups\n+\n+Please see the [relevant\n+section](https://guix.gnu.org/manual/en/html_node/Build-Environment-Setup.html)\n+in the Guix Reference Manual for more details.\n+\n+## Optional setup\n+\n+At this point, you are set up to [use Guix to build bitcoin](). However, if you\n+want to polish your setup a bit and make it \"what Guix intended\", then read the\n+next few subsections.\n+\n+### Add an `/etc/profile.d` entry\n+\n+Although Guix knows how to update itself and its packages, it does so in a\n+non-invasive way (it does not modify `/usr/local/bin/guix`).\n+\n+Instead, it does the following:\n+\n+- After a `guix pull`, it updates\n+  `/var/guix/profiles/per-user/$USER/current-guix`, and creates a symlink\n+  targeting this directory at `$HOME/.config/guix/current`\n+\n+- After a `guix install`, it updates\n+  `/var/guix/profiles/per-user/$USER/guix-profile`, and creates a symlink\n+  targeting this directory at `$HOME/.guix-profile`\n+\n+Therefore, in order for these operations to effect your shell/desktop sessions\n+(and for the principle of least astonishment to hold), their corresponding\n+directories have to be added to well-known environment variables like `$PATH`,\n+`$INFOPATH`, `$XDG_DATA_DIRS`, etc.\n+\n+In other words, if `$HOME/.config/guix/current/bin` does not exist in your\n+`$PATH`, a `guix pull` will have no effect on what `guix` you are using. Same\n+goes for `$HOME/.guix-profile/bin`, `guix install`, and installed packages.\n+\n+Helpfully, after a `guix pull` or `guix install`, a message will be printed like\n+so:\n+\n+```\n+hint: Consider setting the necessary environment variables by running:\n+\n+     GUIX_PROFILE=\"$HOME/.guix-profile\"\n+     . \"$GUIX_PROFILE/etc/profile\"\n+\n+Alternately, see `guix package --search-paths -p \"$HOME/.guix-profile\"'.\n+```\n+\n+However, this is somewhat tedious to do for both `guix pull` and `guix install`\n+for each user on the system that wants to properly use `guix`. I recommend that\n+you instead add an entry to `/etc/profile.d` instead. This is done by default\n+when installing the Debian package later than 1.2.0-4 and when using the shell\n+script installer.\n+\n+Create `/etc/profile.d/guix.sh` with the following content:\n+```sh\n+# _GUIX_PROFILE: `guix pull` profile\n+_GUIX_PROFILE=\"$HOME/.config/guix/current\"\n+if [ -L $_GUIX_PROFILE ]; then\n+  export PATH=\"$_GUIX_PROFILE/bin${PATH:+:}$PATH\"\n+  # Export INFOPATH so that the updated info pages can be found\n+  # and read by both /usr/bin/info and/or $GUIX_PROFILE/bin/info\n+  # When INFOPATH is unset, add a trailing colon so that Emacs\n+  # searches 'Info-default-directory-list'.\n+  export INFOPATH=\"$_GUIX_PROFILE/share/info:$INFOPATH\"\n+fi\n+\n+# GUIX_PROFILE: User's default profile\n+GUIX_PROFILE=\"$HOME/.guix-profile\"\n+[ -L $GUIX_PROFILE ] || return\n+GUIX_LOCPATH=\"$GUIX_PROFILE/lib/locale\"\n+export GUIX_PROFILE GUIX_LOCPATH\n+\n+[ -f \"$GUIX_PROFILE/etc/profile\" ] && . \"$GUIX_PROFILE/etc/profile\"\n+\n+# set XDG_DATA_DIRS to include Guix installations\n+export XDG_DATA_DIRS=\"$GUIX_PROFILE/share:${XDG_DATA_DIRS:-/usr/local/share/:/usr/share/}\"\n+```\n+\n+Please note that this will not take effect until the next shell or desktop\n+session (log out and log back in).\n+\n+### `guix pull` as root\n+\n+Before you do this, you need to read [choose your security model]() and adjust\n+`guix` and `guix-daemon` flags according to your choice, as invoking `guix pull`\n+may pull substitutes from substitute servers (which you may not want).\n+\n+As mentioned in a previous section, Guix expects\n+`${localstatedir}/guix/profiles/per-user/root/current-guix` to be populated with\n+`root`'s Guix profile, `guix pull`-ed and built by some former version of Guix.\n+However, this is not the case when we build from source. Therefore, we need to\n+perform a `guix pull` as `root`:\n+\n+```sh\n+sudo --login guix pull --branch=version-<latest-release-version>\n+# or\n+sudo --login guix pull --commit=<particular-commit>\n+```\n+\n+`guix pull` is quite a long process (espcially if you're using\n+`--no-substitute`). If you encounter build problems, please refer to the\n+[troubleshooting section]().\n+\n+Note that running a bare `guix pull` with no commit or branch specified will\n+pull the latest commit on Guix's master branch, which is likely fine, but not\n+recommended.\n+\n+If you installed Guix from source, you may get an error like the following:\n+```sh\n+error: while creating symlink '/root/.config/guix/current' No such file or directory\n+```\n+To resolve this, simply:\n+```\n+sudo mkdir -p /root/.config/guix\n+```\n+Then try the `guix pull` command again.\n+\n+After the `guix pull` finishes successfully,\n+`${localstatedir}/guix/profiles/per-user/root/current-guix` should be populated.\n+\n+### Restarting the daemon\n+\n+If you built Guix from source and followed the instructions for [fixing argv\\[0\\]](), you can\n+now do the following:\n+\n+```sh\n+systemctl stop guix-daemon-original\n+systemctl disable guix-daemon-original\n+\n+systemctl enable guix-daemon\n+systemctl start guix-daemon\n+```\n+\n+Otherwise, simply do:\n \n-### Installing Guix\n+```sh\n+systemctl restart guix-daemon\n+```\n+\n+### Checking everything\n+\n+If you followed all the steps above to make your Guix setup \"prim and proper,\"\n+you can check that you did everything properly by running through this\n+checklist.\n+\n+1. `/etc/profile.d/guix.sh` should exist and be sourced at each shell login\n \n-If you're just testing this out, you can use the\n-[Dockerfile][fanquake/guix-docker] for convenience. It automatically speeds up\n-your builds by [using substitutes](#speeding-up-builds-with-substitute-servers).\n-If you don't want this behaviour, refer to the [next\n-section](#choosing-your-security-model).\n+2. `guix describe` should not print `guix describe: error: failed to determine\n+   origin`, but rather something like:\n \n-Otherwise, follow the [Guix installation guide][guix/bin-install].\n+   ```\n+   Generation 38   Feb 22 2021 16:39:31    (current)\n+     guix f350df4\n+       repository URL: https://git.savannah.gnu.org/git/guix.git\n+       branch: version-1.2.0\n+       commit: f350df405fbcd5b9e27e6b6aa500da7f101f41e7\n+   ```\n \n-> Note: For those who like to keep their filesystems clean, Guix is designed to\n-> be very standalone and _will not_ conflict with your system's package\n-> manager/existing setup. It _only_ touches `/var/guix`, `/gnu`, and\n-> `~/.config/guix`.\n+3. `guix-daemon` should be running from `${localstatedir}/guix/profiles/per-user/root/current-guix`\n \n-### Choosing your security model\n+\n+# Choosing your security model\n+\n+No matter how you installed Guix, you need to now decide on your security model\n+for building packages with Guix.\n \n Guix allows us to achieve better binary security by using our CPU time to build\n everything from scratch. However, it doesn't sacrifice user choice in pursuit of\n-this: users can decide whether or not to bootstrap and to use substitutes\n-(pre-built packages).\n+this: users can decide whether or not to use substitutes (pre-built packages).\n+\n+## Option 1: Building with substitutes\n+\n+### Step 1: Authorize the signing keys\n+\n+Depending on the installation procedure you followed, you may have already\n+authorized the Guix build farm key. In particular, the official shell installer\n+script asks you if you want the key installed, and the debian distribution\n+package authorized the key during installation.\n+\n+You can check the current list of authorized keys at `/etc/guix/acl`.\n+\n+At the time of writing, a `/etc/guix/acl` with just the Guix build farm key\n+authorized looks something like:\n+```lisp\n+(acl\n+ (entry\n+  (public-key\n+   (ecc\n+    (curve Ed25519)\n+    (q #8D156F295D24B0D9A86FA5741A840FF2D24F60F7B6C4134814AD55625971B394#)\n+    )\n+   )\n+  (tag\n+   (guix import)\n+   )\n+  )\n+ )\n+```\n \n-After installation, you may want to consider [adding substitute\n-servers](#speeding-up-builds-with-substitute-servers) from which to download\n-pre-built packages to speed up your build if that fits your security model (say,\n-if you're just testing that this works). Substitute servers are set up by\n-default if you're using the [Dockerfile][fanquake/guix-docker].\n+If you've determined that the official Guix build farm key hasn't been\n+authorized, and you would like to authorize it, run the following as root:\n+\n+```\n+guix archive --authorize < /var/guix/profiles/per-user/root/current-guix/share/guix/ci.guix.gnu.org.pub\n+```\n+\n+If\n+`/var/guix/profiles/per-user/root/current-guix/share/guix/ci.guix.gnu.org.pub`\n+doesn't exist, try:\n+\n+```sh\n+guix archive --authorize < <PREFIX>/share/guix/ci.guix.gnu.org.pub\n+```\n+\n+Where <PREFIX> is likely:\n+- `/usr` if you installed from a distribution package\n+- `/usr/local` if you installed Guix from source and didn't supply any\n+  prefix-modifying flags to Guix's `./configure`\n+\n+For dongcarl's substitute server at https://guix.carldong.io, run as root:\n+\n+```sh\n+wget -qO- 'https://guix.carldong.io/signing-key.pub' | guix archive --authorize\n+```\n+\n+### Step 2: Specify the substitute servers\n+\n+Once its key is authorized, the official Guix build farm at\n+https://ci.guix.gnu.org is automatically used unless the `--no-substitutes` flag\n+is supplied. This behaviour is overridable. See examples below for the various\n+ways of adding dongcarl's substitute server after having [authorized his signing\n+key](#authorize-the-signing-keys).\n+\n+Change the default list of substitute servers by starting `guix-daemon` with the\n+`--substitute-urls` option:\n+```\n+guix <cmd> --substitute-urls=\"https://guix.carldong.io https://ci.guix.gnu.org\"\n+```\n+\n+Override the default list of substitute servers by passing the\n+`--substitute-urls` option for invocations of `guix` commands:\n+```\n+guix <cmd> --substitute-urls=\"https://guix.carldong.io https://ci.guix.gnu.org\"\n+```\n+\n+For scripts under `./contrib/guix`, set the `SUBSTITUTE_URLS` environment\n+variable:\n+```\n+export SUBSTITUTE_URLS='https://guix.carldong.io https://ci.guix.gnu.org'\n+```\n+\n+## Option 2: Disabling subsitutes on an ad-hoc basis",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#discussion_r615297288",
      "id" : 615297288,
      "line" : 729,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTI5NzI4OA==",
      "original_commit_id" : "57684eda890c01f9d188313b4012bcddfc8c1191",
      "original_line" : 729,
      "original_position" : 748,
      "original_start_line" : null,
      "path" : "contrib/guix/README.md",
      "position" : 748,
      "pull_request_review_id" : 638270471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21711",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-17T19:52:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615297288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@dongcarl can you rebase this and address the current batch of comments?",
      "created_at" : "2021-06-17T05:11:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#issuecomment-862930855",
      "id" : 862930855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21711",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MjkzMDg1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-17T05:11:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/862930855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed 57684eda89...5ae2760f61\r\n- Rebased over master\r\n- Addressed https://github.com/bitcoin/bitcoin/pull/21711#pullrequestreview-638195828, https://github.com/bitcoin/bitcoin/pull/21711#pullrequestreview-638270471\r\n",
      "created_at" : "2021-06-17T22:07:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#issuecomment-863594271",
      "id" : 863594271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21711",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MzU5NDI3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-17T22:07:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863594271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21851 ([WIP] build: support cross-compiling for arm64-apple-darwin20 (Apple M1) in depends by fanquake)\n* #21671 (guix: Always canonicalize HOST using `./depends/config.sub` by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-06-18T02:21:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21711#issuecomment-863705564",
      "id" : 863705564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21711",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MzcwNTU2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-18T02:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863705564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
