[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614262360"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614262360"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);\r\n```\r\n\r\nLooks like you are hitting some stupid compiler error",
      "commit_id" : "724e4948004c8127f093db90f9d78e6ed9e46541",
      "created_at" : "2021-04-15T17:28:51Z",
      "diff_hunk" : "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614262360",
      "id" : 614262360,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDI2MjM2MA==",
      "original_commit_id" : "37c255cdebfefdf84c2c38863b6d07639d24266f",
      "original_line" : 274,
      "original_position" : 232,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 636950420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-15T17:56:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614262360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614279839"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "724e4948004c8127f093db90f9d78e6ed9e46541",
      "created_at" : "2021-04-15T17:56:17Z",
      "diff_hunk" : "@@ -226,6 +267,13 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n         // Make sure that no deployment tries to set an invalid bit.\n         BOOST_CHECK_EQUAL(bitmask & ~(uint32_t)VERSIONBITS_TOP_MASK, bitmask);\n \n+        // Check min_activation_height is on a retarget boundary\n+        BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height % mainnetParams.nMinerConfirmationWindow, 0);\n+        // Check min_activation_height is 0 for ALWAYS_ACTIVE and never active deployments\n+        if (mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::ALWAYS_ACTIVE || mainnetParams.vDeployments[i].nStartTime == Consensus::BIP9Deployment::NEVER_ACTIVE) {\n+            BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839",
      "id" : 614279839,
      "in_reply_to_id" : 614262360,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDI3OTgzOQ==",
      "original_commit_id" : "37c255cdebfefdf84c2c38863b6d07639d24266f",
      "original_line" : 274,
      "original_position" : 232,
      "original_start_line" : null,
      "path" : "src/test/versionbits_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 636973591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21701",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-15T17:56:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/614279839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~tACK 724e4948004c8127f093db90f9d78e6ed9e46541~ on Ubuntu\r\n\r\nI verified as follows:\r\n\r\n```\r\ngit checkout origin/0.21\r\ngit checkout -b speedy-trial-backport\r\ngit cherry-pick 63879f0a4760c0c0f784029849cb5d21ee088abb^..ffe33dfbd4c3b11e3475b022b6c1dd077613de79\r\ngit cherry-pick f979b3237f1cfc28f9c4ccb07beab558d5357a55\r\ngit diff 724e4948004c8127f093db90f9d78e6ed9e46541\r\nsrc/test/test_bitcoin --run_test=versionbits_tests\r\n````\r\n\r\nGit diff only shows a difference in the trailing `U` for this test (presumably related to https://github.com/bitcoin/bitcoin/pull/21701#discussion_r614279839): `BOOST_CHECK_EQUAL(mainnetParams.vDeployments[i].min_activation_height, 0U);`\r\n\r\nI had manually resolve a conflict for dd07e6da48040dc7eae46bc7941db48d98a669fd.\r\n\r\nI also managed to spin up the node and see the softfork as \"defined\" in `getblockchaininfo`.\r\n\r\n---\r\n\r\nI'm unable to reproduce the CI failure on macOS 11.2.3 with homebrew Boost 1.75.0. It doesn't happen for me with depends either. ",
      "created_at" : "2021-04-15T18:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21701#issuecomment-820633021",
      "id" : 820633021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21701",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMDYzMzAyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-15T19:02:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/820633021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
