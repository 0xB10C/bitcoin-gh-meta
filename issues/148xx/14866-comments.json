[
   {
      "author_association" : "MEMBER",
      "body" : "This can break existing configurations correct?",
      "created_at" : "2018-12-04T14:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14866#issuecomment-444122125",
      "id" : 444122125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14866",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDEyMjEyNQ==",
      "updated_at" : "2018-12-04T14:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444122125",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag Thanks for your comment.\r\nYes. Sometimes this may be different from previous results when interpreting existing configurations.\r\nEspecially the possibility of interpretation unmatch increases if using \"includeconf\" and sections are specified with square brackets in the \"included\" configuration file.\r\nIs it necessary for this change to add a flag to specify how to read the configuration file?",
      "created_at" : "2018-12-05T03:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14866#issuecomment-444341899",
      "id" : 444341899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14866",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDM0MTg5OQ==",
      "updated_at" : "2018-12-05T03:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444341899",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/24285095?v=4",
         "events_url" : "https://api.github.com/users/AkioNak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AkioNak/followers",
         "following_url" : "https://api.github.com/users/AkioNak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AkioNak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AkioNak",
         "id" : 24285095,
         "login" : "AkioNak",
         "node_id" : "MDQ6VXNlcjI0Mjg1MDk1",
         "organizations_url" : "https://api.github.com/users/AkioNak/orgs",
         "received_events_url" : "https://api.github.com/users/AkioNak/received_events",
         "repos_url" : "https://api.github.com/users/AkioNak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AkioNak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AkioNak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14866#discussion_r238960894"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14866"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238960894"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: The `else` here is redundant due to the `continue` above.",
      "commit_id" : "af6f964439ffd8380c5dcff529fb15374362e8e3",
      "created_at" : "2018-12-05T07:57:37Z",
      "diff_hunk" : "@@ -856,22 +857,50 @@ static bool GetConfigOptions(std::istream& stream, std::string& error, std::vect\n         str = TrimString(str, pattern);\n         if (!str.empty()) {\n             if (*str.begin() == '[' && *str.rbegin() == ']') {\n-                const std::string section = str.substr(1, str.size() - 2);\n+                section = str.substr(1, str.size() - 2);\n                 sections.insert(section);\n-                prefix = section + '.';\n             } else if (*str.begin() == '-') {\n                 error = strprintf(\"parse error on line %i: %s, options in configuration file must be specified without leading -\", linenr, str);\n                 return false;\n             } else if ((pos = str.find('=')) != std::string::npos) {\n-                std::string name = prefix + TrimString(str.substr(0, pos), pattern);\n+                std::string name;\n+                std::string key = TrimString(str.substr(0, pos), pattern);\n+                std::string::size_type separator_pos;\n+                bool simple_arg = true;\n+                if ((separator_pos = key.rfind('.')) == std::string::npos) {\n+                    name = section;\n+                } else {\n+                    simple_arg = false;\n+                    name = key.substr(0, separator_pos);\n+                    sections.insert(name);\n+                    key = key.substr(separator_pos + 1);\n+                }\n                 std::string value = TrimString(str.substr(pos + 1), pattern);\n-                if (used_hash && name == \"rpcpassword\") {\n+                if (used_hash && simple_arg && key == \"rpcpassword\") {\n                     error = strprintf(\"parse error on line %i, using # in rpcpassword can be ambiguous and should be avoided\", linenr);\n                     return false;\n                 }\n-                options.emplace_back(name, value);\n-                if ((pos = name.rfind('.')) != std::string::npos) {\n-                    sections.insert(name.substr(0, pos));\n+                options.emplace_back(name.empty() ? key : name + '.' + key, value);\n+                if (key == \"includeconf\") {\n+                    if (depth < 0) {\n+                        continue;\n+                    } else if (depth < MAX_INCLUDECONF_DEPTH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14866#discussion_r238960894",
      "id" : 238960894,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzODk2MDg5NA==",
      "original_commit_id" : "af6f964439ffd8380c5dcff529fb15374362e8e3",
      "original_position" : 51,
      "path" : "src/util/system.cpp",
      "position" : 51,
      "pull_request_review_id" : 181626877,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14866",
      "updated_at" : "2018-12-05T07:58:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238960894",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You should not break existing configurations, especially if there is no strong reason to do it.",
      "created_at" : "2018-12-05T08:02:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14866#issuecomment-444393966",
      "id" : 444393966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14866",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NDM5Mzk2Ng==",
      "updated_at" : "2018-12-05T08:02:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/444393966",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
