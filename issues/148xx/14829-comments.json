[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14841](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14841.html) (consensus: Move CheckBlock() call to critical section by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-11-28T23:21:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14829#issuecomment-442644148",
      "id" : 442644148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14829",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MjY0NDE0OA==",
      "updated_at" : "2018-11-29T23:58:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/442644148",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644125"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why are they excluded?",
      "commit_id" : "dcd21b912486b4c48f84a34779d0a8207767a1f8",
      "created_at" : "2018-11-29T20:19:52Z",
      "diff_hunk" : "@@ -99,9 +99,9 @@ jobs:\n         DOCKER_NAME_TAG=ubuntu:16.04\n         PACKAGES=\"clang llvm python3-zmq qtbase5-dev qttools5-dev-tools libssl-dev libevent-dev bsdmainutils libboost-system-dev libboost-filesystem-dev libboost-chrono-dev libboost-test-dev libboost-thread-dev libdb5.3++-dev libminiupnpc-dev libzmq3-dev libprotobuf-dev protobuf-compiler libqrencode-dev\"\n         NO_DEPENDS=1\n-        RUN_FUNCTIONAL_TESTS=false # Disabled for now. TODO identify suppressions or exclude specific tests\n+        FUNCTIONAL_TESTS_CONFIG=\"--exclude feature_block.py,p2p_invalid_messages.py\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644125",
      "id" : 237644125,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNzY0NDEyNQ==",
      "original_commit_id" : "1fac48773ad1d191fe02354a76c3a3a6c0077590",
      "original_position" : 5,
      "path" : ".travis.yml",
      "position" : null,
      "pull_request_review_id" : 179995525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829",
      "updated_at" : "2018-12-02T20:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644125",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644202"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is the wallet and DEBUG_LOCKORDER disabled?",
      "commit_id" : "dcd21b912486b4c48f84a34779d0a8207767a1f8",
      "created_at" : "2018-11-29T20:20:09Z",
      "diff_hunk" : "@@ -99,9 +99,9 @@ jobs:\n         DOCKER_NAME_TAG=ubuntu:16.04\n         PACKAGES=\"clang llvm python3-zmq qtbase5-dev qttools5-dev-tools libssl-dev libevent-dev bsdmainutils libboost-system-dev libboost-filesystem-dev libboost-chrono-dev libboost-test-dev libboost-thread-dev libdb5.3++-dev libminiupnpc-dev libzmq3-dev libprotobuf-dev protobuf-compiler libqrencode-dev\"\n         NO_DEPENDS=1\n-        RUN_FUNCTIONAL_TESTS=false # Disabled for now. TODO identify suppressions or exclude specific tests\n+        FUNCTIONAL_TESTS_CONFIG=\"--exclude feature_block.py,p2p_invalid_messages.py\"\n         GOAL=\"install\"\n-        BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=qt5 CPPFLAGS=-DDEBUG_LOCKORDER --with-sanitizers=thread --disable-hardening --disable-asm CC=clang CXX=clang++\"\n+        BITCOIN_CONFIG=\"--enable-zmq --disable-wallet --with-gui=qt5 --with-sanitizers=thread --disable-hardening --disable-asm CC=clang CXX=clang++\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644202",
      "id" : 237644202,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNzY0NDIwMg==",
      "original_commit_id" : "1fac48773ad1d191fe02354a76c3a3a6c0077590",
      "original_position" : 8,
      "path" : ".travis.yml",
      "position" : 8,
      "pull_request_review_id" : 179995633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829",
      "updated_at" : "2018-12-02T20:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644202",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644798"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems like a lot, what about something like this instead:\r\n\r\n```diff\r\ndiff --git a/test/sanitizer_suppressions/tsan b/test/sanitizer_suppressions/tsan\r\nindex 209c46f..4edf68c 100644\r\n--- a/test/sanitizer_suppressions/tsan\r\n+++ b/test/sanitizer_suppressions/tsan\r\n@@ -14,9 +14,10 @@ deadlock:TestPotentialDeadLockDetected\r\n race:src/qt/test/*\r\n deadlock:src/qt/test/*\r\n \r\n-# WIP: Unidentified suppressions to run the functional tests\r\n-#race:zmqpublishnotifier.cpp\r\n-#\r\n+# External libraries\r\n+deadlock:libdb\r\n+race:libzmq\r\n+",
      "commit_id" : "dcd21b912486b4c48f84a34779d0a8207767a1f8",
      "created_at" : "2018-11-29T20:22:07Z",
      "diff_hunk" : "@@ -1,24 +1,36 @@\n # ThreadSanitizer suppressions\n # ============================\n-\n-# fChecked is theoretically racy, practically only in unit tests\n-race:CheckBlock\n-\n-# WalletBatch (unidentified deadlock)\n-deadlock:WalletBatch\n-\n-# Intentional deadlock in tests\n+deadlock:BerkeleyBatch::VerifyDatabaseFile\n+deadlock:BerkeleyDatabase::Flush\n+deadlock:BerkeleyDatabase::Rewrite\n+deadlock:CWallet::BackupWallet\n+deadlock:CWallet::LoadWallet\n+deadlock:MaybeCompactWalletDB\n deadlock:TestPotentialDeadLockDetected\n+deadlock:WalletBatch::ErasePool\n+deadlock:WalletBatch::EraseTx\n+deadlock:WalletBatch::FindWalletTx\n+deadlock:WalletBatch::LoadWallet\n+deadlock:WalletBatch::ReadPool\n+deadlock:WalletBatch::WalletBatch\n+deadlock:WalletBatch::WriteBestBlock\n+deadlock:WalletBatch::WriteCryptedKey\n+deadlock:WalletBatch::WriteCScript\n+deadlock:WalletBatch::WriteKey\n+deadlock:WalletBatch::WriteName\n+deadlock:WalletBatch::WritePool\n+deadlock:WalletBatch::WritePurpose\n+deadlock:WalletBatch::WriteTx\n+deadlock:WalletBatch::WriteWatchOnly\n+race:BerkeleyDatabase::Flush\n+race:BerkeleyEnvironment::Flush",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14829#discussion_r237644798",
      "id" : 237644798,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzNzY0NDc5OA==",
      "original_commit_id" : "1fac48773ad1d191fe02354a76c3a3a6c0077590",
      "original_position" : 34,
      "path" : "test/sanitizer_suppressions/tsan",
      "position" : null,
      "pull_request_review_id" : 179996405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14829",
      "updated_at" : "2018-12-02T20:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/237644798",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-12-01T18:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14829#issuecomment-443446769",
      "id" : 443446769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14829",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MzQ0Njc2OQ==",
      "updated_at" : "2018-12-01T18:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/443446769",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
