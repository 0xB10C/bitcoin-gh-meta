[
   {
      "body" : "Not sure I follow you. `CWallet::GenerateNewKey()` does a `RandAddSeedPerfmon()` as first thing. All private key generation goes through that wallet method. The only call to MakeNewKey is there, apart from the sanity check.\r\n\r\nI wouldn't be opposed to move the call closer to the actual generation for software engineering reasons, but it will not improve the state of the PRNG.",
      "created_at" : "2014-12-17T08:41:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67292163",
      "id" : 67292163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-17T08:42:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67292163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yes, effectively, the software engineering reasons i.e. ensuring that no publicly accessible MakeNewKey in some future wallet lib circumvents RandAddSeedPerfmon, as the tests do now (presumably inadvertently).",
      "created_at" : "2014-12-18T02:56:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67434602",
      "id" : 67434602,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-18T02:56:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67434602",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "OK well I'd say go ahead move the call.\r\n",
      "created_at" : "2014-12-18T08:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67455207",
      "id" : 67455207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-18T08:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67455207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "RandAddSeedPerfmon is of minimal value. I think it's not unlikely that we'll replace the RNG infrastructure during 0.11... I have no objection to moving things around so long as people are confident that it's low risk, but I don't think a lot of time would be well spent micro-twiddling the details on this.  (Also, not sure about which recent events you refer to, but ... we have never had a randomness related incident in Bitcoin core and take auditing, review, and testing of these components very seriously. Some places where there have been issues have had issues in part due to unnecessary small changes, something to keep in mind.)",
      "created_at" : "2014-12-19T01:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67587231",
      "id" : 67587231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-19T01:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67587231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Agreed. And, yes, not a randomness related incident in Bitcoin Core, but a third party.",
      "created_at" : "2014-12-19T01:54:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67588264",
      "id" : 67588264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-19T01:54:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67588264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "Right. The only places where bitcoin core require cryptographically secure randomness after the RFC6979 merge are:\r\n\r\n- Generation of private keys (for the wallet)\r\n- Generation of master key (for wallet encryption)\r\n- Generation of example password for RPC server\r\n\r\nThe other uses of GetRand* such as those in the network code and address manager could feasibly (but carefully) be replaced by a more efficient and less secure random number generator.\r\n",
      "created_at" : "2014-12-19T13:37:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-67638482",
      "id" : 67638482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2014-12-19T13:37:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67638482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Merged & closed.",
      "created_at" : "2015-01-04T16:38:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5495#issuecomment-68639045",
      "id" : 68639045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5495",
      "updated_at" : "2015-01-04T16:38:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68639045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   }
]
