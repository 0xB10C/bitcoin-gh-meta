{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "**Crashes:**\r\nIf wallet is checking existence of wallet.dat in directory where access is denied then _fs::exists()_ without _ec_ parameter will cause wallet crash.\r\n\r\nReproduction steps on Linux platform:\r\n1. Type: _mkdir ~/.bitcoin/crash_\r\n2. Type:  _sudo chown root:root ~/.bitcoin/crash_\r\n3. Run _bitcoin-qt_\r\n4. Go to menu _\"File\"_ -> _\"Open Wallet\"_, wallet will crash immediately\r\n\r\nIt's fixed by adding \"ec\" parameter into fs::exists() function to handle any error correctly.\r\n\r\n**Infinite loop:**\r\nIf iterator is not able to increment because of access denied to next level of recursive scan it will stay on the same position indefinitely causing wallet to stop responding.\r\n\r\nReproduction steps on Windows platform:\r\n1. Create new folder into bitcoin data folder (for example: _%Appdata%\\Roaming\\Bitcoin\\Loop_)\r\n2. Deny access to newly created folder for current user\r\n3. Run _bitcoin-qt.exe_\r\n4. Go to menu \"File\" -> \"Open Wallet\", wallet will hang indefinitely\r\n\r\nIt's fixed by disabling recursion if iterator increment failed. This way iterator will continue to next record in current recursion level not trying to dive into inaccessible directory structure.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18095/comments",
   "created_at" : "2020-02-07T20:52:09Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18095/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/18095",
   "id" : 561865318,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18095/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MzcyNTk1Njg5",
   "number" : 18095,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/18095.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18095",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/18095.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18095"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Fix crashes and infinite loop in ListWalletDir()",
   "updated_at" : "2020-02-07T20:53:44Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18095",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/37454226?v=4",
      "events_url" : "https://api.github.com/users/uhliksk/events{/privacy}",
      "followers_url" : "https://api.github.com/users/uhliksk/followers",
      "following_url" : "https://api.github.com/users/uhliksk/following{/other_user}",
      "gists_url" : "https://api.github.com/users/uhliksk/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/uhliksk",
      "id" : 37454226,
      "login" : "uhliksk",
      "node_id" : "MDQ6VXNlcjM3NDU0MjI2",
      "organizations_url" : "https://api.github.com/users/uhliksk/orgs",
      "received_events_url" : "https://api.github.com/users/uhliksk/received_events",
      "repos_url" : "https://api.github.com/users/uhliksk/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/uhliksk/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/uhliksk/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/uhliksk"
   }
}
