[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18228 (test: Add missing syncwithvalidationinterfacequeue by MarcoFalke)\n* #18044 (Use wtxid for transaction relay by sdaftuar)\n* #17812 (config, net, test: asmap feature refinements and functional tests by jonatack)\n* #17303 (p2p: Stop relaying non-mempool txs, improve tx privacy slightly by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-01-31T08:39:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-580639076",
      "id" : 580639076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDYzOTA3Ng==",
      "updated_at" : "2020-03-02T11:49:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580639076",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2020-02-18T02:53:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-587249206",
      "id" : 587249206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzI0OTIwNg==",
      "updated_at" : "2020-02-18T02:53:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587249206",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "travis failure seems unrelated- `feature_fee_estimation.py` ",
      "created_at" : "2020-02-27T20:14:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-592155950",
      "id" : 592155950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MjE1NTk1MA==",
      "updated_at" : "2020-02-27T20:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/592155950",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It could be a crash, because node1 stops to log anything at all",
      "created_at" : "2020-02-27T20:43:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-592167518",
      "id" : 592167518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5MjE2NzUxOA==",
      "updated_at" : "2020-02-27T20:43:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/592167518",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385368573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385368573"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this not saved to disk? It seems that on restart this set is cleared regardless of whether the tx was sent out.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-27T21:00:46Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast\n+    std::set<uint256> m_unbroadcast_txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385368573",
      "id" : 385368573,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2ODU3Mw==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 6,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 365993014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385368573",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795095"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The comment is incorrect, since a tx is *not* removed when it is not sent, e.g. because it was not found.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T16:31:36Z",
      "diff_hunk" : "@@ -1590,6 +1590,11 @@ void static ProcessGetData(CNode* pfrom, const CChainParams& chainparams, CConnm\n             if (mi != mapRelay.end()) {\n                 connman->PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi->second));\n                 push = true;\n+                // Once a peer requests GETDATA for a txn, we deem initial broadcast a success",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795095",
      "id" : 385795095,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc5NTA5NQ==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 4,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 365993014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795095",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795542"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795542"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is the tx not removed when it was initially sent out after 15 minutes, e.g. when it was removed from mapRelay and then relayed from the mempool.\r\n\r\nI think this code should go down into the `if(push)` branch",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T16:32:32Z",
      "diff_hunk" : "@@ -1590,6 +1590,11 @@ void static ProcessGetData(CNode* pfrom, const CChainParams& chainparams, CConnm\n             if (mi != mapRelay.end()) {\n                 connman->PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi->second));\n                 push = true;\n+                // Once a peer requests GETDATA for a txn, we deem initial broadcast a success\n+                int num = mempool.m_unbroadcast_txids.erase(inv.hash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795542",
      "id" : 385795542,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc5NTU0Mg==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 365993014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795542",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795926"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        LogPrint(BCLog::NET, \"Removed %i from m_unbroadcast_txids before tx was sent out. \\n\", hash.GetHex());\r\n```",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T16:33:19Z",
      "diff_hunk" : "@@ -416,6 +416,10 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n     for (const CTxIn& txin : it->GetTx().vin)\n         mapNextTx.erase(txin.prevout);\n \n+    if (mempool.m_unbroadcast_txids.erase(hash)) {\n+        LogPrint(BCLog::NET, \"Removed %i from m_unbroadcast_txids before GETDATA was received. \\n\", hash.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795926",
      "id" : 385795926,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc5NTkyNg==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 365993014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385795926",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385798846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385798846"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    scheduler.scheduleEvery([]{this->AttemptInitialBroadcast();}, REATTEMPT_BROADCAST_INTERVAL.count() );\r\n```\r\n\r\n",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T16:38:26Z",
      "diff_hunk" : "@@ -2332,6 +2332,9 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n     // Dump network addresses\n     scheduler.scheduleEvery(std::bind(&CConnman::DumpAddresses, this), DUMP_PEERS_INTERVAL * 1000);\n \n+    // Attempt to broadcast transactions that have not yet been acknowledged by the network\n+    scheduler.scheduleEvery(std::bind(&CConnman::AttemptInitialBroadcast, this), REATTEMPT_BROADCAST_INTERVAL.count() );",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385798846",
      "id" : 385798846,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc5ODg0Ng==",
      "original_commit_id" : "1a1a30cc4adbbcccfbb073fbf8ae9df1090a2996",
      "original_position" : 39,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 366530279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385798846",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385818114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385818114"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "great point. originally I was thinking of doing as a follow up PR (see [here](https://gist.github.com/amitiuttarwar/b592ee410e1f02ac0d44fcbed4621dba#follow-up-prs)), but now that this unbroadcast logic is broken out into its own PR I agree it makes sense here. I'll implement.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T17:15:38Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast\n+    std::set<uint256> m_unbroadcast_txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385818114",
      "id" : 385818114,
      "in_reply_to_id" : 385368573,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgxODExNA==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 6,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 366556224,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385818114",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385860440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385860440"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is not frequency 1/day (as the PR post says). It's a value between 0 and 24 hours, with an average of 12 hours. You probably want to do 12*60*60 + GetRand(12*60*60) or something like that?",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T18:44:44Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385860440",
      "id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg2MDQ0MA==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 366607338,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385860440",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385865086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385865086"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "How do you know that it won't be rejected due to \"filterInventoryKnown\"?\r\nWhat is the rationale here?",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-02-28T18:54:54Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385865086",
      "id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTg2NTA4Ng==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 366607338,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/385865086",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386613286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386613286"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It might. Which upholds the same guarantees as the previous logic it's replacing.\r\n\r\nOn current master, wallet transactions get rebroadcast through a scheduler flow that makes its way to `ResendWalletTransactions`, which selects transactions to rebroadcast then invokes `SubmitMemoryPoolAndRelay`. This goes to `BroadcastTransaction`, which checks ATMP then relays via `RelayTransaction`, which uses the `CNode#PushInventory` function that only adds the hash if its not contained in `filterInventoryKnown`. \r\n\r\nThis PR changes the initial parts of the flow... so `BroadcastTransaction` adds the transaction to `mempool.m_unbroadcast_txids`, then there is a scheduled job to periodically `AttemptInitialBroadcast`, but the behavior is matched where the locally-submitted transactions would be reattempted to send to the network, filtered for the connections that were already tried, and sent out to new connections.\r\n\r\nChanging that behavior could be desirable for robustness but of course reduces privacy. So out of scope for this PR. If you think it may be desirable, I'd be happy to think it through / talk about it more, we can open a new issue. (I'm working on the assumption that current delivery guarantees are sufficient). ",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-02T19:50:48Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386613286",
      "id" : 386613286,
      "in_reply_to_id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYxMzI4Ng==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 367480404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386613286",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386732669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386732669"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`12*60*60 + GetRand(12*60*60)` would get an average of 24 hours with a range of 12-36",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-03T00:27:53Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386732669",
      "id" : 386732669,
      "in_reply_to_id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjczMjY2OQ==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 367627078,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386732669",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386781925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386781925"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "you are right, this is a mistake. thanks ðð½",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-03T03:33:35Z",
      "diff_hunk" : "@@ -1590,6 +1590,11 @@ void static ProcessGetData(CNode* pfrom, const CChainParams& chainparams, CConnm\n             if (mi != mapRelay.end()) {\n                 connman->PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi->second));\n                 push = true;\n+                // Once a peer requests GETDATA for a txn, we deem initial broadcast a success\n+                int num = mempool.m_unbroadcast_txids.erase(inv.hash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r386781925",
      "id" : 386781925,
      "in_reply_to_id" : 385795542,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc4MTkyNQ==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 367683008,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/386781925",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387124518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387124518"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns yeah, that's what would be closer to 1/day, right? Not sure what you meant to say.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-03T16:07:11Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387124518",
      "id" : 387124518,
      "in_reply_to_id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEyNDUxOA==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 368110911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387124518",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387131829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387131829"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah I see. Just want to be clear that if the network is not really used, the bloom filter doesn't roll and transaction may be not rebroadcast in days.\r\nIf that's what you have in mind when designing the whole thing, let's just leave a comment that this can happen.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-03T16:17:25Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387131829",
      "id" : 387131829,
      "in_reply_to_id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEzMTgyOQ==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 368120220,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387131829",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387426782"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387426782"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oh my god. `12*60*60 + GetRand(24*60*60)` was what I was trying to type; min of 12h, max of 36h, average of 24h.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T03:08:30Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387426782",
      "id" : 387426782,
      "in_reply_to_id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQyNjc4Mg==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 368478382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387426782",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387431128"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387431128"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The `filterInventoryKnown` is per-peer though, so it just won't be rebroadcast to a peer that already knew about it somehow; but it'll stay in the unbroadcast set and be retried for other peers until a getdata actually makes its way through (or until it gets dropped from the mempool)? If all of your peers ignore your INV and don't request a GETDATA, you'll not send more INVs until you find a new peer, but... even if you did, those peers would probably still not send a GETDATA anyway, so what else would you do?",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T03:28:20Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387431128",
      "id" : 387431128,
      "in_reply_to_id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzMTEyOA==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 368483385,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387431128",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387431682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387431682"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`m_unbroadcast_txids` declaration is missing the `GUARDED_BY(cs)` thread safety annotation, and I think the errors adding that turns up indicates there's more locking needed which probably explains the node segfaulting in travis.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T03:30:54Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast\n+    std::set<uint256> m_unbroadcast_txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387431682",
      "id" : 387431682,
      "in_reply_to_id" : 385368573,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzMTY4Mg==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 6,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 368484015,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387431682",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387662775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387662775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "While I couldn't come up with a privacy-leaking attack based on this being a constant, I'd still suggest to make the delay random to avoid network-wide synchronized events that don't need to be synchronized",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T13:24:02Z",
      "diff_hunk" : "@@ -48,6 +48,9 @@ static_assert(MINIUPNPC_API_VERSION >= 10, \"miniUPnPc API version >= 10 assumed\"\n // Dump addresses to peers.dat every 15 minutes (900s)\n static constexpr int DUMP_PEERS_INTERVAL = 15 * 60;\n \n+// Attempt initial broadcast of locally submitted txns every 10 minutes.\n+static constexpr std::chrono::milliseconds REATTEMPT_BROADCAST_INTERVAL = std::chrono::milliseconds(10 * 60 * 1000);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387662775",
      "id" : 387662775,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY2Mjc3NQ==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 366530279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387662775",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387705673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387705673"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree, I think we should do what you just suggested.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T14:35:45Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387705673",
      "id" : 387705673,
      "in_reply_to_id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcwNTY3Mw==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 368828617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387705673",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387750082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387750082"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe it's the naming that confuses me. It's called \"rebroadcast\", not \"consider to rebroadcast\".\r\n>even if you did, those peers would probably still not send a GETDATA anyway\r\n\r\nNot sure about that. If transaction expires from a mempool, and there's not much activity on-chain, filter would still prevent us from re-announcing it. The correspondence between the two is questionable.\r\n\r\nBut yeah, if that's only my own confusion, I don't care about just keeping it this way without any comments.\r\n\r\n",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-04T15:40:29Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r387750082",
      "id" : 387750082,
      "in_reply_to_id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc1MDA4Mg==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 368886517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/387750082",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2020-03-05T13:33:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-595231541",
      "id" : 595231541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NTIzMTU0MQ==",
      "updated_at" : "2020-03-05T13:33:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/595231541",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393293074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393293074"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Have you weighted implications of wtxid-relay (#18044) ? I think you will need to track both txid/wtxid for backward-compability with non-upgraded nodes.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-16T20:31:56Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast\n+    std::set<uint256> m_unbroadcast_txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393293074",
      "id" : 393293074,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI5MzA3NA==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 6,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 375561005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393293074",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393297027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393297027"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"periodically (REATTEMPT_BROADCAST_INTERVAL)\"",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-16T20:40:29Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393297027",
      "id" : 393297027,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI5NzAyNw==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/txmempool.h",
      "position" : 5,
      "pull_request_review_id" : 375561005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393297027",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393946770"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393946770"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "this is the best option I've been able to identify for how to check if we are at the end of the file. would love to hear about any cleaner solutions.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:22:46Z",
      "diff_hunk" : "@@ -5045,12 +5046,30 @@ bool LoadMempool(CTxMemPool& pool)\n         for (const auto& i : mapDeltas) {\n             pool.PrioritiseTransaction(i.first, i.second);\n         }\n+\n+        // check if there are unbroadcast transactions\n+        bool has_unbroadcast_txns = false;\n+\n+        try {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393946770",
      "id" : 393946770,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk0Njc3MA==",
      "original_commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "original_position" : 16,
      "path" : "src/validation.cpp",
      "position" : 16,
      "pull_request_review_id" : 376376840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:33:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393946770",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393955311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393955311"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "- added logic to save unbroadcast set to disk\r\n- added thread safety annotation & missing locks from lots of call sites ð\r\n\r\nthank you both for this feedback ðð½\r\nwould love further review on the added logic ",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:39:14Z",
      "diff_hunk" : "@@ -534,6 +534,10 @@ class CTxMemPool\n     const setEntries & GetMemPoolParents(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     const setEntries & GetMemPoolChildren(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    // track locally submitted transactions & periodically retry initial broadcast\n+    std::set<uint256> m_unbroadcast_txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393955311",
      "id" : 393955311,
      "in_reply_to_id" : 385368573,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1NTMxMQ==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 6,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 376387657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:39:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393955311",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393957572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393957572"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't fully understand what you mean here. Are you pointing out that there are other ways the transaction gets removed from the set?\r\n\r\nI updated to: \"We intepret processing a GETDATA for a transaction as a successful initial broadcast and remove it from our unbroadcast set.\" \r\n\r\nDoes that seem reasonable? Or am I still missing the point? \r\n",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:43:04Z",
      "diff_hunk" : "@@ -1590,6 +1590,11 @@ void static ProcessGetData(CNode* pfrom, const CChainParams& chainparams, CConnm\n             if (mi != mapRelay.end()) {\n                 connman->PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi->second));\n                 push = true;\n+                // Once a peer requests GETDATA for a txn, we deem initial broadcast a success",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393957572",
      "id" : 393957572,
      "in_reply_to_id" : 385795095,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1NzU3Mg==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 4,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 376390280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:43:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393957572",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393957842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393957842"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed. Thanks again.",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:43:33Z",
      "diff_hunk" : "@@ -1590,6 +1590,11 @@ void static ProcessGetData(CNode* pfrom, const CChainParams& chainparams, CConnm\n             if (mi != mapRelay.end()) {\n                 connman->PushMessage(pfrom, msgMaker.Make(nSendFlags, NetMsgType::TX, *mi->second));\n                 push = true;\n+                // Once a peer requests GETDATA for a txn, we deem initial broadcast a success\n+                int num = mempool.m_unbroadcast_txids.erase(inv.hash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393957842",
      "id" : 393957842,
      "in_reply_to_id" : 385795542,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1Nzg0Mg==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 376390633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:43:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393957842",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393959353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393959353"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I updated it to \"from m_unbroadcast_txids before confirmation that txn was sent out\", but I feel uncertain... saying \"before GETDATA was received\" seems more clear & specific than \"confirmation that txn was sent out\". Could you explain further why you didn't like it? \r\n\r\nis this related to [this](https://github.com/bitcoin/bitcoin/pull/18038#discussion_r385795095)?",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:46:24Z",
      "diff_hunk" : "@@ -416,6 +416,10 @@ void CTxMemPool::removeUnchecked(txiter it, MemPoolRemovalReason reason)\n     for (const CTxIn& txin : it->GetTx().vin)\n         mapNextTx.erase(txin.prevout);\n \n+    if (mempool.m_unbroadcast_txids.erase(hash)) {\n+        LogPrint(BCLog::NET, \"Removed %i from m_unbroadcast_txids before GETDATA was received. \\n\", hash.GetHex());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393959353",
      "id" : 393959353,
      "in_reply_to_id" : 385795926,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk1OTM1Mw==",
      "original_commit_id" : "66ec5571ad49b68366e4607cf0b671231083757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 376392446,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393959353",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393961149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393961149"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "updated.\r\n\r\nfunny to update the code to match the comment language rather than vice versa ð but I don't have a strong preference around 12-36hrs vs 0-24hrs, both have small tradeoffs. ",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T20:49:44Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ void CWallet::ResendWalletTransactions()\n     // that these are our transactions.\n     if (GetTime() < nNextResend || !fBroadcastTransactions) return;\n     bool fFirst = (nNextResend == 0);\n-    nNextResend = GetTime() + GetRand(30 * 60);\n+    nNextResend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393961149",
      "id" : 393961149,
      "in_reply_to_id" : 385860440,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2MTE0OQ==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 376394643,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T20:49:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393961149",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393968358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393968358"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Maybe it's the naming that confuses me. It's called \"rebroadcast\", not \"consider to rebroadcast\".\r\n\r\nthe language I'm introducing is \"unbroadcast\", which means consider it as initial broadcast. but there are these interactions with `filterInventoryKnown` to consider in different cases. \r\n\r\nI added some comments [here](https://github.com/bitcoin/bitcoin/pull/18038/files#diff-eff7adeaec73a769788bb78858815c91R782) in an attempt to make this more apparent. \r\n\r\ngoing to resolve this conversation, but @naumenkogs let me know if you think this is something we need to more carefully consider in regards to this PR. ",
      "commit_id" : "3d185eda3c6d449e080b749acfb4986e6f88e203",
      "created_at" : "2020-03-17T21:01:56Z",
      "diff_hunk" : "@@ -780,6 +780,14 @@ void PeerLogicValidation::InitializeNode(CNode *pnode) {\n         PushNodeVersion(pnode, connman, GetTime());\n }\n \n+void PeerLogicValidation::QueueUnbroadcastTxs(CNode* pnode)\n+{\n+    for(const uint256& txid : mempool.m_unbroadcast_txids){\n+        CInv inv(MSG_TX, txid);\n+        pnode->PushInventory(inv);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#discussion_r393968358",
      "id" : 393968358,
      "in_reply_to_id" : 385865086,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk2ODM1OA==",
      "original_commit_id" : "66ddec88f59b32928495767daa548dc41558d56c",
      "original_position" : 8,
      "path" : "src/net_processing.cpp",
      "position" : 17,
      "pull_request_review_id" : 376402597,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18038",
      "updated_at" : "2020-03-17T21:01:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/393968358",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "looks like I have severely aggravated Travis. whoops ð. looking into it. ",
      "created_at" : "2020-03-17T21:14:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18038#issuecomment-600304555",
      "id" : 600304555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18038",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwMDMwNDU1NQ==",
      "updated_at" : "2020-03-17T21:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/600304555",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   }
]
