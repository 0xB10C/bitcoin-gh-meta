{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Our minimum supported kernel version is currently defined by Guix, as the version passed to the [`--enable-kernel=`](https://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html) option when configuring glibc. That version is [currently set to 3.2.0](https://git.savannah.gnu.org/cgit/guix.git/tree/gnu/packages/base.scm?id=34e9eae68c9583acce5abc4100add3d88932a5ae#n776):\r\n```scheme\r\n            ;; This is the default for most architectures as of GNU libc 2.26,\r\n            ;; but we specify it explicitly for clarity and consistency.  See\r\n            ;; \"kernel-features.h\" in the GNU libc for details.\r\n            \"--enable-kernel=3.2.0\"\r\n```\r\nand has been that way since we started using Guix (i.e from Guix 1.3.0, with the release v22.0).\r\n\r\nPassing `--enable-kernel` defines `__LINUX_KERNEL_VERSION` inside glibc, which is then used to determine supported features & syscall usage. For example, some defines in `unix/sysv/linux/kernel-features.h`, from glibc version 2.24, where glibcs default supported kernel version was still 2.6.32 (it's much modern as of recent releases):\r\n```cpp\r\n#ifndef __LINUX_KERNEL_VERSION\r\n/* We assume the worst; all kernels should be supported.  */\r\n# define __LINUX_KERNEL_VERSION\t0\r\n#endif\r\n\r\n/* Support for various CLOEXEC and NONBLOCK flags was added in\r\n   2.6.23.  */\r\n#define __ASSUME_O_CLOEXEC\t1\r\n\r\n/* prlimit64 is available in 2.6.36.  */\r\n#if __LINUX_KERNEL_VERSION >= 0x020624\r\n# define __ASSUME_PRLIMIT64\t1\r\n#endif\r\n```\r\n\r\nNote that because we currently specify the `4.19` headers, the exact version being used, i.e 4.19.x, changes when we update our time-machine commit, as Guix updates all it's header packages as new point releases become available. Currently it is [`4.19.234`](https://git.savannah.gnu.org/cgit/guix.git/tree/gnu/packages/linux.scm?id=34e9eae68c9583acce5abc4100add3d88932a5ae#n425). The changelog for the 4.19 headers is available [here](https://cdn.kernel.org/pub/linux/kernel/v4.x/ChangeLog-4.19.239).\r\n\r\nSimilar to glibc, it may currently be possible to build and run bitcoind against older kernels, however, for the purposes of documenting what we support for our release binaries, I can't see a reason to document anything other than the version that we are targeting when building the glibc used to build the release binaries.\r\n\r\nGuix Build (on x86_64):\r\n```bash\r\n918ce56183601ecf96b07faef3b7a956c78d01d5c99035c472e00199c7772ac6  guix-build-7009c11f42b7/output/aarch64-linux-gnu/SHA256SUMS.part\r\n3e91cd009ad6b463aa7fce20d505dc2eadb1bd65bd182104c4bc587640a282c5  guix-build-7009c11f42b7/output/aarch64-linux-gnu/bitcoin-7009c11f42b7-aarch64-linux-gnu-debug.tar.gz\r\n09f2dc5d1f17666560b5f1a1703d375ccea7814fe96fda2c1405a7c05d75b450  guix-build-7009c11f42b7/output/aarch64-linux-gnu/bitcoin-7009c11f42b7-aarch64-linux-gnu.tar.gz\r\n13e8c0545e55ed5a77272fbfc99a7632b6d38405b186c6156044af5ef9c3620c  guix-build-7009c11f42b7/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n87cd8888f36ed3060a098961866647880901e79b7bb1c1dd9b41fc3a97b910e4  guix-build-7009c11f42b7/output/arm-linux-gnueabihf/bitcoin-7009c11f42b7-arm-linux-gnueabihf-debug.tar.gz\r\n84c4bb96a9cd1d1711a031f766ad3271515c7a2c207eedea19d3b8c014225ae8  guix-build-7009c11f42b7/output/arm-linux-gnueabihf/bitcoin-7009c11f42b7-arm-linux-gnueabihf.tar.gz\r\n04098610e0475f634879353a98242e81dcabfd8a556857b225093db7397a882a  guix-build-7009c11f42b7/output/arm64-apple-darwin/SHA256SUMS.part\r\n83742bf1f4b3d3f6229afbad269b3e168830cbd76407da2a5ece250c5a490946  guix-build-7009c11f42b7/output/arm64-apple-darwin/bitcoin-7009c11f42b7-arm64-apple-darwin-unsigned.dmg\r\n39a7066d75fa55d86dbe69c69b9660993c783b59fcbaccf812bab2acb4140c6b  guix-build-7009c11f42b7/output/arm64-apple-darwin/bitcoin-7009c11f42b7-arm64-apple-darwin-unsigned.tar.gz\r\n7e29bfd13a963c5ed0ce52cbc077c09d0ccc4d8ee0c29d3824daac9417e5f5f1  guix-build-7009c11f42b7/output/arm64-apple-darwin/bitcoin-7009c11f42b7-arm64-apple-darwin.tar.gz\r\n9f34d1415f2fdf7404dd0dcdc15db0d88b68554c590090ffa2bc5effed81c442  guix-build-7009c11f42b7/output/dist-archive/bitcoin-7009c11f42b7.tar.gz\r\n2f10ded3a6f60ad8433d4e05c4247fceb13be6c78a9f92a895185339573362c5  guix-build-7009c11f42b7/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n575fd8552bde5a13903f1c43d8f3489bb678112029791e6a55b9eb1eb2ba3e8f  guix-build-7009c11f42b7/output/powerpc64-linux-gnu/bitcoin-7009c11f42b7-powerpc64-linux-gnu-debug.tar.gz\r\n5c35c9f07b42e7590ceba09f4eb1c7d0292adff5d2425e22c55da647ed156052  guix-build-7009c11f42b7/output/powerpc64-linux-gnu/bitcoin-7009c11f42b7-powerpc64-linux-gnu.tar.gz\r\n6eeb4d743e0b91612c4c5abec6d5e9a8a60c0615d05c66b6fe0d3b4c4a640ead  guix-build-7009c11f42b7/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\nc9b7e523ef4c189564007f1c08661655a8fe5b5e84127d3a9aa6410c505e7493  guix-build-7009c11f42b7/output/powerpc64le-linux-gnu/bitcoin-7009c11f42b7-powerpc64le-linux-gnu-debug.tar.gz\r\n8544d21662c3175c39e96f183960f58866f7fc802dc7261dcd84f854febd99cd  guix-build-7009c11f42b7/output/powerpc64le-linux-gnu/bitcoin-7009c11f42b7-powerpc64le-linux-gnu.tar.gz\r\ne548dfd1c074baaa7008232b6161608ef3c5739661bfbe02773eed71bafc4a97  guix-build-7009c11f42b7/output/riscv64-linux-gnu/SHA256SUMS.part\r\n45459212220c7e84015d9ce4dbe783bd58162a9b9adf165bebdf575ed066df43  guix-build-7009c11f42b7/output/riscv64-linux-gnu/bitcoin-7009c11f42b7-riscv64-linux-gnu-debug.tar.gz\r\n0e2e8c7c5f08f8125781c833689e64a1e62a4242287eacd5be7889edae36e1a0  guix-build-7009c11f42b7/output/riscv64-linux-gnu/bitcoin-7009c11f42b7-riscv64-linux-gnu.tar.gz\r\n23c923e417a6d814b910fabee1ef03b38ec7364c25032e056413a469192bb60b  guix-build-7009c11f42b7/output/x86_64-apple-darwin/SHA256SUMS.part\r\n56a8a5e4660ac30e01043c92bfd5267c7fc5955c9ae07836253e63652809e282  guix-build-7009c11f42b7/output/x86_64-apple-darwin/bitcoin-7009c11f42b7-x86_64-apple-darwin-unsigned.dmg\r\n5d493a34a08360fd90736a5da7194bb1175259a2568f39cac383bd1eb929f914  guix-build-7009c11f42b7/output/x86_64-apple-darwin/bitcoin-7009c11f42b7-x86_64-apple-darwin-unsigned.tar.gz\r\na8eca7308772ffa85abe78147e88653caeb4e3c6a25de3dbc8a19ecac46c8470  guix-build-7009c11f42b7/output/x86_64-apple-darwin/bitcoin-7009c11f42b7-x86_64-apple-darwin.tar.gz\r\n02ac471de2a216950d1c75e96227d75f9e488c6ec1e56210ab68f55102174290  guix-build-7009c11f42b7/output/x86_64-linux-gnu/SHA256SUMS.part\r\n2ff986239207f967ad4af13c89635492d18569bdfc8bccef45993179a5c01ae9  guix-build-7009c11f42b7/output/x86_64-linux-gnu/bitcoin-7009c11f42b7-x86_64-linux-gnu-debug.tar.gz\r\n860564ccaacb60b6775484f8bfdc99f23f4a0281d51415fc4d3025d00a42dd8a  guix-build-7009c11f42b7/output/x86_64-linux-gnu/bitcoin-7009c11f42b7-x86_64-linux-gnu.tar.gz\r\n092de6ea5b14e444b073b4cfc517ae4669073fd081e01143deea015dcdcb8513  guix-build-7009c11f42b7/output/x86_64-w64-mingw32/SHA256SUMS.part\r\ne485fb6571a9a14df58f962996e3eb281e87a618e02b78780d3bd8baeeccd52f  guix-build-7009c11f42b7/output/x86_64-w64-mingw32/bitcoin-7009c11f42b7-win64-debug.zip\r\n962b574950b51556ea086b7c5e1cf60412d540f8383e41e9b942e5807a7426d7  guix-build-7009c11f42b7/output/x86_64-w64-mingw32/bitcoin-7009c11f42b7-win64-setup-unsigned.exe\r\n312493e40c56a085252b76dcf100c4803cdddd56547faf1ad69bc59382cdb4d4  guix-build-7009c11f42b7/output/x86_64-w64-mingw32/bitcoin-7009c11f42b7-win64-unsigned.tar.gz\r\n7abb48a7490ca35ef6b72304a7157b4a5b001993044948ae94839babe487e38b  guix-build-7009c11f42b7/output/x86_64-w64-mingw32/bitcoin-7009c11f42b7-win64.zip\r\n```",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006/comments",
   "created_at" : "2022-04-27T15:30:45Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/25006",
   "id" : 1217523971,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "description" : null,
         "id" : 61889416,
         "name" : "Build system",
         "node_id" : "MDU6TGFiZWw2MTg4OTQxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      },
      {
         "color" : "bfd4f2",
         "default" : false,
         "description" : "",
         "id" : 1947349437,
         "name" : "DrahtBot Guix build requested",
         "node_id" : "MDU6TGFiZWwxOTQ3MzQ5NDM3",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/DrahtBot%20Guix%20build%20requested"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII58424kcX",
   "number" : 25006,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/25006.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25006",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/25006.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25006"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006/timeline",
   "title" : "guix: consolidate kernel headers to 4.19, specify 3.2.0 as minimum supported",
   "updated_at" : "2022-04-27T18:38:09Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25006",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   }
}
