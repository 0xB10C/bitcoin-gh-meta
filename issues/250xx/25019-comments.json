[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I find it better if HWI corrected this and always normalized to lower-case fingerprints. The other, maybe even better option is that HWI would assert that a fingerprint returned from an external signer script is always lowercase.\r\n\r\nEdit: cross-posted to https://github.com/bitcoin-core/HWI/issues/599#issuecomment-1112659492",
      "created_at" : "2022-04-28T21:12:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1112658612",
      "id" : 1112658612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CUdK0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112658612/reactions"
      },
      "updated_at" : "2022-04-28T21:14:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112658612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Currently HWI provides all master fingerprints in lowercase (all devices use `.hex()` on byte sequence). Question is: is HWI the only external signer? and will be? \r\n\r\nIMO when comparing byte sequences, we should normalize as they are per se not upper or lower case...",
      "created_at" : "2022-04-29T01:26:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1112799948",
      "id" : 1112799948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CU_rM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112799948/reactions"
      },
      "updated_at" : "2022-04-29T01:26:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112799948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25349625?v=4",
         "events_url" : "https://api.github.com/users/scgbckbone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scgbckbone/followers",
         "following_url" : "https://api.github.com/users/scgbckbone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scgbckbone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scgbckbone",
         "id" : 25349625,
         "login" : "scgbckbone",
         "node_id" : "MDQ6VXNlcjI1MzQ5NjI1",
         "organizations_url" : "https://api.github.com/users/scgbckbone/orgs",
         "received_events_url" : "https://api.github.com/users/scgbckbone/received_events",
         "repos_url" : "https://api.github.com/users/scgbckbone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scgbckbone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scgbckbone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scgbckbone"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think normalising to lower case is fine, but doing it only for `signtx` seems a bit brittle.\r\n\r\nHWI is not the only potential signer. There's a [document]( https://github.com/bitcoin/bitcoin/blob/master/doc/external-signer.md) that describes how external signer scripts / programs should behave. This currently does not specify if the fingerprint `MUST` / `SHOULD` be lower / upper case, or that it may be both. We should clarify that.\r\n\r\nNote that [BIP32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) doesn't specify how a fingerprint should be represented when used as a hex string. The examples it uses are uppercase and use the `0X` prefix. We could require all software (including Bitcoin Core, e.g. using `ParseHex()` in `strencodings.h`) to cleanly handle parsing of hex strings in any sane format, but I'm tempted to say it's easier to just require lower case without `0x` prefix.",
      "created_at" : "2022-04-29T09:23:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1113102280",
      "id" : 1113102280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CWJfI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113102280/reactions"
      },
      "updated_at" : "2022-04-29T09:32:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113102280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I think if external signer(ES) provides you with the uppercase master fp, changing it lowercase can break the communication with ES, as ES itself can implement no normalization and only expect uppercase. \r\n\r\n1. after `enumeratesigners` you get uppercase from ES\r\n2. core changes this globaly to lowercase to fit its needs (imo bad)\r\n3. trying to run other commands on ES with `--fingerprint=<normalized_lowercase_fingerprint>` can get you no results as ES can have same issue as core here (cmp lowercase and uppercase)\r\n\r\nthere are only 2 places where master fp is being compared: \r\n1. ExternalSigner::SignTransaction --> here it needs to be normalized (on the side of ES or core), core has somehow arbitrarily? chosen to encode lowercase\r\n2. ExternalSigner::Enumerate line 49 in duplicate check --> here it is not needed to be normalized as we check against what we get from the ES\r\n\r\nPotential solutions I see:\r\n1. as proposed here --> kind of already got 2 mehs from @prusnak @Sjors \r\n2. core can instead normalize fingerprint retrieved from PSBT and check both upper and lowercase representation of hex string -> this [PR](https://github.com/bitcoin/bitcoin/pull/25032)\r\n3. we do not care and should explicitly state that fingerprint has to be in lower hex --> this [PR](https://github.com/bitcoin/bitcoin/pull/25033)... this should be imo merged either ways but if 1. or 2. gets merged too language there should be changed from MUST to SHOULD",
      "created_at" : "2022-04-29T15:41:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1113460970",
      "id" : 1113460970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CXhDq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113460970/reactions"
      },
      "updated_at" : "2022-04-29T15:41:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113460970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25349625?v=4",
         "events_url" : "https://api.github.com/users/scgbckbone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scgbckbone/followers",
         "following_url" : "https://api.github.com/users/scgbckbone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scgbckbone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scgbckbone",
         "id" : 25349625,
         "login" : "scgbckbone",
         "node_id" : "MDQ6VXNlcjI1MzQ5NjI1",
         "organizations_url" : "https://api.github.com/users/scgbckbone/orgs",
         "received_events_url" : "https://api.github.com/users/scgbckbone/received_events",
         "repos_url" : "https://api.github.com/users/scgbckbone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scgbckbone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scgbckbone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scgbckbone"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Case-ness shouldn't matter. What we should be doing is parsing the fingerprint string as bytes, not converting the bytes fingerprint to hex.",
      "created_at" : "2022-04-29T20:39:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1113708656",
      "id" : 1113708656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CYdhw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113708656/reactions"
      },
      "updated_at" : "2022-04-29T20:39:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113708656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@achow101 is right imo - I updated this PR to instead of playing with upper and lower case parsed master fp from external signer as bytes and comapred with bytes from PSBT... my c++ is non-existent so not sure If it is optimal",
      "created_at" : "2022-04-29T23:04:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1113852088",
      "id" : 1113852088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CZAi4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113852088/reactions"
      },
      "updated_at" : "2022-04-29T23:04:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113852088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25349625?v=4",
         "events_url" : "https://api.github.com/users/scgbckbone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scgbckbone/followers",
         "following_url" : "https://api.github.com/users/scgbckbone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scgbckbone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scgbckbone",
         "id" : 25349625,
         "login" : "scgbckbone",
         "node_id" : "MDQ6VXNlcjI1MzQ5NjI1",
         "organizations_url" : "https://api.github.com/users/scgbckbone/orgs",
         "received_events_url" : "https://api.github.com/users/scgbckbone/received_events",
         "repos_url" : "https://api.github.com/users/scgbckbone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scgbckbone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scgbckbone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scgbckbone"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "That looks better at first glance. Can you squash these three commits?",
      "created_at" : "2022-04-30T17:50:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1114027332",
      "id" : 1114027332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CZrVE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114027332/reactions"
      },
      "updated_at" : "2022-04-30T17:50:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114027332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "squashed and rebased on top of current master",
      "created_at" : "2022-05-01T02:50:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25019#issuecomment-1114110323",
      "id" : 1114110323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25019",
      "node_id" : "IC_kwDOABII585CZ_lz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114110323/reactions"
      },
      "updated_at" : "2022-05-01T02:50:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114110323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25349625?v=4",
         "events_url" : "https://api.github.com/users/scgbckbone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/scgbckbone/followers",
         "following_url" : "https://api.github.com/users/scgbckbone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/scgbckbone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/scgbckbone",
         "id" : 25349625,
         "login" : "scgbckbone",
         "node_id" : "MDQ6VXNlcjI1MzQ5NjI1",
         "organizations_url" : "https://api.github.com/users/scgbckbone/orgs",
         "received_events_url" : "https://api.github.com/users/scgbckbone/received_events",
         "repos_url" : "https://api.github.com/users/scgbckbone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/scgbckbone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/scgbckbone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/scgbckbone"
      }
   }
]
