[
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/25044/checks?check_run_id=6241399894:\r\n```bash\r\n\r\n85/242 - \u001b[1mrpc_rawtransaction.py --legacy-wallet\u001b[0m failed, Duration: 2 s\r\n\r\n\u001b[0m2022-04-30T17:43:46.674000Z TestFramework (INFO): Initializing test directory /tmp/cirrus-ci-build/ci/scratch/test_runner/test_runner_â¿_ð_20220430_174259/rpc_rawtransaction_151\r\n2022-04-30T17:43:47.170000Z TestFramework (INFO): Prepare some coins for multiple *rawtransaction commands\r\n2022-04-30T17:43:48.329000Z TestFramework (INFO): Test getrawtransaction with -txindex\r\n2022-04-30T17:43:48.333000Z TestFramework (INFO): Test getrawtransaction without -txindex\r\n2022-04-30T17:43:48.337000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 133, in main\r\n    self.run_test()\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_rawtransaction.py\", line 86, in run_test\r\n    self.getrawtransaction_tests()\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_rawtransaction.py\", line 143, in getrawtransaction_tests\r\n    tx = self.wallet.send_self_transfer(from_node=self.nodes[2])['txid']\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/wallet.py\", line 171, in send_self_transfer\r\n    tx = self.create_self_transfer(**kwargs)\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/wallet.py\", line 264, in create_self_transfer\r\n    assert_equal(mempool_valid, tx_info['allowed'])\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/util.py\", line 51, in assert_equal\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\nAssertionError: not(True == False)\r\n2022-04-30T17:43:48.389000Z TestFramework (INFO): Stopping nodes\r\n```",
      "created_at" : "2022-04-30T19:37:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#issuecomment-1114042785",
      "id" : 1114042785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25044",
      "node_id" : "IC_kwDOABII585CZvGh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114042785/reactions"
      },
      "updated_at" : "2022-04-30T19:37:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114042785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-04-30T20:47:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#issuecomment-1114051620",
      "id" : 1114051620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25044",
      "node_id" : "IC_kwDOABII585CZxQk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114051620/reactions"
      },
      "updated_at" : "2022-05-20T10:45:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114051620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ops :(\r\nShould be ok now, thanks!",
      "created_at" : "2022-05-01T09:21:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#issuecomment-1114182326",
      "id" : 1114182326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25044",
      "node_id" : "IC_kwDOABII585CaRK2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114182326/reactions"
      },
      "updated_at" : "2022-05-03T09:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114182326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review after our seminar tomorrow :)",
      "created_at" : "2022-05-03T15:06:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#issuecomment-1116208667",
      "id" : 1116208667,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25044",
      "node_id" : "IC_kwDOABII585Ch_4b",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116208667/reactions"
      },
      "updated_at" : "2022-05-03T15:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116208667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864206436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864206436"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\n        self.requires_wallet = self.is_wallet_compiled()\r\n```",
      "commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "created_at" : "2022-05-03T20:27:04Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864206436",
      "id" : 864206436,
      "line" : 66,
      "node_id" : "PRRC_kwDOABII584zgr5k",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 66,
      "original_position" : 15,
      "original_start_line" : 65,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 15,
      "pull_request_review_id" : 961018633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864206436/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 65,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-03T20:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864206436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/17150045?v=4",
         "events_url" : "https://api.github.com/users/vincenzopalazzo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vincenzopalazzo/followers",
         "following_url" : "https://api.github.com/users/vincenzopalazzo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vincenzopalazzo",
         "id" : 17150045,
         "login" : "vincenzopalazzo",
         "node_id" : "MDQ6VXNlcjE3MTUwMDQ1",
         "organizations_url" : "https://api.github.com/users/vincenzopalazzo/orgs",
         "received_events_url" : "https://api.github.com/users/vincenzopalazzo/received_events",
         "repos_url" : "https://api.github.com/users/vincenzopalazzo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vincenzopalazzo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vincenzopalazzo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864592742"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864592742"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Interesting. I think the goal of this change it to not run the test at all to avoid wasting resources if a specific wallet type is requested, but not available?\r\n\r\nHowever, the test will still run twice when the wallet isn't compiled: https://cirrus-ci.com/task/5291414786408448?logs=ci#L3574\r\n\r\nI think it might be better to fix this by removing this whole method and also consolidate the two tasks into one:\r\n\r\n```\r\n$ git grep 'rpc_rawtransaction.py'\r\ntest/functional/test_runner.py:    'rpc_rawtransaction.py --legacy-wallet',\r\ntest/functional/test_runner.py:    'rpc_rawtransaction.py --descriptors',\r\n",
      "commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "created_at" : "2022-05-04T08:52:17Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864592742",
      "id" : 864592742,
      "line" : 75,
      "node_id" : "PRRC_kwDOABII584ziKNm",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 75,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 25,
      "pull_request_review_id" : 961520368,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864592742/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T08:52:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864592742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864593062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864593062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why are those two calls needed?",
      "commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "created_at" : "2022-05-04T08:52:37Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():\n+            self.generate(self.nodes[2], 1)\n+            self.generate(self.nodes[0], COINBASE_MATURITY + 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864593062",
      "id" : 864593062,
      "line" : 88,
      "node_id" : "PRRC_kwDOABII584ziKSm",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 88,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 43,
      "pull_request_review_id" : 961520368,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864593062/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T08:52:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864593062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864765750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864765750"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\nfrom test_framework.wallet import (\r\n    MiniWallet,\r\n    getnewdestination,\r\n)\r\n```\r\n(that way, potential merge conflicts can be resolved easier)",
      "commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "created_at" : "2022-05-04T12:22:13Z",
      "diff_hunk" : "@@ -24,8 +24,8 @@\n from test_framework.util import (\n     assert_equal,\n     assert_raises_rpc_error,\n-    find_vout_for_address,\n )\n+from test_framework.wallet import MiniWallet, getnewdestination",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864765750",
      "id" : 864765750,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII584zi0c2",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 28,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 6,
      "pull_request_review_id" : 961759298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864765750/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T12:26:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864765750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864777664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864777664"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        if self.requires_wallet:\r\n```\r\n\r\nmaybe you can avoid calls to `is_wallet_compiled()` since you defined a var for it in `set_test_params`:\r\n```py\r\nif self.is_wallet_compiled():\r\n    self.requires_wallet = True\r\n```",
      "commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "created_at" : "2022-05-04T12:35:59Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r864777664",
      "id" : 864777664,
      "line" : 86,
      "node_id" : "PRRC_kwDOABII584zi3XA",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 86,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 41,
      "pull_request_review_id" : 961775587,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864777664/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T12:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864777664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866037887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866037887"
         }
      },
      "author_association" : "NONE",
      "body" : "Those two were already in the test:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/fcf6c8f4eb217763545ede1766831a6b93f583bd/test/functional/rpc_rawtransaction.py#L75-L80\r\n\r\nBut yeah, you're right, I can just drop them:\r\n- It seems to me that generating from `nodes[2]` was never really needed\r\n- Generating from `nodes[0]` is not needed anymore (I'm already doing it a couple of lines above, to make sure that all the `self.wallet` utxos are mature)",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-05T15:27:59Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():\n+            self.generate(self.nodes[2], 1)\n+            self.generate(self.nodes[0], COINBASE_MATURITY + 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866037887",
      "id" : 866037887,
      "in_reply_to_id" : 864593062,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584znrB_",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 88,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 963555242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866037887/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:28:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866037887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866039346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866039346"
         }
      },
      "author_association" : "NONE",
      "body" : "Updated, thanks :) ",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-05T15:28:53Z",
      "diff_hunk" : "@@ -24,8 +24,8 @@\n from test_framework.util import (\n     assert_equal,\n     assert_raises_rpc_error,\n-    find_vout_for_address,\n )\n+from test_framework.wallet import MiniWallet, getnewdestination",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866039346",
      "id" : 866039346,
      "in_reply_to_id" : 864765750,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584znrYy",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 28,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 963556808,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866039346/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866039346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866040236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866040236"
         }
      },
      "author_association" : "NONE",
      "body" : "Oh, right! I just updated it, thank you :) ",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-05T15:29:20Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866040236",
      "id" : 866040236,
      "in_reply_to_id" : 864777664,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584znrms",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 86,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 963557874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866040236/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:29:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866040236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866043922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866043922"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No, you are adding them *twice*? Whereas before they were only there once?",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-05T15:32:15Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():\n+            self.generate(self.nodes[2], 1)\n+            self.generate(self.nodes[0], COINBASE_MATURITY + 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866043922",
      "id" : 866043922,
      "in_reply_to_id" : 864593062,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584znsgS",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 88,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 963562747,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866043922/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T15:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866043922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866074588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866074588"
         }
      },
      "author_association" : "NONE",
      "body" : "Yeah, I was doing `self.generate(self.nodes[0], COINBASE_MATURITY + 1)` twice without a real reason :)\r\n\r\nIt should be better now, thanks!",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-05T16:02:18Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n+        if self.is_wallet_compiled():\n+            self.generate(self.nodes[2], 1)\n+            self.generate(self.nodes[0], COINBASE_MATURITY + 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r866074588",
      "id" : 866074588,
      "in_reply_to_id" : 864593062,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584znz_c",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 88,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 963609277,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866074588/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-05T16:02:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/866074588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r867398439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867398439"
         }
      },
      "author_association" : "NONE",
      "body" : "> I think the goal of this change it to not run the test at all to avoid wasting resources if a specific wallet type is requested, but not available?\r\n\r\nIt's more that without this function if you try to run the test with `--descriptors` but without having sqlite compiled (or, viceversa, `legacy` but no bdb) the whole test fails... \r\n\r\n```\r\nâ¯ ./configure --without-bdb\r\nâ¯ make -j 9\r\nâ¯ ./test/functional/rpc_rawtransaction.py --legacy-wallet\r\n2022-05-07T21:43:41.365000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_7w6fc454\r\n2022-05-07T21:43:41.641000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 132, in main\r\n    self.setup()\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 295, in setup\r\n    self.setup_network()\r\n  File \"/home/daniela/Developer/bitcoin/./test/functional/rpc_rawtransaction.py\", line 72, in setup_network\r\n    super().setup_network()\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 389, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 416, in setup_nodes\r\n    self.import_deterministic_coinbase_privkeys()\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 433, in import_deterministic_coinbase_privkeys\r\n    self.init_wallet(node=i)\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_framework.py\", line 440, in init_wallet\r\n    n.createwallet(wallet_name=wallet_name, descriptors=self.options.descriptors, load_on_startup=True)\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/test_node.py\", line 753, in createwallet\r\n    return self.__getattr__('createwallet')(wallet_name, disable_private_keys, blank, passphrase, avoid_reuse, descriptors, load_on_startup, external_signer)\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/coverage.py\", line 49, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/daniela/Developer/bitcoin/test/functional/test_framework/authproxy.py\", line 144, in __call__\r\n    raise JSONRPCException(response['error'], status)\r\ntest_framework.authproxy.JSONRPCException: Compiled without bdb support (required for legacy wallets) (-4)\r\n2022-05-07T21:43:41.694000Z TestFramework (INFO): Stopping nodes\r\n2022-05-07T21:43:41.800000Z TestFramework (WARNING): Not cleaning up dir /tmp/bitcoin_func_test_7w6fc454\r\n2022-05-07T21:43:41.800000Z TestFramework (ERROR): Test failed. Test logging available at /tmp/bitcoin_func_test_7w6fc454/test_framework.log\r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR): \r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR): Hint: Call /home/daniela/Developer/bitcoin/test/functional/combine_logs.py '/tmp/bitcoin_func_test_7w6fc454' to consolidate all logs\r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR): \r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR): If this failure happened unexpectedly or intermittently, please file a bug and provide a link or upload of the combined log.\r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR): https://github.com/bitcoin/bitcoin/issues\r\n2022-05-07T21:43:41.801000Z TestFramework (ERROR):\r\n```\r\n\r\n> I think it might be better to fix this by removing this whole method and also consolidate the two tasks into one:\r\n\r\nI've given a bit of thought to this, but I really don't know how I would do that... `self.signrawtransactionwithwallet_tests` still has to use the Core wallet, shouldn't we test it with both the legacy and the descriptor wallet?",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-07T21:50:06Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r867398439",
      "id" : 867398439,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII584zs3Mn",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 965366049,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867398439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-07T21:50:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867398439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r867438702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867438702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You can execute the subtests conditionally\r\n\r\n```\r\nif sqlite:\r\n  do_sqlite_test()\r\ntest()",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-08T05:47:13Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r867438702",
      "id" : 867438702,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII584ztBBu",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 965397264,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867438702/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-08T05:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/867438702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873149491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873149491"
         }
      },
      "author_association" : "NONE",
      "body" : "I'm sorry, I really can't figure out how to do this without massively changing the `test_framework.py` code. To me it seems that you can't in a single run test both with the descriptors and the legacy wallet...",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-15T10:52:21Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873149491",
      "id" : 873149491,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII5840CzQz",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 973157060,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873149491/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-15T10:52:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873149491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873197210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197210"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right. This should only be possible when both the descriptor wallet and legacy wallet are compiled (and this test is slightly rewritten).\r\n\r\nHowever, I think it is fine to simply run just one (either sqlite or bdb).\r\n\r\nThis means that any sqlite test case line of code will need to be guarded by a check that checks for sqlite (and the same for bdb). This should not need any framework changes.",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-15T17:04:30Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873197210",
      "id" : 873197210,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII5840C-6a",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 973196783,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-15T17:04:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873197621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unless of course the test is largely monolithic (most lines depend on previous lines), so conditional execution is not straightforward.",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-15T17:08:11Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r873197621",
      "id" : 873197621,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII5840C_A1",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 973197082,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-15T17:08:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/873197621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874695633"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874695633"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit here and line 337 below\r\n```suggestion\r\n        # Fee rate is 0.00100000 BTC/kvB\r\n```",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T11:25:55Z",
      "diff_hunk" : "@@ -310,71 +311,49 @@ def signrawtransactionwithwallet_tests(self):\n \n     def sendrawtransaction_tests(self):\n         self.log.info(\"Test sendrawtransaction with missing input\")\n-        inputs = [{'txid': TXID, 'vout': 1}]  # won't exist\n-        outputs = {self.nodes[0].getnewaddress(): 4.998}\n-        rawtx = self.nodes[2].createrawtransaction(inputs, outputs)\n-        rawtx = self.nodes[2].signrawtransactionwithwallet(rawtx)\n+        utxo_to_spend = {'txid': TXID, 'vout': 1, 'value': 15}  # won't exist\n+        rawtx = self.wallet.create_self_transfer(mempool_valid=False, utxo_to_spend=utxo_to_spend)\n         assert_raises_rpc_error(-25, \"bad-txns-inputs-missingorspent\", self.nodes[2].sendrawtransaction, rawtx['hex'])\n \n     def sendrawtransaction_testmempoolaccept_tests(self):\n         self.log.info(\"Test sendrawtransaction/testmempoolaccept with maxfeerate\")\n         fee_exceeds_max = \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\"\n \n         # Test a transaction with a small fee.\n-        txId = self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), 1.0)\n-        rawTx = self.nodes[0].getrawtransaction(txId, True)\n-        vout = next(o for o in rawTx['vout'] if o['value'] == Decimal('1.00000000'))\n-\n-        self.sync_all()\n-        inputs = [{\"txid\": txId, \"vout\": vout['n']}]\n-        # Fee 10,000 satoshis, (1 - (10000 sat * 0.00000001 BTC/sat)) = 0.9999\n-        outputs = {self.nodes[0].getnewaddress(): Decimal(\"0.99990000\")}\n-        rawTx = self.nodes[2].createrawtransaction(inputs, outputs)\n-        rawTxSigned = self.nodes[2].signrawtransactionwithwallet(rawTx)\n-        assert_equal(rawTxSigned['complete'], True)\n-        # Fee 10,000 satoshis, ~100 b transaction, fee rate should land around 100 sat/byte = 0.00100000 BTC/kB\n+        # Fee rate is 0.00100000 BTC/kB",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874695633",
      "id" : 874695633,
      "line" : 323,
      "node_id" : "PRRC_kwDOABII5840IsvR",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 323,
      "original_position" : 162,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 162,
      "pull_request_review_id" : 975300366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874695633/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T11:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874695633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874703318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874703318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, consistency with your changes\r\n```suggestion\r\n        txId = tx['txid']\r\n```",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T11:35:34Z",
      "diff_hunk" : "@@ -62,44 +64,43 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        self.requires_wallet = self.is_wallet_compiled()\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.requires_wallet:\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()\n \n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n \n         self.getrawtransaction_tests()\n         self.createrawtransaction_tests()\n-        self.signrawtransactionwithwallet_tests()\n+        if self.requires_wallet:\n+            self.signrawtransactionwithwallet_tests()\n         self.sendrawtransaction_tests()\n         self.sendrawtransaction_testmempoolaccept_tests()\n         self.decoderawtransaction_tests()\n         self.transaction_version_number_tests()\n-        if not self.options.descriptors:\n+        if self.requires_wallet and not self.options.descriptors:\n             self.raw_multisig_transaction_legacy_tests()\n \n     def getrawtransaction_tests(self):\n-        addr = self.nodes[1].getnewaddress()\n-        txid = self.nodes[0].sendtoaddress(addr, 10)\n+        tx = self.wallet.send_self_transfer(from_node=self.nodes[1])\n+        self.sync_all()\n         self.generate(self.nodes[0], 1)\n-        vout = find_vout_for_address(self.nodes[1], txid, addr)\n-        rawTx = self.nodes[1].createrawtransaction([{'txid': txid, 'vout': vout}], {self.nodes[1].getnewaddress(): 9.999})\n-        rawTxSigned = self.nodes[1].signrawtransactionwithwallet(rawTx)\n-        txId = self.nodes[1].sendrawtransaction(rawTxSigned['hex'])\n-        self.generateblock(self.nodes[0], output=self.nodes[0].getnewaddress(), transactions=[rawTxSigned['hex']])\n+        txId = tx[\"txid\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874703318",
      "id" : 874703318,
      "line" : 103,
      "node_id" : "PRRC_kwDOABII5840IunW",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 103,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 69,
      "pull_request_review_id" : 975300366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874703318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T11:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874703318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874708737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874708737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, not sure how obvious it is to readers that `getnewdestination()[2]` is an address without looking up the function, so (here and just above) this might be clearer\r\n```diff\r\n-            outputs = {getnewdestination()[2]: 1}\r\n-            rawtx = self.nodes[0].createrawtransaction(inputs, outputs)\r\n+            address = getnewdestination()[2]\r\n+            rawtx = self.nodes[0].createrawtransaction(inputs=inputs, outputs={address: 1})\r\n```\r\n",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T11:42:00Z",
      "diff_hunk" : "@@ -200,20 +201,20 @@ def createrawtransaction_tests(self):\n         # sequence number out of range\n         for invalid_seq in [-1, 4294967296]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': invalid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             assert_raises_rpc_error(-8, 'Invalid parameter, sequence number is out of range',\n                                     self.nodes[0].createrawtransaction, inputs, outputs)\n         # with valid sequence number\n         for valid_seq in [1000, 4294967294]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': valid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874708737",
      "id" : 874708737,
      "line" : 210,
      "node_id" : "PRRC_kwDOABII5840Iv8B",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 210,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 120,
      "pull_request_review_id" : 975300366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874708737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T11:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874708737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874710885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874710885"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, since you are touching this maybe move `address2` to where it is first used\r\n```diff\r\n         address = getnewdestination()[2]\r\n-        address2 = getnewdestination()[2]\r\n         assert_raises_rpc_error(-1, \"JSON value is not an array as expected\", self.nodes[0].createrawtransaction, [], 'foo')\r\n         self.nodes[0].createrawtransaction(inputs=[], outputs={})  # Should not throw for backwards compatibility\r\n         self.nodes[0].createrawtransaction(inputs=[], outputs=[])\r\n@@ -246,6 +242,7 @@ class RawTransactionsTest(BitcoinTestFramework):\r\n             self.nodes[2].createrawtransaction(inputs=[{'txid': TXID, 'vout': 9}], outputs=[{address: 99}]),\r\n         )\r\n         # Two outputs\r\n+        address2 = getnewdestination()[2]\r\n         tx = tx_from_hex(self.nodes[2].createrawtransaction(inputs=[{'txid': TXID, 'vout': 9}], outputs=OrderedDict([(address, 99), (address2, 99)])))\r\n```\r\n",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T11:44:32Z",
      "diff_hunk" : "@@ -200,20 +201,20 @@ def createrawtransaction_tests(self):\n         # sequence number out of range\n         for invalid_seq in [-1, 4294967296]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': invalid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             assert_raises_rpc_error(-8, 'Invalid parameter, sequence number is out of range',\n                                     self.nodes[0].createrawtransaction, inputs, outputs)\n         # with valid sequence number\n         for valid_seq in [1000, 4294967294]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': valid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             rawtx = self.nodes[0].createrawtransaction(inputs, outputs)\n             decrawtx = self.nodes[0].decoderawtransaction(rawtx)\n             assert_equal(decrawtx['vin'][0]['sequence'], valid_seq)\n \n         # Test `createrawtransaction` invalid `outputs`\n-        address = self.nodes[0].getnewaddress()\n-        address2 = self.nodes[0].getnewaddress()\n+        address = getnewdestination()[2]\n+        address2 = getnewdestination()[2]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874710885",
      "id" : 874710885,
      "line" : 217,
      "node_id" : "PRRC_kwDOABII5840Iwdl",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 217,
      "original_position" : 129,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 129,
      "pull_request_review_id" : 975300366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874710885/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T11:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874710885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874820566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874820566"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this is unclear, it might be clearer to change this everywhere where`getnewdestination` is used (in a separate pull)?",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T13:32:08Z",
      "diff_hunk" : "@@ -200,20 +201,20 @@ def createrawtransaction_tests(self):\n         # sequence number out of range\n         for invalid_seq in [-1, 4294967296]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': invalid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             assert_raises_rpc_error(-8, 'Invalid parameter, sequence number is out of range',\n                                     self.nodes[0].createrawtransaction, inputs, outputs)\n         # with valid sequence number\n         for valid_seq in [1000, 4294967294]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': valid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874820566",
      "id" : 874820566,
      "in_reply_to_id" : 874708737,
      "line" : 210,
      "node_id" : "PRRC_kwDOABII5840JLPW",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 210,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 120,
      "pull_request_review_id" : 975479510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874820566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T13:32:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874820566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874821317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874821317"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Let me know if you are stuck on this and I can take a closer look myself.",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T13:32:49Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874821317",
      "id" : 874821317,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII5840JLbF",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 975480570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874821317/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T13:32:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874821317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874822912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874822912"
         }
      },
      "author_association" : "NONE",
      "body" : "I'm working on it, I'll let you know, thanks ð ",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T13:34:09Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874822912",
      "id" : 874822912,
      "in_reply_to_id" : 864592742,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII5840JL0A",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 28,
      "pull_request_review_id" : 975482857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874822912/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T13:34:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874822912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874835621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874835621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Right, and/or maybe have it return a dict: `getnewdestination()['address']`",
      "commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "created_at" : "2022-05-17T13:44:24Z",
      "diff_hunk" : "@@ -200,20 +201,20 @@ def createrawtransaction_tests(self):\n         # sequence number out of range\n         for invalid_seq in [-1, 4294967296]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': invalid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             assert_raises_rpc_error(-8, 'Invalid parameter, sequence number is out of range',\n                                     self.nodes[0].createrawtransaction, inputs, outputs)\n         # with valid sequence number\n         for valid_seq in [1000, 4294967294]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': valid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r874835621",
      "id" : 874835621,
      "in_reply_to_id" : 874708737,
      "line" : 210,
      "node_id" : "PRRC_kwDOABII5840JO6l",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 210,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 120,
      "pull_request_review_id" : 975501668,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874835621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-17T13:44:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874835621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875697962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875697962"
         }
      },
      "author_association" : "NONE",
      "body" : "Should be ok now :)",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-18T09:50:08Z",
      "diff_hunk" : "@@ -62,44 +62,51 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        if self.is_wallet_compiled():\n+            self.requires_wallet = True\n \n         self.supports_cli = False\n \n     def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n+        if self.is_wallet_compiled():\n+            if self.options.descriptors:\n+                self.skip_if_no_sqlite()\n+            else:\n+                self.skip_if_no_bdb()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875697962",
      "id" : 875697962,
      "in_reply_to_id" : 864592742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Mhcq",
      "original_commit_id" : "f9d5b497727bbb1e0b8851bb37abffaa51e08c27",
      "original_line" : 76,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 976673290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875697962/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-18T09:50:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875697962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875699507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875699507"
         }
      },
      "author_association" : "NONE",
      "body" : "Fixed, thanks!\r\nFrom a quick `git grep` it seems to me the usage of `getnewdestination` is clear in the other tests:\r\n```\r\ntest/functional/feature_coinstatsindex.py:    getnewdestination,\r\ntest/functional/feature_coinstatsindex.py:        reorg_blocks = self.generatetoaddress(index_node, 2, getnewdestination()[2])\r\ntest/functional/interface_rest.py:    getnewdestination,\r\ntest/functional/interface_rest.py:        txid, _ = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=int(0.1 * COIN))\r\ntest/functional/interface_rest.py:        txid, _ = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=int(0.1 * COIN))\r\ntest/functional/p2p_filter.py:    getnewdestination,\r\ntest/functional/p2p_filter.py:        block_hash = self.generatetoscriptpubkey(getnewdestination()[1])\r\ntest/functional/p2p_filter.py:        self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=7 * COIN)\r\ntest/functional/p2p_filter.py:            txid, _ = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=7 * COIN)\r\ntest/functional/p2p_filter.py:            block_hash = self.generatetoscriptpubkey(getnewdestination()[1])\r\ntest/functional/rpc_createmultisig.py:    getnewdestination,\r\ntest/functional/rpc_createmultisig.py:            self.final = getnewdestination()[2]\r\ntest/functional/rpc_createmultisig.py:        pk0 = getnewdestination()[0].hex()\r\ntest/functional/rpc_createmultisig.py:        pk1 = getnewdestination()[0].hex()\r\ntest/functional/rpc_createmultisig.py:        pk2 = getnewdestination()[0].hex()\r\ntest/functional/rpc_rawtransaction.py:    getnewdestination,\r\ntest/functional/rpc_rawtransaction.py:            address = getnewdestination()[2]\r\ntest/functional/rpc_rawtransaction.py:            address = getnewdestination()[2]\r\ntest/functional/rpc_rawtransaction.py:        address = getnewdestination()[2]\r\ntest/functional/rpc_rawtransaction.py:        address2 = getnewdestination()[2]\r\ntest/functional/rpc_scantxoutset.py:    getnewdestination,\r\ntest/functional/rpc_scantxoutset.py:        pubk1, spk_P2SH_SEGWIT, addr_P2SH_SEGWIT = getnewdestination(\"p2sh-segwit\")\r\ntest/functional/rpc_scantxoutset.py:        pubk2, spk_LEGACY, addr_LEGACY = getnewdestination(\"legacy\")\r\ntest/functional/rpc_scantxoutset.py:        pubk3, spk_BECH32, addr_BECH32 = getnewdestination(\"bech32\")\r\ntest/functional/test_framework/wallet.py:def getnewdestination(address_type='bech32'):\r\n```",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-18T09:51:49Z",
      "diff_hunk" : "@@ -200,20 +201,20 @@ def createrawtransaction_tests(self):\n         # sequence number out of range\n         for invalid_seq in [-1, 4294967296]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': invalid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}\n             assert_raises_rpc_error(-8, 'Invalid parameter, sequence number is out of range',\n                                     self.nodes[0].createrawtransaction, inputs, outputs)\n         # with valid sequence number\n         for valid_seq in [1000, 4294967294]:\n             inputs = [{'txid': TXID, 'vout': 1, 'sequence': valid_seq}]\n-            outputs = {self.nodes[0].getnewaddress(): 1}\n+            outputs = {getnewdestination()[2]: 1}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875699507",
      "id" : 875699507,
      "in_reply_to_id" : 874708737,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5840Mh0z",
      "original_commit_id" : "6672cebfb10da112eaca29b4ff0a0a4438749624",
      "original_line" : 210,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : null,
      "pull_request_review_id" : 976675487,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875699507/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-18T09:51:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875699507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875806353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875806353"
         }
      },
      "author_association" : "MEMBER",
      "body" : "hmm. Does this mean this test won't be run even if the bdb is compiled, unless the user specifies `--legacy-wallet`?\r\n\r\nI think it would be better to just run this test if bdb is compiled, no?",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-18T11:59:49Z",
      "diff_hunk" : "@@ -62,44 +65,36 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        self.requires_wallet = self.is_specified_wallet_compiled()\n \n         self.supports_cli = False\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n \n         self.getrawtransaction_tests()\n         self.createrawtransaction_tests()\n-        self.signrawtransactionwithwallet_tests()\n+        if self.requires_wallet:\n+            self.signrawtransactionwithwallet_tests()\n         self.sendrawtransaction_tests()\n         self.sendrawtransaction_testmempoolaccept_tests()\n         self.decoderawtransaction_tests()\n         self.transaction_version_number_tests()\n-        if not self.options.descriptors:\n+        if self.requires_wallet:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875806353",
      "id" : 875806353,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII5840M76R",
      "original_commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "original_line" : 90,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 48,
      "pull_request_review_id" : 976828507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875806353/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-18T12:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875806353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875810492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875810492"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hmm. I guess it is not possible to just run the test with the wallet that was compiled, since this will break if both bdb and sqlite are compiled.\r\n\r\nAn alternative would be to duplicate the test here once for sqlite and once with bdb? Otherwise, a user will need to run the whole test twice just to test both wallet implementations.\r\n\r\nAnother alternative would be to move this to one of the wallet tests?",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-18T12:04:37Z",
      "diff_hunk" : "@@ -62,44 +65,36 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        self.requires_wallet = self.is_specified_wallet_compiled()\n \n         self.supports_cli = False\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n \n         self.getrawtransaction_tests()\n         self.createrawtransaction_tests()\n-        self.signrawtransactionwithwallet_tests()\n+        if self.requires_wallet:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r875810492",
      "id" : 875810492,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840M868",
      "original_commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "original_line" : 84,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 41,
      "pull_request_review_id" : 976828507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875810492/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-18T12:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/875810492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r876111046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/876111046"
         }
      },
      "author_association" : "NONE",
      "body" : "I just realized I can create the wallets manually inside the tests:\r\n```python\r\n    def signrawtransactionwithwallet_tests(self):\r\n        for descriptors in [True, False]:\r\n            if not descriptors and not self.is_bdb_compiled():\r\n                pass\r\n            if descriptors and not self.is_sqlite_compiled():\r\n                pass\r\n            wallet_name = \"descriptors\" if descriptors else \"legacy\"\r\n            self.nodes[0].createwallet(wallet_name=wallet_name, descriptors=descriptors)\r\n            wallet = self.nodes[0].get_wallet_rpc(wallet_name)\r\n            for type in [\"bech32\", \"p2sh-segwit\", \"legacy\"]:\r\n                # etc...\r\n```\r\n\r\nThis tests all the wallets that's compiled for, but I'm not sure if it's clean - maybe moving those in the wallet tests, as you suggested, is cleaner?",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-18T16:34:39Z",
      "diff_hunk" : "@@ -62,44 +65,36 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        self.requires_wallet = self.is_specified_wallet_compiled()\n \n         self.supports_cli = False\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n \n         self.getrawtransaction_tests()\n         self.createrawtransaction_tests()\n-        self.signrawtransactionwithwallet_tests()\n+        if self.requires_wallet:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r876111046",
      "id" : 876111046,
      "in_reply_to_id" : 875810492,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840OGTG",
      "original_commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "original_line" : 84,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 41,
      "pull_request_review_id" : 977272138,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/876111046/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-18T16:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/876111046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25042473?v=4",
         "events_url" : "https://api.github.com/users/danielabrozzoni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/danielabrozzoni/followers",
         "following_url" : "https://api.github.com/users/danielabrozzoni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/danielabrozzoni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/danielabrozzoni",
         "id" : 25042473,
         "login" : "danielabrozzoni",
         "node_id" : "MDQ6VXNlcjI1MDQyNDcz",
         "organizations_url" : "https://api.github.com/users/danielabrozzoni/orgs",
         "received_events_url" : "https://api.github.com/users/danielabrozzoni/received_events",
         "repos_url" : "https://api.github.com/users/danielabrozzoni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/danielabrozzoni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/danielabrozzoni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/danielabrozzoni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 66dfa27fe8d68a423ce7e64da05090f1b410fcdc\r\n\r\nmodulo addressing the feedback here or in a follow-up",
      "created_at" : "2022-05-20T19:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#issuecomment-1133259620",
      "id" : 1133259620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25044",
      "node_id" : "IC_kwDOABII585DjCtk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133259620/reactions"
      },
      "updated_at" : "2022-05-20T19:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1133259620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r878659716"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878659716"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, it might be cleaner, but a bit more work.",
      "commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "created_at" : "2022-05-21T07:34:59Z",
      "diff_hunk" : "@@ -62,44 +65,36 @@ def set_test_params(self):\n         # whitelist all peers to speed up tx relay / mempool sync\n         for args in self.extra_args:\n             args.append(\"-whitelist=noban@127.0.0.1\")\n+        self.requires_wallet = self.is_specified_wallet_compiled()\n \n         self.supports_cli = False\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def setup_network(self):\n         super().setup_network()\n         self.connect_nodes(0, 2)\n \n     def run_test(self):\n+        self.wallet = MiniWallet(self.nodes[0])\n         self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\n-        self.generate(self.nodes[2], 1)\n+        self.generate(self.wallet, 10)\n         self.generate(self.nodes[0], COINBASE_MATURITY + 1)\n-        for amount in [1.5, 1.0, 5.0]:\n-            self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), amount)\n-        self.sync_all()\n-        self.generate(self.nodes[0], 5)\n \n         self.getrawtransaction_tests()\n         self.createrawtransaction_tests()\n-        self.signrawtransactionwithwallet_tests()\n+        if self.requires_wallet:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25044#discussion_r878659716",
      "id" : 878659716,
      "in_reply_to_id" : 875810492,
      "line" : 84,
      "node_id" : "PRRC_kwDOABII5840X0iE",
      "original_commit_id" : "66dfa27fe8d68a423ce7e64da05090f1b410fcdc",
      "original_line" : 84,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 41,
      "pull_request_review_id" : 980799595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25044",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878659716/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-21T07:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/878659716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
