[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, have been looking at this code and plan to review.",
      "created_at" : "2022-05-03T21:07:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25050#issuecomment-1116658259",
      "id" : 1116658259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25050",
      "node_id" : "IC_kwDOABII585CjtpT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116658259/reactions"
      },
      "updated_at" : "2022-05-03T21:07:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116658259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK 8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "created_at" : "2022-05-04T18:03:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25050#issuecomment-1117647345",
      "id" : 1117647345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25050",
      "node_id" : "IC_kwDOABII585CnfHx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117647345/reactions"
      },
      "updated_at" : "2022-05-04T18:03:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117647345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91447896?v=4",
         "events_url" : "https://api.github.com/users/pk-b2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pk-b2/followers",
         "following_url" : "https://api.github.com/users/pk-b2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pk-b2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pk-b2",
         "id" : 91447896,
         "login" : "pk-b2",
         "node_id" : "MDQ6VXNlcjkxNDQ3ODk2",
         "organizations_url" : "https://api.github.com/users/pk-b2/orgs",
         "received_events_url" : "https://api.github.com/users/pk-b2/received_events",
         "repos_url" : "https://api.github.com/users/pk-b2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pk-b2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pk-b2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pk-b2"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865128207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128207"
         }
      },
      "author_association" : "NONE",
      "body" : "Is it worth to be more specific in the naming whether the unregistering will happen or has already happened?\r\n\r\nLike renaming the function to `::ValidationInterfaceWillUnregister`?\r\n\r\nThis makes it clearer that the callback hasn't been removed yet.\r\n\r\nComparing to introducing a callback which gets called after the fact of the callback being removed `::ValidationInterfaceDidUnregister'",
      "commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "created_at" : "2022-05-04T18:06:34Z",
      "diff_hunk" : "@@ -139,6 +139,8 @@ void UnregisterSharedValidationInterface(std::shared_ptr<CValidationInterface> c\n \n void UnregisterValidationInterface(CValidationInterface* callbacks)\n {\n+    callbacks->ValidationInterfaceUnregistering();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865128207",
      "id" : 865128207,
      "line" : 142,
      "node_id" : "PRRC_kwDOABII584zkM8P",
      "original_commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "original_line" : 142,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/validationinterface.cpp",
      "position" : 4,
      "pull_request_review_id" : 962280879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128207/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T18:06:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91447896?v=4",
         "events_url" : "https://api.github.com/users/pk-b2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pk-b2/followers",
         "following_url" : "https://api.github.com/users/pk-b2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pk-b2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pk-b2",
         "id" : 91447896,
         "login" : "pk-b2",
         "node_id" : "MDQ6VXNlcjkxNDQ3ODk2",
         "organizations_url" : "https://api.github.com/users/pk-b2/orgs",
         "received_events_url" : "https://api.github.com/users/pk-b2/received_events",
         "repos_url" : "https://api.github.com/users/pk-b2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pk-b2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pk-b2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pk-b2"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865128943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128943"
         }
      },
      "author_association" : "NONE",
      "body" : "ð Follows the same approach as in `::UnregisterValidationInterface` of being called before the callback gets removed from the list",
      "commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "created_at" : "2022-05-04T18:07:33Z",
      "diff_hunk" : "@@ -149,6 +151,9 @@ void UnregisterAllValidationInterfaces()\n     if (!g_signals.m_internals) {\n         return;\n     }\n+\n+    g_signals.m_internals->Iterate([&](CValidationInterface& callbacks) { callbacks.ValidationInterfaceUnregistering(); });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865128943",
      "id" : 865128943,
      "line" : 155,
      "node_id" : "PRRC_kwDOABII584zkNHv",
      "original_commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "original_line" : 155,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/validationinterface.cpp",
      "position" : 14,
      "pull_request_review_id" : 962281916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128943/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T18:07:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865128943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91447896?v=4",
         "events_url" : "https://api.github.com/users/pk-b2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pk-b2/followers",
         "following_url" : "https://api.github.com/users/pk-b2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pk-b2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pk-b2",
         "id" : 91447896,
         "login" : "pk-b2",
         "node_id" : "MDQ6VXNlcjkxNDQ3ODk2",
         "organizations_url" : "https://api.github.com/users/pk-b2/orgs",
         "received_events_url" : "https://api.github.com/users/pk-b2/received_events",
         "repos_url" : "https://api.github.com/users/pk-b2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pk-b2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pk-b2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pk-b2"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865129796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865129796"
         }
      },
      "author_association" : "NONE",
      "body" : "You don't need it in https://github.com/bitcoin-core/gui/pull/444 but is it worth to consider to add `::ValidationInterfaceRegistering` as part of this PR for completeness?",
      "commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "created_at" : "2022-05-04T18:08:46Z",
      "diff_hunk" : "@@ -173,6 +173,13 @@ class CValidationInterface {\n      * Notifies listeners that a block which builds directly on our current tip\n      * has been received and connected to the headers tree, though not validated yet */\n     virtual void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& block) {};\n+    /**\n+     * Notifies the validation interface that it is being unregistered\n+     */\n+    virtual void ValidationInterfaceUnregistering() {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25050#discussion_r865129796",
      "id" : 865129796,
      "line" : 179,
      "node_id" : "PRRC_kwDOABII584zkNVE",
      "original_commit_id" : "8eed7dd722177c2e36645d66e2c8254f9037a0e3",
      "original_line" : 179,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 7,
      "pull_request_review_id" : 962283187,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25050",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865129796/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-04T18:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/865129796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91447896?v=4",
         "events_url" : "https://api.github.com/users/pk-b2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pk-b2/followers",
         "following_url" : "https://api.github.com/users/pk-b2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pk-b2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pk-b2",
         "id" : 91447896,
         "login" : "pk-b2",
         "node_id" : "MDQ6VXNlcjkxNDQ3ODk2",
         "organizations_url" : "https://api.github.com/users/pk-b2/orgs",
         "received_events_url" : "https://api.github.com/users/pk-b2/received_events",
         "repos_url" : "https://api.github.com/users/pk-b2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pk-b2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pk-b2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pk-b2"
      }
   }
]
