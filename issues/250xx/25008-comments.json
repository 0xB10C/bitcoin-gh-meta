[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Previous discussion originally found [here](https://github.com/bitcoin/bitcoin/pull/24322#issuecomment-1109044026) by theuni reproduced: \r\n\r\n> > @theuni\r\n> > \r\n> > > does the switch to libtool libs mean that more objects end up being built (other than the second set for the lib)? Or does -all-static basically fix that?\r\n> > \r\n> > Unfortunately, libtool seems to always want to build twice... Not sure if we can fix that.\r\n> > \r\n> \r\n> I think I've come up with a reasonably clean solution to this here: https://github.com/theuni/bitcoin/commit/9ffbd707afc8188fe0b8cc5316f6c583f7ae21d0\r\n> \r\n> libtool tries to build twice by default: once for static, once for shared. With this change, there's _only_ static by default, so default configs continue to only build one set of objects.\r\n> \r\n> With this commit, if you want shared libs/dlls, you'd need to configure with `--enable-shared`, which will _then_ build everything twice. For a project that's mostly about executables, that seems reasonable to me. (Also, amazingly `--enable-shared --disable-static` does the right thing and also builds a single copy of everything for shared libs)\r\n> \r\n> This also means we don't have to special-case the Windows case in this pr. We'll just know that `--enable-shared` is busted on windows (and maybe warn as such for that config?)\r\n> \r\n> The only downside I can think of is that devs aren't going to be linking the lib every day as part of their typical workflows so link problems may show up around release time. IMO that's a reasonable trade-off.",
      "created_at" : "2022-04-27T15:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1111176788",
      "id" : 1111176788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25008",
      "node_id" : "IC_kwDOABII585COzZU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111176788/reactions"
      },
      "updated_at" : "2022-04-27T15:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111176788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Previous discussion originally found [here](https://github.com/bitcoin/bitcoin/pull/24322#issuecomment-1110016664) by theuni reproduced:\r\n\r\n> This commit fixes Windows dll linking for me: https://github.com/theuni/bitcoin/commit/9612f5f0f1e3295065dbd8a0e0f472f8f020bbd9 . Untested, but it now links. I'll be testing it out as a next step.\r\n> \r\n> Thanks to @dongcarl for pointing out the problem. \r\n> \r\n> Edit: I'm unable to find what's actually affected by this define in my local mingw tree and in depends. Maybe gcc does something internally with it or something?\r\n> \r\n> Edit2: Found it!: https://github.com/mingw-w64/mingw-w64/blob/f79f89f976dc5345090db557fb20d5deba913d9f/mingw-w64-libraries/winpthreads/include/pthread.h#L86\r\n> \r\n> That seems like heavy-handed behavior for mingw-w64, much more useful would be for them to define and use `PTHREADS_DLL_EXPORT` instead. I'll work to understand this better and upstream a patch if necessary.",
      "created_at" : "2022-04-27T16:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1111177427",
      "id" : 1111177427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25008",
      "node_id" : "IC_kwDOABII585COzjT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111177427/reactions"
      },
      "updated_at" : "2022-04-27T16:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111177427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could another approach suggested in #24994 be useful (did not test yet)?",
      "created_at" : "2022-04-27T16:06:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1111184085",
      "id" : 1111184085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25008",
      "node_id" : "IC_kwDOABII585CO1LV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111184085/reactions"
      },
      "updated_at" : "2022-04-27T16:06:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111184085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I believe that https://github.com/theuni/bitcoin/commit/9612f5f0f1e3295065dbd8a0e0f472f8f020bbd9 is the clean/proper fix for us for the issue. We don't want pthreads symbols exported, and that fixes the specific issue.\r\n\r\nTo me, the only remaining question is why other projects aren't equally annoyed by this. I'll work on upstreaming the fix (mingw-w64 pthreads using its own specific define instead of the generic `DLL_EXPORT`) and see how it's received.",
      "created_at" : "2022-04-27T16:27:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1111207358",
      "id" : 1111207358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25008",
      "node_id" : "IC_kwDOABII585CO62-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111207358/reactions"
      },
      "updated_at" : "2022-04-27T16:27:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111207358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@theuni \r\n\r\nWhat are default values of `lt_cv_prog_compiler_pic` and `lt_cv_prog_compiler_pic_CXX` for mingw-w64?",
      "created_at" : "2022-04-27T16:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1111214955",
      "id" : 1111214955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25008",
      "node_id" : "IC_kwDOABII585CO8tr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111214955/reactions"
      },
      "updated_at" : "2022-04-27T16:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111214955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
