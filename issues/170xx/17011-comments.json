[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-10-01T11:41:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#issuecomment-536997258",
      "id" : 536997258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17011",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjk5NzI1OA==",
      "updated_at" : "2019-10-01T11:41:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536997258",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-10-01T11:56:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#issuecomment-537001925",
      "id" : 537001925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17011",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzAwMTkyNQ==",
      "updated_at" : "2019-10-01T11:56:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537001925",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I'm guessing there's a reason why we don't wanna add another build?",
      "created_at" : "2019-10-01T15:12:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#issuecomment-537083794",
      "id" : 537083794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17011",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzA4Mzc5NA==",
      "updated_at" : "2019-10-01T15:12:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537083794",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, another build means the ci is taking longer. I think using BusyBox on one build that bootstraps from `./depends` (with gui and wallet) is sufficient.",
      "created_at" : "2019-10-01T15:49:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#issuecomment-537100891",
      "id" : 537100891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17011",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzEwMDg5MQ==",
      "updated_at" : "2019-10-01T15:49:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537100891",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17011#discussion_r330380891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17011"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330380891"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Support for `-delete` was added to `find` in BusyBox `1.6.0` (2007). The [following](https://github.com/bitcoin/bitcoin/blob/master/depends/packages/xcb_proto.mk#L25) inside an Alpine container (BusyBox v1.30.1) seems to work ok:\r\n```bash\r\ntouch something.pyo something.pyc\r\nfind -name \"*.pyc\" -delete && find -name \"*.pyo\" -delete\r\n```\r\n\r\nWhat error were you seeing?",
      "commit_id" : "fa1ae26623a63db34d3ec8f5f595df6b844542d0",
      "created_at" : "2019-10-02T05:55:39Z",
      "diff_hunk" : "@@ -33,18 +33,28 @@ if [ -z \"$RUN_CI_ON_HOST\" ]; then\n   DOCKER_ID=$(docker run $DOCKER_ADMIN -idt --mount type=bind,src=$BASE_BUILD_DIR,dst=$BASE_BUILD_DIR --mount type=bind,src=$CCACHE_DIR,dst=$CCACHE_DIR -w $BASE_BUILD_DIR --env-file /tmp/env $DOCKER_NAME_TAG)\n \n   DOCKER_EXEC () {\n-    docker exec $DOCKER_ID bash -c \"cd $PWD && $*\"\n+    docker exec $DOCKER_ID bash -c \"export PATH=$BASE_SCRATCH_DIR/bins/:\\$PATH && cd $PWD && $*\"\n   }\n else\n   echo \"Running on host system without docker wrapper\"\n   DOCKER_EXEC () {\n-    bash -c \"cd $PWD && $*\"\n+    bash -c \"export PATH=$BASE_SCRATCH_DIR/bins/:\\$PATH && cd $PWD && $*\"\n   }\n fi\n \n DOCKER_EXEC free -m -h\n-DOCKER_EXEC echo \"Number of CPUs \\(nproc\\): $(nproc)\"\n+DOCKER_EXEC echo \"Number of CPUs \\(nproc\\):\" \\$\\(nproc\\)\n \n ${CI_RETRY_EXE} DOCKER_EXEC apt-get update\n ${CI_RETRY_EXE} DOCKER_EXEC apt-get install --no-install-recommends --no-upgrade -qq $PACKAGES $DOCKER_PACKAGES\n \n+if [ \"$USE_BUSY_BOX\" = \"true\" ]; then\n+  echo \"Setup to use BusyBox utils\"\n+  DOCKER_EXEC mkdir -p $BASE_SCRATCH_DIR/bins/\n+  # tar excluded for now because it requires passing in the exact archive type in ./depends (fixed in later BusyBox version)\n+  # find excluded for now because it does not recognize the -delete option in ./depends (fixed in later BusyBox version)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#discussion_r330380891",
      "id" : 330380891,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMDM4MDg5MQ==",
      "original_commit_id" : "fa1ae26623a63db34d3ec8f5f595df6b844542d0",
      "original_position" : 26,
      "path" : "ci/test/04_install.sh",
      "position" : 26,
      "pull_request_review_id" : 296025022,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17011",
      "updated_at" : "2019-10-02T05:56:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330380891",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17011#discussion_r330380940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17011"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330380940"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Assume we are doing this to get the BusyBox version printed? I see `BusyBox v1.27.2 (Ubuntu 1:1.27.2-2ubuntu3.2)`",
      "commit_id" : "fa1ae26623a63db34d3ec8f5f595df6b844542d0",
      "created_at" : "2019-10-02T05:55:53Z",
      "diff_hunk" : "@@ -33,18 +33,28 @@ if [ -z \"$RUN_CI_ON_HOST\" ]; then\n   DOCKER_ID=$(docker run $DOCKER_ADMIN -idt --mount type=bind,src=$BASE_BUILD_DIR,dst=$BASE_BUILD_DIR --mount type=bind,src=$CCACHE_DIR,dst=$CCACHE_DIR -w $BASE_BUILD_DIR --env-file /tmp/env $DOCKER_NAME_TAG)\n \n   DOCKER_EXEC () {\n-    docker exec $DOCKER_ID bash -c \"cd $PWD && $*\"\n+    docker exec $DOCKER_ID bash -c \"export PATH=$BASE_SCRATCH_DIR/bins/:\\$PATH && cd $PWD && $*\"\n   }\n else\n   echo \"Running on host system without docker wrapper\"\n   DOCKER_EXEC () {\n-    bash -c \"cd $PWD && $*\"\n+    bash -c \"export PATH=$BASE_SCRATCH_DIR/bins/:\\$PATH && cd $PWD && $*\"\n   }\n fi\n \n DOCKER_EXEC free -m -h\n-DOCKER_EXEC echo \"Number of CPUs \\(nproc\\): $(nproc)\"\n+DOCKER_EXEC echo \"Number of CPUs \\(nproc\\):\" \\$\\(nproc\\)\n \n ${CI_RETRY_EXE} DOCKER_EXEC apt-get update\n ${CI_RETRY_EXE} DOCKER_EXEC apt-get install --no-install-recommends --no-upgrade -qq $PACKAGES $DOCKER_PACKAGES\n \n+if [ \"$USE_BUSY_BOX\" = \"true\" ]; then\n+  echo \"Setup to use BusyBox utils\"\n+  DOCKER_EXEC mkdir -p $BASE_SCRATCH_DIR/bins/\n+  # tar excluded for now because it requires passing in the exact archive type in ./depends (fixed in later BusyBox version)\n+  # find excluded for now because it does not recognize the -delete option in ./depends (fixed in later BusyBox version)\n+  # ar excluded for now because it does not recognize the -q option in ./depends (unknown if fixed)\n+  # shellcheck disable=SC1010\n+  DOCKER_EXEC for util in \\$\\(busybox --list \\| grep -v \"^ar$\" \\| grep -v \"^tar$\" \\| grep -v \"^find$\"\\)\\; do ln -s \\$\\(command -v busybox\\) $BASE_SCRATCH_DIR/bins/\\$util\\; done\n+  DOCKER_EXEC patch --help",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17011#discussion_r330380940",
      "id" : 330380940,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMDM4MDk0MA==",
      "original_commit_id" : "fa1ae26623a63db34d3ec8f5f595df6b844542d0",
      "original_position" : 30,
      "path" : "ci/test/04_install.sh",
      "position" : 30,
      "pull_request_review_id" : 296025022,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17011",
      "updated_at" : "2019-10-02T05:56:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330380940",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
