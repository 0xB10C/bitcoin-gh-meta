[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331289858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331289858"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IMO we should move away from these dynamic connections. My suggestion is to move to the constructor:\r\n```cpp\r\nconnect(ui->prune, &QCheckBox::stateChanged, [this](int state) {\r\n    setSizeWarningLabel(/* isPruning = */ state == 2, m_blockchain_size, m_chain_state_size);\r\n});\r\n```",
      "commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "created_at" : "2019-10-03T23:10:46Z",
      "diff_hunk" : "@@ -349,3 +332,39 @@ QString Intro::getPathToCheck()\n     mutex.unlock();\n     return retval;\n }\n+\n+void Intro::setSizeWarningLabel(bool isPruning, uint64_t blockchain_size, uint64_t chain_state_size)\n+{\n+    requiredSpace = blockchain_size;\n+    QString storageRequiresMsg = QObject::tr(\"At least %1 GB of data will be stored in this directory, and it will grow over time.\");\n+    if (isPruning) {\n+        uint64_t pruneTarget = std::max<int64_t>(0, gArgs.GetArg(\"-prune\", 0));\n+        uint64_t prunedGBs = std::ceil(pruneTarget * 1024 * 1024.0 / GB_BYTES);\n+        if (prunedGBs <= requiredSpace) {\n+            requiredSpace = prunedGBs;\n+            storageRequiresMsg = QObject::tr(\"Approximately %1 GB of data will be stored in this directory.\");\n+        }\n+        Intro::ui->lblExplanation3->setVisible(true);\n+    } else {\n+        Intro::ui->lblExplanation3->setVisible(false);\n+    }\n+    requiredSpace += chain_state_size;\n+    Intro::ui->sizeWarningLabel->setText(\n+        QObject::tr(\"%1 will download and store a copy of the Bitcoin block chain.\").arg(PACKAGE_NAME) + \" \" +\n+        storageRequiresMsg.arg(requiredSpace) + \" \" +\n+        QObject::tr(\"The wallet will also be stored in this directory.\")\n+    );\n+    // Reset GUI width and update storage warning if neccesary\n+    this->adjustSize();\n+}\n+void Intro::on_prune_stateChanged(int arg1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331289858",
      "id" : 331289858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMTI4OTg1OA==",
      "original_commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "original_position" : 55,
      "path" : "src/qt/intro.cpp",
      "position" : 55,
      "pull_request_review_id" : 297198557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035",
      "updated_at" : "2019-10-03T23:11:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331289858",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331289996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331289996"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why have the 2 last arguments if they are always the same?",
      "commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "created_at" : "2019-10-03T23:11:26Z",
      "diff_hunk" : "@@ -349,3 +332,39 @@ QString Intro::getPathToCheck()\n     mutex.unlock();\n     return retval;\n }\n+\n+void Intro::setSizeWarningLabel(bool isPruning, uint64_t blockchain_size, uint64_t chain_state_size)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331289996",
      "id" : 331289996,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMTI4OTk5Ng==",
      "original_commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "original_position" : 31,
      "path" : "src/qt/intro.cpp",
      "position" : 31,
      "pull_request_review_id" : 297198557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035",
      "updated_at" : "2019-10-03T23:11:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331289996",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331313258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331313258"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree with you but this is a bigger change and should be a done in a separate PR because this one is intended to be a fix, not a replacement",
      "commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "created_at" : "2019-10-04T01:28:24Z",
      "diff_hunk" : "@@ -349,3 +332,39 @@ QString Intro::getPathToCheck()\n     mutex.unlock();\n     return retval;\n }\n+\n+void Intro::setSizeWarningLabel(bool isPruning, uint64_t blockchain_size, uint64_t chain_state_size)\n+{\n+    requiredSpace = blockchain_size;\n+    QString storageRequiresMsg = QObject::tr(\"At least %1 GB of data will be stored in this directory, and it will grow over time.\");\n+    if (isPruning) {\n+        uint64_t pruneTarget = std::max<int64_t>(0, gArgs.GetArg(\"-prune\", 0));\n+        uint64_t prunedGBs = std::ceil(pruneTarget * 1024 * 1024.0 / GB_BYTES);\n+        if (prunedGBs <= requiredSpace) {\n+            requiredSpace = prunedGBs;\n+            storageRequiresMsg = QObject::tr(\"Approximately %1 GB of data will be stored in this directory.\");\n+        }\n+        Intro::ui->lblExplanation3->setVisible(true);\n+    } else {\n+        Intro::ui->lblExplanation3->setVisible(false);\n+    }\n+    requiredSpace += chain_state_size;\n+    Intro::ui->sizeWarningLabel->setText(\n+        QObject::tr(\"%1 will download and store a copy of the Bitcoin block chain.\").arg(PACKAGE_NAME) + \" \" +\n+        storageRequiresMsg.arg(requiredSpace) + \" \" +\n+        QObject::tr(\"The wallet will also be stored in this directory.\")\n+    );\n+    // Reset GUI width and update storage warning if neccesary\n+    this->adjustSize();\n+}\n+void Intro::on_prune_stateChanged(int arg1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331313258",
      "id" : 331313258,
      "in_reply_to_id" : 331289858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMTMxMzI1OA==",
      "original_commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "original_position" : 55,
      "path" : "src/qt/intro.cpp",
      "position" : 55,
      "pull_request_review_id" : 297227756,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035",
      "updated_at" : "2019-10-04T01:28:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331313258",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331313413"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331313413"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What do you mean?\r\nIIRC the blockchain size and chainstate size are two different things",
      "commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "created_at" : "2019-10-04T01:29:30Z",
      "diff_hunk" : "@@ -349,3 +332,39 @@ QString Intro::getPathToCheck()\n     mutex.unlock();\n     return retval;\n }\n+\n+void Intro::setSizeWarningLabel(bool isPruning, uint64_t blockchain_size, uint64_t chain_state_size)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17035#discussion_r331313413",
      "id" : 331313413,
      "in_reply_to_id" : 331289996,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMTMxMzQxMw==",
      "original_commit_id" : "fa149cb03fe8abc90938e6c690f040ccc5db5149",
      "original_position" : 31,
      "path" : "src/qt/intro.cpp",
      "position" : 31,
      "pull_request_review_id" : 297227932,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17035",
      "updated_at" : "2019-10-04T01:29:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/331313413",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   }
]
