[
   {
      "author_association" : "MEMBER",
      "body" : "To test, apply this and run with logging to stdout, without this patch it will make the entire log turn yellow:\r\n```patch\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 035725b0908ebddae882583d489bdd8ad82c4857..26f4c7b906be959aa3ebaa1a2a657028c95b0f49 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1231,6 +1231,7 @@ bool AppInitMain(InitInterfaces& interfaces)\r\n         LogPrintf(\"Startup time: %s\\n\", FormatISO8601DateTime(GetTime()));\r\n     LogPrintf(\"Default data directory %s\\n\", GetDefaultDataDir().string());\r\n     LogPrintf(\"Using data directory %s\\n\", GetDataDir().string());\r\n+    LogPrintf(\"\\x1b[1;33mIn yellowwwww\\n\");\r\n \r\n     // Only log conf file usage message if conf file actually exists.\r\n     fs::path config_file_path = GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME));\r\n```\r\nwith patch, it will just print:\r\n```\r\n2019-10-10T11:37:40Z \\x1b[1;33mIn yellowwwww\r\n```\r\n",
      "created_at" : "2019-10-10T11:35:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#issuecomment-540529466",
      "id" : 540529466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17095",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDUyOTQ2Ng==",
      "updated_at" : "2019-10-10T11:37:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540529466",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333472719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333472719"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems impossible to distinguish between a literal \"\\\\x00\" and \"\\x00\" after this transformation.\r\n\r\nSuggest using `SanitizeString` perhaps with a new rule.",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:45:09Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333472719",
      "id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3MjcxOQ==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300004014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333472719",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333473363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333473363"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think that matters much. `\\x00` (as in, the code-point 0) is not supposed to end up in a log string at all, if it does that's an error (not serious enough to stop the program, though).\r\nCould add some more apparent warning I guess?\r\n",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:46:47Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333473363",
      "id" : 333473363,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3MzM2Mw==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300004851,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333473363",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333474030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333474030"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm very much against using SanitizeString's methodology here. I don't want to make any characters entirely disappear. If anything this should make them very visible.",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:48:31Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333474030",
      "id" : 333474030,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3NDAzMA==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300005738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333474030",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333475660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333475660"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Cherry-pick 7cbc72b93740a5c7e14d1fb1a9f45fd78ff24700?",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:52:54Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333475660",
      "id" : 333475660,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3NTY2MA==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300007936,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333475660",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333476842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333476842"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I prefer to keep this simple code specific and self-contained, TBH. Also, escaping with '%%' seems to have exactly the same \"issue\"? (if you regard it as an issue)",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:56:02Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333476842",
      "id" : 333476842,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3Njg0Mg==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300009490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:56:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333476842",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333487251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333487251"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note to self: add a space before `:`",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T12:22:43Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333487251",
      "id" : 333487251,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ4NzI1MQ==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 14,
      "path" : "src/logging.cpp",
      "position" : 14,
      "pull_request_review_id" : 300023328,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T12:22:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333487251",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK f2f1365805c7a0c3828129a714aac726cc4f46b8 -- diff looks correct and I've tested it lightly with expected results\r\n\r\nWe can tighten the allowed range (`ch >= 32 || ch == '\\n'`) later on, but this is a good start.\r\n\r\n(The only (theoretical) issue I can think of with this fix is that the size of the log payload is increased by a factor of four when escaping. An attacker trying to fill the disk of a node by repeated log injection can then fill the disk four times as fast by using escape characters in the the injected log payload. I still think this change is worth doing as suggested though: rate limiting logging and/or limiting the length of log messages can be handled in a follow-up PR.)",
      "created_at" : "2019-10-10T13:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#issuecomment-540590139",
      "id" : 540590139,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17095",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDU5MDEzOQ==",
      "updated_at" : "2019-10-10T13:46:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540590139",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333583789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333583789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The escaping code there always escapes '%'",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T15:20:28Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333583789",
      "id" : 333583789,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzU4Mzc4OQ==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300152567,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T15:20:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333583789",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
