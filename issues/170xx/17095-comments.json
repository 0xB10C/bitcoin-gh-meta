[
   {
      "author_association" : "MEMBER",
      "body" : "To test, apply this and run with logging to stdout, without this patch it will make the entire log turn yellow:\r\n```patch\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 035725b0908ebddae882583d489bdd8ad82c4857..26f4c7b906be959aa3ebaa1a2a657028c95b0f49 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1231,6 +1231,7 @@ bool AppInitMain(InitInterfaces& interfaces)\r\n         LogPrintf(\"Startup time: %s\\n\", FormatISO8601DateTime(GetTime()));\r\n     LogPrintf(\"Default data directory %s\\n\", GetDefaultDataDir().string());\r\n     LogPrintf(\"Using data directory %s\\n\", GetDataDir().string());\r\n+    LogPrintf(\"\\x1b[1;33mIn yellowwwww\\n\");\r\n \r\n     // Only log conf file usage message if conf file actually exists.\r\n     fs::path config_file_path = GetConfigFile(gArgs.GetArg(\"-conf\", BITCOIN_CONF_FILENAME));\r\n```\r\nwith patch, it will just print:\r\n```\r\n2019-10-10T11:37:40Z \\x1b[1;33mIn yellowwwww\r\n```\r\n",
      "created_at" : "2019-10-10T11:35:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#issuecomment-540529466",
      "id" : 540529466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17095",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDUyOTQ2Ng==",
      "updated_at" : "2019-10-10T11:37:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540529466",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333472719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333472719"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems impossible to distinguish between a literal \"\\\\x00\" and \"\\x00\" after this transformation.\r\n\r\nSuggest using `SanitizeString` perhaps with a new rule.",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:45:09Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333472719",
      "id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3MjcxOQ==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300004014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333472719",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333473363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333473363"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think that matters much. `\\x00` is not supposed to end up in a log string at all, if it does that's an error.\r\nCould add some more apparent warning I guess?\r\n",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:46:47Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333473363",
      "id" : 333473363,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3MzM2Mw==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300004851,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:47:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333473363",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333474030"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333474030"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm very much against using SanitizeString's methodology here. I don't want to make any characters entirely disappear.",
      "commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "created_at" : "2019-10-10T11:48:31Z",
      "diff_hunk" : "@@ -224,10 +224,32 @@ std::string BCLog::Logger::LogTimestampStr(const std::string& str)\n     return strStamped;\n }\n \n+namespace {\n+    /** Belts and suspenders: make sure outgoing log messages don't contain\n+     * potentially suspicious characters, such as terminal control codes.\n+     *\n+     * This escapes control characters except newline ('\\n') in C syntax.\n+     * It escapes instead of removes them to still allow for troubleshooting\n+     * issues where they accidentally end up in strings.\n+     */\n+    std::string LogEscapeMessage(const std::string& str) {\n+        std::string ret;\n+        for (char ch_in: str) {\n+            uint8_t ch = (uint8_t)ch_in;\n+            if (ch >= 32 || ch == '\\n') {\n+                ret += ch_in;\n+            } else {\n+                ret += strprintf(\"\\\\x%02x\", ch);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17095#discussion_r333474030",
      "id" : 333474030,
      "in_reply_to_id" : 333472719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMzQ3NDAzMA==",
      "original_commit_id" : "f2f1365805c7a0c3828129a714aac726cc4f46b8",
      "original_position" : 19,
      "path" : "src/logging.cpp",
      "position" : 19,
      "pull_request_review_id" : 300005738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17095",
      "updated_at" : "2019-10-10T11:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/333474030",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
