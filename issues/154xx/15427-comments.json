[
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 @gwillen You may be interested in this.",
      "created_at" : "2019-02-17T00:53:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#issuecomment-464403922",
      "id" : 464403922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15427",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NDQwMzkyMg==",
      "updated_at" : "2019-02-17T00:53:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/464403922",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15996](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15996.html) (Deprecate totalfee argument in `bumpfee` by instagibbs)\n* [#15744](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15744.html) (Extract ParseDescriptorRange by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-02-18T13:26:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#issuecomment-464730922",
      "id" : 464730922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15427",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NDczMDkyMg==",
      "updated_at" : "2019-05-09T22:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/464730922",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257794269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257794269"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit cb085728f64a76fec48dee4e6432c199aa69a62a\r\n\r\nIsn't this new code?",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-18T18:26:41Z",
      "diff_hunk" : "@@ -499,3 +499,19 @@ FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvide\n     ret.origins.insert(b.origins.begin(), b.origins.end());\n     return ret;\n }\n+\n+bool IsSegWitOutput(const SigningProvider& provider, const CScript& script)\n+{\n+    std::vector<valtype> solutions;\n+    auto whichtype = Solver(script, solutions);\n+    if (whichtype == TX_WITNESS_V0_SCRIPTHASH || whichtype == TX_WITNESS_V0_KEYHASH || whichtype == TX_WITNESS_UNKNOWN) return true;\n+    if (whichtype == TX_SCRIPTHASH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257794269",
      "id" : 257794269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Nzc5NDI2OQ==",
      "original_commit_id" : "cb085728f64a76fec48dee4e6432c199aa69a62a",
      "original_position" : 10,
      "path" : "src/script/sign.cpp",
      "position" : 10,
      "pull_request_review_id" : 204912961,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257794269",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257795719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257795719"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Instead of a single range value, this could be the start and end values of the range like what `importmulti` does?",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-18T18:33:05Z",
      "diff_hunk" : "@@ -1708,12 +1708,19 @@ UniValue converttopsbt(const JSONRPCRequest& request)\n \n UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1) {\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2) {\n         throw std::runtime_error(\n             RPCHelpMan{\"utxoupdatepsbt\",\n-            \"\\nUpdates a PSBT with witness UTXOs retrieved from the UTXO set or the mempool.\\n\",\n+            \"\\nUpdates a PSBT with data from descriptors and the UTXO set or the mempool (segwit outputs only)\\n\",\n             {\n-                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"}\n+                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"},\n+                {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"An array of either strings or objects\", {\n+                    {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"A descriptor\"},\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with a descriptor and extra information\", {\n+                         {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A descriptor\"},\n+                         {\"range\", RPCArg::Type::NUM, \"1000\", \"Up to what index HD chains should be explored\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257795719",
      "id" : 257795719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1Nzc5NTcxOQ==",
      "original_commit_id" : "e90a5c753d6a91d7fea42f7485865f6fff34019f",
      "original_position" : 17,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 17,
      "pull_request_review_id" : 204914633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257795719",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257801740"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257801740"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes?",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-18T19:01:57Z",
      "diff_hunk" : "@@ -499,3 +499,19 @@ FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvide\n     ret.origins.insert(b.origins.begin(), b.origins.end());\n     return ret;\n }\n+\n+bool IsSegWitOutput(const SigningProvider& provider, const CScript& script)\n+{\n+    std::vector<valtype> solutions;\n+    auto whichtype = Solver(script, solutions);\n+    if (whichtype == TX_WITNESS_V0_SCRIPTHASH || whichtype == TX_WITNESS_V0_KEYHASH || whichtype == TX_WITNESS_UNKNOWN) return true;\n+    if (whichtype == TX_SCRIPTHASH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257801740",
      "id" : 257801740,
      "in_reply_to_id" : 257794269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NzgwMTc0MA==",
      "original_commit_id" : "cb085728f64a76fec48dee4e6432c199aa69a62a",
      "original_position" : 10,
      "path" : "src/script/sign.cpp",
      "position" : 10,
      "pull_request_review_id" : 204922146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257801740",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257807360"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257807360"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's fine, just that after reading commit message I thought this was move only commit.",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-18T19:28:22Z",
      "diff_hunk" : "@@ -499,3 +499,19 @@ FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvide\n     ret.origins.insert(b.origins.begin(), b.origins.end());\n     return ret;\n }\n+\n+bool IsSegWitOutput(const SigningProvider& provider, const CScript& script)\n+{\n+    std::vector<valtype> solutions;\n+    auto whichtype = Solver(script, solutions);\n+    if (whichtype == TX_WITNESS_V0_SCRIPTHASH || whichtype == TX_WITNESS_V0_KEYHASH || whichtype == TX_WITNESS_UNKNOWN) return true;\n+    if (whichtype == TX_SCRIPTHASH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r257807360",
      "id" : 257807360,
      "in_reply_to_id" : 257794269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NzgwNzM2MA==",
      "original_commit_id" : "cb085728f64a76fec48dee4e6432c199aa69a62a",
      "original_position" : 10,
      "path" : "src/script/sign.cpp",
      "position" : 10,
      "pull_request_review_id" : 204928970,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/257807360",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r258543947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258543947"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, good point. I'll clarify in the commit message.",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-20T15:46:39Z",
      "diff_hunk" : "@@ -499,3 +499,19 @@ FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvide\n     ret.origins.insert(b.origins.begin(), b.origins.end());\n     return ret;\n }\n+\n+bool IsSegWitOutput(const SigningProvider& provider, const CScript& script)\n+{\n+    std::vector<valtype> solutions;\n+    auto whichtype = Solver(script, solutions);\n+    if (whichtype == TX_WITNESS_V0_SCRIPTHASH || whichtype == TX_WITNESS_V0_KEYHASH || whichtype == TX_WITNESS_UNKNOWN) return true;\n+    if (whichtype == TX_SCRIPTHASH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r258543947",
      "id" : 258543947,
      "in_reply_to_id" : 257794269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1ODU0Mzk0Nw==",
      "original_commit_id" : "cb085728f64a76fec48dee4e6432c199aa69a62a",
      "original_position" : 10,
      "path" : "src/script/sign.cpp",
      "position" : 10,
      "pull_request_review_id" : 205835467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/258543947",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r259645891"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259645891"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm copying the behavior of `scantxoutset` here. Maybe it makes sense to merge the two afterwards, and have all three (scantxoutset, utxoupdatepsbt, importmulti) support both start+end and range?",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-24T22:52:17Z",
      "diff_hunk" : "@@ -1708,12 +1708,19 @@ UniValue converttopsbt(const JSONRPCRequest& request)\n \n UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1) {\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2) {\n         throw std::runtime_error(\n             RPCHelpMan{\"utxoupdatepsbt\",\n-            \"\\nUpdates a PSBT with witness UTXOs retrieved from the UTXO set or the mempool.\\n\",\n+            \"\\nUpdates a PSBT with data from descriptors and the UTXO set or the mempool (segwit outputs only)\\n\",\n             {\n-                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"}\n+                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"},\n+                {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"An array of either strings or objects\", {\n+                    {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"A descriptor\"},\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with a descriptor and extra information\", {\n+                         {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A descriptor\"},\n+                         {\"range\", RPCArg::Type::NUM, \"1000\", \"Up to what index HD chains should be explored\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r259645891",
      "id" : 259645891,
      "in_reply_to_id" : 257795719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTY0NTg5MQ==",
      "original_commit_id" : "e90a5c753d6a91d7fea42f7485865f6fff34019f",
      "original_position" : 17,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 17,
      "pull_request_review_id" : 207177435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259645891",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r259646155"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259646155"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-02-24T22:58:05Z",
      "diff_hunk" : "@@ -499,3 +499,19 @@ FlatSigningProvider Merge(const FlatSigningProvider& a, const FlatSigningProvide\n     ret.origins.insert(b.origins.begin(), b.origins.end());\n     return ret;\n }\n+\n+bool IsSegWitOutput(const SigningProvider& provider, const CScript& script)\n+{\n+    std::vector<valtype> solutions;\n+    auto whichtype = Solver(script, solutions);\n+    if (whichtype == TX_WITNESS_V0_SCRIPTHASH || whichtype == TX_WITNESS_V0_KEYHASH || whichtype == TX_WITNESS_UNKNOWN) return true;\n+    if (whichtype == TX_SCRIPTHASH) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r259646155",
      "id" : 259646155,
      "in_reply_to_id" : 257794269,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTY0NjE1NQ==",
      "original_commit_id" : "cb085728f64a76fec48dee4e6432c199aa69a62a",
      "original_position" : 10,
      "path" : "src/script/sign.cpp",
      "position" : 10,
      "pull_request_review_id" : 207177735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259646155",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2019-02-24T22:58:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#issuecomment-466826922",
      "id" : 466826922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15427",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NjgyNjkyMg==",
      "updated_at" : "2019-02-24T22:58:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/466826922",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased after merge of #15497.",
      "created_at" : "2019-03-02T21:27:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#issuecomment-468961909",
      "id" : 468961909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15427",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2ODk2MTkwOQ==",
      "updated_at" : "2019-03-02T21:27:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468961909",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r261842822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/261842822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is now fixed by using the same parameter style as all through #15497.",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-03-02T21:27:30Z",
      "diff_hunk" : "@@ -1708,12 +1708,19 @@ UniValue converttopsbt(const JSONRPCRequest& request)\n \n UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1) {\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2) {\n         throw std::runtime_error(\n             RPCHelpMan{\"utxoupdatepsbt\",\n-            \"\\nUpdates a PSBT with witness UTXOs retrieved from the UTXO set or the mempool.\\n\",\n+            \"\\nUpdates a PSBT with data from descriptors and the UTXO set or the mempool (segwit outputs only)\\n\",\n             {\n-                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"}\n+                {\"psbt\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A base64 string of a PSBT\"},\n+                {\"descriptors\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"An array of either strings or objects\", {\n+                    {\"\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"A descriptor\"},\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"An object with a descriptor and extra information\", {\n+                         {\"desc\", RPCArg::Type::STR, RPCArg::Optional::NO, \"A descriptor\"},\n+                         {\"range\", RPCArg::Type::NUM, \"1000\", \"Up to what index HD chains should be explored\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r261842822",
      "id" : 261842822,
      "in_reply_to_id" : 257795719,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2MTg0MjgyMg==",
      "original_commit_id" : "e90a5c753d6a91d7fea42f7485865f6fff34019f",
      "original_position" : 17,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 17,
      "pull_request_review_id" : 209884826,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-03-02T21:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/261842822",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-04-14T04:11:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#issuecomment-482918298",
      "id" : 482918298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15427",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MjkxODI5OA==",
      "updated_at" : "2019-04-14T04:11:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/482918298",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280532024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280532024"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this could comment could be a bit more detailed. How is the PSBTOutput updated? (Answer: the `redeem_script`, `witness_script` and `hd_keypaths` are filled in)",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T17:57:29Z",
      "diff_hunk" : "@@ -554,6 +554,9 @@ bool PSBTInputSigned(PSBTInput& input);\n /** Signs a PSBTInput, verifying that all provided data matches what is being signed. */\n bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index, int sighash = SIGHASH_ALL, SignatureData* out_sigdata = nullptr, bool use_dummy = false);\n \n+/** Updates a PSBTOutput with information from provider. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280532024",
      "id" : 280532024,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzMjAyNA==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 4,
      "path" : "src/psbt.h",
      "position" : 4,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280532024",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280533307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280533307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I know this is move-only, but I found this functionality pretty inscrutable, and think it could do with some additional commenting. Things that would be helpful:\r\n\r\n- explain why the caller is instantiating a `HidingSigningProvider` with `nosign` set to true\r\n- explain what the magic `0` and `1` values are in the call to `ProduceSignature()` \r\n- explain that `ProduceSignature()` isn't really signing (or if it does, then that signature gets thrown away)",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:00:49Z",
      "diff_hunk" : "@@ -210,6 +210,20 @@ bool PSBTInputSigned(PSBTInput& input)\n     return !input.final_script_sig.empty() || !input.final_script_witness.IsNull();\n }\n \n+void UpdatePSBTOutput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index)\n+{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280533307",
      "id" : 280533307,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzMzMwNw==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 5,
      "path" : "src/psbt.cpp",
      "position" : 5,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280533307",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280537878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280537878"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The parentheses here are ambiguous - they could be interpreted as modifying the entire sentence or just the mempool part. Consider changing this to:\r\n\r\n```\r\n\"\\nUpdates all segwit inputs and outputs in a PSBT with data from descriptors, the UTXO set or the mempool.\\n\",\r\n```",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:13:35Z",
      "diff_hunk" : "@@ -1710,12 +1710,19 @@ UniValue converttopsbt(const JSONRPCRequest& request)\n \n UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() != 1) {\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2) {\n         throw std::runtime_error(\n             RPCHelpMan{\"utxoupdatepsbt\",\n-            \"\\nUpdates a PSBT with witness UTXOs retrieved from the UTXO set or the mempool.\\n\",\n+            \"\\nUpdates a PSBT with data from descriptors and the UTXO set or the mempool (segwit outputs only)\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280537878",
      "id" : 280537878,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzNzg3OA==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 9,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 9,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280537878",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538090"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Comment could be expanded to say what is being updated (redeem_script, witness_script and hd_keypaths are being filled)",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:14:15Z",
      "diff_hunk" : "@@ -1760,11 +1776,17 @@ UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n \n         const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n \n-        std::vector<std::vector<unsigned char>> solutions_data;\n-        txnouttype which_type = Solver(coin.out.scriptPubKey, solutions_data);\n-        if (which_type == TX_WITNESS_V0_SCRIPTHASH || which_type == TX_WITNESS_V0_KEYHASH || which_type == TX_WITNESS_UNKNOWN) {\n+        if (IsSegWitOutput(provider, coin.out.scriptPubKey)) {\n             input.witness_utxo = coin.out;\n         }\n+\n+        // Update the inputs using descriptor data.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538090",
      "id" : 280538090,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzODA5MA==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 59,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 59,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538090",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538125"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Comment could be expanded to say what is being updated (redeem_script, witness_script and hd_keypaths are being filled)",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:14:20Z",
      "diff_hunk" : "@@ -1760,11 +1776,17 @@ UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n \n         const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n \n-        std::vector<std::vector<unsigned char>> solutions_data;\n-        txnouttype which_type = Solver(coin.out.scriptPubKey, solutions_data);\n-        if (which_type == TX_WITNESS_V0_SCRIPTHASH || which_type == TX_WITNESS_V0_KEYHASH || which_type == TX_WITNESS_UNKNOWN) {\n+        if (IsSegWitOutput(provider, coin.out.scriptPubKey)) {\n             input.witness_utxo = coin.out;\n         }\n+\n+        // Update the inputs using descriptor data.\n+        SignPSBTInput(HidingSigningProvider(&provider, /* nosign */ true, /* nobip32derivs */ false), psbtx, i, /* sighash_type */ 1);\n+    }\n+\n+    // Update the outputs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538125",
      "id" : 280538125,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzODEyNQ==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 63,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 63,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538125",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538596"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I found using `SignPSBTInput()` a bit jarring here, since nothing is actually being signed. Can you add a comment to say that `SignPSBTInput()` won't actually sign when provided with a `HidingSigningProvider` where `nosign` is true?",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:15:32Z",
      "diff_hunk" : "@@ -1760,11 +1776,17 @@ UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n \n         const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n \n-        std::vector<std::vector<unsigned char>> solutions_data;\n-        txnouttype which_type = Solver(coin.out.scriptPubKey, solutions_data);\n-        if (which_type == TX_WITNESS_V0_SCRIPTHASH || which_type == TX_WITNESS_V0_KEYHASH || which_type == TX_WITNESS_UNKNOWN) {\n+        if (IsSegWitOutput(provider, coin.out.scriptPubKey)) {\n             input.witness_utxo = coin.out;\n         }\n+\n+        // Update the inputs using descriptor data.\n+        SignPSBTInput(HidingSigningProvider(&provider, /* nosign */ true, /* nobip32derivs */ false), psbtx, i, /* sighash_type */ 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538596",
      "id" : 280538596,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzODU5Ng==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 60,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 60,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538596",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538837"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538837"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a reason not to create one `HidingSigningProvider()` for the entire function, rather than instantiate one for each call to `SignPSBTInput()` and `UpdatePSBTOutput()`",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:16:12Z",
      "diff_hunk" : "@@ -1760,11 +1776,17 @@ UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n \n         const Coin& coin = view.AccessCoin(psbtx.tx->vin[i].prevout);\n \n-        std::vector<std::vector<unsigned char>> solutions_data;\n-        txnouttype which_type = Solver(coin.out.scriptPubKey, solutions_data);\n-        if (which_type == TX_WITNESS_V0_SCRIPTHASH || which_type == TX_WITNESS_V0_KEYHASH || which_type == TX_WITNESS_UNKNOWN) {\n+        if (IsSegWitOutput(provider, coin.out.scriptPubKey)) {\n             input.witness_utxo = coin.out;\n         }\n+\n+        // Update the inputs using descriptor data.\n+        SignPSBTInput(HidingSigningProvider(&provider, /* nosign */ true, /* nobip32derivs */ false), psbtx, i, /* sighash_type */ 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280538837",
      "id" : 280538837,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDUzODgzNw==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 60,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 60,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280538837",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280550604"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280550604"
         }
      },
      "author_association" : "MEMBER",
      "body" : "These lines are pretty hard to read, and don't give very useful output if they fail. Consider refactoring as follows:\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_psbt.py b/test/functional/rpc_psbt.py\r\nindex 20261f7b7..9b00fc767 100755\r\n--- a/test/functional/rpc_psbt.py\r\n+++ b/test/functional/rpc_psbt.py\r\n@@ -307,25 +307,32 @@ class PSBTTest(BitcoinTestFramework):\r\n         vout3 = find_output(self.nodes[0], txid3, 11)\r\n         self.sync_all()\r\n \r\n-        # Update a PSBT with UTXOs from the node\r\n-        # Bech32 inputs should be filled with witness UTXO. Other inputs should not be filled because they are non-witness\r\n+        def test_psbt_input_keys(psbt_input, keys):\r\n+            \"\"\"Check that the psbt input has only the expected keys.\"\"\"\r\n+            assert_equal(set(keys), set(psbt_input.keys()))\r\n+\r\n+        # Create a PSBT. None of the inputs are filled initially\r\n         psbt = self.nodes[1].createpsbt([{\"txid\":txid1, \"vout\":vout1},{\"txid\":txid2, \"vout\":vout2},{\"txid\":txid3, \"vout\":vout3}], {self.nodes[0].getnewaddress():32.999})\r\n         decoded = self.nodes[1].decodepsbt(psbt)\r\n-        assert \"witness_utxo\" not in decoded['inputs'][0] and \"non_witness_utxo\" not in decoded['inputs'][0] and \"bip32_derivs\" not in decoded['inputs'][0]\r\n-        assert \"witness_utxo\" not in decoded['inputs'][1] and \"non_witness_utxo\" not in decoded['inputs'][1] and \"bip32_derivs\" not in decoded['inputs'][1]\r\n-        assert \"witness_utxo\" not in decoded['inputs'][2] and \"non_witness_utxo\" not in decoded['inputs'][2] and \"redeem_script\" not in decoded['inputs'][2]\r\n+        test_psbt_input_keys(decoded['inputs'][0], [])\r\n+        test_psbt_input_keys(decoded['inputs'][1], [])\r\n+        test_psbt_input_keys(decoded['inputs'][2], [])\r\n+\r\n+        # Update a PSBT with UTXOs from the node\r\n+        # Bech32 inputs should be filled with witness UTXO. Other inputs should not be filled because they are non-witness\r\n         updated = self.nodes[1].utxoupdatepsbt(psbt)\r\n         decoded = self.nodes[1].decodepsbt(updated)\r\n-        assert \"witness_utxo\" in decoded['inputs'][0] and \"non_witness_utxo\" not in decoded['inputs'][0] and \"bip32_derivs\" not in decoded['inputs'][0]\r\n-        assert \"witness_utxo\" not in decoded['inputs'][1] and \"non_witness_utxo\" not in decoded['inputs'][1] and \"bip32_derivs\" not in decoded['inputs'][1]\r\n-        assert \"witness_utxo\" not in decoded['inputs'][2] and \"non_witness_utxo\" not in decoded['inputs'][2] and \"redeem_script\" not in decoded['inputs'][2]\r\n+        test_psbt_input_keys(decoded['inputs'][0], ['witness_utxo'])\r\n+        test_psbt_input_keys(decoded['inputs'][1], [])\r\n+        test_psbt_input_keys(decoded['inputs'][2], [])\r\n+\r\n         # Try again, now while providing descriptors, making P2SH-segwit work, and causing bip32_derivs and redeem_script to be filled in\r\n         descs = [self.nodes[1].getaddressinfo(addr)['desc'] for addr in [addr1,addr2,addr3]]\r\n         updated = self.nodes[1].utxoupdatepsbt(psbt, descs)\r\n         decoded = self.nodes[1].decodepsbt(updated)\r\n-        assert \"witness_utxo\" in decoded['inputs'][0] and \"non_witness_utxo\" not in decoded['inputs'][0] and \"bip32_derivs\" in decoded['inputs'][0]\r\n-        assert \"witness_utxo\" not in decoded['inputs'][1] and \"non_witness_utxo\" not in decoded['inputs'][1] and \"bip32_derivs\" not in decoded['inputs'][1]\r\n-        assert \"witness_utxo\" in decoded['inputs'][2] and \"non_witness_utxo\" not in decoded['inputs'][2] and \"redeem_script\" in decoded['inputs'][2]\r\n+        test_psbt_input_keys(decoded['inputs'][0], ['witness_utxo', 'bip32_derivs'])\r\n+        test_psbt_input_keys(decoded['inputs'][1], [])\r\n+        test_psbt_input_keys(decoded['inputs'][2], ['witness_utxo', 'bip32_derivs', 'redeem_script'])\r\n \r\n         # Two PSBTs with a common input should not be joinable\r\n         psbt1 = self.nodes[1].createpsbt([{\"txid\":txid1, \"vout\":vout1}], {self.nodes[0].getnewaddress():Decimal('10.999')})\r\n```",
      "commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "created_at" : "2019-05-02T18:49:00Z",
      "diff_hunk" : "@@ -311,14 +311,21 @@ def run_test(self):\n         # Bech32 inputs should be filled with witness UTXO. Other inputs should not be filled because they are non-witness\n         psbt = self.nodes[1].createpsbt([{\"txid\":txid1, \"vout\":vout1},{\"txid\":txid2, \"vout\":vout2},{\"txid\":txid3, \"vout\":vout3}], {self.nodes[0].getnewaddress():32.999})\n         decoded = self.nodes[1].decodepsbt(psbt)\n-        assert \"witness_utxo\" not in decoded['inputs'][0] and \"non_witness_utxo\" not in decoded['inputs'][0]\n-        assert \"witness_utxo\" not in decoded['inputs'][1] and \"non_witness_utxo\" not in decoded['inputs'][1]\n-        assert \"witness_utxo\" not in decoded['inputs'][2] and \"non_witness_utxo\" not in decoded['inputs'][2]\n+        assert \"witness_utxo\" not in decoded['inputs'][0] and \"non_witness_utxo\" not in decoded['inputs'][0] and \"bip32_derivs\" not in decoded['inputs'][0]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15427#discussion_r280550604",
      "id" : 280550604,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDU1MDYwNA==",
      "original_commit_id" : "cdabfae36e83f20c4728fcbbab0089e711cf3bc3",
      "original_position" : 7,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 7,
      "pull_request_review_id" : 233153176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15427",
      "updated_at" : "2019-05-02T18:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280550604",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
