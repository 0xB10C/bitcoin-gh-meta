[
   {
      "author_association" : "MEMBER",
      "body" : "See also our section on `#include`s in the dev notes: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#source-code-organization",
      "created_at" : "2019-02-19T15:24:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-465174816",
      "id" : 465174816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NTE3NDgxNg==",
      "updated_at" : "2019-02-19T15:24:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/465174816",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on introducing a mechanical tiebreaker mechanism (such as `iwyu`). Ideally automatically enforced. That way we'll never have to think about this ever again :-)",
      "created_at" : "2019-02-19T15:56:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-465190098",
      "id" : 465190098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NTE5MDA5OA==",
      "updated_at" : "2019-02-19T15:56:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/465190098",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Even having this only on the Travis linter instance helps.\r\n\r\nI've ran into some pretty confusing bugs because of `#include` mistakes. The last one involved a `#ifdef SOMETHING` getting skipped because I forgot to include the file that set it, whereas in a different file I was working on `#ifdef SOMETHING` was set, because it coincidentally did include that file via two or three steps.\r\n\r\ncc @promag",
      "created_at" : "2019-02-19T17:32:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-465231852",
      "id" : 465231852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2NTIzMTg1Mg==",
      "updated_at" : "2019-02-19T17:32:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/465231852",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is the idea to check that touched files have all \"iwyu\" includes?\r\n\r\nOr is the idea to prevent adding unnecessary includes (not really used)?",
      "created_at" : "2019-03-23T00:36:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-475823624",
      "id" : 475823624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3NTgyMzYyNA==",
      "updated_at" : "2019-03-23T00:36:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475823624",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think we can add IWYU to CI because:\r\nA. it sometimes generate false negatives.\r\nB. it does the same for boost includes which then fail building because they aren't meant to be used that way (ie only use high level headers and not more \"internal\" ones)\r\n\r\nbut. I do think that a single PR for sorting this out is important(will open soon for feedback) and then trying to notice in review the following things:\r\n1. New includes obviously, might be unnecessary with a simple forward declaration.\r\n2. New types/functions used in the file that might require new includes even if it compile (IWYU).\r\n\r\n\r\nAnother option that can work is adding the necessary comments to \"fix\" IWYU on the project but idk how much people will like this. ",
      "created_at" : "2020-01-02T13:05:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-570201632",
      "id" : 570201632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDIwMTYzMg==",
      "updated_at" : "2020-01-02T13:05:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570201632",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
         "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
         "followers_url" : "https://api.github.com/users/elichai/followers",
         "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
         "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/elichai",
         "id" : 2167860,
         "login" : "elichai",
         "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
         "organizations_url" : "https://api.github.com/users/elichai/orgs",
         "received_events_url" : "https://api.github.com/users/elichai/received_events",
         "repos_url" : "https://api.github.com/users/elichai/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/elichai"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, could you actually get useful output? Last time I tried it was a mess and not really useful or applicable to our codebase.",
      "created_at" : "2020-01-02T15:13:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-570236672",
      "id" : 570236672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDIzNjY3Mg==",
      "updated_at" : "2020-01-02T15:13:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570236672",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Oh, could you actually get useful output? Last time I tried it was a mess and not really useful or applicable to our codebase.\r\n\r\nit is a mess. you still need to manually go over all the files and change things, i'll open a PR but I don't think even as is after the change people will like it much (validation gets dozens of includes and it kinda bypasses things like `fs.h`) but we can trim it done to an acceptable change :)",
      "created_at" : "2020-01-02T15:16:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-570237443",
      "id" : 570237443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDIzNzQ0Mw==",
      "updated_at" : "2020-01-02T15:16:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570237443",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
         "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
         "followers_url" : "https://api.github.com/users/elichai/followers",
         "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
         "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/elichai",
         "id" : 2167860,
         "login" : "elichai",
         "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
         "organizations_url" : "https://api.github.com/users/elichai/orgs",
         "received_events_url" : "https://api.github.com/users/elichai/received_events",
         "repos_url" : "https://api.github.com/users/elichai/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/elichai"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If anyone's interested I looked into this, and tried running iwyu on core and changing the code until it satisfies, I encountered 2 things:\r\nA. By default there's a lot of false positives and false negatives, it can sometimes ask you to include a stl or boost internal header, which might not even compile by itself. \r\nBecause of that the \"autofix\" leaves you with code that doesn't compile and doesn't even make sense some times, so you must \"fix\" these manually. This leads me to B\r\nB. I Haven't finished the codebase (but I think I did most) and I already got to: `457 files changed, 4191 insertions(+), 1663 deletions(-)`.\r\n\r\nSo B makes a hard bargain without any performance advantages, and A makes B unmaintainable (there's no simple CI script we can run that will help us keep this because of the amount of false negatives/positives)\r\n\r\nThese are my findings in the matter :) (I can push those changes somewhere if anyone wants to look/see)",
      "created_at" : "2020-05-05T18:25:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-624227115",
      "id" : 624227115,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDIyNzExNQ==",
      "updated_at" : "2020-05-05T18:25:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624227115",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
         "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
         "followers_url" : "https://api.github.com/users/elichai/followers",
         "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
         "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/elichai",
         "id" : 2167860,
         "login" : "elichai",
         "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
         "organizations_url" : "https://api.github.com/users/elichai/orgs",
         "received_events_url" : "https://api.github.com/users/elichai/received_events",
         "repos_url" : "https://api.github.com/users/elichai/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/elichai"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> A makes B unmaintainable (there's no simple CI script we can run that will help us keep this because of the amount of false negatives/positives)\r\n\r\nI used to use IWYU a lot and I'm not sure what problems there are with iwyu + bitcoin + boost/stl, but presumably these are fixable and the place to fix them is the upstream mappings, e.g.: https://github.com/include-what-you-use/include-what-you-use/blob/master/boost-all.imp\r\n\r\nFor special cases iwyu has pragmas that sometimes make sense for overriding default behavior\r\nhttps://github.com/include-what-you-use/include-what-you-use/blob/master/docs/IWYUPragmas.md\r\n\r\n> So B makes a hard bargain\r\n\r\nIf diffs actually make sense and are a one-time change that doesn't have to be repeated, I don't think they should be a hard bargain just because they touch a lot of #include lines. Different story of course if the changes are nonsensical or not easily maintainable",
      "created_at" : "2020-05-05T19:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15442#issuecomment-624248324",
      "id" : 624248324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15442",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDI0ODMyNA==",
      "updated_at" : "2020-05-05T19:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624248324",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
