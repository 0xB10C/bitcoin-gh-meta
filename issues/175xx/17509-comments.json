[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18027 (\"PSBT Operations\" dialog by gwillen)\n* #17463 (Bugfix: GUI: Restore SendConfirmationDialog button default to \"Yes\" by luke-jr)\n* #17457 (gui: Fix manual coin control with multiple wallets loaded by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-18T21:48:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-555224768",
      "id" : 555224768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTIyNDc2OA==",
      "updated_at" : "2020-02-11T21:22:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555224768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't investigated thoroughly yet but it seems like at least a subset of the issues regarding handling of malformed PSBT inputs reported in #17149 (\"Potential PSBT issues found by the PSBT fuzzer\") are reachable from this code?\r\n\r\nThat is not a problem once the #17149 issues have been fixed by making the PSBT code more robust against malformed PSBT input, but I wanted to mention the dependency here so that the PSBT issues get fixed before the merge of this PR :)",
      "created_at" : "2019-11-19T10:12:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-555433082",
      "id" : 555433082,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NTQzMzA4Mg==",
      "updated_at" : "2019-11-19T10:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/555433082",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r348395490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348395490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@achow101 I uncommented this because the next role was `UPDATER`, which seems similar to what @justinmoon found:  https://bitcoin.stackexchange.com/questions/89203/analyzepsbt-says-next-role-is-updater-but-nothing-is-missing\r\n\r\nWill investigate more thoroughly when I work on this PR again, if I still see it.",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2019-11-20T10:13:16Z",
      "diff_hunk" : "@@ -222,6 +225,49 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSTB file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    // PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    // bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r348395490",
      "id" : 348395490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0ODM5NTQ5MA==",
      "original_commit_id" : "a48b7dec215316f4c0cde13c57861d481235c201",
      "original_position" : 39,
      "path" : "src/qt/walletview.cpp",
      "position" : null,
      "pull_request_review_id" : 319726984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-01-06T04:35:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348395490",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "UI comment: I think \"create unsigned\" / \"save\" is a weird juxtaposition. Perhaps \"Copy PSBT\" / \"Save PSBT\"? Or perhaps \"Create Unsigned\" with further options in a dialog?",
      "created_at" : "2019-12-09T23:26:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-563487073",
      "id" : 563487073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MzQ4NzA3Mw==",
      "updated_at" : "2019-12-09T23:26:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/563487073",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r357891228"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357891228"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Typo (PSBT -> PSTB)",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2019-12-14T02:26:57Z",
      "diff_hunk" : "@@ -222,6 +225,49 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSTB file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r357891228",
      "id" : 357891228,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1Nzg5MTIyOA==",
      "original_commit_id" : "f7b26ef6f03a545727d625f7f5f43dde430db72a",
      "original_position" : 34,
      "path" : "src/qt/walletview.cpp",
      "position" : null,
      "pull_request_review_id" : 332190668,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-01-06T04:35:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/357891228",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2019-12-23T01:25:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-568323542",
      "id" : 568323542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODMyMzU0Mg==",
      "updated_at" : "2019-12-23T01:25:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568323542",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased. I can address feedback for #17463 here if needed.\r\n\r\n> Or perhaps \"Create Unsigned\" with further options in a dialog?\r\n\r\nYes, this seems like a better idea. It's especially useful to have some flexibility after loading a PSBT. ",
      "created_at" : "2020-01-02T10:14:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-570165630",
      "id" : 570165630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDE2NTYzMA==",
      "updated_at" : "2020-01-02T10:14:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570165630",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I added a dialog for Create Unsigned that appears after the usual transaction approval. The PSBT is automatically copied to clipboard as before, but the dialog offers to also save it. When loading a PSBT, the dialog asks if the users wants to broadcast. When there's a problem, e.g. missing signatures, it offers to copy it (so you can e.g. inspect it with RPC).  ",
      "created_at" : "2020-01-04T13:18:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-570785119",
      "id" : 570785119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDc4NTExOQ==",
      "updated_at" : "2020-01-04T13:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570785119",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I dropped the dependency on #17463; should be easy to rebase. This is now ready for review.",
      "created_at" : "2020-01-06T04:36:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-571000130",
      "id" : 571000130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MTAwMDEzMA==",
      "updated_at" : "2020-01-06T04:36:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571000130",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK e6ea593. Thoughts:\r\n\r\n- Obviously I'm not exactly an unbiased reviewer since some of this is based on some of my work, but I think my ACK probably still counts. :-)\r\n- I don't like the verbosity of the save filenames, but that's so easy to change later, and so subject to bikeshedding, that I think it should be left alone for this PR.",
      "created_at" : "2020-01-28T01:57:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-579043172",
      "id" : 579043172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTA0MzE3Mg==",
      "updated_at" : "2020-01-28T01:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579043172",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No way to actually sign an incomplete one?\r\n\r\nMaybe it should load raw signed transactions too...",
      "created_at" : "2020-01-29T03:56:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-579580448",
      "id" : 579580448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTU4MDQ0OA==",
      "updated_at" : "2020-01-29T03:56:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579580448",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr both should be possible, but I prefer to keep this PR simple.\r\n\r\n@practicalswift wrote:\r\n\r\n> I haven't investigated thoroughly yet but it seems like at least a subset of the issues regarding handling of malformed PSBT inputs reported in #17149 (\"Potential PSBT issues found by the PSBT fuzzer\") are reachable from this code?\r\n> \r\n> That is not a problem once the #17149 issues have been fixed by making the PSBT code more robust against malformed PSBT input, but I wanted to mention the dependency here so that the PSBT issues get fixed before the merge of this PR :)\r\n\r\nThese are merged now in #17156, though I haven't rebased to preserve @gwillen's ACK.",
      "created_at" : "2020-01-29T08:04:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-579640285",
      "id" : 579640285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTY0MDI4NQ==",
      "updated_at" : "2020-01-29T11:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579640285",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr FWIW, I already have a change prepared on top of this one which introduces more functionality when loading, including the ability to sign. I have been kind of dithering over details but it's basically ready to become a PR. I will probably PR it at least as a WIP as soon as this one's in (maybe I should just do that now.)\r\n\r\n(It doesn't load raw signed transactions, but that would seem pretty easy to add, in fact. Maybe not a bad idea.)",
      "created_at" : "2020-01-29T20:14:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-579939027",
      "id" : 579939027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTkzOTAyNw==",
      "updated_at" : "2020-01-29T20:15:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579939027",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors Nice to see #17156 merged - that makes the handling of malformed PSBT much more robust. Please note that we still have the misaligned pointer use in `ProduceSignature(â¦)` (via `prevector`) to resolve -- see https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-579963266 for details and #17708 for fix.\r\n\r\nI would suggest waiting with merging this PR until #17708 is merged.\r\n\r\nAfter that the handling of malformed PSBT input should be free from known robustness issues AFAIK :)",
      "created_at" : "2020-01-29T21:20:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-579965121",
      "id" : 579965121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTk2NTEyMQ==",
      "updated_at" : "2020-01-29T21:20:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579965121",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift this PR doesn't sign PSBT's, so it seems that particular code path is avoided?",
      "created_at" : "2020-01-30T09:58:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-580176466",
      "id" : 580176466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDE3NjQ2Ng==",
      "updated_at" : "2020-01-30T09:58:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580176466",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors Oh, of course - you're right. It is a PSBT issue, but not an issue for this PR :)",
      "created_at" : "2020-01-30T11:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-580210031",
      "id" : 580210031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDIxMDAzMQ==",
      "updated_at" : "2020-01-30T11:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580210031",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r375654172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375654172"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This looks like an ugly hack? Why is it not just passed as a reference to `PrepareSendText`?",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-06T06:04:17Z",
      "diff_hunk" : "@@ -60,6 +60,7 @@ public Q_SLOTS:\n     Ui::SendCoinsDialog *ui;\n     ClientModel *clientModel;\n     WalletModel *model;\n+    std::unique_ptr<WalletModelTransaction> m_current_transaction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r375654172",
      "id" : 375654172,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTY1NDE3Mg==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 4,
      "path" : "src/qt/sendcoinsdialog.h",
      "position" : 4,
      "pull_request_review_id" : 354216869,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-06T06:04:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/375654172",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r377076224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/377076224"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`on_sendButton_clicked()` also needs access to `m_current_transaction`",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-10T13:56:14Z",
      "diff_hunk" : "@@ -60,6 +60,7 @@ public Q_SLOTS:\n     Ui::SendCoinsDialog *ui;\n     ClientModel *clientModel;\n     WalletModel *model;\n+    std::unique_ptr<WalletModelTransaction> m_current_transaction;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r377076224",
      "id" : 377076224,
      "in_reply_to_id" : 375654172,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzA3NjIyNA==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 4,
      "path" : "src/qt/sendcoinsdialog.h",
      "position" : 4,
      "pull_request_review_id" : 355953340,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-10T13:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/377076224",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK, will review and test soon",
      "created_at" : "2020-02-20T19:15:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-589260239",
      "id" : 589260239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4OTI2MDIzOQ==",
      "updated_at" : "2020-02-20T19:15:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/589260239",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382203922"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382203922"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"Completed\"? Might want to be very obvious to user that there's nothing else to be done.",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-20T19:16:03Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382203922",
      "id" : 382203922,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwMzkyMg==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 45,
      "path" : "src/qt/walletview.cpp",
      "position" : 45,
      "pull_request_review_id" : 362164557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-20T19:16:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382203922",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382205093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382205093"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That's a good point re: wording, but I would suggest not bikeshedding on it because it's going to get changed again in my #18027 .",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-20T19:18:18Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382205093",
      "id" : 382205093,
      "in_reply_to_id" : 382203922,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjIwNTA5Mw==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 45,
      "path" : "src/qt/walletview.cpp",
      "position" : 45,
      "pull_request_review_id" : 362166037,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-20T19:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382205093",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382257510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382257510"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/Broadcast/Broadcasted/",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-20T21:04:47Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");\n+\n+    if (complete) {\n+        msgBox.setInformativeText(\"Would you like to send this transaction?\");\n+    } else if (!have_all_sigs) {\n+        msgBox.setInformativeText(\"Transaction needs more signatures. Copy to clipboard?\");\n+    } else {\n+        msgBox.setInformativeText(\"Transaction is incomplete. Copy to clipboard?\");\n+    }\n+    msgBox.setStandardButtons(QMessageBox::Yes | QMessageBox::Cancel);\n+    switch (msgBox.exec()) {\n+    case QMessageBox::Yes: {\n+        if (complete) {\n+            std::string err_string;\n+            CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+            TransactionError result = BroadcastTransaction(*clientModel->node().context(), tx, err_string, COIN / 10, /* relay */ true, /* await_callback */ false);\n+            if (result == TransactionError::OK) {\n+                Q_EMIT message(tr(\"Success\"), tr(\"Broadcast transaction sucessfully.\"), CClientUIInterface::MSG_INFORMATION | CClientUIInterface::MODAL);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382257510",
      "id" : 382257510,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1NzUxMA==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 63,
      "path" : "src/qt/walletview.cpp",
      "position" : 63,
      "pull_request_review_id" : 362229191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-20T21:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382257510",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382258109"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382258109"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what situations can this hit?",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-20T21:06:15Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");\n+\n+    if (complete) {\n+        msgBox.setInformativeText(\"Would you like to send this transaction?\");\n+    } else if (!have_all_sigs) {\n+        msgBox.setInformativeText(\"Transaction needs more signatures. Copy to clipboard?\");\n+    } else {\n+        msgBox.setInformativeText(\"Transaction is incomplete. Copy to clipboard?\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382258109",
      "id" : 382258109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1ODEwOQ==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 52,
      "path" : "src/qt/walletview.cpp",
      "position" : 52,
      "pull_request_review_id" : 362229191,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-20T21:06:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382258109",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK e6ea593f510481ddabc042403a5f6f0200551ffb, Tested using HWI with base64->binary conversion command detailed to save the signed version of the transaction here https://github.com/bitcoin-core/HWI/blob/master/docs/examples.md#binary-format-handling",
      "created_at" : "2020-02-20T21:20:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#issuecomment-589323856",
      "id" : 589323856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17509",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4OTMyMzg1Ng==",
      "updated_at" : "2020-02-20T21:20:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/589323856",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382264904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382264904"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "From my own study of this question, I believe the the answer is \"no situations, unless there are bugs in AnalyzePSBT\", but I think we've run into some bugs in AnalyzePSBT while figuring this out.",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-20T21:22:23Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");\n+\n+    if (complete) {\n+        msgBox.setInformativeText(\"Would you like to send this transaction?\");\n+    } else if (!have_all_sigs) {\n+        msgBox.setInformativeText(\"Transaction needs more signatures. Copy to clipboard?\");\n+    } else {\n+        msgBox.setInformativeText(\"Transaction is incomplete. Copy to clipboard?\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382264904",
      "id" : 382264904,
      "in_reply_to_id" : 382258109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI2NDkwNA==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 52,
      "path" : "src/qt/walletview.cpp",
      "position" : 52,
      "pull_request_review_id" : 362242898,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-20T21:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382264904",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382493091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382493091"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't feel confident enough about `AnalyzePSBT` (yet) to put an assert here.  ",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-21T09:58:44Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");\n+\n+    if (complete) {\n+        msgBox.setInformativeText(\"Would you like to send this transaction?\");\n+    } else if (!have_all_sigs) {\n+        msgBox.setInformativeText(\"Transaction needs more signatures. Copy to clipboard?\");\n+    } else {\n+        msgBox.setInformativeText(\"Transaction is incomplete. Copy to clipboard?\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382493091",
      "id" : 382493091,
      "in_reply_to_id" : 382258109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ5MzA5MQ==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 52,
      "path" : "src/qt/walletview.cpp",
      "position" : 52,
      "pull_request_review_id" : 362516270,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-21T09:58:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382493091",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382593946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382593946"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Worst thing I'd do is stick a log line in debug or something. Fine without.",
      "commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "created_at" : "2020-02-21T13:57:50Z",
      "diff_hunk" : "@@ -222,6 +225,69 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n         signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n+void WalletView::gotoLoadPSBT()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this,\n+        tr(\"Load Transaction Data\"), QString(),\n+        tr(\"Partially Signed Transaction (*.psbt)\"), nullptr);\n+    if (filename.isEmpty()) return;\n+    std::ifstream in(filename.toLocal8Bit().data(), std::ios::binary);\n+    // https://stackoverflow.com/questions/116038/what-is-the-best-way-to-read-an-entire-file-into-a-stdstring-in-c\n+    std::string data(std::istreambuf_iterator<char>{in}, {});\n+\n+    std::string error;\n+    PartiallySignedTransaction psbtx;\n+    if (!DecodeRawPSBT(psbtx, data, error)) {\n+        Q_EMIT message(tr(\"Error\"), tr(\"Unable to decode PSBT file\") + \"\\n\" + QString::fromStdString(error), CClientUIInterface::MSG_ERROR);\n+        return;\n+    }\n+\n+    PSBTAnalysis analysis = AnalyzePSBT(psbtx);\n+    bool have_all_sigs = (analysis.next == PSBTRole::FINALIZER) || (analysis.next == PSBTRole::EXTRACTOR);\n+\n+    CMutableTransaction mtx;\n+    bool complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+    QMessageBox msgBox;\n+    msgBox.setText(\"Partially Signed Bitcoin Transaction\");\n+\n+    if (complete) {\n+        msgBox.setInformativeText(\"Would you like to send this transaction?\");\n+    } else if (!have_all_sigs) {\n+        msgBox.setInformativeText(\"Transaction needs more signatures. Copy to clipboard?\");\n+    } else {\n+        msgBox.setInformativeText(\"Transaction is incomplete. Copy to clipboard?\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17509#discussion_r382593946",
      "id" : 382593946,
      "in_reply_to_id" : 382258109,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU5Mzk0Ng==",
      "original_commit_id" : "e6ea593f510481ddabc042403a5f6f0200551ffb",
      "original_position" : 52,
      "path" : "src/qt/walletview.cpp",
      "position" : 52,
      "pull_request_review_id" : 362645214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17509",
      "updated_at" : "2020-02-21T13:57:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/382593946",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
