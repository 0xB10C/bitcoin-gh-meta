[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348661153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17537"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348661153"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"keypool: Move opportunistic TopUps from LegacyScriptPubKeyMan to CWallet and ReserveDestination\" (5921040b61bb5bdceddfbb94e58d51852f403232)\r\n\r\nI think you forgot to remove corresponding topup from LegacyScriptPubKeyMan::GetNewDestination",
      "commit_id" : "55b0e9f692c3a617bcaf32f1e1eb32f55201150d",
      "created_at" : "2019-11-20T18:01:57Z",
      "diff_hunk" : "@@ -3083,6 +3083,7 @@ bool CWallet::GetNewDestination(const OutputType type, const std::string label,\n     bool result = false;\n     auto spk_man = m_spk_man.get();\n     if (spk_man) {\n+        spk_man->TopUp();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348661153",
      "id" : 348661153,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0ODY2MTE1Mw==",
      "original_commit_id" : "5921040b61bb5bdceddfbb94e58d51852f403232",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 320165232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17537",
      "updated_at" : "2019-11-20T20:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348661153",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To round this out I think it could also be good:\r\n\r\n- To move TopUp call up the stack from `LegacyScriptPubKeyMan::MarkUnusedAddresses` by having that method return whether it removed any keypool entries.\r\n- To add a note to `ScriptPubKeyMan::TopUp` header declaration saying that after initialization, individual ScriptPubKeyMan implementations shouldn't need to call this internally. External wallet code is responsible for topping up so key pools get managed in a uniform way across implementations.",
      "created_at" : "2019-11-20T18:34:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-556219306",
      "id" : 556219306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17537",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NjIxOTMwNg==",
      "updated_at" : "2019-11-20T18:34:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/556219306",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17237](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17237.html) (wallet: LearnRelatedScripts only if KeepDestination by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-20T19:18:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-556271091",
      "id" : 556271091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17537",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NjI3MTA5MQ==",
      "updated_at" : "2019-11-20T19:18:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/556271091",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348717969"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17537"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348717969"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops. Fixed.",
      "commit_id" : "55b0e9f692c3a617bcaf32f1e1eb32f55201150d",
      "created_at" : "2019-11-20T20:02:44Z",
      "diff_hunk" : "@@ -3083,6 +3083,7 @@ bool CWallet::GetNewDestination(const OutputType type, const std::string label,\n     bool result = false;\n     auto spk_man = m_spk_man.get();\n     if (spk_man) {\n+        spk_man->TopUp();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348717969",
      "id" : 348717969,
      "in_reply_to_id" : 348661153,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0ODcxNzk2OQ==",
      "original_commit_id" : "5921040b61bb5bdceddfbb94e58d51852f403232",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 320238157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17537",
      "updated_at" : "2019-11-20T20:02:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/348717969",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
