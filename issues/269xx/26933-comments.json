[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [sdaftuar](https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400978614), [ajtowns](https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400981797), [naumenkogs](https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1401991736) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26812](https://github.com/bitcoin/bitcoin/pull/26812) (test: add end-to-end tests for CConnman and PeerManager by vasild)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n* [#26403](https://github.com/bitcoin/bitcoin/pull/26403) ([POLICY] Ephemeral anchors by instagibbs)\n* [#25038](https://github.com/bitcoin/bitcoin/pull/25038) (policy: nVersion=3 and Package RBF by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-01-20T13:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1398399449",
      "id" : 1398399449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TWeHZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398399449/reactions"
      },
      "updated_at" : "2023-01-24T13:57:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398399449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "CC @sdaftuar @ajtowns @instagibbs",
      "created_at" : "2023-01-20T13:52:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1398425920",
      "id" : 1398425920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TWklA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398425920/reactions"
      },
      "updated_at" : "2023-01-20T13:52:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398425920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> * We can remove these transactions in `TrimToSize()`, but 2500 is not within our acceptable limits.\r\n\r\nI'm not sure I see why this is a problem? Can't we have the situation where 1000s of txs get evicted anyway, simply by accepting a high fee rate 400kb tx that then causes a large number of small min feerate txs (with no unconfirmed ancestors/descendants) to be evicted due to hitting the mempool limit? (At least evicting ~350 otherwise unrelated txs that way seems possible -- simple 1-in 1-out txs seem to contribute ~1150 bytes to mempool usage each for me, so 350 of them should use about 402kB)\r\n\r\n> (what if the 0-fee ancestor is bumped by something else?)\r\n\r\nWe essentially have to do the work to see if the ancestors are bumped by something else anyway, whether they're 0-fee or not (when we evict the conflicted descendant; its ancestors' descendant fee rates get updated). When we get to TrimToSize, we just look at the already calculated descendant score, and evict the low ones. But the logic there doesn't change if the lowest fee rate is 0 or 1 sat/vb?\r\n\r\n> 06:30 < sdaftuar> i think my concern is that the mempool shouldn't have things in it that would never get mined, eg because they're below minrelay fee (which we compare against in the mining code iirc)\r\n\r\nWouldn't it make more sense to address that directly, ie by having TrimToSize trim txs whose descendant score is below min relay fee, even if the mempool isn't full? Then txs who lose their CPFP child will get trimmed essentially immediately, no matter how they got in, and no matter why the parent might have been removed?\r\n\r\nI don't mind the concept here (which I summarise as \"only allow txs below min relay fee via some scheme that deliberately limits the complexity\"), but it seems more like a \"here's another special case\" instead of \"here's a simple rule that's easy for everyone to think about\".",
      "created_at" : "2023-01-23T07:38:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1399919892",
      "id" : 1399919892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TcRUU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399919892/reactions"
      },
      "updated_at" : "2023-01-23T07:38:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1399919892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Slightly out of order:\r\n\r\n> Wouldn't it make more sense to address that directly, ie by having TrimToSize trim txs whose descendant score is below min relay fee, even if the mempool isn't full?\r\n\r\nbtw I have this as the next commit (https://github.com/bitcoin/bitcoin/pull/25038/commits/898847e1907eda3d87d19ea43099b71d9eded5f4 or \"[mempool] evict everything below min relay fee in TrimToSize()\" commit in #25038). My concern was whether it would be problematic to have many such transactions to trim, hence these changes beforehand. If we instead decide that we're ok with this, I'm happy to drop these.\r\n\r\nSomewhat relevant, I'd also wonder if we should add a `TrimToSize()` at the end of reorgs. Same reason, so we don't add below-minrelayfee from disconnected blocks. And same concern, that it could make the process slower.\r\n\r\n> I'm not sure I see why this is a problem? Can't we have the situation where 1000s of txs get evicted anyway, simply by accepting a high fee rate 400kb tx that then causes a large number of small min feerate txs (with no unconfirmed ancestors/descendants) to be evicted due to hitting the mempool limit?\r\n\r\nYes, it is definitely not otherwise impossible to be evicting 1000s of transactions in `TrimToSize()`. But since package cpfp would be a new way of permitting such transactions, I'd rather lean towards being conservative?",
      "created_at" : "2023-01-23T09:34:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400040869",
      "id" : 1400040869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585Tcu2l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400040869/reactions"
      },
      "updated_at" : "2023-01-23T09:34:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400040869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Wouldn't it make more sense to address that directly, ie by having TrimToSize trim txs whose descendant score is below min relay fee, even if the mempool isn't full? \r\n\r\nThis is insufficient for preventing transactions that will never be mined from staying in the mempool, because `TrimToSize` would leave transactions in the mempool if a parent and multiple children appear to have enough fee for the combined package size, even though no single child has an ancestor fee rate above the min relay fee (eg a \"children-pay-for-parent\" scenario).\r\n\r\nSo I think while having a call to `TrimToSize` shouldn't hurt (and would be needed in the case of v3), we seem to need an approach like this PR to avoid the problem generally.",
      "created_at" : "2023-01-23T10:47:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400143991",
      "id" : 1400143991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TdIB3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400143991/reactions"
      },
      "updated_at" : "2023-01-23T21:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400143991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-01-23T21:06:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400978614",
      "id" : 1400978614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TgTy2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400978614/reactions"
      },
      "updated_at" : "2023-01-23T21:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400978614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@glozow\r\n\r\n> My concern was whether it would be problematic to have many such transactions to trim, hence these changes beforehand. If we instead decide that we're ok with this, I'm happy to drop these.\r\n\r\nI'm not sure that we shouldn't be concerned about using up too much CPU in such cases; just that if we are, there are other analogous cases we should be concerned about too...\r\n\r\n@sdaftuar\r\n\r\n> This is insufficient for preventing transactions that will never be mined from staying in the mempool, because 'TrimToSize' would leave transactions in the mempool if a parent and multiple children appear to have enough fee for the combined package size, even though no single child has an ancestor fee rate above the min relay fee (eg a \"children-pay-for-parents scenario).\r\n\r\nRight, but that's a reflection of us using ancestor score for mining, but descendant score for mempool removal... So presumably we'd get similar behaviour even if min relay fee is 0 -- ie, if we have a parent/children relationship like that where the parent has a high descendant score but the children have low ancestor scores, then they'll remain in the mempool while we evict txs with a fee rate in between those values due to the mempool being full, even if it turns out those txs would be mined while the child txs would not. (Though the key value there is what people are using for `-blockmintxfee` not the min relay fee per se...)\r\n\r\nReplacing descendant score is a big, possibly impossible, project though, so Concept ACK on working around it in this way in the meantime. I think it would be better to be much clearer on exactly what this is achieving though.",
      "created_at" : "2023-01-23T21:09:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1400981797",
      "id" : 1400981797,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TgUkl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400981797/reactions"
      },
      "updated_at" : "2023-01-23T21:09:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400981797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-01-24T13:57:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1401991736",
      "id" : 1401991736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585TkLI4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1401991736/reactions"
      },
      "updated_at" : "2023-01-24T13:57:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1401991736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Replacing descendant score is a big, possibly impossible, project though, so Concept ACK on working around it in this way in the meantime. I think it would be better to be much clearer on exactly what this is achieving though.\r\n\r\nAgreed. I've rewritten the description to focus on the fact that we can end up with descendant packages of transactions that would never be mined but still get to hang out in the mempool. I've also written a test to demonstrate this [here](https://github.com/glozow/bitcoin/commits/26933-motivation), on top of the \"evict everything below min relay feerate in TrimToSize()\" commit (to show it doesn't fix this issue), and added a description of this test to the OP so it would be in the commit log. I could adapt the test for this PR, but most of it would not be executed when the changes are in place, so I'm not sure how meaningful it would be.",
      "created_at" : "2023-01-30T12:16:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#issuecomment-1408516682",
      "id" : 1408516682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
      "node_id" : "IC_kwDOABII585T9EJK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1408516682/reactions"
      },
      "updated_at" : "2023-01-30T12:16:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1408516682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092047087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092047087"
         }
      },
      "author_association" : "MEMBER",
      "body" : "micro-nit: I don't think we need this new variable? Could just use `target_feerate.GetFee(...)` in the next line...",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-01-31T14:52:48Z",
      "diff_hunk" : "@@ -426,6 +426,33 @@ std::vector<CTransactionRef> TestChain100Setup::PopulateMempool(FastRandomContex\n     return mempool_transactions;\n }\n \n+void TestChain100Setup::MockMempoolMinFee(const CFeeRate& target_feerate)\n+{\n+    LOCK2(cs_main, m_node.mempool->cs);\n+    // Transactions in the mempool will affect the new minimum feerate.\n+    assert(m_node.mempool->size() == 0);\n+    // The target feerate cannot be too low...\n+    // ...otherwise the transaction's feerate will need to be negative.\n+    assert(target_feerate > m_node.mempool->m_incremental_relay_feerate);\n+    // ...otherwise this is not meaningful. The feerate policy uses the maximum of both feerates.\n+    assert(target_feerate > m_node.mempool->m_min_relay_feerate);\n+\n+    // Manually create an invalid transaction. Manually set the fee in the CTxMemPoolEntry to\n+    // achieve the exact target feerate.\n+    CMutableTransaction mtx = CMutableTransaction();\n+    mtx.vin.push_back(CTxIn{COutPoint{InsecureRand256(), 0}});\n+    mtx.vout.push_back(CTxOut(1 * COIN, GetScriptForDestination(WitnessV0ScriptHash(CScript() << OP_TRUE))));\n+    const auto tx{MakeTransactionRef(mtx)};\n+    LockPoints lp;\n+    CFeeRate tx_feerate(target_feerate);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092047087",
      "id" : 1092047087,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BF1Dv",
      "original_commit_id" : "522cb10f2c250e7acc56e8c02d33fcdb69817c1d",
      "original_line" : 447,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1277374478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092047087/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T20:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092047087",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092136338"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092136338"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe worth expanding this comment slightly to explain why this check is here (especially since this check is partially duplicated in the check at line 830 below).",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-01-31T15:55:30Z",
      "diff_hunk" : "@@ -819,9 +819,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         return state.Invalid(TxValidationResult::TX_NOT_STANDARD, \"bad-txns-too-many-sigops\",\n                 strprintf(\"%d\", nSigOpsCost));\n \n-    // No individual transactions are allowed below the min relay feerate and mempool min feerate except from\n-    // disconnected blocks and transactions in a package. Package transactions will be checked using\n-    // package feerate later.\n+    // No individual transactions are allowed below the min relay feerate except from disconnected blocks.\n+    if (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092136338",
      "id" : 1092136338,
      "line" : 827,
      "node_id" : "PRRC_kwDOABII585BGK2S",
      "original_commit_id" : "fd2b3c8c9bba2ee7129633b713831b170f18e75d",
      "original_line" : 827,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 1277374478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092136338/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T20:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092136338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092433429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092433429"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think this comment needs some correction, doesn't parse for me.",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-01-31T20:17:03Z",
      "diff_hunk" : "@@ -76,6 +83,44 @@ def run_test(self):\n         self.log.info('Create a mempool tx that will not pass mempoolminfee')\n         assert_raises_rpc_error(-26, \"mempool min fee not met\", miniwallet.send_self_transfer, from_node=node, fee_rate=relayfee)\n \n+        self.log.info(\"Check that submitpackage allows cpfp of a parent below mempool min feerate\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+\n+        # Package with 2 parents and 1 child. One parent pays for itself using modified fees, and\n+        # another has 0 fees but is bumped by child.\n+        tx_poor = miniwallet.create_self_transfer(fee_rate=relayfee)\n+        tx_rich = miniwallet.create_self_transfer(fee=0, fee_rate=0)\n+        node.prioritisetransaction(tx_rich[\"txid\"], 0, int(DEFAULT_FEE * COIN))\n+        package_txns = [tx_rich, tx_poor]\n+        coins = [tx[\"new_utxo\"] for tx in package_txns]\n+        tx_child = miniwallet.create_self_transfer_multi(utxos_to_spend=coins, fee_per_output=10000) #DEFAULT_FEE\n+        package_txns.append(tx_child)\n+\n+        submitpackage_result = node.submitpackage([tx[\"hex\"] for tx in package_txns])\n+\n+        rich_parent_result = submitpackage_result[\"tx-results\"][tx_rich[\"wtxid\"]]\n+        poor_parent_result = submitpackage_result[\"tx-results\"][tx_poor[\"wtxid\"]]\n+        child_result = submitpackage_result[\"tx-results\"][tx_child[\"tx\"].getwtxid()]\n+        assert_fee_amount(poor_parent_result[\"fees\"][\"base\"], tx_poor[\"tx\"].get_vsize(), relayfee)\n+        assert_equal(rich_parent_result[\"fees\"][\"base\"], 0)\n+        assert_equal(child_result[\"fees\"][\"base\"], DEFAULT_FEE)\n+        # The \"rich\" parent does not require CPFP so its effective feerate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1092433429",
      "id" : 1092433429,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BHTYV",
      "original_commit_id" : "d32f445ab9f9a65d7bd0eec828b8a3de0d07d635",
      "original_line" : 108,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 1277374478,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092433429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-31T20:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1092433429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093031279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093031279"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d32f445ab9f9a65d7bd0eec828b8a3de0d07d635\r\nthe `-1BTC` comment is irrelevant now?\r\n(i guess it's technically still relevant, but became more confusing)",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T10:25:06Z",
      "diff_hunk" : "@@ -658,7 +662,7 @@ BOOST_FIXTURE_TEST_CASE(package_cpfp_tests, TestChain100Setup)\n     // Package feerate is calculated using modified fees, and prioritisetransaction accepts negative\n     // fee deltas. This should be taken into account. De-prioritise the parent transaction by -1BTC,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093031279",
      "id" : 1093031279,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BJlVv",
      "original_commit_id" : "d32f445ab9f9a65d7bd0eec828b8a3de0d07d635",
      "original_line" : 663,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/test/txpackage_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1278835188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093031279/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T10:29:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093031279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, fixed",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T10:32:36Z",
      "diff_hunk" : "@@ -426,6 +426,33 @@ std::vector<CTransactionRef> TestChain100Setup::PopulateMempool(FastRandomContex\n     return mempool_transactions;\n }\n \n+void TestChain100Setup::MockMempoolMinFee(const CFeeRate& target_feerate)\n+{\n+    LOCK2(cs_main, m_node.mempool->cs);\n+    // Transactions in the mempool will affect the new minimum feerate.\n+    assert(m_node.mempool->size() == 0);\n+    // The target feerate cannot be too low...\n+    // ...otherwise the transaction's feerate will need to be negative.\n+    assert(target_feerate > m_node.mempool->m_incremental_relay_feerate);\n+    // ...otherwise this is not meaningful. The feerate policy uses the maximum of both feerates.\n+    assert(target_feerate > m_node.mempool->m_min_relay_feerate);\n+\n+    // Manually create an invalid transaction. Manually set the fee in the CTxMemPoolEntry to\n+    // achieve the exact target feerate.\n+    CMutableTransaction mtx = CMutableTransaction();\n+    mtx.vin.push_back(CTxIn{COutPoint{InsecureRand256(), 0}});\n+    mtx.vout.push_back(CTxOut(1 * COIN, GetScriptForDestination(WitnessV0ScriptHash(CScript() << OP_TRUE))));\n+    const auto tx{MakeTransactionRef(mtx)};\n+    LockPoints lp;\n+    CFeeRate tx_feerate(target_feerate);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039398",
      "id" : 1093039398,
      "in_reply_to_id" : 1092047087,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BJnUm",
      "original_commit_id" : "522cb10f2c250e7acc56e8c02d33fcdb69817c1d",
      "original_line" : 447,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1278847653,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T10:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a bit about how this check is different from `CheckFeeRate`",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T10:32:56Z",
      "diff_hunk" : "@@ -819,9 +819,14 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         return state.Invalid(TxValidationResult::TX_NOT_STANDARD, \"bad-txns-too-many-sigops\",\n                 strprintf(\"%d\", nSigOpsCost));\n \n-    // No individual transactions are allowed below the min relay feerate and mempool min feerate except from\n-    // disconnected blocks and transactions in a package. Package transactions will be checked using\n-    // package feerate later.\n+    // No individual transactions are allowed below the min relay feerate except from disconnected blocks.\n+    if (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039702",
      "id" : 1093039702,
      "in_reply_to_id" : 1092136338,
      "line" : 827,
      "node_id" : "PRRC_kwDOABII585BJnZW",
      "original_commit_id" : "fd2b3c8c9bba2ee7129633b713831b170f18e75d",
      "original_line" : 827,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 1278847653,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039702/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T10:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039792"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, fixed",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T10:33:01Z",
      "diff_hunk" : "@@ -76,6 +83,44 @@ def run_test(self):\n         self.log.info('Create a mempool tx that will not pass mempoolminfee')\n         assert_raises_rpc_error(-26, \"mempool min fee not met\", miniwallet.send_self_transfer, from_node=node, fee_rate=relayfee)\n \n+        self.log.info(\"Check that submitpackage allows cpfp of a parent below mempool min feerate\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+\n+        # Package with 2 parents and 1 child. One parent pays for itself using modified fees, and\n+        # another has 0 fees but is bumped by child.\n+        tx_poor = miniwallet.create_self_transfer(fee_rate=relayfee)\n+        tx_rich = miniwallet.create_self_transfer(fee=0, fee_rate=0)\n+        node.prioritisetransaction(tx_rich[\"txid\"], 0, int(DEFAULT_FEE * COIN))\n+        package_txns = [tx_rich, tx_poor]\n+        coins = [tx[\"new_utxo\"] for tx in package_txns]\n+        tx_child = miniwallet.create_self_transfer_multi(utxos_to_spend=coins, fee_per_output=10000) #DEFAULT_FEE\n+        package_txns.append(tx_child)\n+\n+        submitpackage_result = node.submitpackage([tx[\"hex\"] for tx in package_txns])\n+\n+        rich_parent_result = submitpackage_result[\"tx-results\"][tx_rich[\"wtxid\"]]\n+        poor_parent_result = submitpackage_result[\"tx-results\"][tx_poor[\"wtxid\"]]\n+        child_result = submitpackage_result[\"tx-results\"][tx_child[\"tx\"].getwtxid()]\n+        assert_fee_amount(poor_parent_result[\"fees\"][\"base\"], tx_poor[\"tx\"].get_vsize(), relayfee)\n+        assert_equal(rich_parent_result[\"fees\"][\"base\"], 0)\n+        assert_equal(child_result[\"fees\"][\"base\"], DEFAULT_FEE)\n+        # The \"rich\" parent does not require CPFP so its effective feerate.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093039792",
      "id" : 1093039792,
      "in_reply_to_id" : 1092433429,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BJnaw",
      "original_commit_id" : "d32f445ab9f9a65d7bd0eec828b8a3de0d07d635",
      "original_line" : 108,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 1278847653,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039792/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T10:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093039792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093044513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093044513"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Amended to remove the `-1BTC`",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T10:37:12Z",
      "diff_hunk" : "@@ -658,7 +662,7 @@ BOOST_FIXTURE_TEST_CASE(package_cpfp_tests, TestChain100Setup)\n     // Package feerate is calculated using modified fees, and prioritisetransaction accepts negative\n     // fee deltas. This should be taken into account. De-prioritise the parent transaction by -1BTC,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093044513",
      "id" : 1093044513,
      "in_reply_to_id" : 1093031279,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BJokh",
      "original_commit_id" : "d32f445ab9f9a65d7bd0eec828b8a3de0d07d635",
      "original_line" : 663,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/test/txpackage_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1278847653,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093044513/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T10:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093044513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093079863"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093079863"
         }
      },
      "author_association" : "MEMBER",
      "body" : "490f3c1a8eabac737e196e7fffd7765aa941f65a\r\nI assume another parent is `tx_poor`, meaning it pays `relayfee` rather than 0?",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T11:11:08Z",
      "diff_hunk" : "@@ -76,6 +83,44 @@ def run_test(self):\n         self.log.info('Create a mempool tx that will not pass mempoolminfee')\n         assert_raises_rpc_error(-26, \"mempool min fee not met\", miniwallet.send_self_transfer, from_node=node, fee_rate=relayfee)\n \n+        self.log.info(\"Check that submitpackage allows cpfp of a parent below mempool min feerate\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+\n+        # Package with 2 parents and 1 child. One parent pays for itself using modified fees, and\n+        # another has 0 fees but is bumped by child.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093079863",
      "id" : 1093079863,
      "line" : 91,
      "node_id" : "PRRC_kwDOABII585BJxM3",
      "original_commit_id" : "490f3c1a8eabac737e196e7fffd7765aa941f65a",
      "original_line" : 91,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/mempool_limit.py",
      "position" : 42,
      "pull_request_review_id" : 1278905383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093079863/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T11:19:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093079863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093086983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093086983"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fce52c8004744b8af96ff07b419db21979348330\r\nWhy using modifiedFees in this check instead of regular fees?",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T11:18:13Z",
      "diff_hunk" : "@@ -819,9 +819,18 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         return state.Invalid(TxValidationResult::TX_NOT_STANDARD, \"bad-txns-too-many-sigops\",\n                 strprintf(\"%d\", nSigOpsCost));\n \n-    // No individual transactions are allowed below the min relay feerate and mempool min feerate except from\n-    // disconnected blocks and transactions in a package. Package transactions will be checked using\n-    // package feerate later.\n+    // No individual transactions are allowed below the min relay feerate except from disconnected blocks.\n+    // This requirement, unlike CheckFeeRate, cannot be bypassed using m_package_feerates because,\n+    // while a tx could be package CPFP'd when entering the mempool, we do not have a DoS-resistant\n+    // method of ensuring the tx remains bumped. For example, the fee-bumping child could disappear\n+    // due to a replacement.\n+    if (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093086983",
      "id" : 1093086983,
      "line" : 827,
      "node_id" : "PRRC_kwDOABII585BJy8H",
      "original_commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "original_line" : 827,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 1278905383,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093086983/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T11:19:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093086983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093090124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093090124"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We always use modified fees for these checks, otherwise we're breaking the `prioritisetransaction` RPC's expected behavior",
      "commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "created_at" : "2023-02-01T11:21:25Z",
      "diff_hunk" : "@@ -819,9 +819,18 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         return state.Invalid(TxValidationResult::TX_NOT_STANDARD, \"bad-txns-too-many-sigops\",\n                 strprintf(\"%d\", nSigOpsCost));\n \n-    // No individual transactions are allowed below the min relay feerate and mempool min feerate except from\n-    // disconnected blocks and transactions in a package. Package transactions will be checked using\n-    // package feerate later.\n+    // No individual transactions are allowed below the min relay feerate except from disconnected blocks.\n+    // This requirement, unlike CheckFeeRate, cannot be bypassed using m_package_feerates because,\n+    // while a tx could be package CPFP'd when entering the mempool, we do not have a DoS-resistant\n+    // method of ensuring the tx remains bumped. For example, the fee-bumping child could disappear\n+    // due to a replacement.\n+    if (!bypass_limits && ws.m_modified_fees < m_pool.m_min_relay_feerate.GetFee(ws.m_vsize)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093090124",
      "id" : 1093090124,
      "in_reply_to_id" : 1093086983,
      "line" : 827,
      "node_id" : "PRRC_kwDOABII585BJztM",
      "original_commit_id" : "fce52c8004744b8af96ff07b419db21979348330",
      "original_line" : 827,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 1278920859,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093090124/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T11:21:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093090124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093218247"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093218247"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks, I've updated this comment along with a few others.",
      "commit_id" : "f636daf4c89da7b2b72d05e73de1ca86449a36a6",
      "created_at" : "2023-02-01T13:25:16Z",
      "diff_hunk" : "@@ -76,6 +83,44 @@ def run_test(self):\n         self.log.info('Create a mempool tx that will not pass mempoolminfee')\n         assert_raises_rpc_error(-26, \"mempool min fee not met\", miniwallet.send_self_transfer, from_node=node, fee_rate=relayfee)\n \n+        self.log.info(\"Check that submitpackage allows cpfp of a parent below mempool min feerate\")\n+        node = self.nodes[0]\n+        peer = node.add_p2p_connection(P2PTxInvStore())\n+\n+        # Package with 2 parents and 1 child. One parent pays for itself using modified fees, and\n+        # another has 0 fees but is bumped by child.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933#discussion_r1093218247",
      "id" : 1093218247,
      "in_reply_to_id" : 1093079863,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585BKS_H",
      "original_commit_id" : "490f3c1a8eabac737e196e7fffd7765aa941f65a",
      "original_line" : 91,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 1279110150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093218247/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-01T13:25:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1093218247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   }
]
