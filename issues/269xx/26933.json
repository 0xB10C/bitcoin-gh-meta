{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "This is part of #25038, which relaxes this for v3 transactions. Note that this still allows packages to bump transactions that are below the dynamic mempool minimum feerate, which means this still solves the \"mempool is congested and my presigned 1sat/vB tx is screwed\" problem for all transactions including non-v3.\r\n\r\nIn general, we try to limit the amount of mempool traversal (i.e. number of entries we need to visit/update/remove) for each operation. This is partially accomplished through various limits (max 25 ancestors, max descendants, max 100 entries in a replacement), but they can still be quite permissive.\r\n\r\nOn master, the package policy (only accessible through regtest-only RPC submitpackage) allows 0-fee (or otherwise below min relay feerate) transactions if they are bumped by a child. However, with default package limits, we don't yet have a DoS-resistant way of ensuring these transactions remain bumped throughout their tenancy in the mempool. For example (discussed on irc [here](https://gnusha.org/bitcoin-core-dev/2022-12-16.log)):\r\n- The mempool contains 100 \"child\" transactions, each spending from 24 unconfirmed parent transactions and 1 confirmed UTXO. The parents are all 0sat/vB and CPFP'd. If the children are evicted, and the parents no longer bumped, they will be below min relay feerate.\r\n - A replacement transaction spends only confirmed UTXOs. This means it has 100 directly conflicting transactions (the 100 children). There are no descendants, so there are 100 original transactions in total. But accepting the replacement transaction actually invalidates not 100, but 100 * 25 = 2500 mempool transactions (!).\r\n - We can remove these transactions in `TrimToSize()`, but 2500 is not within our acceptable limits. We can try to detect these during the replacement, but this process can also result in too much mempool traversal (what if the 0-fee ancestor is bumped by something else?) and enforcing some kind of ancestor limit would make the RBF rules even more cumbersome. We cannot keep such transactions in the mempool, (even though they'll be removed \"eventually\" through expiry or if mempool reaches capacity), as somebody could attach barely-above-min-relay-feerate descendants and they essentially all get free relay.\r\n\r\nFor now, disallow acceptance of transactions below the min relay feerate, including in package acceptance.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933/comments",
   "created_at" : "2023-01-20T13:33:27Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933",
   "id" : 1550856696,
   "labels" : [
      {
         "color" : "fef2c0",
         "default" : false,
         "description" : null,
         "id" : 164208572,
         "name" : "Mempool",
         "node_id" : "MDU6TGFiZWwxNjQyMDg1NzI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585INr0Q",
   "number" : 26933,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/26933.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26933",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/26933.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26933"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933/timeline",
   "title" : "mempool: disallow txns under min relay fee, even in packages",
   "updated_at" : "2023-01-20T14:35:45Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26933",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
      "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
      "followers_url" : "https://api.github.com/users/glozow/followers",
      "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/glozow",
      "id" : 25183001,
      "login" : "glozow",
      "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
      "organizations_url" : "https://api.github.com/users/glozow/orgs",
      "received_events_url" : "https://api.github.com/users/glozow/received_events",
      "repos_url" : "https://api.github.com/users/glozow/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/glozow"
   }
}
