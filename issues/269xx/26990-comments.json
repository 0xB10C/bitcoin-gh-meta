[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [hernanmarino](https://github.com/bitcoin/bitcoin/pull/26990#pullrequestreview-1320240993) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-01-30T05:16:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26990#issuecomment-1408013154",
      "id" : 1408013154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26990",
      "node_id" : "IC_kwDOABII585T7JNi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1408013154/reactions"
      },
      "updated_at" : "2023-03-02T14:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1408013154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks @kouloumos for taking the time to review this PR, I agree with your comments and I appreciate you added more context into it so people could bring other thoughts.\r\n\r\nI just wanted to make a small change first and specifically to the `-generate` code block but since, as you said, the confusion applies to any other \"client-side command\" or `[options]` I could move the validation a bit up in the code around the line [where the args variable is set](https://github.com/bitcoin/bitcoin/blob/b5868f4b1f884e8d6612f34ca4005fe3a992053d/src/bitcoin-cli.cpp#L1122), which contains  the [params] of the command (or the args for -generate).\r\n\r\nI got another commit that I could publish that changes ArgsManager in order to accept, for example, `-rpcwallet` as an independent command or `[option]` after `-generate` so `bitcoin-cli -generate 3 4 -rpcwallet=X` works (so order won't matter anymore) and I got something similar to the validation you mentioned in your last sentence, but this approach would change the behaviour of the current parsing and even if we can affirm that's invalid or, as today, it \"ignores\" any [params] with \"-\" (slash) at the front when it's specified after a non-optional argument, I'm not sure (yet) about all the implications this could bring to all the components where the ArgsManager is being used.",
      "created_at" : "2023-01-31T20:44:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26990#issuecomment-1411046166",
      "id" : 1411046166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26990",
      "node_id" : "IC_kwDOABII585UGtsW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411046166/reactions"
      },
      "updated_at" : "2023-01-31T20:57:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1411046166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@jonatack thanks for reviewing; as you and @kouloumos recommended and as I commented [here](https://github.com/bitcoin/bitcoin/pull/26990#issuecomment-1411046166), I've made the validation more generic for any cli-command moving it up in the code.\r\nAs part of this validation, I've added 3 more checks that were not verified before:\r\n- duplication of cli-command (at the moment you can specify -rpcwallet many times, only the last one will be taken into account,\r\n- only 1 cli-command can run at a time (as @kouloumos mentioned [here](https://github.com/bitcoin/bitcoin/pull/26990#pullrequestreview-1274911604)),\r\n- no params starting with slash \"-\" will be accepted after a cli-command (this is the case for `bitcoin-cli -generate 3 -rpcwallet=xyz`)\r\n\r\nI've also incorporated @jonatack's recommendation on the error description for `WALLET_NOT_SPECIFIED`.\r\n",
      "created_at" : "2023-02-27T19:19:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26990#issuecomment-1446919139",
      "id" : 1446919139,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26990",
      "node_id" : "IC_kwDOABII585WPjvj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1446919139/reactions"
      },
      "updated_at" : "2023-02-27T19:19:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1446919139",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> The only thing i suggest changing is giving a more descriptive error on the following situation :\r\n> ```\r\n> $ bitcoin-cli -regtest -generate 1 -rpcwallet=tst2\r\n> error: Error: this is not a valid cli-command argument \"-rpcwallet=tst2\", if that is a valid option you might try passing it before -generate\r\n> ```\r\n\r\nThanks, I agree with it, updated it.",
      "created_at" : "2023-03-02T14:23:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26990#issuecomment-1451948439",
      "id" : 1451948439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26990",
      "node_id" : "IC_kwDOABII585WivmX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1451948439/reactions"
      },
      "updated_at" : "2023-03-02T14:23:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1451948439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/110166421?v=4",
         "events_url" : "https://api.github.com/users/pablomartin4btc/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pablomartin4btc/followers",
         "following_url" : "https://api.github.com/users/pablomartin4btc/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pablomartin4btc/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pablomartin4btc",
         "id" : 110166421,
         "login" : "pablomartin4btc",
         "node_id" : "U_kgDOBpEBlQ",
         "organizations_url" : "https://api.github.com/users/pablomartin4btc/orgs",
         "received_events_url" : "https://api.github.com/users/pablomartin4btc/received_events",
         "repos_url" : "https://api.github.com/users/pablomartin4btc/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pablomartin4btc/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pablomartin4btc/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pablomartin4btc"
      }
   }
]
