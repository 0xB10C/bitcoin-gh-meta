[
   {
      "body" : "I think you missed something. There are three directories that matter:\r\n* $DATADIR/blocks (raw blocks)\r\n* $DATADIR/blocks/index (LevelDB database with information about raw blocks)\r\n* $DATADIR/chainstate (LevelDB database that holds the UTXO set)\r\n\r\nThe first is high-bandwidth, low IO. The second has hardly any activity at all. The third is where all activity happens, and is critical for performance.\r\n\r\nYou should not separate the blocks from the blocks/index directory, as things may get ugly if they're out of sync. You can however put the chainstate on a faster/smaller device.",
      "created_at" : "2017-07-25T00:53:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10922#issuecomment-317596359",
      "id" : 317596359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10922",
      "updated_at" : "2017-07-25T00:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317596359",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Hi @sipa, thank you very much for the prompt follow up.  Yes, the \"chainstate\" (in addition to \"index\") LevelDB files need to stay on the internal disk for reasonable synchronization performance.  The \"file-partition.md\" notes I made should describe:\r\n\r\n- Installing $datadir to local internal disk (includig \"chainstate\").\r\n- Start/stop bitcoind (though maybe this isn't necessary).\r\n- Move the \"index\" files up one folder level. \r\n- Move the \"blocks\" folder off the internal disk.\r\n- Go to the new external \"blocks\" folder and soft-link back to the new \"index\" location.\r\n- Go to the original internal drive \"data\" location and link the now external \"blocks\" folder.\r\n\r\nHere, \"chainstate\" remains on the internal disk as never needs to move.\r\n\r\nAgain these \"file-partition.md\" notes are not the direct route I took, but (if correct) might save the next person considerable delay in initial sync.\r\n\r\nTo your point even though these low-capacity/high-IOfrequency LevelDb and high-capacity/low-IOfrequency blockchain files are physically separated on separate disks, they are kept in sync via the soft links created.\r\n\r\n_Maybe ultimately a more natural configuration of these files would be to have the \"index\" folder up a level to start with._  That's what makes moving these folders confusing in my opinion.\r\n\r\nThank you again very much for the prompt feedback, very flattering, thanks.",
      "created_at" : "2017-07-25T01:14:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10922#issuecomment-317599566",
      "id" : 317599566,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10922",
      "updated_at" : "2017-07-25T01:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317599566",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/29764807?v=4",
         "events_url" : "https://api.github.com/users/jimhashhq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimhashhq/followers",
         "following_url" : "https://api.github.com/users/jimhashhq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimhashhq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimhashhq",
         "id" : 29764807,
         "login" : "jimhashhq",
         "organizations_url" : "https://api.github.com/users/jimhashhq/orgs",
         "received_events_url" : "https://api.github.com/users/jimhashhq/received_events",
         "repos_url" : "https://api.github.com/users/jimhashhq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimhashhq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimhashhq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimhashhq"
      }
   }
]
