[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14419 ([tests] Remove rpc_zmq.py by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-15T12:46:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-421565005",
      "id" : 421565005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTU2NTAwNQ==",
      "updated_at" : "2018-10-07T02:44:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421565005",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK",
      "created_at" : "2018-09-16T07:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-421713958",
      "id" : 421713958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTcxMzk1OA==",
      "updated_at" : "2018-09-16T07:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421713958",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217916417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217916417"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: Comment doesn't seem to match the assert. Could just add...\r\n```\r\nassert_equal(len(self.nodes[0].listunspent()), 1)\r\n```",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T14:36:09Z",
      "diff_hunk" : "@@ -0,0 +1,80 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test relay of transaction chains.\n+\n+Ensure that if bitcoind announces a transaction it will also respond\n+to getdata requests for parents of the transaction.\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+    disconnect_nodes,\n+    sync_blocks\n+)\n+\n+class ChainRelayTest(BitcoinTestFramework):\n+\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        self.log.info(\"Generating one utxo for node0\")\n+\n+        self.nodes[0].generate(1)\n+        self.sync_all()\n+        self.nodes[1].generate(100)\n+        self.sync_all()\n+\n+        # Node0 should now have 1 utxo.\n+        assert self.nodes[0].getbalance() > 10 # Should be 50, but doesn't matter",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217916417",
      "id" : 217916417,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkxNjQxNw==",
      "original_commit_id" : "ba6c0a16868163e0c42927e7593b3596037df520",
      "original_position" : 37,
      "path" : "test/functional/p2p_txchain_relay.py",
      "position" : null,
      "pull_request_review_id" : 155747119,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217916417",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14220652?v=4",
         "events_url" : "https://api.github.com/users/conscott/events{/privacy}",
         "followers_url" : "https://api.github.com/users/conscott/followers",
         "following_url" : "https://api.github.com/users/conscott/following{/other_user}",
         "gists_url" : "https://api.github.com/users/conscott/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/conscott",
         "id" : 14220652,
         "login" : "conscott",
         "node_id" : "MDQ6VXNlcjE0MjIwNjUy",
         "organizations_url" : "https://api.github.com/users/conscott/orgs",
         "received_events_url" : "https://api.github.com/users/conscott/received_events",
         "repos_url" : "https://api.github.com/users/conscott/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/conscott/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/conscott/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/conscott"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK b723d95fa08c8058f4ab32cdd5329b4df3aac036",
      "created_at" : "2018-09-16T15:17:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-421781112",
      "id" : 421781112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMTc4MTExMg==",
      "updated_at" : "2018-09-16T15:17:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/421781112",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/14220652?v=4",
         "events_url" : "https://api.github.com/users/conscott/events{/privacy}",
         "followers_url" : "https://api.github.com/users/conscott/followers",
         "following_url" : "https://api.github.com/users/conscott/following{/other_user}",
         "gists_url" : "https://api.github.com/users/conscott/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/conscott",
         "id" : 14220652,
         "login" : "conscott",
         "node_id" : "MDQ6VXNlcjE0MjIwNjUy",
         "organizations_url" : "https://api.github.com/users/conscott/orgs",
         "received_events_url" : "https://api.github.com/users/conscott/received_events",
         "repos_url" : "https://api.github.com/users/conscott/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/conscott/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/conscott/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/conscott"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927370"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit \"Don't relay tx data to peers until after tx announcement\"\r\n\r\nDoesn't seem quite obvious that `std::set` is worst, why did you picked `std::unordered_set`?",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T20:50:38Z",
      "diff_hunk" : "@@ -153,7 +154,12 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}\n+        CTransactionRef m_txref;\n+        std::unordered_set<NodeId> m_node_map;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927370",
      "id" : 217927370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkyNzM3MA==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 16,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 155757673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927370",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927456"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit \"Don't relay tx data to peers until after tx announcement\"\r\n\r\nFrom developer notes:\r\n```\r\n- By default, declare single-argument constructors `explicit`.\r\n\r\n  - *Rationale*: This is a precaution to avoid unintended conversions that might\r\n    arise when single-argument constructors are used as implicit conversion\r\n    functions.\r\n```",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T20:54:16Z",
      "diff_hunk" : "@@ -153,7 +154,12 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927456",
      "id" : 217927456,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkyNzQ1Ng==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 14,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 155757673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927456",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927481"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927481"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit \"Don't relay tx data to peers until after tx announcement\"\r\n\r\n~~nit, could use `emplace(k,v)` since you are touching this line.~~\r\n\r\nThis is moved and updated in the next commit.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T20:55:10Z",
      "diff_hunk" : "@@ -3610,7 +3616,10 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n                             vRelayExpiration.pop_front();\n                         }\n \n-                        auto ret = mapRelay.insert(std::make_pair(hash, std::move(txinfo.tx)));\n+                        auto ret = mapRelay.insert(std::make_pair(hash, RelayEntry(std::move(txinfo.tx))));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927481",
      "id" : 217927481,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkyNzQ4MQ==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 38,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 155757673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927481",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit \"Don't relay tx data to peers until after tx announcement\"\r\n\r\nnit, s/_map/_set?\r\n",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T20:55:31Z",
      "diff_hunk" : "@@ -153,7 +154,12 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}\n+        CTransactionRef m_txref;\n+        std::unordered_set<NodeId> m_node_map;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927487",
      "id" : 217927487,
      "in_reply_to_id" : 217927370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkyNzQ4Nw==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 16,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 155757673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927487",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927530"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Commit \"Add ancestors of announced transactions to mapRelay\"\r\n\r\nnit, could drop `std::make_pair`.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-16T20:57:28Z",
      "diff_hunk" : "@@ -164,6 +164,18 @@ namespace {\n     /** Expiration-time ordered list of (expire time, relay map entry) pairs. */\n     std::deque<std::pair<int64_t, MapRelay::iterator>> vRelayExpiration GUARDED_BY(cs_main);\n \n+    void AddToMapRelay(CTransactionRef &&txref, NodeId peer, int64_t time_now) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+    {\n+        const uint256& hash = txref->GetHash();\n+        auto ret = mapRelay.emplace(std::make_pair(hash, RelayEntry(std::move(txref))));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r217927530",
      "id" : 217927530,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNzkyNzUzMA==",
      "original_commit_id" : "3c227a6bf97076da449cb956c894b3e0b01e6735",
      "original_position" : 7,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 155757673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/217927530",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK. I wrote a test in  #14240 that should only pass with your first commit.",
      "created_at" : "2018-09-18T20:40:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-422545832",
      "id" : 422545832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMjU0NTgzMg==",
      "updated_at" : "2018-09-18T20:40:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/422545832",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r219679799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219679799"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n2018-09-22 21:02:10 cpplint(pr=14220): src/net_processing.cpp:158:  Single-parameter constructors should be marked explicit.  [runtime/explicit] [5]\r\n```",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-22T19:04:41Z",
      "diff_hunk" : "@@ -153,11 +154,28 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r219679799",
      "id" : 219679799,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY3OTc5OQ==",
      "original_commit_id" : "b723d95fa08c8058f4ab32cdd5329b4df3aac036",
      "original_position" : 14,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 157919312,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219679799",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sdaftuar Do you feel like splitting this up? I believe one of the fixes is a bugfix, the other a feature.",
      "created_at" : "2018-09-24T19:29:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424096098",
      "id" : 424096098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDA5NjA5OA==",
      "updated_at" : "2018-09-24T19:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424096098",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r219968248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219968248"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Constant time lookup seemed better to me than log_n lookup but I dunno, is there a reason you think std::set is better here?  I suspect it doesn't really matter.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-24T19:56:56Z",
      "diff_hunk" : "@@ -153,7 +154,12 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}\n+        CTransactionRef m_txref;\n+        std::unordered_set<NodeId> m_node_map;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r219968248",
      "id" : 219968248,
      "in_reply_to_id" : 217927370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTk2ODI0OA==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 16,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 158269506,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219968248",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke This PR is now just the bugfix along with the test you wrote (thanks!), I'll separately PR the new feature.\r\n\r\nI believe I've also incorporated all the PR comments that are relevant for the bugfix commit.",
      "created_at" : "2018-09-25T12:06:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424316233",
      "id" : 424316233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDMxNjIzMw==",
      "updated_at" : "2018-09-25T12:06:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424316233",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 736462c26de7a267bdf75c1f86bf12932c604b3d (I wrote the test, that fails without this patch)",
      "created_at" : "2018-09-25T17:51:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424439341",
      "id" : 424439341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDQzOTM0MQ==",
      "updated_at" : "2018-09-25T17:51:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424439341",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is this for backport?",
      "created_at" : "2018-09-25T17:56:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424441006",
      "id" : 424441006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDQ0MTAwNg==",
      "updated_at" : "2018-09-25T17:56:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424441006",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think we need to backport this (in particular I wouldn't want to interfere with the 0.17.0 release), as the bug has been present for so long, there's no urgency.  And I tend to think that changes like this to the p2p behavior are better to sit in master for a while before appearing in a release anyway.\r\n\r\nAny idea what is going on with the appveyor test run?",
      "created_at" : "2018-09-25T18:07:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424444818",
      "id" : 424444818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDQ0NDgxOA==",
      "updated_at" : "2018-09-25T18:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424444818",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I guess it's worth pointing out as well, that this change without the improvement in #14318 may well worsen relay of transactions that are part of chains a bit.  For instance, if a peer of ours asks for the parent of a transaction we announced, then as long as that parent is in mapRelay -- ie it was recently announced -- then we'd provide it, even if that peer wasn't connected to us at the time the parent transaction was announced.\r\n\r\nI have no idea how common that sort of thing is, but rather than spend too much time wondering about it, I'd say it's better to not backport this change (and arguably I shouldn't have unbundled this PR from #14318).",
      "created_at" : "2018-09-25T18:42:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424456193",
      "id" : 424456193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDQ1NjE5Mw==",
      "updated_at" : "2018-09-25T18:42:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424456193",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/14220/commits/736462c26de7a267bdf75c1f86bf12932c604b3d\r\n\r\nIn plain English, I'd characterize this change as \"don't respond to a GETDATA(txn) for a peer who you haven't previously sent INV(txn).\"",
      "created_at" : "2018-09-26T19:13:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-424836172",
      "id" : 424836172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDgzNjE3Mg==",
      "updated_at" : "2018-09-26T19:13:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424836172",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220690123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220690123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: distribuiton (spelling)",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-26T19:16:12Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220690123",
      "id" : 220690123,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDY5MDEyMw==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 50,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : null,
      "pull_request_review_id" : 159156936,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220690123",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220690330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220690330"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This test, being stochastic, looks like it'll fail spuriously. I guess it if happens too often, we can up `REPEATS` or something.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-26T19:16:55Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,\n+        #   with lambda_out = 1 / (INVENTORY_BROADCAST_INTERVAL >> 1) = 1/2\n+        #\n+        # Due to measurement delays, the actual monte-carlo leak is a bit\n+        # higher. Assume a total delay of 0.6 s (Includes network delays and\n+        # rpc delay to poll the raw mempool)\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound + 0.6 )           =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x + 0.6)             dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * (x+.6))) dx =\n+        # 0.366485\n+        EXPECTED_MEASURED_LEAK = .366485\n+\n+        REPEATS = 100\n+        measured_leak = 0\n+        self.log.info('Start simulation for {} repeats'.format(REPEATS))\n+        for i in range(REPEATS):\n+            self.log.debug('Run {}/{}'.format(i, REPEATS))\n+            txid = gen_node.sendtoaddress(gen_node.getnewaddress(), 0.033)\n+            want_tx = msg_getdata()\n+            want_tx.inv.append(CInv(t=1, h=int(txid, 16)))\n+\n+            wait_until(lambda: txid in outbound_peer.getrawmempool(), lock=mininode_lock)\n+            inbound_peer.send_message(want_tx)\n+            inbound_peer.sync_with_ping()\n+\n+            if inbound_peer.last_message.get('notfound'):\n+                assert_equal(inbound_peer.last_message['notfound'].vec[0].hash, int(txid, 16))\n+                inbound_peer.last_message.pop('notfound')\n+            else:\n+                measured_leak += 1\n+\n+        measured_leak /= REPEATS\n+        self.log.info('Measured leak of {}'.format(measured_leak))\n+\n+        assert_greater_than(EXPECTED_MEASURED_LEAK, measured_leak)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220690330",
      "id" : 220690330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDY5MDMzMA==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 85,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : 89,
      "pull_request_review_id" : 159156936,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220690330",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220694414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220694414"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Someone could run it for 1000 times and see if it fails at all\r\n\r\n```\r\n./test/functional/test_runner.py -j 15 $(for i in {0..999}; do echo p2p_leak_tx ; done)",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-26T19:30:31Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,\n+        #   with lambda_out = 1 / (INVENTORY_BROADCAST_INTERVAL >> 1) = 1/2\n+        #\n+        # Due to measurement delays, the actual monte-carlo leak is a bit\n+        # higher. Assume a total delay of 0.6 s (Includes network delays and\n+        # rpc delay to poll the raw mempool)\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound + 0.6 )           =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x + 0.6)             dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * (x+.6))) dx =\n+        # 0.366485\n+        EXPECTED_MEASURED_LEAK = .366485\n+\n+        REPEATS = 100\n+        measured_leak = 0\n+        self.log.info('Start simulation for {} repeats'.format(REPEATS))\n+        for i in range(REPEATS):\n+            self.log.debug('Run {}/{}'.format(i, REPEATS))\n+            txid = gen_node.sendtoaddress(gen_node.getnewaddress(), 0.033)\n+            want_tx = msg_getdata()\n+            want_tx.inv.append(CInv(t=1, h=int(txid, 16)))\n+\n+            wait_until(lambda: txid in outbound_peer.getrawmempool(), lock=mininode_lock)\n+            inbound_peer.send_message(want_tx)\n+            inbound_peer.sync_with_ping()\n+\n+            if inbound_peer.last_message.get('notfound'):\n+                assert_equal(inbound_peer.last_message['notfound'].vec[0].hash, int(txid, 16))\n+                inbound_peer.last_message.pop('notfound')\n+            else:\n+                measured_leak += 1\n+\n+        measured_leak /= REPEATS\n+        self.log.info('Measured leak of {}'.format(measured_leak))\n+\n+        assert_greater_than(EXPECTED_MEASURED_LEAK, measured_leak)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220694414",
      "id" : 220694414,
      "in_reply_to_id" : 220690330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDY5NDQxNA==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 85,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : 89,
      "pull_request_review_id" : 159162303,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220694414",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220710702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220710702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I dunno too. Considering the size is small I agree it doesn't matter.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-26T20:25:05Z",
      "diff_hunk" : "@@ -153,7 +154,12 @@ namespace {\n     std::atomic<int64_t> g_last_tip_update(0);\n \n     /** Relay map */\n-    typedef std::map<uint256, CTransactionRef> MapRelay;\n+    struct RelayEntry {\n+        RelayEntry(CTransactionRef &&tx) : m_txref(tx) {}\n+        CTransactionRef m_txref;\n+        std::unordered_set<NodeId> m_node_map;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r220710702",
      "id" : 220710702,
      "in_reply_to_id" : 217927370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDcxMDcwMg==",
      "original_commit_id" : "68657b8ae32265d724acdc919784b63030948b8d",
      "original_position" : 16,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 159182753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220710702",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-09-27T15:34:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-425138689",
      "id" : 425138689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTEzODY4OQ==",
      "updated_at" : "2018-09-27T15:34:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425138689",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221013286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221013286"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like it fails about 9% of the time for me. :(",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-27T17:36:49Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,\n+        #   with lambda_out = 1 / (INVENTORY_BROADCAST_INTERVAL >> 1) = 1/2\n+        #\n+        # Due to measurement delays, the actual monte-carlo leak is a bit\n+        # higher. Assume a total delay of 0.6 s (Includes network delays and\n+        # rpc delay to poll the raw mempool)\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound + 0.6 )           =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x + 0.6)             dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * (x+.6))) dx =\n+        # 0.366485\n+        EXPECTED_MEASURED_LEAK = .366485\n+\n+        REPEATS = 100\n+        measured_leak = 0\n+        self.log.info('Start simulation for {} repeats'.format(REPEATS))\n+        for i in range(REPEATS):\n+            self.log.debug('Run {}/{}'.format(i, REPEATS))\n+            txid = gen_node.sendtoaddress(gen_node.getnewaddress(), 0.033)\n+            want_tx = msg_getdata()\n+            want_tx.inv.append(CInv(t=1, h=int(txid, 16)))\n+\n+            wait_until(lambda: txid in outbound_peer.getrawmempool(), lock=mininode_lock)\n+            inbound_peer.send_message(want_tx)\n+            inbound_peer.sync_with_ping()\n+\n+            if inbound_peer.last_message.get('notfound'):\n+                assert_equal(inbound_peer.last_message['notfound'].vec[0].hash, int(txid, 16))\n+                inbound_peer.last_message.pop('notfound')\n+            else:\n+                measured_leak += 1\n+\n+        measured_leak /= REPEATS\n+        self.log.info('Measured leak of {}'.format(measured_leak))\n+\n+        assert_greater_than(EXPECTED_MEASURED_LEAK, measured_leak)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221013286",
      "id" : 221013286,
      "in_reply_to_id" : 220690330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTAxMzI4Ng==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 85,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : 89,
      "pull_request_review_id" : 159560141,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221013286",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, but I think we need to adjust the test so that it has a drastically lower error rate, or drop it from this PR.  @MarcoFalke thoughts?",
      "created_at" : "2018-09-27T18:04:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-425188679",
      "id" : 425188679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTE4ODY3OQ==",
      "updated_at" : "2018-09-27T18:04:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425188679",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221118923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221118923"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: unrelated change?",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-28T01:09:11Z",
      "diff_hunk" : "@@ -1232,7 +1232,27 @@ def __repr__(self):\n         return \"msg_mempool()\"\n \n \n-class msg_sendheaders:\n+class msg_notfound():\n+    __slots__ = (\"vec\")\n+    command = b\"notfound\"\n+\n+    def __init__(self, vec=None):\n+        if vec is None:\n+            self.vec = []\n+        else:\n+            self.vec = vec\n+\n+    def deserialize(self, f):\n+        self.vec = deser_vector(f, CInv)\n+\n+    def serialize(self):\n+        return ser_vector(self.vec)\n+\n+    def __repr__(self):\n+        return \"msg_notfound(vec=%s)\" % (repr(self.vec))\n+\n+\n+class msg_sendheaders():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221118923",
      "id" : 221118923,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTExODkyMw==",
      "original_commit_id" : "47bf6e9622101181ca6d0ec60985fd683c17704c",
      "original_position" : 25,
      "path" : "test/functional/test_framework/messages.py",
      "position" : null,
      "pull_request_review_id" : 159692379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221118923",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221133435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221133435"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry for that. I haven't actually run the test substantially after writing. I seems you could set `        EXPECTED_MEASURED_LEAK = .42` or so without making the test useless. (On master the leak is always 1.00, so setting the expected measured leak to any number less than 1 should be fine)\r\n\r\n![figure_1](https://user-images.githubusercontent.com/6399679/46206730-f3070d80-c2f2-11e8-8bb5-1e51e6870619.png)\r\n(measured leak on x-axis)\r\n",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-28T03:28:01Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,\n+        #   with lambda_out = 1 / (INVENTORY_BROADCAST_INTERVAL >> 1) = 1/2\n+        #\n+        # Due to measurement delays, the actual monte-carlo leak is a bit\n+        # higher. Assume a total delay of 0.6 s (Includes network delays and\n+        # rpc delay to poll the raw mempool)\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound + 0.6 )           =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x + 0.6)             dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * (x+.6))) dx =\n+        # 0.366485\n+        EXPECTED_MEASURED_LEAK = .366485\n+\n+        REPEATS = 100\n+        measured_leak = 0\n+        self.log.info('Start simulation for {} repeats'.format(REPEATS))\n+        for i in range(REPEATS):\n+            self.log.debug('Run {}/{}'.format(i, REPEATS))\n+            txid = gen_node.sendtoaddress(gen_node.getnewaddress(), 0.033)\n+            want_tx = msg_getdata()\n+            want_tx.inv.append(CInv(t=1, h=int(txid, 16)))\n+\n+            wait_until(lambda: txid in outbound_peer.getrawmempool(), lock=mininode_lock)\n+            inbound_peer.send_message(want_tx)\n+            inbound_peer.sync_with_ping()\n+\n+            if inbound_peer.last_message.get('notfound'):\n+                assert_equal(inbound_peer.last_message['notfound'].vec[0].hash, int(txid, 16))\n+                inbound_peer.last_message.pop('notfound')\n+            else:\n+                measured_leak += 1\n+\n+        measured_leak /= REPEATS\n+        self.log.info('Measured leak of {}'.format(measured_leak))\n+\n+        assert_greater_than(EXPECTED_MEASURED_LEAK, measured_leak)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221133435",
      "id" : 221133435,
      "in_reply_to_id" : 220690330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTEzMzQzNQ==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 85,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : 89,
      "pull_request_review_id" : 159692379,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221133435",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--32850dd3fdea838b4049e64f46995ea2-->\n| Coverage  | Change ([pull 14220](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/14220/total.coverage/index.html)) | Reference ([master](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/master/total.coverage/index.html))   |\n|-----------|-------------------------|--------------------|\n| Lines     | +0.0094 %            | 87.0361 %        |\n| Functions | -0.0130 %            | 84.1130 %        |\n| Branches  | +0.0047 %            | 51.5451 %        |\n",
      "created_at" : "2018-09-28T10:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-425398442",
      "id" : 425398442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTM5ODQ0Mg==",
      "updated_at" : "2018-09-28T10:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425398442",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221381012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221381012"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I bumped it up to 0.45, and it failed once in 1000 runs, so i bumped it up to 0.50 and ran it 5000 times with no failures.  I have not really looked at the test or analyzed the statistics at all to verify that this makes sense.",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-28T21:04:03Z",
      "diff_hunk" : "@@ -0,0 +1,89 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test that we don't leak txs to inbound peers that we haven't yet announced to\"\"\"\n+\n+from test_framework.messages import msg_getdata, CInv\n+from test_framework.mininode import mininode_lock, P2PDataStore\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_greater_than,\n+    wait_until,\n+)\n+\n+\n+class P2PLeakTxTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        gen_node = self.nodes[0]  # The block and tx generating node\n+        gen_node.generate(1)\n+        self.sync_all()\n+\n+        inbound_peer = self.nodes[0].add_p2p_connection(P2PDataStore())  # An \"attacking\" inbound peer\n+        outbound_peer = self.nodes[1]  # Our outbound peer\n+\n+        # In an adversiarial setting we can generally assume that inbound peers\n+        # are more likely to spy on us than outbound peers. Thus, on average,\n+        # we announce transactions first to outbound peers, then to (all)\n+        # inbound peers. Inbound peers must not be able to request the\n+        # transaction they haven't yet received the announcement for it.\n+        #\n+        # With only one outbound peer, we expect that a tx is first announced\n+        # to (all) inbound peers (and thus present a potential leak) in 28.5% of\n+        # the cases.\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound )                 =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x)                   dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * x)) dx =\n+        # 0.285714\n+        #\n+        # Where,\n+        # * f_in is the pdf of the exponential distribution for inbound peers,\n+        #   with lambda_in = 1 / INVENTORY_BROADCAST_INTERVAL = 1/5\n+        # * F_out is the cdf of the expon. distribuiton for outbound peers,\n+        #   with lambda_out = 1 / (INVENTORY_BROADCAST_INTERVAL >> 1) = 1/2\n+        #\n+        # Due to measurement delays, the actual monte-carlo leak is a bit\n+        # higher. Assume a total delay of 0.6 s (Includes network delays and\n+        # rpc delay to poll the raw mempool)\n+        #\n+        # Probability( time_ann_inbound < time_ann_outbound + 0.6 )           =\n+        # Ã¢ÂÂ« f_in(x)                           * F_out(x + 0.6)             dx =\n+        # Ã¢ÂÂ« (lambda_in * exp(-lambda_in * x)) * (1 - exp(-lambda_out * (x+.6))) dx =\n+        # 0.366485\n+        EXPECTED_MEASURED_LEAK = .366485\n+\n+        REPEATS = 100\n+        measured_leak = 0\n+        self.log.info('Start simulation for {} repeats'.format(REPEATS))\n+        for i in range(REPEATS):\n+            self.log.debug('Run {}/{}'.format(i, REPEATS))\n+            txid = gen_node.sendtoaddress(gen_node.getnewaddress(), 0.033)\n+            want_tx = msg_getdata()\n+            want_tx.inv.append(CInv(t=1, h=int(txid, 16)))\n+\n+            wait_until(lambda: txid in outbound_peer.getrawmempool(), lock=mininode_lock)\n+            inbound_peer.send_message(want_tx)\n+            inbound_peer.sync_with_ping()\n+\n+            if inbound_peer.last_message.get('notfound'):\n+                assert_equal(inbound_peer.last_message['notfound'].vec[0].hash, int(txid, 16))\n+                inbound_peer.last_message.pop('notfound')\n+            else:\n+                measured_leak += 1\n+\n+        measured_leak /= REPEATS\n+        self.log.info('Measured leak of {}'.format(measured_leak))\n+\n+        assert_greater_than(EXPECTED_MEASURED_LEAK, measured_leak)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221381012",
      "id" : 221381012,
      "in_reply_to_id" : 220690330,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTM4MTAxMg==",
      "original_commit_id" : "736462c26de7a267bdf75c1f86bf12932c604b3d",
      "original_position" : 85,
      "path" : "test/functional/p2p_leak_tx.py",
      "position" : 89,
      "pull_request_review_id" : 160023846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:04:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221381012",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221381060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221381060"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-09-28T21:04:17Z",
      "diff_hunk" : "@@ -1232,7 +1232,27 @@ def __repr__(self):\n         return \"msg_mempool()\"\n \n \n-class msg_sendheaders:\n+class msg_notfound():\n+    __slots__ = (\"vec\")\n+    command = b\"notfound\"\n+\n+    def __init__(self, vec=None):\n+        if vec is None:\n+            self.vec = []\n+        else:\n+            self.vec = vec\n+\n+    def deserialize(self, f):\n+        self.vec = deser_vector(f, CInv)\n+\n+    def serialize(self):\n+        return ser_vector(self.vec)\n+\n+    def __repr__(self):\n+        return \"msg_notfound(vec=%s)\" % (repr(self.vec))\n+\n+\n+class msg_sendheaders():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#discussion_r221381060",
      "id" : 221381060,
      "in_reply_to_id" : 221118923,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMTM4MTA2MA==",
      "original_commit_id" : "47bf6e9622101181ca6d0ec60985fd683c17704c",
      "original_position" : 25,
      "path" : "test/functional/test_framework/messages.py",
      "position" : null,
      "pull_request_review_id" : 160023914,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14220",
      "updated_at" : "2018-09-28T21:04:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/221381060",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 320a85e3427685d4bed9d585c3a3c45e288d5a30",
      "created_at" : "2018-10-01T01:26:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14220#issuecomment-425768162",
      "id" : 425768162,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14220",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTc2ODE2Mg==",
      "updated_at" : "2018-10-01T01:26:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425768162",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
