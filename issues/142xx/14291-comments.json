[
   {
      "author_association" : "MEMBER",
      "body" : "After https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-423683042 decided to push this.\r\n\r\nConsider the following:\r\n```\r\n$ find wallets\r\nwallets\r\nwallets/wallet.dat\r\nwallets/db.log\r\nwallets/x1\r\nwallets/x1/wallet.dat\r\nwallets/x1/db.log\r\nwallets/x1/.walletlock\r\nwallets/x2\r\nwallets/x2/wallet.dat\r\nwallets/x2/db.log\r\nwallets/x2/.walletlock\r\nwallets/.walletlock\r\nwallets/w\r\nwallets/w/x3\r\nwallets/w/x3/wallet.dat\r\nwallets/w/x3/db.log\r\nwallets/w/x3/.walletlock\r\n```\r\n`ListWalletDir()` gives\r\n```\r\nwallet.dat\r\nx1\r\nx2\r\nw/x3\r\n```",
      "created_at" : "2018-09-21T23:33:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423696829",
      "id" : 423696829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzY5NjgyOQ==",
      "updated_at" : "2018-09-22T00:04:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423696829",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #13100 (gui: Add dynamic wallets support by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-22T03:59:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423714517",
      "id" : 423714517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzcxNDUxNw==",
      "updated_at" : "2018-09-27T02:48:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423714517",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219663917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219663917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How about moving these functions to `interfaces/wallet.cpp`. I think they don't belong here.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T07:18:01Z",
      "diff_hunk" : "@@ -218,6 +219,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219663917",
      "id" : 219663917,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2MzkxNw==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 24,
      "pull_request_review_id" : 157901916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219663917",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219664892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219664892"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should cite the source of this information (https://github.com/file/file/blob/5824af38469ec1ca9ac3ffd251e7afe9dc11e227/magic/Magdir/database#L74-L75) to give credit upstream and make this code easier to understand / debug / update in the future.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T08:05:22Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219664892",
      "id" : 219664892,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NDg5Mg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 7,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219664892",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666816"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since this is declared as bytes, the `memcmp` below will only look for little-endian btree files, even on big endian platforms. It seems like it would make more sense to look for little endian files on little-endian platforms, and big endian files on big endian platforms. Changing this to `uint32_t bdb_magic = 0x00053162` and passing `&bdb_magic` to `memcmp` should accomplish this.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T09:44:44Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666816",
      "id" : 219666816,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NjgxNg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 7,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666816",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666958"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There are a number of problems with this implementation:\r\n\r\n1) Because this opens files recursively, it will return btree paths not in the top directory which CWallet::Verify will reject: https://github.com/bitcoin/bitcoin/blob/920c090f63f4990bf0f3b3d1a6d3d8a8bcd14ba0/src/wallet/wallet.cpp#L3824-L3829\r\n2) Because is_regular_file will return true for symlinks pointing to files, this will return symlink paths which CWallet::Verify will reject\r\n3) Because recursive_directory_iterator order is unspecified, on systems where it does postorder instead of preorder traversal, this will return `<wallet>/wallet.dat` instead of `<wallet>` paths, which CWallet::Verify will reject.\r\n4) Less serious, but this returns \"wallet.dat\" instead of \"\" as the path for the top level wallet. This is inconsistent with top level wallet path returned in current `listwallets` and `getwalletinfo` rpcs in the default bitcoin configuration.\r\n5) This is less efficient than it needs to be. Instead of only opening files called `wallet.dat` in subdirectories, it will read logs and other random files which bitcoin would never open as wallets. It also reads `wallet.dat` files in subdirectories twice and then uses a `std::set` to filter out the duplicates after they are read, which is unnecessary.\r\n\r\nFollowing alternate implementation is untested, but I think would avoid these problems:\r\n\r\n```c++\r\nstd::vector<fs::path> wallets;\r\nfor (auto it = fs::recursive_directory_iterator(wallet_dir); it != end(it); ++it) {\r\n    if (it->status().type() == fs::directory_file && IsBerkeleyBtree(it->path() / \"wallet.dat\")) {\r\n        // Found a directory which contains wallet.dat btree file, add it as a wallet.\r\n        wallets.emplace_back(it->path());\r\n    } else if (it.level() == 0 && it->symlink_status().type() == fs::regular_file && IsBerkeleyBtree(it->path())) {\r\n        if (it->path() == \"wallet.dat\") {\r\n            // Found top-level wallet.dat btree file, add top level directory \"\"\r\n            // as a wallet.\r\n            wallets.emplace_back();\r\n        } else {\r\n            // Found top-level btree file not called wallet.dat. Current bitcoin\r\n            // software will never create these files but will allow them to be\r\n            // opened in a shared database environment for backwards compatibility.\r\n            // Add it to the list of available wallets.\r\n            wallets.emplace_back(it->path());\r\n        }\r\n    }\r\n}\r\nreturn wallets;\r\n```",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T09:51:55Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    const fs::path wallet_dir = GetWalletDir();\n+    std::vector<fs::path> paths;\n+    std::set<fs::path> dbs;\n+\n+    for (auto& entry : fs::recursive_directory_iterator(wallet_dir)) {\n+        const fs::path& path = entry.path();\n+        const fs::path db = fs::is_regular_file(entry) ? path : path / \"wallet.dat\";\n+\n+        std::ifstream file(db.string(), std::ios::binary);\n+        if (!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char file_bytes[4] = {0};\n+        file.read((char*)file_bytes, sizeof(file_bytes)); // Read 4 bytes of file to compare against magic\n+        if (memcmp(file_bytes, bdb_magic, sizeof(bdb_magic)) != 0) continue;\n+\n+        // avoid duplicates due to the recursive iteration\n+        if (!dbs.insert(db).second) continue;\n+\n+        paths.push_back(fs::relative(path, wallet_dir));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666958",
      "id" : 219666958,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2Njk1OA==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 28,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219667374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219667374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> How about moving these functions to interfaces/wallet.cpp. I think they don't belong here.\r\n\r\nThis is a reasonable place. These methods fit in with the existing `getWallets` and `handleLoadWallet` methods. The `Node` interface is somewhat monolithic and we could consider breaking it up in various ways. But the `Wallet` interface would be the wrong place to add these methods. `Wallet` methods operate on individual wallets, not collections of wallets. And these methods need to be available before any `Wallet` object is constructed.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T10:17:10Z",
      "diff_hunk" : "@@ -218,6 +219,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219667374",
      "id" : 219667374,
      "in_reply_to_id" : 219663917,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NzM3NA==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 24,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219667374",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @ryanofsky, will update accordingly.",
      "created_at" : "2018-09-22T13:11:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423743185",
      "id" : 423743185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzc0MzE4NQ==",
      "updated_at" : "2018-09-22T13:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423743185",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219671843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219671843"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Add some trivial test for `ListWalletDir` to make it technically in use.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-22T13:34:04Z",
      "diff_hunk" : "@@ -11,4 +11,7 @@\n //! Get the path of the wallet directory.\n fs::path GetWalletDir();\n \n+//! Get wallets in wallet directory.\n+std::vector<fs::path> ListWalletDir();\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219671843",
      "id" : 219671843,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY3MTg0Mw==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 6,
      "path" : "src/wallet/walletutil.h",
      "position" : 6,
      "pull_request_review_id" : 157910115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219671843",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky updated to used your suggested code with some minor details fixed. The result is still relative paths to `-walletdir`.\r\n\r\n@practicalswift will add test.",
      "created_at" : "2018-09-24T17:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-424061725",
      "id" : 424061725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDA2MTcyNQ==",
      "updated_at" : "2018-09-24T17:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424061725",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220147402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220147402"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There is `listwaletdir` RPC, which has some tests.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T11:02:19Z",
      "diff_hunk" : "@@ -11,4 +11,7 @@\n //! Get the path of the wallet directory.\n fs::path GetWalletDir();\n \n+//! Get wallets in wallet directory.\n+std::vector<fs::path> ListWalletDir();\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220147402",
      "id" : 220147402,
      "in_reply_to_id" : 219671843,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE0NzQwMg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 6,
      "path" : "src/wallet/walletutil.h",
      "position" : 6,
      "pull_request_review_id" : 158485225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220147402",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220161367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220161367"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: `throwNotWalletBuild()`?",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T11:56:15Z",
      "diff_hunk" : "@@ -34,6 +34,16 @@ void DummyWalletInit::AddWalletOptions() const\n \n const WalletInitInterface& g_wallet_init_interface = DummyWalletInit();\n \n+fs::path GetWalletDir()\n+{\n+    throw std::logic_error(\"Wallet function called in non-wallet build.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220161367",
      "id" : 220161367,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE2MTM2Nw==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 6,
      "path" : "src/dummywallet.cpp",
      "position" : 6,
      "pull_request_review_id" : 158502639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220161367",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220162889"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220162889"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I find this function name confusing. How about `listWallets()`? A future version of this function could take a directory argument and the name would still make sense.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T12:01:34Z",
      "diff_hunk" : "@@ -173,6 +173,12 @@ class Node\n     //! Get unspent outputs associated with a transaction.\n     virtual bool getUnspentOutput(const COutPoint& output, Coin& coin) = 0;\n \n+    //! Return default wallet directory.\n+    virtual std::string getWalletDir() = 0;\n+\n+    //! Return available wallets in wallet directory.\n+    virtual std::vector<std::string> listWalletDir() = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220162889",
      "id" : 220162889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE2Mjg4OQ==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 8,
      "path" : "src/interfaces/node.h",
      "position" : 8,
      "pull_request_review_id" : 158502639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220162889",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220165978"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220165978"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ditto as above, but unfortunately it's too late to rename `listwallets` to `listloadedwallets`. Overloading `listwallets` doesn't seem like a good idea.\r\n\r\nWhat about `lswallets`, `listwalletfiles` or `findwallets`?  ",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T12:12:13Z",
      "diff_hunk" : "@@ -2450,6 +2450,32 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n     return obj;\n }\n \n+static UniValue listwalletdir(const JSONRPCRequest& request)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220165978",
      "id" : 220165978,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE2NTk3OA==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 158502639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220165978",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220167677"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220167677"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sort alphabetically?",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T12:17:28Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220167677",
      "id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE2NzY3Nw==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158502639,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220167677",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220186712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220186712"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think that's something for the UI to handle. It can sort by other attribute, like last modified, transaction count, balance, etc.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T13:15:33Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220186712",
      "id" : 220186712,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE4NjcxMg==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158534090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220186712",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220187294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220187294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I like the pairing between `getWalletDir`, `listWalletDir` and `-walletdir`, but I don't have a strong preference. Let's see what others say.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T13:17:12Z",
      "diff_hunk" : "@@ -173,6 +173,12 @@ class Node\n     //! Get unspent outputs associated with a transaction.\n     virtual bool getUnspentOutput(const COutPoint& output, Coin& coin) = 0;\n \n+    //! Return default wallet directory.\n+    virtual std::string getWalletDir() = 0;\n+\n+    //! Return available wallets in wallet directory.\n+    virtual std::vector<std::string> listWalletDir() = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220187294",
      "id" : 220187294,
      "in_reply_to_id" : 220162889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE4NzI5NA==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 8,
      "path" : "src/interfaces/node.h",
      "position" : 8,
      "pull_request_review_id" : 158534882,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220187294",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220189697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220189697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree in not overloading `listwallets`. There are more alternatives in #11485 discussion thread.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T13:23:17Z",
      "diff_hunk" : "@@ -2450,6 +2450,32 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n     return obj;\n }\n \n+static UniValue listwalletdir(const JSONRPCRequest& request)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220189697",
      "id" : 220189697,
      "in_reply_to_id" : 220165978,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE4OTY5Nw==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 158537918,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220189697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220193984"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220193984"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's fine, as long as the RPC interface does it, that's also a User Interface :-)",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T13:34:31Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220193984",
      "id" : 220193984,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE5Mzk4NA==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158543537,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220193984",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220195529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220195529"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should we sort `listwallets` result too? ",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T13:38:37Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220195529",
      "id" : 220195529,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE5NTUyOQ==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158545603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220195529",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220218050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220218050"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That could be a nice improvement. Not necessarily in this PR, but perhaps there could be a common function to render the list of wallets in RPC, to make sure they're consistent.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-25T14:33:17Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220218050",
      "id" : 220218050,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDIxODA1MA==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158574435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220218050",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220438850"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220438850"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"wallet: Add ListWalletDir utility\" (90adb2cd6149af1869e624a2060ec8c4a543cf08)\r\n\r\nProbably delete this line, it looks leftover from debugging.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T06:28:45Z",
      "diff_hunk" : "@@ -25,3 +25,47 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+static bool IsBerkeleyBtree(const fs::path& path)\n+{\n+    // Berkeley DB Btree magic bytes, from:\n+    //  https://github.com/file/file/blob/5824af38469ec1ca9ac3ffd251e7afe9dc11e227/magic/Magdir/database#L74-L75\n+    const uint32_t bdb_magic = 0x00053162;\n+\n+    std::ifstream file(path.string(), std::ios::binary);\n+    if (!file.is_open()) return false;\n+\n+    file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+    uint32_t data = 0;\n+    file.read((char*) &data, sizeof(data)); // Read 4 bytes of file to compare against magic\n+\n+    return memcmp(&data, &bdb_magic, sizeof(bdb_magic)) == 0;\n+}\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const fs::path wallet_dir = GetWalletDir();\n+    std::vector<fs::path> paths;\n+\n+    for (auto it = fs::recursive_directory_iterator(wallet_dir); it != end(it); ++it) {\n+        std::cout << it->path().string() << '-' << it.level() << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220438850",
      "id" : 220438850,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQzODg1MA==",
      "original_commit_id" : "90adb2cd6149af1869e624a2060ec8c4a543cf08",
      "original_position" : 27,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 158846389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220438850",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220441099"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220441099"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think I agree with promag. `listWalletDir` describes more specifically what the function does than `listWallets` and it fits in with the other names cited. I don't imagine us adding a gui feature that would call for the gui asking the node to list wallets in a directory other than `-walletdir`, but even if we did and this method gained an optional argument,  `listWalletDir` would still seem like a sensible name.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T06:40:46Z",
      "diff_hunk" : "@@ -173,6 +173,12 @@ class Node\n     //! Get unspent outputs associated with a transaction.\n     virtual bool getUnspentOutput(const COutPoint& output, Coin& coin) = 0;\n \n+    //! Return default wallet directory.\n+    virtual std::string getWalletDir() = 0;\n+\n+    //! Return available wallets in wallet directory.\n+    virtual std::vector<std::string> listWalletDir() = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220441099",
      "id" : 220441099,
      "in_reply_to_id" : 220162889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQ0MTA5OQ==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 8,
      "path" : "src/interfaces/node.h",
      "position" : 8,
      "pull_request_review_id" : 158846389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220441099",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220446254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220446254"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"rpc: Add listwalletdir RPC\" (963eb27e8598e2746966ee4056f177ed332f0279)\r\n\r\nI would consider avoiding a mistake we've made previously with other api's (listwallets, listaccounts) where we limited extensibility by returning lists of strings instead of list of json objects. Specifically, I think it'd be better to return\r\n\r\n```json\r\n[ {\"wallet\": \"\"}, {\"wallet\": \"foo\"}, {\"wallet\": \"bar\"} ]\r\n```\r\n\r\ninstead of:\r\n\r\n```json\r\n[ \"\", \"foo\", \"bar\" ]\r\n```\r\n\r\nBecause there's more metadata we could be returning about these wallets even without opening them, such as last modified times from the filesystem, status strings indicating whether wallets are presently loaded and locked, and path types indicating whether wallet paths refer to directories, symlinks, or legacy btree files.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T07:05:59Z",
      "diff_hunk" : "@@ -2450,6 +2450,32 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n     return obj;\n }\n \n+static UniValue listwalletdir(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 0) {\n+        throw std::runtime_error(\n+            \"listwalletdir\\n\"\n+            \"Returns a list of wallets in the wallet directory.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                         (json array of strings)\\n\"\n+            \"  \\\"walletname\\\"            (string) the wallet name\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220446254",
      "id" : 220446254,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQ0NjI1NA==",
      "original_commit_id" : "963eb27e8598e2746966ee4056f177ed332f0279",
      "original_position" : 12,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 158846389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220446254",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220446805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220446805"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't see a problem with `listwalletdir`. It describes the thing this RPC does, which is to list the contents of the `-walletdir` directory. (I do think it would have been clearer if that directory would have been called `-walletsdir` instead of `-walletdir`, but surprising to me as a native english speaker, other people seemed to think `-walletsdir` was clumsy and not grammatical in #12221).",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T07:08:28Z",
      "diff_hunk" : "@@ -2450,6 +2450,32 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n     return obj;\n }\n \n+static UniValue listwalletdir(const JSONRPCRequest& request)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220446805",
      "id" : 220446805,
      "in_reply_to_id" : 220165978,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQ0NjgwNQ==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 158846389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220446805",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220453514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220453514"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ops",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T07:35:00Z",
      "diff_hunk" : "@@ -25,3 +25,47 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+static bool IsBerkeleyBtree(const fs::path& path)\n+{\n+    // Berkeley DB Btree magic bytes, from:\n+    //  https://github.com/file/file/blob/5824af38469ec1ca9ac3ffd251e7afe9dc11e227/magic/Magdir/database#L74-L75\n+    const uint32_t bdb_magic = 0x00053162;\n+\n+    std::ifstream file(path.string(), std::ios::binary);\n+    if (!file.is_open()) return false;\n+\n+    file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+    uint32_t data = 0;\n+    file.read((char*) &data, sizeof(data)); // Read 4 bytes of file to compare against magic\n+\n+    return memcmp(&data, &bdb_magic, sizeof(bdb_magic)) == 0;\n+}\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const fs::path wallet_dir = GetWalletDir();\n+    std::vector<fs::path> paths;\n+\n+    for (auto it = fs::recursive_directory_iterator(wallet_dir); it != end(it); ++it) {\n+        std::cout << it->path().string() << '-' << it.level() << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220453514",
      "id" : 220453514,
      "in_reply_to_id" : 220438850,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQ1MzUxNA==",
      "original_commit_id" : "90adb2cd6149af1869e624a2060ec8c4a543cf08",
      "original_position" : 27,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 158864119,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220453514",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220471896"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220471896"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Absolutely, my initial response was like:\r\n```json\r\n{\r\n    \"wallets\": [\r\n        { \"name\": \"\" }\r\n    ]\r\n}\r\n```\r\nwhich permits adding, for instance, `walletdir`, `count`, `offset`..",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T08:36:49Z",
      "diff_hunk" : "@@ -2450,6 +2450,32 @@ static UniValue getwalletinfo(const JSONRPCRequest& request)\n     return obj;\n }\n \n+static UniValue listwalletdir(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 0) {\n+        throw std::runtime_error(\n+            \"listwalletdir\\n\"\n+            \"Returns a list of wallets in the wallet directory.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[                         (json array of strings)\\n\"\n+            \"  \\\"walletname\\\"            (string) the wallet name\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220471896",
      "id" : 220471896,
      "in_reply_to_id" : 220446254,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDQ3MTg5Ng==",
      "original_commit_id" : "963eb27e8598e2746966ee4056f177ed332f0279",
      "original_position" : 12,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 158885891,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220471896",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220522510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220522510"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@ryanofsky does this looks good to you?",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T11:22:04Z",
      "diff_hunk" : "@@ -39,7 +39,7 @@ static bool IsBerkeleyBtree(const fs::path& path)\n     uint32_t data = 0;\n     file.read((char*) &data, sizeof(data)); // Read 4 bytes of file to compare against magic\n \n-    return memcmp(&data, &bdb_magic, sizeof(bdb_magic)) == 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220522510",
      "id" : 220522510,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDUyMjUxMA==",
      "original_commit_id" : "5e3a14d42726f4a526b6e69bc2d12c561afe7e34",
      "original_position" : 4,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 158946677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220522510",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220528757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220528757"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should it ignore case? Should have an option to support numeric/date prefixes?\r\n\r\nFrom the cli point of view, you can do stuff like `bitcoin-cli -regtest listwalletdir | jq -r '.wallets | map(.name) | join(\"\\n\")' | sort ...`.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T11:49:19Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220528757",
      "id" : 220528757,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDUyODc1Nw==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158955119,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220528757",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220529490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220529490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If this format is accepted then I'll update description above.",
      "commit_id" : "5e3a14d42726f4a526b6e69bc2d12c561afe7e34",
      "created_at" : "2018-09-26T11:51:42Z",
      "diff_hunk" : "@@ -2467,12 +2467,15 @@ static UniValue listwalletdir(const JSONRPCRequest& request)\n         );\n     }\n \n-    UniValue result(UniValue::VARR);\n-\n+    UniValue wallets(UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220529490",
      "id" : 220529490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDUyOTQ5MA==",
      "original_commit_id" : "830b2a77fa4859ef0e5b3971bafb01e9ba9b498c",
      "original_position" : 6,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 21,
      "pull_request_review_id" : 158955994,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T11:51:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220529490",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220543207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220543207"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Don't most alphabetical sort functions ignore case (unless it's a tie) and put numbers before letters? I'm a fan of `jq`, but seems overkill for a simple list. It doesn't seem terribly complicated in C++11 even with [UTF-8](https://www.quora.com/How-do-I-sort-an-array-of-strings-in-alphabetical-order-in-C) (1st answer, 3rd example):\r\n\r\n```cpp\r\nstd::wstring a[] = {L\"ÃÂ¨ÃÂ»ÃÂ°\", L\"ÃÂ¡ÃÂ°ÃÂÃÂ°\", L\"ÃÂ¿ÃÂ¾\", L\"ÃÂÃÂ¾ÃÂÃÂÃÂµ\", L\"ÃÂ¸\", L\"ÃÂÃÂ¾ÃÂÃÂ°ÃÂ»ÃÂ°\", L\"ÃÂÃÂÃÂÃÂºÃÂ\"};\r\nstd::sort(std::begin(a), std::end(a), std::locale(\"en_US.utf8\"));\r\nstd::wstring_convert<std::codecvt_utf8<wchar_t>> cvt;\r\nfor(auto& s: a) std::cout << cvt.to_bytes(s) << ' ';\r\n```",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T12:39:51Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220543207",
      "id" : 220543207,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDU0MzIwNw==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 158973449,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220543207",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220749366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220749366"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you don't mind I prefer to follow up that discussion and possible implementation in both RPC. In this PR I'm just following `listwallets` ordering and for now having the functionality is enough.",
      "commit_id" : "fc40216e1b0a3e0462b4119f6e4380ac368ed828",
      "created_at" : "2018-09-26T23:02:17Z",
      "diff_hunk" : "@@ -218,6 +220,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220749366",
      "id" : 220749366,
      "in_reply_to_id" : 220167677,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDc0OTM2Ng==",
      "original_commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 23,
      "pull_request_review_id" : 159230702,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-26T23:05:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220749366",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Squashed and added release notes.",
      "created_at" : "2018-09-26T23:06:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-424898567",
      "id" : 424898567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDg5ODU2Nw==",
      "updated_at" : "2018-09-26T23:06:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424898567",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> the test node could dynamically create a wallet, and then try to find it. That way at least some developer will see that test fail on their machine if they compile with a future BDB version that's somehow different.\r\n\r\n@Sjors does the test change looks good to you?\r\n",
      "created_at" : "2018-09-27T20:35:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-425233400",
      "id" : 425233400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTIzMzQwMA==",
      "updated_at" : "2018-09-27T20:35:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425233400",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
