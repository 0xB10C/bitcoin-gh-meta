[
   {
      "author_association" : "MEMBER",
      "body" : "After https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-423683042 decided to push this.\r\n\r\nConsider the following:\r\n```\r\n$ find wallets\r\nwallets\r\nwallets/wallet.dat\r\nwallets/db.log\r\nwallets/x1\r\nwallets/x1/wallet.dat\r\nwallets/x1/db.log\r\nwallets/x1/.walletlock\r\nwallets/x2\r\nwallets/x2/wallet.dat\r\nwallets/x2/db.log\r\nwallets/x2/.walletlock\r\nwallets/.walletlock\r\nwallets/w\r\nwallets/w/x3\r\nwallets/w/x3/wallet.dat\r\nwallets/w/x3/db.log\r\nwallets/w/x3/.walletlock\r\n```\r\n`ListWalletDir()` gives\r\n```\r\nwallet.dat\r\nx1\r\nx2\r\nw/x3\r\n```",
      "created_at" : "2018-09-21T23:33:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423696829",
      "id" : 423696829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzY5NjgyOQ==",
      "updated_at" : "2018-09-22T00:04:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423696829",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #13100 (gui: Add dynamic wallets support by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-22T03:59:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423714517",
      "id" : 423714517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzcxNDUxNw==",
      "updated_at" : "2018-09-22T03:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423714517",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219663917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219663917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How about moving these functions to `interfaces/wallet.cpp`. I think they don't belong here.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T07:18:01Z",
      "diff_hunk" : "@@ -218,6 +219,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219663917",
      "id" : 219663917,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2MzkxNw==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 24,
      "pull_request_review_id" : 157901916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219663917",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219664892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219664892"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should cite the source of this information (https://github.com/file/file/blob/5824af38469ec1ca9ac3ffd251e7afe9dc11e227/magic/Magdir/database#L74-L75) to give credit upstream and make this code easier to understand / debug / update in the future.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T08:05:22Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219664892",
      "id" : 219664892,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NDg5Mg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 7,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219664892",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666816"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since this is declared as bytes, the `memcmp` below will only look for little-endian btree files, even on big endian platforms. It seems like it would make more sense to look for little endian files on little-endian platforms, and big endian files on big endian platforms. Changing this to `uint32_t bdb_magic = 0x00053162` and passing `&bdb_magic` to `memcmp` should accomplish this.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T09:44:44Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666816",
      "id" : 219666816,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NjgxNg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 7,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666816",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666958"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There are a number of problems with this implementation:\r\n\r\n1) Because this opens files recursively, it will return btree paths not in the top directory which CWallet::Verify will reject: https://github.com/bitcoin/bitcoin/blob/920c090f63f4990bf0f3b3d1a6d3d8a8bcd14ba0/src/wallet/wallet.cpp#L3824-L3829\r\n2) Because is_regular_file will return true for symlinks pointing to files, this will return symlink paths which CWallet::Verify will reject\r\n3) Because recursive_directory_iterator order is unspecified, on systems where it does postorder instead of preorder traversal, this will return `<wallet>/wallet.dat` instead of `<wallet>` paths, which CWallet::Verify will reject.\r\n4) Less serious, but this returns \"wallet.dat\" instead of \"\" as the path for the top level wallet. This is inconsistent with top level wallet path returned in current `listwallets` and `getwalletinfo` rpcs in the default bitcoin configuration.\r\n5) This is less efficient than it needs to be. Instead of only opening files called `wallet.dat` in subdirectories, it will read logs and other random files which bitcoin would never open as wallets. It also reads `wallet.dat` files in subdirectories twice and then uses a `std::set` to filter out the duplicates after they are read, which is unnecessary.\r\n\r\nFollowing alternate implementation is untested, but I think would avoid these problems:\r\n\r\n```c++\r\nstd::vector<fs::path> wallets;\r\nfor (auto it = fs::recursive_directory_iterator(wallet_dir); it != end(it); ++it) {\r\n    if (it->status().type() == fs::directory_file && IsBerkeleyBtree(it->path() / \"wallet.dat\")) {\r\n        // Found a directory which contains wallet.dat btree file, add it as a wallet.\r\n        wallets.emplace_back(it->path());\r\n    } else if (it.level() == 0 && it->symlink_status().type() == fs::regular_file && IsBerkeleyBtree(it->path())) {\r\n        if (it->path() == \"wallet.dat\") {\r\n            // Found top-level wallet.dat btree file, add top level directory \"\"\r\n            // as a wallet.\r\n            wallets.emplace_back();\r\n        } else {\r\n            // Found top-level btree file not called wallet.dat. Current bitcoin\r\n            // software will never create these files but will allow them to be\r\n            // opened in a shared database environment for backwards compatibility.\r\n            // Add it to the list of available wallets.\r\n            wallets.emplace_back(it->path());\r\n        }\r\n    }\r\n}\r\nreturn wallets;\r\n```",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T09:51:55Z",
      "diff_hunk" : "@@ -25,3 +25,32 @@ fs::path GetWalletDir()\n \n     return path;\n }\n+\n+std::vector<fs::path> ListWalletDir()\n+{\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    const fs::path wallet_dir = GetWalletDir();\n+    std::vector<fs::path> paths;\n+    std::set<fs::path> dbs;\n+\n+    for (auto& entry : fs::recursive_directory_iterator(wallet_dir)) {\n+        const fs::path& path = entry.path();\n+        const fs::path db = fs::is_regular_file(entry) ? path : path / \"wallet.dat\";\n+\n+        std::ifstream file(db.string(), std::ios::binary);\n+        if (!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char file_bytes[4] = {0};\n+        file.read((char*)file_bytes, sizeof(file_bytes)); // Read 4 bytes of file to compare against magic\n+        if (memcmp(file_bytes, bdb_magic, sizeof(bdb_magic)) != 0) continue;\n+\n+        // avoid duplicates due to the recursive iteration\n+        if (!dbs.insert(db).second) continue;\n+\n+        paths.push_back(fs::relative(path, wallet_dir));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219666958",
      "id" : 219666958,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2Njk1OA==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 28,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219666958",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219667374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219667374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> How about moving these functions to interfaces/wallet.cpp. I think they don't belong here.\r\n\r\nThis is a reasonable place. These methods fit in with the existing `getWallets` and `handleLoadWallet` methods. The `Node` interface is somewhat monolithic and we could consider breaking it up in various ways. But the `Wallet` interface would be the wrong place to add these methods. `Wallet` methods operate on individual wallets, not collections of wallets. And these methods need to be available before any `Wallet` object is constructed.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T10:17:10Z",
      "diff_hunk" : "@@ -218,6 +219,18 @@ class NodeImpl : public Node\n         LOCK(::cs_main);\n         return ::pcoinsTip->GetCoin(output, coin);\n     }\n+    std::string getWalletDir() override\n+    {\n+        return GetWalletDir().string();\n+    }\n+    std::vector<std::string> listWalletDir() override\n+    {\n+        std::vector<std::string> paths;\n+        for (auto& path : ListWalletDir()) {\n+            paths.push_back(path.string());\n+        }\n+        return paths;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219667374",
      "id" : 219667374,
      "in_reply_to_id" : 219663917,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY2NzM3NA==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 23,
      "path" : "src/interfaces/node.cpp",
      "position" : 24,
      "pull_request_review_id" : 157902949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219667374",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @ryanofsky, will update accordingly.",
      "created_at" : "2018-09-22T13:11:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-423743185",
      "id" : 423743185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzc0MzE4NQ==",
      "updated_at" : "2018-09-22T13:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423743185",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219671843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219671843"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Add some trivial test for `ListWalletDir` to make it technically in use.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-22T13:34:04Z",
      "diff_hunk" : "@@ -11,4 +11,7 @@\n //! Get the path of the wallet directory.\n fs::path GetWalletDir();\n \n+//! Get wallets in wallet directory.\n+std::vector<fs::path> ListWalletDir();\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r219671843",
      "id" : 219671843,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTY3MTg0Mw==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 6,
      "path" : "src/wallet/walletutil.h",
      "position" : 6,
      "pull_request_review_id" : 157910115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-24T22:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/219671843",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky updated to used your suggested code with some minor details fixed. The result is still relative paths to `-walletdir`.\r\n\r\n@practicalswift will add test.",
      "created_at" : "2018-09-24T17:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#issuecomment-424061725",
      "id" : 424061725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14291",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNDA2MTcyNQ==",
      "updated_at" : "2018-09-24T17:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/424061725",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220147402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220147402"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There is `listwaletdir` RPC, which has some tests.",
      "commit_id" : "20db275b250189cfd2200df8e5535aa92afa594a",
      "created_at" : "2018-09-25T11:02:19Z",
      "diff_hunk" : "@@ -11,4 +11,7 @@\n //! Get the path of the wallet directory.\n fs::path GetWalletDir();\n \n+//! Get wallets in wallet directory.\n+std::vector<fs::path> ListWalletDir();\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14291#discussion_r220147402",
      "id" : 220147402,
      "in_reply_to_id" : 219671843,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMDE0NzQwMg==",
      "original_commit_id" : "e84e729fd0b8abbff53826bb97e01ad32f1c992f",
      "original_position" : 6,
      "path" : "src/wallet/walletutil.h",
      "position" : 6,
      "pull_request_review_id" : 158485225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14291",
      "updated_at" : "2018-09-25T11:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/220147402",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
