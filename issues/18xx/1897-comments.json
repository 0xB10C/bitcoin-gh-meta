[
   {
      "body" : "This is one of the goals that I had in mind with the \"uiInterface\" design.\nIt is possible to install listeners for signals such as \"new transaction\"\nor \"transaction status changed\" in a decoupled way.\n\nThis is currently used to send updates to the GUI, but handlers could be\nadded to trigger JSON push notifications and such.",
      "created_at" : "2012-10-02T08:23:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9062314",
      "id" : 9062314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T08:23:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9062314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "New block / block being replaced is already there, see the -blocknotify command-line/bitcoin.conf option. It is trivial to combine it with curl to get a \"send block information to a URL when there is a new block.\"\r\n\r\nWith some programming you can keep track of 1/6-confirm transactions using it.\r\n\r\nFor monitoring transactions, -txnotify would be easy but forking a new process every time there is a new transaction is almost certainly not the right way to go, but maybe it would work if it was rate-limited to only notifying at most once every N seconds.\r\n\r\nI wrote a monitorblock/tx patch a long time ago, but fell out of love with it-- it was a lot of extra code to maintain, and it is really easy to get feature creep (if you support notifying https: URLs then you suddenly have to deal with certificate chains and expired certificates, you have to figure out what to do if there is an error communicating with the website, etc etc).\r\n\r\nThe bloom filter work that is just about ready to merge is also very relevant.\r\n",
      "created_at" : "2012-10-02T14:15:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9072192",
      "id" : 9072192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T14:15:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9072192",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "PS: we need some good example of using -blocknotify to keep track of 1/6/double-spent transactions, a little 'watchconfirmed.py' in contrib/ would be nifty.",
      "created_at" : "2012-10-02T14:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9072290",
      "id" : 9072290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T14:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9072290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Agreed, I think putting outbound JSON notification itself in the core is overkill. If we had something lightweight, like a socket that you could connect to where you get a packet when an event happens, that'd be just as useful (and more versatile than launching a command). A simple Python script could connect to it and handle dispatching in any simple or complex way the user wants.\r\n\r\nThis could be added to the current HTTP server. Just request GET /events, and it opens a stream where you get notifications of events {\"event\":\"balancechanged\",\"balance\":\"123456\"}... etc, useful, minimal and simple as cake to implement.\r\n",
      "created_at" : "2012-10-02T16:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9076434",
      "id" : 9076434,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T16:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9076434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "JSON-RPC 1.0 was bidirectional, so would have fit well. Unfortunately, that functionality was removed in 2.0. I have a pullrequest for GBT longpolling open, but I don't know how well it would work for events in general (seems too easy to miss an event). Chunked encoding could be used to simply stream data, but I think most clients won't give you anything until it's all received. Not sure how complex websockets are...",
      "created_at" : "2012-10-02T16:10:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9076555",
      "id" : 9076555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T16:10:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9076555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "We're not going to invent _another_ protocol for this.\r\n\r\nIf HTTP JSON-RPC longpolling does not provide a solution, then the stratum protocol would be the next natural community-adopted candidate.  Line-based JSON-RPC, whether client or server may send asynchronously, seems a fair match.",
      "created_at" : "2012-10-02T16:13:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9076648",
      "id" : 9076648,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T16:13:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9076648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Who is inventing a protocol here?\r\n\r\n@luke-jr I don't like longpolling. IMO it's kind of a hack, as you have to re-establish the connection every time.\r\n \r\nI'm not sure about \"most clients\", but streaming JSON data over a HTTP connection works fine at least in Python. If you can receive streaming video then you can receive streaming everything...\r\n\r\nAdopting the Stratum protocol  sounds like overkill... We don't need an alternative method to submit commands or receive replies, just a way to remotely listen to async events so that UIs can be updated and such.\r\n",
      "created_at" : "2012-10-02T16:26:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9077114",
      "id" : 9077114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-06T09:16:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9077114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "stratum has nothing to do with protocol buffers.  It is a protocol that is _less complex_ than HTTP, even:\r\n\r\n    C: JSON-RPC \\n\r\n    S: JSON-RPC \\n\r\n    C: JSON-RPC \\n\r\n    S: JSON-RPC \\n\r\n    S: JSON-RPC \\n\r\n\r\nNo HTTP headers, no HTTP chunking, etc.  Very simple and easy: just text lines of JSON.  Client _or_ server may send a line at any time.\r\n\r\n",
      "created_at" : "2012-10-02T16:41:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-9077608",
      "id" : 9077608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2012-10-02T16:41:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9077608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "So is there any progress on this? It would be a huge improvement to make automated payment systems with bitcoin since that'd reduce amount of polling required to process transactions.",
      "created_at" : "2013-06-02T23:14:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-18816079",
      "id" : 18816079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2013-06-02T23:14:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/18816079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/937166?v=3",
         "events_url" : "https://api.github.com/users/svasva/events{/privacy}",
         "followers_url" : "https://api.github.com/users/svasva/followers",
         "following_url" : "https://api.github.com/users/svasva/following{/other_user}",
         "gists_url" : "https://api.github.com/users/svasva/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/svasva",
         "id" : 937166,
         "login" : "svasva",
         "organizations_url" : "https://api.github.com/users/svasva/orgs",
         "received_events_url" : "https://api.github.com/users/svasva/received_events",
         "repos_url" : "https://api.github.com/users/svasva/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/svasva/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/svasva/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/svasva"
      }
   },
   {
      "body" : "Likely this will never be implemented, as there are other ways to do notifications.\r\n\r\n1) You can make your own push notifications by using the -*notify commands with a little Python (or shell) script:\r\n\r\n     -blocknotify=<cmd>     Execute command when the best block changes (%s in cmd is replaced by block hash)\r\n     -walletnotify=<cmd>    Execute command when a wallet transaction changes (%s in cmd is replaced by TxID)\r\n     -alertnotify=<cmd>     Execute command when a relevant alert is received (%s in cmd is replaced by message)\r\n\r\n2) You could also help testing the ZeroMQ pull request, which provides a more flexible notification system: https://github.com/bitcoin/bitcoin/pull/2415\r\n\r\nClosing this issue.\r\n",
      "created_at" : "2013-06-03T05:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1897#issuecomment-18822441",
      "id" : 18822441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1897",
      "updated_at" : "2013-06-03T05:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/18822441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
