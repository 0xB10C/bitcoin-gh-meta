[
   {
      "body" : "Removed the dependency on #4925, as that seems more controversial.",
      "created_at" : "2014-09-20T02:54:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56254970",
      "id" : 56254970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-20T02:54:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56254970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The English in this patch is a bit confusing.  What this is checking for is not the generalized case of a duplicate TXID but only the second pre-image tree-grafting attack.",
      "created_at" : "2014-09-22T19:17:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56425528",
      "id" : 56425528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T19:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56425528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Agree, fixed. I added some extra comments too.",
      "created_at" : "2014-09-22T19:53:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56430679",
      "id" : 56430679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T19:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56430679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Added a comment.",
      "created_at" : "2014-09-22T21:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56447081",
      "id" : 56447081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T21:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56447081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "The claim that an interior collision implies a duplicate is only computationally sound. I think this is fine, and might even be protective against some kinds of crazy attacks in the face of an actual collision... though since it is a consensus rule change we should note it (though not worry, since it's only a change in cases where we're completely broken).\r\n\r\nI can't ACK yet because even though it looks good, commenting out the mutated=true; assignment is not enough to make test_bitcoin fail... so we are inadequately testing this condition (or the patch is broken). ",
      "created_at" : "2014-09-22T21:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56447535",
      "id" : 56447535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T21:43:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56447535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "So, it seems pulltester doesn't actually test the merkle root txid duplication issue... ping @TheBlueMatt ",
      "created_at" : "2014-09-22T22:35:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56454159",
      "id" : 56454159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T22:35:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56454159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Willfix in upcoming test updates.",
      "created_at" : "2014-09-22T22:38:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56454452",
      "id" : 56454452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T22:38:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56454452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Seems it did trigger failure - let's run again to be sure.",
      "created_at" : "2014-09-22T23:01:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56456683",
      "id" : 56456683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-22T23:01:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56456683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Good, it failed, and for the right reason. I'm removing the 'bug' commit again.",
      "created_at" : "2014-09-23T00:03:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56461667",
      "id" : 56461667,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T00:04:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56461667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK.  (okay, glad pulltester did catch it, poor timing on that  first pass result. :) )",
      "created_at" : "2014-09-23T00:47:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56464629",
      "id" : 56464629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T00:47:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56464629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "s/pulltester/comparison tool/. Travis caught it as well.",
      "created_at" : "2014-09-23T00:50:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56464819",
      "id" : 56464819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T00:50:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56464819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "ACK\r\n\r\nTested with mainnet block 99960, duplicated the last tx, and submitted on testnet with unexciting results.",
      "created_at" : "2014-09-23T07:20:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56483876",
      "id" : 56483876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T07:20:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56483876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I significantly expanded the comments and commit message.",
      "created_at" : "2014-09-23T17:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56560534",
      "id" : 56560534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T17:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56560534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Nice!\r\n\r\n1 beer @changetip",
      "created_at" : "2014-09-23T18:33:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56567661",
      "id" : 56567661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T18:33:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56567661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Hi sipa, petertodd sent you a Bitcoin tip worth 1 beer (8.084 mBTC/$3.50), and I'm here to deliver it Ã¢ÂÂ **[collect your tip at ChangeTip.com](https://www.changetip.com/collect/43580)**.\n\n\n**[Is this real?](https://www.changetip.com/tip-online/github)**",
      "created_at" : "2014-09-23T20:29:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56584537",
      "id" : 56584537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T20:29:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56584537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6137851?v=3",
         "events_url" : "https://api.github.com/users/changetip/events{/privacy}",
         "followers_url" : "https://api.github.com/users/changetip/followers",
         "following_url" : "https://api.github.com/users/changetip/following{/other_user}",
         "gists_url" : "https://api.github.com/users/changetip/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/changetip",
         "id" : 6137851,
         "login" : "changetip",
         "organizations_url" : "https://api.github.com/users/changetip/orgs",
         "received_events_url" : "https://api.github.com/users/changetip/received_events",
         "repos_url" : "https://api.github.com/users/changetip/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/changetip/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/changetip/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/changetip"
      }
   },
   {
      "body" : "@sipa The new comments make this worlds easier to review. Thanks for that. Looks sane to me.\r\n",
      "created_at" : "2014-09-23T22:30:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56600423",
      "id" : 56600423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-23T22:30:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56600423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@petertodd Thanks!",
      "created_at" : "2014-09-24T01:41:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56614770",
      "id" : 56614770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-24T01:41:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56614770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4926#discussion_r17956668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4926"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/17956668"
         }
      },
      "body" : "Shouldn't this be `vMerkleTree[j+i] == vMerkleTree[j+i2]` as below in the hashing?",
      "commit_id" : "584a358997e52a87e8c5402269c7fb3784ed2065",
      "created_at" : "2014-09-24T07:03:31Z",
      "diff_hunk" : "@@ -224,29 +224,65 @@ uint256 CBlockHeader::GetHash() const\n     return Hash(BEGIN(nVersion), END(nNonce));\n }\n \n-uint256 CBlock::BuildMerkleTree() const\n+uint256 CBlock::BuildMerkleTree(bool* fMutated) const\n {\n     // WARNING! If you're reading this because you're learning about crypto\n     // and/or designing a new system that will use merkle trees, keep in mind\n     // that the following merkle tree algorithm has a serious flaw related to\n-    // duplicate txids, resulting in a vulnerability. (CVE-2012-2459) Bitcoin\n-    // has since worked around the flaw, but for new applications you should\n-    // use something different; don't just copy-and-paste this code without\n-    // understanding the problem first.\n+    // duplicate txids, resulting in a vulnerability (CVE-2012-2459).\n+    //\n+    // The reason is that if the number of hashes in the list at a given time\n+    // is odd, the last one is duplicated before computing the next level (which\n+    // is unusual in Merkle trees). This results in certain sequences of\n+    // transactions leading to the same merkle root. For example, these two\n+    // trees:\n+    //\n+    //              A               A\n+    //            /  \\            /   \\\n+    //          B     C         B       C\n+    //         / \\    |        / \\     / \\\n+    //        D   E   F       D   E   F   F\n+    //       / \\ / \\ / \\     / \\ / \\ / \\ / \\\n+    //       1 2 3 4 5 6     1 2 3 4 5 6 5 6\n+    //\n+    // for transaction lists [1,2,3,4,5,6] and [1,2,3,4,5,6,5,6] (where 5 and\n+    // 6 are repeated) result in the same root hash A (because the hash of both\n+    // of (F) and (F,F) is C).\n+    //\n+    // The vulnerability results from being able to send a block with such a\n+    // transaction list, with the same merkle root, and the same block hash as\n+    // the original without duplication, resulting in failed validation. If the\n+    // receiving node proceeds to mark that block as permanently invalid\n+    // however, it will fail to accept further unmodified (and thus potentially\n+    // valid) versions of the same block. We defend against this by detecting\n+    // the case where we would hash two identical hashes at the end of the list\n+    // together, and treating that identically to the block having an invalid\n+    // merkle root. Assuming no double-SHA256 collisions, this will detect all\n+    // known ways of changing the transactions without affecting the merkle\n+    // root.\n     vMerkleTree.clear();\n+    vMerkleTree.reserve(vtx.size() * 2 + 16); // Safe upper bound for the number of total nodes.\n     BOOST_FOREACH(const CTransaction& tx, vtx)\n         vMerkleTree.push_back(tx.GetHash());\n     int j = 0;\n+    bool mutated = false;\n     for (int nSize = vtx.size(); nSize > 1; nSize = (nSize + 1) / 2)\n     {\n         for (int i = 0; i < nSize; i += 2)\n         {\n             int i2 = std::min(i+1, nSize-1);\n+            if (i2 == i + 1 && i2 + 1 == nSize && vMerkleTree[i] == vMerkleTree[i2]) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#discussion_r17956668",
      "id" : 17956668,
      "original_commit_id" : "c6ec0c446617278fa9a8f4db88df807bb7c0f9c4",
      "original_position" : 56,
      "path" : "src/core.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4926",
      "updated_at" : "2014-09-24T17:17:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/17956668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I created a silly python script to visualize the Satoshi Merkle tree, marking the nodes where a mutation check happens according to the logic in this pull in red: https://gist.github.com/laanwj/28326a4ba4f3ce1d89f1",
      "created_at" : "2014-09-24T08:56:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56642526",
      "id" : 56642526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-24T08:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56642526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/4926#discussion_r17963362"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4926"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/17963362"
         }
      },
      "body" : "Good catch, yes. Seems like it only worked for the bottom level (j=0), and\nthe only case tested by comparison tool was in that level...",
      "commit_id" : "584a358997e52a87e8c5402269c7fb3784ed2065",
      "created_at" : "2014-09-24T10:07:01Z",
      "diff_hunk" : "@@ -224,29 +224,65 @@ uint256 CBlockHeader::GetHash() const\n     return Hash(BEGIN(nVersion), END(nNonce));\n }\n \n-uint256 CBlock::BuildMerkleTree() const\n+uint256 CBlock::BuildMerkleTree(bool* fMutated) const\n {\n     // WARNING! If you're reading this because you're learning about crypto\n     // and/or designing a new system that will use merkle trees, keep in mind\n     // that the following merkle tree algorithm has a serious flaw related to\n-    // duplicate txids, resulting in a vulnerability. (CVE-2012-2459) Bitcoin\n-    // has since worked around the flaw, but for new applications you should\n-    // use something different; don't just copy-and-paste this code without\n-    // understanding the problem first.\n+    // duplicate txids, resulting in a vulnerability (CVE-2012-2459).\n+    //\n+    // The reason is that if the number of hashes in the list at a given time\n+    // is odd, the last one is duplicated before computing the next level (which\n+    // is unusual in Merkle trees). This results in certain sequences of\n+    // transactions leading to the same merkle root. For example, these two\n+    // trees:\n+    //\n+    //              A               A\n+    //            /  \\            /   \\\n+    //          B     C         B       C\n+    //         / \\    |        / \\     / \\\n+    //        D   E   F       D   E   F   F\n+    //       / \\ / \\ / \\     / \\ / \\ / \\ / \\\n+    //       1 2 3 4 5 6     1 2 3 4 5 6 5 6\n+    //\n+    // for transaction lists [1,2,3,4,5,6] and [1,2,3,4,5,6,5,6] (where 5 and\n+    // 6 are repeated) result in the same root hash A (because the hash of both\n+    // of (F) and (F,F) is C).\n+    //\n+    // The vulnerability results from being able to send a block with such a\n+    // transaction list, with the same merkle root, and the same block hash as\n+    // the original without duplication, resulting in failed validation. If the\n+    // receiving node proceeds to mark that block as permanently invalid\n+    // however, it will fail to accept further unmodified (and thus potentially\n+    // valid) versions of the same block. We defend against this by detecting\n+    // the case where we would hash two identical hashes at the end of the list\n+    // together, and treating that identically to the block having an invalid\n+    // merkle root. Assuming no double-SHA256 collisions, this will detect all\n+    // known ways of changing the transactions without affecting the merkle\n+    // root.\n     vMerkleTree.clear();\n+    vMerkleTree.reserve(vtx.size() * 2 + 16); // Safe upper bound for the number of total nodes.\n     BOOST_FOREACH(const CTransaction& tx, vtx)\n         vMerkleTree.push_back(tx.GetHash());\n     int j = 0;\n+    bool mutated = false;\n     for (int nSize = vtx.size(); nSize > 1; nSize = (nSize + 1) / 2)\n     {\n         for (int i = 0; i < nSize; i += 2)\n         {\n             int i2 = std::min(i+1, nSize-1);\n+            if (i2 == i + 1 && i2 + 1 == nSize && vMerkleTree[i] == vMerkleTree[i2]) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#discussion_r17963362",
      "id" : 17963362,
      "original_commit_id" : "c6ec0c446617278fa9a8f4db88df807bb7c0f9c4",
      "original_position" : 56,
      "path" : "src/core.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/4926",
      "updated_at" : "2014-09-24T17:17:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/17963362",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4926_584a358997e52a87e8c5402269c7fb3784ed2065/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-09-24T17:33:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56708303",
      "id" : 56708303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-24T17:33:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56708303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@laanwj Fixed the offsets.",
      "created_at" : "2014-09-24T19:32:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56725567",
      "id" : 56725567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-24T19:32:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56725567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Looks good to me now. ACK.",
      "created_at" : "2014-09-25T06:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-56778756",
      "id" : 56778756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-25T06:29:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/56778756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@gmaxwell @jgarzik Is this acceptable, or do we wait until comparisontool does non-bottom-level merkle malleability tests?",
      "created_at" : "2014-09-26T18:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-57003819",
      "id" : 57003819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-09-26T18:47:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57003819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gmaxwell Comparison tool now performs merkle malleability tests at non-bottom level.",
      "created_at" : "2014-10-02T02:25:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-57572625",
      "id" : 57572625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-10-02T02:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57572625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "re-ACK.",
      "created_at" : "2014-10-02T03:17:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/4926#issuecomment-57576741",
      "id" : 57576741,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4926",
      "updated_at" : "2014-10-02T03:17:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57576741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
