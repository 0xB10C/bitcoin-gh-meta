[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25116995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25116995"
         }
      },
      "body" : "whoops.",
      "commit_id" : "0b3887e441e5fcf63ea52d58948000ad8a2a0a8e",
      "created_at" : "2015-02-21T01:25:16Z",
      "diff_hunk" : "@@ -187,20 +187,20 @@ void WriteCompactSize(Stream& os, uint64_t nSize)\n {\n     if (nSize < 253)\n     {\n-        unsigned char chSize = nSize;\n+        unsigned char chSize = static_cast<unsigned char>(nSize);\n         WRITEDATA(os, chSize);\n     }\n     else if (nSize <= std::numeric_limits<unsigned short>::max())\n     {\n         unsigned char chSize = 253;\n-        unsigned short xSize = nSize;\n+        unsigned short xSize = static_cast<unsigned short>(nSize);\n         WRITEDATA(os, chSize);\n         WRITEDATA(os, xSize);\n     }\n     else if (nSize <= std::numeric_limits<unsigned int>::max())\n     {\n         unsigned char chSize = 254;\n-        unsigned int xSize = nSize;\n+        unsigned int xSize = static_cast<unsigned short>(nSize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25116995",
      "id" : 25116995,
      "original_commit_id" : "cc9c47c458f941e2b68fbd5e46112c0bd923c9f2",
      "original_position" : 43,
      "path" : "src/serialize.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811",
      "updated_at" : "2015-02-21T01:27:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25116995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni That is understandable, but there is only one line affected by this in the consensus build. Maybe that could be treated as an isolated case, since it's quite trivial.",
      "created_at" : "2015-02-21T01:33:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75348650",
      "id" : 75348650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T01:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75348650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=3",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "body" : "@evoskuil if anything, as long as we're counting on that behavior, the change should be more like:\r\n```\r\n#ifdef NDEBUG\r\n#error this is unsupported and very unwise.\r\n#endif\r\n```",
      "created_at" : "2015-02-21T01:39:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75349031",
      "id" : 75349031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T01:39:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75349031",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25117422"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25117422"
         }
      },
      "body" : "I missed this in my review before writing up my comments. This is a behavior change I meant to discuss before pushing. It doesn't factor in to the consensus call, and appears to be in error.  I would appreciate it if someone with more background would comment before I pull this out of the pull request.",
      "commit_id" : "0b3887e441e5fcf63ea52d58948000ad8a2a0a8e",
      "created_at" : "2015-02-21T01:40:22Z",
      "diff_hunk" : "@@ -68,8 +68,8 @@ bool CPubKey::Decompress() {\n         return false;\n #ifdef USE_SECP256K1\n     int clen = size();\n-    int ret = secp256k1_ecdsa_pubkey_decompress((unsigned char*)begin(), &clen);\n-    assert(ret);\n+    if (secp256k1_ec_pubkey_decompress((unsigned char*)begin(), &clen) == 0)\n+        return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25117422",
      "id" : 25117422,
      "original_commit_id" : "0b3887e441e5fcf63ea52d58948000ad8a2a0a8e",
      "original_position" : 34,
      "path" : "src/pubkey.cpp",
      "position" : 34,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811",
      "updated_at" : "2015-02-21T01:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25117422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=3",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25117477"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25117477"
         }
      },
      "body" : "This code (everything in #ifdef USE_SECP256k1) is currently unused, and should just be removed until it's actually supported.",
      "commit_id" : "0b3887e441e5fcf63ea52d58948000ad8a2a0a8e",
      "created_at" : "2015-02-21T01:42:41Z",
      "diff_hunk" : "@@ -68,8 +68,8 @@ bool CPubKey::Decompress() {\n         return false;\n #ifdef USE_SECP256K1\n     int clen = size();\n-    int ret = secp256k1_ecdsa_pubkey_decompress((unsigned char*)begin(), &clen);\n-    assert(ret);\n+    if (secp256k1_ec_pubkey_decompress((unsigned char*)begin(), &clen) == 0)\n+        return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#discussion_r25117477",
      "id" : 25117477,
      "original_commit_id" : "0b3887e441e5fcf63ea52d58948000ad8a2a0a8e",
      "original_position" : 34,
      "path" : "src/pubkey.cpp",
      "position" : 34,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5811",
      "updated_at" : "2015-02-21T01:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/25117477",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "I suspect that the crashes here are due to some wonky var shadowing issues in serialization. Assuming that's the case, those will need to be addressed before cleaning up unused vars.",
      "created_at" : "2015-02-21T01:47:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75349445",
      "id" : 75349445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T01:47:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75349445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni WRT the test fails, thanks for the hint, I wouldn't have guessed that.",
      "created_at" : "2015-02-21T02:06:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75350376",
      "id" : 75350376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T02:06:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75350376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=3",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "body" : "@theuni In the interest of resolving the other issues, I took up your suggestion and removed the sections of unsupported code: `NDEBUG` and `USE_SECP256K1`.",
      "created_at" : "2015-02-21T06:19:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75358386",
      "id" : 75358386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T06:19:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75358386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1369335?v=3",
         "events_url" : "https://api.github.com/users/evoskuil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/evoskuil/followers",
         "following_url" : "https://api.github.com/users/evoskuil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/evoskuil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/evoskuil",
         "id" : 1369335,
         "login" : "evoskuil",
         "organizations_url" : "https://api.github.com/users/evoskuil/orgs",
         "received_events_url" : "https://api.github.com/users/evoskuil/received_events",
         "repos_url" : "https://api.github.com/users/evoskuil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/evoskuil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/evoskuil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/evoskuil"
      }
   },
   {
      "body" : "Not sure the NDEBUG should be removed. At least it compiles (unlike libsecp256k1 validation).",
      "created_at" : "2015-02-21T06:26:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5811#issuecomment-75358607",
      "id" : 75358607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5811",
      "updated_at" : "2015-02-21T06:26:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/75358607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
