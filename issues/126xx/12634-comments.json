[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172936877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172936877"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Snake case is for variables.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T18:20:42Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+int64_t CTxMemPool::chain_limit_value(const uint256& txid) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172936877",
      "id" : 172936877,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 102040832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172936877",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172938327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172938327"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If not in the mempool could return 0 since `GetCountWithAncestors` and `GetCountWithDescendants` are always `> 0` (self is counted). In that case you can revert s/uint64_t/int64_t.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T18:25:20Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172938327",
      "id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102040832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172938327",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172941467"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172941467"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems like we are moving to snake case, e.g. for new code like\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/a34ac6ae0788b50e12dd2c8ac59dbda2a03a3c2e/src/cuckoocache.h#L92\r\n\r\nMaybe I'm mistaken on that one. Will check recent merges.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T18:35:00Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+int64_t CTxMemPool::chain_limit_value(const uint256& txid) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172941467",
      "id" : 172941467,
      "in_reply_to_id" : 172936877,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 102046075,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172941467",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172956896"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172956896"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "From the developer notes:\r\n  - Variable and namespace names are all lowercase, and may use `_` to\r\n    separate words (snake_case).\r\n  - Class names, function names and method names are UpperCamelCase\r\n    (PascalCase).\r\n",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T19:25:20Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+int64_t CTxMemPool::chain_limit_value(const uint256& txid) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172956896",
      "id" : 172956896,
      "in_reply_to_id" : 172936877,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 102064226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172956896",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172959441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172959441"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I looked in the code and it seems to me they can be both 0 and that self is not counted.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T19:33:29Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172959441",
      "id" : 172959441,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102067102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172959441",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172964915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172964915"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@NicolasDorier have you checked these?\r\nhttps://github.com/bitcoin/bitcoin/blob/a34ac6ae0788b50e12dd2c8ac59dbda2a03a3c2e/src/txmempool.cpp#L30\r\nhttps://github.com/bitcoin/bitcoin/blob/a34ac6ae0788b50e12dd2c8ac59dbda2a03a3c2e/src/txmempool.cpp#L36\r\nhttps://github.com/bitcoin/bitcoin/blob/a34ac6ae0788b50e12dd2c8ac59dbda2a03a3c2e/src/txmempool.cpp#L317\r\nhttps://github.com/bitcoin/bitcoin/blob/a34ac6ae0788b50e12dd2c8ac59dbda2a03a3c2e/src/txmempool.cpp#L326",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T19:52:36Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172964915",
      "id" : 172964915,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102073721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172964915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172984929"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172984929"
         }
      },
      "author_association" : "MEMBER",
      "body" : "woops, completely missed that indeed. I failed to notice how the clients were forcing this invariant though.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T21:07:51Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172984929",
      "id" : 172984929,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102097578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172984929",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172985902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172985902"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Got confused when I saw [that](https://github.com/bitcoin/bitcoin/blob/9501dc27b336fc20adb0c367e0904b57bd507f51/src/txmempool.cpp#L857) which seemed to me it could be 0.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-07T21:11:41Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r172985902",
      "id" : 172985902,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102098746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172985902",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173196924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173196924"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wow, okay. I totally missed that, thanks!",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T15:42:34Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+int64_t CTxMemPool::chain_limit_value(const uint256& txid) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173196924",
      "id" : 173196924,
      "in_reply_to_id" : 172936877,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 102345321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173196924",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173197224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173197224"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I made the change for a reason but that reason may have been flawed. I'll try it with uint64_t and 0 again. Thanks!",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T15:43:32Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173197224",
      "id" : 173197224,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102345657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173197224",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173215045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173215045"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T16:37:11Z",
      "diff_hunk" : "@@ -1055,11 +1055,10 @@ void CTxMemPool::TrimToSize(size_t sizelimit, std::vector<COutPoint>* pvNoSpends\n     }\n }\n \n-bool CTxMemPool::TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const {\n+int64_t CTxMemPool::chain_limit_value(const uint256& txid) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173215045",
      "id" : 173215045,
      "in_reply_to_id" : 172936877,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 5,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 102367402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173215045",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173225129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173225129"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The thing is, the check in `SelectCoinsMinConf` checks if the chain limit value `>= nMaxAncestors`, which is `0` for `no chained ancestors` in the code. With the old method, this would be true, but with a 0 returned, it would be false.\r\n\r\nI could change the `0` to a `1` to fix it, which may be a better solution here, and is probably what I will end up doing.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T17:08:24Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173225129",
      "id" : 173225129,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102379589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173225129",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173226846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173226846"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If I do that, the semantics becomes misleading. It says 'max *ancestors*' so 1 makes it sound like it allows 1 ancestor or descendant, when in reality it only counts itself. I'm gonna keep the change to signed, for now.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T17:14:24Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173226846",
      "id" : 173226846,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102381640,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T17:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173226846",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173249025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173249025"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed, now:\r\n\r\nwith @promag suggestion,  if `nMaxAncestors==0` and the tx is not in mempool then `mempool.ChainLimitValue(pcoin->GetHash()) >= nMaxAncestors` evaluate to `true`.\r\n\r\nWhile before `!mempool.TransactionWithinChainLimit(pcoin->GetHash(), nMaxAncestors)` evaluate to `false`.",
      "commit_id" : "b0928df0170d3e4bc6c7cf655ebbc0db62a90a10",
      "created_at" : "2018-03-08T18:32:31Z",
      "diff_hunk" : "@@ -619,8 +619,10 @@ class CTxMemPool\n     /** Expire all transaction (and their dependencies) in the mempool older than time. Return the number of removed transactions. */\n     int Expire(int64_t time);\n \n-    /** Returns false if the transaction is in the mempool and not within the chain limit specified. */\n-    bool TransactionWithinChainLimit(const uint256& txid, size_t chainLimit) const;\n+    /** Get the maximum of the chain limit value in the mempool of the given transaction.\n+      * If the transaction is not in the mempool, -1 is returned.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#discussion_r173249025",
      "id" : 173249025,
      "in_reply_to_id" : 172938327,
      "original_commit_id" : "667592e1b6b2d5532037fe6c290079a99691757e",
      "original_position" : 7,
      "path" : "src/txmempool.h",
      "position" : 7,
      "pull_request_review_id" : 102408048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12634",
      "updated_at" : "2018-03-08T18:32:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173249025",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK b0928df",
      "created_at" : "2018-03-08T18:33:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#issuecomment-371580080",
      "id" : 371580080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12634",
      "updated_at" : "2018-03-08T18:33:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371580080",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 8154223.",
      "created_at" : "2018-05-15T13:32:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#issuecomment-389167631",
      "id" : 389167631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12634",
      "updated_at" : "2018-05-15T13:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389167631",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I find this whole thing unnecessarily confusing. Not your change in particular, more how the code works today.\r\n\r\nThere are two separate config limits, `-limitancestorcount` and `-limitdescendantcount`, which are treated as the same and merged into a single limit `nMaxChainLength`. Then that value is compared against both the ancestor count and descendant count of the transaction containing the candidate output. So first, it seems like there should be a separate `max_descendants` field on EligibilityFilter.\r\n\r\nBut further, the descendants check isn't even right: the documentation says \"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants\". So the descendants check really needs to check the descendants count on all ancestors, not just the direct parent.\r\n\r\nRegardless of all that, even just looking at the ancestors limit, which is easier to check, I think it should not be a strict equality check, whereas it is currently in the code. If trying to spend an output from a transaction with 3 ancestors, the spending transaction would have 4 ancestors. Say the ancestor limit is 3. The code currently would call that spend ineligible because GetCountWithAncestors returns 3, and there is a strict < check, whereas the spend should be allowed because the ancestor count is not above the limit. So that is to say `TransactionLimitValue` can return 0 on the case where the tx is not in the mempool.",
      "created_at" : "2018-05-18T22:29:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12634#issuecomment-390349147",
      "id" : 390349147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12634",
      "updated_at" : "2018-05-18T22:29:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390349147",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   }
]
