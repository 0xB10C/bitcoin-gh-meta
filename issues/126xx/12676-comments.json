[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Please note, I copied SignalsOptInRBF() from policy/rbf.cpp into core_write.cpp.\r\n\r\nThis is probably not a good way to do, but it was done for now, because rbf.cpp isn't avaliable in LIBBITCOIN_COMMON. However, simply moving rbf.cpp from LIBBITCOIN_SERVER to LIBBITCOIN_COMMON doesn't work, because IsRBFOptIn() in rbf.cpp has mempool dependencies, which are also not available.\r\n\r\nAs alternative I could imagine to split rbf.cpp into something like rbf.cpp and rbfoptin.cpp?",
      "created_at" : "2018-03-12T09:56:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12676#issuecomment-372252842",
      "id" : 372252842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12676",
      "updated_at" : "2018-03-12T10:34:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372252842",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5836089?v=4",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173776923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173776923"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Imo this should be the same key-value as the `bip125-replaceable` in the rpcwallet",
      "commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "created_at" : "2018-03-12T12:21:25Z",
      "diff_hunk" : "@@ -162,6 +172,7 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"size\", (int)::GetSerializeSize(tx, SER_NETWORK, PROTOCOL_VERSION));\n     entry.pushKV(\"vsize\", (GetTransactionWeight(tx) + WITNESS_SCALE_FACTOR - 1) / WITNESS_SCALE_FACTOR);\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n+    entry.pushKV(\"replaceable\", SignalsOptInRBF(tx));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173776923",
      "id" : 173776923,
      "original_commit_id" : "6436b6b8634aec93916e8da3aa0770c8dfe6f0be",
      "original_position" : 21,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 103019128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676",
      "updated_at" : "2018-03-12T13:55:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173776923",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173803498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173803498"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good idea! I updated the PR.",
      "commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "created_at" : "2018-03-12T13:54:20Z",
      "diff_hunk" : "@@ -162,6 +172,7 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"size\", (int)::GetSerializeSize(tx, SER_NETWORK, PROTOCOL_VERSION));\n     entry.pushKV(\"vsize\", (GetTransactionWeight(tx) + WITNESS_SCALE_FACTOR - 1) / WITNESS_SCALE_FACTOR);\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n+    entry.pushKV(\"replaceable\", SignalsOptInRBF(tx));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173803498",
      "id" : 173803498,
      "in_reply_to_id" : 173776923,
      "original_commit_id" : "6436b6b8634aec93916e8da3aa0770c8dfe6f0be",
      "original_position" : 21,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 103050868,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676",
      "updated_at" : "2018-03-12T13:55:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173803498",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5836089?v=4",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173809273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173809273"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`SignalsOptInRBF` is *not* bip125-replacable.\r\n\r\n* Confirmed transaction can never be replaced in the mempool\r\n* Unconfirmed transactions that depend on a mempool-transaction that signals opt in rbf can be replaced",
      "commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "created_at" : "2018-03-12T14:11:15Z",
      "diff_hunk" : "@@ -162,6 +172,7 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"size\", (int)::GetSerializeSize(tx, SER_NETWORK, PROTOCOL_VERSION));\n     entry.pushKV(\"vsize\", (GetTransactionWeight(tx) + WITNESS_SCALE_FACTOR - 1) / WITNESS_SCALE_FACTOR);\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n+    entry.pushKV(\"bip125-replaceable\", SignalsOptInRBF(tx));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173809273",
      "id" : 173809273,
      "original_commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "original_position" : 21,
      "path" : "src/core_write.cpp",
      "position" : 21,
      "pull_request_review_id" : 103057921,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676",
      "updated_at" : "2018-03-12T14:11:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173809273",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173822544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173822544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would you suggest to rename the flag to something like `signals-rbf`? Or rather do a stateful check, whether the transaction is actually replaceable, when the call is made?\r\n\r\nThe latter would probably be very useful, but given that `TxToUniv` isn't stateful and currently doesn't have any mempool relation, I don't see a straight forward way for this.",
      "commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "created_at" : "2018-03-12T14:48:32Z",
      "diff_hunk" : "@@ -162,6 +172,7 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"size\", (int)::GetSerializeSize(tx, SER_NETWORK, PROTOCOL_VERSION));\n     entry.pushKV(\"vsize\", (GetTransactionWeight(tx) + WITNESS_SCALE_FACTOR - 1) / WITNESS_SCALE_FACTOR);\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n+    entry.pushKV(\"bip125-replaceable\", SignalsOptInRBF(tx));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12676#discussion_r173822544",
      "id" : 173822544,
      "in_reply_to_id" : 173809273,
      "original_commit_id" : "e62c505f7e73727acb3ebdfea1f9048a1d3a1d94",
      "original_position" : 21,
      "path" : "src/core_write.cpp",
      "position" : 21,
      "pull_request_review_id" : 103074214,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12676",
      "updated_at" : "2018-03-12T15:10:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/173822544",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/5836089?v=4",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   }
]
