[
   {
      "author_association" : "MEMBER",
      "body" : "@sipsorcery Could you help with adding MSVC build config here?",
      "created_at" : "2021-05-05T02:04:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832366353",
      "id" : 832366353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjM2NjM1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T02:04:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832366353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa will do.",
      "created_at" : "2021-05-05T07:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832472531",
      "id" : 832472531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjQ3MjUzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T07:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832472531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From ci:\r\n\r\n```\r\n\r\nSUMMARY: MemorySanitizer: use-of-uninitialized-value /tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/minisketch/src/fields/clmul_common_impl.h:23:23 in unsigned int (anonymous namespace)::MulWithClMulReduce<unsigned int, 32, 141u>(unsigned int, unsigned int)\r\n  ORIGIN: invalid (0). Might be a bug in MemorySanitizer origin tracking.\r\n    This could still be a bug in your code, too!",
      "created_at" : "2021-05-05T07:28:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832474947",
      "id" : 832474947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjQ3NDk0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T07:28:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832474947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I believe it is simply msan not being able to reason through the intrinsics (see src/minisketch/src/field/clmul_common_impl.h).",
      "created_at" : "2021-05-05T07:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832476787",
      "id" : 832476787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjQ3Njc4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T07:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832476787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r626504683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626504683"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`ba` isn't used. Can it be removed?",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-05T12:04:35Z",
      "diff_hunk" : "@@ -0,0 +1,452 @@\n+/**********************************************************************\n+ * Copyright (c) 2018 Pieter Wuille, Greg Maxwell, Gleb Naumenko      *\n+ * Distributed under the MIT software license, see the accompanying   *\n+ * file LICENSE or http://www.opensource.org/licenses/mit-license.php.*\n+ **********************************************************************/\n+\n+#include <new>\n+\n+#include \"../include/minisketch.h\"\n+\n+#include \"false_positives.h\"\n+#include \"sketch.h\"\n+\n+#ifdef HAVE_CLMUL\n+#include <cpuid.h>\n+#endif\n+\n+Sketch* ConstructGeneric1Byte(int bits, int implementation);\n+Sketch* ConstructGeneric2Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric3Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric4Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric5Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric6Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric7Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric8Bytes(int bits, int implementation);\n+\n+#ifdef HAVE_CLMUL\n+Sketch* ConstructClMul1Byte(int bits, int implementation);\n+Sketch* ConstructClMul2Bytes(int bits, int implementation);\n+Sketch* ConstructClMul3Bytes(int bits, int implementation);\n+Sketch* ConstructClMul4Bytes(int bits, int implementation);\n+Sketch* ConstructClMul5Bytes(int bits, int implementation);\n+Sketch* ConstructClMul6Bytes(int bits, int implementation);\n+Sketch* ConstructClMul7Bytes(int bits, int implementation);\n+Sketch* ConstructClMul8Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri1Byte(int bits, int implementation);\n+Sketch* ConstructClMulTri2Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri3Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri4Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri5Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri6Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri7Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri8Bytes(int bits, int implementation);\n+#endif\n+\n+namespace {\n+\n+enum class FieldImpl {\n+    GENERIC = 0,\n+#ifdef HAVE_CLMUL\n+    CLMUL,\n+    CLMUL_TRI,\n+#endif\n+};\n+\n+Sketch* Construct(int bits, int impl)\n+{\n+    switch (FieldImpl(impl)) {\n+    case FieldImpl::GENERIC:\n+        switch ((bits + 7) / 8) {\n+        case 1:\n+            return ConstructGeneric1Byte(bits, impl);\n+        case 2:\n+            return ConstructGeneric2Bytes(bits, impl);\n+        case 3:\n+            return ConstructGeneric3Bytes(bits, impl);\n+        case 4:\n+            return ConstructGeneric4Bytes(bits, impl);\n+        case 5:\n+            return ConstructGeneric5Bytes(bits, impl);\n+        case 6:\n+            return ConstructGeneric6Bytes(bits, impl);\n+        case 7:\n+            return ConstructGeneric7Bytes(bits, impl);\n+        case 8:\n+            return ConstructGeneric8Bytes(bits, impl);\n+        default:\n+            return nullptr;\n+        }\n+#ifdef HAVE_CLMUL\n+    case FieldImpl::CLMUL:\n+    case FieldImpl::CLMUL_TRI: {\n+        uint32_t eax, ebx, ecx, edx;\n+        if (__get_cpuid(1, &eax, &ebx, &ecx, &edx) && (ecx & 0x2)) {\n+            switch ((bits + 7) / 8) {\n+            case 1:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul1Byte(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri1Byte(bits, impl);\n+            case 2:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul2Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri2Bytes(bits, impl);\n+            case 3:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul3Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri3Bytes(bits, impl);\n+            case 4:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul4Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri4Bytes(bits, impl);\n+            case 5:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul5Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri5Bytes(bits, impl);\n+            case 6:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul6Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri6Bytes(bits, impl);\n+            case 7:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul7Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri7Bytes(bits, impl);\n+            case 8:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul8Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri8Bytes(bits, impl);\n+            default:\n+                return nullptr;\n+            }\n+        }\n+    }\n+#endif\n+    }\n+    return nullptr;\n+}\n+\n+}\n+\n+extern \"C\" {\n+\n+int minisketch_bits_supported(uint32_t bits) {\n+#ifndef DISABLE_FIELD_2\n+    if (bits == 2) return true;\n+#endif\n+#ifndef DISABLE_FIELD_3\n+    if (bits == 3) return true;\n+#endif\n+#ifndef DISABLE_FIELD_4\n+    if (bits == 4) return true;\n+#endif\n+#ifndef DISABLE_FIELD_5\n+    if (bits == 5) return true;\n+#endif\n+#ifndef DISABLE_FIELD_6\n+    if (bits == 6) return true;\n+#endif\n+#ifndef DISABLE_FIELD_7\n+    if (bits == 7) return true;\n+#endif\n+#ifndef DISABLE_FIELD_8\n+    if (bits == 8) return true;\n+#endif\n+#ifndef DISABLE_FIELD_9\n+    if (bits == 9) return true;\n+#endif\n+#ifndef DISABLE_FIELD_10\n+    if (bits == 10) return true;\n+#endif\n+#ifndef DISABLE_FIELD_11\n+    if (bits == 11) return true;\n+#endif\n+#ifndef DISABLE_FIELD_12\n+    if (bits == 12) return true;\n+#endif\n+#ifndef DISABLE_FIELD_13\n+    if (bits == 13) return true;\n+#endif\n+#ifndef DISABLE_FIELD_14\n+    if (bits == 14) return true;\n+#endif\n+#ifndef DISABLE_FIELD_15\n+    if (bits == 15) return true;\n+#endif\n+#ifndef DISABLE_FIELD_16\n+    if (bits == 16) return true;\n+#endif\n+#ifndef DISABLE_FIELD_17\n+    if (bits == 17) return true;\n+#endif\n+#ifndef DISABLE_FIELD_18\n+    if (bits == 18) return true;\n+#endif\n+#ifndef DISABLE_FIELD_19\n+    if (bits == 19) return true;\n+#endif\n+#ifndef DISABLE_FIELD_20\n+    if (bits == 20) return true;\n+#endif\n+#ifndef DISABLE_FIELD_21\n+    if (bits == 21) return true;\n+#endif\n+#ifndef DISABLE_FIELD_22\n+    if (bits == 22) return true;\n+#endif\n+#ifndef DISABLE_FIELD_23\n+    if (bits == 23) return true;\n+#endif\n+#ifndef DISABLE_FIELD_24\n+    if (bits == 24) return true;\n+#endif\n+#ifndef DISABLE_FIELD_25\n+    if (bits == 25) return true;\n+#endif\n+#ifndef DISABLE_FIELD_26\n+    if (bits == 26) return true;\n+#endif\n+#ifndef DISABLE_FIELD_27\n+    if (bits == 27) return true;\n+#endif\n+#ifndef DISABLE_FIELD_28\n+    if (bits == 28) return true;\n+#endif\n+#ifndef DISABLE_FIELD_29\n+    if (bits == 29) return true;\n+#endif\n+#ifndef DISABLE_FIELD_30\n+    if (bits == 30) return true;\n+#endif\n+#ifndef DISABLE_FIELD_31\n+    if (bits == 31) return true;\n+#endif\n+#ifndef DISABLE_FIELD_32\n+    if (bits == 32) return true;\n+#endif\n+#ifndef DISABLE_FIELD_33\n+    if (bits == 33) return true;\n+#endif\n+#ifndef DISABLE_FIELD_34\n+    if (bits == 34) return true;\n+#endif\n+#ifndef DISABLE_FIELD_35\n+    if (bits == 35) return true;\n+#endif\n+#ifndef DISABLE_FIELD_36\n+    if (bits == 36) return true;\n+#endif\n+#ifndef DISABLE_FIELD_37\n+    if (bits == 37) return true;\n+#endif\n+#ifndef DISABLE_FIELD_38\n+    if (bits == 38) return true;\n+#endif\n+#ifndef DISABLE_FIELD_39\n+    if (bits == 39) return true;\n+#endif\n+#ifndef DISABLE_FIELD_40\n+    if (bits == 40) return true;\n+#endif\n+#ifndef DISABLE_FIELD_41\n+    if (bits == 41) return true;\n+#endif\n+#ifndef DISABLE_FIELD_42\n+    if (bits == 42) return true;\n+#endif\n+#ifndef DISABLE_FIELD_43\n+    if (bits == 43) return true;\n+#endif\n+#ifndef DISABLE_FIELD_44\n+    if (bits == 44) return true;\n+#endif\n+#ifndef DISABLE_FIELD_45\n+    if (bits == 45) return true;\n+#endif\n+#ifndef DISABLE_FIELD_46\n+    if (bits == 46) return true;\n+#endif\n+#ifndef DISABLE_FIELD_47\n+    if (bits == 47) return true;\n+#endif\n+#ifndef DISABLE_FIELD_48\n+    if (bits == 48) return true;\n+#endif\n+#ifndef DISABLE_FIELD_49\n+    if (bits == 49) return true;\n+#endif\n+#ifndef DISABLE_FIELD_50\n+    if (bits == 50) return true;\n+#endif\n+#ifndef DISABLE_FIELD_51\n+    if (bits == 51) return true;\n+#endif\n+#ifndef DISABLE_FIELD_52\n+    if (bits == 52) return true;\n+#endif\n+#ifndef DISABLE_FIELD_53\n+    if (bits == 53) return true;\n+#endif\n+#ifndef DISABLE_FIELD_54\n+    if (bits == 54) return true;\n+#endif\n+#ifndef DISABLE_FIELD_55\n+    if (bits == 55) return true;\n+#endif\n+#ifndef DISABLE_FIELD_56\n+    if (bits == 56) return true;\n+#endif\n+#ifndef DISABLE_FIELD_57\n+    if (bits == 57) return true;\n+#endif\n+#ifndef DISABLE_FIELD_58\n+    if (bits == 58) return true;\n+#endif\n+#ifndef DISABLE_FIELD_59\n+    if (bits == 59) return true;\n+#endif\n+#ifndef DISABLE_FIELD_60\n+    if (bits == 60) return true;\n+#endif\n+#ifndef DISABLE_FIELD_61\n+    if (bits == 61) return true;\n+#endif\n+#ifndef DISABLE_FIELD_62\n+    if (bits == 62) return true;\n+#endif\n+#ifndef DISABLE_FIELD_63\n+    if (bits == 63) return true;\n+#endif\n+#ifndef DISABLE_FIELD_64\n+    if (bits == 64) return true;\n+#endif\n+    return false;\n+}\n+\n+uint32_t minisketch_implementation_max() {\n+    uint32_t ret = 0;\n+#ifdef HAVE_CLMUL\n+    ret += 2;\n+#endif\n+    return ret;\n+}\n+\n+int minisketch_implementation_supported(uint32_t bits, uint32_t implementation) {\n+    if (!minisketch_bits_supported(bits) || implementation > minisketch_implementation_max()) {\n+        return 0;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            delete sketch;\n+            return 1;\n+        }\n+    } catch (std::bad_alloc& ba) {}\n+    return 0;\n+}\n+\n+minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity) {\n+    if (capacity == 0) {\n+        return nullptr;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            try {\n+                sketch->Init(capacity);\n+            } catch (std::bad_alloc& ba) {\n+                delete sketch;\n+                throw;\n+            }\n+            sketch->Ready();\n+        }\n+        return (minisketch*)sketch;\n+    } catch (std::bad_alloc& ba) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r626504683",
      "id" : 626504683,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjUwNDY4Mw==",
      "original_commit_id" : "7faf0937cf772a34794f1ad33c03fdee222252a7",
      "original_line" : 355,
      "original_position" : 355,
      "original_start_line" : null,
      "path" : "src/minisketch/src/minisketch.cpp",
      "position" : null,
      "pull_request_review_id" : 652222652,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-08T21:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626504683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r626505082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626505082"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ba isn't used. Can it be removed?",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-05T12:05:23Z",
      "diff_hunk" : "@@ -0,0 +1,452 @@\n+/**********************************************************************\n+ * Copyright (c) 2018 Pieter Wuille, Greg Maxwell, Gleb Naumenko      *\n+ * Distributed under the MIT software license, see the accompanying   *\n+ * file LICENSE or http://www.opensource.org/licenses/mit-license.php.*\n+ **********************************************************************/\n+\n+#include <new>\n+\n+#include \"../include/minisketch.h\"\n+\n+#include \"false_positives.h\"\n+#include \"sketch.h\"\n+\n+#ifdef HAVE_CLMUL\n+#include <cpuid.h>\n+#endif\n+\n+Sketch* ConstructGeneric1Byte(int bits, int implementation);\n+Sketch* ConstructGeneric2Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric3Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric4Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric5Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric6Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric7Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric8Bytes(int bits, int implementation);\n+\n+#ifdef HAVE_CLMUL\n+Sketch* ConstructClMul1Byte(int bits, int implementation);\n+Sketch* ConstructClMul2Bytes(int bits, int implementation);\n+Sketch* ConstructClMul3Bytes(int bits, int implementation);\n+Sketch* ConstructClMul4Bytes(int bits, int implementation);\n+Sketch* ConstructClMul5Bytes(int bits, int implementation);\n+Sketch* ConstructClMul6Bytes(int bits, int implementation);\n+Sketch* ConstructClMul7Bytes(int bits, int implementation);\n+Sketch* ConstructClMul8Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri1Byte(int bits, int implementation);\n+Sketch* ConstructClMulTri2Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri3Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri4Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri5Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri6Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri7Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri8Bytes(int bits, int implementation);\n+#endif\n+\n+namespace {\n+\n+enum class FieldImpl {\n+    GENERIC = 0,\n+#ifdef HAVE_CLMUL\n+    CLMUL,\n+    CLMUL_TRI,\n+#endif\n+};\n+\n+Sketch* Construct(int bits, int impl)\n+{\n+    switch (FieldImpl(impl)) {\n+    case FieldImpl::GENERIC:\n+        switch ((bits + 7) / 8) {\n+        case 1:\n+            return ConstructGeneric1Byte(bits, impl);\n+        case 2:\n+            return ConstructGeneric2Bytes(bits, impl);\n+        case 3:\n+            return ConstructGeneric3Bytes(bits, impl);\n+        case 4:\n+            return ConstructGeneric4Bytes(bits, impl);\n+        case 5:\n+            return ConstructGeneric5Bytes(bits, impl);\n+        case 6:\n+            return ConstructGeneric6Bytes(bits, impl);\n+        case 7:\n+            return ConstructGeneric7Bytes(bits, impl);\n+        case 8:\n+            return ConstructGeneric8Bytes(bits, impl);\n+        default:\n+            return nullptr;\n+        }\n+#ifdef HAVE_CLMUL\n+    case FieldImpl::CLMUL:\n+    case FieldImpl::CLMUL_TRI: {\n+        uint32_t eax, ebx, ecx, edx;\n+        if (__get_cpuid(1, &eax, &ebx, &ecx, &edx) && (ecx & 0x2)) {\n+            switch ((bits + 7) / 8) {\n+            case 1:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul1Byte(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri1Byte(bits, impl);\n+            case 2:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul2Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri2Bytes(bits, impl);\n+            case 3:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul3Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri3Bytes(bits, impl);\n+            case 4:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul4Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri4Bytes(bits, impl);\n+            case 5:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul5Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri5Bytes(bits, impl);\n+            case 6:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul6Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri6Bytes(bits, impl);\n+            case 7:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul7Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri7Bytes(bits, impl);\n+            case 8:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul8Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri8Bytes(bits, impl);\n+            default:\n+                return nullptr;\n+            }\n+        }\n+    }\n+#endif\n+    }\n+    return nullptr;\n+}\n+\n+}\n+\n+extern \"C\" {\n+\n+int minisketch_bits_supported(uint32_t bits) {\n+#ifndef DISABLE_FIELD_2\n+    if (bits == 2) return true;\n+#endif\n+#ifndef DISABLE_FIELD_3\n+    if (bits == 3) return true;\n+#endif\n+#ifndef DISABLE_FIELD_4\n+    if (bits == 4) return true;\n+#endif\n+#ifndef DISABLE_FIELD_5\n+    if (bits == 5) return true;\n+#endif\n+#ifndef DISABLE_FIELD_6\n+    if (bits == 6) return true;\n+#endif\n+#ifndef DISABLE_FIELD_7\n+    if (bits == 7) return true;\n+#endif\n+#ifndef DISABLE_FIELD_8\n+    if (bits == 8) return true;\n+#endif\n+#ifndef DISABLE_FIELD_9\n+    if (bits == 9) return true;\n+#endif\n+#ifndef DISABLE_FIELD_10\n+    if (bits == 10) return true;\n+#endif\n+#ifndef DISABLE_FIELD_11\n+    if (bits == 11) return true;\n+#endif\n+#ifndef DISABLE_FIELD_12\n+    if (bits == 12) return true;\n+#endif\n+#ifndef DISABLE_FIELD_13\n+    if (bits == 13) return true;\n+#endif\n+#ifndef DISABLE_FIELD_14\n+    if (bits == 14) return true;\n+#endif\n+#ifndef DISABLE_FIELD_15\n+    if (bits == 15) return true;\n+#endif\n+#ifndef DISABLE_FIELD_16\n+    if (bits == 16) return true;\n+#endif\n+#ifndef DISABLE_FIELD_17\n+    if (bits == 17) return true;\n+#endif\n+#ifndef DISABLE_FIELD_18\n+    if (bits == 18) return true;\n+#endif\n+#ifndef DISABLE_FIELD_19\n+    if (bits == 19) return true;\n+#endif\n+#ifndef DISABLE_FIELD_20\n+    if (bits == 20) return true;\n+#endif\n+#ifndef DISABLE_FIELD_21\n+    if (bits == 21) return true;\n+#endif\n+#ifndef DISABLE_FIELD_22\n+    if (bits == 22) return true;\n+#endif\n+#ifndef DISABLE_FIELD_23\n+    if (bits == 23) return true;\n+#endif\n+#ifndef DISABLE_FIELD_24\n+    if (bits == 24) return true;\n+#endif\n+#ifndef DISABLE_FIELD_25\n+    if (bits == 25) return true;\n+#endif\n+#ifndef DISABLE_FIELD_26\n+    if (bits == 26) return true;\n+#endif\n+#ifndef DISABLE_FIELD_27\n+    if (bits == 27) return true;\n+#endif\n+#ifndef DISABLE_FIELD_28\n+    if (bits == 28) return true;\n+#endif\n+#ifndef DISABLE_FIELD_29\n+    if (bits == 29) return true;\n+#endif\n+#ifndef DISABLE_FIELD_30\n+    if (bits == 30) return true;\n+#endif\n+#ifndef DISABLE_FIELD_31\n+    if (bits == 31) return true;\n+#endif\n+#ifndef DISABLE_FIELD_32\n+    if (bits == 32) return true;\n+#endif\n+#ifndef DISABLE_FIELD_33\n+    if (bits == 33) return true;\n+#endif\n+#ifndef DISABLE_FIELD_34\n+    if (bits == 34) return true;\n+#endif\n+#ifndef DISABLE_FIELD_35\n+    if (bits == 35) return true;\n+#endif\n+#ifndef DISABLE_FIELD_36\n+    if (bits == 36) return true;\n+#endif\n+#ifndef DISABLE_FIELD_37\n+    if (bits == 37) return true;\n+#endif\n+#ifndef DISABLE_FIELD_38\n+    if (bits == 38) return true;\n+#endif\n+#ifndef DISABLE_FIELD_39\n+    if (bits == 39) return true;\n+#endif\n+#ifndef DISABLE_FIELD_40\n+    if (bits == 40) return true;\n+#endif\n+#ifndef DISABLE_FIELD_41\n+    if (bits == 41) return true;\n+#endif\n+#ifndef DISABLE_FIELD_42\n+    if (bits == 42) return true;\n+#endif\n+#ifndef DISABLE_FIELD_43\n+    if (bits == 43) return true;\n+#endif\n+#ifndef DISABLE_FIELD_44\n+    if (bits == 44) return true;\n+#endif\n+#ifndef DISABLE_FIELD_45\n+    if (bits == 45) return true;\n+#endif\n+#ifndef DISABLE_FIELD_46\n+    if (bits == 46) return true;\n+#endif\n+#ifndef DISABLE_FIELD_47\n+    if (bits == 47) return true;\n+#endif\n+#ifndef DISABLE_FIELD_48\n+    if (bits == 48) return true;\n+#endif\n+#ifndef DISABLE_FIELD_49\n+    if (bits == 49) return true;\n+#endif\n+#ifndef DISABLE_FIELD_50\n+    if (bits == 50) return true;\n+#endif\n+#ifndef DISABLE_FIELD_51\n+    if (bits == 51) return true;\n+#endif\n+#ifndef DISABLE_FIELD_52\n+    if (bits == 52) return true;\n+#endif\n+#ifndef DISABLE_FIELD_53\n+    if (bits == 53) return true;\n+#endif\n+#ifndef DISABLE_FIELD_54\n+    if (bits == 54) return true;\n+#endif\n+#ifndef DISABLE_FIELD_55\n+    if (bits == 55) return true;\n+#endif\n+#ifndef DISABLE_FIELD_56\n+    if (bits == 56) return true;\n+#endif\n+#ifndef DISABLE_FIELD_57\n+    if (bits == 57) return true;\n+#endif\n+#ifndef DISABLE_FIELD_58\n+    if (bits == 58) return true;\n+#endif\n+#ifndef DISABLE_FIELD_59\n+    if (bits == 59) return true;\n+#endif\n+#ifndef DISABLE_FIELD_60\n+    if (bits == 60) return true;\n+#endif\n+#ifndef DISABLE_FIELD_61\n+    if (bits == 61) return true;\n+#endif\n+#ifndef DISABLE_FIELD_62\n+    if (bits == 62) return true;\n+#endif\n+#ifndef DISABLE_FIELD_63\n+    if (bits == 63) return true;\n+#endif\n+#ifndef DISABLE_FIELD_64\n+    if (bits == 64) return true;\n+#endif\n+    return false;\n+}\n+\n+uint32_t minisketch_implementation_max() {\n+    uint32_t ret = 0;\n+#ifdef HAVE_CLMUL\n+    ret += 2;\n+#endif\n+    return ret;\n+}\n+\n+int minisketch_implementation_supported(uint32_t bits, uint32_t implementation) {\n+    if (!minisketch_bits_supported(bits) || implementation > minisketch_implementation_max()) {\n+        return 0;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            delete sketch;\n+            return 1;\n+        }\n+    } catch (std::bad_alloc& ba) {}\n+    return 0;\n+}\n+\n+minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity) {\n+    if (capacity == 0) {\n+        return nullptr;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            try {\n+                sketch->Init(capacity);\n+            } catch (std::bad_alloc& ba) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r626505082",
      "id" : 626505082,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNjUwNTA4Mg==",
      "original_commit_id" : "7faf0937cf772a34794f1ad33c03fdee222252a7",
      "original_line" : 348,
      "original_position" : 348,
      "original_start_line" : null,
      "path" : "src/minisketch/src/minisketch.cpp",
      "position" : null,
      "pull_request_review_id" : 652223272,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-08T21:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/626505082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Attached diff adds a `minisketch` project to the msvc build config. I did make a few small code changes to `minisketch.h` and `minisketch.cpp` to remove a warning and change the location for a header.\r\n\r\n[minisketch.diff.gz](https://github.com/bitcoin/bitcoin/files/6427858/minisketch.diff.gz)\r\n",
      "created_at" : "2021-05-05T14:31:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832736638",
      "id" : 832736638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjczNjYzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T14:31:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832736638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-05-05T15:49:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-832804020",
      "id" : 832804020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjgwNDAyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-05T15:49:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832804020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do minisketch's own tests get run when running `make check` from bitcoin's base directory? I think it'd be good to modify `make check` to only run the base bitcoin tests, and then have another build target (`make check_all`?) that also runs the subtree unit tests. Those subtrees only get updated every few months. I expect many developers run `make check` many times a day and it seems wasteful to rerun the same unmodified tests on the same unmodified subtrees every time.",
      "created_at" : "2021-05-06T09:56:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-833397513",
      "id" : 833397513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMzM5NzUxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-06T09:56:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/833397513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "CI would need to run them, though. As this is the only place where sanitizers are run regularly.",
      "created_at" : "2021-05-06T10:12:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-833407347",
      "id" : 833407347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMzQwNzM0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-06T10:12:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/833407347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #22405 by fanquake\n* #22381 by fanquake\n* #21711 by dongcarl\n* #21515 by naumenkogs\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-05-07T09:10:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834196929",
      "id" : 834196929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDE5NjkyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-05T22:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834196929",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Failure on arm: `./build-aux/test-driver: line 107: ./test-verify: cannot execute binary file: Exec format error`\r\n\r\nYou might have to modify the `./ci/test/wrap-qemu.sh` script.",
      "created_at" : "2021-05-07T09:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834202423",
      "id" : 834202423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDIwMjQyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T09:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834202423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r628444294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/628444294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed, removed.",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-07T19:01:30Z",
      "diff_hunk" : "@@ -0,0 +1,452 @@\n+/**********************************************************************\n+ * Copyright (c) 2018 Pieter Wuille, Greg Maxwell, Gleb Naumenko      *\n+ * Distributed under the MIT software license, see the accompanying   *\n+ * file LICENSE or http://www.opensource.org/licenses/mit-license.php.*\n+ **********************************************************************/\n+\n+#include <new>\n+\n+#include \"../include/minisketch.h\"\n+\n+#include \"false_positives.h\"\n+#include \"sketch.h\"\n+\n+#ifdef HAVE_CLMUL\n+#include <cpuid.h>\n+#endif\n+\n+Sketch* ConstructGeneric1Byte(int bits, int implementation);\n+Sketch* ConstructGeneric2Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric3Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric4Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric5Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric6Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric7Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric8Bytes(int bits, int implementation);\n+\n+#ifdef HAVE_CLMUL\n+Sketch* ConstructClMul1Byte(int bits, int implementation);\n+Sketch* ConstructClMul2Bytes(int bits, int implementation);\n+Sketch* ConstructClMul3Bytes(int bits, int implementation);\n+Sketch* ConstructClMul4Bytes(int bits, int implementation);\n+Sketch* ConstructClMul5Bytes(int bits, int implementation);\n+Sketch* ConstructClMul6Bytes(int bits, int implementation);\n+Sketch* ConstructClMul7Bytes(int bits, int implementation);\n+Sketch* ConstructClMul8Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri1Byte(int bits, int implementation);\n+Sketch* ConstructClMulTri2Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri3Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri4Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri5Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri6Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri7Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri8Bytes(int bits, int implementation);\n+#endif\n+\n+namespace {\n+\n+enum class FieldImpl {\n+    GENERIC = 0,\n+#ifdef HAVE_CLMUL\n+    CLMUL,\n+    CLMUL_TRI,\n+#endif\n+};\n+\n+Sketch* Construct(int bits, int impl)\n+{\n+    switch (FieldImpl(impl)) {\n+    case FieldImpl::GENERIC:\n+        switch ((bits + 7) / 8) {\n+        case 1:\n+            return ConstructGeneric1Byte(bits, impl);\n+        case 2:\n+            return ConstructGeneric2Bytes(bits, impl);\n+        case 3:\n+            return ConstructGeneric3Bytes(bits, impl);\n+        case 4:\n+            return ConstructGeneric4Bytes(bits, impl);\n+        case 5:\n+            return ConstructGeneric5Bytes(bits, impl);\n+        case 6:\n+            return ConstructGeneric6Bytes(bits, impl);\n+        case 7:\n+            return ConstructGeneric7Bytes(bits, impl);\n+        case 8:\n+            return ConstructGeneric8Bytes(bits, impl);\n+        default:\n+            return nullptr;\n+        }\n+#ifdef HAVE_CLMUL\n+    case FieldImpl::CLMUL:\n+    case FieldImpl::CLMUL_TRI: {\n+        uint32_t eax, ebx, ecx, edx;\n+        if (__get_cpuid(1, &eax, &ebx, &ecx, &edx) && (ecx & 0x2)) {\n+            switch ((bits + 7) / 8) {\n+            case 1:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul1Byte(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri1Byte(bits, impl);\n+            case 2:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul2Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri2Bytes(bits, impl);\n+            case 3:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul3Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri3Bytes(bits, impl);\n+            case 4:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul4Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri4Bytes(bits, impl);\n+            case 5:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul5Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri5Bytes(bits, impl);\n+            case 6:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul6Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri6Bytes(bits, impl);\n+            case 7:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul7Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri7Bytes(bits, impl);\n+            case 8:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul8Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri8Bytes(bits, impl);\n+            default:\n+                return nullptr;\n+            }\n+        }\n+    }\n+#endif\n+    }\n+    return nullptr;\n+}\n+\n+}\n+\n+extern \"C\" {\n+\n+int minisketch_bits_supported(uint32_t bits) {\n+#ifndef DISABLE_FIELD_2\n+    if (bits == 2) return true;\n+#endif\n+#ifndef DISABLE_FIELD_3\n+    if (bits == 3) return true;\n+#endif\n+#ifndef DISABLE_FIELD_4\n+    if (bits == 4) return true;\n+#endif\n+#ifndef DISABLE_FIELD_5\n+    if (bits == 5) return true;\n+#endif\n+#ifndef DISABLE_FIELD_6\n+    if (bits == 6) return true;\n+#endif\n+#ifndef DISABLE_FIELD_7\n+    if (bits == 7) return true;\n+#endif\n+#ifndef DISABLE_FIELD_8\n+    if (bits == 8) return true;\n+#endif\n+#ifndef DISABLE_FIELD_9\n+    if (bits == 9) return true;\n+#endif\n+#ifndef DISABLE_FIELD_10\n+    if (bits == 10) return true;\n+#endif\n+#ifndef DISABLE_FIELD_11\n+    if (bits == 11) return true;\n+#endif\n+#ifndef DISABLE_FIELD_12\n+    if (bits == 12) return true;\n+#endif\n+#ifndef DISABLE_FIELD_13\n+    if (bits == 13) return true;\n+#endif\n+#ifndef DISABLE_FIELD_14\n+    if (bits == 14) return true;\n+#endif\n+#ifndef DISABLE_FIELD_15\n+    if (bits == 15) return true;\n+#endif\n+#ifndef DISABLE_FIELD_16\n+    if (bits == 16) return true;\n+#endif\n+#ifndef DISABLE_FIELD_17\n+    if (bits == 17) return true;\n+#endif\n+#ifndef DISABLE_FIELD_18\n+    if (bits == 18) return true;\n+#endif\n+#ifndef DISABLE_FIELD_19\n+    if (bits == 19) return true;\n+#endif\n+#ifndef DISABLE_FIELD_20\n+    if (bits == 20) return true;\n+#endif\n+#ifndef DISABLE_FIELD_21\n+    if (bits == 21) return true;\n+#endif\n+#ifndef DISABLE_FIELD_22\n+    if (bits == 22) return true;\n+#endif\n+#ifndef DISABLE_FIELD_23\n+    if (bits == 23) return true;\n+#endif\n+#ifndef DISABLE_FIELD_24\n+    if (bits == 24) return true;\n+#endif\n+#ifndef DISABLE_FIELD_25\n+    if (bits == 25) return true;\n+#endif\n+#ifndef DISABLE_FIELD_26\n+    if (bits == 26) return true;\n+#endif\n+#ifndef DISABLE_FIELD_27\n+    if (bits == 27) return true;\n+#endif\n+#ifndef DISABLE_FIELD_28\n+    if (bits == 28) return true;\n+#endif\n+#ifndef DISABLE_FIELD_29\n+    if (bits == 29) return true;\n+#endif\n+#ifndef DISABLE_FIELD_30\n+    if (bits == 30) return true;\n+#endif\n+#ifndef DISABLE_FIELD_31\n+    if (bits == 31) return true;\n+#endif\n+#ifndef DISABLE_FIELD_32\n+    if (bits == 32) return true;\n+#endif\n+#ifndef DISABLE_FIELD_33\n+    if (bits == 33) return true;\n+#endif\n+#ifndef DISABLE_FIELD_34\n+    if (bits == 34) return true;\n+#endif\n+#ifndef DISABLE_FIELD_35\n+    if (bits == 35) return true;\n+#endif\n+#ifndef DISABLE_FIELD_36\n+    if (bits == 36) return true;\n+#endif\n+#ifndef DISABLE_FIELD_37\n+    if (bits == 37) return true;\n+#endif\n+#ifndef DISABLE_FIELD_38\n+    if (bits == 38) return true;\n+#endif\n+#ifndef DISABLE_FIELD_39\n+    if (bits == 39) return true;\n+#endif\n+#ifndef DISABLE_FIELD_40\n+    if (bits == 40) return true;\n+#endif\n+#ifndef DISABLE_FIELD_41\n+    if (bits == 41) return true;\n+#endif\n+#ifndef DISABLE_FIELD_42\n+    if (bits == 42) return true;\n+#endif\n+#ifndef DISABLE_FIELD_43\n+    if (bits == 43) return true;\n+#endif\n+#ifndef DISABLE_FIELD_44\n+    if (bits == 44) return true;\n+#endif\n+#ifndef DISABLE_FIELD_45\n+    if (bits == 45) return true;\n+#endif\n+#ifndef DISABLE_FIELD_46\n+    if (bits == 46) return true;\n+#endif\n+#ifndef DISABLE_FIELD_47\n+    if (bits == 47) return true;\n+#endif\n+#ifndef DISABLE_FIELD_48\n+    if (bits == 48) return true;\n+#endif\n+#ifndef DISABLE_FIELD_49\n+    if (bits == 49) return true;\n+#endif\n+#ifndef DISABLE_FIELD_50\n+    if (bits == 50) return true;\n+#endif\n+#ifndef DISABLE_FIELD_51\n+    if (bits == 51) return true;\n+#endif\n+#ifndef DISABLE_FIELD_52\n+    if (bits == 52) return true;\n+#endif\n+#ifndef DISABLE_FIELD_53\n+    if (bits == 53) return true;\n+#endif\n+#ifndef DISABLE_FIELD_54\n+    if (bits == 54) return true;\n+#endif\n+#ifndef DISABLE_FIELD_55\n+    if (bits == 55) return true;\n+#endif\n+#ifndef DISABLE_FIELD_56\n+    if (bits == 56) return true;\n+#endif\n+#ifndef DISABLE_FIELD_57\n+    if (bits == 57) return true;\n+#endif\n+#ifndef DISABLE_FIELD_58\n+    if (bits == 58) return true;\n+#endif\n+#ifndef DISABLE_FIELD_59\n+    if (bits == 59) return true;\n+#endif\n+#ifndef DISABLE_FIELD_60\n+    if (bits == 60) return true;\n+#endif\n+#ifndef DISABLE_FIELD_61\n+    if (bits == 61) return true;\n+#endif\n+#ifndef DISABLE_FIELD_62\n+    if (bits == 62) return true;\n+#endif\n+#ifndef DISABLE_FIELD_63\n+    if (bits == 63) return true;\n+#endif\n+#ifndef DISABLE_FIELD_64\n+    if (bits == 64) return true;\n+#endif\n+    return false;\n+}\n+\n+uint32_t minisketch_implementation_max() {\n+    uint32_t ret = 0;\n+#ifdef HAVE_CLMUL\n+    ret += 2;\n+#endif\n+    return ret;\n+}\n+\n+int minisketch_implementation_supported(uint32_t bits, uint32_t implementation) {\n+    if (!minisketch_bits_supported(bits) || implementation > minisketch_implementation_max()) {\n+        return 0;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            delete sketch;\n+            return 1;\n+        }\n+    } catch (std::bad_alloc& ba) {}\n+    return 0;\n+}\n+\n+minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity) {\n+    if (capacity == 0) {\n+        return nullptr;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            try {\n+                sketch->Init(capacity);\n+            } catch (std::bad_alloc& ba) {\n+                delete sketch;\n+                throw;\n+            }\n+            sketch->Ready();\n+        }\n+        return (minisketch*)sketch;\n+    } catch (std::bad_alloc& ba) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r628444294",
      "id" : 628444294,
      "in_reply_to_id" : 626504683,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyODQ0NDI5NA==",
      "original_commit_id" : "7faf0937cf772a34794f1ad33c03fdee222252a7",
      "original_line" : 355,
      "original_position" : 355,
      "original_start_line" : null,
      "path" : "src/minisketch/src/minisketch.cpp",
      "position" : null,
      "pull_request_review_id" : 654786960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-08T21:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/628444294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r628444409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/628444409"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indeed, removed.",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-07T19:01:37Z",
      "diff_hunk" : "@@ -0,0 +1,452 @@\n+/**********************************************************************\n+ * Copyright (c) 2018 Pieter Wuille, Greg Maxwell, Gleb Naumenko      *\n+ * Distributed under the MIT software license, see the accompanying   *\n+ * file LICENSE or http://www.opensource.org/licenses/mit-license.php.*\n+ **********************************************************************/\n+\n+#include <new>\n+\n+#include \"../include/minisketch.h\"\n+\n+#include \"false_positives.h\"\n+#include \"sketch.h\"\n+\n+#ifdef HAVE_CLMUL\n+#include <cpuid.h>\n+#endif\n+\n+Sketch* ConstructGeneric1Byte(int bits, int implementation);\n+Sketch* ConstructGeneric2Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric3Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric4Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric5Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric6Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric7Bytes(int bits, int implementation);\n+Sketch* ConstructGeneric8Bytes(int bits, int implementation);\n+\n+#ifdef HAVE_CLMUL\n+Sketch* ConstructClMul1Byte(int bits, int implementation);\n+Sketch* ConstructClMul2Bytes(int bits, int implementation);\n+Sketch* ConstructClMul3Bytes(int bits, int implementation);\n+Sketch* ConstructClMul4Bytes(int bits, int implementation);\n+Sketch* ConstructClMul5Bytes(int bits, int implementation);\n+Sketch* ConstructClMul6Bytes(int bits, int implementation);\n+Sketch* ConstructClMul7Bytes(int bits, int implementation);\n+Sketch* ConstructClMul8Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri1Byte(int bits, int implementation);\n+Sketch* ConstructClMulTri2Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri3Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri4Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri5Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri6Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri7Bytes(int bits, int implementation);\n+Sketch* ConstructClMulTri8Bytes(int bits, int implementation);\n+#endif\n+\n+namespace {\n+\n+enum class FieldImpl {\n+    GENERIC = 0,\n+#ifdef HAVE_CLMUL\n+    CLMUL,\n+    CLMUL_TRI,\n+#endif\n+};\n+\n+Sketch* Construct(int bits, int impl)\n+{\n+    switch (FieldImpl(impl)) {\n+    case FieldImpl::GENERIC:\n+        switch ((bits + 7) / 8) {\n+        case 1:\n+            return ConstructGeneric1Byte(bits, impl);\n+        case 2:\n+            return ConstructGeneric2Bytes(bits, impl);\n+        case 3:\n+            return ConstructGeneric3Bytes(bits, impl);\n+        case 4:\n+            return ConstructGeneric4Bytes(bits, impl);\n+        case 5:\n+            return ConstructGeneric5Bytes(bits, impl);\n+        case 6:\n+            return ConstructGeneric6Bytes(bits, impl);\n+        case 7:\n+            return ConstructGeneric7Bytes(bits, impl);\n+        case 8:\n+            return ConstructGeneric8Bytes(bits, impl);\n+        default:\n+            return nullptr;\n+        }\n+#ifdef HAVE_CLMUL\n+    case FieldImpl::CLMUL:\n+    case FieldImpl::CLMUL_TRI: {\n+        uint32_t eax, ebx, ecx, edx;\n+        if (__get_cpuid(1, &eax, &ebx, &ecx, &edx) && (ecx & 0x2)) {\n+            switch ((bits + 7) / 8) {\n+            case 1:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul1Byte(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri1Byte(bits, impl);\n+            case 2:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul2Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri2Bytes(bits, impl);\n+            case 3:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul3Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri3Bytes(bits, impl);\n+            case 4:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul4Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri4Bytes(bits, impl);\n+            case 5:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul5Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri5Bytes(bits, impl);\n+            case 6:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul6Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri6Bytes(bits, impl);\n+            case 7:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul7Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri7Bytes(bits, impl);\n+            case 8:\n+                if (FieldImpl(impl) == FieldImpl::CLMUL) return ConstructClMul8Bytes(bits, impl);\n+                if (FieldImpl(impl) == FieldImpl::CLMUL_TRI) return ConstructClMulTri8Bytes(bits, impl);\n+            default:\n+                return nullptr;\n+            }\n+        }\n+    }\n+#endif\n+    }\n+    return nullptr;\n+}\n+\n+}\n+\n+extern \"C\" {\n+\n+int minisketch_bits_supported(uint32_t bits) {\n+#ifndef DISABLE_FIELD_2\n+    if (bits == 2) return true;\n+#endif\n+#ifndef DISABLE_FIELD_3\n+    if (bits == 3) return true;\n+#endif\n+#ifndef DISABLE_FIELD_4\n+    if (bits == 4) return true;\n+#endif\n+#ifndef DISABLE_FIELD_5\n+    if (bits == 5) return true;\n+#endif\n+#ifndef DISABLE_FIELD_6\n+    if (bits == 6) return true;\n+#endif\n+#ifndef DISABLE_FIELD_7\n+    if (bits == 7) return true;\n+#endif\n+#ifndef DISABLE_FIELD_8\n+    if (bits == 8) return true;\n+#endif\n+#ifndef DISABLE_FIELD_9\n+    if (bits == 9) return true;\n+#endif\n+#ifndef DISABLE_FIELD_10\n+    if (bits == 10) return true;\n+#endif\n+#ifndef DISABLE_FIELD_11\n+    if (bits == 11) return true;\n+#endif\n+#ifndef DISABLE_FIELD_12\n+    if (bits == 12) return true;\n+#endif\n+#ifndef DISABLE_FIELD_13\n+    if (bits == 13) return true;\n+#endif\n+#ifndef DISABLE_FIELD_14\n+    if (bits == 14) return true;\n+#endif\n+#ifndef DISABLE_FIELD_15\n+    if (bits == 15) return true;\n+#endif\n+#ifndef DISABLE_FIELD_16\n+    if (bits == 16) return true;\n+#endif\n+#ifndef DISABLE_FIELD_17\n+    if (bits == 17) return true;\n+#endif\n+#ifndef DISABLE_FIELD_18\n+    if (bits == 18) return true;\n+#endif\n+#ifndef DISABLE_FIELD_19\n+    if (bits == 19) return true;\n+#endif\n+#ifndef DISABLE_FIELD_20\n+    if (bits == 20) return true;\n+#endif\n+#ifndef DISABLE_FIELD_21\n+    if (bits == 21) return true;\n+#endif\n+#ifndef DISABLE_FIELD_22\n+    if (bits == 22) return true;\n+#endif\n+#ifndef DISABLE_FIELD_23\n+    if (bits == 23) return true;\n+#endif\n+#ifndef DISABLE_FIELD_24\n+    if (bits == 24) return true;\n+#endif\n+#ifndef DISABLE_FIELD_25\n+    if (bits == 25) return true;\n+#endif\n+#ifndef DISABLE_FIELD_26\n+    if (bits == 26) return true;\n+#endif\n+#ifndef DISABLE_FIELD_27\n+    if (bits == 27) return true;\n+#endif\n+#ifndef DISABLE_FIELD_28\n+    if (bits == 28) return true;\n+#endif\n+#ifndef DISABLE_FIELD_29\n+    if (bits == 29) return true;\n+#endif\n+#ifndef DISABLE_FIELD_30\n+    if (bits == 30) return true;\n+#endif\n+#ifndef DISABLE_FIELD_31\n+    if (bits == 31) return true;\n+#endif\n+#ifndef DISABLE_FIELD_32\n+    if (bits == 32) return true;\n+#endif\n+#ifndef DISABLE_FIELD_33\n+    if (bits == 33) return true;\n+#endif\n+#ifndef DISABLE_FIELD_34\n+    if (bits == 34) return true;\n+#endif\n+#ifndef DISABLE_FIELD_35\n+    if (bits == 35) return true;\n+#endif\n+#ifndef DISABLE_FIELD_36\n+    if (bits == 36) return true;\n+#endif\n+#ifndef DISABLE_FIELD_37\n+    if (bits == 37) return true;\n+#endif\n+#ifndef DISABLE_FIELD_38\n+    if (bits == 38) return true;\n+#endif\n+#ifndef DISABLE_FIELD_39\n+    if (bits == 39) return true;\n+#endif\n+#ifndef DISABLE_FIELD_40\n+    if (bits == 40) return true;\n+#endif\n+#ifndef DISABLE_FIELD_41\n+    if (bits == 41) return true;\n+#endif\n+#ifndef DISABLE_FIELD_42\n+    if (bits == 42) return true;\n+#endif\n+#ifndef DISABLE_FIELD_43\n+    if (bits == 43) return true;\n+#endif\n+#ifndef DISABLE_FIELD_44\n+    if (bits == 44) return true;\n+#endif\n+#ifndef DISABLE_FIELD_45\n+    if (bits == 45) return true;\n+#endif\n+#ifndef DISABLE_FIELD_46\n+    if (bits == 46) return true;\n+#endif\n+#ifndef DISABLE_FIELD_47\n+    if (bits == 47) return true;\n+#endif\n+#ifndef DISABLE_FIELD_48\n+    if (bits == 48) return true;\n+#endif\n+#ifndef DISABLE_FIELD_49\n+    if (bits == 49) return true;\n+#endif\n+#ifndef DISABLE_FIELD_50\n+    if (bits == 50) return true;\n+#endif\n+#ifndef DISABLE_FIELD_51\n+    if (bits == 51) return true;\n+#endif\n+#ifndef DISABLE_FIELD_52\n+    if (bits == 52) return true;\n+#endif\n+#ifndef DISABLE_FIELD_53\n+    if (bits == 53) return true;\n+#endif\n+#ifndef DISABLE_FIELD_54\n+    if (bits == 54) return true;\n+#endif\n+#ifndef DISABLE_FIELD_55\n+    if (bits == 55) return true;\n+#endif\n+#ifndef DISABLE_FIELD_56\n+    if (bits == 56) return true;\n+#endif\n+#ifndef DISABLE_FIELD_57\n+    if (bits == 57) return true;\n+#endif\n+#ifndef DISABLE_FIELD_58\n+    if (bits == 58) return true;\n+#endif\n+#ifndef DISABLE_FIELD_59\n+    if (bits == 59) return true;\n+#endif\n+#ifndef DISABLE_FIELD_60\n+    if (bits == 60) return true;\n+#endif\n+#ifndef DISABLE_FIELD_61\n+    if (bits == 61) return true;\n+#endif\n+#ifndef DISABLE_FIELD_62\n+    if (bits == 62) return true;\n+#endif\n+#ifndef DISABLE_FIELD_63\n+    if (bits == 63) return true;\n+#endif\n+#ifndef DISABLE_FIELD_64\n+    if (bits == 64) return true;\n+#endif\n+    return false;\n+}\n+\n+uint32_t minisketch_implementation_max() {\n+    uint32_t ret = 0;\n+#ifdef HAVE_CLMUL\n+    ret += 2;\n+#endif\n+    return ret;\n+}\n+\n+int minisketch_implementation_supported(uint32_t bits, uint32_t implementation) {\n+    if (!minisketch_bits_supported(bits) || implementation > minisketch_implementation_max()) {\n+        return 0;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            delete sketch;\n+            return 1;\n+        }\n+    } catch (std::bad_alloc& ba) {}\n+    return 0;\n+}\n+\n+minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity) {\n+    if (capacity == 0) {\n+        return nullptr;\n+    }\n+    try {\n+        Sketch* sketch = Construct(bits, implementation);\n+        if (sketch) {\n+            try {\n+                sketch->Init(capacity);\n+            } catch (std::bad_alloc& ba) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r628444409",
      "id" : 628444409,
      "in_reply_to_id" : 626505082,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyODQ0NDQwOQ==",
      "original_commit_id" : "7faf0937cf772a34794f1ad33c03fdee222252a7",
      "original_line" : 348,
      "original_position" : 348,
      "original_start_line" : null,
      "path" : "src/minisketch/src/minisketch.cpp",
      "position" : null,
      "pull_request_review_id" : 654787045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-08T21:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/628444409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipsorcery Thanks, I've incorporated some of your changes (see https://github.com/sipa/minisketch/pull/36), and MSVC build/test works now.\r\n\r\nAt least one issue remains: when running the minisketch tests, wine can't find libgcc and other dlls. In minisketch's own CI that's worked around by passing `CXXFLAGS=-static -static-libgcc -static-libstdc++`, but it's a bit ugly to pass that through to the sub-configure (a) only for the win64 cirrus build and (b) without doing that for non-minisketch targets. Anyone have a suggestion?\r\n* Make wine find the necessary dll's somehow?\r\n* Just pass `CXXFLAGS=-static -static-libgcc -static-libstdc++` in general to the win64 cirrus configure?\r\n* I have no idea how `src/test/test_bitcoin.exe` avoids this problem, but perhaps its solution is usable too?\r\n",
      "created_at" : "2021-05-07T19:06:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834703011",
      "id" : 834703011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDcwMzAxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T19:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834703011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nVery nice work sipa, gmaxwell and naumenkogs!\r\n\r\nIs it mentioned somewhere in the documentation that `Minisketch::Add` is not an idempotent operation?\r\n\r\nIn other words that â¦\r\n\r\n```\r\nsketch.Add(i);\r\n```\r\n\r\nâ¦ does not have the same effect as â¦\r\n\r\n```\r\nsketch.Add(i);\r\nsketch.Add(i);\r\n```\r\n\r\nFWIW I couldn't find any such note in `src/minisketch/include/minisketch.h` :)",
      "created_at" : "2021-05-07T20:22:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834750354",
      "id" : 834750354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDc1MDM1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T20:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834750354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift It's explained in https://github.com/sipa/minisketch/#readme at least, and inherent to symmetric set reconciliation. I don't think the header file should try to explain set reconciliation in detail, but if you have specific suggestions to improve the header, feel free to PR them (in the minisketch repo).",
      "created_at" : "2021-05-07T21:10:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834782141",
      "id" : 834782141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDc4MjE0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T21:10:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834782141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @practicalswift It's explained in https://github.com/sipa/minisketch/#readme at least, and inherent to symmetric set reconciliation. I don't think the header file should try to explain set reconciliation in detail, but if you have specific suggestions to improve the header, feel free to PR them (in the minisketch repo).\r\n\r\nI think the following should be enough to help avoid unnecessary mistakes in calling code in the hypothetical scenario that the library user is not familiar with set reconciliation details. Submitted as https://github.com/sipa/minisketch/pull/38.\r\n\r\n```patch\r\ndiff --git a/include/minisketch.h b/include/minisketch.h\r\nindex d73123d..23af18f 100644\r\n--- a/include/minisketch.h\r\n+++ b/include/minisketch.h\r\n@@ -104,6 +104,8 @@ void minisketch_deserialize(minisketch* sketch, const unsigned char* input);\r\n  * If the element to be added is 0 (after potentially dropping the most significant\r\n  * bits), then this function is a no-op. Sketches cannot contain an element with\r\n  * the value 0.\r\n+ *\r\n+ * Note that adding the same element a second time removes it again.\r\n  */\r\n void minisketch_add_uint64(minisketch* sketch, uint64_t element);\r\n\r\n@@ -246,7 +248,7 @@ public:\r\n         return *this;\r\n     }\r\n\r\n-    /** See miniksetch_add_element(). */\r\n+    /** See minisketch_add_uint64(). */\r\n     Minisketch& Add(uint64_t element) noexcept\r\n     {\r\n         minisketch_add_uint64(m_minisketch.get(), element);\r\n```",
      "created_at" : "2021-05-07T21:57:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-834807963",
      "id" : 834807963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNDgwNzk2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T21:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834807963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Another interface design question:\r\n\r\nThe `Minisketch` constructor does not signal constructor failure by throwing.\r\n\r\nIs that intentional to allow for use in non-Bitcoin Core environments where using exceptions may not be an option?\r\n\r\nI'm a bit worried that the current design might introduce a gotcha/sharp edge which is probably best illustrated by the example below.\r\n\r\nTo be clear: I understand there is a trade-off here and perhaps this gotcha is a price worth paying for a potentially larger user base of the library outside of Bitcoin Core, but I just want to make sure I fully understand the rationale behind the current interface design :)\r\n\r\n---\r\n\r\n**Highly optional review club style quiz (target audience: reviewers and library users :))**\r\n\r\n\r\nAfter reading the documentation in `include/minisketch.h` a library user might write the following code:\r\n\r\n```c++\r\nconstexpr size_t FIELD_SIZE = 32;\r\nconstexpr size_t BYTES_PER_SKETCH_CAPACITY = FIELD_SIZE / 8;\r\nconstexpr size_t MAX_SKETCH_CAPACITY = 8192;\r\n\r\nvoid ProcessSketchMessage(const std::vector<uint8_t>& remote_sketch_serialized) {\r\n    const size_t remote_capacity = remote_sketch_serialized.size() / BYTES_PER_SKETCH_CAPACITY;\r\n    if (remote_capacity > MAX_SKETCH_CAPACITY) {\r\n        // Sketch too large. Skip processing.\r\n        return;\r\n    }\r\n    Minisketch remote_sketch{FIELD_SIZE, 0, remote_capacity};\r\n    if (remote_sketch_serialized.size() != remote_sketch.GetSerializedSize()) {\r\n        // Unexpected sketch size. Skip processing.\r\n        return;\r\n    }\r\n    remote_sketch.Deserialize(remote_sketch_serialized);\r\n    // â¦\r\n    // Do something useful.\r\n    // â¦\r\n}\r\n```\r\n\r\nLooks quite reasonable? :)\r\n\r\nThe library user is happy with his/her code: he/she gets the expected results when testing it using a couple of thousand normal test cases. Symmetric set reconciliation is fun! :)\r\n\r\nHowever, the library user becomes a bit sad when an attacker shows up and provides a carefully crafted input which causes a `nullptr` dereference.\r\n\r\nReview club style quiz questions:\r\n* What is the attacker input that caused the `nullptr` dereference?\r\n* Where does the `nullptr` dereference take place?\r\n* Did the library user miss anything of importance when reading the documentation in `include/minisketch.h`?\r\n* What is the conventional approach to construction failure and what is the \"zombie object\" approach? When/why is the latter approach used?\r\n",
      "created_at" : "2021-05-08T15:12:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835397936",
      "id" : 835397936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTM5NzkzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T15:12:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835397936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift You mean because the construction internally OOMs? If that happens you have bigger problems, I think, as you'd generally use this with capacities of 10s to maybe 1000s. Beyond that, O(n^2) decoding cost starts to make it unusable.",
      "created_at" : "2021-05-08T15:19:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835399963",
      "id" : 835399963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTM5OTk2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T15:19:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835399963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> You mean because the construction internally OOMs? If that happens you have bigger problems, I think, as you'd generally use this with capacities of 10s to maybe 1000s. Beyond that, O(n^2) decoding cost starts to make it unusable.\r\n\r\n@sipa No, note that the user code in the example is very careful about not processing large inputs, so memory exhaustion or excessive run-time is not the problem here.\r\n\r\nThe `if (remote_capacity > MAX_SKETCH_CAPACITY) {` guards against large inputs:\r\n\r\n```c++\r\nconstexpr size_t FIELD_SIZE = 32;\r\nconstexpr size_t BYTES_PER_SKETCH_CAPACITY = FIELD_SIZE / 8;\r\nconstexpr size_t MAX_SKETCH_CAPACITY = 8192;\r\n\r\nvoid ProcessSketchMessage(const std::vector<uint8_t>& remote_sketch_serialized) {\r\n    const size_t remote_capacity = remote_sketch_serialized.size() / BYTES_PER_SKETCH_CAPACITY;\r\n    if (remote_capacity > MAX_SKETCH_CAPACITY) {\r\n        // Sketch too large. Skip processing.\r\n        return;\r\n    }\r\n    Minisketch remote_sketch{FIELD_SIZE, 0, remote_capacity};\r\n    if (remote_sketch_serialized.size() != remote_sketch.GetSerializedSize()) {\r\n        // Unexpected sketch size. Skip processing.\r\n        return;\r\n    }\r\n    remote_sketch.Deserialize(remote_sketch_serialized);\r\n    // â¦\r\n    // Do something useful.\r\n    // â¦\r\n}\r\n```\r\n\r\n**WARNING! Spoiler alert! WARNING!**\r\n\r\n<details>\r\n<summary>Click to show spoiler</summary>\r\nConsider what happens when the attacker submits a \"mini-minisketch\": in other words a tiny tiny input... :)\r\n</details>\r\n\r\n",
      "created_at" : "2021-05-08T17:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835442997",
      "id" : 835442997,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTQ0Mjk5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T17:41:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835442997",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift You can use `if (sketch)` to detect if a sketch is usable, which may be the case for several reasons (field not implemented, implementation number too high or incompatible with field, illegal capacity, OOM, ...).\r\n\r\nSee https://github.com/sipa/minisketch/pull/39 for some improvements to the documentation.",
      "created_at" : "2021-05-08T17:47:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835445069",
      "id" : 835445069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTQ0NTA2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T18:39:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835445069",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa \r\n\r\n> You can use `if (sketch)` to detect if a sketch is usable, which may be the case for several reasons (field not implemented, implementation number too high or incompatible with field, illegal capacity, OOM, ...).\r\n>\r\n> See [sipa/minisketch#39](https://github.com/sipa/minisketch/pull/39) for some improvements to the documentation.\r\n\r\nThanks for updating the documentation. Now the gotcha is documented: that is better :)\r\n\r\nI'm aware that `operator bool()` can be used to check if a `Minisketch` object is a valid object or a zombie object: I'm just afraid that there is a real risk of \"use-before-zombie-check\" errors.\r\n\r\nMy experience is that signalling constructor failure by silently creating a zombie object (instead of throwing) leads to fragile code. Most C++ programmers are used to constructors that either create a fully valid object or throw. Even if the programmer is aware that the somewhat unusual \"zombie check idiom\" is used it is very easy to miss checking it in at least some code path.\r\n\r\nSee the current Erlay code [`txreconciliation.cpp`](https://github.com/bitcoin/bitcoin/blob/1d8d43ed095ef7abade4d62ddc2ede34d4a1a59b/src/txreconciliation.cpp) (#21515) as an example. Not all code paths do \"zombie checking\" using `operator bool()` before using a newly created `Minisketch` object.\r\n\r\nConsider this example:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/1d8d43ed095ef7abade4d62ddc2ede34d4a1a59b/src/txreconciliation.cpp#L559\r\n\r\nIf we were throwing instead of creating a zombie object in case of constructor failure we wouldn't have to worry about a potential `nullptr` dereference here.\r\n\r\nThat's why I'm curious about this interface design choice to better understand the trade-offs considered: are we intentionally avoiding throwing to allow for use in non-Bitcoin Core environments where using exceptions may not be an option, or am I missing some other reason for this design choice? :)",
      "created_at" : "2021-05-08T22:36:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835550512",
      "id" : 835550512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTU1MDUxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T22:36:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835550512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Many environments [prohibit exceptions or greatly restrict their use](https://google.github.io/styleguide/cppguide.html#Exceptions) as they are a regular source of latent serious bugs.  You need error handling. Punting by soft-crashing and hoping something even *further* away from the source of the error is somehow better able to handle it is often not an improvement.  Especially when you're talking about handling bad input (as opposed to something like malloc failure) exceptions are not particularly appropriate.\r\n\r\n> If we were throwing instead of creating a zombie object in case of constructor failure we wouldn't have to worry about a potential nullptr dereference here.\r\n\r\nNo, instead you end up with bugs like \"minisketch gets used for blockpropagation and ends up erroneously marking the block invalid, rather than harmlessly discarding a corrupt message\" because there was a hidden exception that could be thrown which got handled in the wrong place by the wrong thing.  A null pointer dereference would be safe by comparison, and a lack of checking for it can also easily be found by static analysis (e.g. coverity will warn if you inconsistently null check the pointer output of specific functions).",
      "created_at" : "2021-05-08T23:18:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835568120",
      "id" : 835568120,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTU2ODEyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-08T23:39:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835568120",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift Exceptions in my opinion are for exceptional situations - things that couldn't have been reasonably prevented by the programmer (things like I/O failure, for example), as they can be deep down in a function call stack, and dealing with them along the way there is both inconvenient and pointless. Except for OOM perhaps, none of the cases where Minisketch construction fails are like this - they all indicate the programmer is doing something wrong. It wouldn't be unreasonable to have assertions for them instead, I guess. OOM is a bit different as it is an exceptional situation, but it's also one that can't occur realistically (due to the size of sketches libminisketch can work with) and is almost always a nothing-can-be-done-about-this situation (you'd just terminate as ~all allocations will fail).",
      "created_at" : "2021-05-09T00:15:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835587369",
      "id" : 835587369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTU4NzM2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-09T00:16:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835587369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa\r\n\r\nAssuming that we really don't want to throw in the constructor:\r\n\r\nPerhaps an alternative could be to use the named constructor idiom and return `std::optional<Minisketch>`? (With `std::nullopt` being returned if a valid/usable `Minisketch` object could not constructed.)\r\n\r\nSomething along the lines of:\r\n\r\n```c++\r\nclass Minisketch {\r\nprivate:\r\n    Minisketch(uint32_t bits, uint32_t implementation, size_t capacity) noexcept;\r\n    â¦\r\npublic:\r\n    static std::optional<Minisketch> Create(uint32_t bits, uint32_t implementation, size_t capacity) noexcept;\r\n    â¦\r\n}\r\n```\r\n\r\nTo be precise the situation I'm worried about with the current design is when `capacity` in `Minisketch(uint32_t bits, uint32_t implementation, size_t capacity)` is indirectly attacker controlled via the attacker provided serialized sketch, and the programmer forgets to check the possibility of a zombie state `Minisketch` object before using it. Note that if `capacity` is `0` then an invalid zombie state `Minisketch` object is created, and using such an invalid `Minisketch` object will cause a `nullptr` dereference as the library is currently written.\r\n\r\nNote that the programmer is likely to check for a \"too large\" sketch: he/she is likely to intuitively understand that such a thing might be dangerous, but the fact that a \"too small\" sketch is dangerous too is a real gotcha IMO :)\r\n\r\n> Exceptions in my opinion are for exceptional situations - things that couldn't have been reasonably prevented by the programmer (things like I/O failure, for example), as they can be deep down in a function call stack, and dealing with them along the way there is both inconvenient and pointless.\r\n\r\nThanks for sharing your perspective. I know you're well aware of all the usual counterarguments, but I'm sharing some links to other perspectives for reviewers who might be unaware :)\r\n\r\n* C++ Core Guidelines: [C.42: If a constructor cannot construct a valid object, throw an exception. Leaving behind an invalid object is asking for trouble.](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c42-if-a-constructor-cannot-construct-a-valid-object-throw-an-exception)\r\n* C++ Core Guidelines: [C.41: A constructor should create a fully initialized object. A constructor establishes the invariant for a class. A user of a class should be able to assume that a constructed object is usable.](https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c41-a-constructor-should-create-a-fully-initialized-object)\r\n* The Standard C++ Foundation's C++ FAQ: [How can I handle a constructor that fails? Throw an exception. [â¦] The idea of a âzombieâ object has a lot of down-side.](https://isocpp.org/wiki/faq/exceptions#ctors-can-throw)",
      "created_at" : "2021-05-09T22:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835912345",
      "id" : 835912345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTkxMjM0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-09T22:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835912345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Perhaps an alternative could be to use the named constructor idiom and return std::optional<Minisketch>\r\n\r\nI think that's rather silly, because that's effectively what a Minisketch object already is. It is a simple wrapper around std::unique_ptr<internal type>, and behaves exactly like that (except that the internal object is not accessible).",
      "created_at" : "2021-05-09T22:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835913660",
      "id" : 835913660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTkxMzY2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-09T22:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835913660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa \r\n\r\nI think you're missing my point.\r\n\r\nPerhaps my point is better explained in code.\r\n\r\nExecuting â¦\r\n\r\n```\r\nMinisketch sketch{32, 0, /* likely to be attacker controlled */ 0};\r\nsketch.GetCapacity(); // or really any operation on the invalid Minisketch zombie object\r\n```\r\n\r\nâ¦ currently yields â¦\r\n\r\n```\r\n==30177==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000008 (pc 0x55a2bc704dcb bp 0x7ffe524b6070 sp 0x7ffe524b6040 T0)\r\n==30177==The signal is caused by a READ memory access.\r\n==30177==Hint: address points to the zero page.\r\n    #0 0x55a2bc704dcb in Sketch::Check() const /home/thomas/bitcoin/src/minisketch/src/sketch.h:24:39\r\n    #1 0x55a2bc704dcb in minisketch_capacity /home/thomas/bitcoin/src/minisketch/src/minisketch.cpp:368:8\r\n    #2 0x55a2bb3fc61b in Minisketch::GetCapacity() const ./minisketch/include/minisketch.h:239:50\r\nâ¦\r\n```\r\n\r\nIs that how we want it to work? :)",
      "created_at" : "2021-05-09T22:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835918711",
      "id" : 835918711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTkxODcxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-09T22:50:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835918711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift I understand your point, but I don't think there is a big difference with what you're suggesting.\r\n\r\n```c++\r\nstd::optional<Minisketch> sketch = Minisketch::Create(32, 0, 0);\r\nsketch->GetCapacity();\r\n```\r\n\r\nis equally going to cause problems, if the API user isn't aware the create call can fail. And when those problems appear, it'll be obvious where the problem is.\r\n\r\nPerhaps a better question is: would removing the capacity==0 edge case not solve more problems?\r\n\r\nEDIT: see https://github.com/sipa/minisketch/pull/40",
      "created_at" : "2021-05-09T23:28:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-835937493",
      "id" : 835937493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNTkzNzQ5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T00:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/835937493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa I haven't read all the discussion in this PR so don't want to weigh in on the interface design, but:\r\n\r\n> I don't think there is a big difference with what you're suggesting.\r\n> \r\n> ```\r\n> std::optional<Minisketch> sketch = Minisketch::Create(32, 0, 0);\r\n> sketch->GetCapacity();\r\n> ```\r\n>\r\n> is equally going to cause problems, if the API user isn't aware the create call can fail.\r\n\r\nis certainly different from returning a bare object that may be in a valid or invalid state. Unwrapping an optional without first checking that it contains a value is very clearly a bug, and should be obvious to any programmer or compiler, even if they don't know the semantics of the library function that is being called.",
      "created_at" : "2021-05-10T08:07:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-836337858",
      "id" : 836337858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNjMzNzg1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T08:07:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836337858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery Sure, it's better at conveying to the API user that the call may fail. But I think that's the wrong information: it'll only fail when used incorrectly (*). It's not something the user should be checking for in the first place - what would be done at runtime with that information? The only thing that needs to happen is fixing the code. Putting an optional around it adds both unnecessary overhead, and the wrong signal IMO.\r\n\r\n(*) I admit that capacity=0 was an edge case that could occur at runtime, and would be unexpected. Just merged https://github.com/sipa/minisketch/pull/40 to fix that, will update this PR to reflect that.",
      "created_at" : "2021-05-10T21:13:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-837351795",
      "id" : 837351795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNzM1MTc5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T21:15:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/837351795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa \r\n\r\nThanks for addressing the `capacity=0` edge case. That resolves my concern.\r\n\r\nI'm not particularly worried about the other two constructor failure cases (`std::bad_alloc` and unavailable combination of `bits`/`implementation`) since the conditions triggering them are much less likely to be under attacker control.",
      "created_at" : "2021-05-11T14:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-838548466",
      "id" : 838548466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzODU0ODQ2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-11T14:13:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/838548466",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 94f83534e4b771944af7d9ed0f40746f392eb75e<br>(master) | commit 202a89b644f0013e3a5169e2466de0205f6e454f<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`0b78d0b45eac19aa...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-aarch64-linux-gnu-debug.tar.gz) |  |\n| *-aarch64-linux-gnu.tar.gz | [`1c27cc723ab9f9e3...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-aarch64-linux-gnu.tar.gz) |  |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`d830ae03907ba6fc...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-arm-linux-gnueabihf-debug.tar.gz) |  |\n| *-arm-linux-gnueabihf.tar.gz | [`efad98cedf9aeeb4...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-arm-linux-gnueabihf.tar.gz) |  |\n| *-osx-unsigned.dmg | [`ba2522001444832f...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-osx-unsigned.dmg) |  |\n| *-osx-unsigned.tar.gz | [`03e8ee2628e35992...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-osx-unsigned.tar.gz) |  |\n| *-osx64.tar.gz | [`11f6e49b98bec565...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-osx64.tar.gz) |  |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`341bd50f2647e026...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-powerpc64-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64-linux-gnu.tar.gz | [`4cac48951290e5e6...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-powerpc64-linux-gnu.tar.gz) |  |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`2677a745e2c477e6...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-powerpc64le-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64le-linux-gnu.tar.gz | [`0803688359f7e1c1...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-powerpc64le-linux-gnu.tar.gz) |  |\n| *-riscv64-linux-gnu-debug.tar.gz | [`89174fb80a0b85b5...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-riscv64-linux-gnu-debug.tar.gz) |  |\n| *-riscv64-linux-gnu.tar.gz | [`4fc6e6327cd53b6d...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-riscv64-linux-gnu.tar.gz) |  |\n| *-win-unsigned.tar.gz | [`26f6dfbe7455593e...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-win-unsigned.tar.gz) |  |\n| *-win64-debug.zip | [`266a6c069f92480d...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-win64-debug.zip) |  |\n| *-win64-setup-unsigned.exe | [`b882ae611908201c...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-win64-setup-unsigned.exe) |  |\n| *-win64.zip | [`164abbb8e2202757...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-win64.zip) |  |\n| *-x86_64-linux-gnu-debug.tar.gz | [`51bd810a000ac7cd...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-x86_64-linux-gnu-debug.tar.gz) |  |\n| *-x86_64-linux-gnu.tar.gz | [`14d835d0a52c6c9b...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7-x86_64-linux-gnu.tar.gz) |  |\n| *.tar.gz | [`4f55dbaa72aabd90...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/bitcoin-94f83534e4b7.tar.gz) | [`1bfbdeadef9b1dbb...`](https://drahtbot.space/guix/bitcoin/bitcoin/202a89b644f0013e3a5169e2466de0205f6e454f/bitcoin-202a89b644f0.tar.gz) |\n| guix_build.log | [`6c4adc4d9ddc6602...`](https://drahtbot.space/guix/bitcoin/bitcoin/94f83534e4b771944af7d9ed0f40746f392eb75e/guix_build.log) | [`367bc0cf52f322e4...`](https://drahtbot.space/guix/bitcoin/bitcoin/202a89b644f0013e3a5169e2466de0205f6e454f/guix_build.log) |\n| guix_build.log.diff |  | [`98e96612783e26f7...`](https://drahtbot.space/guix/bitcoin/bitcoin/202a89b644f0013e3a5169e2466de0205f6e454f/guix_build.log.diff) |\n\n",
      "created_at" : "2021-05-12T14:45:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-839832210",
      "id" : 839832210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTgzMjIxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T14:45:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839832210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "<details><summary>make check-symbols</summary>\r\n\r\n```\r\n+ make -C src --jobs=1 check-symbols V=1\r\nmake: Entering directory '/distsrc-base/distsrc-202a89b644f0-x86_64-linux-gnu/src'\r\nChecking glibc back compat...\r\nCPPFILT=/root/.guix-profile/bin/x86_64-linux-gnu-c++filt /root/.guix-profile/bin/python3.8 ../contrib/devtools/symbol-check.py bitcoind  bitcoin-cli bitcoin-tx bitcoin-wallet bitcoin-util test/test_bitcoin  qt/bitcoin-qt  \r\nbitcoind: export of symbol typeinfo for std::ios_base::failure[abi:cxx11] not allowed\r\nbitcoind: export of symbol VTT for std::basic_ifstream<char, std::char_traits<char> > not allowed\r\nbitcoind: export of symbol vtable for std::basic_streambuf<char, std::char_traits<char> > not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::~basic_stringbuf() not allowed\r\nbitcoind: export of symbol typeinfo for std::_V2::error_category not allowed\r\nbitcoind: export of symbol typeinfo for std::invalid_argument not allowed\r\nbitcoind: export of symbol vtable for std::basic_ifstream<char, std::char_traits<char> > not allowed\r\nbitcoind: export of symbol typeinfo for std::out_of_range not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::~basic_stringbuf() not allowed\r\nbitcoind: export of symbol std::cerr not allowed\r\nbitcoind: export of symbol vtable for std::basic_filebuf<char, std::char_traits<char> > not allowed\r\nbitcoind: export of symbol typeinfo for std::future_error not allowed\r\nbitcoind: export of symbol vtable for std::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol vtable for std::__cxx11::basic_istringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::~basic_stringbuf() not allowed\r\nbitcoind: export of symbol typeinfo for std::logic_error not allowed\r\nbitcoind: export of symbol VTT for std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_replace(unsigned long, unsigned long, char const*, unsigned long) not allowed\r\nbitcoind: export of symbol vtable for std::future_error not allowed\r\nbitcoind: export of symbol typeinfo for std::runtime_error not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_assign(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) not allowed\r\nbitcoind: export of symbol std::nothrow not allowed\r\nbitcoind: export of symbol vtable for std::__cxx11::basic_stringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_mutate(unsigned long, unsigned long, char const*, unsigned long) not allowed\r\nbitcoind: export of symbol std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_append(char const*, unsigned long) not allowed\r\nbitcoind: export of symbol vtable for std::__cxx11::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol VTT for std::__cxx11::basic_istringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol vtable for std::bad_alloc not allowed\r\nbitcoind: export of symbol typeinfo for std::bad_alloc not allowed\r\nbitcoind: export of symbol std::ctype<char>::do_widen(char) const not allowed\r\nbitcoind: export of symbol vtable for std::basic_ios<char, std::char_traits<char> > not allowed\r\nbitcoind: export of symbol typeinfo for std::locale::facet not allowed\r\nbitcoind: export of symbol vtable for std::system_error not allowed\r\nbitcoind: export of symbol VTT for std::__cxx11::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> > not allowed\r\nbitcoind: export of symbol typeinfo for long not allowed\r\nbitcoind: export of symbol vtable for std::ios_base::failure[abi:cxx11] not allowed\r\nbitcoind: export of symbol typeinfo for short not allowed\r\nbitcoind: export of symbol typeinfo for unsigned short not allowed\r\nbitcoind: export of symbol std::cout not allowed\r\nbitcoind: export of symbol typeinfo for void not allowed\r\nbitcoind: export of symbol std::num_get<char, std::istreambuf_iterator<char, std::char_traits<char> > >::id not allowed\r\nbitcoind: export of symbol void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char const*>(char const*, char const*, std::forward_iterator_tag) not allowed\r\nbitcoind: export of symbol void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) not allowed\r\nbitcoind: export of symbol vtable for std::num_get<char, std::istreambuf_iterator<char, std::char_traits<char> > > not allowed\r\nbitcoind: NEEDED library libstdc++.so.6 is not allowed\r\nbitcoind: failed EXPORTED_SYMBOLS LIBRARY_DEPENDENCIES\r\n```\r\n\r\n</details>",
      "created_at" : "2021-05-12T14:59:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-839842726",
      "id" : 839842726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzOTg0MjcyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T14:59:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/839842726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Ok, please advise?",
      "created_at" : "2021-05-12T18:53:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-840020185",
      "id" : 840020185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDAyMDE4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T18:53:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840020185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No idea what that failure is. The build people will have to take a look.",
      "created_at" : "2021-05-12T19:24:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-840038554",
      "id" : 840038554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDAzODU1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T19:24:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840038554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I am just saying that this can't be merged (yet) because it would break the guix build.",
      "created_at" : "2021-05-12T19:25:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-840038832",
      "id" : 840038832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDAzODgzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T19:25:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840038832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh, I see. I thought it was a clarification on why it's complaining about missing libraries (but it may well be related).\r\n\r\n> The build people will have to take a look.\r\n\r\nThe great miners and craftsmen of the mountain halls?",
      "created_at" : "2021-05-12T19:33:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-840043666",
      "id" : 840043666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDA0MzY2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-12T22:11:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840043666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cr ACK b195ae3af078a9038c7d654a267eb14b9332ae70 modulo CI green: patch looks correct, minisketch is awesome and changes are limited to `Makefile.am`, `build_msvc/`, `ci/`, `configure.ac`, `src/Makefile.*`, `src/minisketch/`, `src/minisketchwrapper.cpp`, `src/minisketchwrapper.h`, `src/test/minisketch_tests.cpp` and `test/lint/`.",
      "created_at" : "2021-05-13T07:05:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-840363543",
      "id" : 840363543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDM2MzU0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-13T07:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840363543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Build issues resolved, I believe.",
      "created_at" : "2021-05-16T03:39:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-841760973",
      "id" : 841760973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTc2MDk3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T03:39:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841760973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "cr re-ACK 35049cf2a16a63bd1adf511e8c0ac526be5e4e8a CI now green, patch looks correct, minisketch is still awesome and changes are limited to `Makefile.am`, `build_msvc/`, `ci/`, `configure.ac`, `src/Makefile.*`, `src/minisketch/`, `src/minisketchwrapper.cpp`, `src/minisketchwrapper.h`, `src/test/minisketch_tests.cpp` and `test/lint/`.",
      "created_at" : "2021-05-16T15:49:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-841835509",
      "id" : 841835509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MTgzNTUwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-16T15:49:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/841835509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit 1ef34ee25ed34b2b092f15bf3dca5c0508092829<br>(master) | commit 50659f78817557df571673fbec39b355104f7d71<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`38d37e7207ab2b4c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-aarch64-linux-gnu-debug.tar.gz) | [`4d9f89087c563d1e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`19d4b3588253e637...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-aarch64-linux-gnu.tar.gz) | [`ae9ad829e6c8b29e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`5b2fa96fcfb6c3ef...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-arm-linux-gnueabihf-debug.tar.gz) | [`dedd92ff17fb0a2d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`d4c5fc4b378544c7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-arm-linux-gnueabihf.tar.gz) | [`f3a7297648a4a123...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-arm-linux-gnueabihf.tar.gz) |\n| *-osx-unsigned.dmg | [`efc8bad300e3a00e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-osx-unsigned.dmg) | [`661d4bcdfb18f2d9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-osx-unsigned.dmg) |\n| *-osx64.tar.gz | [`0389d38a5f3dd484...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-osx64.tar.gz) | [`9596975117978657...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-osx64.tar.gz) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`f2b7ec1033fae3bc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-powerpc64-linux-gnu-debug.tar.gz) | [`fcd378352a9f2797...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`6e193e96aa587907...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-powerpc64-linux-gnu.tar.gz) | [`c45ea1b8c9b3abc2...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`4603106a850d73cb...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-powerpc64le-linux-gnu-debug.tar.gz) | [`d6636b60a8a89059...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`b38202fbce7632bd...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-powerpc64le-linux-gnu.tar.gz) | [`0490ddb654df403f...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`0f1f8a1c78df3dab...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-riscv64-linux-gnu-debug.tar.gz) | [`ad9908b72bd22655...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`929ab7fbe264d905...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-riscv64-linux-gnu.tar.gz) | [`47f4dad35e0209b1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-riscv64-linux-gnu.tar.gz) |\n| *-win64-debug.zip | [`79356193297dbcb3...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-win64-debug.zip) | [`b32a5de65dda5446...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-win64-debug.zip) |\n| *-win64-setup-unsigned.exe | [`4cea9c748f36df32...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-win64-setup-unsigned.exe) | [`6d5210be09d344bb...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-win64-setup-unsigned.exe) |\n| *-win64.zip | [`450dc1e32b9dc719...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-win64.zip) | [`c1602b19f7ed0715...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-win64.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`e07205f92243ab23...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-x86_64-linux-gnu-debug.tar.gz) | [`24caefdc8c9d4e14...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`59eda86c40ea98fd...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3-x86_64-linux-gnu.tar.gz) | [`9ee6b2ba755e920b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`db459726c5726410...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-1ef34ee25ed3.tar.gz) | [`9d2e246483603baa...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-50659f788175.tar.gz) |\n| bitcoin-core-linux-22-res.yml | [`92b411791b7e20a7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-core-linux-22-res.yml) | [`aec168c2d922e534...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-linux-22-res.yml) |\n| bitcoin-core-osx-22-res.yml | [`285100eb3c3d4427...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-core-osx-22-res.yml) | [`c96ecd46c3bb0efc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-osx-22-res.yml) |\n| bitcoin-core-win-22-res.yml | [`195d71a2b8868e77...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/bitcoin-core-win-22-res.yml) | [`014d17e03fd03d48...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-win-22-res.yml) |\n| linux-build.log | [`e36dbbc6cc57af9c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/linux-build.log) | [`39306d0d8fe603e1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/linux-build.log) |\n| osx-build.log | [`c55731398707578b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/osx-build.log) | [`ec8feefb2d052164...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/osx-build.log) |\n| win-build.log | [`0a9581a0e465dc44...`](https://drahtbot.space/gitian/bitcoin/bitcoin/1ef34ee25ed34b2b092f15bf3dca5c0508092829/win-build.log) | [`dd3a0cec56795871...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/win-build.log) |\n| bitcoin-core-linux-22-res.yml.diff |  | [`0bb187b9716106fc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-linux-22-res.yml.diff) |\n| bitcoin-core-osx-22-res.yml.diff |  | [`91497004fa48e323...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-osx-22-res.yml.diff) |\n| bitcoin-core-win-22-res.yml.diff |  | [`8d462b7aa1432e9c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/bitcoin-core-win-22-res.yml.diff) |\n| linux-build.log.diff |  | [`861cf4c72b38fb59...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/linux-build.log.diff) |\n| osx-build.log.diff |  | [`7c073a514a67fdb9...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/osx-build.log.diff) |\n| win-build.log.diff |  | [`7a6733055c48f920...`](https://drahtbot.space/gitian/bitcoin/bitcoin/50659f78817557df571673fbec39b355104f7d71/win-build.log.diff) |\n\n",
      "created_at" : "2021-05-17T21:27:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-842652857",
      "id" : 842652857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MjY1Mjg1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-17T21:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/842652857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995151"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995151"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps:\r\n\r\n```suggestion\r\n#include <logging.h>\r\n#include <util/time.h>\r\n\r\n#include <minisketch.h>\r\n```\r\n(since minisketch.h is a separate library import)",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-20T10:57:56Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <minisketchwrapper.h>\n+\n+#include <minisketch.h>\n+#include <logging.h>\n+#include <util/time.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995151",
      "id" : 635995151,
      "line" : 9,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTk5NTE1MQ==",
      "original_commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "original_line" : 9,
      "original_position" : 9,
      "original_start_line" : 7,
      "path" : "src/minisketchwrapper.cpp",
      "position" : 9,
      "pull_request_review_id" : 664235602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : 7,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-20T11:13:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995669"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the c++ headers are generally preferred (cstddef and cstdint)",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-20T10:58:46Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <minisketchwrapper.h>\n+\n+#include <minisketch.h>\n+#include <logging.h>\n+#include <util/time.h>\n+\n+#include <algorithm>\n+#include <optional>\n+#include <stddef.h>\n+#include <stdint.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995669",
      "id" : 635995669,
      "line" : 14,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTk5NTY2OQ==",
      "original_commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : 13,
      "path" : "src/minisketchwrapper.cpp",
      "position" : 14,
      "pull_request_review_id" : 664235602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : 13,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-20T11:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps:\r\n\r\n```suggestion\r\n        std::array<int64_t, 11> benches;\r\n```\r\n\r\nSince the capacity is known upfront?",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-20T10:59:13Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <minisketchwrapper.h>\n+\n+#include <minisketch.h>\n+#include <logging.h>\n+#include <util/time.h>\n+\n+#include <algorithm>\n+#include <optional>\n+#include <stddef.h>\n+#include <stdint.h>\n+\n+namespace {\n+\n+static constexpr uint32_t BITS = 32;\n+\n+uint32_t FindBestImplementation()\n+{\n+    std::optional<std::pair<int64_t, uint32_t>> best;\n+\n+    uint32_t max_impl = Minisketch::MaxImplementation();\n+    for (uint32_t impl = 0; impl <= max_impl; ++impl) {\n+        std::vector<int64_t> benches;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635995919",
      "id" : 635995919,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTk5NTkxOQ==",
      "original_commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/minisketchwrapper.cpp",
      "position" : 26,
      "pull_request_review_id" : 664235602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-20T11:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635995919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635996839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635996839"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Separate standard library imports:\r\n\r\n```suggestion\r\n#include <minisketch.h>\r\n\r\n#include <cstddef>\r\n#include <cstdint>\r\n```",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-20T11:00:40Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+// Copyright (c) 2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_MINISKETCHWRAPPER_H\n+#define BITCOIN_MINISKETCHWRAPPER_H\n+\n+#include <minisketch.h>\n+#include <stddef.h>\n+#include <stdint.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635996839",
      "id" : 635996839,
      "line" : 10,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTk5NjgzOQ==",
      "original_commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "original_line" : 10,
      "original_position" : 10,
      "original_start_line" : 8,
      "path" : "src/minisketchwrapper.h",
      "position" : 10,
      "pull_request_review_id" : 664235602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : 8,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-20T11:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635996839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635997171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635997171"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n\r\n#include <boost/test/unit_test.hpp>\r\n\r\n#include <vector>\r\n```",
      "commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "created_at" : "2021-05-20T11:01:12Z",
      "diff_hunk" : "@@ -0,0 +1,49 @@\n+// Copyright (c) 21 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <minisketch.h>\n+#include <minisketchwrapper.h>\n+#include <random.h>\n+#include <test/util/setup_common.h>\n+#include <vector>\n+\n+#include <boost/test/unit_test.hpp>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r635997171",
      "id" : 635997171,
      "line" : 11,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTk5NzE3MQ==",
      "original_commit_id" : "35049cf2a16a63bd1adf511e8c0ac526be5e4e8a",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : 9,
      "path" : "src/test/minisketch_tests.cpp",
      "position" : 11,
      "pull_request_review_id" : 664235602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : 9,
      "start_side" : "RIGHT",
      "updated_at" : "2021-05-20T11:13:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/635997171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b<br>(master) | commit 4441e23de1442df94314d15e2811f4d1dd7a91b7<br>(master and this pull) |\n|--|--|--|\n| SKIPATTEST.TAG | [`e3b0c44298fc1c14...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/SKIPATTEST.TAG) | [`e3b0c44298fc1c14...`](https://drahtbot.space/guix/bitcoin/bitcoin/4441e23de1442df94314d15e2811f4d1dd7a91b7/SKIPATTEST.TAG) |\n| *-aarch64-linux-gnu-debug.tar.gz | [`0fe208d25567bb28...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-aarch64-linux-gnu-debug.tar.gz) |  |\n| *-aarch64-linux-gnu.tar.gz | [`8c31f36f6a925dfa...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-aarch64-linux-gnu.tar.gz) |  |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`8481ebe7acd4c323...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-arm-linux-gnueabihf-debug.tar.gz) |  |\n| *-arm-linux-gnueabihf.tar.gz | [`1f10a6bfea4b93e1...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-arm-linux-gnueabihf.tar.gz) |  |\n| *-osx-unsigned.dmg | [`b3e1e23200df5451...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-osx-unsigned.dmg) |  |\n| *-osx-unsigned.tar.gz | [`15f68bfa379122d5...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-osx-unsigned.tar.gz) |  |\n| *-osx64.tar.gz | [`6e4f1e62d76f0df9...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-osx64.tar.gz) |  |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`b34dc960263cff87...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-powerpc64-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64-linux-gnu.tar.gz | [`41eb916829ea8d2d...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-powerpc64-linux-gnu.tar.gz) |  |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`cf2a27e05f72b1e1...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-powerpc64le-linux-gnu-debug.tar.gz) |  |\n| *-powerpc64le-linux-gnu.tar.gz | [`fcf47b6c039fb0bc...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-powerpc64le-linux-gnu.tar.gz) |  |\n| *-riscv64-linux-gnu-debug.tar.gz | [`d4322fdaaaa62aaa...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-riscv64-linux-gnu-debug.tar.gz) |  |\n| *-riscv64-linux-gnu.tar.gz | [`5fef77399fd1487b...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-riscv64-linux-gnu.tar.gz) |  |\n| *-win-unsigned.tar.gz | [`a41ffd4480d8a509...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-win-unsigned.tar.gz) |  |\n| *-win64-debug.zip | [`14c8f586f6e815a6...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-win64-debug.zip) |  |\n| *-win64-setup-unsigned.exe | [`61287ac076c5a160...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-win64-setup-unsigned.exe) |  |\n| *-win64.zip | [`e07abffc678c5413...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-win64.zip) |  |\n| *-x86_64-linux-gnu-debug.tar.gz | [`fdc05eb84f7650b1...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-x86_64-linux-gnu-debug.tar.gz) |  |\n| *-x86_64-linux-gnu.tar.gz | [`240d116d48b32bd5...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935-x86_64-linux-gnu.tar.gz) |  |\n| *.tar.gz | [`e3bc54e332c4fb09...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/bitcoin-d7a6bba94935.tar.gz) | [`28329ead7ec57d03...`](https://drahtbot.space/guix/bitcoin/bitcoin/4441e23de1442df94314d15e2811f4d1dd7a91b7/bitcoin-4441e23de144.tar.gz) |\n| guix_build.log | [`99badf98140d1b37...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/guix_build.log) | [`03add643c66a3538...`](https://drahtbot.space/guix/bitcoin/bitcoin/4441e23de1442df94314d15e2811f4d1dd7a91b7/guix_build.log) |\n| inputs.SHA256SUMS | [`1e3cd4d0dc62188c...`](https://drahtbot.space/guix/bitcoin/bitcoin/d7a6bba94935a26e303e1c99eb2d4cb5f8f97f5b/inputs.SHA256SUMS) |  |\n| guix_build.log.diff |  | [`7317bce7e997579a...`](https://drahtbot.space/guix/bitcoin/bitcoin/4441e23de1442df94314d15e2811f4d1dd7a91b7/guix_build.log.diff) |\n\n",
      "created_at" : "2021-06-01T22:15:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-852507563",
      "id" : 852507563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MjUwNzU2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-01T22:15:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852507563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It appears that linking in libminisketch causes `bitcoind` and other binaries to suddenly export(?) libstdc++ symbols. This is beyond my skills, I humbly request the services of the Build People.",
      "created_at" : "2021-06-02T04:06:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-852702915",
      "id" : 852702915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MjcwMjkxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-02T04:06:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/852702915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Edit: Disregard, seems to be an issue with all posted guix builds, so unrelated to minisketch.\r\n\r\nDidn't find anything about libstdc++ being included in the bitcoind binary, but on Ubuntu 18.04 running `ldd bitcoind` on the provided guix binaries errors on:\r\n\r\n```\r\n./bitcoind: /lib/x86_64-linux-gnu/libm.so.6: version `GLIBC_2.29' not found (required by ./bitcoind)\r\n./bitcoind: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by ./bitcoind)\r\n```\r\n\r\nRunning `objdump -T bitcoind | grep '2\\.28\\|2\\.29'` shows the offending symbols:\r\n\r\n```\r\n0000000000000000      DF *UND*\t0000000000000000  GLIBC_2.28  fcntl64\r\n0000000000000000      DF *UND*\t0000000000000000  GLIBC_2.29  log\r\n0000000000000000      DF *UND*\t0000000000000000  GLIBC_2.29  pow\r\n0000000000000000      DF *UND*\t0000000000000000  GLIBC_2.29  exp\r\n```\r\n\r\nI guess these need to be wrapped in `compat/glibc_compat.cpp`? I'm not sure if wrapping glibc functionality is still the workaround used currently. If so, there's a stackoverflow answer detailing the wrapping of fcntl64: https://stackoverflow.com/questions/58472958/how-to-force-linkage-to-older-libc-fcntl-instead-of-fcntl64/58472959#58472959 . I guess `log`, `pow` and `exp` could be wrapped in the same way `log2f` is currently wrapped, they are also provided by GLIBC_2.2.5 on x86_64 (though I don't know about the other architectures, might be a different version for arm).",
      "created_at" : "2021-06-03T18:34:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-854089288",
      "id" : 854089288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDA4OTI4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-03T18:50:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854089288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Edit: Disregard, seems to be an issue with all posted guix builds, so unrelated to minisketch.\r\n\r\nIndeed, this is #21454, which does need fixing, but is not introduced by this PR.",
      "created_at" : "2021-06-04T01:14:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-854285518",
      "id" : 854285518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDI4NTUxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-04T01:14:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854285518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Well, there is still something making the guix build fail, with this in `guix_build.log`, which isn't in master's build:\r\n\r\n```\r\nChecking glibc back compat...\r\nChecking glibc back compat...\r\nCPPFILT=/root/.guix-profile/bin/x86_64-linux-gnu-c++filt /root/.guix-profile/bin/python3.8 ../contrib/devtools/symbol-check.py bitcoind  bitcoin-cli bitcoin-tx bitcoin-wallet bitcoin-util test/test_bitcoin  qt/bitcoin-qt  \r\nbitcoind: export of symbol typeinfo for std::ios_base::failure[abi:cxx11] not allowed\r\n...\r\n```",
      "created_at" : "2021-06-04T02:09:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-854303336",
      "id" : 854303336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDMwMzMzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-04T02:09:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854303336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Well, there is still something making the guix build fail,\r\n\r\nGiven the symbols that are being exported, is this be some sort of C++ version/ABI incompatibility problem? Will have a closer look shortly.",
      "created_at" : "2021-06-04T12:35:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-854677006",
      "id" : 854677006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NDY3NzAwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-04T12:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/854677006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-06-07T16:08:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-856069985",
      "id" : 856069985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NjA2OTk4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-07T16:08:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/856069985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, and updated to include https://github.com/sipa/minisketch/pull/44.",
      "created_at" : "2021-07-02T23:52:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-873307477",
      "id" : 873307477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MzMwNzQ3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-02T23:52:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873307477",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 7a49fdc58115845ece3a9890bf9498bee6b559de<br>(master) | commit 7e0c3c879056c0d48671a55dc49bf2d05644af57<br>(master and this pull) |\n|--|--|--|\n| SKIPATTEST.TAG | [`e3b0c44298fc1c14...`](https://drahtbot.space/guix/bitcoin/bitcoin/7a49fdc58115845ece3a9890bf9498bee6b559de/SKIPATTEST.TAG) | [`e3b0c44298fc1c14...`](https://drahtbot.space/guix/bitcoin/bitcoin/7e0c3c879056c0d48671a55dc49bf2d05644af57/SKIPATTEST.TAG) |\n| *.tar.gz | [`02272ae2eccf9117...`](https://drahtbot.space/guix/bitcoin/bitcoin/7a49fdc58115845ece3a9890bf9498bee6b559de/bitcoin-7a49fdc58115.tar.gz) | [`3a47cd9f10edd17b...`](https://drahtbot.space/guix/bitcoin/bitcoin/7e0c3c879056c0d48671a55dc49bf2d05644af57/bitcoin-7e0c3c879056.tar.gz) |\n| guix_build.log | [`8ff5fd7bdfd751c9...`](https://drahtbot.space/guix/bitcoin/bitcoin/7a49fdc58115845ece3a9890bf9498bee6b559de/guix_build.log) | [`2b0273a7684de73a...`](https://drahtbot.space/guix/bitcoin/bitcoin/7e0c3c879056c0d48671a55dc49bf2d05644af57/guix_build.log) |\n| guix_build.log.diff |  | [`023f31f217766026...`](https://drahtbot.space/guix/bitcoin/bitcoin/7e0c3c879056c0d48671a55dc49bf2d05644af57/guix_build.log.diff) |\n\n",
      "created_at" : "2021-07-03T09:50:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-873379810",
      "id" : 873379810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MzM3OTgxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-03T09:50:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873379810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I still get these failures in guix that I can't explain. @dongcarl @fanquake \r\n\r\n```\r\nqt/bitcoin-qt: symbol operator delete[](void*, unsigned long) from unsupported version CXXABI_1.3.9\r\nqt/bitcoin-qt: symbol std::basic_istream<char, std::char_traits<char> >& std::getline<char, std::char_traits<char>, std::allocator<char> >(std::basic_istream<char, std::char_traits<char> >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, char) from unsupported version GLIBCXX_3.4.21\r\nqt/bitcoin-qt: symbol std::basic_streambuf<char, std::char_traits<char> >::pbackfail(int) from unsupported version GLIBCXX_3.4\r\nqt/bitcoin-qt: symbol std::allocator<char>::allocator(std::allocator<char> const&) from unsupported version GLIBCXX_3.4\r\n...\r\n```",
      "created_at" : "2021-07-06T04:27:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-874449826",
      "id" : 874449826,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NDQ0OTgyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-06T04:27:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874449826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I still get these failures in guix that I can't explain. @dongcarl @fanquake\r\n\r\nThis will fix them:\r\n```diff\r\ndiff --git a/contrib/guix/libexec/build.sh b/contrib/guix/libexec/build.sh\r\nindex e457840d1..9092c8862 100755\r\n--- a/contrib/guix/libexec/build.sh\r\n+++ b/contrib/guix/libexec/build.sh\r\n@@ -287,7 +287,7 @@ mkdir -p \"$DISTSRC\"\r\n                     ${HOST_CXXFLAGS:+CXXFLAGS=\"${HOST_CXXFLAGS}\"} \\\r\n                     ${HOST_LDFLAGS:+LDFLAGS=\"${HOST_LDFLAGS}\"}\r\n \r\n-    sed -i.old 's/-lstdc++ //g' config.status libtool src/univalue/config.status src/univalue/libtool\r\n+    sed -i.old 's/-lstdc++ //g' config.status libtool src/univalue/config.status src/univalue/libtool src/\r\nminisketch/config.status src/minisketch/libtool\r\n \r\n     # Build Bitcoin Core\r\n     make --jobs=\"$JOBS\" ${V:+V=1}\r\n```",
      "created_at" : "2021-07-06T08:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-874587226",
      "id" : 874587226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NDU4NzIyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-06T08:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874587226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake That fixed it, great!",
      "created_at" : "2021-07-06T17:46:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-874959564",
      "id" : 874959564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NDk1OTU2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-06T17:46:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874959564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(don't merge this yet, as it includes the as-of-yet unmerged  sipa/minisketch#44)",
      "created_at" : "2021-07-06T17:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-874959938",
      "id" : 874959938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NDk1OTkzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-06T17:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874959938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-07T12:33:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#issuecomment-875564544",
      "id" : 875564544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21859",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NTU2NDU0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-07T12:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875564544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670032987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670032987"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reading from the fuzzy paper \"Codes and Syndromes\", should one interpret the capacity as the error-correcting distance `C` (here instantiated as binary BCH codes) ? \r\n\r\nFurther the documentation says the decoding is always successful when the number of elements in the set is not higher than the capacity, though in fact set size != sketch capacity, as afaiu 0 element are pruned out of the sketch, so shouldn't documentation says that decoding can be successful even in set size > sketch capacity ?",
      "commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "created_at" : "2021-07-15T00:06:57Z",
      "diff_hunk" : "@@ -0,0 +1,367 @@\n+#ifndef _MINISKETCH_H_\n+#define _MINISKETCH_H_ 1\n+\n+#include <stdint.h>\n+#include <stdlib.h>\n+\n+#ifdef _MSC_VER\n+#  include <compat.h>\n+#else\n+#  include <unistd.h>\n+#endif\n+\n+#ifndef MINISKETCH_API\n+# if defined(_WIN32)\n+#  ifdef MINISKETCH_BUILD\n+#   define MINISKETCH_API __declspec(dllexport)\n+#  else\n+#   define MINISKETCH_API\n+#  endif\n+# elif defined(__GNUC__) && (__GNUC__ >= 4) && defined(MINISKETCH_BUILD)\n+#  define MINISKETCH_API __attribute__ ((visibility (\"default\")))\n+# else\n+#  define MINISKETCH_API\n+# endif\n+#endif\n+\n+#ifdef __cplusplus\n+#  if __cplusplus >= 201103L\n+#    include <memory>\n+#    include <vector>\n+#    include <cassert>\n+#    if __cplusplus >= 201703L\n+#      include <optional>\n+#    endif // __cplusplus >= 201703L\n+#  endif // __cplusplus >= 201103L\n+extern \"C\" {\n+#endif // __cplusplus\n+\n+/** Opaque type for decoded sketches. */\n+typedef struct minisketch minisketch;\n+\n+/** Determine whether support for elements of `bits` bits was compiled in. */\n+MINISKETCH_API int minisketch_bits_supported(uint32_t bits);\n+\n+/** Determine the maximum number of implementations available.\n+ *\n+ * Multiple implementations may be available for a given element size, with\n+ * different performance characteristics on different hardware.\n+ *\n+ * Each implementation is identified by a number from 0 to the output of this\n+ * function call, inclusive. Note that not every combination of implementation\n+ * and element size may exist (see further).\n+*/\n+MINISKETCH_API uint32_t minisketch_implementation_max(void);\n+\n+/** Determine if the a combination of bits and implementation number is available.\n+ *\n+ * Returns 1 if it is, 0 otherwise.\n+ */\n+MINISKETCH_API int minisketch_implementation_supported(uint32_t bits, uint32_t implementation);\n+\n+/** Construct a sketch for a given element size, implementation and capacity.\n+ *\n+ * If the combination of `bits` and `implementation` is unavailable, or when\n+ * OOM occurs, NULL is returned. If minisketch_implementation_supported\n+ * returns 1 for the specified bits and implementation, this will always succeed\n+ * (except when allocation fails).\n+ *\n+ * If the result is not NULL, it must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity);\n+\n+/** Get the element size of a sketch in bits. */\n+MINISKETCH_API uint32_t minisketch_bits(const minisketch* sketch);\n+\n+/** Get the capacity of a sketch. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670032987",
      "id" : 670032987,
      "line" : 76,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDAzMjk4Nw==",
      "original_commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "original_line" : 76,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/minisketch/include/minisketch.h",
      "position" : 76,
      "pull_request_review_id" : 706814551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T01:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670032987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670035887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670035887"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IIUC, sketches are initialized by default with `std::random_device`. If a user has a better source of randomness rather than this implementation-defined pseudo-random number generator, it should rather rely on it ? \r\n\r\nIf so, I think comment could be clearer about when a user should decide between default random seed and user-provided value.",
      "commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "created_at" : "2021-07-15T00:15:14Z",
      "diff_hunk" : "@@ -0,0 +1,367 @@\n+#ifndef _MINISKETCH_H_\n+#define _MINISKETCH_H_ 1\n+\n+#include <stdint.h>\n+#include <stdlib.h>\n+\n+#ifdef _MSC_VER\n+#  include <compat.h>\n+#else\n+#  include <unistd.h>\n+#endif\n+\n+#ifndef MINISKETCH_API\n+# if defined(_WIN32)\n+#  ifdef MINISKETCH_BUILD\n+#   define MINISKETCH_API __declspec(dllexport)\n+#  else\n+#   define MINISKETCH_API\n+#  endif\n+# elif defined(__GNUC__) && (__GNUC__ >= 4) && defined(MINISKETCH_BUILD)\n+#  define MINISKETCH_API __attribute__ ((visibility (\"default\")))\n+# else\n+#  define MINISKETCH_API\n+# endif\n+#endif\n+\n+#ifdef __cplusplus\n+#  if __cplusplus >= 201103L\n+#    include <memory>\n+#    include <vector>\n+#    include <cassert>\n+#    if __cplusplus >= 201703L\n+#      include <optional>\n+#    endif // __cplusplus >= 201703L\n+#  endif // __cplusplus >= 201103L\n+extern \"C\" {\n+#endif // __cplusplus\n+\n+/** Opaque type for decoded sketches. */\n+typedef struct minisketch minisketch;\n+\n+/** Determine whether support for elements of `bits` bits was compiled in. */\n+MINISKETCH_API int minisketch_bits_supported(uint32_t bits);\n+\n+/** Determine the maximum number of implementations available.\n+ *\n+ * Multiple implementations may be available for a given element size, with\n+ * different performance characteristics on different hardware.\n+ *\n+ * Each implementation is identified by a number from 0 to the output of this\n+ * function call, inclusive. Note that not every combination of implementation\n+ * and element size may exist (see further).\n+*/\n+MINISKETCH_API uint32_t minisketch_implementation_max(void);\n+\n+/** Determine if the a combination of bits and implementation number is available.\n+ *\n+ * Returns 1 if it is, 0 otherwise.\n+ */\n+MINISKETCH_API int minisketch_implementation_supported(uint32_t bits, uint32_t implementation);\n+\n+/** Construct a sketch for a given element size, implementation and capacity.\n+ *\n+ * If the combination of `bits` and `implementation` is unavailable, or when\n+ * OOM occurs, NULL is returned. If minisketch_implementation_supported\n+ * returns 1 for the specified bits and implementation, this will always succeed\n+ * (except when allocation fails).\n+ *\n+ * If the result is not NULL, it must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity);\n+\n+/** Get the element size of a sketch in bits. */\n+MINISKETCH_API uint32_t minisketch_bits(const minisketch* sketch);\n+\n+/** Get the capacity of a sketch. */\n+MINISKETCH_API size_t minisketch_capacity(const minisketch* sketch);\n+\n+/** Get the implementation of a sketch. */\n+MINISKETCH_API uint32_t minisketch_implementation(const minisketch* sketch);\n+\n+/** Set the seed for randomizing algorithm choices to a fixed value.\n+ *\n+ * By default, sketches are initialized with a random seed. This is important\n+ * to avoid scenarios where an attacker could force worst-case behavior.\n+ *\n+ * This function initializes the seed to a user-provided value (any 64-bit\n+ * integer is acceptable, regardless of field size).\n+ *\n+ * When seed is -1, a fixed internal value with predictable behavior is\n+ * used. It is only intended for testing.\n+ */\n+MINISKETCH_API void minisketch_set_seed(minisketch* sketch, uint64_t seed);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670035887",
      "id" : 670035887,
      "line" : 93,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDAzNTg4Nw==",
      "original_commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "original_line" : 93,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/minisketch/include/minisketch.h",
      "position" : 93,
      "pull_request_review_id" : 706814551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T01:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670035887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670043855"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670043855"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe you should point out to protocoltips.md, that's the only other documentation place where collisions and their risks are explained ?\r\n\r\nZooming out, what's the collision model we care for Erlay ? I think there was an irc discussion a while back pointing that malicious inputs provoking collisions don't really matter as if your peer want to fail transaction announcement there is a reduction to stay silent. So it's more about accidental collisions, what's the probability here with 32-bit elements, (2^32 / 2^256)^(set _size) ?",
      "commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "created_at" : "2021-07-15T00:40:13Z",
      "diff_hunk" : "@@ -0,0 +1,367 @@\n+#ifndef _MINISKETCH_H_\n+#define _MINISKETCH_H_ 1\n+\n+#include <stdint.h>\n+#include <stdlib.h>\n+\n+#ifdef _MSC_VER\n+#  include <compat.h>\n+#else\n+#  include <unistd.h>\n+#endif\n+\n+#ifndef MINISKETCH_API\n+# if defined(_WIN32)\n+#  ifdef MINISKETCH_BUILD\n+#   define MINISKETCH_API __declspec(dllexport)\n+#  else\n+#   define MINISKETCH_API\n+#  endif\n+# elif defined(__GNUC__) && (__GNUC__ >= 4) && defined(MINISKETCH_BUILD)\n+#  define MINISKETCH_API __attribute__ ((visibility (\"default\")))\n+# else\n+#  define MINISKETCH_API\n+# endif\n+#endif\n+\n+#ifdef __cplusplus\n+#  if __cplusplus >= 201103L\n+#    include <memory>\n+#    include <vector>\n+#    include <cassert>\n+#    if __cplusplus >= 201703L\n+#      include <optional>\n+#    endif // __cplusplus >= 201703L\n+#  endif // __cplusplus >= 201103L\n+extern \"C\" {\n+#endif // __cplusplus\n+\n+/** Opaque type for decoded sketches. */\n+typedef struct minisketch minisketch;\n+\n+/** Determine whether support for elements of `bits` bits was compiled in. */\n+MINISKETCH_API int minisketch_bits_supported(uint32_t bits);\n+\n+/** Determine the maximum number of implementations available.\n+ *\n+ * Multiple implementations may be available for a given element size, with\n+ * different performance characteristics on different hardware.\n+ *\n+ * Each implementation is identified by a number from 0 to the output of this\n+ * function call, inclusive. Note that not every combination of implementation\n+ * and element size may exist (see further).\n+*/\n+MINISKETCH_API uint32_t minisketch_implementation_max(void);\n+\n+/** Determine if the a combination of bits and implementation number is available.\n+ *\n+ * Returns 1 if it is, 0 otherwise.\n+ */\n+MINISKETCH_API int minisketch_implementation_supported(uint32_t bits, uint32_t implementation);\n+\n+/** Construct a sketch for a given element size, implementation and capacity.\n+ *\n+ * If the combination of `bits` and `implementation` is unavailable, or when\n+ * OOM occurs, NULL is returned. If minisketch_implementation_supported\n+ * returns 1 for the specified bits and implementation, this will always succeed\n+ * (except when allocation fails).\n+ *\n+ * If the result is not NULL, it must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity);\n+\n+/** Get the element size of a sketch in bits. */\n+MINISKETCH_API uint32_t minisketch_bits(const minisketch* sketch);\n+\n+/** Get the capacity of a sketch. */\n+MINISKETCH_API size_t minisketch_capacity(const minisketch* sketch);\n+\n+/** Get the implementation of a sketch. */\n+MINISKETCH_API uint32_t minisketch_implementation(const minisketch* sketch);\n+\n+/** Set the seed for randomizing algorithm choices to a fixed value.\n+ *\n+ * By default, sketches are initialized with a random seed. This is important\n+ * to avoid scenarios where an attacker could force worst-case behavior.\n+ *\n+ * This function initializes the seed to a user-provided value (any 64-bit\n+ * integer is acceptable, regardless of field size).\n+ *\n+ * When seed is -1, a fixed internal value with predictable behavior is\n+ * used. It is only intended for testing.\n+ */\n+MINISKETCH_API void minisketch_set_seed(minisketch* sketch, uint64_t seed);\n+\n+/** Clone a sketch.\n+ *\n+ * The result must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_clone(const minisketch* sketch);\n+\n+/** Destroy a sketch.\n+ *\n+ * The pointer that was passed in may not be used anymore afterwards.\n+ */\n+MINISKETCH_API void minisketch_destroy(minisketch* sketch);\n+\n+/** Compute the size in bytes for serializing a given sketch. */\n+MINISKETCH_API size_t minisketch_serialized_size(const minisketch* sketch);\n+\n+/** Serialize a sketch to bytes. */\n+MINISKETCH_API void minisketch_serialize(const minisketch* sketch, unsigned char* output);\n+\n+/** Deserialize a sketch from bytes. */\n+MINISKETCH_API void minisketch_deserialize(minisketch* sketch, const unsigned char* input);\n+\n+/** Add an element to a sketch.\n+ * \n+ * If the element to be added is too large for the sketch, the most significant\n+ * bits of the element are dropped. More precisely, if the element size of\n+ * `sketch` is b bits, then this function adds the unsigned integer represented\n+ * by the b least significant bits of `element` to `sketch`.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670043855",
      "id" : 670043855,
      "line" : 121,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDA0Mzg1NQ==",
      "original_commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "original_line" : 121,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/minisketch/include/minisketch.h",
      "position" : 121,
      "pull_request_review_id" : 706814551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T01:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670043855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670048599"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670048599"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: could be called `is_valid`, more Core's nomenclature-like imo?",
      "commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "created_at" : "2021-07-15T00:55:47Z",
      "diff_hunk" : "@@ -0,0 +1,367 @@\n+#ifndef _MINISKETCH_H_\n+#define _MINISKETCH_H_ 1\n+\n+#include <stdint.h>\n+#include <stdlib.h>\n+\n+#ifdef _MSC_VER\n+#  include <compat.h>\n+#else\n+#  include <unistd.h>\n+#endif\n+\n+#ifndef MINISKETCH_API\n+# if defined(_WIN32)\n+#  ifdef MINISKETCH_BUILD\n+#   define MINISKETCH_API __declspec(dllexport)\n+#  else\n+#   define MINISKETCH_API\n+#  endif\n+# elif defined(__GNUC__) && (__GNUC__ >= 4) && defined(MINISKETCH_BUILD)\n+#  define MINISKETCH_API __attribute__ ((visibility (\"default\")))\n+# else\n+#  define MINISKETCH_API\n+# endif\n+#endif\n+\n+#ifdef __cplusplus\n+#  if __cplusplus >= 201103L\n+#    include <memory>\n+#    include <vector>\n+#    include <cassert>\n+#    if __cplusplus >= 201703L\n+#      include <optional>\n+#    endif // __cplusplus >= 201703L\n+#  endif // __cplusplus >= 201103L\n+extern \"C\" {\n+#endif // __cplusplus\n+\n+/** Opaque type for decoded sketches. */\n+typedef struct minisketch minisketch;\n+\n+/** Determine whether support for elements of `bits` bits was compiled in. */\n+MINISKETCH_API int minisketch_bits_supported(uint32_t bits);\n+\n+/** Determine the maximum number of implementations available.\n+ *\n+ * Multiple implementations may be available for a given element size, with\n+ * different performance characteristics on different hardware.\n+ *\n+ * Each implementation is identified by a number from 0 to the output of this\n+ * function call, inclusive. Note that not every combination of implementation\n+ * and element size may exist (see further).\n+*/\n+MINISKETCH_API uint32_t minisketch_implementation_max(void);\n+\n+/** Determine if the a combination of bits and implementation number is available.\n+ *\n+ * Returns 1 if it is, 0 otherwise.\n+ */\n+MINISKETCH_API int minisketch_implementation_supported(uint32_t bits, uint32_t implementation);\n+\n+/** Construct a sketch for a given element size, implementation and capacity.\n+ *\n+ * If the combination of `bits` and `implementation` is unavailable, or when\n+ * OOM occurs, NULL is returned. If minisketch_implementation_supported\n+ * returns 1 for the specified bits and implementation, this will always succeed\n+ * (except when allocation fails).\n+ *\n+ * If the result is not NULL, it must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity);\n+\n+/** Get the element size of a sketch in bits. */\n+MINISKETCH_API uint32_t minisketch_bits(const minisketch* sketch);\n+\n+/** Get the capacity of a sketch. */\n+MINISKETCH_API size_t minisketch_capacity(const minisketch* sketch);\n+\n+/** Get the implementation of a sketch. */\n+MINISKETCH_API uint32_t minisketch_implementation(const minisketch* sketch);\n+\n+/** Set the seed for randomizing algorithm choices to a fixed value.\n+ *\n+ * By default, sketches are initialized with a random seed. This is important\n+ * to avoid scenarios where an attacker could force worst-case behavior.\n+ *\n+ * This function initializes the seed to a user-provided value (any 64-bit\n+ * integer is acceptable, regardless of field size).\n+ *\n+ * When seed is -1, a fixed internal value with predictable behavior is\n+ * used. It is only intended for testing.\n+ */\n+MINISKETCH_API void minisketch_set_seed(minisketch* sketch, uint64_t seed);\n+\n+/** Clone a sketch.\n+ *\n+ * The result must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_clone(const minisketch* sketch);\n+\n+/** Destroy a sketch.\n+ *\n+ * The pointer that was passed in may not be used anymore afterwards.\n+ */\n+MINISKETCH_API void minisketch_destroy(minisketch* sketch);\n+\n+/** Compute the size in bytes for serializing a given sketch. */\n+MINISKETCH_API size_t minisketch_serialized_size(const minisketch* sketch);\n+\n+/** Serialize a sketch to bytes. */\n+MINISKETCH_API void minisketch_serialize(const minisketch* sketch, unsigned char* output);\n+\n+/** Deserialize a sketch from bytes. */\n+MINISKETCH_API void minisketch_deserialize(minisketch* sketch, const unsigned char* input);\n+\n+/** Add an element to a sketch.\n+ * \n+ * If the element to be added is too large for the sketch, the most significant\n+ * bits of the element are dropped. More precisely, if the element size of\n+ * `sketch` is b bits, then this function adds the unsigned integer represented\n+ * by the b least significant bits of `element` to `sketch`.\n+ * \n+ * If the element to be added is 0 (after potentially dropping the most significant\n+ * bits), then this function is a no-op. Sketches cannot contain an element with\n+ * the value 0.\n+ *\n+ * Note that adding the same element a second time removes it again.\n+ */\n+MINISKETCH_API void minisketch_add_uint64(minisketch* sketch, uint64_t element);\n+\n+/** Merge the elements of another sketch into this sketch.\n+ *\n+ * After merging, `sketch` will contain every element that existed in one but not\n+ * both of the input sketches. It can be seen as an exclusive or operation on\n+ * the set elements.  If the capacity of `other_sketch` is lower than `sketch`'s,\n+ * merging reduces the capacity of `sketch` to that of `other_sketch`.\n+ *\n+ * This function returns the capacity of `sketch` after merging has been performed\n+ * (where this capacity is at least 1), or 0 to indicate that merging has failed because\n+ * the two input sketches differ in their element size or implementation. If 0 is\n+ * returned, `sketch` (and its capacity) have not been modified.\n+ *\n+ * It is also possible to perform this operation directly on the serializations\n+ * of two sketches with the same element size and capacity by performing a bitwise XOR\n+ * of the serializations.\n+ */\n+MINISKETCH_API size_t minisketch_merge(minisketch* sketch, const minisketch* other_sketch);\n+\n+/** Decode a sketch.\n+ *\n+ * `output` is a pointer to an array of `max_element` uint64_t's, which will be\n+ * filled with the elements in this sketch.\n+ *\n+ * The return value is the number of decoded elements, or -1 if decoding failed.\n+ */\n+MINISKETCH_API ssize_t minisketch_decode(const minisketch* sketch, size_t max_elements, uint64_t* output);\n+\n+/** Compute the capacity needed to achieve a certain rate of false positives.\n+ *\n+ * A sketch with capacity c and no more than c elements can always be decoded\n+ * correctly. However, if it has more than c elements, or contains just random\n+ * bytes, it is possible that it will still decode, but the result will be\n+ * nonsense. This can be counteracted by increasing the capacity slightly.\n+ *\n+ * Given a field size bits, an intended number of elements that can be decoded\n+ * max_elements, and a false positive probability of 1 in 2**fpbits, this\n+ * function computes the necessary capacity. It is only guaranteed to be\n+ * accurate up to fpbits=256.\n+ */\n+MINISKETCH_API size_t minisketch_compute_capacity(uint32_t bits, size_t max_elements, uint32_t fpbits);\n+\n+/** Compute what max_elements can be decoded for a certain rate of false positives.\n+ *\n+ * This is the inverse operation of minisketch_compute_capacity. It determines,\n+ * given a field size bits, a capacity of a sketch, and an acceptable false\n+ * positive probability of 1 in 2**fpbits, what the maximum allowed\n+ * max_elements value is. If no value of max_elements would give the desired\n+ * false positive probability, 0 is returned.\n+ *\n+ * Note that this is not an exact inverse of minisketch_compute_capacity. For\n+ * example, with bits=32, fpbits=16, and max_elements=8,\n+ * minisketch_compute_capacity will return 9, as capacity 8 would only have a\n+ * false positive chance of 1 in 2^15.3. Increasing the capacity to 9 however\n+ * decreases the fp chance to 1 in 2^47.3, enough for max_elements=9 (with fp\n+ * chance of 1 in 2^18.5). Therefore, minisketch_compute_max_elements with\n+ * capacity=9 will return 9.\n+ */\n+MINISKETCH_API size_t minisketch_compute_max_elements(uint32_t bits, size_t capacity, uint32_t fpbits);\n+\n+#ifdef __cplusplus\n+}\n+\n+#if __cplusplus >= 201103L\n+/** Simple RAII C++11 wrapper around the minisketch API. */\n+class Minisketch\n+{\n+    struct Deleter\n+    {\n+        void operator()(minisketch* ptr) const\n+        {\n+            minisketch_destroy(ptr);\n+        }\n+    };\n+\n+    std::unique_ptr<minisketch, Deleter> m_minisketch;\n+\n+public:\n+    /** Check whether the library supports fields of the given size. */\n+    static bool BitsSupported(uint32_t bits) noexcept { return minisketch_bits_supported(bits); }\n+\n+    /** Get the highest supported implementation number. */\n+    static uint32_t MaxImplementation() noexcept { return minisketch_implementation_max(); }\n+\n+    /** Check whether the library supports fields with a given size and implementation number.\n+     *  If a particular field size `bits` is supported, implementation 0 is always supported for it.\n+     *  Higher implementation numbers may or may not be available as well, up to MaxImplementation().\n+     */\n+    static bool ImplementationSupported(uint32_t bits, uint32_t implementation) noexcept { return minisketch_implementation_supported(bits, implementation); }\n+\n+    /** Given field size and a maximum number of decodable elements n, compute what capacity c to\n+     *  use so that sketches with more elements than n have a chance no higher than 2^-fpbits of\n+     *  being decoded incorrectly (and will instead fail when decoding for up to n elements).\n+     *\n+     *  See minisketch_compute_capacity for more details. */\n+    static size_t ComputeCapacity(uint32_t bits, size_t max_elements, uint32_t fpbits) noexcept { return minisketch_compute_capacity(bits, max_elements, fpbits); }\n+\n+    /** Reverse operation of ComputeCapacity. See minisketch_compute_max_elements. */\n+    static size_t ComputeMaxElements(uint32_t bits, size_t capacity, uint32_t fpbits) noexcept { return minisketch_compute_max_elements(bits, capacity, fpbits); }\n+\n+    /** Construct a clone of the specified sketch. */\n+    Minisketch(const Minisketch& sketch) noexcept\n+    {\n+        if (sketch.m_minisketch) {\n+            m_minisketch = std::unique_ptr<minisketch, Deleter>(minisketch_clone(sketch.m_minisketch.get()));\n+        }\n+    }\n+\n+    /** Make this Minisketch a clone of the specified one. */\n+    Minisketch& operator=(const Minisketch& sketch) noexcept\n+    {\n+        if (sketch.m_minisketch) {\n+            m_minisketch = std::unique_ptr<minisketch, Deleter>(minisketch_clone(sketch.m_minisketch.get()));\n+        }\n+        return *this;\n+    }\n+\n+    /** Check whether this Minisketch object is valid. */\n+    explicit operator bool() const noexcept { return bool{m_minisketch}; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670048599",
      "id" : 670048599,
      "line" : 248,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDA0ODU5OQ==",
      "original_commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "original_line" : 248,
      "original_position" : 248,
      "original_start_line" : null,
      "path" : "src/minisketch/include/minisketch.h",
      "position" : 248,
      "pull_request_review_id" : 706814551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T01:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670048599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670050525"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670050525"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: make the \"may\" a \"must\", at least I interpret the requirement on the non-wrapped construction already as a must \"Use operator bool() to check that this isn't the case before performing any other operations\"",
      "commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "created_at" : "2021-07-15T01:01:53Z",
      "diff_hunk" : "@@ -0,0 +1,367 @@\n+#ifndef _MINISKETCH_H_\n+#define _MINISKETCH_H_ 1\n+\n+#include <stdint.h>\n+#include <stdlib.h>\n+\n+#ifdef _MSC_VER\n+#  include <compat.h>\n+#else\n+#  include <unistd.h>\n+#endif\n+\n+#ifndef MINISKETCH_API\n+# if defined(_WIN32)\n+#  ifdef MINISKETCH_BUILD\n+#   define MINISKETCH_API __declspec(dllexport)\n+#  else\n+#   define MINISKETCH_API\n+#  endif\n+# elif defined(__GNUC__) && (__GNUC__ >= 4) && defined(MINISKETCH_BUILD)\n+#  define MINISKETCH_API __attribute__ ((visibility (\"default\")))\n+# else\n+#  define MINISKETCH_API\n+# endif\n+#endif\n+\n+#ifdef __cplusplus\n+#  if __cplusplus >= 201103L\n+#    include <memory>\n+#    include <vector>\n+#    include <cassert>\n+#    if __cplusplus >= 201703L\n+#      include <optional>\n+#    endif // __cplusplus >= 201703L\n+#  endif // __cplusplus >= 201103L\n+extern \"C\" {\n+#endif // __cplusplus\n+\n+/** Opaque type for decoded sketches. */\n+typedef struct minisketch minisketch;\n+\n+/** Determine whether support for elements of `bits` bits was compiled in. */\n+MINISKETCH_API int minisketch_bits_supported(uint32_t bits);\n+\n+/** Determine the maximum number of implementations available.\n+ *\n+ * Multiple implementations may be available for a given element size, with\n+ * different performance characteristics on different hardware.\n+ *\n+ * Each implementation is identified by a number from 0 to the output of this\n+ * function call, inclusive. Note that not every combination of implementation\n+ * and element size may exist (see further).\n+*/\n+MINISKETCH_API uint32_t minisketch_implementation_max(void);\n+\n+/** Determine if the a combination of bits and implementation number is available.\n+ *\n+ * Returns 1 if it is, 0 otherwise.\n+ */\n+MINISKETCH_API int minisketch_implementation_supported(uint32_t bits, uint32_t implementation);\n+\n+/** Construct a sketch for a given element size, implementation and capacity.\n+ *\n+ * If the combination of `bits` and `implementation` is unavailable, or when\n+ * OOM occurs, NULL is returned. If minisketch_implementation_supported\n+ * returns 1 for the specified bits and implementation, this will always succeed\n+ * (except when allocation fails).\n+ *\n+ * If the result is not NULL, it must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_create(uint32_t bits, uint32_t implementation, size_t capacity);\n+\n+/** Get the element size of a sketch in bits. */\n+MINISKETCH_API uint32_t minisketch_bits(const minisketch* sketch);\n+\n+/** Get the capacity of a sketch. */\n+MINISKETCH_API size_t minisketch_capacity(const minisketch* sketch);\n+\n+/** Get the implementation of a sketch. */\n+MINISKETCH_API uint32_t minisketch_implementation(const minisketch* sketch);\n+\n+/** Set the seed for randomizing algorithm choices to a fixed value.\n+ *\n+ * By default, sketches are initialized with a random seed. This is important\n+ * to avoid scenarios where an attacker could force worst-case behavior.\n+ *\n+ * This function initializes the seed to a user-provided value (any 64-bit\n+ * integer is acceptable, regardless of field size).\n+ *\n+ * When seed is -1, a fixed internal value with predictable behavior is\n+ * used. It is only intended for testing.\n+ */\n+MINISKETCH_API void minisketch_set_seed(minisketch* sketch, uint64_t seed);\n+\n+/** Clone a sketch.\n+ *\n+ * The result must be destroyed using minisketch_destroy.\n+ */\n+MINISKETCH_API minisketch* minisketch_clone(const minisketch* sketch);\n+\n+/** Destroy a sketch.\n+ *\n+ * The pointer that was passed in may not be used anymore afterwards.\n+ */\n+MINISKETCH_API void minisketch_destroy(minisketch* sketch);\n+\n+/** Compute the size in bytes for serializing a given sketch. */\n+MINISKETCH_API size_t minisketch_serialized_size(const minisketch* sketch);\n+\n+/** Serialize a sketch to bytes. */\n+MINISKETCH_API void minisketch_serialize(const minisketch* sketch, unsigned char* output);\n+\n+/** Deserialize a sketch from bytes. */\n+MINISKETCH_API void minisketch_deserialize(minisketch* sketch, const unsigned char* input);\n+\n+/** Add an element to a sketch.\n+ * \n+ * If the element to be added is too large for the sketch, the most significant\n+ * bits of the element are dropped. More precisely, if the element size of\n+ * `sketch` is b bits, then this function adds the unsigned integer represented\n+ * by the b least significant bits of `element` to `sketch`.\n+ * \n+ * If the element to be added is 0 (after potentially dropping the most significant\n+ * bits), then this function is a no-op. Sketches cannot contain an element with\n+ * the value 0.\n+ *\n+ * Note that adding the same element a second time removes it again.\n+ */\n+MINISKETCH_API void minisketch_add_uint64(minisketch* sketch, uint64_t element);\n+\n+/** Merge the elements of another sketch into this sketch.\n+ *\n+ * After merging, `sketch` will contain every element that existed in one but not\n+ * both of the input sketches. It can be seen as an exclusive or operation on\n+ * the set elements.  If the capacity of `other_sketch` is lower than `sketch`'s,\n+ * merging reduces the capacity of `sketch` to that of `other_sketch`.\n+ *\n+ * This function returns the capacity of `sketch` after merging has been performed\n+ * (where this capacity is at least 1), or 0 to indicate that merging has failed because\n+ * the two input sketches differ in their element size or implementation. If 0 is\n+ * returned, `sketch` (and its capacity) have not been modified.\n+ *\n+ * It is also possible to perform this operation directly on the serializations\n+ * of two sketches with the same element size and capacity by performing a bitwise XOR\n+ * of the serializations.\n+ */\n+MINISKETCH_API size_t minisketch_merge(minisketch* sketch, const minisketch* other_sketch);\n+\n+/** Decode a sketch.\n+ *\n+ * `output` is a pointer to an array of `max_element` uint64_t's, which will be\n+ * filled with the elements in this sketch.\n+ *\n+ * The return value is the number of decoded elements, or -1 if decoding failed.\n+ */\n+MINISKETCH_API ssize_t minisketch_decode(const minisketch* sketch, size_t max_elements, uint64_t* output);\n+\n+/** Compute the capacity needed to achieve a certain rate of false positives.\n+ *\n+ * A sketch with capacity c and no more than c elements can always be decoded\n+ * correctly. However, if it has more than c elements, or contains just random\n+ * bytes, it is possible that it will still decode, but the result will be\n+ * nonsense. This can be counteracted by increasing the capacity slightly.\n+ *\n+ * Given a field size bits, an intended number of elements that can be decoded\n+ * max_elements, and a false positive probability of 1 in 2**fpbits, this\n+ * function computes the necessary capacity. It is only guaranteed to be\n+ * accurate up to fpbits=256.\n+ */\n+MINISKETCH_API size_t minisketch_compute_capacity(uint32_t bits, size_t max_elements, uint32_t fpbits);\n+\n+/** Compute what max_elements can be decoded for a certain rate of false positives.\n+ *\n+ * This is the inverse operation of minisketch_compute_capacity. It determines,\n+ * given a field size bits, a capacity of a sketch, and an acceptable false\n+ * positive probability of 1 in 2**fpbits, what the maximum allowed\n+ * max_elements value is. If no value of max_elements would give the desired\n+ * false positive probability, 0 is returned.\n+ *\n+ * Note that this is not an exact inverse of minisketch_compute_capacity. For\n+ * example, with bits=32, fpbits=16, and max_elements=8,\n+ * minisketch_compute_capacity will return 9, as capacity 8 would only have a\n+ * false positive chance of 1 in 2^15.3. Increasing the capacity to 9 however\n+ * decreases the fp chance to 1 in 2^47.3, enough for max_elements=9 (with fp\n+ * chance of 1 in 2^18.5). Therefore, minisketch_compute_max_elements with\n+ * capacity=9 will return 9.\n+ */\n+MINISKETCH_API size_t minisketch_compute_max_elements(uint32_t bits, size_t capacity, uint32_t fpbits);\n+\n+#ifdef __cplusplus\n+}\n+\n+#if __cplusplus >= 201103L\n+/** Simple RAII C++11 wrapper around the minisketch API. */\n+class Minisketch\n+{\n+    struct Deleter\n+    {\n+        void operator()(minisketch* ptr) const\n+        {\n+            minisketch_destroy(ptr);\n+        }\n+    };\n+\n+    std::unique_ptr<minisketch, Deleter> m_minisketch;\n+\n+public:\n+    /** Check whether the library supports fields of the given size. */\n+    static bool BitsSupported(uint32_t bits) noexcept { return minisketch_bits_supported(bits); }\n+\n+    /** Get the highest supported implementation number. */\n+    static uint32_t MaxImplementation() noexcept { return minisketch_implementation_max(); }\n+\n+    /** Check whether the library supports fields with a given size and implementation number.\n+     *  If a particular field size `bits` is supported, implementation 0 is always supported for it.\n+     *  Higher implementation numbers may or may not be available as well, up to MaxImplementation().\n+     */\n+    static bool ImplementationSupported(uint32_t bits, uint32_t implementation) noexcept { return minisketch_implementation_supported(bits, implementation); }\n+\n+    /** Given field size and a maximum number of decodable elements n, compute what capacity c to\n+     *  use so that sketches with more elements than n have a chance no higher than 2^-fpbits of\n+     *  being decoded incorrectly (and will instead fail when decoding for up to n elements).\n+     *\n+     *  See minisketch_compute_capacity for more details. */\n+    static size_t ComputeCapacity(uint32_t bits, size_t max_elements, uint32_t fpbits) noexcept { return minisketch_compute_capacity(bits, max_elements, fpbits); }\n+\n+    /** Reverse operation of ComputeCapacity. See minisketch_compute_max_elements. */\n+    static size_t ComputeMaxElements(uint32_t bits, size_t capacity, uint32_t fpbits) noexcept { return minisketch_compute_max_elements(bits, capacity, fpbits); }\n+\n+    /** Construct a clone of the specified sketch. */\n+    Minisketch(const Minisketch& sketch) noexcept\n+    {\n+        if (sketch.m_minisketch) {\n+            m_minisketch = std::unique_ptr<minisketch, Deleter>(minisketch_clone(sketch.m_minisketch.get()));\n+        }\n+    }\n+\n+    /** Make this Minisketch a clone of the specified one. */\n+    Minisketch& operator=(const Minisketch& sketch) noexcept\n+    {\n+        if (sketch.m_minisketch) {\n+            m_minisketch = std::unique_ptr<minisketch, Deleter>(minisketch_clone(sketch.m_minisketch.get()));\n+        }\n+        return *this;\n+    }\n+\n+    /** Check whether this Minisketch object is valid. */\n+    explicit operator bool() const noexcept { return bool{m_minisketch}; }\n+\n+    /** Construct an (invalid) Minisketch object. */\n+    Minisketch() noexcept = default;\n+\n+    /** Move constructor. */\n+    Minisketch(Minisketch&&) noexcept = default;\n+\n+    /** Move assignment. */\n+    Minisketch& operator=(Minisketch&&) noexcept = default;\n+\n+    /** Construct a Minisketch object with the specified parameters.\n+     *\n+     * If bits is not BitsSupported(), or the combination of bits and capacity is not\n+     * ImplementationSupported(), or OOM occurs internally, an invalid Minisketch\n+     * object will be constructed. Use operator bool() to check that this isn't the\n+     * case before performing any other operations. */\n+    Minisketch(uint32_t bits, uint32_t implementation, size_t capacity) noexcept\n+    {\n+        m_minisketch = std::unique_ptr<minisketch, Deleter>(minisketch_create(bits, implementation, capacity));\n+    }\n+\n+    /** Create a Minisketch object sufficiently large for the specified number of elements at given fpbits.\n+     *  It may construct an invalid object, which you may need to check for. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21859#discussion_r670050525",
      "id" : 670050525,
      "line" : 271,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDA1MDUyNQ==",
      "original_commit_id" : "f0d322d277abf39c0a1b6f0ffc8871ba5f5cff84",
      "original_line" : 271,
      "original_position" : 271,
      "original_start_line" : null,
      "path" : "src/minisketch/include/minisketch.h",
      "position" : 271,
      "pull_request_review_id" : 706814551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21859",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-15T01:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/670050525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   }
]
