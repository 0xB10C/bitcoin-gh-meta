[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20966 (banman: save the banlist in a JSON format on disk by vasild)\n* #18689 (rpc: allow dumptxoutset to dump human-readable data by pierreN)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-05-05T00:20:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-832338024",
      "id" : 832338024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMjMzODAyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-07T09:15:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832338024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review and concept ACK 2ca79de5a92be6f5179c47a4e28bcb5109a3670b\r\nGetting the data directory seems common enough (as well as shared between all commands) to have on gArgs directly.\r\nAgree that ideally, the arguments would be passed in some way instead of part of a global, but this is at least a step forward toward that.",
      "created_at" : "2021-05-10T12:51:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836660661",
      "id" : 836660661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNjY2MDY2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T12:52:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836660661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Just my opinion, but I do think since this is switching code to a new ArgsManager interface, it would be better for the interface to have explicit Base and Net methods instead of using the previous `bool net_specific=true` default argument. E.g. something like:\r\n\r\nI find this to be a very good suggestion. If this PR needs to be touched, I would do it in this PR. Otherwise, I would reserve that for a follow-up PR.",
      "created_at" : "2021-05-10T14:43:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836786273",
      "id" : 836786273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNjc4NjI3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T14:43:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836786273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is there a reason to suffix the return type to the function name? Wouldn't `GetDataDirBase` and `GetDataDirNet` be sufficient?",
      "created_at" : "2021-05-10T14:57:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-836803565",
      "id" : 836803565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzNjgwMzU2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-10T14:57:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836803565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> GetDataDirNetPath() would seem more readable than GetDataDirPath(true) at call sites,\r\n\r\nAgree. Boolean arguments tend to be bad for readability.",
      "created_at" : "2021-05-17T12:28:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-842284611",
      "id" : 842284611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MjI4NDYxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-17T12:28:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/842284611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> \r\n> \r\n> Code review ACK [2ca79de](https://github.com/bitcoin/bitcoin/commit/2ca79de5a92be6f5179c47a4e28bcb5109a3670b).\r\n> \r\n> Just my opinion, but I do think since this is switching code to a new ArgsManager interface, it would be better for the interface to have explicit Base and Net methods instead of using the previous `bool net_specific=true` default argument. E.g. something like:\r\n> \r\n> ```c++\r\n> public:\r\n>     const fs::path& GetDataDirBasePath() const { return GetDataDirPath(false); }\r\n>     const fs::path& GetDataDirNetPath() const { return GetDataDirPath(true); }\r\n> private:\r\n>     const fs::path& GetDataDirPath(bool net_specific) const;\r\n> ```\r\n> \r\n> `GetDataDirNetPath()` would seem more readable than `GetDataDirPath(true)` at call sites, and harder to confuse when writing code. And since call sites are being updated in this PR anyway, implementing this would just require tweaking the scripted diffs.\r\n\r\nI have attempted to do the change you propose. Please let me know if you find it better.\r\n\r\n(I'm sorry about the needless rebase. I got confused by a test result.)",
      "created_at" : "2021-05-21T09:41:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#issuecomment-845826044",
      "id" : 845826044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21850",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NTgyNjA0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-21T09:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/845826044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637092957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21850"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/637092957"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Use `ArgsManager.GetDataDirBasePath()` and `ArgsManager.GetDataDirNetPath()` instead of `ArgsManager.GetDataDirPath(net_identifier)`\" (80dec1717258fd74ae32274affed71daf2949e46)\r\n\r\nIMO it would be a little better to keep the `GetDataDirPath` method and argumentless `GetDataDirPath()` calls unchanged in this commit, so the commit is smaller. Then the subsequent scripted-diff commit could do mechanical work of replacing `m_args.GetDataDirPath()` with `m_args.GetDataDirNet()` and `GetDataDirPath` with `GetDataDir`.\r\n\r\nAlso, it doesn't matter since it only affects tests, but replacing `GetDataDirPath()` with `GetDataDirNet()` instead of `GetDataDirBase()` would be a more obvious choice to keep behavior unchanged.\r\n\r\nThis is all fine, though. Just extra suggestions in case there's a reason to update.",
      "commit_id" : "c8616c5c291c3c180460cf01ef3fcacd9194a2e4",
      "created_at" : "2021-05-21T17:36:56Z",
      "diff_hunk" : "@@ -195,7 +195,7 @@ TestingSetup::TestingSetup(const std::string& chainName, const std::vector<const\n     }\n \n     m_node.addrman = std::make_unique<CAddrMan>();\n-    m_node.banman = std::make_unique<BanMan>(m_args.GetDataDirPath() / \"banlist.dat\", nullptr, DEFAULT_MISBEHAVING_BANTIME);\n+    m_node.banman = std::make_unique<BanMan>(m_args.GetDataDirBase() / \"banlist.dat\", nullptr, DEFAULT_MISBEHAVING_BANTIME);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637092957",
      "id" : 637092957,
      "line" : 198,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNzA5Mjk1Nw==",
      "original_commit_id" : "80dec1717258fd74ae32274affed71daf2949e46",
      "original_line" : 198,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 5,
      "pull_request_review_id" : 665701688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21850",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-21T17:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/637092957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637381180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21850"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/637381180"
         }
      },
      "author_association" : "MEMBER",
      "body" : "80dec1717258fd74ae32274affed71daf2949e46: The goal of this pull is to remove the `GetDataDir` function, but here you introduce more call sites?\r\n\r\nAlso, it could make sense to have this in a separate commit and move the other mechanical changes to a scripted diff",
      "commit_id" : "c8616c5c291c3c180460cf01ef3fcacd9194a2e4",
      "created_at" : "2021-05-22T09:39:00Z",
      "diff_hunk" : "@@ -271,11 +271,18 @@ class ArgsManager\n     /**\n      * Get data directory path\n      *\n-     * @param net_specific Append network identifier to the returned path\n      * @return Absolute path on success, otherwise an empty path when a non-directory path would be returned\n      * @post Returned directory path is created unless it is empty\n      */\n-    const fs::path& GetDataDirPath(bool net_specific = true) const;\n+    const fs::path& GetDataDirBase() const { return GetDataDir(false); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21850#discussion_r637381180",
      "id" : 637381180,
      "line" : 276,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNzM4MTE4MA==",
      "original_commit_id" : "80dec1717258fd74ae32274affed71daf2949e46",
      "original_line" : 277,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/util/system.h",
      "position" : 41,
      "pull_request_review_id" : 666168476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21850",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-22T09:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/637381180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
