[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r113172602"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/113172602"
         }
      },
      "body" : "This functionality could come in useful.\r\n\r\nAs for the API I prefer to not do any string combining/parsing here, this makes the API less clean to work with at least in my experience. I'd prefer to add an optional (can be null or missing) `fromblock` argument.",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-04-25T11:47:12Z",
      "diff_hunk" : "@@ -192,11 +195,34 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"myblockhash:mytxid\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"myblockhash:mytxid\\\", true\")\n         );\n \n     LOCK(cs_main);\n \n-    uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    uint256 hash;\n+    int64_t blockHeight = -1;\n+    bool inMainChain = true;\n+    auto p = request.params[0].get_str().find(':');",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r113172602",
      "id" : 113172602,
      "original_commit_id" : "221e725814b9bba82c3f0f37ba3c4efea06038ea",
      "original_position" : 42,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 34538670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/113172602",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Nice feature!\r\nI agree with @laanwj about the string parsing. The `<block>:<txid>` schematics looks good at first sight, but we are using JSON and should stay with JSON and don't add another form or key/value encoding.",
      "created_at" : "2017-04-25T19:37:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-297141513",
      "id" : 297141513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-04-25T19:37:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297141513",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Fair enough, I'll add a blockhash argument instead. I was kind of toying with the idea of a new standard for referencing transactions which included the block height (not hash) so everyone could always find a tx presuming they had the block in question, and that thought sort of seeped in here.",
      "created_at" : "2017-04-26T04:24:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-297234272",
      "id" : 297234272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-04-26T04:24:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297234272",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@gmaxwell \r\n> Allowing it work on orphan blocks is an interesting idea. I'm a little less sure about that-- I think it could allow it to return transactions that have never been validated, which would be somewhat surprising.\r\n\r\nI just realized my logic was flawed on this. I am passing the block height only to the GetTransaction method, which means it will always pick the active chain at the given height. Either I throw when the block is not in the main chain (i.e. no support for orphaned blocks) or I move the height determine logic over to validation.cpp. I am leaning towards the latter, but feedback welcome.\r\n\r\nEdit: passing  CBlockIndex to GetTransaction seems like a great way to do this. Going with that.",
      "created_at" : "2017-04-26T05:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-297239855",
      "id" : 297239855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-04-26T06:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297239855",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "The code now works as advertised (see updated OP).\r\n\r\n[History](https://github.com/kallewoof/bitcoin/commits/gettx-with-blockhash-unsquashed):\r\n* 2017-04-25: [1 (block hash support in getrawtx)](https://github.com/kallewoof/bitcoin/commit/7f3042b2c4d4e5d9457365e4a6c8d4a57a3ec35b)\r\n* 2017-04-26: Ã¢ÂÂ [2Ã¢ÂÂ±1 (bh:txid to 2 params)](https://github.com/kallewoof/bitcoin/commit/e269ecd404268e68e05b632331e21eef07646b1f) Ã¢ÂÂ [3 (fix fVerbose parsing)](https://github.com/kallewoof/bitcoin/commit/228882777eaf04792cacd9bad3a206263f54aaba) Ã¢ÂÂ [4Ã¢ÂÂ±1 (switch to block index in GetTx)](https://github.com/kallewoof/bitcoin/commit/fb92653ff10c24344ff46d7ee686b32091983d90)",
      "created_at" : "2017-04-26T05:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-297243978",
      "id" : 297243978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-01T06:31:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/297243978",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114429566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114429566"
         }
      },
      "body" : "nit: You can replace this and the next three lines with:\r\n\r\n```c++\r\n} else {\r\n    fVerbose = (request.params[1].get_bool());\r\n}\r\n```\r\n\r\nsince `get_bool()` does the type testing for you and throws the JSONRPCError if the type isn't a VBOOL.\r\n\r\nUp to you whether you think that's clearer.",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-02T21:26:44Z",
      "diff_hunk" : "@@ -192,34 +195,44 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (request.params[1].isBool()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114429566",
      "id" : 114429566,
      "original_commit_id" : "23be83e143b29fc6f478b37218cc4e20ebe2c35a",
      "original_position" : 54,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 35895271,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114429566",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "utACK, but I think this deserves a new functional test case.",
      "created_at" : "2017-05-02T21:27:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-298766522",
      "id" : 298766522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-02T21:27:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298766522",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114771044"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114771044"
         }
      },
      "body" : "Ohh, good point! Thanks.\r\nEdit: I don't want it to throw for `null` values though. ",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-04T13:23:22Z",
      "diff_hunk" : "@@ -192,34 +195,44 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (request.params[1].isBool()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114771044",
      "id" : 114771044,
      "original_commit_id" : "23be83e143b29fc6f478b37218cc4e20ebe2c35a",
      "original_position" : 54,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 36265827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114771044",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114771638"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114771638"
         }
      },
      "body" : "So I end up with\r\n```C++\r\n        if (request.params[1].isNum()) {\r\n            fVerbose = (request.params[1].get_int() != 0);\r\n        } else if (!request.params[1].isNull()) {\r\n            fVerbose = (request.params[1].get_bool());\r\n        }\r\n```",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-04T13:26:05Z",
      "diff_hunk" : "@@ -192,34 +195,44 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (request.params[1].isBool()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r114771638",
      "id" : 114771638,
      "original_commit_id" : "23be83e143b29fc6f478b37218cc4e20ebe2c35a",
      "original_position" : 54,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 36266506,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114771638",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@jnewbery I agree. Will get to work on that.\r\n\r\n[[...]](https://github.com/kallewoof/bitcoin/commits/gettx-with-blockhash-unsquashed):\r\n* 2017-05-04: [5Ã¢ÂÂ±2 (improve fVerbose)](https://github.com/kallewoof/bitcoin/commit/2a921bf5585ac72e2154b41492ab70ecd3e46241)",
      "created_at" : "2017-05-04T13:31:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-299185551",
      "id" : 299185551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-04T13:31:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299185551",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@jnewbery Added some tests to `rawtransactions.py` for the included blockhash variant (a6b8461).\r\n\r\n[[...]](https://github.com/kallewoof/bitcoin/commits/gettx-with-blockhash-unsquashed):\r\n* 2017-05-08: [6 (tests)](https://github.com/kallewoof/bitcoin/commit/99f115cc5a0d3dc8b93b5107ed2fe933488c85e6)",
      "created_at" : "2017-05-08T04:28:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-299770203",
      "id" : 299770203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-08T04:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299770203",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116580150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116580150"
         }
      },
      "body" : "nit: no need for brackets here. The following should do:\r\n\r\n`block1, block2 = self.nodes[2].generate(2)`",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-15T19:28:59Z",
      "diff_hunk" : "@@ -64,6 +64,20 @@ def run_test(self):\n         # This will raise an exception since there are missing inputs\n         assert_raises_jsonrpc(-25, \"Missing inputs\", self.nodes[2].sendrawtransaction, rawtx['hex'])\n \n+        ############################\n+        # getrawtx with block hash #\n+        ############################\n+\n+        # make a tx by sending then generate 2 blocks; block1 has the tx in it,\n+        # presumably\n+        tx = self.nodes[2].sendtoaddress(self.nodes[1].getnewaddress(), 1)\n+        [ block1, block2 ] = self.nodes[2].generate(2)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116580150",
      "id" : 116580150,
      "original_commit_id" : "a6b84618ad04dccc628aa4905fced4784a62895a",
      "original_position" : 11,
      "path" : "test/functional/rawtransactions.py",
      "position" : null,
      "pull_request_review_id" : 38211445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116580150",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116580435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116580435"
         }
      },
      "body" : "nit: I think it's better to assert on the actual value here (ie verify that the getrawtransaction returned the correct transaction rather than returned anything). The following should do that:\r\n\r\n`assert_equal(self.nodes[0].getrawtransaction(tx, True, block1)['txid'], tx)`",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-15T19:30:21Z",
      "diff_hunk" : "@@ -64,6 +64,20 @@ def run_test(self):\n         # This will raise an exception since there are missing inputs\n         assert_raises_jsonrpc(-25, \"Missing inputs\", self.nodes[2].sendrawtransaction, rawtx['hex'])\n \n+        ############################\n+        # getrawtx with block hash #\n+        ############################\n+\n+        # make a tx by sending then generate 2 blocks; block1 has the tx in it,\n+        # presumably\n+        tx = self.nodes[2].sendtoaddress(self.nodes[1].getnewaddress(), 1)\n+        [ block1, block2 ] = self.nodes[2].generate(2)\n+        self.sync_all()\n+        # We should be able to get the raw transaction by providing the correct block\n+        assert self.nodes[0].getrawtransaction(tx, True, block1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116580435",
      "id" : 116580435,
      "original_commit_id" : "a6b84618ad04dccc628aa4905fced4784a62895a",
      "original_position" : 14,
      "path" : "test/functional/rawtransactions.py",
      "position" : null,
      "pull_request_review_id" : 38211445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116580435",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Is this still needed after #8704?",
      "created_at" : "2017-05-15T22:32:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301623888",
      "id" : 301623888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-15T22:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301623888",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa The use cases are quite different I think. #8704 lets you see all transactions in a given block. This lets you grab a transaction directly from a block without indexing.",
      "created_at" : "2017-05-16T02:41:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301659483",
      "id" : 301659483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T02:41:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301659483",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@kallewoof #8704 does not require indexing either",
      "created_at" : "2017-05-16T02:42:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301659552",
      "id" : 301659552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T02:42:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301659552",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yeah, sorry, I meant that this is a way to get a specific transaction if you know the block hash, whereas #8704 shows you all transactions in the entire block. You get the info, but you have to wade through stuff to get it.",
      "created_at" : "2017-05-16T02:56:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301661539",
      "id" : 301661539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T02:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301661539",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116656164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116656164"
         }
      },
      "body" : "@jnewbery Good points, thanks. Addressed!",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-05-16T05:12:43Z",
      "diff_hunk" : "@@ -64,6 +64,20 @@ def run_test(self):\n         # This will raise an exception since there are missing inputs\n         assert_raises_jsonrpc(-25, \"Missing inputs\", self.nodes[2].sendrawtransaction, rawtx['hex'])\n \n+        ############################\n+        # getrawtx with block hash #\n+        ############################\n+\n+        # make a tx by sending then generate 2 blocks; block1 has the tx in it,\n+        # presumably\n+        tx = self.nodes[2].sendtoaddress(self.nodes[1].getnewaddress(), 1)\n+        [ block1, block2 ] = self.nodes[2].generate(2)\n+        self.sync_all()\n+        # We should be able to get the raw transaction by providing the correct block\n+        assert self.nodes[0].getrawtransaction(tx, True, block1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r116656164",
      "id" : 116656164,
      "original_commit_id" : "a6b84618ad04dccc628aa4905fced4784a62895a",
      "original_position" : 14,
      "path" : "test/functional/rawtransactions.py",
      "position" : null,
      "pull_request_review_id" : 38292688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/116656164",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "In both cases the whole block has to be loaded from disk, and parsed, and searched linearly. The difference is whether the linear search step happens on the server or client.\r\n\r\nI think both #8704 and this can be useful, but have to agree there's only superficial difference.\r\n",
      "created_at" : "2017-05-16T05:25:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301678856",
      "id" : 301678856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T05:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301678856",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The difference between the two is the serialization and transmission and parsing of ~5MB of JSON data vs a few hundred bytes of hex encoded data. That's a 1,000x difference on the client side, and the same absolute improvement on the server -- although as a multiplier it'd be less since as you note the server still has to parse the block from disk. That's a nontrivial performance difference.\r\n\r\n(Also, this would have greatly helped me in the past so another +1 from me.)",
      "created_at" : "2017-05-16T08:32:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301713146",
      "id" : 301713146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T08:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301713146",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "Agree with @maaku - simply encoding the data into 5MB of json could be time-consuming, during which time the cs_main lock is held. Having a command to return just a single transaction from a block seems very useful.",
      "created_at" : "2017-05-16T13:31:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-301782636",
      "id" : 301782636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-05-16T13:31:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/301782636",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996123"
         }
      },
      "body" : "Should probably mention that it MUST be in that block in this case...",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-03T22:11:33Z",
      "diff_hunk" : "@@ -124,12 +124,13 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n \n UniValue getrawtransaction(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 3)\n         throw std::runtime_error(\n-            \"getrawtransaction \\\"txid\\\" ( verbose )\\n\"\n+            \"getrawtransaction \\\"txid\\\" ( verbose \\\"blockhash\\\" )\\n\"\n \n             \"\\nNOTE: By default this function only works for mempool transactions. If the -txindex option is\\n\"\n-            \"enabled, it also works for blockchain transactions.\\n\"\n+            \"enabled, it also works for blockchain transactions. If the block hash is known, it can be provided\\n\"\n+            \"for nodes without -txindex.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996123",
      "id" : 119996123,
      "original_commit_id" : "8f84e8c6e1e1b357c7080ac1830d24d057b07dc0",
      "original_position" : 13,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 41928927,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996123",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996146"
         }
      },
      "body" : "Remove \"in chain\". Maybe \"in database\"?",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-03T22:13:56Z",
      "diff_hunk" : "@@ -192,34 +195,42 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (!request.params[1].isNull()) {\n+            fVerbose = (request.params[1].get_bool());\n         }\n-        else if(request.params[1].isBool()) {\n-            if(request.params[1].isTrue()) {\n-                fVerbose = true;\n+    }\n+\n+    if (request.params.size() > 2 && !request.params[2].isNull()) {\n+        uint256 blockHash = ParseHashV(request.params[2], \"parameter 3\");\n+        if (!blockHash.IsNull()) {\n+            BlockMap::iterator it = mapBlockIndex.find(blockHash);\n+            if (it == mapBlockIndex.end()) {\n+                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block hash not found in chain\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996146",
      "id" : 119996146,
      "original_commit_id" : "8f84e8c6e1e1b357c7080ac1830d24d057b07dc0",
      "original_position" : 67,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 41928927,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996146",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996169"
         }
      },
      "body" : "Whether *the block specified* is in the main chain or not... This could be false with the tx being still in the main chain!",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-03T22:14:43Z",
      "diff_hunk" : "@@ -139,12 +140,14 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             \"\\nArguments:\\n\"\n             \"1. \\\"txid\\\"      (string, required) The transaction id\\n\"\n             \"2. verbose       (bool, optional, default=false) If false, return a string, otherwise return a json object\\n\"\n+            \"3. \\\"blockhash\\\" (string, optional) The block in which to look for the transaction\\n\"\n \n             \"\\nResult (if verbose is not set or set to false):\\n\"\n             \"\\\"data\\\"      (string) The serialized, hex-encoded data for 'txid'\\n\"\n \n             \"\\nResult (if verbose is set to true):\\n\"\n             \"{\\n\"\n+            \"  \\\"inMainChain\\\": b,       (bool) Whether transaction is in the main chain or not. Only visible when specifying block hash\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r119996169",
      "id" : 119996169,
      "original_commit_id" : "8f84e8c6e1e1b357c7080ac1830d24d057b07dc0",
      "original_position" : 28,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 41928927,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/119996169",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Suggested message fix on my `gettx-with-blockhash-0.14` branch (cherry-pick).",
      "created_at" : "2017-06-03T22:28:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-306005152",
      "id" : 306005152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-06-03T22:28:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306005152",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2017-06-04T18:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-306058851",
      "id" : 306058851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-06-04T18:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306058851",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@luke-jr Thanks for the review! I cherry-picked your commit. \r\n\r\n[[...]](https://github.com/kallewoof/bitcoin/commits/gettx-with-blockhash-unsquashed):\r\n* 2017-06-05: [7 (nits (luke-jr))](https://github.com/kallewoof/bitcoin/commit/974e4ef131c79aa78b7f7eeb759b1d729823c33e)\r\n\r\n@sipa Rebased.",
      "created_at" : "2017-06-05T00:19:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-306077485",
      "id" : 306077485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-06-05T00:19:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306077485",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120715589"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120715589"
         }
      },
      "body" : "Hmm? Shouldn't we use the parameter's name here instead of \"parameter 3\"?",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-07T18:57:08Z",
      "diff_hunk" : "@@ -130,34 +134,42 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (!request.params[1].isNull()) {\n+            fVerbose = (request.params[1].get_bool());\n         }\n-        else if(request.params[1].isBool()) {\n-            if(request.params[1].isTrue()) {\n-                fVerbose = true;\n+    }\n+\n+    if (request.params.size() > 2 && !request.params[2].isNull()) {\n+        uint256 blockHash = ParseHashV(request.params[2], \"parameter 3\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120715589",
      "id" : 120715589,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 64,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42702171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120715589",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120717627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120717627"
         }
      },
      "body" : "Hmm, maybe say \"if blockhash is specified\" or otherwise mention this wont appear unless a blockhash is provided. Even better, fill it out if GetTransaction returns the blockhash cause it found it via UTXO/txindex.",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-07T19:06:07Z",
      "diff_hunk" : "@@ -77,12 +79,14 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             \"\\nArguments:\\n\"\n             \"1. \\\"txid\\\"      (string, required) The transaction id\\n\"\n             \"2. verbose       (bool, optional, default=false) If false, return a string, otherwise return a json object\\n\"\n+            \"3. \\\"blockhash\\\" (string, optional) The block in which to look for the transaction\\n\"\n \n             \"\\nResult (if verbose is not set or set to false):\\n\"\n             \"\\\"data\\\"      (string) The serialized, hex-encoded data for 'txid'\\n\"\n \n             \"\\nResult (if verbose is set to true):\\n\"\n             \"{\\n\"\n+            \"  \\\"inMainChain\\\": b,       (bool) Whether specified block is in the main chain or not\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120717627",
      "id" : 120717627,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 29,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42702171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120717627",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120718991"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120718991"
         }
      },
      "body" : "grammar nit: this reads funny to me, and could be a bit more explicit. Maybe:\r\n\r\n\"If the block which contains the transaction is known, its hash can be provided even for nodes without -txindex.\"\r\n\"Note that if a blockhash is provided, only it will be searched and if the transaction is in mempool, other blocks, or if this node does not have the given block available, the transaction will not be found.\"",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-07T19:12:31Z",
      "diff_hunk" : "@@ -62,12 +62,14 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n \n UniValue getrawtransaction(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 3)\n         throw std::runtime_error(\n-            \"getrawtransaction \\\"txid\\\" ( verbose )\\n\"\n+            \"getrawtransaction \\\"txid\\\" ( verbose \\\"blockhash\\\" )\\n\"\n \n             \"\\nNOTE: By default this function only works for mempool transactions. If the -txindex option is\\n\"\n-            \"enabled, it also works for blockchain transactions.\\n\"\n+            \"enabled, it also works for blockchain transactions. If the block hash is known, it can be provided\\n\"\n+            \"for nodes without -txindex, in which case the transaction will only be found if it is in that\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120718991",
      "id" : 120718991,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 13,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42702171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120718991",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120719169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120719169"
         }
      },
      "body" : "Maybe further update this error message, eg if (blockIndex) \"No such transaction found in the provided block\".",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-07T19:13:25Z",
      "diff_hunk" : "@@ -130,34 +134,42 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (!request.params[1].isNull()) {\n+            fVerbose = (request.params[1].get_bool());\n         }\n-        else if(request.params[1].isBool()) {\n-            if(request.params[1].isTrue()) {\n-                fVerbose = true;\n+    }\n+\n+    if (request.params.size() > 2 && !request.params[2].isNull()) {\n+        uint256 blockHash = ParseHashV(request.params[2], \"parameter 3\");\n+        if (!blockHash.IsNull()) {\n+            BlockMap::iterator it = mapBlockIndex.find(blockHash);\n+            if (it == mapBlockIndex.end()) {\n+                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block hash not found\");\n             }\n-        }\n-        else {\n-            throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid type provided. Verbose parameter must be a boolean.\");\n+            blockIndex = it->second;\n+            inMainChain = (chainActive[blockIndex->nHeight] == blockIndex);\n         }\n     }\n \n     CTransactionRef tx;\n     uint256 hashBlock;\n-    if (!GetTransaction(hash, tx, Params().GetConsensus(), hashBlock, true))\n-        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, std::string(fTxIndex ? \"No such mempool or blockchain transaction\"\n+    if (!GetTransaction(hash, tx, Params().GetConsensus(), hashBlock, true, blockIndex))\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, std::string(fTxIndex || blockIndex ? \"No such mempool or blockchain transaction\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120719169",
      "id" : 120719169,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 83,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42702171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120719169",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798213"
         }
      },
      "body" : "Thanks, that looks better yeah. Adding with minor tweaks.\r\n```C++\r\n            \"\\nNOTE: By default this function only works for mempool transactions. If the -txindex option is\\n\"\r\n            \"enabled, it also works for blockchain transactions. If the block which contains the transaction\\n\"\r\n            \"is known, its hash can be provided even for nodes without -txindex. Note that if a blockhash is\\n\"\r\n            \"provided, only that block will be searched and if the transaction is in the mempool or other\\n\"\r\n            \"blocks, or if this node does not have the given block available, the transaction will not be found.\\n\"\r\n```\r\n",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-08T04:34:31Z",
      "diff_hunk" : "@@ -62,12 +62,14 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n \n UniValue getrawtransaction(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 3)\n         throw std::runtime_error(\n-            \"getrawtransaction \\\"txid\\\" ( verbose )\\n\"\n+            \"getrawtransaction \\\"txid\\\" ( verbose \\\"blockhash\\\" )\\n\"\n \n             \"\\nNOTE: By default this function only works for mempool transactions. If the -txindex option is\\n\"\n-            \"enabled, it also works for blockchain transactions.\\n\"\n+            \"enabled, it also works for blockchain transactions. If the block hash is known, it can be provided\\n\"\n+            \"for nodes without -txindex, in which case the transaction will only be found if it is in that\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798213",
      "id" : 120798213,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 13,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42790097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798213",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798376"
         }
      },
      "body" : "I was sure I did, but guess not:\r\n```C++\r\n            \"  \\\"inMainChain\\\": b,     (bool) Whether specified block is in the main chain or not (only present with explicit \\\"blockhash\\\" argument)\\n\"\r\n```\r\nI like the idea of including when able but will keep it out of this PR for now.",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-08T04:36:44Z",
      "diff_hunk" : "@@ -77,12 +79,14 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             \"\\nArguments:\\n\"\n             \"1. \\\"txid\\\"      (string, required) The transaction id\\n\"\n             \"2. verbose       (bool, optional, default=false) If false, return a string, otherwise return a json object\\n\"\n+            \"3. \\\"blockhash\\\" (string, optional) The block in which to look for the transaction\\n\"\n \n             \"\\nResult (if verbose is not set or set to false):\\n\"\n             \"\\\"data\\\"      (string) The serialized, hex-encoded data for 'txid'\\n\"\n \n             \"\\nResult (if verbose is set to true):\\n\"\n             \"{\\n\"\n+            \"  \\\"inMainChain\\\": b,       (bool) Whether specified block is in the main chain or not\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798376",
      "id" : 120798376,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 29,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42790266,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798376",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798462"
         }
      },
      "body" : "The general tendency seems to be to identify the parameter index so I stuck with that. I agree it may be better to be more descriptive though...",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-08T04:37:52Z",
      "diff_hunk" : "@@ -130,34 +134,42 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (!request.params[1].isNull()) {\n+            fVerbose = (request.params[1].get_bool());\n         }\n-        else if(request.params[1].isBool()) {\n-            if(request.params[1].isTrue()) {\n-                fVerbose = true;\n+    }\n+\n+    if (request.params.size() > 2 && !request.params[2].isNull()) {\n+        uint256 blockHash = ParseHashV(request.params[2], \"parameter 3\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798462",
      "id" : 120798462,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 64,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42790352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798462",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798796"
         }
      },
      "body" : "Yeah, I wanted to avoid `?:?:`. Rewritten as:\r\n```C++\r\n    if (!GetTransaction(hash, tx, Params().GetConsensus(), hashBlock, true, blockIndex)) {\r\n        std::string errmsg;\r\n        if (blockIndex) {\r\n            errmsg = \"No such transaction found in the provided block\";\r\n        } else {\r\n            errmsg = fTxIndex\r\n              ? \"No such mempool or blockchain transaction\"\r\n              : \"No such mempool transaction. Use -txindex to enable blockchain transaction queries\";\r\n        }\r\n        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\r\n    }\r\n```\r\n",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-06-08T04:41:33Z",
      "diff_hunk" : "@@ -130,34 +134,42 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true\")\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n         );\n \n     LOCK(cs_main);\n \n+    bool inMainChain = true;\n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n+    CBlockIndex* blockIndex = NULL;\n \n     // Accept either a bool (true) or a num (>=1) to indicate verbose output.\n     bool fVerbose = false;\n     if (request.params.size() > 1) {\n         if (request.params[1].isNum()) {\n-            if (request.params[1].get_int() != 0) {\n-                fVerbose = true;\n-            }\n+            fVerbose = (request.params[1].get_int() != 0);\n+        } else if (!request.params[1].isNull()) {\n+            fVerbose = (request.params[1].get_bool());\n         }\n-        else if(request.params[1].isBool()) {\n-            if(request.params[1].isTrue()) {\n-                fVerbose = true;\n+    }\n+\n+    if (request.params.size() > 2 && !request.params[2].isNull()) {\n+        uint256 blockHash = ParseHashV(request.params[2], \"parameter 3\");\n+        if (!blockHash.IsNull()) {\n+            BlockMap::iterator it = mapBlockIndex.find(blockHash);\n+            if (it == mapBlockIndex.end()) {\n+                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block hash not found\");\n             }\n-        }\n-        else {\n-            throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid type provided. Verbose parameter must be a boolean.\");\n+            blockIndex = it->second;\n+            inMainChain = (chainActive[blockIndex->nHeight] == blockIndex);\n         }\n     }\n \n     CTransactionRef tx;\n     uint256 hashBlock;\n-    if (!GetTransaction(hash, tx, Params().GetConsensus(), hashBlock, true))\n-        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, std::string(fTxIndex ? \"No such mempool or blockchain transaction\"\n+    if (!GetTransaction(hash, tx, Params().GetConsensus(), hashBlock, true, blockIndex))\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, std::string(fTxIndex || blockIndex ? \"No such mempool or blockchain transaction\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r120798796",
      "id" : 120798796,
      "original_commit_id" : "caa27c1d5d9491f4e0e51ae88874dbcf0f4d6be4",
      "original_position" : 83,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 42790704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/120798796",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "@TheBlueMatt Thanks for the review!\r\n\r\n> Generally we try to make sure that after each individual commit, at least it builds and all tests pass.\r\n\r\nWe try to keep tests as separate commits though, so that would assume tests and code changes come in pairs (tests will fail before test commit or after test commit and before change commit, obv). That was my intention with the split here. I may have screwed up. I'll double check and/or squash as appropriate.\r\n\r\nEdit: I noticed the order was off (two fixes then two tests). Rearranged them. The commit/test pairs now pass make check individually (i.e. a43ec61 and 8f2ce52).\r\n\r\nEdit 2: [[...]](https://github.com/kallewoof/bitcoin/commits/gettx-with-blockhash-unsquashed):\r\n* 2017-06-08: [8 (nits)](https://github.com/kallewoof/bitcoin/commit/65d77eaf656547f0ee1539b01eb180968c1fee79)",
      "created_at" : "2017-06-08T04:43:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-306996708",
      "id" : 306996708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-06-08T05:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/306996708",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "utACK 8f2ce52c9257392d7e6523b39a26e9697a30ca76",
      "created_at" : "2017-06-22T21:15:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-310504749",
      "id" : 310504749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-06-22T21:15:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310504749",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Needs rebase.",
      "created_at" : "2017-07-14T08:09:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315299193",
      "id" : 315299193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-14T08:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315299193",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2017-07-14T09:48:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315319217",
      "id" : 315319217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-14T09:48:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315319217",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "a) Is there a reason why mainchain height is not supported as alternative for the blockhash? Eventually with a security of only accepting heights of a hundred blocks below the tip as a reorganisation protection (but I'd prefer to not add this protection).\r\n\r\nb) @kallewoof the idea about the standard for a transaction reference has already been worked into a BIP: https://github.com/bitcoin/bips/pull/555 (maybe we can support this Ã¢ÂÂ if we agree on that BIP to be worth implementing Ã¢ÂÂÃÂ also via `getrawtransaction`).",
      "created_at" : "2017-07-14T09:53:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315320364",
      "id" : 315320364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-14T09:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315320364",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Regarding height, I chose not to include it as it could potentially cause unexpected results when a reorg happens, but if people don't think that's an issue it should be fairly straightforward to allow for both.\r\n\r\nEdit: as for the standard, that looks exciting for sure. If it matures enough and this PR isn't merged already I may take a stab at it.",
      "created_at" : "2017-07-14T10:18:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315325449",
      "id" : 315325449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-14T10:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315325449",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127816715"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127816715"
         }
      },
      "body" : "This may be confused with Params().NetworkIDString() == \"main\" (kind of like we do with \"testnet\" in getinfo).\r\nCan we rename to \"inActiveChain\" or something of the sort?",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-07-17T20:30:31Z",
      "diff_hunk" : "@@ -76,12 +79,14 @@ UniValue getrawtransaction(const JSONRPCRequest& request)\n             \"\\nArguments:\\n\"\n             \"1. \\\"txid\\\"      (string, required) The transaction id\\n\"\n             \"2. verbose       (bool, optional, default=false) If false, return a string, otherwise return a json object\\n\"\n+            \"3. \\\"blockhash\\\" (string, optional) The block in which to look for the transaction\\n\"\n \n             \"\\nResult (if verbose is not set or set to false):\\n\"\n             \"\\\"data\\\"      (string) The serialized, hex-encoded data for 'txid'\\n\"\n \n             \"\\nResult (if verbose is set to true):\\n\"\n             \"{\\n\"\n+            \"  \\\"inMainChain\\\": b,     (bool) Whether specified block is in the main chain or not (only present with explicit \\\"blockhash\\\" argument)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127816715",
      "id" : 127816715,
      "original_commit_id" : "3ec2d287e24c9cc573ead2898546499abf49db9d",
      "original_position" : 30,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 50438104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127816715",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127818832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127818832"
         }
      },
      "body" : "Perhaps the diff can be less disruptive by moving everything inside ```if (!blockIndex) {...}``` to a new static function defined right above instead of indenting all of it?",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-07-17T20:38:45Z",
      "diff_hunk" : "@@ -900,43 +900,44 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n }\n \n /** Return transaction in txOut, and if it was found inside a block, its hash is placed in hashBlock */\n-bool GetTransaction(const uint256 &hash, CTransactionRef &txOut, const Consensus::Params& consensusParams, uint256 &hashBlock, bool fAllowSlow)\n+bool GetTransaction(const uint256 &hash, CTransactionRef &txOut, const Consensus::Params& consensusParams, uint256 &hashBlock, bool fAllowSlow, CBlockIndex* blockIndex)\n {\n-    CBlockIndex *pindexSlow = NULL;\n+    CBlockIndex* pindexSlow = blockIndex;\n \n     LOCK(cs_main);\n \n-    CTransactionRef ptx = mempool.get(hash);\n-    if (ptx)\n-    {\n-        txOut = ptx;\n-        return true;\n-    }\n+    if (!blockIndex) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127818832",
      "id" : 127818832,
      "original_commit_id" : "3ec2d287e24c9cc573ead2898546499abf49db9d",
      "original_position" : 18,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 50440382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127818832",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "utACK 3ec2d287e24c9cc573ead2898546499abf49db9d besides small nits.",
      "created_at" : "2017-07-17T20:45:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315877808",
      "id" : 315877808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-17T20:45:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315877808",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127875966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127875966"
         }
      },
      "body" : "I'm not a huge fan of changing code just to make diffs smaller, and as I mention above, you can put `?w=1` to get diff without indentation changes.",
      "commit_id" : "632567160e5f178d9fcf1b058f26130c4a0ac851",
      "created_at" : "2017-07-18T03:32:33Z",
      "diff_hunk" : "@@ -900,43 +900,44 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n }\n \n /** Return transaction in txOut, and if it was found inside a block, its hash is placed in hashBlock */\n-bool GetTransaction(const uint256 &hash, CTransactionRef &txOut, const Consensus::Params& consensusParams, uint256 &hashBlock, bool fAllowSlow)\n+bool GetTransaction(const uint256 &hash, CTransactionRef &txOut, const Consensus::Params& consensusParams, uint256 &hashBlock, bool fAllowSlow, CBlockIndex* blockIndex)\n {\n-    CBlockIndex *pindexSlow = NULL;\n+    CBlockIndex* pindexSlow = blockIndex;\n \n     LOCK(cs_main);\n \n-    CTransactionRef ptx = mempool.get(hash);\n-    if (ptx)\n-    {\n-        txOut = ptx;\n-        return true;\n-    }\n+    if (!blockIndex) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#discussion_r127875966",
      "id" : 127875966,
      "original_commit_id" : "3ec2d287e24c9cc573ead2898546499abf49db9d",
      "original_position" : 18,
      "path" : "src/validation.cpp",
      "position" : 18,
      "pull_request_review_id" : 50501504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10275",
      "updated_at" : "2017-07-18T03:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127875966",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "Addressed @jtimon nits.\r\n@jonasschnelli I added support for supplying block height instead of block hash.",
      "created_at" : "2017-07-18T03:45:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-315950004",
      "id" : 315950004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-18T03:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315950004",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "I'm not sure about allowing the height.\r\nOne can always call getblockhash if he knows the txid and block height without knowing the block hash somehow.\r\nThat's not the case for the BIP proposal @jonasschnelli refers to, since they don't know the txid anyway (only block height and tx position). I suggest we leave the BIP discussion out of this PR, which in my opinion makes sense on its own. And also leave the height option for later (or never).\r\n",
      "created_at" : "2017-07-18T21:59:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-316210666",
      "id" : 316210666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-18T21:59:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316210666",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon It feels like a convenience thing that, IMO, getblock should have as well (i.e. allow both height number and block hash). I don't have a strong opinion on the subject though, and will drop the last 2 commits (height support) whenever this is ready for merging unless someone argues for block height support.\r\n",
      "created_at" : "2017-07-19T02:15:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10275#issuecomment-316252594",
      "id" : 316252594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10275",
      "updated_at" : "2017-07-19T02:15:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316252594",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   }
]
