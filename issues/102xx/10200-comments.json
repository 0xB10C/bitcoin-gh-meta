[
   {
      "body" : "Concept ACK.",
      "created_at" : "2017-04-14T20:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#issuecomment-294230277",
      "id" : 294230277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10200",
      "updated_at" : "2017-04-14T20:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/294230277",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Concept OK, not so sure about implementation. This seems to be all-or-nothing with regard to recent transactions - wouldn't you want to evaluate it as a gradient (eg, maybe it makes sense to include 29-second-old txs, but not newer)?",
      "created_at" : "2017-04-19T18:46:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#issuecomment-295386666",
      "id" : 295386666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10200",
      "updated_at" : "2017-04-19T18:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295386666",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10200#discussion_r112284136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10200"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112284136"
         }
      },
      "body" : "How does this differ from the default copy constructor?\r\n",
      "commit_id" : "dfd4e73c97818eb57bdf9e34a9085904a5250a92",
      "created_at" : "2017-04-19T18:46:46Z",
      "diff_hunk" : "@@ -26,6 +26,16 @@ static const bool DEFAULT_PRINTPRIORITY = false;\n \n struct CBlockTemplate\n {\n+    CBlockTemplate(const CBlockTemplate &tmpl) :\n+        block(tmpl.block), vTxFees(tmpl.vTxFees),\n+        vTxSigOpsCost(tmpl.vTxSigOpsCost),\n+        vchCoinbaseCommitment(tmpl.vchCoinbaseCommitment)\n+    {\n+        block.vtx = tmpl.block.vtx;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#discussion_r112284136",
      "id" : 112284136,
      "original_commit_id" : "a986a97ed49099e8dda7ed65647f789af3142130",
      "original_position" : 10,
      "path" : "src/miner.h",
      "position" : null,
      "pull_request_review_id" : 33587175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10200",
      "updated_at" : "2017-04-20T16:44:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112284136",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr   You could go hog wild with multiple choices,  >X, >Y, >Z second old.. but if its tuned right it should pretty much always be choosing to exclude recent transactions, and the other alternative is just so that you don't regret your decisions when some bozo sends a very high fee transaction.   The marginal gain from more options is going to be pretty small compared to the block creation delay from the CPU costs in considering more options-- and what you'll be mining on instead.  E.g. spending another 10ms mining on an empty block is probably not worth whatever gain you could have in considering another recentness level.\r\n\r\nIt's also the case that block propagation performance between miners is probably pretty consistent and narrowly spread... meaning that either you made a block that could get everywhere with 0-rtt or you didn't-- and there probably isn't a lot of space in-between.   So I think thats what this is modeling: the no-recent alternative will make it ~everywhere with no round trips, and the other one is going to take a round trip-- so you only want it if it pays enough more to justify the increased orphan risk.\r\n",
      "created_at" : "2017-04-20T00:42:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#issuecomment-295515125",
      "id" : 295515125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10200",
      "updated_at" : "2017-04-20T00:42:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295515125",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I didn't mean more options, just that the algorithm could evaluate the age-cost/value initially when building the template rather than building the entire template twice. :)",
      "created_at" : "2017-04-20T00:45:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#issuecomment-295516333",
      "id" : 295516333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10200",
      "updated_at" : "2017-04-20T00:45:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295516333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10200#discussion_r112501675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10200"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112501675"
         }
      },
      "body" : "Apparently it doesn't (I was confused by whether a CBlock could be copy-constructed from another CBlock).  Will remove.\r\n\r\nRemoved in dfd4e73c97818eb57bdf9e34a9085904a5250a92",
      "commit_id" : "dfd4e73c97818eb57bdf9e34a9085904a5250a92",
      "created_at" : "2017-04-20T16:41:02Z",
      "diff_hunk" : "@@ -26,6 +26,16 @@ static const bool DEFAULT_PRINTPRIORITY = false;\n \n struct CBlockTemplate\n {\n+    CBlockTemplate(const CBlockTemplate &tmpl) :\n+        block(tmpl.block), vTxFees(tmpl.vTxFees),\n+        vTxSigOpsCost(tmpl.vTxSigOpsCost),\n+        vchCoinbaseCommitment(tmpl.vchCoinbaseCommitment)\n+    {\n+        block.vtx = tmpl.block.vtx;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#discussion_r112501675",
      "id" : 112501675,
      "original_commit_id" : "a986a97ed49099e8dda7ed65647f789af3142130",
      "original_position" : 10,
      "path" : "src/miner.h",
      "position" : null,
      "pull_request_review_id" : 33822450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10200",
      "updated_at" : "2017-04-20T16:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112501675",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "> I didn't mean more options, just that the algorithm could evaluate the age-cost/value initially when building the template rather than building the entire template twice. :)\r\n\r\n@luke-jr  Well note that this implementation doesn't build the entire template twice; it copies the template, and throws out the recent transactions and rebuilds from there.\r\n\r\nIf I understand it right, I think it's hard to make your suggestion work: the fee adjustment based on time-received is not independent of the other choices you make when selecting transactions (in modeling the binary \"0 vs >=1\" round trips to relay a block), and trying to model it with an implementation that makes a single pass, where some transactions are evaluated with only local information, is hard to get right.  Either you'll include recent transactions too often because your criteria is too loose, or if your criteria is tighter, you risk giving up too much fee income if network conditions change.",
      "created_at" : "2017-04-21T15:29:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10200#issuecomment-296223025",
      "id" : 296223025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10200",
      "updated_at" : "2017-04-21T15:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296223025",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   }
]
