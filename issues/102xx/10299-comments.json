[
   {
      "body" : "I'd like to see us pull most seeder stuff out of the earlier randomness PR to set that initial state to protect against cases like we saw in netbsd where the OS rng was producing no randomness of use.",
      "created_at" : "2017-04-29T18:18:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10299#issuecomment-298185550",
      "id" : 298185550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10299",
      "updated_at" : "2017-04-29T18:18:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298185550",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell As that's trying to protect against a scenario that the current OpenSSL-based approach is unlikely to be protecting against, I think that's something that can easily be done in a later PR.",
      "created_at" : "2017-04-29T18:31:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10299#issuecomment-298186284",
      "id" : 298186284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10299",
      "updated_at" : "2017-04-29T18:31:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298186284",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa OpenSSL used a collection of system pointers and timestamps, and our use on windows also adds a screenshot.  I agree that they can be considered separately, but we should do the improved seeding first so that we're not potentially introducing a vulnerability on systems where the os entropy isn't helpful.",
      "created_at" : "2017-04-29T19:25:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10299#issuecomment-298189304",
      "id" : 298189304,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10299",
      "updated_at" : "2017-04-29T19:25:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298189304",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell I had a look at what OpenSSL 1.1.0 uses as RNG seeding (latest stable release):\r\n* On UNIX systems\r\n  * read /dev/urandom / EGD / arc4random bytes (through a poll loop, which does not gather timing information)\r\n  * The (internally cached!) current pid\r\n  * getuid()\r\n  * time() (seconds resolution)\r\n* On Windows:\r\n  * CryptGenRandom (OS entropy, like we do)\r\n  * Intel HW rng (through OS call)\r\n  * Timing information (tsc if available, GetPerformanceCounter like we do, GetTickCount)\r\n  * Memory usage statistics\r\n  * Current pid\r\n  * Since https://github.com/openssl/openssl/pull/1079, RAND_screen does not actually read the screen anymore, but is an alias for RAND_poll (which uses the above steps as source).\r\n\r\nIf we include the missing sources (pid/uid/rdrand/tsc/memusage) in our GetRandBytes call, do you agree it is a strict improvement?",
      "created_at" : "2017-04-30T18:58:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10299#issuecomment-298250033",
      "id" : 298250033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10299",
      "updated_at" : "2017-04-30T18:58:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298250033",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
