[
   {
      "body" : "I know there was discussion about this in IRC last week, but I didn't follow closely. Would it be better to review this PR now, or hold off for more changes?",
      "created_at" : "2017-05-01T18:46:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10240#issuecomment-298399758",
      "id" : 298399758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10240",
      "updated_at" : "2017-05-01T18:46:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298399758",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "I'm currently implementing the changes we discussed in last weeks RIC meeting. A review makes more sense after the overhaul.",
      "created_at" : "2017-05-02T13:08:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10240#issuecomment-298630235",
      "id" : 298630235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10240",
      "updated_at" : "2017-05-02T13:08:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298630235",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Completely rewrote this PR. Keeping the WIP tag for now.\r\nThe current implementation takes care of encrypted and unencrypted wallets (also in conjunction with pruning).\r\n\r\n### unencrypted wallets\r\nFor unencrypted wallets, the key pool will always be topped up. During sync (SyncTransaction), we check for used keypool keys and mark all keys up to the matched key as used. Additionally we topup the keypool to ensure we not fall below the gap limit (20 keys).\r\n\r\n### encrypted wallets in non pruning mode\r\nSame as above, but, If we hit the gap limit with an encrypted wallet, we can't topup the keypool. In that case, we just pause the sync (not the node, only the wallet).\r\nOnce the user unlocks the wallet over `walletpassphrase`, we rescan down to the point where we have stopped previously to ensure we don't miss possible funds.\r\n\r\n### encrypted wallets in pruned mode\r\nSame as above, but, we also stop requesting and connecting blocks. The full node will \"pause\" in this case until the user did unlock his wallet (== topup, rescan, etc.).\r\n\r\nThis has a little bit of complexity and requires careful reviews.\r\nThanks for early feedback.\r\n",
      "created_at" : "2017-05-03T15:37:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10240#issuecomment-298949058",
      "id" : 298949058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10240",
      "updated_at" : "2017-05-03T15:37:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/298949058",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
