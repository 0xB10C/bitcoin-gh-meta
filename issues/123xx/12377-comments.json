[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166627236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166627236"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'm not convinced that this makes a difference at all. initialzeResult is emitted with the return value of `appInitMain`. The return value of `appInitMain` (\"success\") is supposed to be false when shutdown was requested during initialization.",
      "commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "created_at" : "2018-02-07T14:10:09Z",
      "diff_hunk" : "@@ -467,8 +467,7 @@ void BitcoinApplication::initializeResult(bool success)\n     qDebug() << __func__ << \": Initialization result: \" << success;\n     // Set exit result.\n     returnValue = success ? EXIT_SUCCESS : EXIT_FAILURE;\n-    if(success)\n-    {\n+    if (success && !ShutdownRequested()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166627236",
      "id" : 166627236,
      "original_commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "original_position" : 6,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 6,
      "pull_request_review_id" : 94719752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377",
      "updated_at" : "2018-02-07T14:10:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166627236",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166645923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166645923"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It can make a difference if shutdown is requested between `AppInitMain()` returns and when this slot is executed, it's a QueuedConnection.",
      "commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "created_at" : "2018-02-07T15:08:45Z",
      "diff_hunk" : "@@ -467,8 +467,7 @@ void BitcoinApplication::initializeResult(bool success)\n     qDebug() << __func__ << \": Initialization result: \" << success;\n     // Set exit result.\n     returnValue = success ? EXIT_SUCCESS : EXIT_FAILURE;\n-    if(success)\n-    {\n+    if (success && !ShutdownRequested()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166645923",
      "id" : 166645923,
      "in_reply_to_id" : 166627236,
      "original_commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "original_position" : 6,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 6,
      "pull_request_review_id" : 94741766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377",
      "updated_at" : "2018-02-07T15:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166645923",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166646506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166646506"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe \r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 50643ff96b..1f46e5e3d2 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1736,5 +1736,5 @@ bool AppInitMain()\r\n     StartWallets(scheduler);\r\n #endif\r\n \r\n-    return true;\r\n+    return !ShutdownRequested();\r\n }",
      "commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "created_at" : "2018-02-07T15:10:23Z",
      "diff_hunk" : "@@ -467,8 +467,7 @@ void BitcoinApplication::initializeResult(bool success)\n     qDebug() << __func__ << \": Initialization result: \" << success;\n     // Set exit result.\n     returnValue = success ? EXIT_SUCCESS : EXIT_FAILURE;\n-    if(success)\n-    {\n+    if (success && !ShutdownRequested()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166646506",
      "id" : 166646506,
      "in_reply_to_id" : 166627236,
      "original_commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "original_position" : 6,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 6,
      "pull_request_review_id" : 94742492,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377",
      "updated_at" : "2018-02-07T15:10:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166646506",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166649434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166649434"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed `AppInitMain()` return was changed recently in #11831, but I still think that is correct. IMO this change is also correct, it avoids initialization **but** the application should not crash without this change, so I don't agree it's a fix.",
      "commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "created_at" : "2018-02-07T15:19:00Z",
      "diff_hunk" : "@@ -467,8 +467,7 @@ void BitcoinApplication::initializeResult(bool success)\n     qDebug() << __func__ << \": Initialization result: \" << success;\n     // Set exit result.\n     returnValue = success ? EXIT_SUCCESS : EXIT_FAILURE;\n-    if(success)\n-    {\n+    if (success && !ShutdownRequested()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12377#discussion_r166649434",
      "id" : 166649434,
      "in_reply_to_id" : 166627236,
      "original_commit_id" : "fa3024b8df80b46971c0eeee48c98216d0bcdde9",
      "original_position" : 6,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 6,
      "pull_request_review_id" : 94746026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12377",
      "updated_at" : "2018-02-07T15:19:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166649434",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
