[
   {
      "author_association" : "MEMBER",
      "body" : "This will need rebase after https://github.com/bitcoin/bitcoin/pull/11739 , won't it?",
      "created_at" : "2018-02-05T17:33:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#issuecomment-363159119",
      "id" : 363159119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12360",
      "updated_at" : "2018-02-05T17:33:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363159119",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This will need rebase after #11739 , won't it?\r\n\r\nThere are no dependencies between the two, but you're correct that there are some minor conflicts in the implementations. I'm happy to rebase if 11739 is merged first.",
      "created_at" : "2018-02-05T18:08:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#issuecomment-363169671",
      "id" : 363169671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12360",
      "updated_at" : "2018-02-05T18:08:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363169671",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166125724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166125724"
         }
      },
      "author_association" : "OWNER",
      "body" : "Duplicated line?",
      "commit_id" : "caab009d91178ec8ee3a53d7a5f321e97b480b44",
      "created_at" : "2018-02-05T21:59:58Z",
      "diff_hunk" : "@@ -1074,54 +1074,47 @@ UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.push_back(Pair(\"status\", activated));\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.push_back(Pair(\"id\", name));\n-    rv.push_back(Pair(\"version\", version));\n-    rv.push_back(Pair(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams)));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    rv.pushKV(\"type\", \"buried\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166125724",
      "id" : 166125724,
      "original_commit_id" : "fc50434d31446a634bc2212cec3a66816bd9c1ff",
      "original_position" : 37,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 94158290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360",
      "updated_at" : "2018-02-05T22:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166125724",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166126145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166126145"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes? :trollface: ",
      "commit_id" : "caab009d91178ec8ee3a53d7a5f321e97b480b44",
      "created_at" : "2018-02-05T22:01:52Z",
      "diff_hunk" : "@@ -1074,54 +1074,47 @@ UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.push_back(Pair(\"status\", activated));\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.push_back(Pair(\"id\", name));\n-    rv.push_back(Pair(\"version\", version));\n-    rv.push_back(Pair(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams)));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    rv.pushKV(\"type\", \"buried\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166126145",
      "id" : 166126145,
      "in_reply_to_id" : 166125724,
      "original_commit_id" : "fc50434d31446a634bc2212cec3a66816bd9c1ff",
      "original_position" : 37,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 94158790,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360",
      "updated_at" : "2018-02-05T22:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166126145",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166126752"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166126752"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Any good reason for reference?",
      "commit_id" : "caab009d91178ec8ee3a53d7a5f321e97b480b44",
      "created_at" : "2018-02-05T22:04:23Z",
      "diff_hunk" : "@@ -59,6 +59,11 @@ void CChainParams::UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64\n     consensus.vDeployments[d].nTimeout = nTimeout;\n }\n \n+void CChainParams::UpdateSegwitHeight(const int& height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166126752",
      "id" : 166126752,
      "original_commit_id" : "b58d5603c07870398baa51403b372898e2d8f10b",
      "original_position" : 4,
      "path" : "src/chainparams.cpp",
      "position" : null,
      "pull_request_review_id" : 94159521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360",
      "updated_at" : "2018-02-05T22:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166126752",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166130917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166130917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "caab009d91178ec8ee3a53d7a5f321e97b480b44",
      "created_at" : "2018-02-05T22:21:27Z",
      "diff_hunk" : "@@ -1074,54 +1074,47 @@ UniValue verifychain(const JSONRPCRequest& request)\n     return CVerifyDB().VerifyDB(Params(), pcoinsTip.get(), nCheckLevel, nCheckDepth);\n }\n \n-/** Implementation of IsSuperMajority with better feedback */\n-static UniValue SoftForkMajorityDesc(int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n+static void BuriedForkDescPushBack(UniValue& softforks, const std::string &name, int height)\n {\n-    UniValue rv(UniValue::VOBJ);\n-    bool activated = false;\n-    switch(version)\n-    {\n-        case 2:\n-            activated = pindex->nHeight >= consensusParams.BIP34Height;\n-            break;\n-        case 3:\n-            activated = pindex->nHeight >= consensusParams.BIP66Height;\n-            break;\n-        case 4:\n-            activated = pindex->nHeight >= consensusParams.BIP65Height;\n-            break;\n-    }\n-    rv.push_back(Pair(\"status\", activated));\n-    return rv;\n-}\n+    // For buried deployments.\n+    // Buried deployments with activation height value of std::numeric_limits<int>::max() are hidden.\n+    if (height == std::numeric_limits<int>::max()) return;\n \n-static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex* pindex, const Consensus::Params& consensusParams)\n-{\n     UniValue rv(UniValue::VOBJ);\n-    rv.push_back(Pair(\"id\", name));\n-    rv.push_back(Pair(\"version\", version));\n-    rv.push_back(Pair(\"reject\", SoftForkMajorityDesc(version, pindex, consensusParams)));\n-    return rv;\n+    rv.pushKV(\"type\", \"buried\");\n+    rv.pushKV(\"type\", \"buried\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166130917",
      "id" : 166130917,
      "in_reply_to_id" : 166125724,
      "original_commit_id" : "fc50434d31446a634bc2212cec3a66816bd9c1ff",
      "original_position" : 37,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 94164228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360",
      "updated_at" : "2018-02-05T22:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166130917",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166130947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166130947"
         }
      },
      "author_association" : "MEMBER",
      "body" : "None. Removed.",
      "commit_id" : "caab009d91178ec8ee3a53d7a5f321e97b480b44",
      "created_at" : "2018-02-05T22:21:36Z",
      "diff_hunk" : "@@ -59,6 +59,11 @@ void CChainParams::UpdateVersionBitsParameters(Consensus::DeploymentPos d, int64\n     consensus.vDeployments[d].nTimeout = nTimeout;\n }\n \n+void CChainParams::UpdateSegwitHeight(const int& height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12360#discussion_r166130947",
      "id" : 166130947,
      "in_reply_to_id" : 166126752,
      "original_commit_id" : "b58d5603c07870398baa51403b372898e2d8f10b",
      "original_position" : 4,
      "path" : "src/chainparams.cpp",
      "position" : null,
      "pull_request_review_id" : 94164270,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12360",
      "updated_at" : "2018-02-05T22:27:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166130947",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
