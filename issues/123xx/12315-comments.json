[
   {
      "author_association" : "NONE",
      "body" : "`p2sh-p2wpkh` addresses along with the `p2wpkh` raw script are still visible in the scripts area in dumpwallet.\r\n`importwallet` behaves the same (will import **all** scriptpubkey types)\r\nI've set the address to be written in the dump to be `[unknown address type]` if neither legacy, p2sh-segwit or bech32 are set in the client, but I'm not sure if it could ever happen.\r\nIn any case, it doesn't affect `importwallet` which will still import such dumps successfully.",
      "created_at" : "2018-01-31T17:22:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362005742",
      "id" : 362005742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-01-31T17:30:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362005742",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Actually, this is not good enough.  If an uncompressed privkey is being dumped, the address should be a p2pkh one regardless of the global setting.",
      "created_at" : "2018-01-31T17:52:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362015034",
      "id" : 362015034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-01-31T17:52:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362015034",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Moved the decision as to which address we should output to after `CKey key` is set so we can check if it's compressed or not.\r\nA mixed output looks like :\r\n\r\n```\r\n# extended private masterkey: tprv8ZgxMBicQKsPe1mq9Pnix5Ui8nJAFhT4CTcMSK881Nyg1H6AF4zyASDK55NtwbG7mW811RXsLZpJCzN1wLDF8CN2urZprbTUL5inwqKNMFG\r\n\r\n93VarZKnS5AGpxz86jLJ3amfXyVqY5eAjQ93noAshDYCbj55RW8 1970-01-01T00:00:01Z label= # addr=mzaNtEKZ62cqBUo3vNyYMURCzgqzFd9aGU\r\ncNQYFxubhW4PhxubRZzDhPnaU3vFifU2XoohqfQyFuCSNcrwJsTQ 2018-01-31T18:00:52Z reserve=1 # addr=bcrt1qpm5uqjvw6mqmqgdanu7q248pppcpec9ascwhle hdkeypath=m/0'/0'/8'\r\ncQp1biWyU45diaMQNpjgnHpVKutNMWJwwu1h9MrNRQLHVenAGu74 2018-01-31T18:00:52Z reserve=1 # addr=bcrt1qz5rqcfpzwh4hmugdrgjytwkv42xf9ymajuq9hq hdkeypath=m/0'/0'/0'\r\n```\r\n\r\nSegwit scriptpubkeys are not created for this uncompressed key on `importwallet`.",
      "created_at" : "2018-01-31T18:07:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362019598",
      "id" : 362019598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-01-31T18:07:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362019598",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I tested this by:\r\n\r\n- creating a wallet using v0.14.2, and generating one address\r\n- re-opening the wallet using bitcoind from this PR and dumping\r\n\r\nThe resulting dump has bech32 output for the old generated address.  I assume this wasn't the intention?\r\n\r\nHere are the dumps.  With 0.14.2:\r\n\r\n    cNfTtkT9q15ozS2ESSVcTEXaZorQwrDkwioFZgniwrqVJzs6DFAJ 2018-02-01T00:08:58Z label= # addr=mv7rgSAEUbJe3gnAsEmdSZS8koSYwD2S7G hdkeypath=m/0'/0'/1'\r\n\r\nand with this PR:\r\n\r\n    cNfTtkT9q15ozS2ESSVcTEXaZorQwrDkwioFZgniwrqVJzs6DFAJ 2018-02-01T00:08:58Z label= # addr=bcrt1q5q46yxf6gaelwlx8253py0qdyqzst32dtpf04e hdkeypath=m/0'/0'/1'\r\n",
      "created_at" : "2018-02-01T01:15:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362125939",
      "id" : 362125939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T01:15:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362125939",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/107096?v=4",
         "events_url" : "https://api.github.com/users/devrandom/events{/privacy}",
         "followers_url" : "https://api.github.com/users/devrandom/followers",
         "following_url" : "https://api.github.com/users/devrandom/following{/other_user}",
         "gists_url" : "https://api.github.com/users/devrandom/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/devrandom",
         "id" : 107096,
         "login" : "devrandom",
         "organizations_url" : "https://api.github.com/users/devrandom/orgs",
         "received_events_url" : "https://api.github.com/users/devrandom/received_events",
         "repos_url" : "https://api.github.com/users/devrandom/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/devrandom/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/devrandom"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Right, I haven't identified a way of telling whether keys were added before or after the wallet upgrade for bech32.\r\nIn this PR the output address type is only decided by what's set in the global setting.  The only way to get the base58 addresses back is by changing the setting to addresstype=legacy.  Maybe I missed some marker in the wallet that suggests the point of upgrade?",
      "created_at" : "2018-02-01T01:39:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362130129",
      "id" : 362130129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T01:39:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362130129",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "You can check which of the corresponding addresses has a label set. Typically this will only be one of the P2PKH, P2SH-P2WPKH, or P2WPKH ones. If so, you could just output that exact one. Unfortunately this won't work for imported keys, as they get the label assigned to all 3.",
      "created_at" : "2018-02-01T01:44:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362131002",
      "id" : 362131002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T01:44:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362131002",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks!  I'll see what I can do.",
      "created_at" : "2018-02-01T02:42:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362140721",
      "id" : 362140721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T02:42:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362140721",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So perhaps the thing to do is to output any of the address types that have a label, and if none have a label output the global type.  So up to three addresses per line.\r\n",
      "created_at" : "2018-02-01T03:05:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362144245",
      "id" : 362144245,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T03:05:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362144245",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/107096?v=4",
         "events_url" : "https://api.github.com/users/devrandom/events{/privacy}",
         "followers_url" : "https://api.github.com/users/devrandom/followers",
         "following_url" : "https://api.github.com/users/devrandom/following{/other_user}",
         "gists_url" : "https://api.github.com/users/devrandom/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/devrandom",
         "id" : 107096,
         "login" : "devrandom",
         "organizations_url" : "https://api.github.com/users/devrandom/orgs",
         "received_events_url" : "https://api.github.com/users/devrandom/received_events",
         "repos_url" : "https://api.github.com/users/devrandom/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/devrandom/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/devrandom"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@devrandom sorry the page didn't auto update with your comment.  So you're saying that multiple addresses per entry is better?\r\nWith this push, the first hit is used.  I guess I see your point now though.",
      "created_at" : "2018-02-01T03:32:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362148114",
      "id" : 362148114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T03:32:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362148114",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Given Sipa's point, with imported keys you'd outputting the first address type in the `if` statement, not necessarily the type that the user is actually using or expecting.\r\n",
      "created_at" : "2018-02-01T06:44:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362173894",
      "id" : 362173894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T06:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362173894",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/107096?v=4",
         "events_url" : "https://api.github.com/users/devrandom/events{/privacy}",
         "followers_url" : "https://api.github.com/users/devrandom/followers",
         "following_url" : "https://api.github.com/users/devrandom/following{/other_user}",
         "gists_url" : "https://api.github.com/users/devrandom/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/devrandom",
         "id" : 107096,
         "login" : "devrandom",
         "organizations_url" : "https://api.github.com/users/devrandom/orgs",
         "received_events_url" : "https://api.github.com/users/devrandom/received_events",
         "repos_url" : "https://api.github.com/users/devrandom/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/devrandom/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/devrandom/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/devrandom"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "(sorry for mass pushing, I'll push to a side branch for now)",
      "created_at" : "2018-02-01T16:26:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12315#issuecomment-362320220",
      "id" : 362320220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12315",
      "updated_at" : "2018-02-01T16:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362320220",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   }
]
