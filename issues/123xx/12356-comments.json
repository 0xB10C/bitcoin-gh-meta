[
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/pull/12356/commits/875d62f42a614cf03ac858a493f105f846f3afcf",
      "created_at" : "2018-02-05T16:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#issuecomment-363135718",
      "id" : 363135718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12356",
      "updated_at" : "2018-02-05T16:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363135718",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 875d62f.\r\n\r\nIt would be nice to add tests for `mempool min fee not met` and `mempool full` errors, it's the missing cases of `REJECT_INSUFFICIENTFEE`.",
      "created_at" : "2018-02-05T17:00:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#issuecomment-363149029",
      "id" : 363149029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12356",
      "updated_at" : "2018-02-05T17:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363149029",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I added a change to include the full FormatStateMessage output in RPC errors that are currently including just the reason or reason + code. That would include the missing debug output that comes up e.g. in #11955",
      "created_at" : "2018-02-07T03:55:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#issuecomment-363649177",
      "id" : 363649177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12356",
      "updated_at" : "2018-02-07T03:55:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/363649177",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166887156"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166887156"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe you can set `feeRate` option in `fundrawtransaction` instead.",
      "commit_id" : "bb00c95c16f50c5dfab1aa8fbb6c873318a6acc8",
      "created_at" : "2018-02-08T10:18:43Z",
      "diff_hunk" : "@@ -50,5 +50,18 @@ def run_test(self):\n         assert_equal(self.nodes[0].getmempoolinfo()['minrelaytxfee'], Decimal('0.00001000'))\n         assert_greater_than(self.nodes[0].getmempoolinfo()['mempoolminfee'], Decimal('0.00001000'))\n \n+        self.log.info('Create a mempool tx that will not pass mempoolminfee')\n+        us0 = utxos.pop()\n+        inputs = [{ \"txid\" : us0[\"txid\"], \"vout\" : us0[\"vout\"]}]\n+        outputs = {self.nodes[0].getnewaddress() : 0.0001}\n+        tx = self.nodes[0].createrawtransaction(inputs, outputs)\n+        self.nodes[0].settxfee(relayfee) # specifically fund this tx with a fee < mempoolminfee, >= than minrelaytxfee",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166887156",
      "id" : 166887156,
      "original_commit_id" : "16d05540f61ebfff0fe0ab3f9d0b723b058bfe89",
      "original_position" : 9,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 95018953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356",
      "updated_at" : "2018-02-08T16:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166887156",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166887791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166887791"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess there is no need to assert this, `sendrawtransaction` above failed. This `assert` makes sense when testing `sendrawtransaction` failure, so move it there if it's missing.",
      "commit_id" : "bb00c95c16f50c5dfab1aa8fbb6c873318a6acc8",
      "created_at" : "2018-02-08T10:21:20Z",
      "diff_hunk" : "@@ -50,5 +50,18 @@ def run_test(self):\n         assert_equal(self.nodes[0].getmempoolinfo()['minrelaytxfee'], Decimal('0.00001000'))\n         assert_greater_than(self.nodes[0].getmempoolinfo()['mempoolminfee'], Decimal('0.00001000'))\n \n+        self.log.info('Create a mempool tx that will not pass mempoolminfee')\n+        us0 = utxos.pop()\n+        inputs = [{ \"txid\" : us0[\"txid\"], \"vout\" : us0[\"vout\"]}]\n+        outputs = {self.nodes[0].getnewaddress() : 0.0001}\n+        tx = self.nodes[0].createrawtransaction(inputs, outputs)\n+        self.nodes[0].settxfee(relayfee) # specifically fund this tx with a fee < mempoolminfee, >= than minrelaytxfee\n+        txF = self.nodes[0].fundrawtransaction(tx)\n+        self.nodes[0].settxfee(0) # return to automatic fee selection\n+        tx_hex = self.nodes[0].signrawtransaction(txF['hex'])['hex']\n+        tx_id = self.nodes[0].decoderawtransaction(tx_hex)[\"txid\"]\n+        assert_raises_rpc_error(-26, \"66: mempool min fee not met\", self.nodes[0].sendrawtransaction, tx_hex)\n+        assert(tx_id not in self.nodes[0].getrawmempool())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166887791",
      "id" : 166887791,
      "original_commit_id" : "16d05540f61ebfff0fe0ab3f9d0b723b058bfe89",
      "original_position" : 15,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 95018953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356",
      "updated_at" : "2018-02-08T16:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166887791",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166982005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166982005"
         }
      },
      "author_association" : "NONE",
      "body" : "Fair enough, removed that and generally simplified the test.\r\n\r\nFyi I was following the example set in: https://github.com/bitcoin/bitcoin/blob/master/test/functional/mining_prioritisetransaction.py#L124",
      "commit_id" : "bb00c95c16f50c5dfab1aa8fbb6c873318a6acc8",
      "created_at" : "2018-02-08T16:03:54Z",
      "diff_hunk" : "@@ -50,5 +50,18 @@ def run_test(self):\n         assert_equal(self.nodes[0].getmempoolinfo()['minrelaytxfee'], Decimal('0.00001000'))\n         assert_greater_than(self.nodes[0].getmempoolinfo()['mempoolminfee'], Decimal('0.00001000'))\n \n+        self.log.info('Create a mempool tx that will not pass mempoolminfee')\n+        us0 = utxos.pop()\n+        inputs = [{ \"txid\" : us0[\"txid\"], \"vout\" : us0[\"vout\"]}]\n+        outputs = {self.nodes[0].getnewaddress() : 0.0001}\n+        tx = self.nodes[0].createrawtransaction(inputs, outputs)\n+        self.nodes[0].settxfee(relayfee) # specifically fund this tx with a fee < mempoolminfee, >= than minrelaytxfee\n+        txF = self.nodes[0].fundrawtransaction(tx)\n+        self.nodes[0].settxfee(0) # return to automatic fee selection\n+        tx_hex = self.nodes[0].signrawtransaction(txF['hex'])['hex']\n+        tx_id = self.nodes[0].decoderawtransaction(tx_hex)[\"txid\"]\n+        assert_raises_rpc_error(-26, \"66: mempool min fee not met\", self.nodes[0].sendrawtransaction, tx_hex)\n+        assert(tx_id not in self.nodes[0].getrawmempool())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12356#discussion_r166982005",
      "id" : 166982005,
      "in_reply_to_id" : 166887791,
      "original_commit_id" : "16d05540f61ebfff0fe0ab3f9d0b723b058bfe89",
      "original_position" : 15,
      "path" : "test/functional/mempool_limit.py",
      "position" : null,
      "pull_request_review_id" : 95130268,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12356",
      "updated_at" : "2018-02-08T16:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/166982005",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   }
]
