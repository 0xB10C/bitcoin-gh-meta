[
   {
      "author_association" : "NONE",
      "body" : "Again I'm only considering the edge cases after clicking \"create pull request\"..  What if the script contains a checksig with an uncompressed pubkey?\r\nObviously not ready.",
      "created_at" : "2018-02-01T01:21:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362126899",
      "id" : 362126899,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-01T01:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362126899",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fivepiece feel free to add [WIP] to the title of your PR if its work in progress :) It's usually fine to open up a PR before its completely ready because other contributors might like to give feedback on the approach or high level concept ACK/NACKs regardless. Thanks for helping out!",
      "created_at" : "2018-02-01T01:30:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362128524",
      "id" : 362128524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-01T01:30:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362128524",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Cheers, title changed\r\n(and now changed back :) )",
      "created_at" : "2018-02-01T01:34:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362129314",
      "id" : 362129314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-03T17:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362129314",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ideas welcome, returning a p2wsh for a p2pk or multisig with an uncompressed pubkey can result in fund loss, then again `decodescript` already returns p2sh addresses even for complete garbage.\r\nWhat should this change to `decodescript` take into account when deciding whether to post a p2wsh address to the user?",
      "created_at" : "2018-02-01T20:24:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362390742",
      "id" : 362390742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-01T20:24:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362390742",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK\r\n\r\nI think returning garbage is fine. It can be something unprovably unspendable even, and I don't think it's the job of this tool to check. \r\n\r\nWonder if it's worth it to have it also return a p2sh-p2wsh version, in other words interpreting the script as a witnessscript, if applicable?",
      "created_at" : "2018-02-01T22:14:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362420032",
      "id" : 362420032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-01T22:14:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362420032",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Agreed.  Keeping the simple check that this is not a bare witness program seems to be in line with the check above it not letting p2sh be re-encoded into p2sh.\r\nThis commit adds p2sh-p2wsh as well. ",
      "created_at" : "2018-02-01T23:10:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-362432972",
      "id" : 362432972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-01T23:10:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/362432972",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag wouldn't moving this to `ScriptPubKeyToUniv` cause script translation to all these types of addresses to fire on `decoderawtransaction` as well?\r\nSorry if I misunderstood your comment.\r\n\r\nI will be looking into adding tests as well.",
      "created_at" : "2018-02-08T14:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-364131011",
      "id" : 364131011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-08T14:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364131011",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've made some changes to this:\r\n\r\n1. Segwit stuff is handled in a generic way using `GetScriptForWitness()`.  This allows to return a more appropriate p2wpkh for p2pkh and p2pk scriptpubkeys, and (currently) p2wsh for all the rest.\r\n2. The data returned for the segwit scripts is its own univalue object (@promag suggestion), so it includes more useful info like the segwit scriptpubkey and type, along with the bech32 address.\r\n\r\nVarious examples of the output can be seen here :\r\nhttps://gist.github.com/fivepiece/e25b0fcdf8303fdbfd56363ae50dec15\r\n\r\nCaveats :\r\n\r\n1. For the segwit scriptpubkeys, we always have `\"reqSigs\": 1`.\r\n2. It's still possible to get a segwit program address for scripts using checksigs with uncompressed pubkeys.  This is because `GetScriptForWitness()` doesn't check `vSolutions` for presense of such pubkeys.  It's probably be possible to change GetScriptForWitness to check for that when bare pubkeys are invloved in the script, but out of scope for this PR.",
      "created_at" : "2018-02-09T19:31:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-364537391",
      "id" : 364537391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-09T19:31:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364537391",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is pretty much a complete rewrite taking into account @sipa's suggestion (on irc) to use the same logic from `validateaddress` in here.\r\n\r\n1. Uncompressed pubkeys are handled correctly - meaning standard scripts containing them will not be encoded in segwit scriptpubkeys.\r\n2. Added a few tests on top of the existing `rpc_decodescript.py`.  I couldn't find a way to easily test that segwit output is **not** returned for standard scripts with uncompressed pubkeys.  Suggestions on how to do that are welcome.\r\n3. Updated https://gist.github.com/fivepiece/e25b0fcdf8303fdbfd56363ae50dec15 with examples showing segwit output is disabled for uncompressed pubkey scripts.\r\n\r\n~(please restart the travis job if possible, it hasn't failed, just cancelled before it began)~ Done, thanks!",
      "created_at" : "2018-02-16T14:39:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-366252840",
      "id" : 366252840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-16T14:43:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366252840",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "kicked travis.\r\n\r\n> I couldn't find a way to easily test that segwit output is not returned for standard scripts with uncompressed pubkeys.\r\n\r\nhm? Your gist has examples that you could use.\r\n",
      "created_at" : "2018-02-16T14:44:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-366254202",
      "id" : 366254202,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-16T14:44:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366254202",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Specifically, I don't know how to assert that a value (say `rpc_result['segwit']`) does not exist in the returned univalue.",
      "created_at" : "2018-02-16T14:48:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-366255195",
      "id" : 366255195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-16T14:48:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366255195",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "in python `'segwit' not in rpc_result` ?",
      "created_at" : "2018-02-16T14:51:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-366256014",
      "id" : 366256014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-16T14:51:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366256014",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, I was trying to bend `assert_array_result` to do the check but your way works.",
      "created_at" : "2018-02-16T14:54:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12321#issuecomment-366257069",
      "id" : 366257069,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12321",
      "updated_at" : "2018-02-16T14:54:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/366257069",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5624963?v=4",
         "events_url" : "https://api.github.com/users/fivepiece/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fivepiece/followers",
         "following_url" : "https://api.github.com/users/fivepiece/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fivepiece/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fivepiece",
         "id" : 5624963,
         "login" : "fivepiece",
         "organizations_url" : "https://api.github.com/users/fivepiece/orgs",
         "received_events_url" : "https://api.github.com/users/fivepiece/received_events",
         "repos_url" : "https://api.github.com/users/fivepiece/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fivepiece/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fivepiece/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fivepiece"
      }
   }
]
