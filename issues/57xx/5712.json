{
   "assignee" : null,
   "body" : "There are a few issues referencing regtest mining speed (eg #5405, #4793), but I thought this observation made more sense as a separate issue:\r\n\r\nGetNextWorkRequired has an overflow bug that affects the regtest difficulty calculation.  The way the arithmetic works in that function is to first multiply the prior difficulty by nActualTimespan and then divide by TargetTimespan.  (TargetTimespan is 14 * 24* 60 * 60 = 1,209,600; nActualTimespan is bounded to be within a factor of 4 of TargetTimespan.)\r\n\r\nSince the regtest initial difficulty is so large, on the first retarget we end up overflowing on the multiply, and so the difficulty increases dramatically after the division, regardless of the timestamps on the regtest blocks.\r\n\r\nI don't believe this can affect mainnet or testnet, because the initial difficulties are small enough that no overflow can occur.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5712/comments",
   "created_at" : "2015-01-26T16:06:26Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5712/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/5712",
   "id" : 55500258,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5712/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 5712,
   "state" : "open",
   "title" : "Regtest difficulty calculation error",
   "updated_at" : "2015-01-26T16:06:26Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5712",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
      "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sdaftuar/followers",
      "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sdaftuar",
      "id" : 7463573,
      "login" : "sdaftuar",
      "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
      "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
      "repos_url" : "https://api.github.com/users/sdaftuar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sdaftuar"
   }
}
