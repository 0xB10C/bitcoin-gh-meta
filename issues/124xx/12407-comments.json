[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm: this changeset is failing tests that initially transmit a block with unexpected witness data (which gets rejected) and then retransmit without witness data for expected acceptance, but we get hung up on an existing `mapBlockIndex` entry that's been marked invalid.\r\n\r\nIs it worth special-casing out `\"unexpected-witness\"` rejections from the `InvalidateBlock` call? Seems a little ugly.\r\n\r\nIs the bookkeeping this PR wants to do even worth it? I guess we could just lump long invalid forks in with long headers-only forks, but that doesn't seem great either...",
      "created_at" : "2018-02-10T21:38:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364695748",
      "id" : 364695748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-02-10T21:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695748",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "You can only mark a block as invalid when fPossibleCorruption is not set in the validation status.",
      "created_at" : "2018-02-10T21:40:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364695970",
      "id" : 364695970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-02-10T21:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364695970",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah good point, thanks @sipa. That seems to have fixed it.",
      "created_at" : "2018-02-10T21:49:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-364697057",
      "id" : 364697057,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-02-10T21:49:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/364697057",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've rebased this changeset, removing the code that's now in #12431 as well as the semi-related log statement. I've also DRY'd up parts of validation which set `BLOCK_FAILED_VALID` on `nStatus` to use `InvalidBlockFound` instead.\r\n\r\nThis change should only be merged *after* #12431 since this will exercise the bug that PR fixes.",
      "created_at" : "2018-02-14T22:29:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-365766464",
      "id" : 365766464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-02-14T22:31:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365766464",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172657726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172657726"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[tests] Add utility for generating bad coinbase transactions\"\r\n\r\nI think:\r\n\r\n```python\r\n(r.index, tip for r, tip in zip(rpc_connections, tips))\r\n```\r\nwould be clearer than:\r\n\r\n```python\r\n(rpc_connections[i].index, tip for i, tip in enumerate(tips))\r\n```\r\n\r\nbut you should ignore this suggestion if you prefer enumerate.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T20:59:36Z",
      "diff_hunk" : "@@ -373,10 +373,13 @@ def sync_blocks(rpc_connections, *, wait=1, timeout=60):\n             if all(t[\"hash\"] == tips[0][\"hash\"] for t in tips):\n                 return\n             raise AssertionError(\"Block sync failed, mismatched block hashes:{}\".format(\n-                                 \"\".join(\"\\n  {!r}\".format(tip) for tip in tips)))\n+                \"\".join(\"\\n  Node {}: {!r}\".format(\n+                    rpc_connections[i].index, tip)\n+                        for i, tip in enumerate(tips))))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172657726",
      "id" : 172657726,
      "original_commit_id" : "e2be3284d6a042e029c830d35e58c7c117d39602",
      "original_position" : 7,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 101713470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172657726",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172658464"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172658464"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[tests] Add utility for generating bad coinbase transactions\"\r\n\r\nCould drop kwargs assignment with\r\n\r\n```python\r\nreturn create_coinbase(*args, **kwargs. txin=CTxIn(...))\r\n```",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T21:02:17Z",
      "diff_hunk" : "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172658464",
      "id" : 172658464,
      "original_commit_id" : "e2be3284d6a042e029c830d35e58c7c117d39602",
      "original_position" : 23,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 101713470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172658464",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172664641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172664641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Do the proper InvalidateBlock bookkeeping for DoSy blocks\"\r\n\r\nDuplicating the CorruptionPossible check here seems unnecessarily confusing and fragile to me, though perhaps there's an advantage I'm not seeing.\r\n\r\n",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T21:24:21Z",
      "diff_hunk" : "@@ -3410,10 +3419,21 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n \n         LOCK(cs_main);\n \n-        if (ret) {\n+        if (!ret) {\n+            // Mark the block as invalid if we recognize it in mapBlockIndex.\n+            // This doesn't happen within CheckBlock so we have to include a call\n+            // here. It *does* happen within AcceptBlock below.\n+            BlockMap::iterator it = mapBlockIndex.find(pblock->GetHash());\n+\n+            // Duplicate call to CorruptionPossible() here just to be careful.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172664641",
      "id" : 172664641,
      "original_commit_id" : "6af17e40890651e5e5f5968a1a131c6a48ce998c",
      "original_position" : 88,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 101713470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172664641",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672014"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah yep, that's better.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T21:49:42Z",
      "diff_hunk" : "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672014",
      "id" : 172672014,
      "in_reply_to_id" : 172658464,
      "original_commit_id" : "e2be3284d6a042e029c830d35e58c7c117d39602",
      "original_position" : 23,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 101730305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672014",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree, will do.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T21:49:58Z",
      "diff_hunk" : "@@ -373,10 +373,13 @@ def sync_blocks(rpc_connections, *, wait=1, timeout=60):\n             if all(t[\"hash\"] == tips[0][\"hash\"] for t in tips):\n                 return\n             raise AssertionError(\"Block sync failed, mismatched block hashes:{}\".format(\n-                                 \"\".join(\"\\n  {!r}\".format(tip) for tip in tips)))\n+                \"\".join(\"\\n  Node {}: {!r}\".format(\n+                    rpc_connections[i].index, tip)\n+                        for i, tip in enumerate(tips))))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172672089",
      "id" : 172672089,
      "in_reply_to_id" : 172657726,
      "original_commit_id" : "e2be3284d6a042e029c830d35e58c7c117d39602",
      "original_position" : 7,
      "path" : "test/functional/test_framework/util.py",
      "position" : null,
      "pull_request_review_id" : 101730305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172672089",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172676965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172676965"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree in hindsight that this was overly paranoid. Will remove.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-06T22:07:49Z",
      "diff_hunk" : "@@ -3410,10 +3419,21 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n \n         LOCK(cs_main);\n \n-        if (ret) {\n+        if (!ret) {\n+            // Mark the block as invalid if we recognize it in mapBlockIndex.\n+            // This doesn't happen within CheckBlock so we have to include a call\n+            // here. It *does* happen within AcceptBlock below.\n+            BlockMap::iterator it = mapBlockIndex.find(pblock->GetHash());\n+\n+            // Duplicate call to CorruptionPossible() here just to be careful.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172676965",
      "id" : 172676965,
      "in_reply_to_id" : 172664641,
      "original_commit_id" : "6af17e40890651e5e5f5968a1a131c6a48ce998c",
      "original_position" : 88,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 101730305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172676965",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172916549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172916549"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, Python 3.4 doesn't support this syntax (which is what we run on Travis). Will have to revert this.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-07T17:13:58Z",
      "diff_hunk" : "@@ -110,6 +112,16 @@ def create_transaction(prevtx, n, sig, value, scriptPubKey=CScript()):\n     tx.calc_sha256()\n     return tx\n \n+\n+def create_coinbase_with_bad_txin(*args, **kwargs):\n+    \"\"\"Return a coinbase CTransaction with an invalid txin.\"\"\"\n+    kwargs['txin'] = CTxIn(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172916549",
      "id" : 172916549,
      "in_reply_to_id" : 172658464,
      "original_commit_id" : "e2be3284d6a042e029c830d35e58c7c117d39602",
      "original_position" : 23,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 102017134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172916549",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172942665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172942665"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This now happens in the `InvalidBlockFound` call above.",
      "commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "created_at" : "2018-03-07T18:38:24Z",
      "diff_hunk" : "@@ -2727,7 +2741,6 @@ bool CChainState::InvalidateBlock(CValidationState& state, const CChainParams& c\n         it++;\n     }\n \n-    InvalidChainFound(pindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#discussion_r172942665",
      "id" : 172942665,
      "original_commit_id" : "bdfe29e0431e779a91e5720a369faee4668c066e",
      "original_position" : 79,
      "path" : "src/validation.cpp",
      "position" : 79,
      "pull_request_review_id" : 102047409,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12407",
      "updated_at" : "2018-03-07T18:38:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172942665",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase to fix travis (sorry)",
      "created_at" : "2018-03-08T15:22:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-371519441",
      "id" : 371519441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-03-08T15:22:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371519441",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased.",
      "created_at" : "2018-03-08T15:39:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-371524776",
      "id" : 371524776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-03-08T15:39:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371524776",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Slight re-utACK a12ce0dde462911bb702070d31ed28ba32353a05. Again someone more knowledgeable than me should review safety of adding new `InvalidBlockFound` calls in `ProcessNewBlock`,  `AcceptBlock`, and `InvalidateBlock`.\r\n\r\nChanges since last review were rebase, python cleanups, adding CorruptionPossible log print, and some suggestions from the last review.\r\n\r\nYou may want to update PR description since it will become part of git history if this is merged.",
      "created_at" : "2018-03-12T22:09:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12407#issuecomment-372479549",
      "id" : 372479549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12407",
      "updated_at" : "2018-03-12T22:09:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/372479549",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
