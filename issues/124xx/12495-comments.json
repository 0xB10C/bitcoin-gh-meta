[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r169968749"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169968749"
         }
      },
      "author_association" : "OWNER",
      "body" : "Add `static`?",
      "commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "created_at" : "2018-02-22T14:22:39Z",
      "diff_hunk" : "@@ -71,14 +71,41 @@ class CBitcoinLevelDBLogger : public leveldb::Logger {\n     }\n };\n \n+constexpr int PermissibleMaxOpenFiles() {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r169968749",
      "id" : 169968749,
      "original_commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "original_position" : 4,
      "path" : "src/dbwrapper.cpp",
      "position" : 4,
      "pull_request_review_id" : 98580714,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495",
      "updated_at" : "2018-02-22T14:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169968749",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r169970767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169970767"
         }
      },
      "author_association" : "OWNER",
      "body" : "I don't think this does what you expect it to. As I understand it, confirmed by the [gcc page](https://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html) about it, `_POSIX_C_SOURCE` is supposed to be defined explicitly at the top of the compilation unit to request certain POSIX C library features. It is not defined by the compiler. So it can't be used to detect whether the platform compiled to is POSIX.\r\n\r\nIn other place, we've just used `#if[n]def WIN32` as WIN32 is the only non-POSIX platform supported in this project.",
      "commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "created_at" : "2018-02-22T14:27:17Z",
      "diff_hunk" : "@@ -71,14 +71,41 @@ class CBitcoinLevelDBLogger : public leveldb::Logger {\n     }\n };\n \n+constexpr int PermissibleMaxOpenFiles() {\n+#ifdef _POSIX_C_SOURCE",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r169970767",
      "id" : 169970767,
      "original_commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "original_position" : 5,
      "path" : "src/dbwrapper.cpp",
      "position" : 5,
      "pull_request_review_id" : 98580714,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495",
      "updated_at" : "2018-02-22T14:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/169970767",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I measured the impact of this change, you can see a graph here: https://monad.io/max_open_files.png\r\n\r\nMethod for creating this graph:\r\n * Ran `bitcoind -reindex-chainstate` on a full node that had already been synced on mainnet\r\n * Instance is a GCP n1-standard-1 host which has one vCPU pinned to host CPU, 4 GB of RAM, and very slow virtualized disks",
      "created_at" : "2018-02-22T14:41:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12495#issuecomment-367701278",
      "id" : 367701278,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12495",
      "updated_at" : "2018-02-22T14:41:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367701278",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "> I measured the impact of this change, you can see a graph here: https://monad.io/max_open_files.png\r\n\r\nNice!",
      "created_at" : "2018-02-22T14:51:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12495#issuecomment-367704702",
      "id" : 367704702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12495",
      "updated_at" : "2018-02-22T14:51:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/367704702",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r170069914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170069914"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You're absolutely right, I will fix this.",
      "commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "created_at" : "2018-02-22T19:37:16Z",
      "diff_hunk" : "@@ -71,14 +71,41 @@ class CBitcoinLevelDBLogger : public leveldb::Logger {\n     }\n };\n \n+constexpr int PermissibleMaxOpenFiles() {\n+#ifdef _POSIX_C_SOURCE",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12495#discussion_r170069914",
      "id" : 170069914,
      "in_reply_to_id" : 169970767,
      "original_commit_id" : "c1b39470cdba75f3359b12e5a47eb5af0de07615",
      "original_position" : 5,
      "path" : "src/dbwrapper.cpp",
      "position" : 5,
      "pull_request_review_id" : 98699976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12495",
      "updated_at" : "2018-02-22T19:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/170069914",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/2734?v=4",
         "events_url" : "https://api.github.com/users/eklitzke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/eklitzke/followers",
         "following_url" : "https://api.github.com/users/eklitzke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/eklitzke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/eklitzke",
         "id" : 2734,
         "login" : "eklitzke",
         "organizations_url" : "https://api.github.com/users/eklitzke/orgs",
         "received_events_url" : "https://api.github.com/users/eklitzke/received_events",
         "repos_url" : "https://api.github.com/users/eklitzke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/eklitzke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/eklitzke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/eklitzke"
      }
   }
]
