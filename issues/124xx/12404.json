{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Based on @luke-jr's #11658.\r\n\r\nPruning forces a chainstate flush, which can defeat the dbcache and harm performance significantly.\r\n\r\nDuring IBD we now prune based on the worst case size of the remaining blocks, but no further than\r\nthe minimum prune size of 550 MB.\r\n\r\nUsing `MAX_BLOCK_SERIALIZED_SIZE` is complete overkill on testnet and usually too high on mainnet. It doesn't take into account the SegWit activation block either. This causes the node to be further pruned than strictly needed after IBD. It also makes it more difficult to test. One improvement could be to use a moving average actual block size or a hard coded educated guess. However there's something to be said for keeping this simple.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12404/comments",
   "created_at" : "2018-02-10T13:50:32Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12404/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/12404",
   "id" : 296102314,
   "labels" : [
      {
         "color" : "6060aa",
         "default" : false,
         "id" : 118379652,
         "name" : "Validation",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12404/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 12404,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/12404.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12404",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/12404.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12404"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Prune more aggressively during IBD",
   "updated_at" : "2018-02-10T15:03:47Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12404",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
