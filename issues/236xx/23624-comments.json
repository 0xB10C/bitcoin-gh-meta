[
   {
      "author_association" : "MEMBER",
      "body" : "Have you seen #7753?",
      "created_at" : "2021-11-29T09:46:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23624#issuecomment-981461451",
      "id" : 981461451,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23624",
      "node_id" : "IC_kwDOABII5846f-nL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981461451/reactions"
      },
      "updated_at" : "2021-11-29T09:46:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981461451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "For now, a workaround I found is to patch `CZMQNotificationInterface::BlockDisconnected` before building Bitcoin Core and comment out the loop that fires `NotifyTransaction()` like so:\r\n\r\n```\r\nvoid CZMQNotificationInterface::BlockDisconnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexDisconnected)\r\n{\r\n/* ----- this part is deleted - causes Core to *not* publish confirmed transactions\r\n    for (const CTransactionRef& ptx : pblock->vtx) {\r\n        const CTransaction& tx = *ptx;\r\n        TryForEachAndRemoveFailed(notifiers, [&tx](CZMQAbstractNotifier* notifier) {\r\n            return notifier->NotifyTransaction(tx);\r\n        });\r\n    }\r\n--------- */\r\n    // Next we notify BlockDisconnect listeners for *all* blocks\r\n    TryForEachAndRemoveFailed(notifiers, [pindexDisconnected](CZMQAbstractNotifier* notifier) {\r\n        return notifier->NotifyBlockDisconnect(pindexDisconnected);\r\n    });\r\n}\r\n```\r\n\r\nFor reading only confirmed transactions (and throwing away the unconfirmed ones from the mempool), I believe a similar patch can be made to `CZMQNotificationInterface::BlockDisconnected` or `CZMQNotificationInterface::TransactionAddedToMempool`, but I have not tested this. But the procedure is similar.\r\n\r\nOf course, I know that such a modification cannot be merged, I'm just leaving this here for anyone else who finds themselves in a similar situation in the future.",
      "created_at" : "2021-11-29T10:54:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23624#issuecomment-981521333",
      "id" : 981521333,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23624",
      "node_id" : "IC_kwDOABII5846gNO1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981521333/reactions"
      },
      "updated_at" : "2021-11-29T10:54:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981521333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42585895?v=4",
         "events_url" : "https://api.github.com/users/ZenulAbidin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ZenulAbidin/followers",
         "following_url" : "https://api.github.com/users/ZenulAbidin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ZenulAbidin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ZenulAbidin",
         "id" : 42585895,
         "login" : "ZenulAbidin",
         "node_id" : "MDQ6VXNlcjQyNTg1ODk1",
         "organizations_url" : "https://api.github.com/users/ZenulAbidin/orgs",
         "received_events_url" : "https://api.github.com/users/ZenulAbidin/received_events",
         "repos_url" : "https://api.github.com/users/ZenulAbidin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ZenulAbidin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ZenulAbidin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ZenulAbidin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I think having notifications to monitor the mempool makes sense, there has been interest in this in the past, I tried to do this at some point but lost interest.",
      "created_at" : "2021-11-29T11:27:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23624#issuecomment-981546739",
      "id" : 981546739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23624",
      "node_id" : "IC_kwDOABII5846gTbz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981546739/reactions"
      },
      "updated_at" : "2021-11-29T11:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981546739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The mempool only contains unconfirmed transactions and I don't see that changing, therefore is the addition of the word \"raw\" to the flag  necessary?",
      "created_at" : "2021-11-29T14:57:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23624#issuecomment-981711879",
      "id" : 981711879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23624",
      "node_id" : "IC_kwDOABII5846g7wH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981711879/reactions"
      },
      "updated_at" : "2021-11-29T14:57:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981711879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3079466?v=4",
         "events_url" : "https://api.github.com/users/drewx2/events{/privacy}",
         "followers_url" : "https://api.github.com/users/drewx2/followers",
         "following_url" : "https://api.github.com/users/drewx2/following{/other_user}",
         "gists_url" : "https://api.github.com/users/drewx2/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/drewx2",
         "id" : 3079466,
         "login" : "drewx2",
         "node_id" : "MDQ6VXNlcjMwNzk0NjY=",
         "organizations_url" : "https://api.github.com/users/drewx2/orgs",
         "received_events_url" : "https://api.github.com/users/drewx2/received_events",
         "repos_url" : "https://api.github.com/users/drewx2/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/drewx2/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/drewx2/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/drewx2"
      }
   }
]
