[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20788 (net: add RAII socket and use it instead of bare SOCKET by vasild)\n* #20758 (net-processing refactoring -- lose globals, move implementation details from .h to .cpp by ajtowns)\n* #20729 (p2p: standardize on outbound-{full, block}-relay connection type naming by jonatack)\n* #20721 (Net: Move ping data to net_processing by jnewbery)\n* #19884 (p2p: No delay in adding fixed seeds if -dnsseed=0 and peers.dat is empty by dhruv)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-01-27T01:24:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#issuecomment-767943601",
      "id" : 767943601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2Nzk0MzYwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T01:24:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/767943601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I am still working on figuring out why `test/functional/wallet_groups.py` is failing with an off-by-one error only on some platforms. In the meantime, ready for initial review.",
      "created_at" : "2021-01-27T06:02:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#issuecomment-768054110",
      "id" : 768054110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODA1NDExMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T06:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768054110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565054974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565054974"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in commit bbc01cf8b2965f716e899f413d36e2beb48c1f06: what is this?",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T06:21:29Z",
      "diff_hunk" : "@@ -70,6 +70,7 @@ def run_test(self):\n             # Tell scheduler to call MaybeResendWalletTxn now.\n             node.mockscheduler(1)\n         # Give some time for trickle to occur\n+        time.sleep(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565054974",
      "id" : 565054974,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA1NDk3NA==",
      "original_commit_id" : "bbc01cf8b2965f716e899f413d36e2beb48c1f06",
      "original_line" : 73,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : null,
      "pull_request_review_id" : 577015045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565054974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565060262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565060262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "you dropped the `-`",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T06:36:07Z",
      "diff_hunk" : "@@ -2917,20 +2917,22 @@ bool CConnman::ForNode(NodeId id, std::function<bool(CNode* pnode)> func)\n     return found != nullptr && NodeFullyConnected(found) && func(found);\n }\n \n-int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds CConnman::PoissonNextSendInbound(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    if (m_next_send_inv_to_incoming < now) {\n+    if (m_next_send_inv_to_incoming.load() < now) {\n         // If this function were called from multiple threads simultaneously\n         // it would possible that both update the next send variable, and return a different result to their caller.\n         // This is not possible in practice as only the net processing thread invokes this function.\n-        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval_seconds);\n+        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval);\n     }\n     return m_next_send_inv_to_incoming;\n }\n \n-int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds PoissonNextSend(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    double unscaled = log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */);\n+    double scaled = unscaled * count_microseconds(average_interval);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565060262",
      "id" : 565060262,
      "line" : 2934,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA2MDI2Mg==",
      "original_commit_id" : "f4bc3c67795e0e9c4d170869a8000433f2bdc12d",
      "original_line" : 2934,
      "original_position" : 119,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 119,
      "pull_request_review_id" : 577015045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565060262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. This refactoring should only be changing the types at compile-time, not any values at run time.",
      "created_at" : "2021-01-27T06:38:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#issuecomment-768069372",
      "id" : 768069372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21015",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODA2OTM3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T06:38:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768069372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565069299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565069299"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This was originally in d7fad1690c27bf270774da6eebc4ef8b550caf09. However, i just ran the test without the line and it seems to not be needed. Removed.",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T06:59:21Z",
      "diff_hunk" : "@@ -70,6 +70,7 @@ def run_test(self):\n             # Tell scheduler to call MaybeResendWalletTxn now.\n             node.mockscheduler(1)\n         # Give some time for trickle to occur\n+        time.sleep(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565069299",
      "id" : 565069299,
      "in_reply_to_id" : 565054974,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA2OTI5OQ==",
      "original_commit_id" : "bbc01cf8b2965f716e899f413d36e2beb48c1f06",
      "original_line" : 73,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : null,
      "pull_request_review_id" : 577031791,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565069299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565071275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565071275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No need to keep an empty commit  d5a0f24807d5423469824efe8253c8e809b2044b",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T07:04:18Z",
      "diff_hunk" : "@@ -70,6 +70,7 @@ def run_test(self):\n             # Tell scheduler to call MaybeResendWalletTxn now.\n             node.mockscheduler(1)\n         # Give some time for trickle to occur\n+        time.sleep(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565071275",
      "id" : 565071275,
      "in_reply_to_id" : 565054974,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA3MTI3NQ==",
      "original_commit_id" : "bbc01cf8b2965f716e899f413d36e2beb48c1f06",
      "original_line" : 73,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : null,
      "pull_request_review_id" : 577034242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:11:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565071275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565074405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565074405"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the catch!",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T07:11:49Z",
      "diff_hunk" : "@@ -2917,20 +2917,22 @@ bool CConnman::ForNode(NodeId id, std::function<bool(CNode* pnode)> func)\n     return found != nullptr && NodeFullyConnected(found) && func(found);\n }\n \n-int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds CConnman::PoissonNextSendInbound(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    if (m_next_send_inv_to_incoming < now) {\n+    if (m_next_send_inv_to_incoming.load() < now) {\n         // If this function were called from multiple threads simultaneously\n         // it would possible that both update the next send variable, and return a different result to their caller.\n         // This is not possible in practice as only the net processing thread invokes this function.\n-        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval_seconds);\n+        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval);\n     }\n     return m_next_send_inv_to_incoming;\n }\n \n-int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds PoissonNextSend(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    double unscaled = log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */);\n+    double scaled = unscaled * count_microseconds(average_interval);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565074405",
      "id" : 565074405,
      "in_reply_to_id" : 565060262,
      "line" : 2934,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA3NDQwNQ==",
      "original_commit_id" : "f4bc3c67795e0e9c4d170869a8000433f2bdc12d",
      "original_line" : 2934,
      "original_position" : 119,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 119,
      "pull_request_review_id" : 577037984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565074405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565074784"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565074784"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Removed.",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T07:12:51Z",
      "diff_hunk" : "@@ -70,6 +70,7 @@ def run_test(self):\n             # Tell scheduler to call MaybeResendWalletTxn now.\n             node.mockscheduler(1)\n         # Give some time for trickle to occur\n+        time.sleep(1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565074784",
      "id" : 565074784,
      "in_reply_to_id" : 565054974,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTA3NDc4NA==",
      "original_commit_id" : "bbc01cf8b2965f716e899f413d36e2beb48c1f06",
      "original_line" : 73,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_resendwallettransactions.py",
      "position" : null,
      "pull_request_review_id" : 577038512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T07:12:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565074784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565135678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565135678"
         }
      },
      "author_association" : "MEMBER",
      "body" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35: Can use `0us`, like above, which is shorter",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:04:15Z",
      "diff_hunk" : "@@ -588,9 +588,9 @@ class CNode\n     /** When the last ping was sent, or 0 if no ping was ever sent */\n     std::atomic<std::chrono::microseconds> m_ping_start{0us};\n     // Last measured round-trip time.\n-    std::atomic<int64_t> nPingUsecTime{0};\n+    std::atomic<std::chrono::microseconds> m_ping_time{std::chrono::microseconds{0}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565135678",
      "id" : 565135678,
      "line" : 591,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEzNTY3OA==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 591,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 41,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565135678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565137023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565137023"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same commit: Can use `ping_time == 0us`, which is shorter",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:06:12Z",
      "diff_hunk" : "@@ -811,9 +813,11 @@ QString formatServicesStr(quint64 mask)\n         return QObject::tr(\"None\");\n }\n \n-QString formatPingTime(int64_t ping_usec)\n+QString formatPingTime(std::chrono::microseconds ping_time)\n {\n-    return (ping_usec == std::numeric_limits<int64_t>::max() || ping_usec == 0) ? QObject::tr(\"N/A\") : QString(QObject::tr(\"%1 ms\")).arg(QString::number((int)(ping_usec / 1000), 10));\n+    return (ping_time == std::chrono::microseconds::max() || ping_time.count() == 0) ?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565137023",
      "id" : 565137023,
      "line" : 818,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEzNzAyMw==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 818,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/qt/guiutil.cpp",
      "position" : 17,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565137023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565138476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565138476"
         }
      },
      "author_association" : "MEMBER",
      "body" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35: Why is this changed?",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:08:17Z",
      "diff_hunk" : "@@ -238,8 +240,8 @@ namespace GUIUtil\n     /** Format CNodeStats.nServices bitmask into a user-readable string */\n     QString formatServicesStr(quint64 mask);\n \n-    /** Format a CNodeStats.m_ping_usec into a user-readable string or display N/A, if 0 */\n-    QString formatPingTime(int64_t ping_usec);\n+    /* Format a CNodeStats.m_ping_time into a user-readable string or display N/A, if 0*/",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565138476",
      "id" : 565138476,
      "line" : 243,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEzODQ3Ng==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 243,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/qt/guiutil.h",
      "position" : 15,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565138476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565139181"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565139181"
         }
      },
      "author_association" : "MEMBER",
      "body" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35: Can use `time > 0us`, which is shorter",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:09:24Z",
      "diff_hunk" : "@@ -203,14 +203,14 @@ static RPCHelpMan getpeerinfo()\n         obj.pushKV(\"bytesrecv\", stats.nRecvBytes);\n         obj.pushKV(\"conntime\", stats.nTimeConnected);\n         obj.pushKV(\"timeoffset\", stats.nTimeOffset);\n-        if (stats.m_ping_usec > 0) {\n-            obj.pushKV(\"pingtime\", ((double)stats.m_ping_usec) / 1e6);\n+        if (stats.m_ping_time.count() > 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565139181",
      "id" : 565139181,
      "line" : 206,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEzOTE4MQ==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 206,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 6,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565139181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565139786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565139786"
         }
      },
      "author_association" : "MEMBER",
      "body" : "same",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:10:16Z",
      "diff_hunk" : "@@ -203,14 +203,14 @@ static RPCHelpMan getpeerinfo()\n         obj.pushKV(\"bytesrecv\", stats.nRecvBytes);\n         obj.pushKV(\"conntime\", stats.nTimeConnected);\n         obj.pushKV(\"timeoffset\", stats.nTimeOffset);\n-        if (stats.m_ping_usec > 0) {\n-            obj.pushKV(\"pingtime\", ((double)stats.m_ping_usec) / 1e6);\n+        if (stats.m_ping_time.count() > 0) {\n+            obj.pushKV(\"pingtime\", count_microseconds(stats.m_ping_time) * 0.000001);\n         }\n-        if (stats.m_min_ping_usec < std::numeric_limits<int64_t>::max()) {\n-            obj.pushKV(\"minping\", ((double)stats.m_min_ping_usec) / 1e6);\n+        if (stats.m_min_ping_time < std::chrono::microseconds::max()) {\n+            obj.pushKV(\"minping\", count_microseconds(stats.m_min_ping_time) * 0.000001);\n         }\n-        if (stats.m_ping_wait_usec > 0) {\n-            obj.pushKV(\"pingwait\", ((double)stats.m_ping_wait_usec) / 1e6);\n+        if (stats.m_ping_wait.count() > 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565139786",
      "id" : 565139786,
      "line" : 212,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTEzOTc4Ng==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 212,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565139786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565140500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565140500"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated style-nit: Could use named args, like in `src/test/net_tests.cpp`?",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:11:10Z",
      "diff_hunk" : "@@ -23,7 +23,7 @@ FUZZ_TARGET(node_eviction)\n         eviction_candidates.push_back({\n             fuzzed_data_provider.ConsumeIntegral<NodeId>(),\n             fuzzed_data_provider.ConsumeIntegral<int64_t>(),\n-            fuzzed_data_provider.ConsumeIntegral<int64_t>(),\n+            std::chrono::microseconds{fuzzed_data_provider.ConsumeIntegral<int64_t>()},\n             fuzzed_data_provider.ConsumeIntegral<int64_t>(),\n             fuzzed_data_provider.ConsumeIntegral<int64_t>(),\n             fuzzed_data_provider.ConsumeBool(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565140500",
      "id" : 565140500,
      "line" : 29,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE0MDUwMA==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 29,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/test/fuzz/node_eviction.cpp",
      "position" : 8,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565140500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565142431"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565142431"
         }
      },
      "author_association" : "MEMBER",
      "body" : "if you are changing whitespace, it would be good to do it right. One space too much here",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:13:45Z",
      "diff_hunk" : "@@ -899,10 +899,10 @@ BOOST_AUTO_TEST_CASE(node_eviction_test)\n             // Combination of all tests above.\n             BOOST_CHECK(!IsEvicted(\n                 number_of_nodes, [number_of_nodes](NodeEvictionCandidate& candidate) {\n-                    candidate.nKeyedNetGroup = number_of_nodes - candidate.id; // 4 protected\n-                    candidate.nMinPingUsecTime = candidate.id;                 // 8 protected\n-                    candidate.nLastTXTime = number_of_nodes - candidate.id;    // 4 protected\n-                    candidate.nLastBlockTime = number_of_nodes - candidate.id; // 4 protected\n+                    candidate.nKeyedNetGroup = number_of_nodes - candidate.id;            // 4 protected",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565142431",
      "id" : 565142431,
      "line" : 887,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE0MjQzMQ==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 902,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 48,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565142431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565142762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565142762"
         }
      },
      "author_association" : "MEMBER",
      "body" : "two spaces before `=`",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:14:09Z",
      "diff_hunk" : "@@ -610,9 +610,9 @@ void CNode::copyStats(CNodeStats &stats, const std::vector<bool> &m_asmap)\n     }\n \n     // Raw ping time is in microseconds, but show it to user as whole seconds (Bitcoin users should be well used to small numbers with many decimal places by now :)\n-    stats.m_ping_usec = nPingUsecTime;\n-    stats.m_min_ping_usec  = nMinPingUsecTime;\n-    stats.m_ping_wait_usec = count_microseconds(ping_wait);\n+    stats.m_ping_time = m_ping_time;\n+    stats.m_min_ping_time  = m_min_ping_time;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565142762",
      "id" : 565142762,
      "line" : 614,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE0Mjc2Mg==",
      "original_commit_id" : "4089bc6489255ab26a350bbadc06d1cc5cff6d35",
      "original_line" : 614,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565142762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565143996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565143996"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in commit aa30fdfcc4e8801c3abd74468f849f6124815e10: Can use `15min`, which is shorter",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:15:53Z",
      "diff_hunk" : "@@ -45,8 +45,8 @@ static constexpr std::chrono::seconds RELAY_TX_CACHE_TIME = std::chrono::minutes\n static constexpr std::chrono::seconds UNCONDITIONAL_RELAY_DELAY = std::chrono::minutes{2};\n /** Headers download timeout expressed in microseconds\n  *  Timeout = base + per_header * (expected number of headers) */\n-static constexpr int64_t HEADERS_DOWNLOAD_TIMEOUT_BASE = 15 * 60 * 1000000; // 15 minutes\n-static constexpr int64_t HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER = 1000; // 1ms/header\n+static constexpr auto HEADERS_DOWNLOAD_TIMEOUT_BASE = std::chrono::minutes{15};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565143996",
      "id" : 565143996,
      "line" : 48,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE0Mzk5Ng==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 48,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 13,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565143996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565145011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565145011"
         }
      },
      "author_association" : "MEMBER",
      "body" : "aa30fdfcc4e8801c3abd74468f849f6124815e10: `2s`",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:17:19Z",
      "diff_hunk" : "@@ -93,8 +93,8 @@ static constexpr std::chrono::microseconds GETDATA_TX_INTERVAL{std::chrono::seco\n static const unsigned int MAX_GETDATA_SZ = 1000;\n /** Number of blocks that can be requested at any given time from a single peer. */\n static const int MAX_BLOCKS_IN_TRANSIT_PER_PEER = 16;\n-/** Timeout in seconds during which a peer must stall block download progress before being disconnected. */\n-static const unsigned int BLOCK_STALLING_TIMEOUT = 2;\n+/** Time during which a peer must stall block download progress before being disconnected. */\n+static constexpr auto BLOCK_STALLING_TIMEOUT = std::chrono::seconds{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565145011",
      "id" : 565145011,
      "line" : 97,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE0NTAxMQ==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 97,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 25,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565145011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565156674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565156674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "aa30fdfcc4e8801c3abd74468f849f6124815e10: `0us` on all three",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:33:38Z",
      "diff_hunk" : "@@ -572,9 +572,9 @@ struct CNodeState {\n         pindexBestHeaderSent = nullptr;\n         nUnconnectingHeaders = 0;\n         fSyncStarted = false;\n-        nHeadersSyncTimeout = 0;\n-        nStallingSince = 0;\n-        nDownloadingSince = 0;\n+        m_headers_sync_timeout = std::chrono::microseconds{0};\n+        m_stalling_since = std::chrono::microseconds{0};\n+        m_downloading_since = std::chrono::microseconds{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565156674",
      "id" : 565156674,
      "line" : 577,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE1NjY3NA==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 577,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 111,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565156674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565157442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565157442"
         }
      },
      "author_association" : "MEMBER",
      "body" : "same",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:34:49Z",
      "diff_hunk" : "@@ -624,11 +624,11 @@ static bool MarkBlockAsReceived(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(cs\n         }\n         if (state->vBlocksInFlight.begin() == itInFlight->second.second) {\n             // First block on the queue was received, update the start download time for the next one\n-            state->nDownloadingSince = std::max(state->nDownloadingSince, count_microseconds(GetTime<std::chrono::microseconds>()));\n+            state->m_downloading_since = std::max(state->m_downloading_since, GetTime<std::chrono::microseconds>());\n         }\n         state->vBlocksInFlight.erase(itInFlight->second.second);\n         state->nBlocksInFlight--;\n-        state->nStallingSince = 0;\n+        state->m_stalling_since = std::chrono::microseconds{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565157442",
      "id" : 565157442,
      "line" : 631,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE1NzQ0Mg==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 631,
      "original_position" : 75,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 125,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565157442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565159349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565159349"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why `((foo))` instead of `(foo)`?",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:37:35Z",
      "diff_hunk" : "@@ -4383,7 +4383,7 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n             // Only actively request headers from a single peer, unless we're close to today.\n             if ((nSyncStarted == 0 && fFetch) || pindexBestHeader->GetBlockTime() > GetAdjustedTime() - 24 * 60 * 60) {\n                 state.fSyncStarted = true;\n-                state.nHeadersSyncTimeout = count_microseconds(current_time) + HEADERS_DOWNLOAD_TIMEOUT_BASE + HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER * (GetAdjustedTime() - pindexBestHeader->GetBlockTime())/(consensusParams.nPowTargetSpacing);\n+                state.m_headers_sync_timeout = current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE + HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER * ((GetAdjustedTime() - pindexBestHeader->GetBlockTime())/(consensusParams.nPowTargetSpacing));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565159349",
      "id" : 565159349,
      "line" : 4386,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE1OTM0OQ==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 4386,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 154,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565159349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565161588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565161588"
         }
      },
      "author_association" : "MEMBER",
      "body" : "0us",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:40:47Z",
      "diff_hunk" : "@@ -4738,13 +4738,13 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                         // this peer (eventually).\n                         state.fSyncStarted = false;\n                         nSyncStarted--;\n-                        state.nHeadersSyncTimeout = 0;\n+                        state.m_headers_sync_timeout = std::chrono::microseconds{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565161588",
      "id" : 565161588,
      "line" : 4741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2MTU4OA==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 4741,
      "original_position" : 141,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 241,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565161588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565161799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565161799"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`== 0us`",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:41:04Z",
      "diff_hunk" : "@@ -4768,8 +4768,8 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     pindex->nHeight, pto->GetId());\n             }\n             if (state.nBlocksInFlight == 0 && staller != -1) {\n-                if (State(staller)->nStallingSince == 0) {\n-                    State(staller)->nStallingSince = count_microseconds(current_time);\n+                if (State(staller)->m_stalling_since.count() == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565161799",
      "id" : 565161799,
      "line" : 4771,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2MTc5OQ==",
      "original_commit_id" : "aa30fdfcc4e8801c3abd74468f849f6124815e10",
      "original_line" : 4771,
      "original_position" : 158,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 258,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565161799",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565164331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565164331"
         }
      },
      "author_association" : "MEMBER",
      "body" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc: `> 1min`",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:44:38Z",
      "diff_hunk" : "@@ -1788,7 +1788,7 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n         // Note that we only do this if we started with an empty peers.dat,\n         // (in which case we will query DNS seeds immediately) *and* the DNS\n         // seeds have not returned any results.\n-        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {\n+        if (addrman.size() == 0 && (GetTime<std::chrono::microseconds>() - start > std::chrono::minutes{1})) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565164331",
      "id" : 565164331,
      "line" : 1791,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2NDMzMQ==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 1791,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 51,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565164331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565167722"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565167722"
         }
      },
      "author_association" : "MEMBER",
      "body" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc: Style nit: I'd say the minus goes conceptually before log1p: `-log1p(...)`. Putting it in the round-to-integer step seems confusing, because the negation is unrelated to rounding.",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:49:20Z",
      "diff_hunk" : "@@ -2917,20 +2917,22 @@ bool CConnman::ForNode(NodeId id, std::function<bool(CNode* pnode)> func)\n     return found != nullptr && NodeFullyConnected(found) && func(found);\n }\n \n-int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds CConnman::PoissonNextSendInbound(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    if (m_next_send_inv_to_incoming < now) {\n+    if (m_next_send_inv_to_incoming.load() < now) {\n         // If this function were called from multiple threads simultaneously\n         // it would possible that both update the next send variable, and return a different result to their caller.\n         // This is not possible in practice as only the net processing thread invokes this function.\n-        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval_seconds);\n+        m_next_send_inv_to_incoming = PoissonNextSend(now, average_interval);\n     }\n     return m_next_send_inv_to_incoming;\n }\n \n-int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n+std::chrono::microseconds PoissonNextSend(std::chrono::microseconds now, std::chrono::microseconds average_interval)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    double unscaled = log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565167722",
      "id" : 565167722,
      "line" : 2933,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2NzcyMg==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 2933,
      "original_position" : 87,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 118,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565167722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565167975"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565167975"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2min",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:49:43Z",
      "diff_hunk" : "@@ -47,10 +47,10 @@ static const bool DEFAULT_WHITELISTFORCERELAY = false;\n \n /** Time after which to disconnect, after waiting for a ping response (or inactivity). */\n static const int TIMEOUT_INTERVAL = 20 * 60;\n-/** Run the feeler connection loop once every 2 minutes or 120 seconds. **/\n-static const int FEELER_INTERVAL = 120;\n+/** Run the feeler connection loop once every 2 minutes. **/\n+static constexpr auto FEELER_INTERVAL = std::chrono::minutes{2};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565167975",
      "id" : 565167975,
      "line" : 51,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2Nzk3NQ==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 51,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 7,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565167975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565168106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565168106"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5min",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:49:51Z",
      "diff_hunk" : "@@ -47,10 +47,10 @@ static const bool DEFAULT_WHITELISTFORCERELAY = false;\n \n /** Time after which to disconnect, after waiting for a ping response (or inactivity). */\n static const int TIMEOUT_INTERVAL = 20 * 60;\n-/** Run the feeler connection loop once every 2 minutes or 120 seconds. **/\n-static const int FEELER_INTERVAL = 120;\n+/** Run the feeler connection loop once every 2 minutes. **/\n+static constexpr auto FEELER_INTERVAL = std::chrono::minutes{2};\n /** Run the extra block-relay-only connection loop once every 5 minutes. **/\n-static const int EXTRA_BLOCK_RELAY_ONLY_PEER_INTERVAL = 300;\n+static constexpr auto EXTRA_BLOCK_RELAY_ONLY_PEER_INTERVAL = std::chrono::minutes{5};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565168106",
      "id" : 565168106,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2ODEwNg==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 53,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 10,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565168106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565168337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565168337"
         }
      },
      "author_association" : "MEMBER",
      "body" : "0us",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:50:14Z",
      "diff_hunk" : "@@ -1219,7 +1219,7 @@ class CConnman\n      */\n     std::atomic_bool m_start_extra_block_relay_peers{false};\n \n-    std::atomic<int64_t> m_next_send_inv_to_incoming{0};\n+    std::atomic<std::chrono::microseconds> m_next_send_inv_to_incoming{std::chrono::microseconds{0}};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565168337",
      "id" : 565168337,
      "line" : 1222,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2ODMzNw==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 1222,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 62,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565168337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "24h",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:51:06Z",
      "diff_hunk" : "@@ -119,17 +119,17 @@ static const int MAX_UNCONNECTING_HEADERS = 10;\n /** Minimum blocks required to signal NODE_NETWORK_LIMITED */\n static const unsigned int NODE_NETWORK_LIMITED_MIN_BLOCKS = 288;\n /** Average delay between local address broadcasts */\n-static constexpr std::chrono::hours AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL{24};\n+static constexpr auto AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL = std::chrono::hours{24};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169020",
      "id" : 565169020,
      "line" : 122,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2OTAyMA==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 122,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 48,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169112"
         }
      },
      "author_association" : "MEMBER",
      "body" : "30s",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:51:13Z",
      "diff_hunk" : "@@ -119,17 +119,17 @@ static const int MAX_UNCONNECTING_HEADERS = 10;\n /** Minimum blocks required to signal NODE_NETWORK_LIMITED */\n static const unsigned int NODE_NETWORK_LIMITED_MIN_BLOCKS = 288;\n /** Average delay between local address broadcasts */\n-static constexpr std::chrono::hours AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL{24};\n+static constexpr auto AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL = std::chrono::hours{24};\n /** Average delay between peer address broadcasts */\n-static constexpr std::chrono::seconds AVG_ADDRESS_BROADCAST_INTERVAL{30};\n+static constexpr auto AVG_ADDRESS_BROADCAST_INTERVAL = std::chrono::seconds{30};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169112",
      "id" : 565169112,
      "line" : 124,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2OTExMg==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 124,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 51,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169184"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5s",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:51:20Z",
      "diff_hunk" : "@@ -119,17 +119,17 @@ static const int MAX_UNCONNECTING_HEADERS = 10;\n /** Minimum blocks required to signal NODE_NETWORK_LIMITED */\n static const unsigned int NODE_NETWORK_LIMITED_MIN_BLOCKS = 288;\n /** Average delay between local address broadcasts */\n-static constexpr std::chrono::hours AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL{24};\n+static constexpr auto AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL = std::chrono::hours{24};\n /** Average delay between peer address broadcasts */\n-static constexpr std::chrono::seconds AVG_ADDRESS_BROADCAST_INTERVAL{30};\n+static constexpr auto AVG_ADDRESS_BROADCAST_INTERVAL = std::chrono::seconds{30};\n /** Average delay between trickled inventory transmissions in seconds.\n  *  Blocks and peers with noban permission bypass this, outbound peers get half this delay. */\n-static const unsigned int INVENTORY_BROADCAST_INTERVAL = 5;\n+static constexpr auto INVENTORY_BROADCAST_INTERVAL = std::chrono::seconds{5};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169184",
      "id" : 565169184,
      "line" : 127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2OTE4NA==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 127,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 55,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169416"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169416"
         }
      },
      "author_association" : "MEMBER",
      "body" : "same for those two",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:51:43Z",
      "diff_hunk" : "@@ -138,9 +138,9 @@ static constexpr unsigned int INVENTORY_MAX_RECENT_RELAY = 3500;\n  *  peers, and random variations in the broadcast mechanism. */\n static_assert(INVENTORY_MAX_RECENT_RELAY >= INVENTORY_BROADCAST_PER_SECOND * UNCONDITIONAL_RELAY_DELAY / std::chrono::seconds{1}, \"INVENTORY_RELAY_MAX too low\");\n /** Average delay between feefilter broadcasts in seconds. */\n-static constexpr unsigned int AVG_FEEFILTER_BROADCAST_INTERVAL = 10 * 60;\n+static constexpr auto AVG_FEEFILTER_BROADCAST_INTERVAL = std::chrono::minutes{10};\n /** Maximum feefilter broadcast delay after significant change. */\n-static constexpr unsigned int MAX_FEEFILTER_CHANGE_DELAY = 5 * 60;\n+static constexpr auto MAX_FEEFILTER_CHANGE_DELAY = std::chrono::minutes{5};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565169416",
      "id" : 565169416,
      "line" : 143,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE2OTQxNg==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 143,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 73,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565169416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565173767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565173767"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Note to other reviewers: Division does not have any truncation warnings at compile time",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T09:57:54Z",
      "diff_hunk" : "@@ -4564,10 +4564,10 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                 if (pto->m_tx_relay->nNextInvSend < current_time) {\n                     fSendTrickle = true;\n                     if (pto->IsInboundConn()) {\n-                        pto->m_tx_relay->nNextInvSend = std::chrono::microseconds{m_connman.PoissonNextSendInbound(count_microseconds(current_time), INVENTORY_BROADCAST_INTERVAL)};\n+                        pto->m_tx_relay->nNextInvSend = m_connman.PoissonNextSendInbound(current_time, INVENTORY_BROADCAST_INTERVAL);\n                     } else {\n                         // Use half the delay for outbound peers, as there is less privacy concern for them.\n-                        pto->m_tx_relay->nNextInvSend = PoissonNextSend(current_time, std::chrono::seconds{INVENTORY_BROADCAST_INTERVAL >> 1});\n+                        pto->m_tx_relay->nNextInvSend = PoissonNextSend(current_time, INVENTORY_BROADCAST_INTERVAL / 2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565173767",
      "id" : 565173767,
      "line" : 4570,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE3Mzc2Nw==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 4570,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 167,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565173767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565183947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565183947"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you can simply assign this to `0`, as the goal is to send immediately",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T10:11:53Z",
      "diff_hunk" : "@@ -4822,24 +4822,24 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                 if (pto->m_tx_relay->lastSentFeeFilter == MAX_FILTER) {\n                     // Send the current filter if we sent MAX_FILTER previously\n                     // and made it out of IBD.\n-                    pto->m_tx_relay->nextSendTimeFeeFilter = count_microseconds(current_time) - 1;\n+                    pto->m_tx_relay->m_next_send_feefilter = current_time - std::chrono::microseconds{1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565183947",
      "id" : 565183947,
      "line" : 4825,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE4Mzk0Nw==",
      "original_commit_id" : "64f3fb1a966cfee47e6cfccdd5e9c9540bfebecc",
      "original_line" : 4825,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 268,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565183947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565186801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565186801"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in commit c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2: 15min",
      "commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "created_at" : "2021-01-27T10:15:59Z",
      "diff_hunk" : "@@ -40,9 +40,9 @@ static constexpr int64_t ORPHAN_TX_EXPIRE_TIME = 20 * 60;\n /** Minimum time between orphan transactions expire time checks in seconds */\n static constexpr int64_t ORPHAN_TX_EXPIRE_INTERVAL = 5 * 60;\n /** How long to cache transactions in mapRelay for normal relay */\n-static constexpr std::chrono::seconds RELAY_TX_CACHE_TIME = std::chrono::minutes{15};\n+static constexpr auto RELAY_TX_CACHE_TIME = std::chrono::minutes{15};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21015#discussion_r565186801",
      "id" : 565186801,
      "line" : 43,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTE4NjgwMQ==",
      "original_commit_id" : "c9a8cbc64eddd98d2183380148a3d9c79c1bd7d2",
      "original_line" : 43,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 577115443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21015",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565186801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
