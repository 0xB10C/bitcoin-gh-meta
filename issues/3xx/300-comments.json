[
   {
      "body" : "As devrandom pointed out, tor latency could be much greater than 5s.  Maybe add if (fProxy) timeout = 20s?",
      "created_at" : "2011-06-05T23:55:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1306428",
      "id" : 1306428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-05T23:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1306428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Maybe this can be done adaptively: start with a timeout=100ms, and each time N connection attempts have failed through time-out (and not enough connections are established), double the timeout.",
      "created_at" : "2011-06-06T09:09:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1308021",
      "id" : 1308021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-06T09:09:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1308021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I think making it a command line override option would be a better way of handling it. In general you want to avoid connecting to other nodes where your network path is that latent. That way people who have known-latent paths can manually bump the timeout but it works as expected for most users.",
      "created_at" : "2011-06-06T17:57:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1310748",
      "id" : 1310748,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-06T17:57:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48147?v=3",
         "events_url" : "https://api.github.com/users/jrmithdobbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrmithdobbs/followers",
         "following_url" : "https://api.github.com/users/jrmithdobbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrmithdobbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrmithdobbs",
         "id" : 48147,
         "login" : "jrmithdobbs",
         "organizations_url" : "https://api.github.com/users/jrmithdobbs/orgs",
         "received_events_url" : "https://api.github.com/users/jrmithdobbs/received_events",
         "repos_url" : "https://api.github.com/users/jrmithdobbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrmithdobbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrmithdobbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrmithdobbs"
      }
   },
   {
      "body" : "@jrmithdobbs: good suggestion - implemented.",
      "created_at" : "2011-06-06T18:59:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1311072",
      "id" : 1311072,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-06T18:59:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1311072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I'd prefer removing the nConnectTimeout global variable and just calling GetArg(\"-timeout\", 5000) in ConnectSocket.",
      "created_at" : "2011-06-07T18:29:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1319859",
      "id" : 1319859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-07T18:29:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1319859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "My name is phantomcircuit and I approve this patch.",
      "created_at" : "2011-06-08T16:32:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1327989",
      "id" : 1327989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-08T16:32:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1327989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/618289?v=3",
         "events_url" : "https://api.github.com/users/phantomcircuit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/phantomcircuit/followers",
         "following_url" : "https://api.github.com/users/phantomcircuit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/phantomcircuit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/phantomcircuit",
         "id" : 618289,
         "login" : "phantomcircuit",
         "organizations_url" : "https://api.github.com/users/phantomcircuit/orgs",
         "received_events_url" : "https://api.github.com/users/phantomcircuit/received_events",
         "repos_url" : "https://api.github.com/users/phantomcircuit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/phantomcircuit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/phantomcircuit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/phantomcircuit"
      }
   },
   {
      "body" : "@gavinandresen: I disagree - I don't like global variables, but doing parsing of command-line options all over the place is even worse.",
      "created_at" : "2011-06-08T21:22:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1329964",
      "id" : 1329964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-08T21:22:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "bleh, this is overkill.\r\n\r\nUse select with timeout -- as net.cpp already does -- and eliminate that polling loop.\r\n\r\nIn all of linux/osx/winsock, you issue a non-blocking connect(2), and then select(2) the socket for writing.\r\n",
      "created_at" : "2011-06-10T05:51:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1339951",
      "id" : 1339951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-10T05:51:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1339951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ACK final result.  Needs to be rebased though...\r\n",
      "created_at" : "2011-06-11T16:59:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1351925",
      "id" : 1351925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-11T16:59:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351925",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ACK -- looks OK, but I haven't had time to compile and test.",
      "created_at" : "2011-06-11T19:35:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1352596",
      "id" : 1352596,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-11T19:35:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Now using select() instead of looping. Tested on Linux and Windows.",
      "created_at" : "2011-06-11T22:44:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/300#issuecomment-1353183",
      "id" : 1353183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/300",
      "updated_at" : "2011-06-11T22:44:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
