[
   {
      "body" : "Client: v0.8.2-111-gd9ff1cd-beta\r\nOs; Ubuntu 12.04.2 LTS\r\nMachine: VirtualBox 64bit 2gb\r\n\r\nNo libs manually installed.",
      "created_at" : "2013-06-19T19:04:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19706453",
      "id" : 19706453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T19:08:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19706453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/868396?v=3",
         "events_url" : "https://api.github.com/users/richardassar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/richardassar/followers",
         "following_url" : "https://api.github.com/users/richardassar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/richardassar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/richardassar",
         "id" : 868396,
         "login" : "richardassar",
         "organizations_url" : "https://api.github.com/users/richardassar/orgs",
         "received_events_url" : "https://api.github.com/users/richardassar/received_events",
         "repos_url" : "https://api.github.com/users/richardassar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/richardassar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/richardassar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/richardassar"
      }
   },
   {
      "body" : "Confirmed on Ubuntu 13.04 x86_64, v0.8.2-123-gb153ee6-beta",
      "created_at" : "2013-06-19T19:09:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19706854",
      "id" : 19706854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T19:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19706854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "1) had a valid, unencrypted wallet\r\n2) ran 'encryptwallet' under HEAD\r\n3) restarted with HEAD, reproduced problem\r\n4) restarted with 0.8.2, yielded the following output\r\n\r\n```\r\n2013-06-19 19:29:57 init message: Loading wallet...\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n2013-06-19 19:29:57 Error reading wallet database: CPrivKey pubkey inconsistency\r\n[...continues...]\r\n2013-06-19 19:29:57 Error loading wallet.dat: Wallet corrupted\r\n wallet                  442ms\r\n2013-06-19 19:29:57 init message: Loading addresses...\r\n2013-06-19 19:29:57 Loaded 13808 addresses from peers.dat  30ms\r\n2013-06-19 19:29:57 Error: Error loading wallet.dat: Wallet corrupted\r\n```\r\n",
      "created_at" : "2013-06-19T19:31:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19708416",
      "id" : 19708416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T19:35:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19708416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Version 0.8.2 release appears to be OK.  Bisecting...\r\n",
      "created_at" : "2013-06-19T19:38:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19708889",
      "id" : 19708889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T19:38:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19708889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "git bisect points the finger at #1863 and commit 3869fb89b60091281b43a35921057ba3f43c18f0 ...\r\n```\r\n\r\n3869fb89b60091281b43a35921057ba3f43c18f0 is the first bad commit\r\ncommit 3869fb89b60091281b43a35921057ba3f43c18f0\r\nAuthor: Jeff Garzik <jgarzik@bitpay.com>\r\nDate:   Mon Jun 10 09:36:29 2013 -0400\r\n\r\n    Wallet: store key creation time. Calculate whole-wallet birthday.\r\n    \r\n    This also encapsulate wallet-read state information into CWalletScanState.\r\n\r\n:040000 040000 95eb86835b8a3d9801cd9eafb5e2311515a3c8cb f72f6d6008efc40a803182799c55955e272ffc61 M\tsrc\r\n```\r\n",
      "created_at" : "2013-06-19T20:05:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19710935",
      "id" : 19710935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T20:05:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19710935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik CWallet::AddCryptedKey overrode CKeyStore::AddCryptedKey; since #1863 it does no longer, so the newly encrypted keys never get written. The easy solution is adding the timestamp to CKeyStore::AddCryptedKey, but that is sorta ugly... (it's data the keystore shouldn't care about).",
      "created_at" : "2013-06-19T22:01:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19718237",
      "id" : 19718237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T22:01:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19718237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jgarzik Thinking a bit more, also about how CKeyMeta will get used for more than just birthdates (BIP32 in particular), how about this:\r\n* Key metadata is kept in a CWallet::mapKeyMetaData (std::map<CKeyId,CKeyMeta)\r\n* When generating a new key, time is put in that map, and new key is written\r\n* AddKey and AddCryptedKey do not take a creation time argument, but instead pull it from that map, if it exists there.\r\n\r\nThis will make it easier to store key metadata along with the key itself in a wallet format update (avoiding repeating the pubkeys 3 times - once for the key, once for the keypool, once for the metadata).",
      "created_at" : "2013-06-19T22:08:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/2779#issuecomment-19718628",
      "id" : 19718628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2779",
      "updated_at" : "2013-06-19T22:08:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/19718628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
