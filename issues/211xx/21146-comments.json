[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21055 ([Bundle 3/n] Prune remaining g_chainman usage in validation functions by dongcarl)\n* #20750 ([Bundle 2/n] Prune g_chainman usage in mempool-related validation functions by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-02-11T05:56:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#issuecomment-777219401",
      "id" : 777219401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21146",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NzIxOTQwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-19T05:15:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777219401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21146#discussion_r574866661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21146"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574866661"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "âï¸ this is the main change ð ",
      "commit_id" : "afe2959f092eed893175a7990d9aa1f0abf42a70",
      "created_at" : "2021-02-11T22:20:07Z",
      "diff_hunk" : "@@ -671,7 +691,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // we have all inputs cached now, so switch back to dummy (to protect\n     // against bugs where we pull more inputs from disk that miss being added\n     // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    m_viewmempool.SetBackend(m_dummy);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#discussion_r574866661",
      "id" : 574866661,
      "line" : 708,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDg2NjY2MQ==",
      "original_commit_id" : "14c94b30f1dba81ebb5b9af1b834db7d2a88f297",
      "original_line" : 708,
      "original_position" : 104,
      "original_start_line" : 674,
      "path" : "src/validation.cpp",
      "position" : 116,
      "pull_request_review_id" : 589036012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21146",
      "side" : "RIGHT",
      "start_line" : 694,
      "start_side" : "LEFT",
      "updated_at" : "2021-02-20T17:44:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574866661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do you think you can take the following diff in the doc followup commit ?\r\n\r\n```\r\ndiff --git a/src/rpc/rawtransaction.cpp b/src/rpc/rawtransaction.cpp\r\nindex ac4240447..f8f4a6d94 100644\r\n--- a/src/rpc/rawtransaction.cpp\r\n+++ b/src/rpc/rawtransaction.cpp\r\n@@ -896,7 +896,7 @@ static RPCHelpMan testmempoolaccept()\r\n                         {\r\n                             {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\r\n                             {RPCResult::Type::STR_HEX, \"wtxid\", \"The transaction witness hash in hex\"},\r\n-                            {RPCResult::Type::BOOL, \"allowed\", \"If the mempool allows this tx to be inserted\"},\r\n+                            {RPCResult::Type::BOOL, \"allowed\", \"If the mempool and client specified maxfeerate allows this tx to be inserted\"},\r\n                             {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted (only present when 'allowed' is true)\"},\r\n                             {RPCResult::Type::OBJ, \"fees\", \"Transaction fees (only present if 'allowed' is true)\",\r\n                             {\r\n```\r\n\r\nThat would close my [#21704](https://github.com/bitcoin/bitcoin/issues/21074) concerns for now :) ?",
      "created_at" : "2021-02-12T14:02:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#issuecomment-778213317",
      "id" : 778213317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21146",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3ODIxMzMxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-12T14:02:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/778213317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-02-20T09:56:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#issuecomment-782598141",
      "id" : 782598141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21146",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjU5ODE0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-20T09:56:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782598141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased",
      "created_at" : "2021-02-20T17:57:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#issuecomment-782723514",
      "id" : 782723514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21146",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MjcyMzUxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-20T17:57:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/782723514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21146#discussion_r580289237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21146"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580289237"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You switch `m_view.SetBackend(m_dummy)` to `m_viewmempool.SetBackend(m_dummy)` in commit _[validation] disconnect m_viewmempool from coins cache when unnecessary_.\r\n\r\nI think perhaps in that commit you should just add `m_viewmempool.SetBackend(m_dummy)`, and then in the subsequent commit (_[validation] keep m_view->m_viewmempool connected_), you should remove `m_view.SetBackend(m_dummy)`. That keeps the commits more separated (the first is adding the m_viewmempool // CoinsTip() split, and the second is removing the m_view // m_viewmempool split).",
      "commit_id" : "afe2959f092eed893175a7990d9aa1f0abf42a70",
      "created_at" : "2021-02-22T14:25:51Z",
      "diff_hunk" : "@@ -671,7 +691,7 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // we have all inputs cached now, so switch back to dummy (to protect\n     // against bugs where we pull more inputs from disk that miss being added\n     // to coins_to_uncache)\n-    m_view.SetBackend(m_dummy);\n+    m_viewmempool.SetBackend(m_dummy);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21146#discussion_r580289237",
      "id" : 580289237,
      "in_reply_to_id" : 574866661,
      "line" : 708,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDI4OTIzNw==",
      "original_commit_id" : "14c94b30f1dba81ebb5b9af1b834db7d2a88f297",
      "original_line" : 708,
      "original_position" : 104,
      "original_start_line" : 674,
      "path" : "src/validation.cpp",
      "position" : 116,
      "pull_request_review_id" : 595400630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21146",
      "side" : "RIGHT",
      "start_line" : 694,
      "start_side" : "LEFT",
      "updated_at" : "2021-02-22T14:39:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580289237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
