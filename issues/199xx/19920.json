{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Hash functions are complex, and even though the implementations look simple they can easily go wrong, usually in the buffer handling around the hash function itself(the \"Writer\") examples:\r\nRewriting the last byte that was written, processing the buffer too \"early\" when `Write` was called with exactly a full buffer(different hash functions require different behavior in these cases), the wrong amount of zeros were written in the case the buffer was exactly full when finalizing, and more.\r\n\r\nI've personally found bugs in an implementation of a hash function via fuzzing against a reference implementation (the bug was actually in the ref impl), and there's a lot of precedent (See https://tsapps.nist.gov/publication/get_pdf.cfm?pub_id=924038 for the amount of bugs just in the *reference implementations submitted to NIST's SHA3 competition*)\r\n\r\nThis can also make PRs like #18014 and future SHA256 optimizations easier to review and be confident in.\r\n\r\nI started with siphash specifically because it's small and simple so I can get feedback on this before continuing to SHA256 etc.\r\nThe downside of this method is that it means committing another implementation of the same thing separately.\r\n\r\nAbout the implementation itself:\r\nI've used a constant seperator so it would write each time different sizes, and sometimes even empty writes. and it's constant so coverage based fuzzers can easily figure this out and make the inputs cover all the branches.\r\n\r\nAny feedback is welcome :)",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19920/comments",
   "created_at" : "2020-09-08T21:29:09Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19920/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/19920",
   "id" : 696190005,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "description" : null,
         "id" : 61889416,
         "name" : "Build system",
         "node_id" : "MDU6TGFiZWw2MTg4OTQxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19920/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NDgyMzA3MjM4",
   "number" : 19920,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/19920.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19920",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/19920.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19920"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "test: Fuzzing siphash against reference implementation [Request for feedback]",
   "updated_at" : "2020-09-08T22:54:38Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19920",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/2167860?v=4",
      "events_url" : "https://api.github.com/users/elichai/events{/privacy}",
      "followers_url" : "https://api.github.com/users/elichai/followers",
      "following_url" : "https://api.github.com/users/elichai/following{/other_user}",
      "gists_url" : "https://api.github.com/users/elichai/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/elichai",
      "id" : 2167860,
      "login" : "elichai",
      "node_id" : "MDQ6VXNlcjIxNjc4NjA=",
      "organizations_url" : "https://api.github.com/users/elichai/orgs",
      "received_events_url" : "https://api.github.com/users/elichai/received_events",
      "repos_url" : "https://api.github.com/users/elichai/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/elichai/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/elichai/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/elichai"
   }
}
