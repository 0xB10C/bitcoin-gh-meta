[
   {
      "author_association" : "MEMBER",
      "body" : "Here is a list of all the commits in topological order:\r\n\r\n* implementation (https://github.com/sipa/bitcoin/compare/ba4b3fbcf21317a9410f3be913e4437d58968091...111be541b5076e87bf800bc4769685d9b2340aed)\r\n  * 3430eaec88 Add TaggedHash function (BIP 340)\r\n  * ba285d8d2b Keep spent outputs in PrecomputedTransactionData during validation\r\n  * b63f19a4bd Implement Taproot signature hashing (BIP 341)\r\n  * 466b0229ca refactor: put ECDSA in name of signature function\r\n  * 76f2e3e14d Support for Schnorr signatures and integration in SignatureCheckers (BIP 340)\r\n  * ddfc3657d0 refactor: rename scriptPubKey in VerifyWitnessProgram to exec_script\r\n  * 804ff644f4 Implement Taproot validation (BIP 341)\r\n  * d384d67873 Use ScriptExecutionData to pass through annex hash\r\n  * a73d5e1d8b Implement Tapscript script validation rules (BIP 342)\r\n  * a7ab59707c Make Taproot spends standard + policy limits\r\n  * 24fd22f2ef Activate Taproot/Tapscript on regtest (BIP 341, BIP 342)\r\n  * 89a14b5b7d [TESTS] Add BIP340 Schnorr signature support to test framework\r\n  * 111be541b5 [TESTS] Functional tests for Schnorr/Taproot/Tapscript\r\n\r\n```\r\nPREV=\"$(git rev-parse HEAD)\"; (git log --oneline upstream/master..HEAD; echo \"$(git rev-parse upstream/master) --- [TAPROOT] begin: implementation ---\") | while read C L; do if [ \"d${L:0:14}\" == \"d--- [TAPROOT] \" ]; then if [ \"d$PREV\" != \"\" ]; then echo \"* ${L:21:-4} (https://github.com/sipa/bitcoin/compare/$C...$PREV)\"; fi; PREV=$C; PREVL=$L; else echo \"  * $C $L\"; fi; done | tac\r\n```\r\n",
      "created_at" : "2020-09-14T05:15:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19953#issuecomment-691815830",
      "id" : 691815830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19953",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MTgxNTgzMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-14T05:22:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/691815830",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487713900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487713900"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does it make sense to remove the requirement for the `-enable-experimental` flag to build the schnorrsig module?",
      "commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "created_at" : "2020-09-14T07:44:52Z",
      "diff_hunk" : "@@ -1645,7 +1645,7 @@ if test x$need_bundled_univalue = xyes; then\n   AC_CONFIG_SUBDIRS([src/univalue])\n fi\n \n-ac_configure_args=\"${ac_configure_args} --disable-shared --with-pic --enable-benchmark=no --with-bignum=no --enable-module-recovery\"\n+ac_configure_args=\"${ac_configure_args} --disable-shared --with-pic --enable-benchmark=no --with-bignum=no --enable-module-recovery --enable-module-schnorrsig --enable-experimental\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487713900",
      "id" : 487713900,
      "line" : 1648,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcxMzkwMA==",
      "original_commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "original_line" : 1648,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 487496838,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-14T07:44:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487713900",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487717197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487717197"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This was [discussed in the previous PR](https://github.com/bitcoin/bitcoin/pull/17977/files#r475990462).\r\n\r\nluke-jr\r\n> Should this be non-experimental before merging?\r\n\r\ngmaxwell\r\n> I don't think so: It probably shouldn't be marked non-experimental until after it deployed for activation in Bitcoin because it wouldn't be good to encourage third party users of it while it is still easy to make incompatible changes in Bitcoin (e.g. as was just done. :) )\r\n\r\nsipa\r\n> Or, maybe more likely: the API in libsecp256k1 may change still significantly in the near future (e.g. support for variable-length messages, batch validation, ...) even after we treat the scheme itself final.",
      "commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "created_at" : "2020-09-14T07:50:45Z",
      "diff_hunk" : "@@ -1645,7 +1645,7 @@ if test x$need_bundled_univalue = xyes; then\n   AC_CONFIG_SUBDIRS([src/univalue])\n fi\n \n-ac_configure_args=\"${ac_configure_args} --disable-shared --with-pic --enable-benchmark=no --with-bignum=no --enable-module-recovery\"\n+ac_configure_args=\"${ac_configure_args} --disable-shared --with-pic --enable-benchmark=no --with-bignum=no --enable-module-recovery --enable-module-schnorrsig --enable-experimental\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487717197",
      "id" : 487717197,
      "in_reply_to_id" : 487713900,
      "line" : 1648,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcxNzE5Nw==",
      "original_commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "original_line" : 1648,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "configure.ac",
      "position" : 5,
      "pull_request_review_id" : 487501076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-14T07:50:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487717197",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery There are only two of them. The variable name one is very small, and the ECDSA naming one isn't really a standalone useful change. I think that one could be changed into a scripted-diff though.",
      "created_at" : "2020-09-14T08:34:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19953#issuecomment-691907545",
      "id" : 691907545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19953",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5MTkwNzU0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-14T08:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/691907545",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487880593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487880593"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "maybe move that block down into the one below, then you don't have to check `stack.size() >= 2` twice",
      "commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "created_at" : "2020-09-14T12:42:00Z",
      "diff_hunk" : "@@ -237,6 +239,36 @@ bool IsWitnessStandard(const CTransaction& tx, const CCoinsViewCache& mapInputs)\n                     return false;\n             }\n         }\n+\n+        // Check policy limits for Taproot spends:\n+        // - MAX_STANDARD_TAPSCRIPT_STACK_ITEM_SIZE limit for stack item size\n+        // - No annexes\n+        if (witnessversion == 1 && witnessprogram.size() == WITNESS_V1_TAPROOT_SIZE && !p2sh) {\n+            // Taproot spend (non-P2SH-wrapped, version 1, witness program size 32; see BIP 341)\n+            auto stack = MakeSpan(tx.vin[i].scriptWitness.stack);\n+            if (stack.size() >= 2 && !stack.back().empty() && stack.back()[0] == ANNEX_TAG) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19953#discussion_r487880593",
      "id" : 487880593,
      "line" : 249,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg4MDU5Mw==",
      "original_commit_id" : "111be541b5076e87bf800bc4769685d9b2340aed",
      "original_line" : 249,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/policy/policy.cpp",
      "position" : 36,
      "pull_request_review_id" : 487712003,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19953",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-14T12:42:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/487880593",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/425166?v=4",
         "events_url" : "https://api.github.com/users/flack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/flack/followers",
         "following_url" : "https://api.github.com/users/flack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/flack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/flack",
         "id" : 425166,
         "login" : "flack",
         "node_id" : "MDQ6VXNlcjQyNTE2Ng==",
         "organizations_url" : "https://api.github.com/users/flack/orgs",
         "received_events_url" : "https://api.github.com/users/flack/received_events",
         "repos_url" : "https://api.github.com/users/flack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/flack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/flack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/flack"
      }
   }
]
