[
   {
      "author_association" : "NONE",
      "body" : "May I ask why you've added the sub directory `/wallets` ? While `bitcoind` and `bitcoin-cli` now runs fine without `-datadir` option (following my symbolic link), wallets are not found anymore because of that change.\r\n\r\n```\r\n2022-02-05T01:25:45Z Warning: Skipping -wallet path that doesn't exist. Failed to load database path '/home/me/.bitcoin/wallets/watching'. Path does not exist.\r\nWarning: Skipping -wallet path that doesn't exist. Failed to load database path '/home/me/.bitcoin/wallets/watching'. Path does not exist.\r\n```\r\n\r\nNote that the sub directory `/wallets` was properly created\r\n```\r\n~/btc-things/bitcoin$ ll /home/me/.bitcoin/wallets/\r\ntotal 4\r\ndrwxrwxrwx 1 root root    0 Feb  5 10:24 ./\r\ndrwxrwxrwx 1 root root 4096 Feb  5 10:26 ../\r\n```",
      "created_at" : "2022-02-05T01:28:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030489182",
      "id" : 1030489182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bARe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030489182/reactions"
      },
      "updated_at" : "2022-02-05T01:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030489182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "If you create the `/wallets` directory all the time, it will break current setups which don't use it. Now of course I could just move my wallet folder into the `/wallets` sub-directory and it would work fine, but that's probably not the way to go.\r\n\r\nSee here the wallet directory loading logic https://github.com/bitcoin/bitcoin/blob/master/src/wallet/walletutil.cpp#L25",
      "created_at" : "2022-02-05T02:29:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427",
      "id" : 1030503427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bDwD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030503427/reactions"
      },
      "updated_at" : "2022-02-05T05:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030503427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hebasto How about something like this instead? https://github.com/bitcoin/bitcoin/pull/24267",
      "created_at" : "2022-02-05T03:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030511158",
      "id" : 1030511158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bFo2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030511158/reactions"
      },
      "updated_at" : "2022-02-05T03:23:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030511158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24274](https://github.com/bitcoin/bitcoin/pull/24274) (Introduce GetFileArg and use it where possible by prusnak)\n* [#24267](https://github.com/bitcoin/bitcoin/pull/24267) (util: if `DataDir` is a symbolic link, manually follow it by nymkappa)\n* [#24265](https://github.com/bitcoin/bitcoin/pull/24265) (Drop StripRedundantLastElementsOfPath() function by hebasto)\n* [#23931](https://github.com/bitcoin/bitcoin/pull/23931) (create bitcoin.conf on first run with template by prayank23)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-05T09:00:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030583275",
      "id" : 1030583275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bXPr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030583275/reactions"
      },
      "updated_at" : "2022-02-05T21:34:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030583275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 94fe141d207999483d54b73a6318cc12fb853b46 -> b9c113af754540341d9529532fbadb7525168102 ([pr24266.01](https://github.com/hebasto/bitcoin/commits/pr24266.01) -> [pr24266.02](https://github.com/hebasto/bitcoin/commits/pr24266.02), [diff](https://github.com/hebasto/bitcoin/compare/pr24266.01..pr24266.02)):\r\n\r\n- addressed @nymkappa's [comment](https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427)",
      "created_at" : "2022-02-05T16:40:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030656144",
      "id" : 1030656144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bpCQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030656144/reactions"
      },
      "updated_at" : "2022-02-05T16:40:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030656144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Updated [94fe141](https://github.com/bitcoin/bitcoin/commit/94fe141d207999483d54b73a6318cc12fb853b46) -> [b9c113a](https://github.com/bitcoin/bitcoin/commit/b9c113af754540341d9529532fbadb7525168102) ([pr24266.01](https://github.com/hebasto/bitcoin/commits/pr24266.01) -> [pr24266.02](https://github.com/hebasto/bitcoin/commits/pr24266.02), [diff](https://github.com/hebasto/bitcoin/compare/pr24266.01..pr24266.02)):\r\n> \r\n> * addressed @nymkappa's [comment](https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427)\r\n\r\nTested ACK. This fix is superior to https://github.com/bitcoin/bitcoin/pull/24267 as it keeps [pre-20744](https://github.com/bitcoin/bitcoin/commit/c194293883fbb656779102309b2cb3e60889feff) master branch behavior.\r\n\r\nAdditional perk is that it allows to follow symbolik links with a multiple depth levels, for example this works fine with this PR:\r\n```\r\nlrwxrwxrwx 1 me me 27 Feb  6 17:05 /home/me/.bitcoin -> /home/me/.bitcoindatadir/\r\nlrwxrwxrwx 1 me me 31 Feb  6 17:04 /home/me/.bitcoindatadir -> /home/me/Documents/.bitcoin//\r\n```\r\n",
      "created_at" : "2022-02-06T08:08:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030773742",
      "id" : 1030773742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849cFvu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030773742/reactions"
      },
      "updated_at" : "2022-02-06T08:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030773742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800155417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why is this comment removed?",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-06T09:56:38Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800155417",
      "id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vsWcZ",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 874017160,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T09:56:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800156824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Code `if (!fs::exists(path)) { fs::create_directories(path / \"wallets\"); }` expresses the same idea, therefore, the removed comment is redundant.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-06T10:09:48Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800156824",
      "id" : 800156824,
      "in_reply_to_id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vsWyY",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 874018408,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T10:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
