[
   {
      "author_association" : "MEMBER",
      "body" : "I did a a Guix clean followed by:\r\n\r\n```sh\r\nenv HOSTS='x86_64-apple-darwin' ./contrib/guix/guix-build\r\n```\r\n\r\nThis succeeds, but code-sign doesn't:\r\n\r\n```sh\r\nenv HOSTS='x86_64-apple-darwin' ./contrib/guix/guix-codesign \r\nChecking that we can connect to the guix-daemon...\r\n\r\nHint: If this hangs, you may want to try turning your guix-daemon off and on\r\n      again.\r\n\r\nINFO: Codesigning b7ecef1ddf0c for platform triple x86_64-apple-darwin:\r\n      ...using reference timestamp: 1642652187\r\n      ...from worktree directory: '/home/guix/bitcoin'\r\n          ...bind-mounted in container to: '/bitcoin'\r\n      ...in build directory: '/home/guix/bitcoin/guix-build-b7ecef1ddf0c/distsrc-b7ecef1ddf0c-x86_64-apple-darwin-codesigned'\r\n          ...bind-mounted in container to: '/distsrc-base/distsrc-b7ecef1ddf0c-x86_64-apple-darwin-codesigned'\r\n      ...outputting in: '/home/guix/bitcoin/guix-build-b7ecef1ddf0c/output/x86_64-apple-darwin-codesigned'\r\n          ...bind-mounted in container to: '/outdir-base/x86_64-apple-darwin-codesigned'\r\n      ...using detached signatures in: '/home/guix/bitcoin-detached-sigs'\r\n          ...bind-mounted in container to: '/detached-sigs'\r\nRequired environment variables as seen inside the container:\r\n    UNSIGNED_TARBALL: /outdir-base/x86_64-apple-darwin/bitcoin-b7ecef1ddf0c-osx-unsigned.tar.gz\r\n    DETACHED_SIGS_REPO: /detached-sigs\r\n    DIST_ARCHIVE_BASE: /outdir-base/dist-archive\r\n    DISTNAME: bitcoin-b7ecef1ddf0c\r\n    HOST: x86_64-apple-darwin\r\n    SOURCE_DATE_EPOCH: 1642652187\r\n    DISTSRC: /distsrc-base/distsrc-b7ecef1ddf0c-x86_64-apple-darwin-codesigned\r\n    OUTDIR: /outdir-base/x86_64-apple-darwin-codesigned\r\n/gnu/store/q3y2bpd61bvb7d0g9ils1zi6pax5yvb1-python-elfesteem-0.1-1.87bbd79/lib/python3.8/site-packages/elfesteem/cstruct.py:412: SyntaxWarning: \"is not\" with a literal. Did you mean \"!=\"?\r\n  if name is not '' and not name in table: table[name] = {}\r\n/gnu/store/q3y2bpd61bvb7d0g9ils1zi6pax5yvb1-python-elfesteem-0.1-1.87bbd79/lib/python3.8/site-packages/elfesteem/cstruct.py:415: SyntaxWarning: \"is not\" with a literal. Did you mean \"!=\"?\r\n  if name is not '':\r\nCode signature applied\r\nTraceback (most recent call last):\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/bin/.signapple-real\", line 11, in <module>\r\n    load_entry_point('signapple==0.1.0', 'console_scripts', 'signapple')()\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/__init__.py\", line 112, in main\r\n    args.func(args)\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/__init__.py\", line 36, in apply\r\n    verify(args)\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/__init__.py\", line 10, in verify\r\n    verify_mach_o_signature(args.filename)\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/verify.py\", line 227, in verify_mach_o_signature\r\n    _verify_single(filepath, header)\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/verify.py\", line 161, in _verify_single\r\n    _validate_code_hashes(f, sig_superblob.code_dir_blob)\r\n  File \"/gnu/store/vsi3743mm41cfdv0zmap6p2qfsqylcmx-python-signapple-0.1-1.b084cbb/lib/python3.8/site-packages/signapple/verify.py\", line 54, in _validate_code_hashes\r\n    raise Exception(\r\nException: Code slot hash mismatch. Expected 8cdb98ee7dbd9c1a5b021603c4b0ef933a31717f57884bc3a72536257e4d53dd, Calculated 95bcde7c12f864fcf3de59c87142b9fde1b728328a48cd923023381b730b4eab\r\n```\r\n\r\nSome hashes:\r\n```\r\n8f70852feb39078e02182563517d17bdfc4a12904cf1bdabbae95594d9a1e473  guix-build-b7ecef1ddf0c/output/dist-archive/bitcoin-b7ecef1ddf0c-codesignatures-22.0.tar.gz\r\n359755bffecc64b4c005c5cdee3824190f6b1759dbc6c20034476dcc06413959  guix-build-b7ecef1ddf0c/output/dist-archive/bitcoin-b7ecef1ddf0c.tar.gz\r\n0c6700270ec75991d70a97cad77e22cc00553f812edb56c1bac5ef6421f963e1  guix-build-b7ecef1ddf0c/output/x86_64-apple-darwin/SHA256SUMS.part\r\n87d4637a87959a304422550edf87feda3953d7305894154a6a2d413cc0dd2034  guix-build-b7ecef1ddf0c/output/x86_64-apple-darwin/bitcoin-b7ecef1ddf0c-osx-unsigned.dmg\r\n9cabae32689bd5f93e7faaaf341827f1c4069a63ab6f74276564e47819343b6c  guix-build-b7ecef1ddf0c/output/x86_64-apple-darwin/bitcoin-b7ecef1ddf0c-osx-unsigned.tar.gz\r\nbb5fb113bc022a305e49783d0ba48be90aca61e4a942beeb45206dbc5b91ca6e  guix-build-b7ecef1ddf0c/output/x86_64-apple-darwin/bitcoin-b7ecef1ddf0c-x86_64-apple-darwin.tar.gz\r\n```",
      "created_at" : "2022-01-31T18:26:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24215#issuecomment-1026078356",
      "id" : 1026078356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24215",
      "node_id" : "IC_kwDOABII5849KLaU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026078356/reactions"
      },
      "updated_at" : "2022-01-31T18:26:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026078356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @dongcarl ",
      "created_at" : "2022-01-31T18:27:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24215#issuecomment-1026079130",
      "id" : 1026079130,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24215",
      "node_id" : "IC_kwDOABII5849KLma",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026079130/reactions"
      },
      "updated_at" : "2022-01-31T18:27:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026079130",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've also updated the certvalidator fork we use to have passing tests.",
      "created_at" : "2022-01-31T18:44:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24215#issuecomment-1026093305",
      "id" : 1026093305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24215",
      "node_id" : "IC_kwDOABII5849KPD5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026093305/reactions"
      },
      "updated_at" : "2022-01-31T18:44:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026093305",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors \r\n> This succeeds, but code-sign doesn't:\r\n\r\nMaybe https://github.com/bitcoin/bitcoin/pull/21851#issuecomment-1022115041 and #22546 ?",
      "created_at" : "2022-01-31T18:48:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24215#issuecomment-1026096244",
      "id" : 1026096244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24215",
      "node_id" : "IC_kwDOABII5849KPx0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026096244/reactions"
      },
      "updated_at" : "2022-01-31T18:48:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026096244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
