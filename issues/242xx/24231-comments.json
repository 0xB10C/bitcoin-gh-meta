[
   {
      "author_association" : "MEMBER",
      "body" : "Pushed another commit to fix a premature throw of \"end of data\" on 64-bit systems, when there is still data.\r\n\r\nUnit test:\r\n\r\n\r\n```diff\r\ndiff --git a/src/test/coins_tests.cpp b/src/test/coins_tests.cpp\r\nindex 922fd8e513..d7a266cf1c 100644\r\n--- a/src/test/coins_tests.cpp\r\n+++ b/src/test/coins_tests.cpp\r\n@@ -534,6 +534,21 @@ BOOST_AUTO_TEST_CASE(ccoins_serialization)\r\n     } catch (const std::ios_base::failure&) {\r\n     }\r\n \r\n+    CDataStream foo{0, 0};\r\n+    auto size{size_t{std::numeric_limits<uint32_t>::max()} + 100};\r\n+    foo.resize(size);\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    foo.ignore(std::numeric_limits<int32_t>::max());\r\n+    size -= std::numeric_limits<int32_t>::max();\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    foo.ignore(std::numeric_limits<int32_t>::max());\r\n+    size -= std::numeric_limits<int32_t>::max();\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    BOOST_CHECK_EQUAL(foo.size(), 101);\r\n+    foo.ignore(7); // Should work fine\r\n+    size -= 7;\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+\r\n     // Very large scriptPubKey (3*10^9 bytes) past the end of the stream\r\n     CDataStream tmp(SER_DISK, CLIENT_VERSION);\r\n     uint64_t x = 3000000000ULL;\r\n",
      "created_at" : "2022-02-02T17:19:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1028169066",
      "id" : 1028169066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849SJ1q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028169066/reactions"
      },
      "updated_at" : "2022-02-02T17:19:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028169066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "mingw can't compile the bugfix:\r\n\r\n\r\n```\r\nIn file included from /usr/lib/gcc/x86_64-w64-mingw32/9.3-posix/include/c++/cstring:42,\r\n                 from ./serialize.h:13,\r\n                 from ./streams.h:9,\r\n                 from test/streams_tests.cpp:5:\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid CDataStream::insert(CDataStream::iterator, std::vector<std::byte>::const_iterator, std::vector<std::byte>::const_iterator)â at ./streams.h:256:19,\r\n    inlined from âvoid streams_tests::streams_serializedata_xor::test_method()â at test/streams_tests.cpp:181:14:\r\n/usr/share/mingw-w64/include/string.h:202:32: error: âvoid* __builtin_memcpy(void*, const void*, long long unsigned int)â specified size between 9223372036854775808 and 18446744073709551615 exceeds maximum object size 9223372036854775807 [-Werror=stringop-overflow=]\r\n  202 |   return __builtin___memcpy_chk(__dst, __src, __n, __mingw_bos(__dst, 0));\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid CDataStream::insert(CDataStream::iterator, std::vector<std::byte>::const_iterator, std::vector<std::byte>::const_iterator)â at ./streams.h:256:19,\r\n    inlined from âvoid streams_tests::streams_serializedata_xor::test_method()â at test/streams_tests.cpp:198:14:\r\n/usr/share/mingw-w64/include/string.h:202:32: error: âvoid* __builtin_memcpy(void*, const void*, long long unsigned int)â specified size between 9223372036854775808 and 18446744073709551615 exceeds maximum object size 9223372036854775807 [-Werror=stringop-overflow=]\r\n  202 |   return __builtin___memcpy_chk(__dst, __src, __n, __mingw_bos(__dst, 0));\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncc1plus: all warnings being treated as errors\r\nmake[2]: *** [Makefile:16816: test/test_bitcoin-streams_tests.o] Error 1",
      "created_at" : "2022-02-03T18:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1029286985",
      "id" : 1029286985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849WaxJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029286985/reactions"
      },
      "updated_at" : "2022-02-03T18:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029286985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24253](https://github.com/bitcoin/bitcoin/pull/24253) (Remove broken and unused CDataStream methods by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-04T04:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1029624629",
      "id" : 1029624629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849XtM1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029624629/reactions"
      },
      "updated_at" : "2022-02-04T04:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029624629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
