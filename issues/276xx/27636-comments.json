[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1424328154), [hebasto](https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1425535676) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27596](https://github.com/bitcoin/bitcoin/pull/27596) (assumeutxo (2) by jamesob)\n* [#27571](https://github.com/bitcoin/bitcoin/pull/27571) (ci: Run iwyu on all src files by MarcoFalke)\n* [#27460](https://github.com/bitcoin/bitcoin/pull/27460) (rpc: Add importmempool RPC by MarcoFalke)\n* [#27331](https://github.com/bitcoin/bitcoin/pull/27331) (refactor: extract CCheckQueue's data handling into a separate container \"Bag\" by martinus)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n* [#26762](https://github.com/bitcoin/bitcoin/pull/26762) (refactor: Make `CCheckQueue` RAII-styled by hebasto)\n* [#24313](https://github.com/bitcoin/bitcoin/pull/24313) (Improve display address handling for external signer by Sjors)\n* [#24008](https://github.com/bitcoin/bitcoin/pull/24008) (assumeutxo: net_processing changes by jamesob)\n* [#19461](https://github.com/bitcoin/bitcoin/pull/19461) (multiprocess: Add bitcoin-gui -ipcconnect option by ryanofsky)\n* [#19460](https://github.com/bitcoin/bitcoin/pull/19460) (multiprocess: Add bitcoin-wallet -ipcconnect option by ryanofsky)\n* [#10443](https://github.com/bitcoin/bitcoin/pull/10443) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-12T08:03:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1545342843",
      "id" : 1545342843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cHA97",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545342843/reactions"
      },
      "updated_at" : "2023-05-14T11:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545342843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems like it would be more natural to write this as:\r\n\r\n```c++\r\nclass ChainstateNotifications\r\n{\r\n    virtual void NotifyBlockTip(SynchronizationState state, CBlockIndex* index) {}\r\n    virtual void NotifyHeaderTip(SynchronizationState state, int64_t height, int64_t timestamp, bool presync) {}\r\n    virtual void ShowProgress(const std::string& title, int nProgress, bool resume_possible) {}\r\n    virtual void DoWarning(const bilingual_str& warning) {}\r\n    virtual void InitError(const bilingual_str& user_message) {}\r\n};\r\n```",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T11:49:24Z",
      "diff_hunk" : "@@ -15,13 +15,29 @@\n #include <functional>\n #include <optional>\n \n+class CBlockIndex;\n class CChainParams;\n+enum class SynchronizationState;\n \n static constexpr bool DEFAULT_CHECKPOINTS_ENABLED{true};\n static constexpr auto DEFAULT_MAX_TIP_AGE{24h};\n \n namespace kernel {\n \n+/**\n+ * A struct containing callback functions to issue notifications from the\n+ * `ChainstateManager`. More ergonomically referred to as\n+ * `ChainstateManager::NotificationCallbacks` due to the using-declaration in\n+ * `ChainstateManager`.\n+ */\n+struct ChainstateManagerNotificationCallbacks {\n+    const std::function<void(SynchronizationState state, CBlockIndex* index)> notify_block_tip;\n+    const std::function<void(SynchronizationState state, int64_t height, int64_t timestamp, bool presync)> notify_header_tip;\n+    const std::function<void(const std::string& title, int nProgress, bool resume_possible)> show_progress;\n+    const std::function<void(const bilingual_str& warning)> do_warning;\n+    const std::function<void(const bilingual_str& user_message)> init_error;\n+};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695",
      "id" : 1192264695,
      "line" : 39,
      "node_id" : "PRRC_kwDOABII585HEIP3",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 39,
      "original_position" : 25,
      "original_start_line" : 33,
      "path" : "src/kernel/chainstatemanager_opts.h",
      "position" : 25,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 33,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192264695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These new AbortNode calls seem more awkward. And they aren't really future-proof since `AbortNode` calls the global `StartShutdown` function which is specific to the node and will have to be changed for the kernel. Also the name \"abort node\" doesn't make sense in the kernel context if the kernel application isn't a bitcoin node. Would suggest adding a `FatalError` notification to complement `InitError` in `ChainstateNotifications` class suggested previously:\r\n\r\n```c++\r\nclass ChainstateNotifications\r\n{\r\n    ...\r\n    virtual void FatalError(const bilingual_str& error_message, const bilingual_str abort_message={}) {}\r\n};\r\n```\r\n\r\nOther kernel clients could customize `FatalError` but the node implementation would call `SetMiscWarning(error_message)` and `InitError(abort_message or \"A fatal internal error occurred, see debug.log for details\")` and `StartShutdown()` like `AbortNode` function does currently, to keep behavior unchanged.",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T12:18:15Z",
      "diff_hunk" : "@@ -527,7 +527,7 @@ void BlockManager::FlushUndoFile(int block_file, bool finalize)\n {\n     FlatFilePos undo_pos_old(block_file, m_blockfile_info[block_file].nUndoSize);\n     if (!UndoFileSeq().Flush(undo_pos_old, finalize)) {\n-        AbortNode(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\");\n+        AbortNode(\"Flushing undo file to disk failed. This is likely the result of an I/O error.\", m_opts.init_error_callback);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165",
      "id" : 1192290165,
      "line" : 530,
      "node_id" : "PRRC_kwDOABII585HEOd1",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 530,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/node/blockstorage.cpp",
      "position" : 16,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192290165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think I would tie these notifications to the ChainStateManager class specifically as they really make sense anywhere in validation code. Would suggest changing `chainstatemanager_notifications` to  `chainstate_notifications`, or `validation_notifications` and dropping the \"manager\" in these places",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T12:23:32Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222",
      "id" : 1192295222,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII585HEPs2",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : 11,
      "pull_request_review_id" : 1424328154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T12:28:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192295222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192715879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would you also prefer passing this `validation_notifications` class to the other users of these notification functions, even if they only use one of the methods?",
      "commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "created_at" : "2023-05-12T19:08:27Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192715879",
      "id" : 1192715879,
      "in_reply_to_id" : 1192295222,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII585HF2Zn",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : 11,
      "pull_request_review_id" : 1425030271,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T19:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192715879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192780239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, I think that's preferable. Just pass `const ChainstateNotifications&` everywhere and don't have a lot of different awkward notification types",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-12T20:46:44Z",
      "diff_hunk" : "@@ -0,0 +1,14 @@\n+// Copyright (c) 2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+#define BITCOIN_NODE_CHAINSTATEMANAGER_NOTIFICATIONS_H\n+\n+#include <kernel/chainstatemanager_opts.h>\n+\n+namespace node {\n+kernel::ChainstateManagerNotificationCallbacks DefaultChainstateManagerNotifications();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192780239",
      "id" : 1192780239,
      "in_reply_to_id" : 1192295222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585HGGHP",
      "original_commit_id" : "0b159b9256c214a289135ca7bfaf70e48ab28e20",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/node/chainstatemanager_notifications.h",
      "position" : null,
      "pull_request_review_id" : 1425134568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-12T22:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1192780239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the suggestions @ryanofsky! \r\n\r\nUpdated 0b159b9256c214a289135ca7bfaf70e48ab28e20 -> 63e915af5a437d36abdd79a1b90fed2395086589 ([chainstateRmKernelUiInterface_0](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_0) -> [chainstateRmKernelUiInterface_1](https://github.com/TheCharlatan/bitcoin/commits/chainstateRmKernelUiInterface_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/chainstateRmKernelUiInterface_0..chainstateRmKernelUiInterface_1)).\r\n\r\n* Re-worked the commits as suggested by @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192264695) by changing the approach from passing around lambdas to using polymorphisms of a virtual class.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192295222), renaming `chainstatemanager_notifications` to `validation_notifications`.\r\n* Re-worked the last commit as suggested by @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1192290165), by moving away from wrapping `InitError` to implementing a `FatalError` method, replacing the `AbortNode` function in `shutdown`. This is also a similar approach to the existing `FatalErrorf` method in `index/base.cpp`\r\n* Added a commit renaming `FatalError` to `FatalErrorf` in `index/base.cpp` to better distinguish it from the new `FatalError` function and not let the format string linter trip up on it.\r\n* Made the `ChainstateManagerOpts` notification member a `shared_ptr` in order to allow the option struct to be safely re-used for multiple `ChainstateManager`s",
      "created_at" : "2023-05-13T17:24:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546714913",
      "id" : 1546714913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cMP8h",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546714913/reactions"
      },
      "updated_at" : "2023-05-13T17:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546714913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-05-14T10:53:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546869753",
      "id" : 1546869753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cM1v5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546869753/reactions"
      },
      "updated_at" : "2023-05-14T10:53:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546869753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193133568"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't this change be moved to the first commit?",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T11:58:55Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193133568",
      "id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHcYA",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425537905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T11:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193133568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193134480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We also don't set other params, like `adjusted_time_callback` in the dummy opts, since they are not required to read the args into the struct. The commit where this is changed, adds it because the `BlockManager::Options` requires a reference to the notifications starting at that commit.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T12:04:23Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193134480",
      "id" : 1193134480,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHcmQ",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425538799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T12:04:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193134480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193141876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876"
         }
      },
      "author_association" : "MEMBER",
      "body" : "FWIW, gcc emits a warning here.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T12:53:09Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193141876",
      "id" : 1193141876,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHeZ0",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425546113,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T12:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193141876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193146924"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for following up, will patch.",
      "commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "created_at" : "2023-05-14T13:23:13Z",
      "diff_hunk" : "@@ -1034,13 +1036,15 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         ChainstateManager::Options chainman_opts_dummy{\n             .chainparams = chainparams,\n             .datadir = args.GetDataDirNet(),\n+            .notifications = std::make_shared<ValidationNotificationsImpl>(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#discussion_r1193146924",
      "id" : 1193146924,
      "in_reply_to_id" : 1193133568,
      "line" : 1039,
      "node_id" : "PRRC_kwDOABII585HHfos",
      "original_commit_id" : "63e915af5a437d36abdd79a1b90fed2395086589",
      "original_line" : 1039,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 1425550586,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27636",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-14T13:23:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1193146924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/27636#pullrequestreview-1425535676\r\n\r\n> In commit [7355679](https://github.com/bitcoin/bitcoin/commit/73556797ab9c44038994954b945db996642656d2):\r\n> \r\n> ```diff\r\n> --- a/src/validation.cpp\r\n> +++ b/src/validation.cpp\r\n> @@ -4659,7 +4659,7 @@ void Chainstate::LoadExternalBlockFile(\r\n>                      }\r\n>                  }\r\n>  \r\n> -                NotifyHeaderTip(*this);\r\n> +                ::NotifyHeaderTip(*this);\r\n>  \r\n>                  if (!blocks_with_unknown_parent) continue;\r\n>  \r\n> ``` \r\nI added the global scope resolution where it was required, because of the naming conflict with the `ChainstateManager` method. These here are methods of `Chainstate` and don't have a naming conflict. Is adding them good practice for consistency's sake?",
      "created_at" : "2023-05-14T13:40:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27636#issuecomment-1546903132",
      "id" : 1546903132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27636",
      "node_id" : "IC_kwDOABII585cM95c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546903132/reactions"
      },
      "updated_at" : "2023-05-14T13:40:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1546903132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   }
]
