[
   {
      "body" : "Interesting concept. \r\n\r\nIt's a good observation that it is possible to 'freeze' transactions that are fully spent and no longer count toward the balance. They can be excluded from GetBalance() computations and such. You could hide them in default views.\r\n\r\nI'm not so sure about actually deleting them though - storage is cheap so it doesn't really make much sense to remove old transaction data for storage concerns. And for privacy, well, the transactions are still there in the block chain. You could delete the metadata, but not much more.\r\n(if no-address-reuse was rigorously enforced in Bitcoin one could also prune old keys and have some plausible deniablity, i suppose... but right now that would be foot-shooting waiting to happen)\r\n",
      "created_at" : "2014-12-02T08:36:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65197888",
      "id" : 65197888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T08:36:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65197888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ok, closing.",
      "created_at" : "2014-12-02T10:35:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65211159",
      "id" : 65211159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T10:35:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65211159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "I didn't mean that as 'go close this!'. I just wanted to get a discussion started. There could be other people for which this may be just what they needed.",
      "created_at" : "2014-12-02T10:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65213682",
      "id" : 65213682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T10:59:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65213682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The reorging of the data to avoid needlesly iterating over them sounds interesting.  I agree that deleting is less exciting.  An additional thing to contemplate is deleting only the data which is in the chain, e.g. keeping any metadata. ",
      "created_at" : "2014-12-02T14:21:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65236968",
      "id" : 65236968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-02T14:21:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65236968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Our wallet by design loads everything in memory, including all transactions. So you reduce memory usage, disk space and speed up many wallet operations.\r\n\r\nOf course maybe nobody even has a wallet that big, where things make difference.\r\nBut the feature doesnt hurt anybody, and just in case someone complains about performance or memory issues with a large wallet, we could point him to this.\r\n\r\nOr if people make regular wallet online-backups, they might want to trim down the wallet.\r\n\r\nBesides useful, to me at least its kind of a cool feature to see all transactions disappear, except those actually holding your coins.",
      "created_at" : "2014-12-03T12:03:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65397440",
      "id" : 65397440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T12:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65397440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz Absolutely. We should improve the scalability, but I think permantly deleting irrecoverable finiancial information is a cost too great.   Instead we should be making possible to load some of this data only on demand, or archiving it off without deleting it completely. ",
      "created_at" : "2014-12-03T16:06:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65434825",
      "id" : 65434825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T16:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65434825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Ultimately, I think the correct solution is considering the UTXO set and the transaction list/ledger as separate entities, and maybe just occasionally check for consistency between them, rather than constantly computing one from the other. Doing that probably means pretty much a total rewrite.",
      "created_at" : "2014-12-03T16:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65435948",
      "id" : 65435948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T16:11:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65435948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gmaxwell agreed about \"loading on demand\", but I dont think anybody will redesign the wallet anytime soon, so I was just trying to find a rather simple solution which fits in the current design.\r\nFor archiving you can simply use backupwallet.\r\n\r\nAbout \"irrecoverable finiancial information\", not sure what you mean. Wallet-pruning is disabled when using the account-feature, and payment-request is not even exposed to rpc and we only show the merchant in the gui in the tx-details.\r\nSo there is only the actual bitcoin transaction, which I dont consider as irrecoverable.\r\n(simple rescan will do)\r\n\r\nOur wallet grows forever by design, so I just thought that a simple straighforward pruning feature might be useful to someone.",
      "created_at" : "2014-12-03T21:22:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65493198",
      "id" : 65493198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-03T21:22:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65493198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "Agree with comments that we should just hide and optimise, not delete. Especially not delete on the basis of what is to users essentially random (the UTXOs created when a userside-transaction is received don't remain associated to that userside-transaction).",
      "created_at" : "2014-12-05T12:59:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-65786548",
      "id" : 65786548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2014-12-05T12:59:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/65786548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "We have been researching this possibility of deleting fully-spent transactions in an effort to improve performance and reliability of backups with very large wallets. Finding this patch was quite pleasant as it has implemented the solution exactly as we had imagined it might work.\r\n\r\nThe main idea behind this is rather simple. It would greatly improve performance for large wallets containing many hundreds of thousands of transactions where a majority portion of transactions are fully-spent and have many hundreds or thousands of confirmations.\r\n\r\nAnother reason for this patch would be to alleviate the stress of handling wallet backups. While storage is not a concern, creating backups that get quite large(and will continue to grow) is time consuming and can be rather concerning. It would seem reasonable that a task requiring more time to complete would also have more time to fail.\r\n\r\nWe believe this feature to be exactly what we need. We are experiencing these issues now and it's obvious that the problem will only worsen with continued use.",
      "created_at" : "2015-01-27T17:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5389#issuecomment-71685685",
      "id" : 71685685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5389",
      "updated_at" : "2015-01-27T17:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/71685685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10603424?v=3",
         "events_url" : "https://api.github.com/users/mchatham/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mchatham/followers",
         "following_url" : "https://api.github.com/users/mchatham/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mchatham/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mchatham",
         "id" : 10603424,
         "login" : "mchatham",
         "organizations_url" : "https://api.github.com/users/mchatham/orgs",
         "received_events_url" : "https://api.github.com/users/mchatham/received_events",
         "repos_url" : "https://api.github.com/users/mchatham/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mchatham/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mchatham/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mchatham"
      }
   }
]
