[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2018-11-03T02:37:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#issuecomment-435554106",
      "id" : 435554106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTU1NDEwNg==",
      "updated_at" : "2018-11-03T02:37:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435554106",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230548862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230548862"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Add a test for this?",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T08:39:04Z",
      "diff_hunk" : "@@ -262,20 +264,33 @@ class DescriptorImpl : public Descriptor\n \n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override final { return ToStringHelper(&arg, out, true); }\n \n-    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    bool ExpandHelper(int pos, const SigningProvider& arg, Span<const unsigned char>* cache_read, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache_write) const\n     {\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkeys.size());\n \n         // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n         for (const auto& p : m_pubkeys) {\n             entries.emplace_back();\n-            if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second)) return false;\n+            if (!p->GetPubKey(pos, arg, cache_read ? nullptr : &entries.back().first, entries.back().second)) return false;\n+            if (cache_read) {\n+                // Cached expanded public key exists, use it.\n+                if (cache_read->size() == 0) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230548862",
      "id" : 230548862,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0ODg2Mg==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 96,
      "path" : "src/script/descriptor.cpp",
      "position" : 251,
      "pull_request_review_id" : 171320860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230548862",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230548877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230548877"
         }
      },
      "author_association" : "MEMBER",
      "body" : "n00b C++ question: what happens if `cache_read` is too short?",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T08:39:51Z",
      "diff_hunk" : "@@ -262,20 +264,33 @@ class DescriptorImpl : public Descriptor\n \n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override final { return ToStringHelper(&arg, out, true); }\n \n-    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    bool ExpandHelper(int pos, const SigningProvider& arg, Span<const unsigned char>* cache_read, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache_write) const\n     {\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkeys.size());\n \n         // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n         for (const auto& p : m_pubkeys) {\n             entries.emplace_back();\n-            if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second)) return false;\n+            if (!p->GetPubKey(pos, arg, cache_read ? nullptr : &entries.back().first, entries.back().second)) return false;\n+            if (cache_read) {\n+                // Cached expanded public key exists, use it.\n+                if (cache_read->size() == 0) return false;\n+                bool compressed = ((*cache_read)[0] == 0x02 || (*cache_read)[0] == 0x03) && cache_read->size() >= 33;\n+                bool uncompressed = ((*cache_read)[0] == 0x04) && cache_read->size() >= 65;\n+                if (!(compressed || uncompressed)) return false;\n+                CPubKey pubkey(cache_read->begin(), cache_read->begin() + (compressed ? 33 : 65));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230548877",
      "id" : 230548877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0ODg3Nw==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 100,
      "path" : "src/script/descriptor.cpp",
      "position" : 255,
      "pull_request_review_id" : 171320860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230548877",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549061"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you add comments (to the existing code) what these two loops are about? E.g.\r\n```\r\n// Is ranged descriptor, expand up to 3 results\r\nsize_t max ...\r\nfor (size_t i = 0; i < max; ++i)\r\n...\r\n// ???\r\nfor (int t = 0; t < 2; ++t) \r\n```",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T08:51:35Z",
      "diff_hunk" : "@@ -88,9 +88,18 @@ void Check(const std::string& prv, const std::string& pub, int flags, const std:\n         const auto& ref = scripts[(flags & RANGE) ? i : 0];\n         for (int t = 0; t < 2; ++t) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549061",
      "id" : 230549061,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0OTA2MQ==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 2,
      "path" : "src/test/descriptor_tests.cpp",
      "position" : 2,
      "pull_request_review_id" : 171320860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549061",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549171"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since `ExpandHelper` doesn't care, should `ExpandFromCache` explicitly check that it wasn't unintentionally called with `cache=nullptr`? Or should `ExpandFromCache` be agnostic to whether or not there's actually a (useful) cache?",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T08:56:44Z",
      "diff_hunk" : "@@ -299,6 +314,17 @@ class DescriptorImpl : public Descriptor\n         }\n         return true;\n     }\n+\n+    bool Expand(int pos, const SigningProvider& provider, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache = nullptr) const override final\n+    {\n+        return ExpandHelper(pos, provider, nullptr, output_scripts, out, cache);\n+    }\n+\n+    bool ExpandFromCache(int pos, const std::vector<unsigned char>& cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549171",
      "id" : 230549171,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0OTE3MQ==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 127,
      "path" : "src/script/descriptor.cpp",
      "position" : 298,
      "pull_request_review_id" : 171320860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549171",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549882"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That would be undefined behavior.\n\nThankfully the line above checks that this isn't the case :)",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T09:30:12Z",
      "diff_hunk" : "@@ -262,20 +264,33 @@ class DescriptorImpl : public Descriptor\n \n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override final { return ToStringHelper(&arg, out, true); }\n \n-    bool Expand(int pos, const SigningProvider& arg, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    bool ExpandHelper(int pos, const SigningProvider& arg, Span<const unsigned char>* cache_read, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache_write) const\n     {\n         std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n         entries.reserve(m_pubkeys.size());\n \n         // Construct temporary data in `entries` and `subscripts`, to avoid producing output in case of failure.\n         for (const auto& p : m_pubkeys) {\n             entries.emplace_back();\n-            if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second)) return false;\n+            if (!p->GetPubKey(pos, arg, cache_read ? nullptr : &entries.back().first, entries.back().second)) return false;\n+            if (cache_read) {\n+                // Cached expanded public key exists, use it.\n+                if (cache_read->size() == 0) return false;\n+                bool compressed = ((*cache_read)[0] == 0x02 || (*cache_read)[0] == 0x03) && cache_read->size() >= 33;\n+                bool uncompressed = ((*cache_read)[0] == 0x04) && cache_read->size() >= 65;\n+                if (!(compressed || uncompressed)) return false;\n+                CPubKey pubkey(cache_read->begin(), cache_read->begin() + (compressed ? 33 : 65));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549882",
      "id" : 230549882,
      "in_reply_to_id" : 230548877,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0OTg4Mg==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 100,
      "path" : "src/script/descriptor.cpp",
      "position" : 255,
      "pull_request_review_id" : 171321984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:30:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549882",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549894"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549894"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The argument is a reference, not a pointer. Dereferencing a nullptr is UB.",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T09:30:56Z",
      "diff_hunk" : "@@ -299,6 +314,17 @@ class DescriptorImpl : public Descriptor\n         }\n         return true;\n     }\n+\n+    bool Expand(int pos, const SigningProvider& provider, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache = nullptr) const override final\n+    {\n+        return ExpandHelper(pos, provider, nullptr, output_scripts, out, cache);\n+    }\n+\n+    bool ExpandFromCache(int pos, const std::vector<unsigned char>& cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230549894",
      "id" : 230549894,
      "in_reply_to_id" : 230549171,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU0OTg5NA==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 127,
      "path" : "src/script/descriptor.cpp",
      "position" : 298,
      "pull_request_review_id" : 171321996,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T09:30:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230549894",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors My idea is that the wallet will contain a number of records, each of which has a descriptor, a bool to indicate whether it's for change or not, a birthday, perhaps information about what HW device to prompt for, a gap limit, ...; those are all static configuration that generally doesn't change unless you import something. In addition there will be a wallet entry per expanded element of a record with the cached information, which also helps in identifying what the next unused address is etc.",
      "created_at" : "2018-11-03T09:35:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#issuecomment-435574146",
      "id" : 435574146,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNTU3NDE0Ng==",
      "updated_at" : "2018-11-03T09:35:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/435574146",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230551654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230551654"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah yes, `cache` is a pointer for `Expand` and a reference for `ExpandFromCache`. ",
      "commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "created_at" : "2018-11-03T10:54:37Z",
      "diff_hunk" : "@@ -299,6 +314,17 @@ class DescriptorImpl : public Descriptor\n         }\n         return true;\n     }\n+\n+    bool Expand(int pos, const SigningProvider& provider, std::vector<CScript>& output_scripts, FlatSigningProvider& out, std::vector<unsigned char>* cache = nullptr) const override final\n+    {\n+        return ExpandHelper(pos, provider, nullptr, output_scripts, out, cache);\n+    }\n+\n+    bool ExpandFromCache(int pos, const std::vector<unsigned char>& cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out) const override final\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14646#discussion_r230551654",
      "id" : 230551654,
      "in_reply_to_id" : 230549171,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMDU1MTY1NA==",
      "original_commit_id" : "0bfff69c3372fb927dbbc4a2b2343e026f5fb5d8",
      "original_position" : 127,
      "path" : "src/script/descriptor.cpp",
      "position" : 298,
      "pull_request_review_id" : 171323874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14646",
      "updated_at" : "2018-11-03T10:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/230551654",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
