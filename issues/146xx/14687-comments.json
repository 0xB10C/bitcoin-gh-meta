[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2018-11-08T12:43:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#issuecomment-436981652",
      "id" : 436981652,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14687",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjk4MTY1Mg==",
      "updated_at" : "2018-11-08T12:43:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436981652",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r232207812"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232207812"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"connectivity\" :-)",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-09T10:31:55Z",
      "diff_hunk" : "@@ -98,6 +98,20 @@ ZMQ_SUBSCRIBE option set to one or either of these prefixes (for\n instance, just `hash`); without doing so will result in no messages\n arriving. Please see `contrib/zmq/zmq_sub.py` for a working example.\n \n+The ZMQ_PUB socket's ZMQ_TCP_KEEPALIVE option is enabled. This means that\n+the underlying SO_KEEPALIVE option is enabled when using a TCP transport.\n+The effective TCP keepalive values are managed through the underlying\n+operating system configuration and must be configured prior to connection establishment.\n+\n+For example, when running on GNU/Linux, one might use the following\n+to lower the keepalive setting to 10 minutes:\n+\n+sudo sysctl -w net.ipv4.tcp_keepalive_time=600\n+\n+Setting the keepalive values appropriately for your operating environment may\n+improve connectiviy in situations where long-lived connections are silently",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r232207812",
      "id" : 232207812,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjIwNzgxMg==",
      "original_commit_id" : "e7921ce307c1fe92517d7cf768859381d99069ce",
      "original_position" : 15,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_review_id" : 173353822,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232207812",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r232219699"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232219699"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed, thanks :-)",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-09T11:13:32Z",
      "diff_hunk" : "@@ -98,6 +98,20 @@ ZMQ_SUBSCRIBE option set to one or either of these prefixes (for\n instance, just `hash`); without doing so will result in no messages\n arriving. Please see `contrib/zmq/zmq_sub.py` for a working example.\n \n+The ZMQ_PUB socket's ZMQ_TCP_KEEPALIVE option is enabled. This means that\n+the underlying SO_KEEPALIVE option is enabled when using a TCP transport.\n+The effective TCP keepalive values are managed through the underlying\n+operating system configuration and must be configured prior to connection establishment.\n+\n+For example, when running on GNU/Linux, one might use the following\n+to lower the keepalive setting to 10 minutes:\n+\n+sudo sysctl -w net.ipv4.tcp_keepalive_time=600\n+\n+Setting the keepalive values appropriately for your operating environment may\n+improve connectiviy in situations where long-lived connections are silently",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r232219699",
      "id" : 232219699,
      "in_reply_to_id" : 232207812,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjIxOTY5OQ==",
      "original_commit_id" : "e7921ce307c1fe92517d7cf768859381d99069ce",
      "original_position" : 15,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_review_id" : 173367690,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232219699",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks good to me, but probably needs to be tested by @bitkevin whether it really solves #12754.",
      "created_at" : "2018-11-12T12:57:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#issuecomment-437870289",
      "id" : 437870289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14687",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzg3MDI4OQ==",
      "updated_at" : "2018-11-12T12:57:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437870289",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233807010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233807010"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `{` here.",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-15T11:30:35Z",
      "diff_hunk" : "@@ -86,6 +86,15 @@ bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n             return false;\n         }\n \n+        const int so_keepalive_option {1};\n+        rc = zmq_setsockopt(psocket, ZMQ_TCP_KEEPALIVE, &so_keepalive_option, sizeof(so_keepalive_option));\n+        if (rc != 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233807010",
      "id" : 233807010,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzgwNzAxMA==",
      "original_commit_id" : "66609de4441c6e3c2d9ee56d7d5f94571a0510a3",
      "original_position" : 6,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 175305089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233807010",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233813321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233813321"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does it make sense to support setting per socket? I mean, allow custom `ZMQ_TCP_KEEPALIVE_IDLE`?",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-15T11:52:53Z",
      "diff_hunk" : "@@ -98,6 +98,20 @@ ZMQ_SUBSCRIBE option set to one or either of these prefixes (for\n instance, just `hash`); without doing so will result in no messages\n arriving. Please see `contrib/zmq/zmq_sub.py` for a working example.\n \n+The ZMQ_PUB socket's ZMQ_TCP_KEEPALIVE option is enabled. This means that\n+the underlying SO_KEEPALIVE option is enabled when using a TCP transport.\n+The effective TCP keepalive values are managed through the underlying\n+operating system configuration and must be configured prior to connection establishment.\n+\n+For example, when running on GNU/Linux, one might use the following\n+to lower the keepalive setting to 10 minutes:\n+\n+sudo sysctl -w net.ipv4.tcp_keepalive_time=600",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233813321",
      "id" : 233813321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzgxMzMyMQ==",
      "original_commit_id" : "66609de4441c6e3c2d9ee56d7d5f94571a0510a3",
      "original_position" : 12,
      "path" : "doc/zmq.md",
      "position" : 12,
      "pull_request_review_id" : 175305089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233813321",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> is it possible to enable keepalive globally?\r\n\r\nI don't believe it is for Linux or Windows.",
      "created_at" : "2018-11-15T13:12:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#issuecomment-439035352",
      "id" : 439035352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14687",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzOTAzNTM1Mg==",
      "updated_at" : "2018-11-15T13:12:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/439035352",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mruddy thanks, I also don't find evidence that it's possible.",
      "created_at" : "2018-11-15T13:15:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#issuecomment-439036235",
      "id" : 439036235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14687",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzOTAzNjIzNQ==",
      "updated_at" : "2018-11-15T13:15:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/439036235",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233836873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233836873"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "updated the formatting here to be on the same line. i had to force myself to do it because that's what the dev notes say to do. but it was hard because so much of the zmq code is of the other style :)",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-15T13:18:47Z",
      "diff_hunk" : "@@ -86,6 +86,15 @@ bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n             return false;\n         }\n \n+        const int so_keepalive_option {1};\n+        rc = zmq_setsockopt(psocket, ZMQ_TCP_KEEPALIVE, &so_keepalive_option, sizeof(so_keepalive_option));\n+        if (rc != 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233836873",
      "id" : 233836873,
      "in_reply_to_id" : 233807010,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzgzNjg3Mw==",
      "original_commit_id" : "66609de4441c6e3c2d9ee56d7d5f94571a0510a3",
      "original_position" : 6,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : null,
      "pull_request_review_id" : 175342691,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:18:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233836873",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233838885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233838885"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The best reason that I could think of to support my stance of not wanting to add the extra options, besides adding complexity and configuration bloat, is that these timeouts are environmental and so it seems like once you figure them out, it's best to just set an appropriate value at the system level. This does assume that you're not making these ZMQ connections to a bunch of other external-party system environments where per socket config could be useful. I think this assumption is valid though because I perceive the ZMQ stuff to be for data distribution within one's own (internal) environment. Third parties would be running their own nodes and distributing data from those nodes within their own envs. Make sense?",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-11-15T13:24:53Z",
      "diff_hunk" : "@@ -98,6 +98,20 @@ ZMQ_SUBSCRIBE option set to one or either of these prefixes (for\n instance, just `hash`); without doing so will result in no messages\n arriving. Please see `contrib/zmq/zmq_sub.py` for a working example.\n \n+The ZMQ_PUB socket's ZMQ_TCP_KEEPALIVE option is enabled. This means that\n+the underlying SO_KEEPALIVE option is enabled when using a TCP transport.\n+The effective TCP keepalive values are managed through the underlying\n+operating system configuration and must be configured prior to connection establishment.\n+\n+For example, when running on GNU/Linux, one might use the following\n+to lower the keepalive setting to 10 minutes:\n+\n+sudo sysctl -w net.ipv4.tcp_keepalive_time=600",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r233838885",
      "id" : 233838885,
      "in_reply_to_id" : 233813321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMzgzODg4NQ==",
      "original_commit_id" : "66609de4441c6e3c2d9ee56d7d5f94571a0510a3",
      "original_position" : 12,
      "path" : "doc/zmq.md",
      "position" : 12,
      "pull_request_review_id" : 175345154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-11-15T13:24:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/233838885",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r243158546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243158546"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe if it fails to set SO_KEEPALIVE, it should still continue with a warning?",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2018-12-20T05:19:18Z",
      "diff_hunk" : "@@ -86,6 +86,14 @@ bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n             return false;\n         }\n \n+        const int so_keepalive_option {1};\n+        rc = zmq_setsockopt(psocket, ZMQ_TCP_KEEPALIVE, &so_keepalive_option, sizeof(so_keepalive_option));\n+        if (rc != 0) {\n+            zmqError(\"Failed to set SO_KEEPALIVE\");\n+            zmq_close(psocket);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r243158546",
      "id" : 243158546,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MzE1ODU0Ng==",
      "original_commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "original_position" : 8,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 8,
      "pull_request_review_id" : 186851751,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2018-12-20T05:19:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243158546",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r246056773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246056773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "When does this fail?\r\nIf `SO_KEEPALIVE` is important, I don't think ignoring errors is a good idea. Not everyone continuously monitors the logs, and it might suddenly result in a return of issue #14687.\r\n",
      "commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "created_at" : "2019-01-08T16:12:56Z",
      "diff_hunk" : "@@ -86,6 +86,14 @@ bool CZMQAbstractPublishNotifier::Initialize(void *pcontext)\n             return false;\n         }\n \n+        const int so_keepalive_option {1};\n+        rc = zmq_setsockopt(psocket, ZMQ_TCP_KEEPALIVE, &so_keepalive_option, sizeof(so_keepalive_option));\n+        if (rc != 0) {\n+            zmqError(\"Failed to set SO_KEEPALIVE\");\n+            zmq_close(psocket);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14687#discussion_r246056773",
      "id" : 246056773,
      "in_reply_to_id" : 243158546,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA1Njc3Mw==",
      "original_commit_id" : "c276df775914e4e42993c76e172ef159e3b830d4",
      "original_position" : 8,
      "path" : "src/zmq/zmqpublishnotifier.cpp",
      "position" : 8,
      "pull_request_review_id" : 190319958,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14687",
      "updated_at" : "2019-01-08T16:12:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246056773",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
