[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18446#discussion_r399015871"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18446"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399015871"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Comment is outdated now.",
      "commit_id" : "dce155a0006219601269df47429484a472288320",
      "created_at" : "2020-03-27T03:29:50Z",
      "diff_hunk" : "@@ -31,7 +31,7 @@\n from test_framework.util import hex_str_to_bytes, assert_equal\n \n MIN_VERSION_SUPPORTED = 60001\n-MY_VERSION = 70014  # past bip-31 for ping/pong\n+MY_VERSION = 70016  # past bip-31 for ping/pong",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#discussion_r399015871",
      "id" : 399015871,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxNTg3MQ==",
      "original_commit_id" : "ce8488e33fdb4134fcec6fbabf6498c67c34ec97",
      "original_line" : 34,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/messages.py",
      "position" : null,
      "pull_request_review_id" : 382559221,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18446",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-01T00:52:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399015871",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18334 (test: Add basic test for BIP 37 by MarcoFalke)\n* #18261 (Erlay: bandwidth-efficient transaction relay protocol by naumenkogs)\n* #18242 (Add BIP324 encrypted p2p transport de-/serializer (only used in tests) by jonasschnelli)\n* #18238 (net_processing: Retry notfounds with more urgency by ajtowns)\n* #18038 (P2P: Mempool tracks locally submitted transactions to improve wallet privacy by amitiuttarwar)\n* #17785 (p2p: Unify Send and Receive protocol versions by hebasto)\n* #17303 (p2p: Stop relaying non-mempool txs, improve tx privacy slightly by MarcoFalke)\n* #16442 (Serve BIP 157 compact filters by jimpo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-03-27T06:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#issuecomment-604840685",
      "id" : 604840685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18446",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNDg0MDY4NQ==",
      "updated_at" : "2020-03-27T06:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604840685",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this isn't testing:\r\n\r\n * whether the node switches from sending TX invs to WTX invs when the wtxidrelay message is sent\r\n * whether we get a wtxidrelay message when we give a 70016 version, but not when we give a lower version\r\n * in either case, when we announce a TX inv, do we get a TX getdata back, and likewise for WTX?\r\n * when a tx is sent (not an INV but the actual tx) if it's an orphan, the missing parent's txid is requested as a TX not a WTX\r\n\r\nI've had a go at some of the changes: https://github.com/ajtowns/bitcoin/tree/202003-wtxidrelay-test but haven't made it so it actually sends the `wtxidrelay` message.",
      "created_at" : "2020-03-30T12:53:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#issuecomment-605980792",
      "id" : 605980792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18446",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTk4MDc5Mg==",
      "updated_at" : "2020-03-30T12:53:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605980792",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-03-30T20:30:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#issuecomment-606232173",
      "id" : 606232173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18446",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNjIzMjE3Mw==",
      "updated_at" : "2020-03-30T20:30:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606232173",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ajtowns Thank you, that is very helpful. My intuition was that many of these cases would be tested indirectly by upgrading the test framework but of course, explicit tests are always better and, as I have realized now, I also had not implemented it correctly. Your tests mainly did not pass because I had not implemented feature negotiation correctly. This is done now and I preserved your commit mostly so it is easier for you to review. If the test now does what you intended it to do then I can squash.\r\n\r\nOverview of changes:\r\n- Rebased\r\n- Fixed outdated comment\r\n- Added explicit test for wtxidrelay\r\n- Fixed wtxidrelay feature negotiation\r\n- Added @ajtowns code and with some further changes on top",
      "created_at" : "2020-04-01T01:00:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#issuecomment-606965841",
      "id" : 606965841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18446",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNjk2NTg0MQ==",
      "updated_at" : "2020-04-01T01:00:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/606965841",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18446#discussion_r401299366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18446"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/401299366"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "dce155a0006219601269df47429484a472288320",
      "created_at" : "2020-04-01T01:02:26Z",
      "diff_hunk" : "@@ -31,7 +31,7 @@\n from test_framework.util import hex_str_to_bytes, assert_equal\n \n MIN_VERSION_SUPPORTED = 60001\n-MY_VERSION = 70014  # past bip-31 for ping/pong\n+MY_VERSION = 70016  # past bip-31 for ping/pong",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18446#discussion_r401299366",
      "id" : 401299366,
      "in_reply_to_id" : 399015871,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI5OTM2Ng==",
      "original_commit_id" : "ce8488e33fdb4134fcec6fbabf6498c67c34ec97",
      "original_line" : 34,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/messages.py",
      "position" : null,
      "pull_request_review_id" : 385202829,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18446",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-01T01:02:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/401299366",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
