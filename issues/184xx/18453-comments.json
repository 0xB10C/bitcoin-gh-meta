[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-03-28T10:03:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605423211",
      "id" : 605423211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQyMzIxMQ==",
      "updated_at" : "2020-03-28T10:03:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605423211",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Adds one more call to `getinfo`. Under the hood, it loads the same structures `GetBalance().m_mine_trusted`. Not efficient, but since performance is acceptable, I think it's worth the change to prevent from future issues and allows stripping down `getwalletinfo`\r\n\r\nutACK f73ace05f2e67917e12026f0c69aec0e5b043366",
      "created_at" : "2020-03-28T10:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605423822",
      "id" : 605423822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQyMzgyMg==",
      "updated_at" : "2020-03-28T10:09:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605423822",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What would make me really happy, when you're making changes here anyway, is implementing point 2 from  #17314: show balance per wallet. This is much more useful in the multi-wallet case.\r\n",
      "created_at" : "2020-03-28T11:05:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605431806",
      "id" : 605431806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQzMTgwNg==",
      "updated_at" : "2020-03-28T11:05:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605431806",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nAgree in making @laanwj happy. The change requires a `listwallets` call before the batch.",
      "created_at" : "2020-03-28T11:14:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605432502",
      "id" : 605432502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQzMjUwMg==",
      "updated_at" : "2020-03-28T11:14:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605432502",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Good idea, will do.",
      "created_at" : "2020-03-28T11:14:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605432525",
      "id" : 605432525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQzMjUyNQ==",
      "updated_at" : "2020-03-28T11:14:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605432525",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The change requires a listwallets call before the batch\r\n\r\n~~I don't think that's necessary, `getbalances` will already retrieve the balances for all currently active wallets, which is what I mean, It doesn't need to list inactive ones in the datadir IMO.~~\r\nOh this is not true, I'm confused apparently.",
      "created_at" : "2020-03-28T11:19:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605433097",
      "id" : 605433097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTQzMzA5Nw==",
      "updated_at" : "2020-03-28T11:20:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605433097",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Something like this? (getbalances version)\r\n```json\r\n$ bitcoin-cli -getinfo -regtest\r\n{\r\n  \"version\": 199900,\r\n  \"blocks\": 15599,\r\n  \"headers\": 15599,\r\n  \"verificationprogress\": 1,\r\n  \"timeoffset\": 0,\r\n  \"connections\": 0,\r\n  \"proxy\": \"\",\r\n  \"difficulty\": 4.656542373906925e-10,\r\n  \"chain\": \"regtest\",\r\n  \"balances\": [\r\n    {\r\n      \"\": {\r\n        \"mine\": {\r\n          \"trusted\": 0.00001000,\r\n          \"untrusted_pending\": 0.00000000,\r\n          \"immature\": 0.00000000\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"encrypted\": {\r\n        \"mine\": {\r\n          \"trusted\": 0.00003500,\r\n          \"untrusted_pending\": 0.00000000,\r\n          \"immature\": 0.00000000\r\n        }\r\n      }\r\n    },\r\n  ],\r\n  \"relayfee\": 0.00001000\r\n}\r\n```\r\nor like? (mine.trusted balances only)\r\n```json\r\n$ bitcoin-cli -getinfo -regtest\r\n{\r\n  \"version\": 199900,\r\n  \"blocks\": 15599,\r\n  \"headers\": 15599,\r\n  \"verificationprogress\": 1,\r\n  \"timeoffset\": 0,\r\n  \"connections\": 0,\r\n  \"proxy\": \"\",\r\n  \"difficulty\": 4.656542373906925e-10,\r\n  \"chain\": \"regtest\",\r\n  \"balances\": [\r\n    {\r\n      \"name\": \"\",\r\n      \"amount\": 0.00001000\r\n    },\r\n    {\r\n      \"name\": \"encrypted\",\r\n      \"amount\": 0.00003500\r\n    }\r\n  ],\r\n  \"relayfee\": 0.00001000\r\n}\r\n```",
      "created_at" : "2020-03-28T21:27:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605521801",
      "id" : 605521801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTUyMTgwMQ==",
      "updated_at" : "2020-03-28T21:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605521801",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's best if `-getinfo` fits on a single screen, so I'd prefer a really condensed form, for ex.\r\n```json\r\n{\r\n  \"version\": 199900,\r\n  \"blocks\": 15599,\r\n  \"headers\": 15599,\r\n  \"verificationprogress\": 1,\r\n  \"timeoffset\": 0,\r\n  \"connections\": 0,\r\n  \"proxy\": \"\",\r\n  \"difficulty\": 4.656542373906925e-10,\r\n  \"chain\": \"regtest\",\r\n  \"balances\": {\r\n    \"\": 0.00001000,\r\n    \"encrypted\": 0.00003500,\r\n  },\r\n  \"relayfee\": 0.00001000\r\n}\r\n```\r\n",
      "created_at" : "2020-03-28T23:05:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605531404",
      "id" : 605531404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTUzMTQwNA==",
      "updated_at" : "2020-03-28T23:05:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605531404",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It's best if `-getinfo` fits on a single screen, so I'd prefer a really condensed form\r\n\r\nPerfect -- thanks :+1: ",
      "created_at" : "2020-03-28T23:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605532924",
      "id" : 605532924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTUzMjkyNA==",
      "updated_at" : "2020-03-28T23:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605532924",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Done. If this approach is ok, I'll add tests for the new call.",
      "created_at" : "2020-03-29T01:37:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605544002",
      "id" : 605544002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTU0NDAwMg==",
      "updated_at" : "2020-03-29T01:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605544002",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Why not iterate on the cli?",
      "created_at" : "2020-03-29T01:41:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605544326",
      "id" : 605544326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTU0NDMyNg==",
      "updated_at" : "2020-03-29T01:41:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605544326",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I could be wrong, but this seemed cleaner, and I think we'll ultimately want either an rpc like this or allow passing a multi bool to getbalance or getbalances to do the same.",
      "created_at" : "2020-03-29T01:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605545393",
      "id" : 605545393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTU0NTM5Mw==",
      "updated_at" : "2020-03-29T01:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605545393",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure about the approach TBH. I'd rather see the cli use existing calls.\r\n\r\nThe new RPC `getwalletbalances` is the first to use multiple wallets and could lead to more of multiwallet RPC. For instance, `getaddressesbylabel` could return all address of all loaded wallets.",
      "created_at" : "2020-03-29T14:49:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605648343",
      "id" : 605648343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTY0ODM0Mw==",
      "updated_at" : "2020-03-29T14:49:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605648343",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This works, but I understand. Interested in feedback. Note that for now `getwalletbalances` doesn't show up in the help. Rebased to add tests for `getwalletbalances` in the wallet_multiwallet tests (which also improves the existing tests).",
      "created_at" : "2020-03-29T15:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-605651547",
      "id" : 605651547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTY1MTU0Nw==",
      "updated_at" : "2020-04-01T22:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605651547",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not opposed to having \"across-all-wallets\" RPCs, but perhaps it's worth making them visually distinct? How about \"getallwalletbalances\" or \"allwalletsgetbalance\"?",
      "created_at" : "2020-04-01T23:15:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-607535231",
      "id" : 607535231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzUzNTIzMQ==",
      "updated_at" : "2020-04-01T23:15:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607535231",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes. I was debating internally about \"listbalances\"...",
      "created_at" : "2020-04-01T23:23:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-607537512",
      "id" : 607537512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNzUzNzUxMg==",
      "updated_at" : "2020-04-01T23:23:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/607537512",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK a5ea5717400d8f31ba210df5705eb6c1470da307\r\n\r\nReviewed code and did some light testing locally.\r\n\r\nI think multi wallet RPCs will be useful for a lot of users. For naming I don't have strong feelings but since \"multi wallet\" is already the term most frequently used for this scenario verbally, I think I would prefer if that gets used if people think the distinction is necessary. So I would prefer something like \"(get)multiwalletbalances\" to something like listbalances or something with allwallets.",
      "created_at" : "2020-04-03T17:36:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-608569531",
      "id" : 608569531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwODU2OTUzMQ==",
      "updated_at" : "2020-04-03T17:36:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/608569531",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r403551614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/403551614"
         }
      },
      "author_association" : "NONE",
      "body" : "Super nit (please feel free to ignore): Would it make sense to use `ID_WALLETBALANCES` in place of `ID_BALANCESINFO` to preserve the `getXXX` -> `ID_XXX` naming scheme?",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-04T22:41:26Z",
      "diff_hunk" : "@@ -239,16 +240,17 @@ class GetinfoRequestHandler: public BaseRequestHandler\n         result.push_back(JSONRPCRequestObj(\"getnetworkinfo\", NullUniValue, ID_NETWORKINFO));\n         result.push_back(JSONRPCRequestObj(\"getblockchaininfo\", NullUniValue, ID_BLOCKCHAININFO));\n         result.push_back(JSONRPCRequestObj(\"getwalletinfo\", NullUniValue, ID_WALLETINFO));\n+        result.push_back(JSONRPCRequestObj(\"getwalletbalances\", NullUniValue, ID_BALANCESINFO));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r403551614",
      "id" : 403551614,
      "line" : 243,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzU1MTYxNA==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 243,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 12,
      "pull_request_review_id" : 387764657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-04T22:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/403551614",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/unbiasedmoose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unbiasedmoose/followers",
         "following_url" : "https://api.github.com/users/unbiasedmoose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unbiasedmoose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unbiasedmoose",
         "id" : 63171930,
         "login" : "unbiasedmoose",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/unbiasedmoose/orgs",
         "received_events_url" : "https://api.github.com/users/unbiasedmoose/received_events",
         "repos_url" : "https://api.github.com/users/unbiasedmoose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unbiasedmoose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unbiasedmoose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unbiasedmoose"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r403551851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/403551851"
         }
      },
      "author_association" : "NONE",
      "body" : "Super nit (please feel free to ignore): Would it make sense to define a variable like `extern_wallet` next to where `wallet_names` is defined, instead of relying on the sort order of the path names?",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-04T22:42:05Z",
      "diff_hunk" : "@@ -173,17 +176,34 @@ def wallet_file(name):\n \n         w1, w2, w3, w4, *_ = wallets\n         node.generatetoaddress(nblocks=101, address=w1.getnewaddress())\n-        assert_equal(w1.getbalance(), 100)\n-        assert_equal(w2.getbalance(), 0)\n-        assert_equal(w3.getbalance(), 0)\n+        wallet_name = sorted(wallet_names)[1]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r403551851",
      "id" : 403551851,
      "line" : 179,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzU1MTg1MQ==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 179,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 24,
      "pull_request_review_id" : 387764657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-04T22:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/403551851",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/unbiasedmoose/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unbiasedmoose/followers",
         "following_url" : "https://api.github.com/users/unbiasedmoose/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unbiasedmoose/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unbiasedmoose",
         "id" : 63171930,
         "login" : "unbiasedmoose",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/unbiasedmoose/orgs",
         "received_events_url" : "https://api.github.com/users/unbiasedmoose/received_events",
         "repos_url" : "https://api.github.com/users/unbiasedmoose/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unbiasedmoose/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unbiasedmoose/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unbiasedmoose"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-05T20:03:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#issuecomment-609474114",
      "id" : 609474114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwOTQ3NDExNA==",
      "updated_at" : "2020-04-05T20:03:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/609474114",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404921647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404921647"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe use `batch_in.size()` instead of `4`?",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T15:55:08Z",
      "diff_hunk" : "@@ -239,16 +240,17 @@ class GetinfoRequestHandler: public BaseRequestHandler\n         result.push_back(JSONRPCRequestObj(\"getnetworkinfo\", NullUniValue, ID_NETWORKINFO));\n         result.push_back(JSONRPCRequestObj(\"getblockchaininfo\", NullUniValue, ID_BLOCKCHAININFO));\n         result.push_back(JSONRPCRequestObj(\"getwalletinfo\", NullUniValue, ID_WALLETINFO));\n+        result.push_back(JSONRPCRequestObj(\"getwalletbalances\", NullUniValue, ID_BALANCESINFO));\n         return result;\n     }\n \n     /** Collect values from the batch and form a simulated `getinfo` reply. */\n     UniValue ProcessReply(const UniValue &batch_in) override\n     {\n         UniValue result(UniValue::VOBJ);\n-        std::vector<UniValue> batch = JSONRPCProcessBatchReply(batch_in, 3);\n-        // Errors in getnetworkinfo() and getblockchaininfo() are fatal, pass them on\n-        // getwalletinfo() is allowed to fail in case there is no wallet.\n+        std::vector<UniValue> batch = JSONRPCProcessBatchReply(batch_in, 4);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404921647",
      "id" : 404921647,
      "line" : 251,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDkyMTY0Nw==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 251,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 23,
      "pull_request_review_id" : 389257776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T20:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404921647",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404944986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404944986"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for the feedback. The naming of `getwalletbalances` may change but will keep this in mind. ",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T16:26:53Z",
      "diff_hunk" : "@@ -239,16 +240,17 @@ class GetinfoRequestHandler: public BaseRequestHandler\n         result.push_back(JSONRPCRequestObj(\"getnetworkinfo\", NullUniValue, ID_NETWORKINFO));\n         result.push_back(JSONRPCRequestObj(\"getblockchaininfo\", NullUniValue, ID_BLOCKCHAININFO));\n         result.push_back(JSONRPCRequestObj(\"getwalletinfo\", NullUniValue, ID_WALLETINFO));\n+        result.push_back(JSONRPCRequestObj(\"getwalletbalances\", NullUniValue, ID_BALANCESINFO));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404944986",
      "id" : 404944986,
      "in_reply_to_id" : 403551614,
      "line" : 243,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk0NDk4Ng==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 243,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 12,
      "pull_request_review_id" : 389287188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T16:26:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404944986",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404946153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404946153"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not a bad idea; will look at this if I have to retouch the PR.",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T16:28:24Z",
      "diff_hunk" : "@@ -173,17 +176,34 @@ def wallet_file(name):\n \n         w1, w2, w3, w4, *_ = wallets\n         node.generatetoaddress(nblocks=101, address=w1.getnewaddress())\n-        assert_equal(w1.getbalance(), 100)\n-        assert_equal(w2.getbalance(), 0)\n-        assert_equal(w3.getbalance(), 0)\n+        wallet_name = sorted(wallet_names)[1]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r404946153",
      "id" : 404946153,
      "in_reply_to_id" : 403551851,
      "line" : 179,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk0NjE1Mw==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 179,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 24,
      "pull_request_review_id" : 389288471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T16:28:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/404946153",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405048400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405048400"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "These locks are [acquired](https://github.com/bitcoin/bitcoin/blob/1b151e3ffce7c1a2ee46bf280cc1d96775d1f91e/src/wallet/wallet.cpp#L2037-L2038) inside `GetBalance()`, so they can be removed from here?\r\n\r\nA wallet's chain will never change and, I assume, all wallets' chains are the same. That is - we are operating on one chain here, for all wallets. Can we / should we lock that chain before the for-loop in order to get a consistent view (i.e. avoid getting one wallet's balance as of height H and another wallet's balance as of height H+1)?",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T19:10:13Z",
      "diff_hunk" : "@@ -714,6 +714,28 @@ static UniValue getreceivedbylabel(const JSONRPCRequest& request)\n }\n \n \n+/**\n+ * Called by CLI -getinfo to fetch multiwallet balances (mine.trusted).\n+ */\n+static UniValue getwalletbalances(const JSONRPCRequest& request)\n+{\n+    UniValue obj{UniValue::VOBJ};\n+    for (const std::shared_ptr<CWallet>& rpc_wallet : GetWallets()) {\n+        if (!EnsureWalletIsAvailable(rpc_wallet.get(), request.fHelp)) {\n+            return NullUniValue;\n+        }\n+        CWallet& wallet = *rpc_wallet;\n+        wallet.BlockUntilSyncedToCurrentChain();\n+\n+        auto locked_chain = wallet.chain().lock();\n+        LOCK(wallet.cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405048400",
      "id" : 405048400,
      "line" : 731,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA0ODQwMA==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 731,
      "original_position" : 18,
      "original_start_line" : 730,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 18,
      "pull_request_review_id" : 389257776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : 730,
      "start_side" : "RIGHT",
      "updated_at" : "2020-04-07T20:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405048400",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405055116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405055116"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The `GetBalance()` call without arguments will default to `GetBalance(min_depth=0)`, i.e. also counting unconfirmed transactions. Is this intended?\r\n\r\n`wallet.GetName()` produces something like `\"\": 0.00000000` for the default wallet. Would [GetDisplayName()](https://github.com/bitcoin/bitcoin/blob/1b151e3ffce7c1a2ee46bf280cc1d96775d1f91e/src/wallet/wallet.h#L1167) be more suitable here? It would produce `\"[default wallet]\": 0.00000000`.",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T19:22:06Z",
      "diff_hunk" : "@@ -714,6 +714,28 @@ static UniValue getreceivedbylabel(const JSONRPCRequest& request)\n }\n \n \n+/**\n+ * Called by CLI -getinfo to fetch multiwallet balances (mine.trusted).\n+ */\n+static UniValue getwalletbalances(const JSONRPCRequest& request)\n+{\n+    UniValue obj{UniValue::VOBJ};\n+    for (const std::shared_ptr<CWallet>& rpc_wallet : GetWallets()) {\n+        if (!EnsureWalletIsAvailable(rpc_wallet.get(), request.fHelp)) {\n+            return NullUniValue;\n+        }\n+        CWallet& wallet = *rpc_wallet;\n+        wallet.BlockUntilSyncedToCurrentChain();\n+\n+        auto locked_chain = wallet.chain().lock();\n+        LOCK(wallet.cs_wallet);\n+\n+        obj.pushKV(wallet.GetName(), ValueFromAmount(wallet.GetBalance().m_mine_trusted));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405055116",
      "id" : 405055116,
      "line" : 733,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA1NTExNg==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 733,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 389257776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T20:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405055116",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405067788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405067788"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should we be doing any of this if `request.fHelp` is `true`? It happens when `bitcoin-cli help` is executed even though none of its output contains `getwalletbalances` or any balances.",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T19:45:31Z",
      "diff_hunk" : "@@ -714,6 +714,28 @@ static UniValue getreceivedbylabel(const JSONRPCRequest& request)\n }\n \n \n+/**\n+ * Called by CLI -getinfo to fetch multiwallet balances (mine.trusted).\n+ */\n+static UniValue getwalletbalances(const JSONRPCRequest& request)\n+{\n+    UniValue obj{UniValue::VOBJ};\n+    for (const std::shared_ptr<CWallet>& rpc_wallet : GetWallets()) {\n+        if (!EnsureWalletIsAvailable(rpc_wallet.get(), request.fHelp)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405067788",
      "id" : 405067788,
      "line" : 724,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2Nzc4OA==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 724,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 11,
      "pull_request_review_id" : 389257776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T20:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405067788",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405070095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405070095"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Do you plan to document this before merge? If \"no\", then are there other undocumented commands?",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T19:49:38Z",
      "diff_hunk" : "@@ -4264,6 +4286,7 @@ static const CRPCCommand commands[] =\n     { \"wallet\",             \"encryptwallet\",                    &encryptwallet,                 {\"passphrase\"} },\n     { \"wallet\",             \"getaddressesbylabel\",              &getaddressesbylabel,           {\"label\"} },\n     { \"wallet\",             \"getaddressinfo\",                   &getaddressinfo,                {\"address\"} },\n+    { \"wallet\",             \"getwalletbalances\",                &getwalletbalances,             {} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405070095",
      "id" : 405070095,
      "line" : 4289,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA3MDA5NQ==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 4289,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 33,
      "pull_request_review_id" : 389257776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T20:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405070095",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405110606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405110606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If the consensus is to add a public RPC, yes, it should have documentation.",
      "commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "created_at" : "2020-04-07T21:02:04Z",
      "diff_hunk" : "@@ -4264,6 +4286,7 @@ static const CRPCCommand commands[] =\n     { \"wallet\",             \"encryptwallet\",                    &encryptwallet,                 {\"passphrase\"} },\n     { \"wallet\",             \"getaddressesbylabel\",              &getaddressesbylabel,           {\"label\"} },\n     { \"wallet\",             \"getaddressinfo\",                   &getaddressinfo,                {\"address\"} },\n+    { \"wallet\",             \"getwalletbalances\",                &getwalletbalances,             {} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18453#discussion_r405110606",
      "id" : 405110606,
      "in_reply_to_id" : 405070095,
      "line" : 4289,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMDYwNg==",
      "original_commit_id" : "a5ea5717400d8f31ba210df5705eb6c1470da307",
      "original_line" : 4289,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 33,
      "pull_request_review_id" : 389487616,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18453",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-07T21:02:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405110606",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
