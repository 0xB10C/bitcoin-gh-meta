[
   {
      "author_association" : "MEMBER",
      "body" : "See also: https://bugs.gentoo.org/715268",
      "created_at" : "2020-03-29T15:19:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18465#issuecomment-605652930",
      "id" : 605652930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18465",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTY1MjkzMA==",
      "updated_at" : "2020-03-29T15:19:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605652930",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It could be moved to bitcoin_server (`src/rpc/url` or so)?",
      "created_at" : "2020-03-29T15:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18465#issuecomment-605655111",
      "id" : 605655111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18465",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTY1NTExMQ==",
      "updated_at" : "2020-03-29T15:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605655111",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I suspect that will make problems for `bitcoin-wallet` tool",
      "created_at" : "2020-03-30T00:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18465#issuecomment-605725824",
      "id" : 605725824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18465",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTcyNTgyNA==",
      "updated_at" : "2020-03-30T00:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605725824",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I can reproduce this on ubuntu with:\r\n\r\n```bash\r\nsudo apt remove libevent-dev\r\n./configure --disable-util-cli --disable-util-wallet --with-daemon=no --with-gui=no --disable-tests --disable-bench\r\nmake\r\n```\r\n\r\nExpected behavior: successful build of `bitcoin-tx`\r\n\r\nActual behavior: compile error\r\n\r\n```\r\n  CXX      util/libbitcoin_util_a-url.o\r\nutil/url.cpp:7:10: fatal error: event2/http.h: No such file or directory\r\n #include <event2/http.h>\r\n          ^~~~~~~~~~~~~~~\r\n```\r\n\r\nSuggested fix:\r\n\r\n```diff\r\ndiff --git a/configure.ac b/configure.ac\r\nindex 1f85dd3a99d..b43a29c7fb8 100644\r\n--- a/configure.ac\r\n+++ b/configure.ac\r\n@@ -1255,7 +1255,7 @@ if test x$use_pkgconfig = xyes; then\r\n         BITCOIN_QT_CHECK([PKG_CHECK_MODULES([QR], [libqrencode], [have_qrencode=yes], [have_qrencode=no])])\r\n       fi\r\n       if test x$build_bitcoin_cli$build_bitcoind$bitcoin_enable_qt$use_tests$use_bench != xnonononono; then\r\n-        PKG_CHECK_MODULES([EVENT], [libevent],, [AC_MSG_ERROR(libevent not found.)])\r\n+        PKG_CHECK_MODULES([EVENT], [libevent], [use_libevent=yes], [AC_MSG_ERROR(libevent not found.)])\r\n         if test x$TARGET_OS != xwindows; then\r\n           PKG_CHECK_MODULES([EVENT_PTHREADS], [libevent_pthreads],, [AC_MSG_ERROR(libevent_pthreads not found.)])\r\n         fi\r\n@@ -1275,7 +1275,7 @@ if test x$use_pkgconfig = xyes; then\r\n else\r\n \r\n   if test x$build_bitcoin_cli$build_bitcoind$bitcoin_enable_qt$use_tests$use_bench != xnonononono; then\r\n-    AC_CHECK_HEADER([event2/event.h],, AC_MSG_ERROR(libevent headers missing),)\r\n+    AC_CHECK_HEADER([event2/event.h], [use_libevent=yes], AC_MSG_ERROR(libevent headers missing),)\r\n     AC_CHECK_LIB([event],[main],EVENT_LIBS=-levent,AC_MSG_ERROR(libevent missing))\r\n     if test x$TARGET_OS != xwindows; then\r\n       AC_CHECK_LIB([event_pthreads],[main],EVENT_PTHREADS_LIBS=-levent_pthreads,AC_MSG_ERROR(libevent_pthreads missing))\r\n@@ -1529,6 +1529,7 @@ AM_CONDITIONAL([ENABLE_QT_TESTS],[test x$BUILD_TEST_QT = xyes])\r\n AM_CONDITIONAL([ENABLE_BENCH],[test x$use_bench = xyes])\r\n AM_CONDITIONAL([USE_QRCODE], [test x$use_qr = xyes])\r\n AM_CONDITIONAL([USE_LCOV],[test x$use_lcov = xyes])\r\n+AM_CONDITIONAL([USE_LIBEVENT],[test x$use_libevent = xyes])\r\n AM_CONDITIONAL([GLIBC_BACK_COMPAT],[test x$use_glibc_compat = xyes])\r\n AM_CONDITIONAL([HARDEN],[test x$use_hardening = xyes])\r\n AM_CONDITIONAL([ENABLE_SSE42],[test x$enable_sse42 = xyes])\r\ndiff --git a/src/Makefile.am b/src/Makefile.am\r\nindex 8c927f330b8..c38a87a1e4b 100644\r\n--- a/src/Makefile.am\r\n+++ b/src/Makefile.am\r\n@@ -523,9 +523,12 @@ libbitcoin_util_a_SOURCES = \\\r\n   util/strencodings.cpp \\\r\n   util/string.cpp \\\r\n   util/time.cpp \\\r\n-  util/url.cpp \\\r\n   $(BITCOIN_CORE_H)\r\n \r\n+if USE_LIBEVENT\r\n+libbitcoin_util_a_SOURCES += util/url.cpp\r\n+endif\r\n+\r\n if GLIBC_BACK_COMPAT\r\n libbitcoin_util_a_SOURCES += compat/glibc_compat.cpp\r\n AM_LDFLAGS += $(COMPAT_LDFLAGS)\r\n```\r\n\r\n\r\n",
      "created_at" : "2020-03-30T09:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18465#issuecomment-605891317",
      "id" : 605891317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18465",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYwNTg5MTMxNw==",
      "updated_at" : "2020-03-30T09:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605891317",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
