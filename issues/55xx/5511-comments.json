[
   {
      "body" : "oh erp. Yea, good find.\r\n",
      "created_at" : "2014-12-19T16:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-67662341",
      "id" : 67662341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2014-12-19T16:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67662341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I don't believe that chrnological order (really nOrderPos order in your patch) always means dependency order, however.  Do you have a way to reproduce the behavior you're fixing?",
      "created_at" : "2014-12-19T18:33:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-67677577",
      "id" : 67677577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2014-12-19T18:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67677577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I *assumed* that transactions are not added out of order to the wallet, because it appears as if they have to pass certain checks to be added to the wallet in the first place, and that nOrderPos reflects correct dependency order. If this is questionable, then this approach might not cover all situations.\r\n\r\nA simple test to check, if a client adds unconfirmed transactions back to the memory pool in correct order:\r\n\r\n1. Send n transactions\r\n2. Node should have n transactions in the mempool\r\n3. Shutdown and restart client\r\n4. Node should reaccept all transactions and have n transactions in the mempool\r\n\r\nAs RPC test: https://gist.github.com/dexX7/06df91d1a7f99190d8d6",
      "created_at" : "2014-12-20T07:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-67728430",
      "id" : 67728430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2014-12-20T07:51:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/67728430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "I'd say that transactions generated by the wallet itself, which are the ones useful to insert into the mempool, are always in dependency order by nOrderPos, so this makes sense.\r\n",
      "created_at" : "2015-01-29T11:54:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-72012586",
      "id" : 72012586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2015-01-29T11:54:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72012586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@zander: I did not move the lock, but I believe both should work.\r\n\r\nI reworded the comment from \"chronological order\" to \"based on initial wallet insertion order\". Hope this is more accurate.",
      "created_at" : "2015-02-11T03:42:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-73829865",
      "id" : 73829865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2015-02-11T03:42:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73829865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "Rebased (`src/wallet.cpp -> src/wallet/wallet.cpp`).\r\n\r\nTested with the above linked test a few hundred times, although I can't say in which case `nOrderPos` might actually not reflect dependency order, and the test only shows it works well under those specific test conditions. It can be used to show the current failure though: [sample log output and comparison](https://gist.github.com/dexX7/9f6f33444d8df1de63a5)",
      "created_at" : "2015-03-21T13:50:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-84341354",
      "id" : 84341354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2015-03-21T13:50:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84341354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=3",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-03-24T12:57:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5511#issuecomment-85485227",
      "id" : 85485227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5511",
      "updated_at" : "2015-03-24T12:57:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85485227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
