[
   {
      "body" : "Added a -relaypriority option to disable the priority requirement, and use it as a workaround in pulltester (which is mainly intended to test block validity rules anyway).",
      "created_at" : "2014-12-24T15:35:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68058985",
      "id" : 68058985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-24T15:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68058985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2014-12-25T08:36:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68093966",
      "id" : 68093966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-25T08:36:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68093966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Thinking of this, was the reason for including too-low-priority transactions in the mempool is that they may gain a sufficient priority over time? \r\n\r\nIt has always been possible to submit transactions that would not immediately be mined, but would likely be included in a block eventually.\r\n\r\nThis change is for the better, but rejecting transactions that cannot be mined the next block changes this behavior. Maybe \"in the next N blocks\" would be a better criterion?\r\n(though this change only applies to free transactions, of course, so maybe this concern is ungrounded...)",
      "created_at" : "2014-12-27T04:19:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68168205",
      "id" : 68168205,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-27T04:19:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68168205",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I had the same thought about increasing 1 to N. Though it does add a lot more state-space you can consume with chains of unconfirmed.  Really it's ungrounded for another reason, they're already very unreliable because of the limiter.\r\n\r\nTo some extent not relaying and not mempooling a very low priority transaction is doing the user a favour because it's easier to get a conflict mined.\r\n\r\nACK.  (I'd also be okay with upping 1, but I don't think it's needed)",
      "created_at" : "2014-12-27T07:52:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68171855",
      "id" : 68171855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-27T07:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68171855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "That this adds another error() which shows up as a frequent user complaint generating \"ERROR\" in the logs might be a bit concerning.",
      "created_at" : "2014-12-27T09:17:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68173440",
      "id" : 68173440,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-27T09:17:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68173440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Updated, and removed the error message.\r\n\r\nI think we should generally avoid reserve ERROR for actually failed user requests or necessary behaviour. Not for normal network activity.",
      "created_at" : "2014-12-30T01:04:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68320723",
      "id" : 68320723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-30T01:04:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68320723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "(still) ACK.",
      "created_at" : "2014-12-30T04:41:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68329792",
      "id" : 68329792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2014-12-30T04:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68329792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-01-03T04:40:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68583231",
      "id" : 68583231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-03T04:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68583231",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "ACK\r\n\r\nNit: Considering that the error is ```REJECT_INSUFFICIENTFEE```, I think the description of \"rate limited free transaction\" seems inadequate.  Perhaps \"insufficient fee for low priority\" or somesuch.\r\n",
      "created_at" : "2015-01-06T15:16:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68877795",
      "id" : 68877795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-06T15:16:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68877795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik well we're limited to the existing reject codes (and I don't really care much about those; I consider REJECT_INSUFFICIENTFEE to generally mean 'rejected by local relay policy', with the string clarifying the actual reason). That \"rate limited free transaction\" means: your transaction had a too low fee to be considered as a non-zero-fee one, so it is considered as a free one, but we've exceeded our throttler protection for such transactions. \"insufficient fee for low priority\" seems entirely wrong; more fee would make the priority irrelevant, the priority is not the problem, and the reason for rejection is rate limiting...",
      "created_at" : "2015-01-06T15:21:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68878531",
      "id" : 68878531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-06T15:21:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68878531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Better clarification string suggestions welcome of course.",
      "created_at" : "2015-01-06T15:24:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68878883",
      "id" : 68878883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-06T15:24:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68878883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Well the reason for rejection is ultimately low fee. The error constant does reflect that, but the string does not.",
      "created_at" : "2015-01-06T15:24:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68878923",
      "id" : 68878923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-06T15:24:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68878923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Sure, all 3 checks that can result in failure to relay here are ultimately \"too low fee\", as more fee would make the transaction not subject to the free transaction policy. A more specific string doesn't hurt though.\r\n\r\nI still don't understand \"insufficient fee for low priority\" - if the fee was more, the priority wouldn't matter.\r\n\r\nMaybe \"rate-limited low-fee transaction\"?",
      "created_at" : "2015-01-06T15:27:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-68879319",
      "id" : 68879319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-06T15:27:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68879319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "As this is a blocker for 0.10, I'm not going to hold merging this up on discussion about the error message, if you have a better suggestion you can change it later.",
      "created_at" : "2015-01-07T12:00:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69013017",
      "id" : 69013017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-07T12:00:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69013017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5535#discussion_r22587121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5535"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22587121"
         }
      },
      "body" : "Also we choose once to sort the options in alphabetical order (at least) this is now also not true anymore -_-.",
      "commit_id" : "1c52aad540ec1370db60fd68fc3485413e3cb8e1",
      "created_at" : "2015-01-07T14:10:23Z",
      "diff_hunk" : "@@ -324,6 +324,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     if (GetBoolArg(\"-help-debug\", false))\n     {\n         strUsage += \"  -limitfreerelay=<n>    \" + strprintf(_(\"Continuously rate-limit free transactions to <n>*1000 bytes per minute (default:%u)\"), 15) + \"\\n\";\n+        strUsage += \"  -relaypriority         \" + strprintf(_(\"Require high priority for relaying free or low-fee transactions (default:%u)\"), 1) + \"\\n\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#discussion_r22587121",
      "id" : 22587121,
      "original_commit_id" : "1c52aad540ec1370db60fd68fc3485413e3cb8e1",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5535",
      "updated_at" : "2015-01-07T14:10:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22587121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "This change will almost certainly break existing software that generates free transactions, who don't know about this new rule. The assumption that you can generate a free transaction and it will get mined at some point is one that has been valid since the start of Bitcoin. \r\n\r\nI don't see any measurements of how much breakage this will cause (the cost), or what the rationale is, what the benefits are or why this is being changed with no discussion anywhere. The commit message provides no enlightenment - why is a backwards incompatible policy change being inserted between release candidate 1 and release candidate 2? Isn't the point of release candidates that only critical bug fixes get included until release?",
      "created_at" : "2015-01-12T12:59:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69565961",
      "id" : 69565961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-12T12:59:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69565961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn eh? Current versions of bitcoind will similarly neglect to relay low priority -- spam -- transactions.",
      "created_at" : "2015-01-12T13:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69566314",
      "id" : 69566314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-12T13:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69566314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "That's what this change does. Previously there was a rate limiter and size constraints only. You could post a low priority transaction and it'd hang around until it reached a high enough priority.\r\n\r\nThe idea here is that it gets a little bit closer to a size limited mempool. But you can still fill up memory by attaching a fee. 1 BTC buys you about 100mb of mempool space. Adding another special case for free transactions doesn't solve the root concern, it just forces a (small?) financial commitment to exploiting it. Given that the size of the mempool can be easily measured these days (it's in the rpc) it'd be nicer if it worked differently -  if (mempool_size > flags[-mempoollimit] && priority < lowest_priority_tx) { drop }\r\n\r\nFree transactions are already pretty useless because of the rate limiter and arbitrary amount of block space allocated to them, but ideally we'd be trying to slowly unify them rather than adding more ways they are special.",
      "created_at" : "2015-01-12T14:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69581279",
      "id" : 69581279,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-12T14:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69581279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "> Previously there was a rate limiter and size constraints only. You could post a low priority transaction and it'd hang around until it reached a high enough priority\r\n\r\nPreviously the behavior was non-determinstic depending on where you hit the rate limiters. You'd announce something and it would have very poor propagation. The fact that it reached a few nodes would not help you if those nodes weren't miners since it's not like they'd send it again when rate limiters permitted it; worse-- it would hurt you, because any that did take the transaction would block your own retransmissions of the transaction through them to the peers behind them. \r\n\r\nYou can, of course, still continue to retransmit and the network will take the transaction once it has sufficient priority. The priority calculation is also deterministic, so you can make a much better estimate of where you stand with respect to that then guesses about a very small rate limititer on far away nodes. But even if you don't know; with that you wouldn't as much end up with your propagation thwarted when your immediate peers take it and it stops there.\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2015-01-12T15:05:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69582724",
      "id" : 69582724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-12T15:05:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69582724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yes, that's true. Perhaps the rate limiter can be removed then, as this new rule would supersede it.",
      "created_at" : "2015-01-12T15:25:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-69585995",
      "id" : 69585995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-12T15:25:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/69585995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "I ran a little study over the transactions my node received in the last 6 weeks of 2014.   There were 14,600 transactions that would have been rejected by this code,  on average about 1 transaction every 5 minutes.  But maybe of greater concern, 126 of these transactions (or about 3 a day) were for over 1000 BTC.   Transactions for that much value had to depend on inputs in the mempool to not immediately pass the priority test.   It makes me think though that we should broadcast this change a little louder.  Its not really called out in the release notes  and its important for other users of the network whose transactions might now get stuck as some of the nodes have upgraded and some haven't, which will also make it hard to rebroadcast with a fee. ",
      "created_at" : "2015-01-15T21:52:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70169123",
      "id" : 70169123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-15T21:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70169123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Alex, do you have a way to find out whether a higher limit (e.g. \"would\nconfirm in 6 blocks\" rather in 1 block) would have eliminated a significant\nnumber of these?",
      "created_at" : "2015-01-15T22:38:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70176107",
      "id" : 70176107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-15T22:38:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70176107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "So that it rejects some transactions is indeed expected (though I wasn't\nexpecting such numbers to be honest). The question is really whether that\nhad any effect on them confirming (would they have been rebroadcast, for\nexample).",
      "created_at" : "2015-01-15T22:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70177246",
      "id" : 70177246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-15T22:46:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70177246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I'm rerunning the analysis now to answer about 6 (or other block numbers).  But part of the problem is that sometimes (especially for higher value tx's) they depend on unconfirmed inputs and so may not increase in priority if you project a few blocks ahead.  \r\n\r\nMy concern was that if the network is a mix of upgraded and not, rebroadcasting might not work very well.   Does it matter whether you are rebroadcasting the exact same transaction (that now has priority) or a double spend that adds a fee in thinking about that? ",
      "created_at" : "2015-01-15T23:07:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70180155",
      "id" : 70180155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-15T23:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70180155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Projecting out to 6 blocks doesn't help, still 12,700 txs rejected, and 25 blocks is still 11,800.   Worse yet, it makes almost no difference to high value txs (of over 100 or 1000 BTC).   ",
      "created_at" : "2015-01-16T01:41:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70195810",
      "id" : 70195810,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T01:41:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70195810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos  These transactions are already subject to the rate limiter; which gives them very intermittent propagation (I frequently see the rate limiter being hit on my nodes). They're also not mined by default.  Fair enough to have a release note on it; I'm not sure if there is any reason for concern beyond that point.",
      "created_at" : "2015-01-16T01:47:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70196376",
      "id" : 70196376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T01:47:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70196376",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "A simpler way to address the underlying concern without breaking things was already proposed up thread. After receiving inserting a new transaction into the mem pool run:\r\n\r\nwhile (mempool_size > 100mb) {\r\n  drop lowest priority transaction;\r\n}\r\n\r\nWe know the mempool wasn't at excessive sizes during the period Alex analysed (otherwise we'd have noticed nodes falling over), so this change would have had no impact on the transactions that this change will break, whilst actually being a more direct fix. A rule like \"must confirm within N blocks\" is inherently indirect.\r\n\r\nI'd much prefer to see this change backed out (what is the point of release candidates if unanalysed breaking changes are put into them at the last minute). It could go into 0.10.1 as a matter of priority.",
      "created_at" : "2015-01-16T14:40:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70262248",
      "id" : 70262248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T14:40:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70262248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn as explained up thread: that fix causes problems by making the behavior less deterministic, and leaving you with things like no way to tell if the transaction is actually propagated, creates difficulty rebroadcasting, and incentives for people to flood the mempool to push transactions out of it.  It also doesn't address the relay / rate limiter capacity getting chewed up by very low priority transactions which will likely not confirm soon.\r\n\r\nI'm not sure why you're saying \"unanalyized\", I ran the code for 5 days with recording the transactions it rejected, and didn't see anything concerning, before ACKing above.  This is also software written almost a month ago.",
      "created_at" : "2015-01-16T14:45:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70262965",
      "id" : 70262965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T14:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70262965",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Alex's analysis provides data which quantifies the amount of breakage.\r\n\r\nI think the reason my proposed fix may *seem* less deterministic than this change, is that this change doesn't really address the underlying issue. For instance, can it be bypassed by just creating lots of free transactions that are all of sufficient priority to be mined in the next block? I think yes, so it's hard to have confidence it really fixes the problem, or actually as there is no quantification of the problem it's impossible to say either way. It may also interact oddly with changes made elsewhere, e.g. introducing new rules like the \"inputs are free\" rule could change the economics of bypassing this check.\r\n\r\nSo I feel it's much easier to have confidence in an actual test against the resource limit in question. It's much more direct and less likely to be subtly impacted by changes elsewhere. There can always be hard-coded minimums in place to let people with copies of the mempool make predictions about where in it they will fall.",
      "created_at" : "2015-01-16T15:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70267584",
      "id" : 70267584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T15:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70267584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "There needs to be a maximum mempool size *as well*. Let's not pretend it's one or the other.\r\n\r\nWhat is nice about this change, though, is that it gives immediate feedback to the sender that the transaction is rejected.",
      "created_at" : "2015-01-16T15:21:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70268386",
      "id" : 70268386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T15:21:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70268386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The problem this is addressing are two-fold possible to use capacity-- in the form of relay bandwidth, and mempool space-- on the entire network with no cost to the attacker. Both fees and priorities are cost; and because the existing ineffective protections (which are actually inconsistent with the public documentation about the behavior; see https://en.bitcoin.it/wiki/Transaction_fees) are non-deterministic and result in stuck transactions. Testing against mempool size does not achieve that end: At best it just changes the resource being contended with for a different one (slots in the finite space) and it's more non-deterministic.\r\n\r\n(technically this change also implies a maximum size, though its not big enough to replace the functionality of actual size limit; I'd prefer though to commence with that limiting only after we are storing the mempool on disk in order to avoid pressure to make the limit problematically low)\r\n\r\n> There can always be hard-coded minimums in place\r\n\r\nSure, thats what this is.\r\n",
      "created_at" : "2015-01-16T15:22:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70268476",
      "id" : 70268476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T15:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70268476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Related: #3753 (mempool periodic sweep). \r\n\r\nIn-implementation it is easier to have a separate sweep, than adding the delete-tx-from-mempool loop to the add-tx-to-mempool functionality.\r\n\r\nThe main blocker is tagging transactions as \"significant to my local wallet\" so that they are not tossed out with the bathwater.\r\n",
      "created_at" : "2015-01-16T16:06:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5535#issuecomment-70275837",
      "id" : 70275837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5535",
      "updated_at" : "2015-01-16T16:06:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/70275837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
