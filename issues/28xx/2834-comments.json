[
   {
      "body" : "Any ideas on how this could be usefully automatically tested?\r\n",
      "created_at" : "2013-07-18T19:58:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-21210309",
      "id" : 21210309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-07-18T19:58:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/21210309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "- Fetch a template with getblocktemplate()\r\n- Spawn a second thread which simulates a new block on the network after 5 seconds\r\n- Time a request to getblocktemplate with longpollid set to the value provided by previous reply\r\n- Ensure time is within 4-6 seconds.\r\n- Spawn a second thread which increments the \"new transactions counter\" after 5 seconds\r\n- Time a request to getblocktemplate with longpollid set to the value provided by previous reply\r\n- Ensure time is within 59-61 seconds.\r\n- Spawn a second thread which increments the \"new transactions counter\" after 65 seconds\r\n- Spawn a third thread which requests a new template (no longpollid) after 5 seconds, and ensure it returns immediately (to check longpoll doesn't block RPC completely)\r\n- Time a request to getblocktemplate with longpollid set to the value provided by previous reply\r\n- Ensure time is within 64-121 seconds.\r\n",
      "created_at" : "2013-07-19T03:28:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-21229609",
      "id" : 21229609,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-07-19T03:28:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/21229609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr how about making changes so you can specify after which time X you get a new template?",
      "created_at" : "2013-08-07T06:56:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-22233078",
      "id" : 22233078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-08-07T06:56:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22233078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/913817?v=3",
         "events_url" : "https://api.github.com/users/K1773R/events{/privacy}",
         "followers_url" : "https://api.github.com/users/K1773R/followers",
         "following_url" : "https://api.github.com/users/K1773R/following{/other_user}",
         "gists_url" : "https://api.github.com/users/K1773R/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/K1773R",
         "id" : 913817,
         "login" : "K1773R",
         "organizations_url" : "https://api.github.com/users/K1773R/orgs",
         "received_events_url" : "https://api.github.com/users/K1773R/received_events",
         "repos_url" : "https://api.github.com/users/K1773R/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/K1773R/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/K1773R/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/K1773R"
      }
   },
   {
      "body" : "@K1773R That might make sense for a future pull request.",
      "created_at" : "2013-08-07T07:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-22234309",
      "id" : 22234309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-08-07T07:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22234309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Quick review seems OK... wants testing and additional review at a minimum\r\n",
      "created_at" : "2013-08-25T02:50:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-23220849",
      "id" : 23220849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-08-25T02:50:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/23220849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Rebase needed.\r\n",
      "created_at" : "2013-10-21T02:03:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-26689128",
      "id" : 26689128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2013-10-21T02:03:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26689128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Rebased again",
      "created_at" : "2014-02-21T17:13:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-35751288",
      "id" : 35751288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2014-02-21T17:13:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/35751288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I've been testing this for the last couple days with BFGMiner, been having a problem with keep-alive.\r\n\r\nBasically, when a new block template becomes available, it's sending it to BFGMiner which is then making a new request using a new connection while keeping the old connection open, so eventually we run out of RPC threads on the server.\r\n\r\nFor now, I've just passed false as the third parameter to HTTPReply when flushing the stream in rpcserver.cpp: ServiceConnection(). This forces the earlier connections to close.",
      "created_at" : "2014-03-11T21:50:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-37353021",
      "id" : 37353021,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2014-03-11T22:28:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/37353021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/894059?v=3",
         "events_url" : "https://api.github.com/users/CodeShark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/CodeShark/followers",
         "following_url" : "https://api.github.com/users/CodeShark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/CodeShark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/CodeShark",
         "id" : 894059,
         "login" : "CodeShark",
         "organizations_url" : "https://api.github.com/users/CodeShark/orgs",
         "received_events_url" : "https://api.github.com/users/CodeShark/received_events",
         "repos_url" : "https://api.github.com/users/CodeShark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/CodeShark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/CodeShark"
      }
   },
   {
      "body" : "Rebased.\r\n\r\n@CodeShark Your experience sounds like a general limitation of the RPC server, not really related to this function itself. I agree BFGMiner could be improved to try to minimise connection count, but that's an issue for BFGMiner.",
      "created_at" : "2014-06-26T14:28:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-47232473",
      "id" : 47232473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2014-06-26T14:28:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/47232473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p2834_01c8af13ae65d314bb8cbef7cd51132ad93da294/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-07-07T20:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-48233351",
      "id" : 48233351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2014-07-07T20:05:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48233351",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Closing in favor of #4503",
      "created_at" : "2014-07-10T09:07:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2834#issuecomment-48581282",
      "id" : 48581282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2834",
      "updated_at" : "2014-07-10T09:07:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48581282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
