[
   {
      "author_association" : "MEMBER",
      "body" : "Isn't there a risk this triggers unnecessary DNS seed lookups and/or fallback to fixed seeds?\r\n\r\nMaybe we should see if there's a way to get a signal from `network-online` to start the \"peers db isn't working out\" timers?",
      "created_at" : "2022-11-14T23:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1314551734",
      "id" : 1314551734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585OWne2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314551734/reactions"
      },
      "updated_at" : "2022-11-14T23:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314551734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Isn't there a risk this triggers unnecessary DNS seed lookups and/or fallback to fixed seeds?\r\n\r\nI'm not sure how Bitcoin Core handles that. That `systemd` page is quite verbose and it discourages the use of `network-online` target in many places, for many reasons. Here is the approach they endorse the most:\r\n\r\n```\r\nWatch rtnetlink and react to network configuration changes as they happen. This is usually the nicest solution, but not always the easiest.\r\n```\r\n\r\nThere is also quite a tirade on \"what does it mean to be online\" there, implying that `network-online` isn't really reliable. I think that depending on the discouraged parts of some external init systems is a bit problematic, because there are no hard guarantees, and because things might change without Bitcoin Core being aware of it, exposing it to potential trouble.\r\n\r\nI also checked my RaspiBlitz config and it looks like it doesn't use `network-online`, so we probably already have thousands of nodes using the proposed init template with no issues. The RaspiBlitz devs fetched the Bitcoin Core template a year ago, though: https://github.com/rootzoll/raspiblitz/issues/2826\r\n\r\nA few interesting quotes from `systemd` doc:\r\n\r\n> network-online.target is a target that actively waits until the network is âupâ, where the definition of âupâ is defined by the network management software. Usually it indicates a configured, routable IP address of some kind.\r\n\r\n> Reacting to local network configuration changes in daemon code is not particularly hard. In fact many well-known network-facing services running on Linux have been doing this for decades. A service written like this is robust, can be started at any time, and will always do the best of the circumstances it is running in.\r\n\r\n> A robust system boots up independently of external services. More specifically, if a network DHCP server does not react, this should not slow down boot on most setups, but only for those where network connectivity is strictly needed (for example, because the host actually boots from the network). ",
      "created_at" : "2022-11-15T11:52:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26495#issuecomment-1315202404",
      "id" : 1315202404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26495",
      "node_id" : "IC_kwDOABII585OZGVk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315202404/reactions"
      },
      "updated_at" : "2022-11-15T11:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315202404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1189245?v=4",
         "events_url" : "https://api.github.com/users/bubelov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bubelov/followers",
         "following_url" : "https://api.github.com/users/bubelov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bubelov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bubelov",
         "id" : 1189245,
         "login" : "bubelov",
         "node_id" : "MDQ6VXNlcjExODkyNDU=",
         "organizations_url" : "https://api.github.com/users/bubelov/orgs",
         "received_events_url" : "https://api.github.com/users/bubelov/received_events",
         "repos_url" : "https://api.github.com/users/bubelov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bubelov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bubelov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bubelov"
      }
   }
]
