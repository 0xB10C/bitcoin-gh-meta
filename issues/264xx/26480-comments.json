[
   {
      "author_association" : "MEMBER",
      "body" : "The change here would also allow to enforce consistency when running the tests, so that review feedback like https://github.com/bitcoin/bitcoin/pull/24865#discussion_r1009752111 (or similar) can be detected locally before creating a pull request. Let me know if this is desired (in a follow-up).",
      "created_at" : "2022-11-10T16:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1310553285",
      "id" : 1310553285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585OHXTF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310553285/reactions"
      },
      "updated_at" : "2022-11-10T16:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1310553285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-11-12T00:38:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1312288114",
      "id" : 1312288114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585ON-1y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1312288114/reactions"
      },
      "updated_at" : "2022-11-12T00:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1312288114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nApproach wise I think a subclass for wallet tests (similar to #20892) is cleaner. Creating a subclass enables us to incapsulate wallet specific logic in one place instead of spreading it across test files. I'd like to hear the arguments against creating a new subclass for wallet tests.",
      "created_at" : "2022-11-14T08:53:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1313306316",
      "id" : 1313306316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585OR3bM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1313306316/reactions"
      },
      "updated_at" : "2022-11-14T08:53:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1313306316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nOne issue I noticed is that `self.options.descriptors`'s default value does not necessarily match what the test expects. Some tests, such as `wallet_avoid_mixing_output_types.py` do not work if `--descriptors` is not specified as it is a descriptor wallet test, but the default value for `self.options.descriptors` indicates legacy wallet. There are other descriptor wallet only tests which actually do work with this incorrect default value, but that's only because they completely ignore `self.options.descriptors`.",
      "created_at" : "2022-11-14T22:09:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1314473959",
      "id" : 1314473959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585OWUfn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314473959/reactions"
      },
      "updated_at" : "2022-11-14T22:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314473959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Approach meh considering we already have another place(s) we specify wallet-used/required in tests.\r\n\r\nSeems like it would be better to just let test classes define `wallet_used` or `wallet_required` = `True`/`False`/`[\"legacy\"]`/`[\"descriptors\"]` and let the framework deal with the skipping/options/etc.",
      "created_at" : "2022-11-14T23:23:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1314539586",
      "id" : 1314539586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585OWkhC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314539586/reactions"
      },
      "updated_at" : "2022-11-14T23:23:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1314539586",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'd like to hear the arguments against creating a new subclass for wallet tests.\r\n\r\nAs Luke points out, there are at least 4 cases, so I don't think a single subclass will help. Maybe you can elaborate?\r\n\r\n> Some tests, such as wallet_avoid_mixing_output_types.py do not work if --descriptors is not specified as it is a descriptor wallet test, but the default value for self.options.descriptors indicates legacy wallet.\r\n\r\nYes, this is a bug that already exists on master. It can be trivially fixed with the changes here, see the new commit.\r\n\r\n> Seems like it would be better to just let test classes define ...\r\n\r\nThis is exactly what this pull is doing, no? Note that there is a difference between the \"hard\" skip and the \"soft\" option: Some tests may be mostly non-wallet, but have a small test portion that requires a wallet, but is skipped otherwise. If the wallet isn't compiled in, the test is still run, except for the small wallet portion.",
      "created_at" : "2022-11-15T09:07:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26480#issuecomment-1315003841",
      "id" : 1315003841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26480",
      "node_id" : "IC_kwDOABII585OYV3B",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315003841/reactions"
      },
      "updated_at" : "2022-11-15T09:07:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1315003841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
