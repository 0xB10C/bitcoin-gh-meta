[
   {
      "body" : "This does not happen with my local build, which has #1901 included!",
      "created_at" : "2012-10-11T20:27:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1920#issuecomment-9356408",
      "id" : 9356408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1920",
      "updated_at" : "2012-10-11T20:27:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9356408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@diapolo you're right. This is a classical use-after-free:\r\n\r\n    const char* pszDataDir = GetDataDir().string().c_str();\r\n\r\n* string() creates a temporary string\r\n* c_str takes a pointer (which is a non-owning reference) to the buffer of that temporary string \r\n* the temporary string is freed after leaving this statement\r\n* we have a pointer pointing to unallocated memory, which gives us a fun surprise (the stringified date, even!)\r\n\r\nSubtle bugs like this are why I always (less subtly) encourage people to use proper string types and not char*. This one must have slipped by :(\r\n\r\nGoing to take a stab at fixing it.",
      "created_at" : "2012-10-12T01:03:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1920#issuecomment-9363728",
      "id" : 9363728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1920",
      "updated_at" : "2012-10-12T01:05:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9363728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "#1921",
      "created_at" : "2012-10-12T01:15:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1920#issuecomment-9363879",
      "id" : 9363879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1920",
      "updated_at" : "2012-10-12T01:15:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9363879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj You can hit me, but I had a bad feeling when Gavin started using this ``const char *`` with the BDB excpetion hardening patch and was thinking about asking him to use a std::string, but as I nit-picked too often over the past weeks I keept quiet ... seems that was wrong.\r\n\r\nThanks for fixing this :)!",
      "created_at" : "2012-10-12T05:26:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1920#issuecomment-9366960",
      "id" : 9366960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1920",
      "updated_at" : "2012-10-12T05:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9366960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Closing, as a patch was merged!",
      "created_at" : "2012-10-12T05:50:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/1920#issuecomment-9367283",
      "id" : 9367283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1920",
      "updated_at" : "2012-10-12T05:50:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9367283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
