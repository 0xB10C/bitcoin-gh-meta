[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-06-07T23:30:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-640296153",
      "id" : 640296153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDI5NjE1Mw==",
      "updated_at" : "2020-06-07T23:30:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640296153",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19415 (net: Make DNS lookup mockable, add fuzzing harness by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-07T23:34:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-640296575",
      "id" : 640296575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDI5NjU3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-18T22:03:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640296575",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-09T16:32:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-656228768",
      "id" : 656228768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NjIyODc2OA==",
      "updated_at" : "2020-07-09T16:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/656228768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-11T10:39:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-657039312",
      "id" : 657039312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzAzOTMxMg==",
      "updated_at" : "2020-07-11T10:39:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657039312",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-07-18T07:45:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-660444979",
      "id" : 660444979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MDQ0NDk3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-18T07:45:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/660444979",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r457793470"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457793470"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is a redundant declaration, it's defined lower on line 164.",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-07-21T02:09:06Z",
      "diff_hunk" : "@@ -37,6 +41,98 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r457793470",
      "id" : 457793470,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc5MzQ3MA==",
      "original_commit_id" : "5da912d7cbf86c697f65ec777f06c3e00c57e120",
      "original_line" : 47,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 20,
      "pull_request_review_id" : 452077139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/457793470",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458016843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458016843"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just would like to point out that this is currently unused. Is this intentional?",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-07-21T11:09:37Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458016843",
      "id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAxNjg0Mw==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 452077139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458016843",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458020094"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458020094"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `m_fuzzed_data_provider` so the reference in the constructor can just be `fuzzed_data_provider`?",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-07-21T11:16:02Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& fuzzed_data_provider;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458020094",
      "id" : 458020094,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAyMDA5NA==",
      "original_commit_id" : "4f18edbe5500033ef619659b980b257c16a3834a",
      "original_line" : 475,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : null,
      "pull_request_review_id" : 452077139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458020094",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458022084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458022084"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Here it is still possible for `random_bytes.size() < len` since that condition is only checked if `ConsumeBool` returns true. Shouldn't the correct number of bytes be returned if possible?",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-07-21T11:20:04Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider_) : fuzzed_data_provider{fuzzed_data_provider_}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || fuzzed_data_provider.ConsumeBool()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r458022084",
      "id" : 458022084,
      "line" : 506,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAyMjA4NA==",
      "original_commit_id" : "4f18edbe5500033ef619659b980b257c16a3834a",
      "original_line" : 506,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 37,
      "pull_request_review_id" : 452077139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/458022084",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470748302"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470748302"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It is used in `netbase.cpp`? :)\r\n\r\n```\r\n$ git grep SocketImpl\r\nsrc/netbase.cpp:        SocketImpl socket{hSocket};\r\nsrc/netbase.cpp:        SocketImpl socket{hSocket};\r\nsrc/netbase.h:class SocketImpl : public Socket\r\nsrc/netbase.h:    explicit SocketImpl(SOCKET socket) : m_socket{socket}\r\n```",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:08:04Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470748302",
      "id" : 470748302,
      "in_reply_to_id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc0ODMwMg==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 467735377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470748302",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470750075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470750075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I meant that even though it's used, the coverage isn't updated for `SocketImpl` functions. Might be a bug with `lcov` perhaps.",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:11:41Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470750075",
      "id" : 470750075,
      "in_reply_to_id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1MDA3NQ==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 467737622,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470750075",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470751725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470751725"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It is now used prior to L164, so it must be on L44 -- but removing L164. Thanks!",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:14:46Z",
      "diff_hunk" : "@@ -37,6 +41,98 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470751725",
      "id" : 470751725,
      "in_reply_to_id" : 457793470,
      "line" : 47,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1MTcyNQ==",
      "original_commit_id" : "5da912d7cbf86c697f65ec777f06c3e00c57e120",
      "original_line" : 47,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 20,
      "pull_request_review_id" : 467739574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470751725",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470753145"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470753145"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think that is expected: it is currently only from `ConnectThroughProxy` which is not fuzzed :)",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:17:29Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470753145",
      "id" : 470753145,
      "in_reply_to_id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1MzE0NQ==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 467741240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470753145",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470753243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470753243"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good nit! Adressed!",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:17:43Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& fuzzed_data_provider;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470753243",
      "id" : 470753243,
      "in_reply_to_id" : 458020094,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1MzI0Mw==",
      "original_commit_id" : "4f18edbe5500033ef619659b980b257c16a3834a",
      "original_line" : 475,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : null,
      "pull_request_review_id" : 467741353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470753243",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470755486"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470755486"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah derp! I mistakenly thought it was fuzzed for some reason, but `FuzzedSocket` is the one that's used. Is the idea that they be used together in some manner eventually?",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:22:29Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470755486",
      "id" : 470755486,
      "in_reply_to_id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1NTQ4Ng==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 467744215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470755486",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470755741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470755741"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We want to make it so that the fuzzer driven `recv` can return _up to_ `len` bytes like the real `recv`, right? :)",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:23:02Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider_) : fuzzed_data_provider{fuzzed_data_provider_}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || fuzzed_data_provider.ConsumeBool()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470755741",
      "id" : 470755741,
      "in_reply_to_id" : 458022084,
      "line" : 506,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1NTc0MQ==",
      "original_commit_id" : "4f18edbe5500033ef619659b980b257c16a3834a",
      "original_line" : 506,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 37,
      "pull_request_review_id" : 467744522,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470755741",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470758852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470758852"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ It is only used as a way to wrap an existing `SOCKET`  as a `Socket` instance: no further plans beyond that :)",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T17:29:03Z",
      "diff_hunk" : "@@ -37,6 +41,91 @@ class proxyType\n     bool randomize_credentials;\n };\n \n+struct timeval MillisToTimeval(int64_t nTimeout);\n+\n+// Represents a read/write socket.\n+class Socket\n+{\n+public:\n+    virtual ssize_t send(const char* buf, size_t len, int flags) = 0;\n+\n+    virtual ssize_t recv(char* buf, size_t len, int flags) = 0;\n+\n+#ifdef USE_POLL\n+    virtual int poll(short events, int timeout_ms) = 0;\n+#endif\n+\n+    virtual int select(bool watch_read, bool watch_write, int timeout_ms) = 0;\n+\n+    virtual bool IsSelectable() const = 0;\n+};\n+\n+// Represents a non-owned SOCKET.\n+//\n+// The underlying SOCKET will NOT be closed automatically on object destruction.\n+class SocketImpl : public Socket",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470758852",
      "id" : 470758852,
      "in_reply_to_id" : 458016843,
      "line" : 69,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1ODg1Mg==",
      "original_commit_id" : "544a8705578cdecc532a209929a7ca2d846efd6a",
      "original_line" : 69,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 42,
      "pull_request_review_id" : 467748299,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470758852",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470820694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470820694"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, yes that makes sense, thanks for clarifying. ",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-08-14T19:15:08Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider_) : fuzzed_data_provider{fuzzed_data_provider_}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || fuzzed_data_provider.ConsumeBool()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r470820694",
      "id" : 470820694,
      "in_reply_to_id" : 458022084,
      "line" : 506,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDgyMDY5NA==",
      "original_commit_id" : "4f18edbe5500033ef619659b980b257c16a3834a",
      "original_line" : 506,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 37,
      "pull_request_review_id" : 467819128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-01T14:14:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470820694",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Builds on Ubuntu.\r\nFails to build on macOS with brew clang.\r\n<details>\r\n<summary>failure</summary>\r\n\r\n```\r\nMaking all in src\r\n  CXX      test/fuzz/addition_overflow-addition_overflow.o\r\nIn file included from test/fuzz/addition_overflow.cpp:7:\r\n./test/fuzz/util.h:335:13: error: no matching function for call to 'AdditionOverflow'\r\n        if (AdditionOverflow((uint64_t)fuzzed_file->m_offset, random_bytes.size())) {\r\n            ^~~~~~~~~~~~~~~~\r\n./test/fuzz/util.h:201:16: note: candidate template ignored: deduced conflicting types for parameter 'T' ('unsigned long long' vs. 'unsigned long')\r\nNODISCARD bool AdditionOverflow(const T i, const T j) noexcept\r\n               ^\r\n./test/fuzz/util.h:346:13: error: no matching function for call to 'AdditionOverflow'\r\n        if (AdditionOverflow(fuzzed_file->m_offset, n)) {\r\n            ^~~~~~~~~~~~~~~~\r\n./test/fuzz/util.h:201:16: note: candidate template ignored: deduced conflicting types for parameter 'T' ('long long' vs. 'long')\r\nNODISCARD bool AdditionOverflow(const T i, const T j) noexcept\r\n               ^\r\n2 errors generated.\r\nmake[2]: *** [test/fuzz/addition_overflow-addition_overflow.o] Error 1\r\nmake[1]: *** [all-recursive] Error 1\r\nmake: *** [all-recursive] Error 1\r\n```\r\n</details>",
      "created_at" : "2020-09-01T05:04:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-684254689",
      "id" : 684254689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NDI1NDY4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T05:05:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/684254689",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ Thanks for letting me know. Now rebased. Should compile on macOS now? :)",
      "created_at" : "2020-09-01T14:15:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-684887029",
      "id" : 684887029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NDg4NzAyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T14:16:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/684887029",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift Now compiles on macOS :). Will run the builds again and re-review.",
      "created_at" : "2020-09-01T19:08:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-685075098",
      "id" : 685075098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTA3NTA5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-01T19:08:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685075098",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481735725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481735725"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Calling this with `-1` as the `min` parameter to `ConsumeIntegralInRange` will result in a very large range since it will be cast to `uint64_t`:\r\nhttps://github.com/bitcoin/bitcoin/blob/48c1083632687a42ac603d4f241e70616a1d3815/src/test/fuzz/FuzzedDataProvider.h#L87\r\n\r\nMaybe an alternative version of `ConsumeIntegralInRange` for just -1,0,1 can be used? Not your fault, it's the header file's fault.",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-09-02T05:41:43Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& m_fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider) : m_fuzzed_data_provider{fuzzed_data_provider}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || m_fuzzed_data_provider.ConsumeBool()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = m_fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();\n+    }\n+\n+#ifdef USE_POLL\n+    int poll(short events, int timeout_ms) override\n+    {\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<int>(-1, 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481735725",
      "id" : 481735725,
      "line" : 512,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTczNTcyNQ==",
      "original_commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "original_line" : 512,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 43,
      "pull_request_review_id" : 480497736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-02T05:43:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481735725",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481735948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481735948"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same here.",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-09-02T05:41:57Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& m_fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider) : m_fuzzed_data_provider{fuzzed_data_provider}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || m_fuzzed_data_provider.ConsumeBool()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = m_fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();\n+    }\n+\n+#ifdef USE_POLL\n+    int poll(short events, int timeout_ms) override\n+    {\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<int>(-1, 1);\n+    }\n+#endif\n+\n+    int select(bool watch_read, bool watch_write, int timeout_ms) override\n+    {\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<int>(-1, 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481735948",
      "id" : 481735948,
      "line" : 518,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTczNTk0OA==",
      "original_commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "original_line" : 518,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 49,
      "pull_request_review_id" : 480497736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-02T05:43:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481735948",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481745772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481745772"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nevermind, godbolt tells me I am wrong.",
      "commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "created_at" : "2020-09-02T05:51:38Z",
      "diff_hunk" : "@@ -470,4 +470,63 @@ void ReadFromStream(FuzzedDataProvider& fuzzed_data_provider, Stream& stream) no\n     }\n }\n \n+class FuzzedSocket : public Socket\n+{\n+    FuzzedDataProvider& m_fuzzed_data_provider;\n+\n+public:\n+    explicit FuzzedSocket(FuzzedDataProvider& fuzzed_data_provider) : m_fuzzed_data_provider{fuzzed_data_provider}\n+    {\n+    }\n+\n+    ssize_t send(const char* buf, size_t len, int flags) override\n+    {\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            return len;\n+        }\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<ssize_t>(-1, len);\n+    }\n+\n+    ssize_t recv(char* buf, size_t len, int flags) override\n+    {\n+        if (buf == nullptr || len == 0 || m_fuzzed_data_provider.ConsumeBool()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        const std::vector<uint8_t> random_bytes = m_fuzzed_data_provider.ConsumeBytes<uint8_t>(len);\n+        if (random_bytes.empty()) {\n+            return m_fuzzed_data_provider.ConsumeBool() ? 0 : -1;\n+        }\n+        std::memcpy(buf, random_bytes.data(), random_bytes.size());\n+        if (m_fuzzed_data_provider.ConsumeBool()) {\n+            if (len > random_bytes.size()) {\n+                std::memset(buf + random_bytes.size(), 0, len - random_bytes.size());\n+            }\n+            return len;\n+        }\n+        return random_bytes.size();\n+    }\n+\n+#ifdef USE_POLL\n+    int poll(short events, int timeout_ms) override\n+    {\n+        return m_fuzzed_data_provider.ConsumeIntegralInRange<int>(-1, 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#discussion_r481745772",
      "id" : 481745772,
      "in_reply_to_id" : 481735725,
      "line" : 512,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTc0NTc3Mg==",
      "original_commit_id" : "2d02f775fa36c59bca5d7ef1a0e702c1bc2de117",
      "original_line" : 512,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/test/fuzz/util.h",
      "position" : 43,
      "pull_request_review_id" : 480501517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19203",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-02T05:51:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481745772",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 2d02f775fa36c59bca5d7ef1a0e702c1bc2de117\r\n\r\nCode change looks good to me. I did not try to reintroduce the CVE, but I did read up about it.\r\nUbuntu 18:\r\n- `./configure --enable-fuzz --with-sanitizers=address,undefined,integer,fuzzer` - no errors\r\n- valgrind - no errors\r\n\r\nmacOS 10.15.4:\r\n- `./configure --enable-fuzz --with-sanitizers=address,fuzzer --disable-asm` - no errors\r\n- `./configure --enable-fuzz --with-sanitizers=undefined,integer,fuzzer` - one complaint (suppressed by https://github.com/bitcoin/bitcoin/pull/19713)\r\n<details>\r\n<summary>implicit-integer-sign-change</summary>\r\n\r\n```\r\n/usr/local/opt/llvm/bin/../include/c++/v1/memory:1876:35: runtime error: implicit conversion from type 'char' of value -125 (8-bit, signed) to type 'unsigned char' changed the value to 131 (8-bit, unsigned)\r\n    #0 0x1072b4bd4 in void std::__1::allocator_traits<std::__1::allocator<unsigned char> >::construct<unsigned char, char const&>(std::__1::allocator<unsigned char>&, unsigned char*, char const&) memory:1595\r\n    #1 0x1072b49f9 in void std::__1::allocator_traits<std::__1::allocator<unsigned char> >::__construct_range_forward<std::__1::__wrap_iter<char const*>, unsigned char*>(std::__1::allocator<unsigned char>&, std::__1::__wrap_iter<char const*>, std::__1::__wrap_iter<char const*>, unsigned char*&) memory:1688\r\n    #2 0x1072b3598 in std::__1::enable_if<__is_cpp17_forward_iterator<std::__1::__wrap_iter<char const*> >::value, void>::type std::__1::vector<unsigned char, std::__1::allocator<unsigned char> >::__construct_at_end<std::__1::__wrap_iter<char const*> >(std::__1::__wrap_iter<char const*>, std::__1::__wrap_iter<char const*>, unsigned long) vector:1076\r\n    #3 0x10728e2a2 in std::__1::enable_if<(__is_cpp17_forward_iterator<std::__1::__wrap_iter<char const*> >::value) && (is_constructible<unsigned char, std::__1::iterator_traits<std::__1::__wrap_iter<char const*> >::reference>::value), std::__1::__wrap_iter<unsigned char*> >::type std::__1::vector<unsigned char, std::__1::allocator<unsigned char> >::insert<std::__1::__wrap_iter<char const*> >(std::__1::__wrap_iter<unsigned char const*>, std::__1::__wrap_iter<char const*>, std::__1::__wrap_iter<char const*>) vector:1996\r\n    #4 0x10728b18c in Socks5(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, ProxyCredentials const*, Socket&) netbase.cpp:492\r\n    #5 0x10663a420 in test_one_input(std::__1::vector<unsigned char, std::__1::allocator<unsigned char> > const&) socks5.cpp:30\r\n    #6 0x107663b28 in LLVMFuzzerTestOneInput fuzz.cpp:45\r\n    #7 0x107862780 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) FuzzerLoop.cpp:556\r\n    #8 0x107861ec5 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool*) FuzzerLoop.cpp:470\r\n    #9 0x107863f76 in fuzzer::Fuzzer::MutateAndTestOne() FuzzerLoop.cpp:698\r\n    #10 0x107864be5 in fuzzer::Fuzzer::Loop(std::__1::vector<fuzzer::SizedFile, fuzzer::fuzzer_allocator<fuzzer::SizedFile> >&) FuzzerLoop.cpp:830\r\n    #11 0x107851d8d in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) FuzzerDriver.cpp:829\r\n    #12 0x10787da62 in main FuzzerMain.cpp:19\r\n    #13 0x7fff73778cc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)\r\n```\r\n</details>",
      "created_at" : "2020-09-02T17:34:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-685889544",
      "id" : 685889544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTg4OTU0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T17:36:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685889544",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Had to rebase also this one to make use of the new `$(FUZZ_SUITE_LDFLAGS_COMMON)`.\r\n\r\n@Crypt-iQ May I ask you to review and hopefully give your second ACK on this PR? :)",
      "created_at" : "2020-09-17T13:38:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-694241213",
      "id" : 694241213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NDI0MTIxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-17T13:38:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/694241213",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK ea6cd7b2cc6b070b2630457d75b396de555b31c7",
      "created_at" : "2020-09-20T10:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19203#issuecomment-695773087",
      "id" : 695773087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19203",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NTc3MzA4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-20T10:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/695773087",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   }
]
