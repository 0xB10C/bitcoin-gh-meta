[
   {
      "author_association" : "MEMBER",
      "body" : "> For anyone who's looked at the last PR, this one just has a simpler sdk-gen.sh script that I wrote myself, and includes some .xip unpacking innovations thanks to theuni.\r\n\r\nThanks for working on this. This is great news. Maybe can manage to do it myself this time without a Mac :+1: \r\n",
      "created_at" : "2020-06-11T17:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#issuecomment-642838529",
      "id" : 642838529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19240",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MjgzODUyOQ==",
      "updated_at" : "2020-06-11T17:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/642838529",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r438971235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438971235"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure keeping instructions around for previous SDKs is that useful. Only for the release that is used for building. Older information can always be found in git.",
      "commit_id" : "66aca4bc0c007ba7cf47d37d43c6eef047c788aa",
      "created_at" : "2020-06-11T17:56:36Z",
      "diff_hunk" : "@@ -14,44 +14,45 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n+```\n \n-./pbzx/pbzx -n Content | cpio -i\n+On macOS the process is more straightforward:\n \n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+```bash\n+xip -x Xcode_10.2.1.xip\n ```\n \n-on macOS the process is more straightforward:\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment\n+variable pointing to the `Xcode.app` extracted in the previous stage.\n \n ```bash\n-xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n+# Generate a MacOSX10.14.sdk.tar.gz from the supplied Xcode.app\n+./contrib/macdeploy/gen_sdk_package.sh '/path/to/Xcode.app'\n ```\n \n+### Historial macOS SDK Extraction Notes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r438971235",
      "id" : 438971235,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MTIzNQ==",
      "original_commit_id" : "ac1ded1a3f1f30145fd07c356161edb54475175e",
      "original_line" : 54,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429158093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T18:55:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438971235",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439003009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439003009"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed!",
      "commit_id" : "66aca4bc0c007ba7cf47d37d43c6eef047c788aa",
      "created_at" : "2020-06-11T18:55:51Z",
      "diff_hunk" : "@@ -14,44 +14,45 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n+```\n \n-./pbzx/pbzx -n Content | cpio -i\n+On macOS the process is more straightforward:\n \n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+```bash\n+xip -x Xcode_10.2.1.xip\n ```\n \n-on macOS the process is more straightforward:\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment\n+variable pointing to the `Xcode.app` extracted in the previous stage.\n \n ```bash\n-xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n+# Generate a MacOSX10.14.sdk.tar.gz from the supplied Xcode.app\n+./contrib/macdeploy/gen_sdk_package.sh '/path/to/Xcode.app'\n ```\n \n+### Historial macOS SDK Extraction Notes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439003009",
      "id" : 439003009,
      "in_reply_to_id" : 438971235,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAwMzAwOQ==",
      "original_commit_id" : "ac1ded1a3f1f30145fd07c356161edb54475175e",
      "original_line" : 54,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429198658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-11T18:55:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439003009",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   }
]
