[
   {
      "author_association" : "MEMBER",
      "body" : "> For anyone who's looked at the last PR, this one just has a simpler sdk-gen.sh script that I wrote myself, and includes some .xip unpacking innovations thanks to theuni.\r\n\r\nThanks for working on this. This is great news. Maybe can manage to do it myself this time without a Mac :+1: \r\n",
      "created_at" : "2020-06-11T17:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#issuecomment-642838529",
      "id" : 642838529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19240",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MjgzODUyOQ==",
      "updated_at" : "2020-06-11T17:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/642838529",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r438971235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438971235"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure keeping instructions around for previous SDKs is that useful. Only for the release that is used for building. Older information can always be found in git.",
      "commit_id" : "c7adca9de34460a39f501ad91f332f608f06e474",
      "created_at" : "2020-06-11T17:56:36Z",
      "diff_hunk" : "@@ -14,44 +14,45 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n+```\n \n-./pbzx/pbzx -n Content | cpio -i\n+On macOS the process is more straightforward:\n \n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+```bash\n+xip -x Xcode_10.2.1.xip\n ```\n \n-on macOS the process is more straightforward:\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment\n+variable pointing to the `Xcode.app` extracted in the previous stage.\n \n ```bash\n-xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n+# Generate a MacOSX10.14.sdk.tar.gz from the supplied Xcode.app\n+./contrib/macdeploy/gen_sdk_package.sh '/path/to/Xcode.app'\n ```\n \n+### Historial macOS SDK Extraction Notes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r438971235",
      "id" : 438971235,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MTIzNQ==",
      "original_commit_id" : "ac1ded1a3f1f30145fd07c356161edb54475175e",
      "original_line" : 54,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429158093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T20:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/438971235",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439003009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439003009"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed!",
      "commit_id" : "c7adca9de34460a39f501ad91f332f608f06e474",
      "created_at" : "2020-06-11T18:55:51Z",
      "diff_hunk" : "@@ -14,44 +14,45 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n+```\n \n-./pbzx/pbzx -n Content | cpio -i\n+On macOS the process is more straightforward:\n \n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+```bash\n+xip -x Xcode_10.2.1.xip\n ```\n \n-on macOS the process is more straightforward:\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment\n+variable pointing to the `Xcode.app` extracted in the previous stage.\n \n ```bash\n-xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n+# Generate a MacOSX10.14.sdk.tar.gz from the supplied Xcode.app\n+./contrib/macdeploy/gen_sdk_package.sh '/path/to/Xcode.app'\n ```\n \n+### Historial macOS SDK Extraction Notes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439003009",
      "id" : 439003009,
      "in_reply_to_id" : 438971235,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAwMzAwOQ==",
      "original_commit_id" : "ac1ded1a3f1f30145fd07c356161edb54475175e",
      "original_line" : 54,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429198658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T20:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439003009",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439584224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439584224"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"with the XCODEDIR environment variable pointing to...\",\r\nor\r\n\"./contrib/macdeploy/gen_sdk_package.sh '/path/to/Xcode.app'\"\r\n\r\nWhich is it? :)",
      "commit_id" : "c7adca9de34460a39f501ad91f332f608f06e474",
      "created_at" : "2020-06-12T18:39:11Z",
      "diff_hunk" : "@@ -14,55 +14,41 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n-\n-./pbzx/pbzx -n Content | cpio -i\n-\n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n ```\n \n-on macOS the process is more straightforward:\n+On macOS the process is more straightforward:\n \n ```bash\n xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n ```\n \n-Our previously used macOS SDK (`MacOSX10.11.sdk`) can be extracted from\n-[Xcode 7.3.1 dmg](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.3.1/Xcode_7.3.1.dmg).\n-The script [`extract-osx-sdk.sh`](./extract-osx-sdk.sh) automates this. First\n-ensure the DMG file is in the current directory, and then run the script. You\n-may wish to delete the `intermediate 5.hfs` file and `MacOSX10.11.sdk` (the\n-directory) when you've confirmed the extraction succeeded.\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439584224",
      "id" : 439584224,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NDIyNA==",
      "original_commit_id" : "66aca4bc0c007ba7cf47d37d43c6eef047c788aa",
      "original_line" : 46,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429960721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T20:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439584224",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439584662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439584662"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can we name this something to indicate that we've included the headers as well?\r\n\r\nEdit: expanding on this: since builders presumably already have a different, incompatible MacOSX10.14.sdk in sources, I think it makes sense to rename the unpacked dir (SDK in hosts/darwin.mk) as well as the tarball to avoid clashes/confusion.",
      "commit_id" : "c7adca9de34460a39f501ad91f332f608f06e474",
      "created_at" : "2020-06-12T18:40:16Z",
      "diff_hunk" : "@@ -0,0 +1,121 @@\n+#!/usr/bin/env bash\n+export LC_ALL=C\n+set -e -o pipefail\n+\n+die() { cat 1>&2 ; exit 1; }\n+\n+# Defaults to our current SDK's name, but overridable\n+SDKNAME=\"${SDKNAME:-MacOSX10.14.sdk}\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439584662",
      "id" : 439584662,
      "line" : 8,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NDY2Mg==",
      "original_commit_id" : "66aca4bc0c007ba7cf47d37d43c6eef047c788aa",
      "original_line" : 8,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/gen-sdk.sh",
      "position" : 8,
      "pull_request_review_id" : 429960721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T20:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439584662",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439586410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439586410"
         }
      },
      "author_association" : "MEMBER",
      "body" : "gen_sdk_package.sh != gen-sdk.sh\r\n(below as well)",
      "commit_id" : "c7adca9de34460a39f501ad91f332f608f06e474",
      "created_at" : "2020-06-12T18:44:08Z",
      "diff_hunk" : "@@ -14,55 +14,41 @@ When complete, it will have produced `Bitcoin-Qt.dmg`.\n \n ## SDK Extraction\n \n+### Step 1: Obtaining `Xcode.app`\n+\n Our current macOS SDK (`macOSX10.14.sdk`) can be extracted from\n [Xcode_10.2.1.xip](https://download.developer.apple.com/Developer_Tools/Xcode_10.2.1/Xcode_10.2.1.xip).\n An Apple ID is needed to download this.\n \n-`Xcode.app` is packaged in a `.xip` archive.\n-This makes the SDK less-trivial to extract on non-macOS machines.\n-One approach (tested on Debian Buster) is outlined below:\n+After Xcode version 7.x, Apple started shipping the `Xcode.app` in a `.xip`\n+archive. This makes the SDK less-trivial to extract on non-macOS machines. One\n+approach (tested on Debian Buster) is outlined below:\n \n ```bash\n+# Install/clone tools needed for extracting Xcode.app\n+apt install cpio\n+git clone https://github.com/theuni/apple-sdk-tools.git\n \n-apt install clang cpio git liblzma-dev libxml2-dev libssl-dev make\n-\n-git clone https://github.com/tpoechtrager/xar\n-pushd xar/xar\n-./configure\n-make\n-make install\n-popd\n-\n-git clone https://github.com/NiklasRosenstein/pbzx\n-pushd pbzx\n-clang -llzma -lxar pbzx.c -o pbzx -Wl,-rpath=/usr/local/lib\n-popd\n-\n-xar -xf Xcode_10.2.1.xip -C .\n-\n-./pbzx/pbzx -n Content | cpio -i\n-\n-find Xcode.app -type d -name MacOSX.sdk -exec sh -c 'tar --transform=\"s/MacOSX.sdk/MacOSX10.14.sdk/\" -c -C$(dirname {}) MacOSX.sdk/ | gzip -9n > MacOSX10.14.sdk.tar.gz' \\;\n+# Unpack Xcode_10.2.1.xip and place the resulting Xcode.app in your current\n+# working directory\n+python3 apple-sdk-tools/extract_xcode.py -f Xcode_10.2.1.xip | cpio -d -i\n ```\n \n-on macOS the process is more straightforward:\n+On macOS the process is more straightforward:\n \n ```bash\n xip -x Xcode_10.2.1.xip\n-tar -s \"/MacOSX.sdk/MacOSX10.14.sdk/\" -C Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ -czf MacOSX10.14.sdk.tar.gz MacOSX.sdk\n ```\n \n-Our previously used macOS SDK (`MacOSX10.11.sdk`) can be extracted from\n-[Xcode 7.3.1 dmg](https://developer.apple.com/devcenter/download.action?path=/Developer_Tools/Xcode_7.3.1/Xcode_7.3.1.dmg).\n-The script [`extract-osx-sdk.sh`](./extract-osx-sdk.sh) automates this. First\n-ensure the DMG file is in the current directory, and then run the script. You\n-may wish to delete the `intermediate 5.hfs` file and `MacOSX10.11.sdk` (the\n-directory) when you've confirmed the extraction succeeded.\n+### Step 2: Generating `MacOSX10.14.sdk.tar.gz` from `Xcode.app`\n+\n+To generate `MacOSX10.14.sdk.tar.gz`, run the script\n+[`gen_sdk_package.sh`](./gen_sdk_package.sh) with the XCODEDIR environment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#discussion_r439586410",
      "id" : 439586410,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NjQxMA==",
      "original_commit_id" : "66aca4bc0c007ba7cf47d37d43c6eef047c788aa",
      "original_line" : 46,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "contrib/macdeploy/README.md",
      "position" : null,
      "pull_request_review_id" : 429963645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19240",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-06-12T20:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439586410",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm seeing a Qt build failure due to some symlink/hardlink issue:\r\n```\r\nkernel/qdnslookup_unix.cpp:52:10: fatal error: 'arpa/nameser.h' file not found\r\n#include <arpa/nameser.h>\r\n         ^~~~~~~~~~~~~~~~\r\n1 error generated.\r\nMakefile:12337: recipe for target '.obj/qdnslookup_unix.o' failed\r\n```\r\nThe link is broken hardlink in the generated sdk:\r\n```\r\n $ ls -al MacOSX10.14.sdk/usr/include/arpa/nameser.h\r\nlrwxrwxrwx 1 cory cory 26 Jun 12 14:28 MacOSX10.14.sdk/usr/include/arpa/nameser.h -> MacOSX10.14.sdk./nameser.h\r\n```\r\nWhereas in the original SDK it's a working symlink:\r\n```\r\n $ ls -al MacOSX10.14.sdk/usr/include/arpa/nameser.h\r\nlrwxrwxrwx 1 cory cory 12 Jun 12 14:28 MacOSX10.14.sdk/usr/include/arpa/nameser.h -> ../nameser.h\r\n```\r\n\r\nEdit: For reference, here's my extraction output from Ubuntu 18.04.2:\r\n```\r\ncory@desktop:15:41:55:~/dev/bitcoin2 (19240)\r\n $ ./contrib/macdeploy/gen-sdk.sh /tmp/apple-sdk-tools/Xcode.app\r\nGoing to attempt to extract the MacOSX10.14.sdk SDK from the Xcode.app located at:\r\n\t'/tmp/apple-sdk-tools/Xcode.app'\r\n\r\nAnd place the resulting gzipped tarball at:\r\n\t'/home/cory/dev/bitcoin2/MacOSX10.14.sdk.tar.gz'\r\n\r\nGoing to use tar command: 'tar'\r\nDetected tar style: 'GNU'\r\n\r\nAdding MacOSX10.14.sdk SDK files...\r\nAdding libc++ headers...\r\nCompressing using gzip...\r\n\r\nDone! Find the resulting gzipped tarball at:\r\n\t'/home/cory/dev/bitcoin2/MacOSX10.14.sdk.tar.gz'\r\n```",
      "created_at" : "2020-06-12T19:38:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#issuecomment-643451337",
      "id" : 643451337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19240",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzQ1MTMzNw==",
      "updated_at" : "2020-06-12T19:43:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643451337",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18288 (build: Add MemorySanitizer (MSan) in Travis to detect use of uninitialized memory by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-06-13T03:03:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#issuecomment-643559167",
      "id" : 643559167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19240",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MzU1OTE2Nw==",
      "updated_at" : "2020-06-13T03:03:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643559167",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit eac65d99ddb27061e6ae0f9448887db86e2c0734<br>(master) | commit da36e2b3e0d31b61dcd253a85149b5adbe7c1e42<br>(master and this pull) |\n|--|--|--|\n| bitcoin-core-linux-0.21-res.yml | [`8e82b96691702e92...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-core-linux-0.21-res.yml) | [`6e4faf964f29a7e5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-core-linux-0.21-res.yml) |\n| bitcoin-core-osx-0.21-res.yml | [`05aa957afb9e5596...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-core-osx-0.21-res.yml) |  |\n| bitcoin-core-win-0.21-res.yml | [`4130be6109e094d7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-core-win-0.21-res.yml) | [`56c8657953760f73...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-core-win-0.21-res.yml) |\n| *-aarch64-linux-gnu-debug.tar.gz | [`70056a36fe0f360a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-aarch64-linux-gnu-debug.tar.gz) | [`4af2fb9f37e7dbd5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`eb77c1f6787ab0b8...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-aarch64-linux-gnu.tar.gz) | [`ceaf97149977abca...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`c4106dc3dd0f8cdc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-arm-linux-gnueabihf-debug.tar.gz) | [`bf3a22de7e0705c7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`398fc8c64003eb5a...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-arm-linux-gnueabihf.tar.gz) | [`efde5c967f5844e0...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-arm-linux-gnueabihf.tar.gz) |\n| *-osx-unsigned.dmg | [`769ab73762109db4...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-osx-unsigned.dmg) |  |\n| *-osx64.tar.gz | [`4d7d7bdf9896703e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-osx64.tar.gz) |  |\n| *-riscv64-linux-gnu-debug.tar.gz | [`4e2b5730a727e8cf...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-riscv64-linux-gnu-debug.tar.gz) | [`e7748f7f649a594e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`84610a1755bc998b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-riscv64-linux-gnu.tar.gz) | [`0bfade1848834c50...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-riscv64-linux-gnu.tar.gz) |\n| *-win64-debug.zip | [`5ae8e4607c3f5ccc...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-win64-debug.zip) | [`fb21172485ec5150...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-win64-debug.zip) |\n| *-win64-setup-unsigned.exe | [`293538e378192ed5...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-win64-setup-unsigned.exe) | [`23afcde764ab629b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-win64-setup-unsigned.exe) |\n| *-win64.zip | [`38109ad106d3fca1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-win64.zip) | [`d7a7cd881886c575...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-win64.zip) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`aae9f8f4f572c89e...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-x86_64-linux-gnu-debug.tar.gz) | [`07de3c7a4ef1f30d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`142b854c17af6ed0...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2-x86_64-linux-gnu.tar.gz) | [`b36e2d42efdcc127...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`97dfad51ba449732...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/bitcoin-eac65d99ddb2.tar.gz) | [`6702b0ba8198fa79...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-da36e2b3e0d3.tar.gz) |\n| linux-build.log | [`e62f90620f81af82...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/linux-build.log) | [`ec05a50edd2b6719...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/linux-build.log) |\n| osx-build.log | [`6a34577d6a9105a4...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/osx-build.log) | [`c66ba1e04555eaae...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/osx-build.log) |\n| win-build.log | [`c2e201e5f4f43f27...`](https://drahtbot.space/gitian/bitcoin/bitcoin/eac65d99ddb27061e6ae0f9448887db86e2c0734/win-build.log) | [`c1a58ce85ee16cce...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/win-build.log) |\n| bitcoin-core-linux-0.21-res.yml.diff |  | [`7e9e9518a5c3d91c...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-core-linux-0.21-res.yml.diff) |\n| bitcoin-core-win-0.21-res.yml.diff |  | [`5bbf39c99d6b3357...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/bitcoin-core-win-0.21-res.yml.diff) |\n| linux-build.log.diff |  | [`ecf316d505b3584b...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/linux-build.log.diff) |\n| osx-build.log.diff |  | [`55a684f9c13a9e19...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/osx-build.log.diff) |\n| win-build.log.diff |  | [`07498687dd828ee1...`](https://drahtbot.space/gitian/bitcoin/bitcoin/da36e2b3e0d31b61dcd253a85149b5adbe7c1e42/win-build.log.diff) |\n\n",
      "created_at" : "2020-06-14T10:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19240#issuecomment-643746708",
      "id" : 643746708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19240",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0Mzc0NjcwOA==",
      "updated_at" : "2020-06-14T10:19:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643746708",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
