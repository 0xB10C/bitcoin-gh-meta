[
   {
      "body" : "While concept ACK, note that collision attacks on sha1 signatures - particularly in selfsigs - aren't as insecure as you might think. The reason is they're basically an attack on yourself. For instance, in the case of a selfsig, you already can add multiple subkeys to your PGP identity anyway, and you can do so without revealing that fact to the public, so there isn't a direct attack vector.\r\n\r\nSimilarly, given that a git commit signature is an expression of trust anyway, creating two commit objects so you can sign both with the same OpenPGP signature isn't a clear attack on anything; unlike the case where someone inserts a malicious *file* into the Git tree, that can only be done by the signer\r\n\r\nMeanwhile, with second-preimage attacks that third-parties can do, [almost every cryptographic hash function in history has proven immune](https://z.cash/technology/history-of-hash-function-attacks.html). In fact, in my OpenTimestamps Python library I note that [even MD5 is secure enough for timestamping](https://github.com/opentimestamps/python-opentimestamps/blob/b395fcc25354184cb2c6a3a899f671f62af4ab44/opentimestamps/core/op.py#L311) (though I'm still not inclined to add support for it out of a healthy sense of caution!).\r\n\r\nNow there *are* more complex cases where this stuff matters - timestamping is one of them depending on how it's implemented - so we probably should still merge this for the long-term. But we can certainly wait until people fix their keys.",
      "created_at" : "2017-02-27T21:58:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282869360",
      "id" : 282869360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T21:58:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282869360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Oh, and another reason to Concept ACK this: it wouldn't be surprising if a colliding self-sig or similar could be used to trigger a non-cryptographic bug in validation somewhere, given that you're violating the common assumption that hash functions don't collide.",
      "created_at" : "2017-02-27T22:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282871270",
      "id" : 282871270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282871270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd indeed, selfsig attacks aren't so interesting, but I'm not aware of another way to prevent sha1-based signatures. While probably also not particularly interesting attack vectors, its good belt-and-suspenders when signing \"untrusted input\" (in the form of the git tree root/sha512 tree root/commit messages/etc) to avoid sha1 inputs.",
      "created_at" : "2017-02-27T22:04:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282871285",
      "id" : 282871285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282871285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt Oh, yeah you make a good point in saying this is a case of \"untrusted input\", as the commit message to be made is semi-deterministic and under the control of the pull-requester.\r\n\r\nOne sec, I'll write up a comment for you. :)",
      "created_at" : "2017-02-27T22:07:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-282872197",
      "id" : 282872197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-02-27T22:07:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282872197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "* Rebased.\r\n* Now enforces lack of symlinks in github-merge.py.\r\n* Now enforces lack of symlinks in verify-commits.sh\r\n* Always enforce non-SHA1-sigs even when --tree-checks is off\r\n* Update trusted-sha256-root-commit until Marco updates his subkeys.",
      "created_at" : "2017-03-01T16:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-283391825",
      "id" : 283391825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-01T16:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283391825",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-03-02T09:24:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9880#issuecomment-283601040",
      "id" : 283601040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9880",
      "updated_at" : "2017-03-02T09:24:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/283601040",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
