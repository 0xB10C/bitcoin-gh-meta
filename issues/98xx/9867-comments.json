[
   {
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/9867/commits/d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "created_at" : "2017-02-26T20:48:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#issuecomment-282586222",
      "id" : 282586222,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9867",
      "updated_at" : "2017-02-26T20:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282586222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103117787"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103117787"
         }
      },
      "body" : "This is a little bit sketchy. Could it not safely be 2 here, not 3?",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-26T21:43:03Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ std::string base_blob<BITS>::GetHex() const\n {\n     char psz[sizeof(data) * 2 + 1];\n     for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n+        snprintf(psz + i * 2, 3, \"%02x\", data[sizeof(data) - i - 1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103117787",
      "id" : 103117787,
      "original_commit_id" : "d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "original_position" : 5,
      "path" : "src/uint256.cpp",
      "position" : null,
      "pull_request_review_id" : 23894458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103117787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=3",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "body" : "Concept ACK for general sanity, though I'm pretty sure there is no reason we should go out of our way to support libcs that are deliberately broken.",
      "created_at" : "2017-02-26T21:43:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#issuecomment-282590191",
      "id" : 282590191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9867",
      "updated_at" : "2017-02-26T21:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282590191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103133252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103133252"
         }
      },
      "body" : "NUL term needs a 3rd byte.",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T03:50:44Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ std::string base_blob<BITS>::GetHex() const\n {\n     char psz[sizeof(data) * 2 + 1];\n     for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n+        snprintf(psz + i * 2, 3, \"%02x\", data[sizeof(data) - i - 1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103133252",
      "id" : 103133252,
      "original_commit_id" : "d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "original_position" : 5,
      "path" : "src/uint256.cpp",
      "position" : null,
      "pull_request_review_id" : 23909532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103133252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=3",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103133656"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103133656"
         }
      },
      "body" : "For others http://www.cplusplus.com/reference/cstdio/snprintf/\r\n\r\n> A terminating null character is automatically appended after the content written.\r\n\r\nHence,  2 hex characters + 1 null character.",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T03:58:17Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ std::string base_blob<BITS>::GetHex() const\n {\n     char psz[sizeof(data) * 2 + 1];\n     for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n+        snprintf(psz + i * 2, 3, \"%02x\", data[sizeof(data) - i - 1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103133656",
      "id" : 103133656,
      "original_commit_id" : "d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "original_position" : 5,
      "path" : "src/uint256.cpp",
      "position" : null,
      "pull_request_review_id" : 23909963,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103133656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103134422"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103134422"
         }
      },
      "body" : "It's correct, and it's also why snprintf isn't an especially safe function call. (replaces one class of issue with another more subtle one)",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T04:13:43Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ std::string base_blob<BITS>::GetHex() const\n {\n     char psz[sizeof(data) * 2 + 1];\n     for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n+        snprintf(psz + i * 2, 3, \"%02x\", data[sizeof(data) - i - 1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103134422",
      "id" : 103134422,
      "original_commit_id" : "d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "original_position" : 5,
      "path" : "src/uint256.cpp",
      "position" : null,
      "pull_request_review_id" : 23910736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103134422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103142029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103142029"
         }
      },
      "body" : "> It's correct, and it's also why snprintf isn't an especially safe function call. (replaces one class of issue with another more subtle one)\r\n\r\nIndeed, that's why we never use it. The go-to function we have for this is \"strprintf\". However, it's kind of high overhead for formatting two hex characters. Especially as this function is called a lot.\r\n\r\nI'll just replace this with use of `HexDigit` instead.\r\n",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T06:22:42Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ std::string base_blob<BITS>::GetHex() const\n {\n     char psz[sizeof(data) * 2 + 1];\n     for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n+        snprintf(psz + i * 2, 3, \"%02x\", data[sizeof(data) - i - 1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103142029",
      "id" : 103142029,
      "original_commit_id" : "d9b6b874c955cdd0e174b8f1e9582773e15c7cd9",
      "original_position" : 5,
      "path" : "src/uint256.cpp",
      "position" : null,
      "pull_request_review_id" : 23918632,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103142029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Concept ACK for general sanity, though I'm pretty sure there is no reason we should go out of our way to support libcs that are deliberately broken.\r\n\r\nSomewhat tend to agree, though there is something to be said for deprecating unsafe functions that have caused so much pain since the 80's. They do the same with system calls, trying to keep the API (anda attack surface) as minimalist as possible.",
      "created_at" : "2017-02-27T06:26:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#issuecomment-282638450",
      "id" : 282638450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9867",
      "updated_at" : "2017-02-27T06:26:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282638450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Force-pushed into two commits:\r\n- uint256: replace use of sprintf with per-digit hex conversion\r\n- test: Replace remaining sprintf with snprintf",
      "created_at" : "2017-02-27T06:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#issuecomment-282641522",
      "id" : 282641522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9867",
      "updated_at" : "2017-02-27T06:49:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/282641522",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144316"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144316"
         }
      },
      "body" : "why not `size_t`?",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T06:51:01Z",
      "diff_hunk" : "@@ -20,10 +20,15 @@ base_blob<BITS>::base_blob(const std::vector<unsigned char>& vch)\n template <unsigned int BITS>\n std::string base_blob<BITS>::GetHex() const\n {\n-    char psz[sizeof(data) * 2 + 1];\n-    for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n-    return std::string(psz, psz + sizeof(data) * 2);\n+    static const char *hex_chars = \"0123456789abcdef\";\n+    std::string retval;\n+    retval.reserve(sizeof(data) * 2);\n+    for (unsigned int i = 0; i < sizeof(data); i++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144316",
      "id" : 103144316,
      "original_commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "original_position" : 11,
      "path" : "src/uint256.cpp",
      "position" : 11,
      "pull_request_review_id" : 23920882,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144564"
         }
      },
      "body" : "**edit**: fail",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T06:53:57Z",
      "diff_hunk" : "@@ -20,10 +20,15 @@ base_blob<BITS>::base_blob(const std::vector<unsigned char>& vch)\n template <unsigned int BITS>\n std::string base_blob<BITS>::GetHex() const\n {\n-    char psz[sizeof(data) * 2 + 1];\n-    for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n-    return std::string(psz, psz + sizeof(data) * 2);\n+    static const char *hex_chars = \"0123456789abcdef\";\n+    std::string retval;\n+    retval.reserve(sizeof(data) * 2);\n+    for (unsigned int i = 0; i < sizeof(data); i++) {\n+        uint8_t value = data[sizeof(data) - i - 1];\n+        retval.push_back(hex_chars[value >> 4]);\n+        retval.push_back(hex_chars[value & 0xf]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144564",
      "id" : 103144564,
      "original_commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "original_position" : 14,
      "path" : "src/uint256.cpp",
      "position" : 14,
      "pull_request_review_id" : 23921158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144570"
         }
      },
      "body" : "Meh. For loop counters it's generally enough to use a 32-bit type. Especially if you know you're only going to count to 64, ever.",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T06:54:00Z",
      "diff_hunk" : "@@ -20,10 +20,15 @@ base_blob<BITS>::base_blob(const std::vector<unsigned char>& vch)\n template <unsigned int BITS>\n std::string base_blob<BITS>::GetHex() const\n {\n-    char psz[sizeof(data) * 2 + 1];\n-    for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n-    return std::string(psz, psz + sizeof(data) * 2);\n+    static const char *hex_chars = \"0123456789abcdef\";\n+    std::string retval;\n+    retval.reserve(sizeof(data) * 2);\n+    for (unsigned int i = 0; i < sizeof(data); i++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144570",
      "id" : 103144570,
      "original_commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "original_position" : 11,
      "path" : "src/uint256.cpp",
      "position" : 11,
      "pull_request_review_id" : 23921161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144646"
         }
      },
      "body" : "But incorrect.",
      "commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "created_at" : "2017-02-27T06:54:35Z",
      "diff_hunk" : "@@ -20,10 +20,15 @@ base_blob<BITS>::base_blob(const std::vector<unsigned char>& vch)\n template <unsigned int BITS>\n std::string base_blob<BITS>::GetHex() const\n {\n-    char psz[sizeof(data) * 2 + 1];\n-    for (unsigned int i = 0; i < sizeof(data); i++)\n-        sprintf(psz + i * 2, \"%02x\", data[sizeof(data) - i - 1]);\n-    return std::string(psz, psz + sizeof(data) * 2);\n+    static const char *hex_chars = \"0123456789abcdef\";\n+    std::string retval;\n+    retval.reserve(sizeof(data) * 2);\n+    for (unsigned int i = 0; i < sizeof(data); i++) {\n+        uint8_t value = data[sizeof(data) - i - 1];\n+        retval.push_back(hex_chars[value >> 4]);\n+        retval.push_back(hex_chars[value & 0xf]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9867#discussion_r103144646",
      "id" : 103144646,
      "original_commit_id" : "30dc47717ce0495342cd4d8e07466436cea6895a",
      "original_position" : 14,
      "path" : "src/uint256.cpp",
      "position" : 14,
      "pull_request_review_id" : 23921240,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9867",
      "updated_at" : "2017-02-27T06:54:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103144646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
