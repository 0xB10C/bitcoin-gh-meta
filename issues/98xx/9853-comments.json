[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r102978678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102978678"
         }
      },
      "body" : "Is there a plan to switch from integer literals to constants in a later PR? Seems like it would be nice to say `RPC_WALLET_ERROR` instead of `-4`.",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-24T16:35:28Z",
      "diff_hunk" : "@@ -128,7 +128,7 @@ def test_segwit_bumpfee_succeeds(rbf_node, dest_address):\n def test_nonrbf_bumpfee_fails(peer_node, dest_address):\n     # cannot replace a non RBF transaction (from node which did not enable RBF)\n     not_rbfid = create_fund_sign_send(peer_node, {dest_address: 0.00090000})\n-    assert_raises_message(JSONRPCException, \"not BIP 125 replaceable\", peer_node.bumpfee, not_rbfid)\n+    assert_raises_jsonrpc(-4, \"not BIP 125 replaceable\", peer_node.bumpfee, not_rbfid)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r102978678",
      "id" : 102978678,
      "original_commit_id" : "a24d00cb9de812a3657f92f610c876eb7933e8ac",
      "original_position" : 5,
      "path" : "qa/rpc-tests/bumpfee.py",
      "position" : 5,
      "pull_request_review_id" : 23755005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-24T16:35:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/102978678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103075392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103075392"
         }
      },
      "body" : "Yes that would be nice, but is orthogonal to this change, so if you want to do that it'd indeed be a different PR.",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-25T09:31:48Z",
      "diff_hunk" : "@@ -128,7 +128,7 @@ def test_segwit_bumpfee_succeeds(rbf_node, dest_address):\n def test_nonrbf_bumpfee_fails(peer_node, dest_address):\n     # cannot replace a non RBF transaction (from node which did not enable RBF)\n     not_rbfid = create_fund_sign_send(peer_node, {dest_address: 0.00090000})\n-    assert_raises_message(JSONRPCException, \"not BIP 125 replaceable\", peer_node.bumpfee, not_rbfid)\n+    assert_raises_jsonrpc(-4, \"not BIP 125 replaceable\", peer_node.bumpfee, not_rbfid)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103075392",
      "id" : 103075392,
      "original_commit_id" : "a24d00cb9de812a3657f92f610c876eb7933e8ac",
      "original_position" : 5,
      "path" : "qa/rpc-tests/bumpfee.py",
      "position" : 5,
      "pull_request_review_id" : 23854847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-25T09:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103075392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103531619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103531619"
         }
      },
      "body" : "In cases where bumpfee is called erroneously with a transaction that shouldn't be bumped, invalid parameter seems more apt than wallet error.\r\n\r\nProbably the most important thing you want to know when you get an error message from an API is whether the error is caused by something that you control and need to fix, or whether it's caused by something out of your control (like an implementation bug, or corrupt data, or a temporary failure). RPC_INVALID_PARAMETER clearly tells you that you need to fix something, while RPC_WALLET_ERROR is vague but suggests that something's wrong with the wallet.\r\n\r\n",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-28T19:21:05Z",
      "diff_hunk" : "@@ -2753,33 +2753,33 @@ UniValue bumpfee(const JSONRPCRequest& request)\n     CWalletTx& wtx = pwalletMain->mapWallet[hash];\n \n     if (pwalletMain->HasWalletSpend(hash)) {\n-        throw JSONRPCError(RPC_MISC_ERROR, \"Transaction has descendants in the wallet\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Transaction has descendants in the wallet\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103531619",
      "id" : 103531619,
      "original_commit_id" : "a24d00cb9de812a3657f92f610c876eb7933e8ac",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 23,
      "pull_request_review_id" : 24321496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-28T19:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103531619",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103533437"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103533437"
         }
      },
      "body" : "Maybe invalid parameter here as well.",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-28T19:29:39Z",
      "diff_hunk" : "@@ -338,11 +338,11 @@ UniValue removeprunedfunds(const JSONRPCRequest& request)\n     vector<uint256> vHashOut;\n \n     if(pwalletMain->ZapSelectTx(vHash, vHashOut) != DB_LOAD_OK) {\n-        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Could not properly delete the transaction.\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Could not properly delete the transaction.\");\n     }\n \n     if(vHashOut.empty()) {\n-        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Transaction does not exist in wallet.\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Transaction does not exist in wallet.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103533437",
      "id" : 103533437,
      "original_commit_id" : "4befdf5b64bdb1f8cee1f8a0ec58272890834cc6",
      "original_position" : 10,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 10,
      "pull_request_review_id" : 24321496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-28T19:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103533437",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103537074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103537074"
         }
      },
      "body" : "ZapSelect returns a DBErrors enum value which seems like it could be mapped to an RPC error (would also be nice to include in the error string).",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-28T19:47:36Z",
      "diff_hunk" : "@@ -338,11 +338,11 @@ UniValue removeprunedfunds(const JSONRPCRequest& request)\n     vector<uint256> vHashOut;\n \n     if(pwalletMain->ZapSelectTx(vHash, vHashOut) != DB_LOAD_OK) {\n-        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Could not properly delete the transaction.\");\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Could not properly delete the transaction.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103537074",
      "id" : 103537074,
      "original_commit_id" : "4befdf5b64bdb1f8cee1f8a0ec58272890834cc6",
      "original_position" : 5,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 5,
      "pull_request_review_id" : 24321496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-28T19:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103537074",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103537732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103537732"
         }
      },
      "body" : "Some of these MISC_ERROR cases make it seem like we could benefit from an new RPC_INVALID_STATE value. (Blockchain too short is another case below.)",
      "commit_id" : "b34faf156d49705faa335641cfbfc0efd60bb781",
      "created_at" : "2017-02-28T19:50:56Z",
      "diff_hunk" : "@@ -829,7 +834,7 @@ UniValue pruneblockchain(const JSONRPCRequest& request)\n             + HelpExampleRpc(\"pruneblockchain\", \"1000\"));\n \n     if (!fPruneMode)\n-        throw JSONRPCError(RPC_METHOD_NOT_FOUND, \"Cannot prune blocks because node is not in prune mode.\");\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Cannot prune blocks because node is not in prune mode.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9853#discussion_r103537732",
      "id" : 103537732,
      "original_commit_id" : "119d4e8d5dfac2bb7d3f9bc7b725c87191bf2084",
      "original_position" : 24,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 24,
      "pull_request_review_id" : 24321496,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9853",
      "updated_at" : "2017-02-28T19:56:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/103537732",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
