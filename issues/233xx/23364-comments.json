[
   {
      "author_association" : "NONE",
      "body" : "Could you PR the benchmark used for this? It would be interesting to compare it with bit-twiddling approaches; e.g. g++/clang will SSE-vectorize code that uses something like\r\n```\r\n    *it++ = ((v >> 4) < 10 ? '0' + (v >> 4) : 'a' + (v >> 4) - 10);\r\n    *it++ = ((v & 0xF) < 10 ? '0' + (v & 0xF) : 'a' + (v & 0xF) - 10);\r\n```\r\n(I'm clearly assuming ASCII here, but so does the current implementation of `HexDigit`)",
      "created_at" : "2021-10-26T22:31:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23364#issuecomment-952378024",
      "id" : 952378024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23364",
      "node_id" : "IC_kwDOABII5844xCKo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952378024/reactions"
      },
      "updated_at" : "2021-10-26T22:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952378024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1747924?v=4",
         "events_url" : "https://api.github.com/users/madars/events{/privacy}",
         "followers_url" : "https://api.github.com/users/madars/followers",
         "following_url" : "https://api.github.com/users/madars/following{/other_user}",
         "gists_url" : "https://api.github.com/users/madars/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/madars",
         "id" : 1747924,
         "login" : "madars",
         "node_id" : "MDQ6VXNlcjE3NDc5MjQ=",
         "organizations_url" : "https://api.github.com/users/madars/orgs",
         "received_events_url" : "https://api.github.com/users/madars/received_events",
         "repos_url" : "https://api.github.com/users/madars/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/madars/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/madars/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/madars"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not entirely sure, but my intuition says that accessing a char array through a uint16_t pointer is undefined behavior.",
      "created_at" : "2021-10-26T22:32:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23364#issuecomment-952378664",
      "id" : 952378664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23364",
      "node_id" : "IC_kwDOABII5844xCUo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952378664/reactions"
      },
      "updated_at" : "2021-10-26T22:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952378664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Could you PR the benchmark used for this? It would be interesting to compare it with bit-twiddling approaches; e.g. g++/clang will SSE-vectorize code that uses something like\r\n> \r\n> ```\r\n>     *it++ = ((v >> 4) < 10 ? '0' + (v >> 4) : 'a' + (v >> 4) - 10);\r\n>     *it++ = ((v & 0xF) < 10 ? '0' + (v & 0xF) : 'a' + (v & 0xF) - 10);\r\n> ```\r\n> \r\n> (I'm clearly assuming ASCII here, but so does the current implementation of `HexDigit`)\r\n\r\nThe speedup comes from the 16-bit write.\r\n\r\n> I'm not entirely sure, but my intuition says that accessing a char array through a uint16_t pointer is undefined behavior.\r\n\r\nmodifying is undefined behavior.",
      "created_at" : "2021-10-26T23:29:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23364#issuecomment-952407624",
      "id" : 952407624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23364",
      "node_id" : "IC_kwDOABII5844xJZI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952407624/reactions"
      },
      "updated_at" : "2021-10-26T23:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952407624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/888782?v=4",
         "events_url" : "https://api.github.com/users/denis2342/events{/privacy}",
         "followers_url" : "https://api.github.com/users/denis2342/followers",
         "following_url" : "https://api.github.com/users/denis2342/following{/other_user}",
         "gists_url" : "https://api.github.com/users/denis2342/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/denis2342",
         "id" : 888782,
         "login" : "denis2342",
         "node_id" : "MDQ6VXNlcjg4ODc4Mg==",
         "organizations_url" : "https://api.github.com/users/denis2342/orgs",
         "received_events_url" : "https://api.github.com/users/denis2342/received_events",
         "repos_url" : "https://api.github.com/users/denis2342/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/denis2342/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/denis2342/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/denis2342"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Could you PR the benchmark used for this?\r\n\r\nThe times from the commit log where measured with a clock_gettime(CLOCK_MONOTONIC_RAW) in the test. To be sure I patched roc/blockchain.cpp to measure the getblock non verbose call. For a 1.6MB block (706,813 ) unpatched it needed 1.7ms average and 1.2ms average with the new code.",
      "created_at" : "2021-10-27T00:46:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23364#issuecomment-952441807",
      "id" : 952441807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23364",
      "node_id" : "IC_kwDOABII5844xRvP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952441807/reactions"
      },
      "updated_at" : "2021-10-27T00:47:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952441807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/888782?v=4",
         "events_url" : "https://api.github.com/users/denis2342/events{/privacy}",
         "followers_url" : "https://api.github.com/users/denis2342/followers",
         "following_url" : "https://api.github.com/users/denis2342/following{/other_user}",
         "gists_url" : "https://api.github.com/users/denis2342/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/denis2342",
         "id" : 888782,
         "login" : "denis2342",
         "node_id" : "MDQ6VXNlcjg4ODc4Mg==",
         "organizations_url" : "https://api.github.com/users/denis2342/orgs",
         "received_events_url" : "https://api.github.com/users/denis2342/received_events",
         "repos_url" : "https://api.github.com/users/denis2342/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/denis2342/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/denis2342/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/denis2342"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> modifying is undefined behavior.\r\n\r\n`memcpy` would make this defined while still likely aggressively optimized by a modern compiler, no?",
      "created_at" : "2021-10-27T02:08:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23364#issuecomment-952474285",
      "id" : 952474285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23364",
      "node_id" : "IC_kwDOABII5844xZqt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952474285/reactions"
      },
      "updated_at" : "2021-10-27T02:08:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/952474285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
