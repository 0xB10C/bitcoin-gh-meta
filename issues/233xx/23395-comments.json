[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I understand the motivation however this option can be misused IMO so not sure about adding it\r\n\r\nI was reading the comments in https://github.com/bitcoin/bitcoin/pull/15367 and I think we should even remove `-startupnotify` because it provides an inbuilt [binder](https://en.wikipedia.org/wiki/File_binder) which can be used to run malware in the background when Bitcoin Core starts.\r\n\r\nObservation: Although we can run almost everything as this option allows shell commands but I was experimenting if its possible to keep Bitcoin Core running and never shutdown. Worked intermittently but nothing interesting.\r\n\r\n```\r\nbitcoind -shutdownnotify=\"bitcoind\"\r\n\r\nbitcoin-cli stop\r\n```\r\n\r\nIf getting notifications on start and shutdown is the goal maybe we should not provide easy option to execute shell commands with it. A file with name `notifications.dat` that saves such notifications should be enough IMO.",
      "created_at" : "2021-10-31T19:08:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-955775728",
      "id" : 955775728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
      "node_id" : "IC_kwDOABII58449_rw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955775728/reactions"
      },
      "updated_at" : "2021-10-31T19:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955775728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, @prayank23 and @shaavan for the review and pointing out the edge case where a user might supply `\"bitcoind\"` as a shutdown notify bash command. \r\n\r\nA solution for that would be to call `.join()` instead `.detach()` in [here](https://github.com/bitcoin/bitcoin/pull/23395/files#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR183). This will result in bitcoind completing the entire shutdown sequence only after the bash command has finished executing. In the scenario where `\"bitcoind\"` is supplied as the bash command, the second `\"bitcoind\"` will fail as bitcoind is already running. However, this would also mean that all other bash commands would also be performed synchronously. \r\n\r\nOpen to feedback on how we should handle the scenario when a user supplies `\"bitcoind\"` as a shutdown notify bash command.\r\n\r\n> When I tried to use this argument value myself, there was no output whatsoever.\r\n\r\nIf you view `debug.log` you should be able to see if `bitcoind` has successfully restarted by searching for `runCommand error:`",
      "created_at" : "2021-11-01T12:07:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956178462",
      "id" : 956178462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
      "node_id" : "IC_kwDOABII5844_iAe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956178462/reactions"
      },
      "updated_at" : "2021-11-01T12:15:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956178462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/49265907?v=4",
         "events_url" : "https://api.github.com/users/klementtan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/klementtan/followers",
         "following_url" : "https://api.github.com/users/klementtan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/klementtan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/klementtan",
         "id" : 49265907,
         "login" : "klementtan",
         "node_id" : "MDQ6VXNlcjQ5MjY1OTA3",
         "organizations_url" : "https://api.github.com/users/klementtan/orgs",
         "received_events_url" : "https://api.github.com/users/klementtan/received_events",
         "repos_url" : "https://api.github.com/users/klementtan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/klementtan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/klementtan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Open to feedback on how we should handle the scenario when a user supplies \"bitcoind\" as a shutdown notify bash command.\r\n\r\nI think we can avoid this case. It was just an observation which looked interesting initially. If a user wants to experiment and provides such argument he should be able to kill process or reboot system.\r\n\r\nI have issues with an option in Bitcoin Core that triggers any shell command based on start/shutdown. This feature can be helpful for lot of people with malicious intent.",
      "created_at" : "2021-11-01T14:08:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956265352",
      "id" : 956265352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
      "node_id" : "IC_kwDOABII5844_3OI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956265352/reactions"
      },
      "updated_at" : "2021-11-01T14:08:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956265352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   }
]
