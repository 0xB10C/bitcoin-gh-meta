[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I will add tests after initial review",
      "created_at" : "2021-10-20T05:51:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947349693",
      "id" : 947349693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844d2i9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947349693/reactions"
      },
      "updated_at" : "2021-10-20T05:51:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947349693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732469998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732469998"
         }
      },
      "author_association" : "MEMBER",
      "body" : "wouldn't it make sense to combine the `!blockindex` check here?",
      "commit_id" : "2730b680d250a5e258c38e9d638baf36e78bc17e",
      "created_at" : "2021-10-20T07:03:19Z",
      "diff_hunk" : "@@ -211,8 +213,28 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (!blockindex) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);\n+\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732469998",
      "id" : 732469998,
      "line" : 225,
      "node_id" : "PRRC_kwDOABII584rqJru",
      "original_commit_id" : "2730b680d250a5e258c38e9d638baf36e78bc17e",
      "original_line" : 225,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 48,
      "pull_request_review_id" : 784071729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732469998/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T07:04:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732469998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732470233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732470233"
         }
      },
      "author_association" : "MEMBER",
      "body" : "it is optional?",
      "commit_id" : "2730b680d250a5e258c38e9d638baf36e78bc17e",
      "created_at" : "2021-10-20T07:03:46Z",
      "diff_hunk" : "@@ -97,6 +98,7 @@ static RPCHelpMan getrawtransaction()\n                          {\n                              {RPCResult::Type::BOOL, \"in_active_chain\", /* optional */ true, \"Whether specified block is in the active chain or not (only present with explicit \\\"blockhash\\\" argument)\"},\n                              {RPCResult::Type::STR_HEX, \"hex\", \"The serialized, hex-encoded data for 'txid'\"},\n+                             {RPCResult::Type::STR_AMOUNT, \"fee\", \"transaction fee in \" + CURRENCY_UNIT},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732470233",
      "id" : 732470233,
      "line" : 101,
      "node_id" : "PRRC_kwDOABII584rqJvZ",
      "original_commit_id" : "2730b680d250a5e258c38e9d638baf36e78bc17e",
      "original_line" : 101,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 29,
      "pull_request_review_id" : 784071729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732470233/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T07:04:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732470233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732734970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732734970"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "yes, and moved",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T12:42:53Z",
      "diff_hunk" : "@@ -211,8 +213,28 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (!blockindex) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);\n+\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732734970",
      "id" : 732734970,
      "in_reply_to_id" : 732469998,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584rrKX6",
      "original_commit_id" : "2730b680d250a5e258c38e9d638baf36e78bc17e",
      "original_line" : 225,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 784429612,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732734970/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T12:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732734970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732741166"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732741166"
         }
      },
      "author_association" : "MEMBER",
      "body" : "this is an unrelated behavior change",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T12:49:52Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732741166",
      "id" : 732741166,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII584rrL4u",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 784437933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732741166/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T12:49:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732741166",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732779544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732779544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "right. good catch. ",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T13:30:32Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732779544",
      "id" : 732779544,
      "in_reply_to_id" : 732741166,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII584rrVQY",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 784490365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732779544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T13:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732779544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732823420"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732823420"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I mean why are you changing this at all? Seems unrelated and the existing code should work fine.",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T14:14:00Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732823420",
      "id" : 732823420,
      "in_reply_to_id" : 732741166,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII584rrf98",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 784552225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732823420/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T14:14:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732823420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732827529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732827529"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "you said \"wouldn't it make sense to combine the !blockindex check here?\"\r\nin your inital review, i thought you meant combine !blockindex with my new if statement ",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T14:18:01Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732827529",
      "id" : 732827529,
      "in_reply_to_id" : 732741166,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII584rrg-J",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 784557989,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732827529/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T14:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732827529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732832020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732832020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, but the blockindex check can stay as-is. Also, I think it makes more sense to clarify the condition on when the field is existing/missing.\r\n\r\n```\r\nif (a) pushKV();\r\n```\r\n\r\nis clearer than\r\n\r\n```\r\nif (something)\r\n  if (a) pushKV();\r\n  return\r\npushKV();",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T14:22:23Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732832020",
      "id" : 732832020,
      "in_reply_to_id" : 732741166,
      "line" : 226,
      "node_id" : "PRRC_kwDOABII584rriEU",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 784564260,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732832020/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T14:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732832020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732846354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732846354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I had already worked out a solution to this problem, but with a different approach,\r\nThe difference is in how to get the `CTxUndo* txundo` value.\r\n\r\nNot sure if getting the coins of `txundo` through `CCoinsViewMemPool` is better than through `BlockUndo`.\r\n\r\n```suggestion\r\n        auto mempool = node.mempool.get();\r\n    LOCK2(cs_main, mempool->cs);\r\n    CCoinsViewCache& viewChain = chainman.ActiveChainstate().CoinsTip();\r\n    CCoinsViewMemPool viewMempool(&viewChain, *mempool);\r\n\r\n    std::unique_ptr<CTxUndo> txundo(new CTxUndo());\r\n\r\n    if (!tx->IsCoinBase()) {\r\n        txundo->vprevout.reserve(tx->vin.size());\r\n        for (unsigned int i = 0; i < tx->vin.size(); i++) {\r\n            Coin coin;\r\n            const CTxIn& txin = tx->vin[i];\r\n            if (viewMempool.GetCoin(txin.prevout, coin)) {\r\n                txundo->vprevout.emplace_back(std::move(coin));\r\n            }\r\n        }\r\n    } else {\r\n        txundo = nullptr;\r\n    }\r\n```",
      "commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "created_at" : "2021-10-20T14:35:47Z",
      "diff_hunk" : "@@ -211,8 +213,27 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r732846354",
      "id" : 732846354,
      "line" : 216,
      "node_id" : "PRRC_kwDOABII584rrlkS",
      "original_commit_id" : "d3f084a19bd930a365dcc1f6538d29570241d12c",
      "original_line" : 216,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 39,
      "pull_request_review_id" : 784583808,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732846354/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T14:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732846354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/84432093?v=4",
         "events_url" : "https://api.github.com/users/lsilva01/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lsilva01/followers",
         "following_url" : "https://api.github.com/users/lsilva01/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lsilva01/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lsilva01",
         "id" : 84432093,
         "login" : "lsilva01",
         "node_id" : "MDQ6VXNlcjg0NDMyMDkz",
         "organizations_url" : "https://api.github.com/users/lsilva01/orgs",
         "received_events_url" : "https://api.github.com/users/lsilva01/received_events",
         "repos_url" : "https://api.github.com/users/lsilva01/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lsilva01/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lsilva01"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r733057279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733057279"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Gotcha, Hopefully now it looks better",
      "commit_id" : "2e8ce71097d9e521354217c27c2bc059ae3252d4",
      "created_at" : "2021-10-20T18:50:48Z",
      "diff_hunk" : "@@ -211,8 +213,24 @@ static RPCHelpMan getrawtransaction()\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    result.pushKV(\"in_active_chain\", in_active_chain);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r733057279",
      "id" : 733057279,
      "in_reply_to_id" : 732741166,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584rsZD_",
      "original_commit_id" : "25989832aacc77dc362410debf7df718e48b5852",
      "original_line" : 226,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 784876223,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733057279/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-20T18:50:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/733057279",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think this has been said on IRC already: Shouldn't this be hidden behind a flag like the RPC it is copied from?",
      "created_at" : "2021-10-20T18:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947945962",
      "id" : 947945962,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gIHq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947945962/reactions"
      },
      "updated_at" : "2021-10-20T18:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947945962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK.\r\n> \r\n> It would be interesting to add a functional test case.\r\n\r\nAgreed, wanted to discuss the implementation before diving in. \r\nAnything special I should know about testing `./test/functional/rpc_rawtransaction.py` ? This is my 1st time doing functional test.",
      "created_at" : "2021-10-20T18:53:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947946201",
      "id" : 947946201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gILZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947946201/reactions"
      },
      "updated_at" : "2021-10-20T18:53:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947946201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think this has been said on IRC already: Shouldn't this be hidden behind a flag like the RPC it is copied from?\r\n\r\nTo confirm we want the second (hybrid) parameter to have three verbosity levels:\r\n\r\n* `0`  or `false` - hex encoded\r\n*  `1` or `true`  - returns an Object with information about txid\r\n* `2` -  adds fee field to Object",
      "created_at" : "2021-10-20T19:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947957710",
      "id" : 947957710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gK_O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947957710/reactions"
      },
      "updated_at" : "2021-10-20T19:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947957710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, if that is the behavior of the other RPC, it makes sense to copy it.",
      "created_at" : "2021-10-20T19:11:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947959148",
      "id" : 947959148,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gLVs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947959148/reactions"
      },
      "updated_at" : "2021-10-20T19:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947959148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Yes, if that is the behavior of the other RPC, it makes sense to copy it.\r\n\r\nI'm taking this from `getblocks` ",
      "created_at" : "2021-10-20T19:15:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947962128",
      "id" : 947962128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gMEQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947962128/reactions"
      },
      "updated_at" : "2021-10-20T19:15:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947962128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You might want to also add the UTXOs being spent by the transaction. You're looking those up anyway.",
      "created_at" : "2021-10-20T19:17:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-947963375",
      "id" : 947963375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844gMXv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947963375/reactions"
      },
      "updated_at" : "2021-10-20T19:17:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/947963375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The tests can also be taken from the other RPC: https://github.com/bitcoin/bitcoin/pull/22918/files",
      "created_at" : "2021-10-21T11:22:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-948513873",
      "id" : 948513873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844iSxR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948513873/reactions"
      },
      "updated_at" : "2021-10-21T11:22:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948513873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The tests can also be taken from the other RPC: https://github.com/bitcoin/bitcoin/pull/22918/files\r\n\r\nAdded tests and verbosity levels",
      "created_at" : "2021-10-21T18:53:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-948909763",
      "id" : 948909763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844jzbD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948909763/reactions"
      },
      "updated_at" : "2021-10-21T18:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/948909763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23507](https://github.com/bitcoin/bitcoin/pull/23507) (Refactor: Improve API design of `ScriptToUniv`, `TxToUniv` etc to return the `UniValue` instead of mutating a parameter/reference by mjdietzx)\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#22924](https://github.com/bitcoin/bitcoin/pull/22924) (refactor: cleanup/followup of Remove -deprecatedrpc=addresses flag by mjdietzx)\n* [#22689](https://github.com/bitcoin/bitcoin/pull/22689) (rpc: deprecate top-level fee fields in getmempool RPCs by josibake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-10-25T18:59:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-951216484",
      "id" : 951216484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5844smlk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/951216484/reactions"
      },
      "updated_at" : "2021-11-14T17:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/951216484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r738608678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738608678"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a reason you don't add `verbosity == 1` to this conjunction instead of duplicating the same `TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate()); return result;` above?",
      "commit_id" : "83e5f6c5844892da4c4f9290d6c20fbaee2ae295",
      "created_at" : "2021-10-28T17:31:40Z",
      "diff_hunk" : "@@ -206,13 +213,35 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+    if (verbosity == 1) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r738608678",
      "id" : 738608678,
      "line" : 232,
      "node_id" : "PRRC_kwDOABII584sBkYm",
      "original_commit_id" : "83e5f6c5844892da4c4f9290d6c20fbaee2ae295",
      "original_line" : 232,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 93,
      "pull_request_review_id" : 792171748,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738608678/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-28T17:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738608678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r738622797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738622797"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess mostly to prevent unneeded allocation of \r\n```\r\n    std::optional<size_t>  opt_tx_position{std::nullopt};\r\n    CBlockUndo blockUndo;\r\n    CBlock block;\r\n```\r\n I can move it to the `if (!blockindex || IsBlockPruned(blockindex)...`  if you like. \r\n",
      "commit_id" : "83e5f6c5844892da4c4f9290d6c20fbaee2ae295",
      "created_at" : "2021-10-28T17:51:28Z",
      "diff_hunk" : "@@ -206,13 +213,35 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+    if (verbosity == 1) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r738622797",
      "id" : 738622797,
      "in_reply_to_id" : 738608678,
      "line" : 232,
      "node_id" : "PRRC_kwDOABII584sBn1N",
      "original_commit_id" : "83e5f6c5844892da4c4f9290d6c20fbaee2ae295",
      "original_line" : 232,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 93,
      "pull_request_review_id" : 792191018,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738622797/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-28T17:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/738622797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> You might want to also add the UTXOs being spent by the transaction. You're looking those up anyway.\r\n\r\n@sipa Can you clarify a bit more on `add the UTXOs being spent` ? Specifically, what you like to add to the response body?",
      "created_at" : "2021-10-28T18:02:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-954076159",
      "id" : 954076159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII58443gv_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954076159/reactions"
      },
      "updated_at" : "2021-10-28T18:02:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954076159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@dougEfresh The scriptPubKey and amount being spent for each input (together with information about the scriptPubKey like the output already has).",
      "created_at" : "2021-10-28T18:20:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-954089224",
      "id" : 954089224,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII58443j8I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954089224/reactions"
      },
      "updated_at" : "2021-10-28T18:20:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954089224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Showing the utxos being spent is also being done by the other RPC. Any questions you might have should be answered by looking at the code changes of https://github.com/bitcoin/bitcoin/pull/22918/files",
      "created_at" : "2021-10-29T09:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-954580846",
      "id" : 954580846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII58445b9u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954580846/reactions"
      },
      "updated_at" : "2021-10-29T09:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954580846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739162422"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739162422"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For code clarity, I moved `verbosity == 1`  to the if block. \r\n\r\nThe performance impact is marginal ",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-29T11:43:32Z",
      "diff_hunk" : "@@ -206,13 +213,35 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+    if (verbosity == 1) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+\n+    std::optional<size_t>  opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (!blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739162422",
      "id" : 739162422,
      "in_reply_to_id" : 738608678,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sDrk2",
      "original_commit_id" : "83e5f6c5844892da4c4f9290d6c20fbaee2ae295",
      "original_line" : 232,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 792936962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739162422/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-29T11:43:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739162422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Showing the utxos being spent is also being done by the other RPC. Any questions you might have should be answered by looking at the code changes of https://github.com/bitcoin/bitcoin/pull/22918/files\r\n\r\nthanks, added utxos with  `TxVerbosity::SHOW_DETAILS_AND_PREVOUT`\r\n\r\nMy latest change includes \r\n\r\n* test for prevout (utxo)\r\n* release documentation\r\n* consolidate if statement in ./src/rpc/rawtransaction.cpp  getrawtransaction\r\n  ```\r\n  if (verbosity == 1 || !blockindex || IsBlockPruned(blockindex) ....\r\n  ```",
      "created_at" : "2021-10-29T11:48:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-954678983",
      "id" : 954678983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII58445z7H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954678983/reactions"
      },
      "updated_at" : "2021-10-29T11:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954678983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739167913"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739167913"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I will add a space between ` inputs(only` after review by others.",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-29T11:52:34Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbose is 0, 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\"\n+                \"If verbose is 1 or 'true', returns an Object with information about 'txid'.\\n\"\n+                \"If verbose is 2, returns an Object with information about 'txid', including fees and prevout information for inputs(only for unpruned blocks in the current best chain).\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739167913",
      "id" : 739167913,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII584sDs6p",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 87,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 36,
      "pull_request_review_id" : 792944260,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739167913/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-29T11:54:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739167913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739381944"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739381944"
         }
      },
      "author_association" : "MEMBER",
      "body" : "verbos*ity*",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-29T16:29:57Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbose is 0, 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739381944",
      "id" : 739381944,
      "line" : 85,
      "node_id" : "PRRC_kwDOABII584sEhK4",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 85,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 34,
      "pull_request_review_id" : 793244895,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739381944/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-29T16:29:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739381944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739382479"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739382479"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Stick to just the numbers in docs. (bool is essentially just backwards compat)",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-29T16:30:52Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbose is 0, 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\"\n+                \"If verbose is 1 or 'true', returns an Object with information about 'txid'.\\n\"\n+                \"If verbose is 2, returns an Object with information about 'txid', including fees and prevout information for inputs(only for unpruned blocks in the current best chain).\\n\",\n                 {\n                     {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n-                    {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If false, return a string, otherwise return a json object\"},\n+                    {\"verbosity|verbose\", RPCArg::Type::NUM, RPCArg::Default{0}, \"0|false for hex-encoded data, 1|true for a json object, and 2 for json object with fee\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739382479",
      "id" : 739382479,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII584sEhTP",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 90,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 40,
      "pull_request_review_id" : 793245669,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739382479/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-29T16:30:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739382479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739601931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739601931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What is supposed to guarantee this is correct?",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-30T03:22:40Z",
      "diff_hunk" : "@@ -141,21 +143,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739601931",
      "id" : 739601931,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584sFW4L",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 152,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 55,
      "pull_request_review_id" : 793532825,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739601931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-30T03:22:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739601931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739621037"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739621037"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The value of fee is not important. I want to see that the field fee exists. Change it to `assert('fee' in gottxt)` ?\r\n\r\nThere are another tests (outside the scope of this PR) which validate the fee amount. ",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-30T07:28:40Z",
      "diff_hunk" : "@@ -141,21 +143,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739621037",
      "id" : 739621037,
      "in_reply_to_id" : 739601931,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584sFbit",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 152,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 55,
      "pull_request_review_id" : 793546313,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739621037/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-30T07:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739621037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739668657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739668657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe do `tx_fee = -self.nodes[2].gettransaction(tx)['fee']` immediately after sending and compare to that?",
      "commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "created_at" : "2021-10-30T15:59:47Z",
      "diff_hunk" : "@@ -141,21 +143,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r739668657",
      "id" : 739668657,
      "in_reply_to_id" : 739601931,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584sFnKx",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 152,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 55,
      "pull_request_review_id" : 793581717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739668657/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-30T15:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739668657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r740920756"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740920756"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No fee field in `gettransaction` . \r\nI added `assert('fee' in gottxt)`  but kept `assert_equal(gottx['fee'], Decimal('0.00002820'))` \r\n",
      "commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "created_at" : "2021-11-02T10:26:54Z",
      "diff_hunk" : "@@ -141,21 +143,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r740920756",
      "id" : 740920756,
      "in_reply_to_id" : 739601931,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584sKY20",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 152,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 54,
      "pull_request_review_id" : 795143842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740920756/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T10:26:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740920756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748786334"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748786334"
         }
      },
      "author_association" : "NONE",
      "body" : "I'm just studying for the pr review club. \r\n\r\n There was a question about the performance implications of this loop. I was digging through the code and I was perhaps thinking that CBlockUndo could maybe benefit from a faster data structure to find a transaction? Maybe a method that returns the data faster.\r\n\r\nPerhaps that is a later improvement and off topic?",
      "commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "created_at" : "2021-11-14T01:52:37Z",
      "diff_hunk" : "@@ -206,13 +214,31 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+\n+    std::optional<size_t> opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (verbosity == 1 || !blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    for (size_t i = 0; i < block.vtx.size(); ++i) {\n+        const CTransactionRef t = block.vtx.at(i);\n+        if (*t == *tx) {\n+            // blockundo does not have coinbase tx\n+            opt_tx_position = std::optional<size_t>{i-1};\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748786334",
      "id" : 748786334,
      "line" : 238,
      "node_id" : "PRRC_kwDOABII584soZKe",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 238,
      "original_position" : 106,
      "original_start_line" : 233,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 106,
      "pull_request_review_id" : 805417766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748786334/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 233,
      "start_side" : "RIGHT",
      "updated_at" : "2021-11-14T01:52:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748786334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45839100?v=4",
         "events_url" : "https://api.github.com/users/amovfx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amovfx/followers",
         "following_url" : "https://api.github.com/users/amovfx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amovfx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amovfx",
         "id" : 45839100,
         "login" : "amovfx",
         "node_id" : "MDQ6VXNlcjQ1ODM5MTAw",
         "organizations_url" : "https://api.github.com/users/amovfx/orgs",
         "received_events_url" : "https://api.github.com/users/amovfx/received_events",
         "repos_url" : "https://api.github.com/users/amovfx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amovfx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amovfx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amovfx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748868321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748868321"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Probably I am missing something, but I am not finding any `prevout` reference in the `getblock` help doc. Is it referring to it's internal implementation? Maybe this line could be made a little more clear? ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T15:13:55Z",
      "diff_hunk" : "@@ -99,6 +99,11 @@ Updated RPCs\n   causes the lock to be written persistently to the wallet database. This\n   allows UTXOs to remain locked even after node restarts or crashes. (#23065)\n \n+- `getrawtransaction` RPC verbose argument changed to verbosity levels: 0, 1 and 2 (backwards compatible).\n+  Verbosity 0 and 1 correspond to previous (verbose) argument's values `false` and `true`.\n+  Verbosity `3` contains an optional `fee` field and optional `prevout` subfield\n+  describing the spent output. See `getblock` RPC for `prevout` details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748868321",
      "id" : 748868321,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sotLh",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 105,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 805483976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748868321/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T18:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748868321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748871612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748871612"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "To keep parity with lines below, maybe also remove leading `\\n` from here? ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T15:40:45Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748871612",
      "id" : 748871612,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sot-8",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 83,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 805483976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748871612/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T18:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748871612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748873364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748873364"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the framing can be improved a bit.\r\n1. Using \"transaction\" instead of \"txid\". They are not in general replaceable with each other for all contexts. It's clearer to say \"details of transaction\" than \"details of txid\".\r\n2. The verbosity 2 comment can feel a little confusing for users on the \"prevout for inputs\" part. It might sound at first glance as the prevout for the tx containing inputs of the given tx. I think keeping it simple like \" ... , including fee and prevout information ... \" only is clear enough. The only structure related to prevout in a transaction is inputs, so its redundant to explicitly specify.    ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T15:55:36Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbosity is 0 or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\"\n+                \"If verbosity is 1, returns an Object with information about 'txid'.\\n\"\n+                \"If verbosity is 2, returns an Object with information about 'txid', including fees and prevout information for inputs (only for unpruned blocks in the current best chain).\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748873364",
      "id" : 748873364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584souaU",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 87,
      "original_position" : 36,
      "original_start_line" : 85,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 805483976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748873364/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-11-14T18:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748873364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748884982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748884982"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I am not entirely sure, should we still keep the previous usage in the examples above this line?\r\n\r\nEven though the `bool` values are still accepted, the help doc doesn't include it anymore, so it might be confusing to users.  ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T17:31:17Z",
      "diff_hunk" : "@@ -150,6 +153,7 @@ static RPCHelpMan getrawtransaction()\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" 2 \\\"myblockhash\\\"\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748884982",
      "id" : 748884982,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII584soxP2",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 182,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 105,
      "pull_request_review_id" : 805483976,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748884982/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T18:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748884982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914552"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I moved the \\n(s)",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T21:47:42Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914552",
      "id" : 748914552,
      "in_reply_to_id" : 748871612,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584so4d4",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 83,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 805521248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914552/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T21:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914657"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agreed and changed",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T21:48:36Z",
      "diff_hunk" : "@@ -150,6 +153,7 @@ static RPCHelpMan getrawtransaction()\n             + HelpExampleRpc(\"getrawtransaction\", \"\\\"mytxid\\\", true\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" false \\\"myblockhash\\\"\")\n             + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" true \\\"myblockhash\\\"\")\n+            + HelpExampleCli(\"getrawtransaction\", \"\\\"mytxid\\\" 2 \\\"myblockhash\\\"\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914657",
      "id" : 748914657,
      "in_reply_to_id" : 748884982,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII584so4fh",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 182,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 105,
      "pull_request_review_id" : 805521248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914657/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T21:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914824"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "See latest latest changes\r\nI added  separate RPC  documentation for `verbosity=2` \r\n```\r\nResult (for verbosity = 2):\r\n{                               (json object)\r\n  ...,                          Same output as verbosity = 1\r\n  \"fee\" : n,                    (numeric, optional) transaction fee in BTC, omitted if block undo data is not available\r\n  \"vin\" : [                     (json array)\r\n    {                           (json object, optional) utxo being spent, omitted if block undo data is not available\r\n      ...,                      Same output as verbosity = 1\r\n      \"prevout\" : {             (json object)\r\n        \"value\" : n,            (numeric) The value in BTC\r\n        \"height\" : n,           (numeric) previous block height\r\n        \"scriptPubKey\" : {      (json object)\r\n          \"asm\" : \"str\",        (string) the asm\r\n          \"hex\" : \"str\",        (string) the hex\r\n          \"type\" : \"str\",       (string) The type, eg 'pubkeyhash'\r\n          \"address\" : \"str\"     (string, optional) The Bitcoin address (only if a well-defined address exists)\r\n        }\r\n      }\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T21:50:02Z",
      "diff_hunk" : "@@ -79,13 +80,14 @@ static RPCHelpMan getrawtransaction()\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n                 \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"\\nHint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbosity is 0 or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\"\n+                \"If verbosity is 1, returns an Object with information about 'txid'.\\n\"\n+                \"If verbosity is 2, returns an Object with information about 'txid', including fees and prevout information for inputs (only for unpruned blocks in the current best chain).\\n\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914824",
      "id" : 748914824,
      "in_reply_to_id" : 748873364,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584so4iI",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 87,
      "original_position" : 36,
      "original_start_line" : 85,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 805521248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914824/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-11-14T21:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914964"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I was referring to the `getblock` in the above paragraph of the release notes. \r\nI updated to explicitly reference the above paragraph. ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T21:51:26Z",
      "diff_hunk" : "@@ -99,6 +99,11 @@ Updated RPCs\n   causes the lock to be written persistently to the wallet database. This\n   allows UTXOs to remain locked even after node restarts or crashes. (#23065)\n \n+- `getrawtransaction` RPC verbose argument changed to verbosity levels: 0, 1 and 2 (backwards compatible).\n+  Verbosity 0 and 1 correspond to previous (verbose) argument's values `false` and `true`.\n+  Verbosity `3` contains an optional `fee` field and optional `prevout` subfield\n+  describing the spent output. See `getblock` RPC for `prevout` details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748914964",
      "id" : 748914964,
      "in_reply_to_id" : 748868321,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584so4kU",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 105,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 805521248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914964/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-14T21:54:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748914964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748915529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748915529"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Someone did suggest a more performant  solution, I can't find it at the moment though. ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-14T21:56:02Z",
      "diff_hunk" : "@@ -206,13 +214,31 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+\n+    std::optional<size_t> opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (verbosity == 1 || !blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    for (size_t i = 0; i < block.vtx.size(); ++i) {\n+        const CTransactionRef t = block.vtx.at(i);\n+        if (*t == *tx) {\n+            // blockundo does not have coinbase tx\n+            opt_tx_position = std::optional<size_t>{i-1};\n+            break;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r748915529",
      "id" : 748915529,
      "in_reply_to_id" : 748786334,
      "line" : 264,
      "node_id" : "PRRC_kwDOABII584so4tJ",
      "original_commit_id" : "f30f007c829547e44cac4214c04a0fa7d0ddc3c2",
      "original_line" : 264,
      "original_position" : 106,
      "original_start_line" : 233,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 155,
      "pull_request_review_id" : 805522072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748915529/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 259,
      "start_side" : "RIGHT",
      "updated_at" : "2021-11-14T21:56:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748915529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Initial concept ACK. This is really helpful for wallets trying to sync with core rpc out there, and it will reduce get calls by half for input fetching. Thanks for working on this.\r\n> \r\n> Below are few minor nits.\r\n> \r\n> Will review in more detail later.\r\n\r\n@rajarshimaitra thanks for feedback. The test I  added  could use a good review. \r\n",
      "created_at" : "2021-11-14T22:04:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-968372084",
      "id" : 968372084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII5845uC90",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968372084/reactions"
      },
      "updated_at" : "2021-11-14T22:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968372084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r749529909"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749529909"
         }
      },
      "author_association" : "NONE",
      "body" : "This overflows in the case of coinbase transaction (i==0). To bring it in line with `getblock` (where the coinbase transaction is serialized without fees/prevouts when `verbosity` is set to `3`), you could add another OR clause on [#255](https://github.com/bitcoin/bitcoin/pull/23319/files#diff-a58e7bb9d9a8a0287c0b7281d99da4e79b6f8c2a5780c24c6d76c14212c48640R255) to also check for `tx->IsCoinBase()`, for example?",
      "commit_id" : "fee0b82aca8f9c8eba4b0bff3e6ec3ddbb7208ae",
      "created_at" : "2021-11-15T17:16:22Z",
      "diff_hunk" : "@@ -206,13 +240,31 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+\n+    std::optional<size_t> opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (verbosity == 1 || !blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    for (size_t i = 0; i < block.vtx.size(); ++i) {\n+        const CTransactionRef t = block.vtx.at(i);\n+        if (*t == *tx) {\n+            // blockundo does not have coinbase tx\n+            opt_tx_position = std::optional<size_t>{i-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r749529909",
      "id" : 749529909,
      "line" : 265,
      "node_id" : "PRRC_kwDOABII584srOs1",
      "original_commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "original_line" : 263,
      "original_position" : 154,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 156,
      "pull_request_review_id" : 806345918,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749529909/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-17T23:14:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749529909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r749620834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749620834"
         }
      },
      "author_association" : "NONE",
      "body" : "I understand that functionally this works fine, but it feels unnecessarily confusing to always pass `TxVerbosity::SHOW_DETAILS_AND_PREVOUT` even in the case when in actuality we're trying to get `TxVerbosity::SHOW_DETAILS` but relying on `txundo` being null to achieve that. Would it not be more prudent to instead add `verbosity` as an optional argument to `TxToJSON` and simply pass that along?",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-15T19:29:44Z",
      "diff_hunk" : "@@ -43,14 +44,14 @@\n \n #include <univalue.h>\n \n-static void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry, CChainState& active_chainstate)\n+static void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry, CChainState& active_chainstate, const CTxUndo* txundo = nullptr)\n {\n     // Call into TxToUniv() in bitcoin-common to decode the transaction hex.\n     //\n     // Blockchain contextual information (confirmations and blocktime) is not\n     // available to code in bitcoin-common, so we query them here and push the\n     // data into the returned UniValue.\n-    TxToUniv(tx, uint256(), entry, true, RPCSerializationFlags());\n+    TxToUniv(tx, uint256(), entry, true, RPCSerializationFlags(), txundo, TxVerbosity::SHOW_DETAILS_AND_PREVOUT);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r749620834",
      "id" : 749620834,
      "line" : 54,
      "node_id" : "PRRC_kwDOABII584srk5i",
      "original_commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "original_line" : 54,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 21,
      "pull_request_review_id" : 806345918,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749620834/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-15T19:41:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749620834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750119538"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750119538"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @stickies-v \r\n  I'll also add a function test to catch this condition",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-16T10:20:08Z",
      "diff_hunk" : "@@ -206,13 +240,31 @@ static RPCHelpMan getrawtransaction()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, errmsg + \". Use gettransaction for wallet transactions.\");\n     }\n \n-    if (!fVerbose) {\n+    if (verbosity == 0) {\n         return EncodeHexTx(*tx, RPCSerializationFlags());\n     }\n \n     UniValue result(UniValue::VOBJ);\n-    if (blockindex) result.pushKV(\"in_active_chain\", in_active_chain);\n-    TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+    if (blockindex) {\n+        result.pushKV(\"in_active_chain\", in_active_chain);\n+    }\n+\n+    std::optional<size_t> opt_tx_position{std::nullopt};\n+    CBlockUndo blockUndo;\n+    CBlock block;\n+    if (verbosity == 1 || !blockindex || IsBlockPruned(blockindex) || !(UndoReadFromDisk(blockUndo, blockindex) && ReadBlockFromDisk(block, blockindex, Params().GetConsensus()))) {\n+        TxToJSON(*tx, hash_block, result, chainman.ActiveChainstate());\n+        return result;\n+    }\n+    for (size_t i = 0; i < block.vtx.size(); ++i) {\n+        const CTransactionRef t = block.vtx.at(i);\n+        if (*t == *tx) {\n+            // blockundo does not have coinbase tx\n+            opt_tx_position = std::optional<size_t>{i-1};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750119538",
      "id" : 750119538,
      "in_reply_to_id" : 749529909,
      "line" : 263,
      "node_id" : "PRRC_kwDOABII584stepy",
      "original_commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "original_line" : 263,
      "original_position" : 154,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 154,
      "pull_request_review_id" : 807097996,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750119538/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T10:20:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750119538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750396075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750396075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There is `fee` in getransaction. see https://developer.bitcoin.org/reference/rpc/gettransaction.html\r\n\r\nI also agree with @luke-jr . There is no guarantee that fee calculation will always remain same, and thus better not to assert against hard coded values.",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-16T15:33:47Z",
      "diff_hunk" : "@@ -141,21 +143,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750396075",
      "id" : 750396075,
      "in_reply_to_id" : 739601931,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584suiKr",
      "original_commit_id" : "2c56d72acac277babad758dbc6eefb38264cb0ed",
      "original_line" : 152,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 54,
      "pull_request_review_id" : 807471671,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750396075/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T16:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750396075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750449024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750449024"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe it would be good to add few more data checks in `prevout` to ensure nothing changes in at the field level? ",
      "commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "created_at" : "2021-11-16T16:25:43Z",
      "diff_hunk" : "@@ -141,21 +142,35 @@ def getrawtransaction_tests(self):\n         for n in [0, 3]:\n             self.log.info(f\"Test getrawtransaction {'with' if n == 0 else 'without'} -txindex, with blockhash\")\n             # We should be able to get the raw transaction by providing the correct block\n-            gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True, blockhash=block1)\n-            assert_equal(gottx['txid'], tx)\n-            assert_equal(gottx['in_active_chain'], True)\n-            if n == 0:\n-                self.log.info(\"Test getrawtransaction with -txindex, without blockhash: 'in_active_chain' should be absent\")\n-                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=True)\n+            for v in [1, 2]: # verbosity level\n+                gottx = self.nodes[n].getrawtransaction(txid=tx, verbose=v, blockhash=block1)\n                 assert_equal(gottx['txid'], tx)\n-                assert 'in_active_chain' not in gottx\n-            else:\n-                self.log.info(\"Test getrawtransaction without -txindex, without blockhash: expect the call to raise\")\n-                err_msg = (\n-                    \"No such mempool transaction. Use -txindex or provide a block hash to enable\"\n-                    \" blockchain transaction queries. Use gettransaction for wallet transactions.\"\n-                )\n-                assert_raises_rpc_error(-5, err_msg, self.nodes[n].getrawtransaction, txid=tx, verbose=True)\n+                assert_equal(gottx['in_active_chain'], True)\n+                if v == 2:\n+                    # fee is in verbosity 2 only\n+                    assert('fee' in gottx)\n+                    assert_equal(gottx['fee'], Decimal('0.00002820'))\n+                    # verify transacion has prevout field\n+                    assert('vin' in gottx)\n+                    assert(len(gottx['vin']) > 0)\n+                    assert('prevout' in gottx['vin'][0])\n+                    assert_equal(False, gottx['vin'][0]['prevout']['generated'])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r750449024",
      "id" : 750449024,
      "line" : 157,
      "node_id" : "PRRC_kwDOABII584suvGA",
      "original_commit_id" : "fb2f153136dc14921cb7f249fe224919cb7094bb",
      "original_line" : 157,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 59,
      "pull_request_review_id" : 807471671,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750449024/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-16T16:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/750449024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Review ACK [fb2f153](https://github.com/bitcoin/bitcoin/commit/fb2f153136dc14921cb7f249fe224919cb7094bb)\r\n> \r\n> I am not sure why, but I am hitting this weird error in the test\r\n> \r\n> ```\r\n> $ ./test/functional/rpc_rawtransaction.py \r\n\r\nI saw that as well, I'm fixing. \r\n",
      "created_at" : "2021-11-17T09:43:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#issuecomment-971406958",
      "id" : 971406958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23319",
      "node_id" : "IC_kwDOABII58455n5u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971406958/reactions"
      },
      "updated_at" : "2021-11-17T09:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/971406958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r752101675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752101675"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I added a separate test to validate output fields, only that they exists, not their values. \r\nIs this worth having?",
      "commit_id" : "fee0b82aca8f9c8eba4b0bff3e6ec3ddbb7208ae",
      "created_at" : "2021-11-18T10:25:27Z",
      "diff_hunk" : "@@ -171,6 +174,67 @@ def getrawtransaction_tests(self):\n         block = self.nodes[0].getblock(self.nodes[0].getblockhash(0))\n         assert_raises_rpc_error(-5, \"The genesis block coinbase is not considered an ordinary transaction\", self.nodes[0].getrawtransaction, block['merkleroot'])\n \n+    def getrawtransaction_verbosity_tests(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r752101675",
      "id" : 752101675,
      "line" : 177,
      "node_id" : "PRRC_kwDOABII584s1Ckr",
      "original_commit_id" : "fee0b82aca8f9c8eba4b0bff3e6ec3ddbb7208ae",
      "original_line" : 177,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "test/functional/rpc_rawtransaction.py",
      "position" : 40,
      "pull_request_review_id" : 809731554,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752101675/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-18T10:27:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752101675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r752102684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752102684"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The function test, `./test/functional/rpc_rawtransaction.py`, uses named paramaters, so `verbose` must be here, unless we want to change the functional test.\r\n",
      "commit_id" : "fee0b82aca8f9c8eba4b0bff3e6ec3ddbb7208ae",
      "created_at" : "2021-11-18T10:26:43Z",
      "diff_hunk" : "@@ -73,26 +74,27 @@ static RPCHelpMan getrawtransaction()\n {\n     return RPCHelpMan{\n                 \"getrawtransaction\",\n-                \"\\nReturn the raw transaction data.\\n\"\n+                \"\\nReturn the raw transaction data.\\n\\n\"\n \n-                \"\\nBy default, this call only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"\n+                \"By default, this call only returns a transaction if it is in the mempool. If -txindex is enabled\\n\"\n                 \"and no blockhash argument is passed, it will return the transaction if it is in the mempool or any block.\\n\"\n                 \"If a blockhash argument is passed, it will return the transaction if\\n\"\n-                \"the specified block is available and the transaction is in that block.\\n\"\n-                \"\\nHint: Use gettransaction for wallet transactions.\\n\"\n+                \"the specified block is available and the transaction is in that block.\\n\\n\"\n+                \"Hint: Use gettransaction for wallet transactions.\\n\\n\"\n \n-                \"\\nIf verbose is 'true', returns an Object with information about 'txid'.\\n\"\n-                \"If verbose is 'false' or omitted, returns a string that is serialized, hex-encoded data for 'txid'.\\n\",\n+                \"If verbosity is 0 or omitted, returns a string that is serialized, hex-encoded data for transaction.\\n\"\n+                \"If verbosity is 1, returns an Object with information about transaction.\\n\"\n+                \"If verbosity is 2, returns an Object with information about transaction, including fees and prevout information.\\n\",\n                 {\n                     {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n-                    {\"verbose\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If false, return a string, otherwise return a json object\"},\n+                    {\"verbosity|verbose\", RPCArg::Type::NUM, RPCArg::Default{0}, \"0 for hex-encoded data, 1 for a json object, and 2 for json object with fee and prevout\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23319#discussion_r752102684",
      "id" : 752102684,
      "line" : 90,
      "node_id" : "PRRC_kwDOABII584s1C0c",
      "original_commit_id" : "fee0b82aca8f9c8eba4b0bff3e6ec3ddbb7208ae",
      "original_line" : 90,
      "original_position" : 49,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 49,
      "pull_request_review_id" : 809731554,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752102684/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-18T10:27:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/752102684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   }
]
