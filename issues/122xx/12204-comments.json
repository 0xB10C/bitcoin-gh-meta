[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161864379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161864379"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe put \"block\" in front of blocks being named by number. (and everywhere else)\r\n\r\nI was reading it as the the height in coinbase aka the number 176,684 in the block's coinbase at height 490,897.",
      "commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "created_at" : "2018-01-16T19:37:21Z",
      "diff_hunk" : "@@ -1858,12 +1858,58 @@ bool CChainState::ConnectBlock(const CBlock& block, CValidationState& state, CBl\n     // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n     // duplicate transactions descending from the known pairs either.\n     // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n+\n+    // The exception to this logic is if there are coinbases from blocks before\n+    // the BIP34 height of 227,931 which have a scriptSig with a valid-looking\n+    // BIP34 height for a later block height. These coinbases run the risk of\n+    // being duplicated when we reach that later block height. An exhaustive\n+    // search of all mainnet coinbases before the BIP34 height which have a\n+    // scriptSig indicating a later block height reveals 2 cases where the later\n+    // block height is before 1,983,702.\n+\n+    // There are many cases which indicate block height 1,983,702 or later, so\n+    // we simply remove the optimiztion to skip BIP30 checking for blocks at\n+    // height 1,983,702 or higher.  Before we reach that block in another 25\n+    // years or so, we should take advantage of a future consensus change to do\n+    // a new and improved version of BIP34 that will actually prevent ever\n+    // creating any duplicate coinbases in the future.\n+\n+    // The first earlier case is block 209,920 and the indicated height is\n+    // 209,921, so we do not need to be concerned with this case because 209,921\n+    // is under the BIP34 height and so BIP30 is active already.\n+\n+    // The second case is block 176,684 which has an indicated block height of\n+    // 490,897. Unfortunately this issue was not discovered until about 2 weeks\n+    // before block 490,897 so there was not much opportunity to address this\n+    // case other than to carefully analyze it and determine it would not be a\n+    // problem. Block 490,897 was, in fact, mined with a different coinbase\n+    // than 176,684, but it is important to note that even if it hadn't",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161864379",
      "id" : 161864379,
      "original_commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "original_position" : 29,
      "path" : "src/validation.cpp",
      "position" : 29,
      "pull_request_review_id" : 89222376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204",
      "updated_at" : "2018-01-16T19:53:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161864379",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161875402"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161875402"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is the significance of 1,938,702 just that it is the third lowest height found encoded in the old coinbases? The sentence doesn't say where 1,938,702 comes from, and this is written like it should be obvious what the number means.\r\n\r\nIf it is just the third lowest height found in the search, I think it would be clearer to say something like \"An exhaustive search of all blocks before the BIP34 height found that the lowest height values indicated in coinbase scriptSigs were: 209,921, 490,897, and 1,983,702.\"",
      "commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "created_at" : "2018-01-16T20:20:29Z",
      "diff_hunk" : "@@ -1858,12 +1858,58 @@ bool CChainState::ConnectBlock(const CBlock& block, CValidationState& state, CBl\n     // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n     // duplicate transactions descending from the known pairs either.\n     // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n+\n+    // The exception to this logic is if there are coinbases from blocks before\n+    // the BIP34 height of 227,931 which have a scriptSig with a valid-looking\n+    // BIP34 height for a later block height. These coinbases run the risk of\n+    // being duplicated when we reach that later block height. An exhaustive\n+    // search of all mainnet coinbases before the BIP34 height which have a\n+    // scriptSig indicating a later block height reveals 2 cases where the later\n+    // block height is before 1,983,702.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161875402",
      "id" : 161875402,
      "original_commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "original_position" : 11,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 89235281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204",
      "updated_at" : "2018-01-16T21:05:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161875402",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161886460"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161886460"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Rather than start your new comment explaining where the previous comment is incorrect, I think it makes sense to remove/reword the paragraph above.\r\n\r\nI also think it would make the whole comment clearer if you explicitly introduced terminology at the top of the comment. Something like:\r\n\r\n```\r\n- block height: the height of the block in the blockchain\r\n- coinbase height: the height indicated in the coinbase transaction's scriptSig under BIP34 rules.\r\n\r\nAll blocks with block height >= 227,931 must have coinbase height equal to block height. This is a consensus rule.\r\n```\r\nrather than sprinkling the rest of the comment with multiple terms for the same concept: `a scriptSig with a valid-looking BIP34 height...`, `scriptSig indicating...`, `indicated block height`, `coinbase with indicated height`.",
      "commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "created_at" : "2018-01-16T21:07:27Z",
      "diff_hunk" : "@@ -1858,12 +1858,58 @@ bool CChainState::ConnectBlock(const CBlock& block, CValidationState& state, CBl\n     // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n     // duplicate transactions descending from the known pairs either.\n     // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n+\n+    // The exception to this logic is if there are coinbases from blocks before",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161886460",
      "id" : 161886460,
      "original_commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 89248523,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204",
      "updated_at" : "2018-01-16T21:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161886460",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161935352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161935352"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "typo: optimization",
      "commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "created_at" : "2018-01-17T01:26:13Z",
      "diff_hunk" : "@@ -1858,12 +1858,58 @@ bool CChainState::ConnectBlock(const CBlock& block, CValidationState& state, CBl\n     // before the first had been spent.  Since those coinbases are sufficiently buried its no longer possible to create further\n     // duplicate transactions descending from the known pairs either.\n     // If we're on the known chain at height greater than where BIP34 activated, we can save the db accesses needed for the BIP30 check.\n+\n+    // The exception to this logic is if there are coinbases from blocks before\n+    // the BIP34 height of 227,931 which have a scriptSig with a valid-looking\n+    // BIP34 height for a later block height. These coinbases run the risk of\n+    // being duplicated when we reach that later block height. An exhaustive\n+    // search of all mainnet coinbases before the BIP34 height which have a\n+    // scriptSig indicating a later block height reveals 2 cases where the later\n+    // block height is before 1,983,702.\n+\n+    // There are many cases which indicate block height 1,983,702 or later, so\n+    // we simply remove the optimiztion to skip BIP30 checking for blocks at",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12204#discussion_r161935352",
      "id" : 161935352,
      "original_commit_id" : "9ab7fe0b3f50b2cc3514975b26eb7c63134bdd40",
      "original_position" : 14,
      "path" : "src/validation.cpp",
      "position" : 14,
      "pull_request_review_id" : 89304860,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12204",
      "updated_at" : "2018-01-17T01:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/161935352",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2018-01-17T11:32:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12204#issuecomment-358277892",
      "id" : 358277892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12204",
      "updated_at" : "2018-01-17T11:32:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/358277892",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
