[
   {
      "author_association" : "MEMBER",
      "body" : "utACK https://github.com/bitcoin/bitcoin/commit/16a8389bb14a892c204efe0d39580b4c1458e098",
      "created_at" : "2018-01-20T04:23:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12225#issuecomment-359144267",
      "id" : 359144267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12225",
      "updated_at" : "2018-01-20T04:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/359144267",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162785977"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162785977"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove?",
      "commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "created_at" : "2018-01-20T15:58:26Z",
      "diff_hunk" : "@@ -984,10 +984,9 @@ bool CBlockPolicyEstimator::Read(CAutoFile& filein)\n void CBlockPolicyEstimator::FlushUnconfirmed(CTxMemPool& pool) {\n     int64_t startclear = GetTimeMicros();\n     std::vector<uint256> txids;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162785977",
      "id" : 162785977,
      "original_commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "original_position" : 3,
      "path" : "src/policy/fees.cpp",
      "position" : 3,
      "pull_request_review_id" : 90307148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225",
      "updated_at" : "2018-01-20T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162785977",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162786011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162786011"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, can early exit loop if `mapMemPoolTxs` is empty.",
      "commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "created_at" : "2018-01-20T16:00:08Z",
      "diff_hunk" : "@@ -984,10 +984,9 @@ bool CBlockPolicyEstimator::Read(CAutoFile& filein)\n void CBlockPolicyEstimator::FlushUnconfirmed(CTxMemPool& pool) {\n     int64_t startclear = GetTimeMicros();\n     std::vector<uint256> txids;\n-    pool.queryHashes(txids);\n-    LOCK(cs_feeEstimator);\n-    for (auto& txid : txids) {\n-        removeTx(txid, false);\n+    LOCK2(pool.cs, cs_feeEstimator);\n+    for (auto mi=pool.mapTx.begin(); mi != pool.mapTx.end(); ++mi) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162786011",
      "id" : 162786011,
      "original_commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "original_position" : 9,
      "path" : "src/policy/fees.cpp",
      "position" : 9,
      "pull_request_review_id" : 90307148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225",
      "updated_at" : "2018-01-20T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162786011",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162786072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162786072"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`txids` is empty, update logging.",
      "commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "created_at" : "2018-01-20T16:03:27Z",
      "diff_hunk" : "@@ -984,10 +984,9 @@ bool CBlockPolicyEstimator::Read(CAutoFile& filein)\n void CBlockPolicyEstimator::FlushUnconfirmed(CTxMemPool& pool) {\n     int64_t startclear = GetTimeMicros();\n     std::vector<uint256> txids;\n-    pool.queryHashes(txids);\n-    LOCK(cs_feeEstimator);\n-    for (auto& txid : txids) {\n-        removeTx(txid, false);\n+    LOCK2(pool.cs, cs_feeEstimator);\n+    for (auto mi=pool.mapTx.begin(); mi != pool.mapTx.end(); ++mi) {\n+        removeTx(mi->GetTx().GetHash(), false);\n     }\n     int64_t endclear = GetTimeMicros();\n     LogPrint(BCLog::ESTIMATEFEE, \"Recorded %u unconfirmed txs from mempool in %gs\\n\",txids.size(), (endclear - startclear)*0.000001);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12225#discussion_r162786072",
      "id" : 162786072,
      "original_commit_id" : "16a8389bb14a892c204efe0d39580b4c1458e098",
      "original_position" : 13,
      "path" : "src/policy/fees.cpp",
      "position" : 13,
      "pull_request_review_id" : 90307148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12225",
      "updated_at" : "2018-01-20T16:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/162786072",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
