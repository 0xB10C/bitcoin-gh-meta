[
   {
      "body" : "This pull request implements the feeler functionality in #6355. ",
      "created_at" : "2016-06-28T20:26:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229171996",
      "id" : 229171996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-28T20:26:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229171996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "tests need some love...",
      "created_at" : "2016-06-30T12:28:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229643654",
      "id" : 229643654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T12:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229643654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik I am currently working on fixes these days, however I am running into issues with the rpc-tests. When I run rpc-tests locally both with this pull request and against bitcoin/master I get intermittent failures. \r\n\r\nI run against bitcoin/master\r\n```\r\npython3 qa/pull-tester/rpc-tests.py\r\n```\r\n\r\ntests fail\r\n```\r\nTEST                           | PASSED | DURATION\r\nbip68-112-113-p2p.py           | True   | 52 s\r\nlisttransactions.py            | True   | 177 s\r\nwallet.py                      | True   | 287 s\r\nmempool_resurrect_test.py      | True   | 20 s\r\nreceivedby.py                  | True   | 93 s\r\ntxn_doublespend.py --mineblock | True   | 50 s\r\ntxn_clone.py                   | True   | 40 s\r\ngetchaintips.py                | True   | 43 s\r\np2p-fullblocktest.py           | False  | 447 s\r\nrawtransactions.py             | True   | 83 s\r\nmempool_spendcoinbase.py       | True   | 10 s\r\nmempool_reorg.py               | True   | 22 s\r\nrest.py                        | True   | 71 s\r\nmulti_rpc.py                   | True   | 5 s\r\nhttpbasics.py                  | True   | 11 s\r\nmempool_limit.py               | True   | 24 s\r\nproxy_test.py                  | True   | 15 s\r\nmerkle_blocks.py               | True   | 41 s\r\nsignrawtransactions.py         | True   | 5 s\r\nzapwallettxes.py               | True   | 49 s\r\nnodehandling.py                | True   | 24 s\r\ndecodescript.py                | True   | 5 s\r\nreindex.py                     | True   | 31 s\r\nblockchain.py                  | True   | 6 s\r\ndisablewallet.py               | True   | 5 s\r\nkeypool.py                     | True   | 18 s\r\nprioritise_transaction.py      | True   | 25 s\r\ninvalidblockrequest.py         | True   | 11 s\r\nsendheaders.py                 | True   | 60 s\r\ninvalidtxrequest.py            | True   | 12 s\r\nwalletbackup.py                | True   | 647 s\r\np2p-versionbits-warning.py     | True   | 24 s\r\nabandonconflict.py             | True   | 39 s\r\nfundrawtransaction.py          | False  | 201 s\r\nimportprunedfunds.py           | True   | 37 s\r\nsignmessages.py                | True   | 6 s\r\nsegwit.py                      | True   | 51 s\r\nzmq_test.py                    | True   | 17 s\r\np2p-segwit.py                  | True   | 88 s\r\nALL                            | False  | 2852 s (accumulated)\r\n```\r\nI rerun it and sometimes different tests fail\r\n```\r\nTEST                           | PASSED | DURATION\r\n\r\np2p-fullblocktest.py           | False  | 33 s\r\nbip68-112-113-p2p.py           | True   | 52 s\r\nlisttransactions.py            | True   | 64 s\r\nreceivedby.py                  | True   | 46 s\r\nwalletbackup.py                | False  | 107 s\r\nmempool_resurrect_test.py      | True   | 21 s\r\ntxn_clone.py                   | True   | 58 s\r\ntxn_doublespend.py --mineblock | True   | 67 s\r\ngetchaintips.py                | True   | 71 s\r\nwallet.py                      | True   | 193 s\r\nmempool_spendcoinbase.py       | True   | 8 s\r\nmempool_reorg.py               | True   | 18 s\r\nmempool_limit.py               | True   | 20 s\r\nhttpbasics.py                  | True   | 12 s\r\nrest.py                        | True   | 57 s\r\nmulti_rpc.py                   | True   | 6 s\r\nrawtransactions.py             | True   | 67 s\r\nproxy_test.py                  | True   | 16 s\r\nsignrawtransactions.py         | True   | 7 s\r\nmerkle_blocks.py               | True   | 32 s\r\nzapwallettxes.py               | True   | 46 s\r\nnodehandling.py                | True   | 23 s\r\ndecodescript.py                | True   | 7 s\r\nblockchain.py                  | True   | 7 s\r\ndisablewallet.py               | True   | 4 s\r\nreindex.py                     | True   | 25 s\r\nkeypool.py                     | True   | 18 s\r\nprioritise_transaction.py      | True   | 28 s\r\ninvalidblockrequest.py         | True   | 13 s\r\ninvalidtxrequest.py            | True   | 10 s\r\nsendheaders.py                 | True   | 62 s\r\np2p-versionbits-warning.py     | True   | 26 s\r\nabandonconflict.py             | True   | 38 s\r\nimportprunedfunds.py           | True   | 27 s\r\nsignmessages.py                | True   | 5 s\r\nsegwit.py                      | True   | 43 s\r\nzmq_test.py                    | True   | 24 s\r\nfundrawtransaction.py          | True   | 184 s\r\np2p-segwit.py                  | True   | 90 s\r\n\r\nALL                            | False  | 1635 s (accumulated)\r\n```\r\n\r\nAlso sometimes it just crashes.\r\n```\r\n...........................................Traceback (most recent call last):\r\n  File \"qa/pull-tester/rpc-tests.py\", line 340, in <module>\r\n    runtests()\r\n  File \"qa/pull-tester/rpc-tests.py\", line 209, in runtests\r\n    (name, stdout, stderr, passed, duration) = job_queue.get_next()\r\n  File \"qa/pull-tester/rpc-tests.py\", line 264, in get_next\r\n    (stdout, stderr) = proc.communicate(timeout=3)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 960, in communicate\r\n    stdout, stderr = self._communicate(input, endtime, timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 1618, in _communicate\r\n    self._check_timeout(endtime, orig_timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 986, in _check_timeout\r\n    raise TimeoutExpired(self.args, orig_timeout)\r\nsubprocess.TimeoutExpired: Command '['/home/e0/work/bitcoin-standard/qa/rpc-tests/walletbackup.py', '--srcdir=/home/e0/work/bitcoin-standard/src', '--portseed=37']' timed out after 3 seconds\r\n```",
      "created_at" : "2016-06-30T16:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229715503",
      "id" : 229715503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229715503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "If you get a timeout, you may try to run the test directly `qa/rpc-tests/test.py` and see if it still fails. Also, you may want to check if there are any zombie bitcoin processes which you want to kill. And finally, the test_framework will no longer clean up after a failure, so you need to clean your temp dir manually in case it has limited space available.\r\n\r\nUsually none of this should be a problem on travis, as a fresh vm is used every time, so you may want to look into the failure on travis.",
      "created_at" : "2016-06-30T16:46:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229717533",
      "id" : 229717533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229717533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "You should assert that nodes in the existing tests are not marked a feel connection and thus get disconnected.",
      "created_at" : "2016-06-30T16:53:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229719568",
      "id" : 229719568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229719568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "From my first glance at a failing travis test, it seems that perhaps `pnode->fFeeler` can be set to true on an incoming connection, causing an immediate disconnect?  That would result in intermittent test failures for sure.",
      "created_at" : "2016-06-30T16:55:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229720172",
      "id" : 229720172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:55:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229720172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I just restarted my test node with the fixed code.",
      "created_at" : "2016-06-30T23:28:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229816883",
      "id" : 229816883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T23:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229816883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "@sdaftuar  @MarcoFalke I'm working on a simple unittest to make sure that fFeelers is false by default and never happens when fIncoming = true. Should be pushed by EOD.",
      "created_at" : "2016-07-01T19:45:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-230032676",
      "id" : 230032676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-07-01T19:45:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/230032676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "I added a simple test and an assert to ensure that that fFeelers are set false by default and don't get assigned to incoming connection.",
      "created_at" : "2016-07-01T21:08:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-230047759",
      "id" : 230047759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-07-01T21:08:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/230047759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "**Summary:** To test feeler connections I ran two nodes on EC2 for ~one month. One node ran this pull request, the second node ran default Bitcoin.  According to this test feeler connections (this pull request) increase the size of the tried table by about an order of magnitude and consequently increase the eclipse resistance of a node by an order of magnitude. I also measured the impact of a future pull request *test-before-evict* where IPs are not evicted from the tried table if they are online.\r\n\r\nTried Table\r\n========\r\n![Comparing the size of the tried table over time](https://cloud.githubusercontent.com/assets/274814/17309873/0ce8192a-580f-11e6-9119-a2150ef8c3df.png)\r\n\r\nOne node ran this pull request for 32 days (July 1st to August 1st), the second node ran default Bitcoin for 35 Days (June 28 to August 1st).\r\n\r\nOn August 1st I disconnected the nodes and graphed the results. I tested which nodes in the tried table were online on August 1st.\r\n* The Feeler connections node had **1309 IPs** in the tried table of which 38.8% or 590 IPs were online.\r\n* The default Bitcoin node had **195 IPs** in the tried table of which 28.2% or 55 IPs were online.\r\n\r\nSecurity Benefit\r\n========\r\n\r\nTo determine the security benefit of these larger numbers of IPs in the tried table I modeled the attack presented in [Eclipse Attacks on BitcoinÃ¢ÂÂs Peer-to-Peer Network](https://eprint.iacr.org/2015/263). Full  details on how this was carried out are given at bottom of this comment. \r\n\r\n![attackergraph40000-10-1000short-line](https://cloud.githubusercontent.com/assets/274814/17366828/372af458-595b-11e6-81e5-2c9f97282305.png)\r\n\r\n**Default node:** 595 attacker IPs for ~50% attack success.\r\n**Default node + test-before-evict:** 620 attacker IPs for ~50% attack success.\r\n**Feeler node:** 5540 attacker IPs for ~50% attack success.\r\n**Feeler node + test-before-evict:** 8600 attacker IPs for ~50% attack success.\r\n\r\nThe node running feeler connections has 10 times as many online IP addresses in its tried table making an attack 10 times harder (i.e. requiring the an attacker require 10 times as many IP addresses in different /16s). Adding test-before-evict increases resistance of the node by an additional 3000 attacker IP addresses. \r\n\r\nBelow I graph the attack over even greater attacker resources (i.e. more attacker controled IP addresses). Note that test-before-evict maintains some security far longer even against an attacker with 50,000 IPs. If this node had a larger tried table test-before-evict could greatly boost a nodes resistance to eclipse attacks.\r\n\r\n![attacker graph long view](https://cloud.githubusercontent.com/assets/274814/17367108/96f46d64-595c-11e6-91cd-edba160598e7.png)\r\n\r\nModeling an Eclipse Attack\r\n==========\r\nUsing the peers.dat file from the default node and the feeler connections node I reconstructed their tried tables (I ignore the new table in our attacks as it is trivial to fill it with trash IP addresses). The attack test was run as follows:\r\n\r\n1. Attempt to insert X attacker IP addresses each from distinct \\16s into a model of a node's tried table.\r\n2. Select nodes from each nodes tried table based on the logic in net.cpp (each outgoing connection must be from a different \\16, only connect to online nodes).\r\n3. If the attacker's IPs are selected for all 8 outgoing connections the attacker wins as the attacker has partitioned the node from the rest of the network otherwise the attacker loses. For realism I only allowed the node to connect to other nodes which were online.\r\n\r\nFor each value X of number of attacker IPs I ran the attack 1000 times. For each of these 1000 runs I calculated the attack success probability by performing the selection of 8 outgoing connections 10 times. I used the peers.dat file from the feelers connection node and the default node to build the model of the tried table for the attack. I simulated the impact of enabling test-before-evict would have if turned on just prior to the attack (this should not be different than if the node has been running test-before-evict all along) by preventing the attacker from evicting an IP in the tried table if that node was online.",
      "created_at" : "2016-08-03T14:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-237255215",
      "id" : 237255215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-08-03T14:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237255215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   }
]
