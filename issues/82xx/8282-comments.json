[
   {
      "body" : "This pull request implements the feeler functionality in #6355. ",
      "created_at" : "2016-06-28T20:26:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229171996",
      "id" : 229171996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-28T20:26:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229171996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "tests need some love...",
      "created_at" : "2016-06-30T12:28:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229643654",
      "id" : 229643654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T12:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229643654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "@paveljanik I am currently working on fixes these days, however I am running into issues with the rpc-tests. When I run rpc-tests locally both with this pull request and against bitcoin/master I get intermittent failures. \r\n\r\nI run against bitcoin/master\r\n```\r\npython3 qa/pull-tester/rpc-tests.py\r\n```\r\n\r\ntests fail\r\n```\r\nTEST                           | PASSED | DURATION\r\nbip68-112-113-p2p.py           | True   | 52 s\r\nlisttransactions.py            | True   | 177 s\r\nwallet.py                      | True   | 287 s\r\nmempool_resurrect_test.py      | True   | 20 s\r\nreceivedby.py                  | True   | 93 s\r\ntxn_doublespend.py --mineblock | True   | 50 s\r\ntxn_clone.py                   | True   | 40 s\r\ngetchaintips.py                | True   | 43 s\r\np2p-fullblocktest.py           | False  | 447 s\r\nrawtransactions.py             | True   | 83 s\r\nmempool_spendcoinbase.py       | True   | 10 s\r\nmempool_reorg.py               | True   | 22 s\r\nrest.py                        | True   | 71 s\r\nmulti_rpc.py                   | True   | 5 s\r\nhttpbasics.py                  | True   | 11 s\r\nmempool_limit.py               | True   | 24 s\r\nproxy_test.py                  | True   | 15 s\r\nmerkle_blocks.py               | True   | 41 s\r\nsignrawtransactions.py         | True   | 5 s\r\nzapwallettxes.py               | True   | 49 s\r\nnodehandling.py                | True   | 24 s\r\ndecodescript.py                | True   | 5 s\r\nreindex.py                     | True   | 31 s\r\nblockchain.py                  | True   | 6 s\r\ndisablewallet.py               | True   | 5 s\r\nkeypool.py                     | True   | 18 s\r\nprioritise_transaction.py      | True   | 25 s\r\ninvalidblockrequest.py         | True   | 11 s\r\nsendheaders.py                 | True   | 60 s\r\ninvalidtxrequest.py            | True   | 12 s\r\nwalletbackup.py                | True   | 647 s\r\np2p-versionbits-warning.py     | True   | 24 s\r\nabandonconflict.py             | True   | 39 s\r\nfundrawtransaction.py          | False  | 201 s\r\nimportprunedfunds.py           | True   | 37 s\r\nsignmessages.py                | True   | 6 s\r\nsegwit.py                      | True   | 51 s\r\nzmq_test.py                    | True   | 17 s\r\np2p-segwit.py                  | True   | 88 s\r\nALL                            | False  | 2852 s (accumulated)\r\n```\r\nI rerun it and sometimes different tests fail\r\n```\r\nTEST                           | PASSED | DURATION\r\n\r\np2p-fullblocktest.py           | False  | 33 s\r\nbip68-112-113-p2p.py           | True   | 52 s\r\nlisttransactions.py            | True   | 64 s\r\nreceivedby.py                  | True   | 46 s\r\nwalletbackup.py                | False  | 107 s\r\nmempool_resurrect_test.py      | True   | 21 s\r\ntxn_clone.py                   | True   | 58 s\r\ntxn_doublespend.py --mineblock | True   | 67 s\r\ngetchaintips.py                | True   | 71 s\r\nwallet.py                      | True   | 193 s\r\nmempool_spendcoinbase.py       | True   | 8 s\r\nmempool_reorg.py               | True   | 18 s\r\nmempool_limit.py               | True   | 20 s\r\nhttpbasics.py                  | True   | 12 s\r\nrest.py                        | True   | 57 s\r\nmulti_rpc.py                   | True   | 6 s\r\nrawtransactions.py             | True   | 67 s\r\nproxy_test.py                  | True   | 16 s\r\nsignrawtransactions.py         | True   | 7 s\r\nmerkle_blocks.py               | True   | 32 s\r\nzapwallettxes.py               | True   | 46 s\r\nnodehandling.py                | True   | 23 s\r\ndecodescript.py                | True   | 7 s\r\nblockchain.py                  | True   | 7 s\r\ndisablewallet.py               | True   | 4 s\r\nreindex.py                     | True   | 25 s\r\nkeypool.py                     | True   | 18 s\r\nprioritise_transaction.py      | True   | 28 s\r\ninvalidblockrequest.py         | True   | 13 s\r\ninvalidtxrequest.py            | True   | 10 s\r\nsendheaders.py                 | True   | 62 s\r\np2p-versionbits-warning.py     | True   | 26 s\r\nabandonconflict.py             | True   | 38 s\r\nimportprunedfunds.py           | True   | 27 s\r\nsignmessages.py                | True   | 5 s\r\nsegwit.py                      | True   | 43 s\r\nzmq_test.py                    | True   | 24 s\r\nfundrawtransaction.py          | True   | 184 s\r\np2p-segwit.py                  | True   | 90 s\r\n\r\nALL                            | False  | 1635 s (accumulated)\r\n```\r\n\r\nAlso sometimes it just crashes.\r\n```\r\n...........................................Traceback (most recent call last):\r\n  File \"qa/pull-tester/rpc-tests.py\", line 340, in <module>\r\n    runtests()\r\n  File \"qa/pull-tester/rpc-tests.py\", line 209, in runtests\r\n    (name, stdout, stderr, passed, duration) = job_queue.get_next()\r\n  File \"qa/pull-tester/rpc-tests.py\", line 264, in get_next\r\n    (stdout, stderr) = proc.communicate(timeout=3)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 960, in communicate\r\n    stdout, stderr = self._communicate(input, endtime, timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 1618, in _communicate\r\n    self._check_timeout(endtime, orig_timeout)\r\n  File \"/usr/lib/python3.4/subprocess.py\", line 986, in _check_timeout\r\n    raise TimeoutExpired(self.args, orig_timeout)\r\nsubprocess.TimeoutExpired: Command '['/home/e0/work/bitcoin-standard/qa/rpc-tests/walletbackup.py', '--srcdir=/home/e0/work/bitcoin-standard/src', '--portseed=37']' timed out after 3 seconds\r\n```",
      "created_at" : "2016-06-30T16:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229715503",
      "id" : 229715503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229715503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "If you get a timeout, you may try to run the test directly `qa/rpc-tests/test.py` and see if it still fails. Also, you may want to check if there are any zombie bitcoin processes which you want to kill. And finally, the test_framework will no longer clean up after a failure, so you need to clean your temp dir manually in case it has limited space available.\r\n\r\nUsually none of this should be a problem on travis, as a fresh vm is used every time, so you may want to look into the failure on travis.",
      "created_at" : "2016-06-30T16:46:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229717533",
      "id" : 229717533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229717533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "You should assert that nodes in the existing tests are not marked a feel connection and thus get disconnected.",
      "created_at" : "2016-06-30T16:53:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229719568",
      "id" : 229719568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229719568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "From my first glance at a failing travis test, it seems that perhaps `pnode->fFeeler` can be set to true on an incoming connection, causing an immediate disconnect?  That would result in intermittent test failures for sure.",
      "created_at" : "2016-06-30T16:55:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229720172",
      "id" : 229720172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T16:55:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229720172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "I just restarted my test node with the fixed code.",
      "created_at" : "2016-06-30T23:28:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-229816883",
      "id" : 229816883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-06-30T23:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/229816883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "@sdaftuar  @MarcoFalke I'm working on a simple unittest to make sure that fFeelers is false by default and never happens when fIncoming = true. Should be pushed by EOD.",
      "created_at" : "2016-07-01T19:45:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-230032676",
      "id" : 230032676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-07-01T19:45:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/230032676",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   },
   {
      "body" : "I added a simple test and an assert to ensure that that fFeelers are set false by default and don't get assigned to incoming connection.",
      "created_at" : "2016-07-01T21:08:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8282#issuecomment-230047759",
      "id" : 230047759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8282",
      "updated_at" : "2016-07-01T21:08:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/230047759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/274814?v=3",
         "events_url" : "https://api.github.com/users/EthanHeilman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EthanHeilman/followers",
         "following_url" : "https://api.github.com/users/EthanHeilman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EthanHeilman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EthanHeilman",
         "id" : 274814,
         "login" : "EthanHeilman",
         "organizations_url" : "https://api.github.com/users/EthanHeilman/orgs",
         "received_events_url" : "https://api.github.com/users/EthanHeilman/received_events",
         "repos_url" : "https://api.github.com/users/EthanHeilman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EthanHeilman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EthanHeilman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EthanHeilman"
      }
   }
]
