[
   {
      "body" : "Changing to _IONBF makes output significantly slower in some programs.\r\n",
      "created_at" : "2014-09-09T13:20:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-54967234",
      "id" : 54967234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-09T13:20:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54967234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Why do we change this for stdout at all?\r\n\r\nThe only case in which we print to stdout at all is on `-logtoconsole`, and printing to the console arguably works fine without changing obscure stream options.\r\n",
      "created_at" : "2014-09-09T13:22:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-54967461",
      "id" : 54967461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-09T15:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54967461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@jgarzik I didn't want to say _IONBF is the solution, it just makes the warning/error go away.\r\n@laanwj I don't know, perhaps we should just remove it then?\r\n\r\nEdit: It was added via this pull: https://github.com/bitcoin/bitcoin/commit/283e405c063acfca304acbff505badcbbcb814c9",
      "created_at" : "2014-09-09T17:26:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-55005177",
      "id" : 55005177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-09T17:27:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55005177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "I think the warning is being thrown because it looks like Windows setvbuf() doesn't ignore the size argument (and instead use the default) when you ask it to allocate its own buffer with buf=NULL.  It probably doesn't make sense to enable the buffers on Windows anyway as it doesn't support line buffering and it would be pretty annoying to have block buffered output on the console.\r\n\r\nWith respect to why it's in there:  Linux uses full buffering instead of line buffering for stdout if it isn't pointing to a terminal and it looks like systemd has some stdout/stderr log redirection stuff where line buffering behavior would be desirable.\r\n\r\nMaybe a better solution: Drop it altogether and add an fflush(stdout) to LogPrintStr() in the fPrintToConsole block after the fwrite() to stdout.\r\n",
      "created_at" : "2014-09-09T23:28:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-55051812",
      "id" : 55051812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-09T23:28:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55051812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "@ajweiss sound good to me.",
      "created_at" : "2014-09-10T00:10:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-55054908",
      "id" : 55054908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-10T00:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55054908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "SGTM too. Better to have an explicit fflush instead of changing the properties of stdout.\r\n",
      "created_at" : "2014-09-10T07:49:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-55081966",
      "id" : 55081966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-10T07:49:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55081966",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "+1\r\n",
      "created_at" : "2014-09-10T12:36:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4884#issuecomment-55108441",
      "id" : 55108441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4884",
      "updated_at" : "2014-09-10T12:36:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/55108441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
