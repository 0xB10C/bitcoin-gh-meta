[
   {
      "body" : "A possible idea would be to show the user a table, either before submitting the transaction or after, where they can select their fee based on estimated confirmation time:\r\n\r\nEst. confirmation time               | Fee\r\n----------------|------------------\r\n10 minutes  | xxx.xxx BTC\r\n20 minutes  | ...\r\n...                 | ...\r\n\r\n",
      "created_at" : "2014-09-08T09:09:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-54792988",
      "id" : 54792988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-09-08T09:09:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/54792988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I have thought about on how to bring this to the GUI. After all, I cannot\r\nthink of something which I consider as an improvement for the user.\r\nI have several concerns here:\r\n- most important, smartfee can not tell the minFee. smartfee just recommends what other people are paying.\r\n  Even if you set -txconfirmtarget to 25, it is higher than the minFee. Me, as a \"smart\" user,  \r\n  I know that the minFee is 1000 per kb, so I just look at the daily transaction volume, then I know that \r\n  sending the minFee is just fine. For example estimateFee(25) was returning 5081. Then I sended a low-priority\r\n  transaction with only 300 satoshis in fee. (txsize < 300 bytes). Guess how long it took to confirm? 8 minutes.\r\n  So smartfees recommendation, calling it with 25, in this case was not so smart.\r\n  I wouldnt recommend people to use smartfee, instead I would recommend:\r\n  \"Ignore smartFee, as long as there is enough space in the blocks, always only send the minFee of 1000/kb\"\r\n  One of the most important questions to users is, What is the minFee? smartFee doesnt know.\r\n- smartFee estimations are not inaccurate, they are just wrong. In the example above smartFee was telling me\r\n\r\n  \"If you pay 44444/kb it will take 1 block to confirm\"\r\n\r\n  \"If you pay 5081/kb it will take 25 block to confirm\"\r\n\r\n  Well, I paid 1000/kb and it took 1 block to confirm. (300 for a <300 bytes transaction)\r\n- I am not convinced by the bucket-algorithm: \r\n  I added a tab which shows the buckets in the debug-window (the first row shows result of estimatefee(x)):\r\n![smartfee2](https://cloud.githubusercontent.com/assets/2814559/4778719/a7528b22-5bfd-11e4-95b1-45c8396dc1cc.png)\r\n![smartfee3](https://cloud.githubusercontent.com/assets/2814559/4778720/adcebb1a-5bfd-11e4-936b-15154bd56a58.png)\r\n\r\n  If you ask me, all buckets look kinda the same. So we are claiming, we can predict how much you have to pay to get confirmed in e.g. 13 blocks, from buckets which look all the same?\r\n- Even if all miners would set their minFee to 1 satoshi, smartFee would still recommend what other people are paying,\r\n  regardless of miners minFee setting.\r\n- smartFee does not know, whether there is lots of space in the blocks or not. But in order to be an actually smart smartFee, we would need to know. \r\n- Unrelated to smartfee: we cant even show an absolute fee in the gui, even if we know the inputs and outputs. Showing only\r\n  a per kb value to the user is more confusing than helping. Thats bitcoin design, but it doesnt help, when thinking about\r\n  the GUI feature: \"choose fee per transaction\"\r\n\r\nI am not claiming to know better and really appreciate the work being done on smartFee, but after all I think its trying to solve something which cant be solved with bitcoins current design. \r\n\r\nFor now, I would rather remove the estimations from 1 to 25 completely and only have an estimateFee() that answers the question \"How much to get in now for sure?\". At least this can be used for a floating free-priority-threshold as we already do.\r\n",
      "created_at" : "2014-10-25T04:56:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60471755",
      "id" : 60471755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-25T04:56:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60471755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz Thanks for looking into this. \r\n\r\nThe reason I'd like to give the user some control and transparency over the fee on a per-transaction basis is that the estimation for `-txconfirmtarget=1` can be quite high! And users may not always care at all about fast incorporation of their transaction into blocks, so the fee is essentially wasted. And this gives Bitcoin an 'expensive' name, even though it doesn't have to be (but now you have to fiddle with command line arguments to avoid this).\r\n\r\nAdding the estimates to the debug window is a nice idea, at least it provides some more transparency into what is happening, for developers. That's a step forward.\r\n\r\nTBH: I personally used `-txconfirmtarget=10000` and it still confirmed in 10-15 minutes.",
      "created_at" : "2014-10-25T06:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60473453",
      "id" : 60473453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-25T06:33:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60473453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Unrelated to smartfee: we cant even show an absolute fee in the gui, even if we know the inputs and outputs.\r\n\r\nIndeed - this is a complicated because adding fees may add further inputs, which increases the necessary fee again. \r\n\r\nPersonally I'd prefer transparency here too, to let the user know when he's generating a very large transaction (in bytes). After all the data size is what you're paying for when you send a transaction. Maybe we could show some accounting for that in the 'confirm' window... People understand having to pay for data in other contexts, so it would give at least *some* clue at how the client comes up with a certain number, that it doesn't look completely random.\r\n",
      "created_at" : "2014-10-25T06:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60473639",
      "id" : 60473639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-25T06:53:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60473639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "At the risk of sounding like a broken record:\r\n\r\n@cozz: \"Well, I paid 1000/kb and it took 1 block to confirm. (300 for a <300 bytes transaction)\"\r\nAre you sure it got confirmed because of fee and not priority?\r\n\r\nEven if it was 0-priority, you can get lucky-- there is at least one miner prouducing ~1MB maxsize blocks, if he happens to produce a block just before or after you send a low-fee transaction it will confirm very quickly.\r\n\r\nAlex Morcos is working on improved fee estimation code that uses a different approach (and is running a real-world, send-a-bunch-of-transactions-and-see-how-long-they-take-to-confirm experiment with his code and the current code to compare which is better).\r\n",
      "created_at" : "2014-10-26T13:23:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60517237",
      "id" : 60517237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-26T13:23:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60517237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "I am sure that coincontrol said \"lowest\", but I didnt do the math, sure I got a little lucky with that transaction.\r\n\r\nIt did another test, sending 2 transactions at the same time, one with 40000/kb, one with 1000/kb.\r\nThe first was confirmed within 1 block.\r\nThe second within 3 blocks, block got orphaned, confirmed again within another 3 blocks (according to blockchain.info).\r\nSo again smartfees estimation was a little off.\r\n\r\nSmartfees estimation implies, that if you only pay the minfee, your transaction will take more than 25 blocks to confirm.\r\nWith the current transaction volume, from my tests, this is not really true.\r\n\r\nThe way I see this, is that our estimation code works better the closer we get to max out the blocks.\r\n\r\nThe problem I have with the code is, that it doesnt tell the user, when its safe to just send the minfee.\r\n(Because it doesnt know and we are only basing our decision on what other people are paying)\r\n\r\nBut after all, I just want to help development here and not do the opposite.\r\n\r\nThe estimations are very vague, but at least they seem to be able to correctly differ between\r\n- \"get confirmed now\"\r\n- \"get confirmed\", \r\n- \"get confirmed probably not so quick/maybe never\" (hardcoded minfee)\r\n\r\nInitially I was thinking, that if the fee-slider ends before the minfee, it doesnt make sense to bring this to the GUI, but if we\r\nhave a checkbox \"pay the minfee, but use at own risk\" I would be fine with this.\r\n\r\nI am unsure myself, about a good way to put this in the GUI.\r\nI just would like to get the minfee in somehow (if possible).\r\n\r\nJust clicked an ugly mockup screenshot together, what do you think of the content?\r\nI thought maybe put this in the sendcoinsdialog, similar to where the coincontrol features are.\r\nWe could make this fee-setting show/hidable, so that you have full space for the recipients.\r\nMaybe move the minfee-disclaimer to the tooltip, and just say (Warning: read the tooltip!!)\r\n\r\nFor default, I would say estimatefee(25)=normal, not estimatefee(1).\r\n\r\nI could also replace normal with \"Within 25 blocks\" and fast with \"Within 1 block\".\r\nBut then again 25 is catch-all, so unsure about claiming that it will confirm in 25 blocks for sure.\r\n\r\nIf we are sure, that our estimations are accurate,\r\nit would be easy to say in the slider 1 block, 2 blocks, ... 25 blocks.\r\n![smartfee4](https://cloud.githubusercontent.com/assets/2814559/4784752/99479974-5d64-11e4-9256-2eac3b797eb6.png)\r\n",
      "created_at" : "2014-10-26T23:29:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60537286",
      "id" : 60537286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-26T23:29:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60537286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "@cozz I like that mockup. Indeed it doesn't make sense to really precise in statements (as it is an estimate), though in addition to the opaque slider from normal to fast it could say something like \"estimated to be within N blocks\".\r\n",
      "created_at" : "2014-10-27T08:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60564395",
      "id" : 60564395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-27T09:00:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60564395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ok, so I am going to work on this anytime soon.",
      "created_at" : "2014-10-27T14:10:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-60597823",
      "id" : 60597823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-10-27T14:10:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/60597823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2814559?v=3",
         "events_url" : "https://api.github.com/users/cozz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cozz/followers",
         "following_url" : "https://api.github.com/users/cozz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cozz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cozz",
         "id" : 2814559,
         "login" : "cozz",
         "organizations_url" : "https://api.github.com/users/cozz/orgs",
         "received_events_url" : "https://api.github.com/users/cozz/received_events",
         "repos_url" : "https://api.github.com/users/cozz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cozz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cozz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cozz"
      }
   },
   {
      "body" : "Closing as #5200 addresses this.\r\nThanks @cozz.\r\n",
      "created_at" : "2014-11-19T10:18:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/4866#issuecomment-63618565",
      "id" : 63618565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/4866",
      "updated_at" : "2014-11-19T10:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63618565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
