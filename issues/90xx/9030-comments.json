[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9030#discussion_r85334580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9030"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85334580"
         }
      },
      "body" : "This will entirely break downloading of blocks via compact blocks.",
      "commit_id" : "0a7fc7fa4c0b03ed70459902616efb4d99bfba06",
      "created_at" : "2016-10-27T13:21:40Z",
      "diff_hunk" : "@@ -5827,8 +5827,20 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     else if (strCommand == NetMsgType::BLOCKTXN && !fImporting && !fReindex) // Ignore blocks received while importing\n     {\n         BlockTransactions resp;\n+        int nSize = vRecv.size();\n         vRecv >> resp;\n \n+        BlockMap::iterator mi = mapBlockIndex.find(resp.blockhash);\n+        if (mi == mapBlockIndex.end()) {\n+            LogPrint(\"block\", \"recv blocktxn %s size=%d not recognised peer=%d\\n\", resp.blockhash.ToString(), nSize, pfrom->id);\n+            return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9030#discussion_r85334580",
      "id" : 85334580,
      "original_commit_id" : "0a7fc7fa4c0b03ed70459902616efb4d99bfba06",
      "original_position" : 10,
      "path" : "src/main.cpp",
      "position" : 10,
      "pull_request_review_id" : 6056037,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9030",
      "updated_at" : "2016-10-27T13:21:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85334580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9030#discussion_r85334648"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9030"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85334648"
         }
      },
      "body" : "This needs cs_main",
      "commit_id" : "0a7fc7fa4c0b03ed70459902616efb4d99bfba06",
      "created_at" : "2016-10-27T13:21:55Z",
      "diff_hunk" : "@@ -5827,8 +5827,20 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     else if (strCommand == NetMsgType::BLOCKTXN && !fImporting && !fReindex) // Ignore blocks received while importing\n     {\n         BlockTransactions resp;\n+        int nSize = vRecv.size();\n         vRecv >> resp;\n \n+        BlockMap::iterator mi = mapBlockIndex.find(resp.blockhash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9030#discussion_r85334648",
      "id" : 85334648,
      "original_commit_id" : "0a7fc7fa4c0b03ed70459902616efb4d99bfba06",
      "original_position" : 7,
      "path" : "src/main.cpp",
      "position" : 7,
      "pull_request_review_id" : 6056115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9030",
      "updated_at" : "2016-10-27T13:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/85334648",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
