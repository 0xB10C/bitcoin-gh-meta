[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r405883771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405883771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "this is incorrect, I believe. The chain can proceed to the next block after the call to BlockUntilSyncedToCurrentChain, but the wallet may not catch up until the lock is taken in the next line.\r\n\r\nThis should be wallet.m_last_block_processed",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T00:05:52Z",
      "diff_hunk" : "@@ -2399,6 +2400,11 @@ static UniValue getbalances(const JSONRPCRequest& request)\n     const auto bal = wallet.GetBalance();\n     UniValue balances{UniValue::VOBJ};\n     {\n+        Optional<int> height = locked_chain->getHeight();\n+        if (height) {\n+            uint256 lastblock = locked_chain->getBlockHash(height.get());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r405883771",
      "id" : 405883771,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg4Mzc3MQ==",
      "original_commit_id" : "090181649d677feb4cd32fbccceffbc3af7b08d9",
      "original_line" : 2405,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390411027,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405883771",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r405887478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405887478"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could move this last, since it is the least-important information?",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T00:18:48Z",
      "diff_hunk" : "@@ -2369,6 +2369,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n+                {RPCResult::Type::STR_HEX, \"lastblock\", \"The hash of the block the balances were valid on\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r405887478",
      "id" : 405887478,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg4NzQ3OA==",
      "original_commit_id" : "090181649d677feb4cd32fbccceffbc3af7b08d9",
      "original_line" : 2372,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390415193,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/405887478",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406077208"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406077208"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks!\r\n\r\nHave changed the code by introducing a new wallet function **GetLastBlockHash()** that returns `m_last_block_processed `.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T09:30:31Z",
      "diff_hunk" : "@@ -2399,6 +2400,11 @@ static UniValue getbalances(const JSONRPCRequest& request)\n     const auto bal = wallet.GetBalance();\n     UniValue balances{UniValue::VOBJ};\n     {\n+        Optional<int> height = locked_chain->getHeight();\n+        if (height) {\n+            uint256 lastblock = locked_chain->getBlockHash(height.get());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406077208",
      "id" : 406077208,
      "in_reply_to_id" : 405883771,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjA3NzIwOA==",
      "original_commit_id" : "090181649d677feb4cd32fbccceffbc3af7b08d9",
      "original_line" : 2405,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390634745,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406077208",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406077343"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406077343"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T09:30:46Z",
      "diff_hunk" : "@@ -2369,6 +2369,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n+                {RPCResult::Type::STR_HEX, \"lastblock\", \"The hash of the block the balances were valid on\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406077343",
      "id" : 406077343,
      "in_reply_to_id" : 405887478,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjA3NzM0Mw==",
      "original_commit_id" : "090181649d677feb4cd32fbccceffbc3af7b08d9",
      "original_line" : 2372,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390634920,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406077343",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK. Could:\r\n> \r\n> * Add tests\r\n> * Add documentation about this guideline to `doc/developer-notes.md` where `BlockUntilSyncedToCurrentChain` is also documented\r\n\r\nMany thanks. \r\n\r\nHave added a new functional test `rpc_getbalances.py` and a new entry on `getbalances` and that it uses `m_last_block_processed` to populate `lastblock`field.\r\n\r\nHowever, not sure if the docs I added is sufficient enough.",
      "created_at" : "2020-04-09T09:32:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611431358",
      "id" : 611431358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzMTM1OA==",
      "updated_at" : "2020-04-09T09:32:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611431358",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "And again, GitHub closed my pull request. This makes no sense, I just force pushed it.\r\nOk, will have to open a new PR with the same content. Sorry!",
      "created_at" : "2020-04-09T09:37:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611433136",
      "id" : 611433136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzMzEzNg==",
      "updated_at" : "2020-04-09T09:37:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611433136",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fanquake \r\nMaybe you can reopen it?\r\nWe had this problem in the past already. Not sure why GitHub is doing it.",
      "created_at" : "2020-04-09T09:37:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611433373",
      "id" : 611433373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzMzM3Mw==",
      "updated_at" : "2020-04-09T09:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611433373",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I cannot. You'll likely have to open a new PR.",
      "created_at" : "2020-04-09T09:38:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611433645",
      "id" : 611433645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzMzY0NQ==",
      "updated_at" : "2020-04-09T09:38:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611433645",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I cannot. You'll likely have to open a new PR.\r\n\r\nOk, no problem. ",
      "created_at" : "2020-04-09T09:39:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611434096",
      "id" : 611434096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzNDA5Ng==",
      "updated_at" : "2020-04-09T09:39:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611434096",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@brakmic see this:\r\n\r\n<img width=\"995\" alt=\"Screenshot 2020-04-09 at 10 43 55\" src=\"https://user-images.githubusercontent.com/3534524/78881699-13b73400-7a4f-11ea-8626-25d49dc38b7d.png\">\r\n",
      "created_at" : "2020-04-09T09:44:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611436261",
      "id" : 611436261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzNjI2MQ==",
      "updated_at" : "2020-04-09T09:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611436261",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag \r\nThanks. \r\nI'll try it. ",
      "created_at" : "2020-04-09T09:45:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611436928",
      "id" : 611436928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzNjkyOA==",
      "updated_at" : "2020-04-09T09:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611436928",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @brakmic see this:\r\n> \r\n> <img alt=\"Screenshot 2020-04-09 at 10 43 55\" width=\"995\" src=\"https://user-images.githubusercontent.com/3534524/78881699-13b73400-7a4f-11ea-8626-25d49dc38b7d.png\">\r\n\r\nReopened. Thanks, @promag ",
      "created_at" : "2020-04-09T09:51:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611439382",
      "id" : 611439382,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQzOTM4Mg==",
      "updated_at" : "2020-04-09T09:51:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611439382",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nVery good idea, to add \"valid as of ...\" stamp to the returned data. What about also adding the height to make it easy/obvious which one is newer, assuming a few requests:\r\n\r\n```\r\n\"lastblock\": {\r\n    \"hash\": \"5ba7e8b9a9e6aed88b4641257ef13ecaace1211688f5b5fec99cad36e1650e5d\",\r\n    \"height\": 12345\r\n}\r\n```\r\n\r\nBut it's good even without that.\r\n\r\nThanks!",
      "created_at" : "2020-04-09T10:10:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611447394",
      "id" : 611447394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQ0NzM5NA==",
      "updated_at" : "2020-04-09T10:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611447394",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406101315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406101315"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/m_last_block_processed/lastblock/",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:12:36Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406101315",
      "id" : 406101315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEwMTMxNQ==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1083,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390664170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406101315",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK.\r\n> \r\n> Very good idea, to add \"valid as of ...\" stamp to the returned data. What about also adding the height to make it easy/obvious which one is newer, assuming a few requests:\r\n> \r\n> ```\r\n> \"lastblock\": {\r\n>     \"hash\": \"5ba7e8b9a9e6aed88b4641257ef13ecaace1211688f5b5fec99cad36e1650e5d\",\r\n>     \"height\": 12345\r\n> }\r\n> ```\r\n> \r\n> But it's good even without that.\r\n> \r\n> Thanks!\r\n\r\nAs wallet already has `GetLastBlockHeight()`we could make `lastblock` a UniValue::VOBJ and populate it with hash and height. ",
      "created_at" : "2020-04-09T10:14:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611449030",
      "id" : 611449030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQ0OTAzMA==",
      "updated_at" : "2020-04-09T10:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611449030",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406102753"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406102753"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe worth mentioning the result shouldn't be cached because importing new keys could invalidate it. Instead of \"were valid on\" maybe say \"were calculated/computed/evaluated on\"?",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:15:11Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`\n+  field. As this call locks the chainstate we can also inform about the block\n+  the balances were valid on.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406102753",
      "id" : 406102753,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEwMjc1Mw==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1085,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390664170,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406102753",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406106374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406106374"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't understand, sorry. We are returning `m_last_block_processed` in the field `lastblock`.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:22:09Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406106374",
      "id" : 406106374,
      "in_reply_to_id" : 406101315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEwNjM3NA==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1083,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390670159,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406106374",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406108967"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406108967"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks. Have updated the wording and added a warning regarding caching of results.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:27:06Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`\n+  field. As this call locks the chainstate we can also inform about the block\n+  the balances were valid on.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406108967",
      "id" : 406108967,
      "in_reply_to_id" : 406102753,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEwODk2Nw==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1085,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390673345,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406108967",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406112111"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406112111"
         }
      },
      "author_association" : "MEMBER",
      "body" : "calculated?",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:33:12Z",
      "diff_hunk" : "@@ -2382,6 +2382,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n                     {RPCResult::Type::STR_AMOUNT, \"untrusted_pending\", \"untrusted pending balance (outputs created by others that are in the mempool)\"},\n                     {RPCResult::Type::STR_AMOUNT, \"immature\", \"balance from immature coinbase outputs\"},\n                 }},\n+                {RPCResult::Type::STR_HEX, \"lastblock\", \"The hash of the block the balances were valid on\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406112111",
      "id" : 406112111,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExMjExMQ==",
      "original_commit_id" : "dc862b6fdac65f174919824ecb8822a2b171877a",
      "original_line" : 2385,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390677183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406112111",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406114879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406114879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sorry, I mean that we could avoid C++ variable names here. I was thinking something like\r\n```\r\n- The `getbalances` RPC now returns `lastblock` which is the wallet's last processed block\r\n  hash at the time the balances were calculated.\r\n```",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:38:39Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406114879",
      "id" : 406114879,
      "in_reply_to_id" : 406101315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExNDg3OQ==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1083,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390677183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406114879",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406115859"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406115859"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Compare with `self.nodes[0].getbestblockhash()` instead?",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:40:35Z",
      "diff_hunk" : "@@ -0,0 +1,40 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the getbalances RPC.\n+\n+- Generate a few blocks\n+- Check for certain fields in returned JSON\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (assert_equal, assert_greater_than,\n+                                assert_is_hash_string)\n+\n+class GetBalancesTest (BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Move the chain\n+        self.nodes[0].generatetoaddress(2, self.nodes[0].get_deterministic_priv_key().address)\n+        # Check JSON outputs\n+        balances = self.nodes[0].getbalances()\n+        assert_greater_than(balances['mine']['immature'], 0)\n+        assert_equal(balances['mine']['trusted'], 0)\n+        # Check if lastblock present and of type hash\n+        lastblock1 = balances['lastblock']\n+        assert_is_hash_string(lastblock1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406115859",
      "id" : 406115859,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExNTg1OQ==",
      "original_commit_id" : "dc862b6fdac65f174919824ecb8822a2b171877a",
      "original_line" : 32,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getbalances.py",
      "position" : null,
      "pull_request_review_id" : 390677183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406115859",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406118589"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406118589"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, this too was changed when I converted `lastblock` into an object that contains both hash and height.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:46:02Z",
      "diff_hunk" : "@@ -2382,6 +2382,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n                     {RPCResult::Type::STR_AMOUNT, \"untrusted_pending\", \"untrusted pending balance (outputs created by others that are in the mempool)\"},\n                     {RPCResult::Type::STR_AMOUNT, \"immature\", \"balance from immature coinbase outputs\"},\n                 }},\n+                {RPCResult::Type::STR_HEX, \"lastblock\", \"The hash of the block the balances were valid on\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406118589",
      "id" : 406118589,
      "in_reply_to_id" : 406112111,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExODU4OQ==",
      "original_commit_id" : "dc862b6fdac65f174919824ecb8822a2b171877a",
      "original_line" : 2385,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 390684980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406118589",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406119051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406119051"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, will update the tests. ",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T10:47:04Z",
      "diff_hunk" : "@@ -0,0 +1,40 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the getbalances RPC.\n+\n+- Generate a few blocks\n+- Check for certain fields in returned JSON\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (assert_equal, assert_greater_than,\n+                                assert_is_hash_string)\n+\n+class GetBalancesTest (BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        # Move the chain\n+        self.nodes[0].generatetoaddress(2, self.nodes[0].get_deterministic_priv_key().address)\n+        # Check JSON outputs\n+        balances = self.nodes[0].getbalances()\n+        assert_greater_than(balances['mine']['immature'], 0)\n+        assert_equal(balances['mine']['trusted'], 0)\n+        # Check if lastblock present and of type hash\n+        lastblock1 = balances['lastblock']\n+        assert_is_hash_string(lastblock1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406119051",
      "id" : 406119051,
      "in_reply_to_id" : 406115859,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExOTA1MQ==",
      "original_commit_id" : "dc862b6fdac65f174919824ecb8822a2b171877a",
      "original_line" : 32,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getbalances.py",
      "position" : null,
      "pull_request_review_id" : 390685533,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406119051",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Concept ACK.\r\n> \r\n> Very good idea, to add \"valid as of ...\" stamp to the returned data. What about also adding the height to make it easy/obvious which one is newer, assuming a few requests:\r\n> \r\n> ```\r\n> \"lastblock\": {\r\n>     \"hash\": \"5ba7e8b9a9e6aed88b4641257ef13ecaace1211688f5b5fec99cad36e1650e5d\",\r\n>     \"height\": 12345\r\n> }\r\n> ```\r\n> \r\n> But it's good even without that.\r\n> \r\n> Thanks!\r\n\r\nHave updated the code, please check.",
      "created_at" : "2020-04-09T10:49:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#issuecomment-611463296",
      "id" : 611463296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18570",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMTQ2MzI5Ng==",
      "updated_at" : "2020-04-09T10:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/611463296",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406125463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406125463"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks. Have update the docs.",
      "commit_id" : "0246a6c89fd9987ab648c9f493953bf5db542ed0",
      "created_at" : "2020-04-09T11:00:38Z",
      "diff_hunk" : "@@ -1080,6 +1080,10 @@ A few guidelines for introducing and reviewing new RPC interfaces:\n     until the wallet is caught up to the chainstate as of the RPC call's entry.\n     This also makes the API much easier for RPC clients to reason about.\n \n+- The RPC call `getbalances` also returns `m_last_block_processed` in the `lastblock`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18570#discussion_r406125463",
      "id" : 406125463,
      "in_reply_to_id" : 406101315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEyNTQ2Mw==",
      "original_commit_id" : "eaf28883292315a0a648f19cd94681b5383574f6",
      "original_line" : 1083,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 390693368,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18570",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-09T11:00:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/406125463",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   }
]
