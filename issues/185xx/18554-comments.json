[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15719](https://github.com/bitcoin/bitcoin/pull/15719) (Wallet passive startup by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-16T01:02:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-614354459",
      "id" : 614354459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDM1NDQ1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-20T01:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614354459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413497260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413497260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "typo?",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-23T04:19:48Z",
      "diff_hunk" : "@@ -61,7 +61,7 @@ const CBlockIndex *CChain::FindFork(const CBlockIndex *pindex) const {\n \n CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n {\n-    std::pair<int64_t, int> blockparams = std::make_pair(nTime, height);\n+2    std::pair<int64_t, int> blockparams = std::make_pair(nTime, height);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413497260",
      "id" : 413497260,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ5NzI2MA==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chain.cpp",
      "position" : null,
      "pull_request_review_id" : 398748470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413497260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413497381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413497381"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably should be a debug option only?",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-23T04:20:11Z",
      "diff_hunk" : "@@ -61,6 +61,7 @@ void WalletInit::AddWalletOptions() const\n     gArgs.AddArg(\"-wallet=<path>\", \"Specify wallet database path. Can be specified multiple times to load multiple wallets. Path is interpreted relative to <walletdir> if it is not absolute, and will be created if it does not exist (as a directory containing a wallet.dat file and log files). For backwards compatibility this will also accept names of existing data files in <walletdir>.)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletbroadcast\",  strprintf(\"Make the wallet broadcast transactions (default: %u)\", DEFAULT_WALLETBROADCAST), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletdir=<dir>\", \"Specify directory to hold wallets (default: <datadir>/wallets if it exists, otherwise <datadir>)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-walletcrosschain\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_WALLETCROSSCHAIN), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413497381",
      "id" : 413497381,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ5NzM4MQ==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 398748567,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413497381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413759614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413759614"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it makes sense to allow users who know what they are doing to override this. This was suggested by @gmaxwell in #14533 discussion.",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-23T12:07:50Z",
      "diff_hunk" : "@@ -61,6 +61,7 @@ void WalletInit::AddWalletOptions() const\n     gArgs.AddArg(\"-wallet=<path>\", \"Specify wallet database path. Can be specified multiple times to load multiple wallets. Path is interpreted relative to <walletdir> if it is not absolute, and will be created if it does not exist (as a directory containing a wallet.dat file and log files). For backwards compatibility this will also accept names of existing data files in <walletdir>.)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletbroadcast\",  strprintf(\"Make the wallet broadcast transactions (default: %u)\", DEFAULT_WALLETBROADCAST), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletdir=<dir>\", \"Specify directory to hold wallets (default: <datadir>/wallets if it exists, otherwise <datadir>)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-walletcrosschain\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_WALLETCROSSCHAIN), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413759614",
      "id" : 413759614,
      "in_reply_to_id" : 413497381,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc1OTYxNA==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 399033136,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413759614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413759888"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413759888"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes. Fixed.",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-23T12:08:13Z",
      "diff_hunk" : "@@ -61,7 +61,7 @@ const CBlockIndex *CChain::FindFork(const CBlockIndex *pindex) const {\n \n CBlockIndex* CChain::FindEarliestAtLeast(int64_t nTime, int height) const\n {\n-    std::pair<int64_t, int> blockparams = std::make_pair(nTime, height);\n+2    std::pair<int64_t, int> blockparams = std::make_pair(nTime, height);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413759888",
      "id" : 413759888,
      "in_reply_to_id" : 413497260,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzc1OTg4OA==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/chain.cpp",
      "position" : null,
      "pull_request_review_id" : 399033411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413759888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413923851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413923851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, debug options are for users who know what they are doing...",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-23T16:02:26Z",
      "diff_hunk" : "@@ -61,6 +61,7 @@ void WalletInit::AddWalletOptions() const\n     gArgs.AddArg(\"-wallet=<path>\", \"Specify wallet database path. Can be specified multiple times to load multiple wallets. Path is interpreted relative to <walletdir> if it is not absolute, and will be created if it does not exist (as a directory containing a wallet.dat file and log files). For backwards compatibility this will also accept names of existing data files in <walletdir>.)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletbroadcast\",  strprintf(\"Make the wallet broadcast transactions (default: %u)\", DEFAULT_WALLETBROADCAST), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletdir=<dir>\", \"Specify directory to hold wallets (default: <datadir>/wallets if it exists, otherwise <datadir>)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-walletcrosschain\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_WALLETCROSSCHAIN), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r413923851",
      "id" : 413923851,
      "in_reply_to_id" : 413497381,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzkyMzg1MQ==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 399248992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413923851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r414533672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414533672"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Understood. Should it also be in `WALLET_DEBUG_TEST` category?",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2020-04-24T12:22:30Z",
      "diff_hunk" : "@@ -61,6 +61,7 @@ void WalletInit::AddWalletOptions() const\n     gArgs.AddArg(\"-wallet=<path>\", \"Specify wallet database path. Can be specified multiple times to load multiple wallets. Path is interpreted relative to <walletdir> if it is not absolute, and will be created if it does not exist (as a directory containing a wallet.dat file and log files). For backwards compatibility this will also accept names of existing data files in <walletdir>.)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletbroadcast\",  strprintf(\"Make the wallet broadcast transactions (default: %u)\", DEFAULT_WALLETBROADCAST), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     gArgs.AddArg(\"-walletdir=<dir>\", \"Specify directory to hold wallets (default: <datadir>/wallets if it exists, otherwise <datadir>)\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-walletcrosschain\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_WALLETCROSSCHAIN), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r414533672",
      "id" : 414533672,
      "in_reply_to_id" : 413497381,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDUzMzY3Mg==",
      "original_commit_id" : "e1dc5b483c4d5515d2a264b4bf836a6b4a2bbfa8",
      "original_line" : 64,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 399896814,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414533672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-01T11:08:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-622346839",
      "id" : 622346839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjM0NjgzOQ==",
      "updated_at" : "2020-05-01T11:08:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622346839",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-06-22T21:48:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-647786210",
      "id" : 647786210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0Nzc4NjIxMA==",
      "updated_at" : "2020-06-22T21:48:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647786210",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r594005916"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594005916"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please [use `std::optional` in new code](https://github.com/bitcoin/bitcoin/blob/master/src/optional.h#L12).",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2021-03-15T02:03:10Z",
      "diff_hunk" : "@@ -3913,6 +3913,28 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n     // interface.\n     walletInstance->m_chain_notifications_handler = walletInstance->chain().handleNotifications(walletInstance);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(*walletInstance->database);\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const Optional<int> fork_height = chain.findLocatorFork(locator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r594005916",
      "id" : 594005916,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDAwNTkxNg==",
      "original_commit_id" : "36bb866d45a9a54280d32100fba1899b8af6eaf7",
      "original_line" : 4075,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 611778282,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594005916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r594243946"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594243946"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2021-03-15T11:09:52Z",
      "diff_hunk" : "@@ -3913,6 +3913,28 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n     // interface.\n     walletInstance->m_chain_notifications_handler = walletInstance->chain().handleNotifications(walletInstance);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(*walletInstance->database);\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const Optional<int> fork_height = chain.findLocatorFork(locator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r594243946",
      "id" : 594243946,
      "in_reply_to_id" : 594005916,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NDI0Mzk0Ng==",
      "original_commit_id" : "36bb866d45a9a54280d32100fba1899b8af6eaf7",
      "original_line" : 4075,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 612070759,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-20T00:29:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/594243946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like the [CI picked up a memory leak](https://cirrus-ci.com/task/6726428814213120) running `wallet_crosschain.py`:\r\n\r\n```\r\n node0 stderr =================================================================\r\n==39469==ERROR: LeakSanitizer: detected memory leaks\r\nDirect leak of 22096 byte(s) in 18 object(s) allocated from:\r\n    #0 0x556b3fed1e6d in malloc (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/bitcoind+0x17b7e6d)\r\n    #1 0x7fd21ead48c4 in __os_malloc (/lib/x86_64-linux-gnu/libdb_cxx-5.3.so+0x1698c4)\r\nIndirect leak of 2016 byte(s) in 18 object(s) allocated from:\r\n    #0 0x556b3fed1e6d in malloc (/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/bitcoind+0x17b7e6d)\r\n    #1 0x7fd21ead48c4 in __os_malloc (/lib/x86_64-linux-gnu/libdb_cxx-5.3.so+0x1698c4)\r\nSUMMARY: AddressSanitizer: 24112 byte(s) leaked in 36 allocation(s). \r\n```",
      "created_at" : "2021-03-19T16:07:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-802942806",
      "id" : 802942806,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwMjk0MjgwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-19T16:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/802942806",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-04-13T16:31:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-818874545",
      "id" : 818874545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxODg3NDU0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-13T16:31:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/818874545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r671579313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671579313"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Had to move it here, since putting this after line 2766 where I placed it originally results in memory leaks, as detected by the sanitizer.",
      "commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "created_at" : "2021-07-17T00:24:08Z",
      "diff_hunk" : "@@ -2733,6 +2733,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),\n+                                             std::find(locator.vHave.begin(), locator.vHave.end(),\n+                                                       chain.getBlockHash(*fork_height))) > 6)\n+            {\n+                error = _(\"Wallet files should not be reused across chains.\");\n+                return false;\n+            }\n+        }\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r671579313",
      "id" : 671579313,
      "line" : 2757,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTU3OTMxMw==",
      "original_commit_id" : "d48ed7a7d16640ed625147ca29b91efb81cc8667",
      "original_line" : 2757,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 25,
      "pull_request_review_id" : 708808935,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-17T00:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/671579313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-07-18T11:25:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-882041846",
      "id" : 882041846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "IC_kwDOABII5840kuP2",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-18T11:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882041846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-22T17:31:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-885087897",
      "id" : 885087897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "IC_kwDOABII5840wV6Z",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-22T17:31:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885087897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR does not fix the issues that I was expecting it would. Have shared the details in https://github.com/bitcoin/bitcoin/issues/22792",
      "created_at" : "2021-08-24T16:47:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#issuecomment-904808840",
      "id" : 904808840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18554",
      "node_id" : "IC_kwDOABII58417kmI",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T16:47:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904808840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697665655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697665655"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems overly complicated. The last entry in the block locator is always the genesis block, so that can be used to compare to the expected chain's genesis block hash.",
      "commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "created_at" : "2021-08-27T19:14:06Z",
      "diff_hunk" : "@@ -2746,6 +2746,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697665655",
      "id" : 697665655,
      "line" : 2761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NzY2NTY1NQ==",
      "original_commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "original_line" : 2761,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 740823053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-27T19:14:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697665655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697669516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697669516"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As discussed in the wallet meeting if we want to take into account altcoins that could share Bitcoin mainnet's genesis block we'd need more than just a genesis block comparison. Also stated here: https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-431645072",
      "commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "created_at" : "2021-08-27T19:21:54Z",
      "diff_hunk" : "@@ -2746,6 +2746,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697669516",
      "id" : 697669516,
      "in_reply_to_id" : 697665655,
      "line" : 2761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NzY2OTUxNg==",
      "original_commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "original_line" : 2761,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 740828277,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-27T19:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697669516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697682414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697682414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For descriptor wallets the case with altcoins is already covered by storing network magic.\r\n\r\nMy vote goes for simpler code and genesis block hash check.",
      "commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "created_at" : "2021-08-27T19:48:11Z",
      "diff_hunk" : "@@ -2746,6 +2746,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r697682414",
      "id" : 697682414,
      "in_reply_to_id" : 697665655,
      "line" : 2761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NzY4MjQxNA==",
      "original_commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "original_line" : 2761,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 740845378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-27T19:48:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/697682414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r701155951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701155951"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As I understand there is an agreement to restore the simpler implementation I used to have in #14533, right?",
      "commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "created_at" : "2021-09-02T14:45:55Z",
      "diff_hunk" : "@@ -2746,6 +2746,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r701155951",
      "id" : 701155951,
      "in_reply_to_id" : 697665655,
      "line" : 2761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMTE1NTk1MQ==",
      "original_commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "original_line" : 2761,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 745162668,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-02T14:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701155951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/rodentrabies/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rodentrabies/followers",
         "following_url" : "https://api.github.com/users/rodentrabies/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rodentrabies/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rodentrabies",
         "id" : 7646953,
         "login" : "rodentrabies",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/rodentrabies/orgs",
         "received_events_url" : "https://api.github.com/users/rodentrabies/received_events",
         "repos_url" : "https://api.github.com/users/rodentrabies/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rodentrabies/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rodentrabies/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rodentrabies"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r701434441"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701434441"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@rodentrabies Yes",
      "commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "created_at" : "2021-09-02T21:27:54Z",
      "diff_hunk" : "@@ -2746,6 +2746,28 @@ bool CWallet::AttachChain(const std::shared_ptr<CWallet>& walletInstance, interf\n     assert(!walletInstance->m_chain || walletInstance->m_chain == &chain);\n     walletInstance->m_chain = &chain;\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-walletcrosschain\", DEFAULT_WALLETCROSSCHAIN))\n+    {\n+        WalletBatch batch(walletInstance->GetDatabase());\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if none of\n+            // its last 6 best known blocks are in the active chain\n+            // (this heavily relies on the fact that locator stores\n+            // last 10 blocks consecutively):\n+            const std::optional<int> fork_height = chain.findLocatorFork(locator);\n+            if (fork_height && std::distance(locator.vHave.begin(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18554#discussion_r701434441",
      "id" : 701434441,
      "in_reply_to_id" : 697665655,
      "line" : 2761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMTQzNDQ0MQ==",
      "original_commit_id" : "37428c459aa71b4def3035fcf50434b32d3cb41d",
      "original_line" : 2761,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 745534890,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18554",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-02T21:27:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/701434441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   }
]
