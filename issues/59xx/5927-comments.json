[
   {
      "body" : "I'm getting EXC_BAD_ACCESS during `setgenerate` -> `ConnectBlock()`.\r\n\r\nMaybe `CBlockIndex* CBlockIndex::GetAncestor(int height)` was called with a CBlockIndex with a `pskip` NULL Poiner?\r\n\r\n```\r\n* thread #2: tid = 0x586dd, 0x00000001000518fe bitcoind`CBlockIndex::GetAncestor(this=0x000000010597cf38, height=0) + 190 at chain.cpp:89, stop reason = EXC_BAD_ACCESS (code=1, address=0x10)\r\n    frame #0: 0x00000001000518fe bitcoind`CBlockIndex::GetAncestor(this=0x000000010597cf38, height=0) + 190 at chain.cpp:89\r\n   86  \t            (heightSkip > height && !(heightSkipPrev < heightSkip - 2 &&\r\n   87  \t                                      heightSkipPrev >= height))) {\r\n   88  \t            // Only follow pskip if pprev->pskip isn't better than pskip->pprev.\r\n-> 89  \t            pindexWalk = pindexWalk->pskip;\r\n   90  \t            heightWalk = heightSkip;\r\n   91  \t        } else {\r\n   92  \t            pindexWalk = pindexWalk->pprev;\r\n(lldb) bt\r\n* thread #2: tid = 0x586dd, 0x00000001000518fe bitcoind`CBlockIndex::GetAncestor(this=0x000000010597cf38, height=0) + 190 at chain.cpp:89, stop reason = EXC_BAD_ACCESS (code=1, address=0x10)\r\n  * frame #0: 0x00000001000518fe bitcoind`CBlockIndex::GetAncestor(this=0x000000010597cf38, height=0) + 190 at chain.cpp:89\r\n    frame #1: 0x0000000100163650 bitcoind`ConnectBlock(block=0x0000000101f04690, state=0x000000010597d5f0, pindex=0x000000010597cf38, view=0x000000010597cfc0, fJustCheck=true) + 592 at main.cpp:1761\r\n    frame #2: 0x00000001001730a7 bitcoind`TestBlockValidity(state=0x000000010\r\n```",
      "created_at" : "2015-03-19T19:57:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83739103",
      "id" : 83739103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-19T19:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83739103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Thanks for doing the debugging job I should have done :)\n",
      "created_at" : "2015-03-19T20:19:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83749691",
      "id" : 83749691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-19T20:19:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83749691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Hmm..  So this requires #5875 to be safe I think.  Was that the intention?",
      "created_at" : "2015-03-19T22:15:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-83782200",
      "id" : 83782200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-19T22:15:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83782200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos Well there are still measures in place to prevent us from accepting a long header-branch still, and we won't accept blocks for which we don't accept the header. Though the PR as-is indeed loosens some things, that are countered by #5875.",
      "created_at" : "2015-03-21T14:22:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84354192",
      "id" : 84354192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-21T14:22:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84354192",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ok, I think my concern is that before this change, when a node starts up, once it gets through enough IBD, it's impossible to DOS it by just feeding it low difficulty full blocks, because those blocks would either have to be a fork before a checkpoint, or they wouldn't connect back to a valid chain.   After this change, I think it's possible to push through a long low-difficulty fork before the node gets through the checkpoints.  If the length is greater than the height of the last checkpoint, then from then on nothing prevents you from stuffing low difficulty blocks at this node forever until you fill up its disk or tie up its CPU.   Once you've snuck in that low difficulty long fork at the beginning it's usable any time after.\r\n ",
      "created_at" : "2015-03-21T18:29:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84414418",
      "id" : 84414418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-21T18:29:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84414418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "@morcos You're right, but just receiving headers up to the checkpoints suffices to prevent branches, which should be within seconds in normal circumstances (for now). Headers synchronization is however not very robust (it's easy to have a peer that just don't respond to headers request to delay the synchronization significantly), so I agree that it's better to combine this with #5875.",
      "created_at" : "2015-03-23T11:50:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-84963352",
      "id" : 84963352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-23T11:50:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/84963352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jonasschnelli Bug fixed.",
      "created_at" : "2015-03-23T13:43:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-85000322",
      "id" : 85000322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-03-23T13:43:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85000322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased, and will rebase on #5975 if that gets merged first.",
      "created_at" : "2015-05-10T21:28:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-100703854",
      "id" : 100703854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-05-10T21:28:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100703854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@gavinandresen Bug fixed, I hope.",
      "created_at" : "2015-05-13T20:43:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-101809431",
      "id" : 101809431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-05-13T20:43:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/101809431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Tested ACK (code reviewed, synced up to block 320700 with #5875 and #5927)",
      "created_at" : "2015-05-21T14:57:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104308936",
      "id" : 104308936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-05-21T14:57:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104308936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ut ACK",
      "created_at" : "2015-05-21T23:52:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104452662",
      "id" : 104452662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5927",
      "updated_at" : "2015-05-21T23:52:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104452662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
