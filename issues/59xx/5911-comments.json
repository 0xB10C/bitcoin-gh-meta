[
   {
      "body" : "This change has another advantage: every connection will (potentially) go through a different exit node. That significantly reduces the chance to get unlucky and pick a single exit node that is either malicious with regard to bitcoin, or widely banned on the P2P network.\r\n\r\nYou can test this by looking at `via` in the peers list or `addrlocal` in `getpeerinfo`. This is the address that peers report that you connect from.",
      "created_at" : "2015-03-19T07:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83393101",
      "id" : 83393101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T07:43:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83393101",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Vaguely in favor -- needs a lot of thinking-through.  Consult with some Tor experts for their opinion?\r\n",
      "created_at" : "2015-03-19T09:13:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83433020",
      "id" : 83433020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T09:13:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83433020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "> needs a lot of thinking-through\r\n\r\nCan you explain what problem you see with this?",
      "created_at" : "2015-03-19T09:56:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83460274",
      "id" : 83460274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T09:56:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83460274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Nothing specific - just pattern matching.  Sometimes stream cycling makes activities more visible rather than less, e.g. for the reasons that Tor bridges are used.  This is the type of change that can have subtle ramifications not immediately obvious.",
      "created_at" : "2015-03-19T10:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83475940",
      "id" : 83475940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T10:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83475940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "In that case it may be prudent to have it disabled by default, but I would like to have the option for this. Note that Tor already switches the circuit (for new connections) every 10 minutes by default, so this will mostly have an effect on the initial connections which are made in a short timespan. \r\n\r\n@gmaxwell was talking about defaulting this to enabled, maybe he can comment.\r\n",
      "created_at" : "2015-03-19T10:20:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83487882",
      "id" : 83487882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T10:20:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83487882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I previously got an opinion from a tor developer that sounded vaguely like \"you're not doing that already??\"-- without it we potentially lose all our sybil resistant and a single bad-exit can partition us from the network, as we make all our connections at the same time, at startup.\r\n\r\nHopping around the globe can make things more visible if you're a web broswer and you're hoping to not be noticed by the two people left in the world that don't know how to RBL lookup tor exits, but I don't think that applies in our case. We're not futility hoping that the traffic exiting the tor network won't be known to come from Tor.\r\n\r\nAlso, without doing this there are non-trivial odds of having the users web traffic correlated with their node connections.\r\n\r\nWe could do something more mild, like have each of our outbound connection indexes share a identifer with no loss... but I don't currently see a reason to, I'll ask for more of an opinion.",
      "created_at" : "2015-03-19T13:44:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-83586619",
      "id" : 83586619,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-03-19T13:44:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/83586619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> We could do something more mild, like have each of our outbound connection indexes share a identifer with no loss... \r\n\r\nThis would have the effect of reusing the same circuit when reconnecting quickly. I can imagine that would happen when a node boots you immediately, or for some reason you're cycling faster than every 10 minutes - if it takes longer a new circuit would be used automatically by Tor. \r\n\r\nWhen going through a list of questionable nodes, this may reduce the number of circuit building operations. I'm not sure that is an issue, at most a performance one. Potentially it could make it easier to correlate subsequent connections for an exit node.\r\n",
      "created_at" : "2015-04-01T09:29:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-88413096",
      "id" : 88413096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-04-01T09:29:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88413096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj one downside that occurs to me is that an exit can make you ban that peer, then you'd continue using that same exit again and again. So at a minimum a misbehaving disconnect should change the identity for that slot.",
      "created_at" : "2015-04-01T09:50:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-88418780",
      "id" : 88418780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-04-01T09:50:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88418780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Agreed. Bleh, I'd like to avoid that kind of complexity and 'slot management'.\r\n\r\nIn practice I've encountered no performance problems in using a different circuit every time. And even if it introduced some extra latency for new connections, we're not terribly sensitive to that.",
      "created_at" : "2015-04-02T09:27:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-88839158",
      "id" : 88839158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-04-02T09:27:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88839158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'd like to move this forward. Anything that still needs to be done here? \r\n\r\nIf we are in doubt about enabling the randomization by default, I'd like to merge this with the option defaulting to false.",
      "created_at" : "2015-04-13T13:31:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5911#issuecomment-92352173",
      "id" : 92352173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5911",
      "updated_at" : "2015-04-13T13:31:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92352173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
