[
   {
      "body" : "Any possibility to use the timer stuff being added in #5964 ?\r\n",
      "created_at" : "2015-04-09T21:02:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5989#issuecomment-91355456",
      "id" : 91355456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5989",
      "updated_at" : "2015-04-09T21:02:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91355456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik maybe later, porting wont be difficult",
      "created_at" : "2015-04-10T03:38:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5989#issuecomment-91418767",
      "id" : 91418767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5989",
      "updated_at" : "2015-04-10T03:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/91418767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5989#discussion_r28124119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5989"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28124119"
         }
      },
      "body" : "Could that magic number be defined somehwere as constant? IMHO it's used quite often in this pull.",
      "commit_id" : "2abc256a8277722889c8d796ab78fa5fb4a6affb",
      "created_at" : "2015-04-10T06:13:18Z",
      "diff_hunk" : "@@ -4529,31 +4516,24 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n         if (!lockMain)\n             return true;\n \n-        // Address refresh broadcast\n-        static int64_t nLastRebroadcast;\n-        if (!IsInitialBlockDownload() && (GetTime() - nLastRebroadcast > 24 * 60 * 60))\n-        {\n-            LOCK(cs_vNodes);\n-            BOOST_FOREACH(CNode* pnode, vNodes)\n-            {\n-                // Periodically clear setAddrKnown to allow refresh broadcasts\n-                if (nLastRebroadcast)\n-                    pnode->setAddrKnown.clear();\n-\n-                // Rebroadcast our address\n-                AdvertizeLocal(pnode);\n-            }\n-            if (!vNodes.empty())\n-                nLastRebroadcast = GetTime();\n-        }\n-\n         //\n         // Message: addr\n         //\n-        if (fSendTrickle)\n-        {\n+\n+        if (pto->nNextLocalAddrSend < GetTime()) {\n+            AdvertizeLocal(pto);\n+            pto->nNextLocalAddrSend = GetTime() + GetRand(24 * 60 * 60);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5989#discussion_r28124119",
      "id" : 28124119,
      "original_commit_id" : "2abc256a8277722889c8d796ab78fa5fb4a6affb",
      "original_position" : 59,
      "path" : "src/main.cpp",
      "position" : 59,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5989",
      "updated_at" : "2015-04-10T06:13:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28124119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
