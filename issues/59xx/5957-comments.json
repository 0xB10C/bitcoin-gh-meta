[
   {
      "body" : "Nice.. I've wanted something like 'generate'  Passes quick-glance review.  Will test.\r\n",
      "created_at" : "2015-04-01T03:56:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5957#issuecomment-88342337",
      "id" : 88342337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5957",
      "updated_at" : "2015-04-01T03:56:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88342337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Travis failure\r\n```\r\nRunning testscript wallet.py...\r\nInitializing test directory /tmp/testFqH6I5\r\nMining blocks...\r\nJSONRPC error: value is type \r\n  File \"/home/travis/build/bitcoin/bitcoin/bitcoin-i686-pc-linux-gnu/qa/rpc-tests/test_framework.py\", line 117, in main\r\n    self.run_test()\r\n  File \"/home/travis/build/bitcoin/bitcoin/bitcoin-i686-pc-linux-gnu/qa/rpc-tests/wallet.py\", line 43, in run_test\r\n    self.nodes[0].generate(1)\r\n  File \"/home/travis/build/bitcoin/bitcoin/bitcoin-i686-pc-linux-gnu/qa/rpc-tests/python-bitcoinrpc/bitcoinrpc/authproxy.py\", line 126, in __call__\r\n    raise JSONRPCException(response['error'])\r\nCleaning up\r\nFailed\r\n```",
      "created_at" : "2015-04-01T07:32:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5957#issuecomment-88378557",
      "id" : 88378557,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5957",
      "updated_at" : "2015-04-01T07:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88378557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "@fanquake Fixed.",
      "created_at" : "2015-04-01T20:03:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5957#issuecomment-88615107",
      "id" : 88615107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5957",
      "updated_at" : "2015-04-01T20:03:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88615107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5957#discussion_r27958516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5957"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27958516"
         }
      },
      "body" : "We should probably change this at some point too to not update the mapArgs. Throughout the program we assume that mapArgs is read-only after initialization. This kind of r/w access would need proper locking around everything. No change needed for this pull but I'm just reminded of it.\r\n",
      "commit_id" : "e2edf95cd3f43331843676e49a82830128a95050",
      "created_at" : "2015-04-08T10:33:04Z",
      "diff_hunk" : "@@ -154,52 +190,9 @@ Value setgenerate(const Array& params, bool fHelp)\n             fGenerate = false;\n     }\n \n-    // -regtest mode: don't return until nGenProcLimit blocks are generated\n-    if (fGenerate && Params().MineBlocksOnDemand())\n-    {\n-        int nHeightStart = 0;\n-        int nHeightEnd = 0;\n-        int nHeight = 0;\n-        int nGenerate = (nGenProcLimit > 0 ? nGenProcLimit : 1);\n-        CReserveKey reservekey(pwalletMain);\n-\n-        {   // Don't keep cs_main locked\n-            LOCK(cs_main);\n-            nHeightStart = chainActive.Height();\n-            nHeight = nHeightStart;\n-            nHeightEnd = nHeightStart+nGenerate;\n-        }\n-        unsigned int nExtraNonce = 0;\n-        Array blockHashes;\n-        while (nHeight < nHeightEnd)\n-        {\n-            auto_ptr<CBlockTemplate> pblocktemplate(CreateNewBlockWithKey(reservekey));\n-            if (!pblocktemplate.get())\n-                throw JSONRPCError(RPC_INTERNAL_ERROR, \"Wallet keypool empty\");\n-            CBlock *pblock = &pblocktemplate->block;\n-            {\n-                LOCK(cs_main);\n-                IncrementExtraNonce(pblock, chainActive.Tip(), nExtraNonce);\n-            }\n-            while (!CheckProofOfWork(pblock->GetHash(), pblock->nBits, Params().GetConsensus())) {\n-                // Yes, there is a chance every nonce could fail to satisfy the -regtest\n-                // target -- 1 in 2^(2^32). That ain't gonna happen.\n-                ++pblock->nNonce;\n-            }\n-            CValidationState state;\n-            if (!ProcessNewBlock(state, NULL, pblock))\n-                throw JSONRPCError(RPC_INTERNAL_ERROR, \"ProcessNewBlock, block not accepted\");\n-            ++nHeight;\n-            blockHashes.push_back(pblock->GetHash().GetHex());\n-        }\n-        return blockHashes;\n-    }\n-    else // Not -regtest: start generate thread, return immediately\n-    {\n-        mapArgs[\"-gen\"] = (fGenerate ? \"1\" : \"0\");\n-        mapArgs [\"-genproclimit\"] = itostr(nGenProcLimit);\n-        GenerateBitcoins(fGenerate, pwalletMain, nGenProcLimit);\n-    }\n+    mapArgs[\"-gen\"] = (fGenerate ? \"1\" : \"0\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5957#discussion_r27958516",
      "id" : 27958516,
      "original_commit_id" : "e2edf95cd3f43331843676e49a82830128a95050",
      "original_position" : 106,
      "path" : "src/rpcmining.cpp",
      "position" : 106,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5957",
      "updated_at" : "2015-04-08T10:33:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/27958516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This is obviously the right way to go, utACK",
      "created_at" : "2015-04-08T10:34:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5957#issuecomment-90875097",
      "id" : 90875097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5957",
      "updated_at" : "2015-04-08T10:34:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/90875097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
