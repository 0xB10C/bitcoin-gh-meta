[
   {
      "body" : "lightly tested ACK\r\n\r\nThanks for doing this.  I coded this a while ago, then set it aside.  Your version, with registration, is cleaner.\r\n",
      "created_at" : "2015-04-12T15:31:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92081400",
      "id" : 92081400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-12T15:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92081400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r28207102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28207102"
         }
      },
      "body" : "Nit: This seems to have sneaked in?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-12T20:36:14Z",
      "diff_hunk" : "@@ -1208,7 +1208,7 @@ CAmount CWalletTx::GetCredit(const isminefilter& filter) const\n }\n \n CAmount CWalletTx::GetImmatureCredit(bool fUseCache) const\n-{\n+{    ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r28207102",
      "id" : 28207102,
      "original_commit_id" : "b0c18bf9b0e4a7ea6c83a4202b22f01d743ce69d",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28207102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "fixed @Diapolo's nits.",
      "created_at" : "2015-04-13T13:06:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92344590",
      "id" : 92344590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-13T13:06:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92344590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Concept ack. \r\nGiven that you're touching their interfaces already, could CreateNewBlockWithScript() ProcessBlockFound(), BitcoinMiner() and GenerateBitcoins() take ```const CChainParams& chainparams``` as parameter?",
      "created_at" : "2015-04-14T11:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92775415",
      "id" : 92775415,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T11:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92775415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Added a commit on top to help improve global state independence by passing `CChainParams` for the touched functions.",
      "created_at" : "2015-04-14T12:16:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92788143",
      "id" : 92788143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T12:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92788143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ut ACK, it is very nice to decouple miner.o from the wallet.",
      "created_at" : "2015-04-14T13:19:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-92824909",
      "id" : 92824909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-14T13:19:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/92824909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needs rebase",
      "created_at" : "2015-04-16T01:09:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93610000",
      "id" : 93610000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T01:09:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93610000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased and squashed [squashme] commit.",
      "created_at" : "2015-04-16T07:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93666918",
      "id" : 93666918,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T07:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93666918",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I would also squash the second commit, leaving the note in the commit descrption. Specially, you never want to create CreateNewBlockWithScript.\r\nIn any case, minor nit, re-utAck.",
      "created_at" : "2015-04-16T08:50:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93681185",
      "id" : 93681185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T08:50:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93681185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Agreed. Squashed.",
      "created_at" : "2015-04-16T08:52:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-93681737",
      "id" : 93681737,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-16T08:52:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/93681737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29036731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29036731"
         }
      },
      "body" : "I would say this needs to be able to fail (if no wallet is connected), and have the miner code deal with that case. Otherwise you can't really make it independent of the wallet (if it needs to assume a wallet that can provide a script output for mining is present).",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T09:46:44Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29036731",
      "id" : 29036731,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29036731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037153"
         }
      },
      "body" : "I'd rather pass a pointer to chainParams in, and pass that by value to BitcoinMiners. That makes it more obvious to the caller that the argument may be used for a longer time.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T09:53:27Z",
      "diff_hunk" : "@@ -558,7 +541,7 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n \n     minerThreads = new boost::thread_group();\n     for (int i = 0; i < nThreads; i++)\n-        minerThreads->create_thread(boost::bind(&BitcoinMiner, pwallet));\n+        minerThreads->create_thread(boost::bind(&BitcoinMiner, boost::cref(chainparams)));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037153",
      "id" : 29037153,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 99,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037319"
         }
      },
      "body" : "Ugh, this means you'll never get a key back, even if no block is found. Would it be possible for the wallet to keep track of which keys are currently being used in a map, and when a block is found, look up the key in the map and mark it as kept?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T09:56:16Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037319",
      "id" : 29037319,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037367"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037367"
         }
      },
      "body" : "I think it can fail. If no listening module provides a CScript through signal `ScriptForMining` the miner will continue with a empty script which should result in a unspendable coinbase? But i didn't tested that. Will do.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T09:57:24Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037367",
      "id" : 29037367,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037367",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037556"
         }
      },
      "body" : "I would *not* want to create a block with an unspendable coinbase.\r\n\r\nI mean the call should return a boolean, or the resulting script should at least be tested for non-emptiness, and the miner should exit if that is the case.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T10:01:06Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29037556",
      "id" : 29037556,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29037556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29041591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29041591"
         }
      },
      "body" : "Wouldn't it be nice if you could use generate() in a non-wallet environment? Regarding RPC test in a post-wallet-split-off world: this could make sense.\r\n\r\nIf somone uses the internal miner (which has no productive usage IMO) in a wallet-disable mode he probably uses it for testing only.\r\n\r\nI agree with adding a warning to the log. But throwing an error would block testing.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T11:33:17Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29041591",
      "id" : 29041591,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29041591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29044518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29044518"
         }
      },
      "body" : "I think the right solution for that is having a trivial not-really-a-wallet\nprovider that explicitly allows you to set the script output to mine to. It\njust looks incorrect to have a provider interface for something, and a\ndefault implementation that results in the least expected result.\n",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T12:35:04Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29044518",
      "id" : 29044518,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29044518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045002"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045002"
         }
      },
      "body" : "Agreed. Maybe it would be most efficient by adding a argument to `generate()` and `setgenerate()` RPC calls where one could provide a output script to mine to?\r\n\r\nAdding a validation interface implementation for non-wallet-mining could be over the top.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T12:44:16Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045002",
      "id" : 29045002,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045501"
         }
      },
      "body" : "Yes, generate can just be changed to not need the GetScriptForMining\ninterface. And setgenerate could just be deleted IMHO and replaced with a\nsimple proof of concept Python or C miner in the tree.\n",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T12:54:00Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045501",
      "id" : 29045501,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045546"
         }
      },
      "body" : "I just don't like an interface that can clearly fail, but doesn't have a\nclear way to indicate failure.\n",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T12:54:41Z",
      "diff_hunk" : "@@ -35,6 +36,8 @@ class CValidationInterface {\n     virtual void Inventory(const uint256 &hash) {};\n     virtual void ResendWalletTransactions(int64_t nBestBlockTime) {};\n     virtual void BlockChecked(const CBlock&, const CValidationState&) {};\n+    virtual void GetScriptForMining(CScript &script) {};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045546",
      "id" : 29045546,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 12,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045603"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045603"
         }
      },
      "body" : "IIRC there was a discussion about this on IRC.\r\nBut right, i also have a bad feeling with this. Every mining thread reserves and keeps a key straight off.\r\n\r\nI think i'm going invest there some time and build a proper way of only keeping keys which where used when a block was created.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-04-24T12:55:33Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29045603",
      "id" : 29045603,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29045603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Updated.\r\nDecoupled wallet (over signaling) from miner and rpcmining commands.\r\nIt still uses signaling to allow different wallet/pubscript-generation implementations, though, mining without pubScript providing listener will generate a error and stops mining.\r\n\r\nNow it reserves and keeps a key when calling `setgenerate` or generating over cmd arg `gen` (same key for all generated blocks).",
      "created_at" : "2015-04-29T12:24:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97408182",
      "id" : 97408182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-29T12:24:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97408182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Travis is failing for the build without wallet: https://travis-ci.org/bitcoin/bitcoin/jobs/60528797#L1557",
      "created_at" : "2015-04-30T11:17:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97743001",
      "id" : 97743001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T11:17:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97743001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon: Thanks for the report. Fixed.",
      "created_at" : "2015-04-30T11:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97747636",
      "id" : 97747636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T11:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97747636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Now the miner is completely decoupled from the wallet.\r\nThere are no more `#ifdef ENABLE_WALLET` checks (for mining).\r\nThe only check is during runtime if there was a listening device who could provide a `CScript` over the signal `ScriptForMining()`.\r\n\r\nIf one tries to use `-gen` without a wallet compiled in or enabled, it then will throw an exception during init phase. Current master would just ignore the cmd arg `-gen` if no wallet is present.\r\n\r\nThe RPC commands `setgenerate`, `generate`, `getgenerate` works in wallet-disabled mode but also throw a exception `error: {\"code\":-32601,\"message\":\"Use the generate method instead of setgenerate on this network\"}`",
      "created_at" : "2015-04-30T12:23:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-97753055",
      "id" : 97753055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-04-30T12:23:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97753055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29929177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29929177"
         }
      },
      "body" : "I think we can leave this as it is now. The only two points where this directly reserves and keeps a key is when starting the internal miner (over `-gen` or `setgenerate`, same script/key for all threads) or when calling generate.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-05-08T10:05:01Z",
      "diff_hunk" : "@@ -2480,6 +2480,17 @@ void CWallet::UpdatedTransaction(const uint256 &hashTx)\n     }\n }\n \n+void CWallet::GetScriptForMining(CScript &script)\n+{\n+    CReserveKey reservekey(this);\n+    reservekey.KeepKey();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r29929177",
      "id" : 29929177,
      "original_commit_id" : "f4dfba8952f450b780c9324bb4e6745dee40591b",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29929177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Rebased.\r\nSeeks testers to escape the rebase hamster wheel.",
      "created_at" : "2015-05-19T11:30:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103450963",
      "id" : 103450963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T11:30:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103450963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r30593445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593445"
         }
      },
      "body" : "Nit: Missing a space after ``//``\r\nEdit: Same nit in rpcmining.cpp.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-05-19T12:26:29Z",
      "diff_hunk" : "@@ -571,9 +549,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);\n+\n+    //throw an error if no script was provided",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r30593445",
      "id" : 30593445,
      "original_commit_id" : "6a30073b4c0f342c320be7544f63109317094e20",
      "original_position" : 106,
      "path" : "src/miner.cpp",
      "position" : 106,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-01T13:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Can you extend or explain in some more details, how this pull achieves, what it sais in the commit-msg title? Perhaps in the commit-msg itself.",
      "created_at" : "2015-05-19T12:30:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103469233",
      "id" : 103469233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T12:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103469233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo: this PR is a step forward in separating the wallet from the core which can lead to multiple benefits. This would be required to allow a flexible interface (basic modularity) for adding/switching bitcoin-core wallets.",
      "created_at" : "2015-05-19T13:16:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#issuecomment-103483044",
      "id" : 103483044,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5994",
      "updated_at" : "2015-05-19T13:16:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103483044",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31489235"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31489235"
         }
      },
      "body" : "Are signals guaranteed to be synchronous?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-02T02:33:48Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31489235",
      "id" : 31489235,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-02T02:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31489235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31491833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31491833"
         }
      },
      "body" : "Yes. Boost signals2 are always synchronous and in strict order (first register first call).",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-02T04:09:11Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31491833",
      "id" : 31491833,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-02T04:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31491833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31493447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31493447"
         }
      },
      "body" : "Is this guaranteed/by design, or merely an implementation coincidence?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-02T05:19:42Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31493447",
      "id" : 31493447,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-02T05:19:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31493447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31556202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31556202"
         }
      },
      "body" : "IIRC boost signals2 are by design synchronous. Check http://www.boost.org/doc/libs/1_58_0/doc/html/signals2/thread-safety.html",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-02T18:41:38Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31556202",
      "id" : 31556202,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-02T18:41:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31556202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31567780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31567780"
         }
      },
      "body" : "Nothing on that page suggests they are synchronous...?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-02T20:33:56Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31567780",
      "id" : 31567780,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-02T20:33:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31567780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31607349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31607349"
         }
      },
      "body" : "Maybe my backtrace prove (see below) can convince you.\r\nI can also post a linux gdb backtrace or you could add a `sleep(10) in `void CWallet::GetScriptForMining(CScript &script)`.\r\n\r\n![bildschirmfoto 2015-06-03 um 11 34 37](https://cloud.githubusercontent.com/assets/178464/7957020/a55ba08e-09e4-11e5-9170-b41acdc98e71.png)",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-03T09:37:21Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31607349",
      "id" : 31607349,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-03T09:37:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31607349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31654186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31654186"
         }
      },
      "body" : "That's with a current version of Boost. Nothing I can see prevents Boost 1.90 from making it all asynchronous.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-03T18:28:54Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31654186",
      "id" : 31654186,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-03T18:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31654186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31664926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31664926"
         }
      },
      "body" : "What would asynchronous even mean in this context? You can specify how signal's return values are combined. There is no way to make the execution asynchronous without breaking the API (which returns the combined return value directly).",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-03T20:15:46Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31664926",
      "id" : 31664926,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-03T20:15:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31664926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31667154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31667154"
         }
      },
      "body" : "@sipa That's n/a for void return values. Maybe the solution here is to return the CScript then?",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-03T20:38:32Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31667154",
      "id" : 31667154,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-03T20:38:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31667154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31668320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31668320"
         }
      },
      "body" : "I think we can very reasonably assume that boost::signals2 will not fundamentally change their design and API in a way that will only remain compatible for void outputs.",
      "commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "created_at" : "2015-06-03T20:50:39Z",
      "diff_hunk" : "@@ -573,9 +551,14 @@ void GenerateBitcoins(bool fGenerate, CWallet* pwallet, int nThreads)\n     if (nThreads == 0 || !fGenerate)\n         return;\n \n+    CScript coinbaseScript;\n+    GetMainSignals().ScriptForMining(coinbaseScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5994#discussion_r31668320",
      "id" : 31668320,
      "original_commit_id" : "41f62d1b2392bcbde854b81b48b3add5feecbb8b",
      "original_position" : 104,
      "path" : "src/miner.cpp",
      "position" : 104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5994",
      "updated_at" : "2015-06-03T20:50:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/31668320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
