[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3476#discussion_r8582165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3476"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8582165"
         }
      },
      "body" : "Indentation looks a bit strange here. Are you mixing tabs and spaces? Please use four spaces for indentation.",
      "commit_id" : "0729a596da7caeda1a0243d3739513d193f5f590",
      "created_at" : "2013-12-30T08:20:52Z",
      "diff_hunk" : "@@ -533,10 +533,50 @@ static void InterpretNegativeSetting(string name, map<string, string>& mapSettin\n     }\n }\n \n-void ParseParameters(int argc, const char* const argv[])\n+void ClearArgs()\n {\n     mapArgs.clear();\n     mapMultiArgs.clear();\n+}\n+\n+// Can combine these into one with C++0x\n+static const string envNames[] = {\n+    \"-datadir\",\n+    \"-conf\"\n+};\n+static const set<string> envWhitelist(envNames, envNames+sizeof(envNames)/sizeof(envNames[0]));\n+\n+void ParseEnvironment()\n+{\n+    int i = 0;\n+    while (environ[i] != NULL && strlen(environ[i]) > 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#discussion_r8582165",
      "id" : 8582165,
      "original_commit_id" : "ba935ec9541c00bb0236932e2fb2089ee5e76219",
      "original_position" : 21,
      "path" : "src/util.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3476",
      "updated_at" : "2013-12-30T16:53:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8582165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3476#discussion_r8582180"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3476"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8582180"
         }
      },
      "body" : "This ClearArgs() shouldn't be needed as the args start out empty\r\n(same for bitcoind and bitcoin-qt)\r\n",
      "commit_id" : "0729a596da7caeda1a0243d3739513d193f5f590",
      "created_at" : "2013-12-30T08:23:22Z",
      "diff_hunk" : "@@ -20,6 +20,8 @@ static bool AppInitRPC(int argc, char* argv[])\n     //\n     // Parameters\n     //\n+    ClearArgs();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#discussion_r8582180",
      "id" : 8582180,
      "original_commit_id" : "ba935ec9541c00bb0236932e2fb2089ee5e76219",
      "original_position" : 4,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3476",
      "updated_at" : "2013-12-30T16:53:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8582180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm using emacs C++ mode, which defaults to two spaces, then trying to make things match up with what is already there.  It didn't work out so well.\r\n\r\nRegarding the ClearArgs, I'm just replicating what was already there at the start of ParseParameters().  It's true they start out empty, but in the test code it calls ParseParameters multiple times and assumes that the args get cleared in between.\r\n\r\nI'm happy to make whatever changes you feel are necessary, of course.",
      "created_at" : "2013-12-30T08:35:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31337215",
      "id" : 31337215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-30T08:38:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31337215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "Also, there is a backport to 0.8.6 on my branch envconfig-0.8.6.",
      "created_at" : "2013-12-30T08:37:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31337246",
      "id" : 31337246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-30T08:37:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31337246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "All of Iaanwj's comments should be addressed now.",
      "created_at" : "2013-12-30T16:55:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31355289",
      "id" : 31355289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-30T16:55:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31355289",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/0729a596da7caeda1a0243d3739513d193f5f590 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-12-30T17:27:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31356937",
      "id" : 31356937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-30T17:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31356937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "It seems that do not have the strong requirement for this extended feature, since we already have configure file(bitcoin.conf) to do it. Also it make the bitcoin to tangle the OSs environments. Different OS may have some quirks.",
      "created_at" : "2013-12-31T03:27:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31382338",
      "id" : 31382338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-31T03:27:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31382338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/803210?v=3",
         "events_url" : "https://api.github.com/users/emmix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emmix/followers",
         "following_url" : "https://api.github.com/users/emmix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emmix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emmix",
         "id" : 803210,
         "login" : "emmix",
         "organizations_url" : "https://api.github.com/users/emmix/orgs",
         "received_events_url" : "https://api.github.com/users/emmix/received_events",
         "repos_url" : "https://api.github.com/users/emmix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emmix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emmix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emmix"
      }
   },
   {
      "body" : "This serves several needs that I personally have, to run bitcoind with different conf files and not have to always specify them with -conf=foo on the command line.  Instead I set the BITCOIN_CONF=foo environment variable and I can type bitcoind (or bitcoin-cli) repeatedly and it will use that value.  Being able to specify alternate datadir locations works the same way.\r\n\r\nIt also allows running common scripts whose parameters can be changed via the environment they are passed, instead of having to point at different conf files.\r\n\r\nIn any case, I'll keep using this locally, and the pull request is offered up to the devs to integrate or not as they see fit.",
      "created_at" : "2013-12-31T03:44:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31382670",
      "id" : 31382670,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-31T03:44:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31382670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1492956?v=3",
         "events_url" : "https://api.github.com/users/jmcorgan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jmcorgan/followers",
         "following_url" : "https://api.github.com/users/jmcorgan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jmcorgan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jmcorgan",
         "id" : 1492956,
         "login" : "jmcorgan",
         "organizations_url" : "https://api.github.com/users/jmcorgan/orgs",
         "received_events_url" : "https://api.github.com/users/jmcorgan/received_events",
         "repos_url" : "https://api.github.com/users/jmcorgan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jmcorgan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jmcorgan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jmcorgan"
      }
   },
   {
      "body" : "@emmix How does this \"tangle\" the OS environment? It reads it only, uses clearly identifiable variable names that you'd never use by accident, and currently only allows two settings (`-datadir` and `-conf`) to be set through the environment.\r\n\r\nI can see how this can be useful. Though, to be fair, you can accomplish the same with something like:\r\n\r\n    alias bitcoin-cli='bitcoin-cli -datadir=${BITCOIN_DATADIR}'\r\n\r\n(sure, an alias won't nest into scripts, but the scripts could pass the environment variable to `bitcoin-cli`)",
      "created_at" : "2013-12-31T08:11:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31387265",
      "id" : 31387265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2013-12-31T08:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31387265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "'Tangle\" which I mean  couple with the OS environment. Sorry for my unclarity.\r\nMy concerns are:\r\n[1] Windows, Mac, Linux, etc have the same style to deal with environment? Do we need to consider the OS's quirks? I do not look into it.\r\n[2] The change bring the convenience as the global variables in programming language. Sure, it is useful if we have clearly identifiable names. But the convenience can obtain only by scripts without need to introduce the environment variables into source code.\r\n\r\nAnyway the change takes convenience actually. But type the whole commands and options let you know what you are dong clearly.",
      "created_at" : "2014-01-01T03:51:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-31418225",
      "id" : 31418225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2014-01-01T03:51:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31418225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/803210?v=3",
         "events_url" : "https://api.github.com/users/emmix/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emmix/followers",
         "following_url" : "https://api.github.com/users/emmix/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emmix/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emmix",
         "id" : 803210,
         "login" : "emmix",
         "organizations_url" : "https://api.github.com/users/emmix/orgs",
         "received_events_url" : "https://api.github.com/users/emmix/received_events",
         "repos_url" : "https://api.github.com/users/emmix/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emmix/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emmix/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emmix"
      }
   },
   {
      "body" : "This adds more testing work. Especially in the case of the GUI, there are already many sources of configuration options that interact in non-trivial ways and this has resulted in bugs in the past.\r\n\r\nAnd as said this can be easily handled from outside the code; either by defining an alias or function for bitcoin-cli with arguments, or by using a script.\r\n\r\nIn general we don't add extra code to the core for what can be handled easily from outside.\r\nSo - I'm closing this.\r\n",
      "created_at" : "2014-04-01T13:19:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3476#issuecomment-39203767",
      "id" : 39203767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3476",
      "updated_at" : "2014-04-01T13:19:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39203767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
