[
   {
      "body" : "I've not seen this on Windows recently.",
      "created_at" : "2014-01-08T06:59:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31809808",
      "id" : 31809808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T06:59:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31809808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "https://litecointalk.org/index.php?topic=12526.0\r\nIt is unclear if it is related to what @laanwj is experiencing, but we found a network related issue with boost-1.54 on win32 builds.  Litecoin's 0.8.6.1 gitian win32 was upgraded from boost-1.50 to boost-1.54 to match Bitcoin master.  Some (but not all) Windows users have an issue where networking just stops randomly after a few hours.  getpeerinfo thinks it still has peers but netstat shows they are long gone.  GUI still operates, networking just stops and debug.log shows things like this:\r\n\r\n```\r\n2013-12-28 12:40:46 socket send error 10054\r\n2013-12-28 12:40:46 disconnecting node 125.86.21.116:1985\r\n```\r\n\r\nDowngrading back to boost-1.50 seems to fix the issue.  I am attempting to narrow it down more.\r\n\r\nI think merely upgrading Bitcoin 0.8.6 gitian win32 to boost-1.54 will have the same problem.  It is entirely likely bitcoin master gitian win32 is similarly affected.",
      "created_at" : "2014-01-08T09:46:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31817423",
      "id" : 31817423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T10:05:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31817423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "Today I've been completely unable to reproduce this issue.\r\nThat may have to do with my attempt at adding debug information; Heisenbug? will try a clean build and see if it brings back the issue.\r\n\r\nEdit: yep, without debug information it's back! :-(\r\n\r\nSomething all the crashing sessions have in common:\r\n\r\n    2014-01-08 12:48:30 Added time data, samples 4, offset -281217278672897 (-4686954644548 minutes)\r\n    2014-01-08 13:16:15 Added time data, samples 3, offset -281217278672795 (-4686954644546 minutes)\r\n    2014-01-08 13:48:31 Added time data, samples 2, offset -281217278672897 (-4686954644548 minutes)\r\n    2014-01-08 13:51:32 Added time data, samples 2, offset -281217278672896 (-4686954644548 minutes)\r\n\r\nEither all the peers return crazy values, or GetTime returns an invalid value (this is subtracted). My bet is on the second.\r\n\r\nYep, GetTime returns junk (it thinks it's in the far far future), peer is well-behaved:\r\n\r\n    2014-01-08 14:55:19 GetTime is 281218667865815, nTime is 1389192919\r\n",
      "created_at" : "2014-01-08T12:38:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31827681",
      "id" : 31827681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T14:56:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31827681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ok this is weird.\r\ntime(NULL) returns (random?) data in the upper part of the uint64_t. If I add an explicit &0xffffffff in GetTime, it works.\r\n\r\n",
      "created_at" : "2014-01-08T15:39:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31845096",
      "id" : 31845096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T15:39:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31845096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Maybe time_t on windows natively returns a 32-bit integer, but it's declared as returning a 64-bit one?",
      "created_at" : "2014-01-08T15:47:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31845969",
      "id" : 31845969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T15:47:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31845969",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "That could be the case.\r\nThe curious thing is that the upper word is always the same, so it is not random stack corruption being returned:\r\n\r\n    0000ffc4 52cd7958\r\n\r\nsizeof(time_t) is 8 bytes on mingw.\r\nSo it may indeed be a misdefinition somewhere (but not in bitcoin -- it also happens with a minimal test).\r\n",
      "created_at" : "2014-01-08T16:18:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31849134",
      "id" : 31849134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T16:18:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31849134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I've narrowed down the problem to:\r\n\r\n    -D_FILE_OFFSET_BITS=64\r\n\r\nThis option changes the size of time_t from 4 to 8, and adds the random gunk on time(NULL).\r\n\r\nNote: This may be a wine bug. I haven't tested anything on an actual windows box.\r\n\r\nAnother thing that's worth looking at may be why a (huge) time discrepancy causes a segmentation fault in the network code.\r\n",
      "created_at" : "2014-01-08T16:23:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31849728",
      "id" : 31849728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T16:23:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31849728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ok, this is confirmed a wine bug.\r\n\r\nwine 1.4 (Ubuntu 12.04):\r\n\r\n    281218667872263\r\n    ffc452cd8007\r\n    size=8\r\n\r\nwine 1.4.1 (Ubuntu 13.10):\r\n\r\n    1389199241\r\n    52cd7f89\r\n    size=8\r\n\r\nEdit: also checked that the crash doesn't happen when making GetTime() return outrageous times in general. That, too, is a wine issue probably with time_t size conflict.\r\n\r\n",
      "created_at" : "2014-01-08T16:44:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31852013",
      "id" : 31852013,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T16:59:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31852013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This looks to be http://sourceforge.net/p/mingw-w64/bugs/279/ . It's a toolchain issue that will manifest when building with D_FILE_OFFSET_BITS=64 (which is correct). This value should not affect time_t, but in the buggy versions it did.\r\n\r\nsizeof(time_t) should be 4 for win32. If it's 8, the headers are buggy and runtime will be unpredictable. At runtime, a 4byte value is stored in an 8byte var, leaving half uninit'd. Using a recent mingw it's 4 as expected. I'm assuming gitian's version still has this bug.\r\n\r\n\r\n\r\n\r\nThis should be reopened. It's a build-time issue that may manifest at runtime.",
      "created_at" : "2014-01-08T22:25:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31882901",
      "id" : 31882901,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-08T22:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31882901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "@theuni In that case we should define  `_USE_32BIT_TIME_T` if mingw. This overrides the file offset bits...\r\n",
      "created_at" : "2014-01-09T08:08:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31910211",
      "id" : 31910211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-09T08:09:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31910211",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "See #3497 \r\n\r\nFYI the output with `-D_FILE_OFFSET_BITS=64 -D_USE_32BIT_TIME_T` (correct):\r\n\r\n    1389256547\r\n    52ce5f63\r\n    size=4\r\n",
      "created_at" : "2014-01-09T08:29:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31911424",
      "id" : 31911424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-09T08:36:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31911424",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Discussion continues in #3497",
      "created_at" : "2014-01-09T08:58:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3494#issuecomment-31912855",
      "id" : 31912855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3494",
      "updated_at" : "2014-01-09T08:58:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31912855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
