[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Wouldn't a `std::optional` approach make more sense here? And I think it'd be appropriate to update all Lookup functions at once, instead of just `LookupInternal`?",
      "created_at" : "2022-10-06T10:23:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1269760833",
      "id" : 1269760833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585LrwNB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1269760833/reactions"
      },
      "updated_at" : "2022-10-06T10:23:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1269760833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@stickies-v \r\n\r\n> Wouldn't a std::optional approach make more sense here?\r\n\r\nGiven my experience in #26078, I'm not sure about using `std::optional` here. At some point, I'd have to check if it `has_value`, if so, I'd have to check the content of the vector anyway. Not sure about the benefits and code quality here.\r\n\r\n> And I think it'd be appropriate to update all Lookup functions at once, instead of just LookupInternal?\r\n\r\nI agree, I'd planned to do it in a follow-up (tried to keep this PR simple/easy to review) but could do it here, no problem.",
      "created_at" : "2022-10-06T16:15:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1270350149",
      "id" : 1270350149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585LuAFF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1270350149/reactions"
      },
      "updated_at" : "2022-10-06T16:15:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1270350149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r989942805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/989942805"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We don't really use this naming style anymore for new code, perhaps just `addresses`?\r\n\r\n```suggestion\r\n    std::vector<CNetAddr> addresses;\r\n```",
      "commit_id" : "312415f070af43c933a9edc074756012371ba4c7",
      "created_at" : "2022-10-07T10:31:57Z",
      "diff_hunk" : "@@ -132,12 +132,12 @@ std::vector<std::string> GetNetworkNames(bool append_unroutable)\n     return names;\n }\n \n-static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+static std::vector<CNetAddr> LookupIntern(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    vIP.clear();\n+    std::vector<CNetAddr> vIP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r989942805",
      "id" : 989942805,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII5847AVQV",
      "original_commit_id" : "312415f070af43c933a9edc074756012371ba4c7",
      "original_line" : 137,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 8,
      "pull_request_review_id" : 1134266775,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/989942805/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-07T10:32:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/989942805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : " > I think the main benefit of doing them all together is to ensure they all adhere to the same consistent interface. From a review point of view, that's most efficient too, and it shouldn't be a huge change anyway.\r\n\r\nYou're right, I am gonna turn this PR to draft to work on it.\r\n\r\n",
      "created_at" : "2022-10-07T12:57:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1271557357",
      "id" : 1271557357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585Lymzt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1271557357/reactions"
      },
      "updated_at" : "2022-10-07T12:57:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1271557357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r990124774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/990124774"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Cool, gonna adopt it",
      "commit_id" : "312415f070af43c933a9edc074756012371ba4c7",
      "created_at" : "2022-10-07T14:00:44Z",
      "diff_hunk" : "@@ -132,12 +132,12 @@ std::vector<std::string> GetNetworkNames(bool append_unroutable)\n     return names;\n }\n \n-static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+static std::vector<CNetAddr> LookupIntern(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    vIP.clear();\n+    std::vector<CNetAddr> vIP;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r990124774",
      "id" : 990124774,
      "in_reply_to_id" : 989942805,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII5847BBrm",
      "original_commit_id" : "312415f070af43c933a9edc074756012371ba4c7",
      "original_line" : 137,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 8,
      "pull_request_review_id" : 1134540208,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/990124774/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-07T14:00:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/990124774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/26261#pullrequestreview-1265520047) |\n| Approach ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/26261#pullrequestreview-1147279908) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26847](https://github.com/bitcoin/bitcoin/pull/26847) (p2p: track AddrMan totals by network and table, improve precision of adding fixed seeds by mzumsande)\n* [#26177](https://github.com/bitcoin/bitcoin/pull/26177) (refactor / kernel: Move non-gArgs chainparams functionality to kernel by TheCharlatan)\n* [#26114](https://github.com/bitcoin/bitcoin/pull/26114) (net: Make AddrFetch connections to fixed seeds by mzumsande)\n* [#26078](https://github.com/bitcoin/bitcoin/pull/26078) (p2p: return `CSubNet` in `LookupSubNet` by brunoerg)\n* [#25619](https://github.com/bitcoin/bitcoin/pull/25619) (net: avoid overriding non-virtual ToString() in CService and use better naming by vasild)\n* [#25136](https://github.com/bitcoin/bitcoin/pull/25136) (Torcontrol opt check by amadeuszpawlik)\n* [#24545](https://github.com/bitcoin/bitcoin/pull/24545) (BIP324: Enable v2 P2P encrypted transport by dhruv)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-10-11T00:09:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1273929814",
      "id" : 1273929814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585L7qBW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273929814/reactions"
      },
      "updated_at" : "2023-01-23T12:40:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273929814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251060"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Developer notes state: \"If an if only has a single-statement then-clause, it can appear on the same line as the if, without braces. In every other case, braces are required, and the then and else clauses must appear correctly indented on a new line.\"\r\n\r\nHere, and in a few other instances too\r\n\r\n```suggestion\r\n    if(addresses.empty()) return std::nullopt;\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T10:26:22Z",
      "diff_hunk" : "@@ -164,67 +164,64 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return vIP;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if(addresses.empty())\n+        return std::nullopt;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251060",
      "id" : 999251060,
      "line" : 190,
      "node_id" : "PRRC_kwDOABII5847j1x0",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 190,
      "original_position" : 67,
      "original_start_line" : 189,
      "path" : "src/netbase.cpp",
      "position" : 67,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251060/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 189,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251399"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: consistent naming (you could do all the renaming in a first, new commit to minimize the renaming diff in subsequent commits)\r\n```suggestion\r\n            const std::vector<CNetAddr> addresses{LookupHost(host, nMaxIPs, true)};\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T10:26:44Z",
      "diff_hunk" : "@@ -1479,7 +1478,8 @@ void CConnman::ThreadDNSAddressSeed()\n                 continue;\n             }\n             unsigned int nMaxIPs = 256; // Limits number of IPs learned from a DNS seed\n-            if (LookupHost(host, vIPs, nMaxIPs, true)) {\n+            const std::vector<CNetAddr> vIPs{LookupHost(host, nMaxIPs, true)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251399",
      "id" : 999251399,
      "line" : 1481,
      "node_id" : "PRRC_kwDOABII5847j13H",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 1481,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 43,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251399/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251723"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: consistent naming\r\n```suggestion\r\n    const std::vector<CNetAddr> addresses{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T10:27:05Z",
      "diff_hunk" : "@@ -164,67 +164,64 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return vIP;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if(addresses.empty())\n+        return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> addresses;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> IPs{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999251723",
      "id" : 999251723,
      "line" : 204,
      "node_id" : "PRRC_kwDOABII5847j18L",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 204,
      "original_position" : 91,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 91,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251723/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999251723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999255655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999255655"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit (and in a few other places)\r\n```suggestion\r\n            const auto vIPs{LookupHost(host, nMaxIPs, true)};\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T10:31:12Z",
      "diff_hunk" : "@@ -1479,7 +1478,8 @@ void CConnman::ThreadDNSAddressSeed()\n                 continue;\n             }\n             unsigned int nMaxIPs = 256; // Limits number of IPs learned from a DNS seed\n-            if (LookupHost(host, vIPs, nMaxIPs, true)) {\n+            const std::vector<CNetAddr> vIPs{LookupHost(host, nMaxIPs, true)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999255655",
      "id" : 999255655,
      "line" : 1481,
      "node_id" : "PRRC_kwDOABII5847j25n",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 1481,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 43,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999255655/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999255655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999333490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999333490"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * @returns The resulting network addresses to which the specified host\r\n *          string resolved.\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T11:49:18Z",
      "diff_hunk" : "@@ -105,24 +105,25 @@ extern DNSLookupFn g_dns_lookup;\n  * @param name    The string representing a host. Could be a name or a numerical\n  *                IP address (IPv6 addresses in their bracketed form are\n  *                allowed).\n- * @param[out] vIP The resulting network addresses to which the specified host\n- *                 string resolved.\n  *\n- * @returns Whether or not the specified host string successfully resolved to\n- *          any resulting network addresses.\n+ * @returns The resulting network addresses to which the specified host\n+ *          string resolved.\n  *\n- * @see Lookup(const std::string&, std::vector<CService>&, uint16_t, bool, unsigned int, DNSLookupFn)\n+ * @see Lookup(const std::string&, uint16_t, bool, unsigned int, DNSLookupFn)\n  *      for additional parameter descriptions.\n  */\n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function = g_dns_lookup);\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function = g_dns_lookup);\n \n /**\n  * Resolve a host string to its first corresponding network address.\n  *\n- * @see LookupHost(const std::string&, std::vector<CNetAddr>&, uint16_t, bool, DNSLookupFn)\n+ * @returns Whether or not the specified host string successfully resolved to\n+ *          any resulting network addresses.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999333490",
      "id" : 999333490,
      "line" : 121,
      "node_id" : "PRRC_kwDOABII5847kJ5y",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 121,
      "original_position" : 24,
      "original_start_line" : 120,
      "path" : "src/netbase.h",
      "position" : 24,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999333490/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 120,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999333490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999344459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999344459"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "unused\r\n```suggestion\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T11:59:05Z",
      "diff_hunk" : "@@ -164,67 +164,64 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return vIP;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if(addresses.empty())\n+        return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> addresses;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> IPs{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\n+    if (IPs.empty())\n+        return addresses;\n+    std::vector<CService> vAddr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999344459",
      "id" : 999344459,
      "line" : 207,
      "node_id" : "PRRC_kwDOABII5847kMlL",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 207,
      "original_position" : 94,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 94,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999344459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999344459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999345312"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999345312"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    std::vector<CService> services;\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T11:59:58Z",
      "diff_hunk" : "@@ -164,67 +164,64 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return vIP;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if(addresses.empty())\n+        return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> addresses;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999345312",
      "id" : 999345312,
      "line" : 196,
      "node_id" : "PRRC_kwDOABII5847kMyg",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 196,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 74,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999345312/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999345312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999422199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999422199"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This can be simplified:\r\n\r\n<details>\r\n<summary>git diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/netbase.cpp b/src/netbase.cpp\r\nindex 534dafdb4..2d4341a4c 100644\r\n--- a/src/netbase.cpp\r\n+++ b/src/netbase.cpp\r\n@@ -229,13 +229,9 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\r\n     if (!ContainsNoNUL(name)) {\r\n         return {};\r\n     }\r\n-    CService addr;\r\n     // \"1.2:345\" will fail to resolve the ip, but will still set the port.\r\n     // If the ip fails to resolve, re-init the result.\r\n-    const std::optional<CService> addr_opt{Lookup(name, portDefault, false, dns_lookup_function)};\r\n-    if (addr_opt.has_value())\r\n-        addr = addr_opt.value();\r\n-    return addr;\r\n+    return Lookup(name, portDefault, false, dns_lookup_function).value_or(CService{});\r\n }\r\n \r\n /** SOCKS version */\r\n```\r\n</details>",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:07:02Z",
      "diff_hunk" : "@@ -235,8 +232,9 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     CService addr;\n     // \"1.2:345\" will fail to resolve the ip, but will still set the port.\n     // If the ip fails to resolve, re-init the result.\n-    if(!Lookup(name, addr, portDefault, false, dns_lookup_function))\n-        addr = CService();\n+    const std::optional<CService> addr_opt{Lookup(name, portDefault, false, dns_lookup_function)};\n+    if (addr_opt.has_value())\n+        addr = addr_opt.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999422199",
      "id" : 999422199,
      "line" : 237,
      "node_id" : "PRRC_kwDOABII5847kfj3",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 237,
      "original_position" : 131,
      "original_start_line" : 235,
      "path" : "src/netbase.cpp",
      "position" : 131,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999422199/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 235,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999422199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999425026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999425026"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    const std::optional<CService> addr_opt{Lookup(name, portDefault, /*fAllowLookup=*/false, dns_lookup_function)};\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:09:34Z",
      "diff_hunk" : "@@ -235,8 +232,9 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     CService addr;\n     // \"1.2:345\" will fail to resolve the ip, but will still set the port.\n     // If the ip fails to resolve, re-init the result.\n-    if(!Lookup(name, addr, portDefault, false, dns_lookup_function))\n-        addr = CService();\n+    const std::optional<CService> addr_opt{Lookup(name, portDefault, false, dns_lookup_function)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999425026",
      "id" : 999425026,
      "line" : 235,
      "node_id" : "PRRC_kwDOABII5847kgQC",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 235,
      "original_position" : 129,
      "original_start_line" : null,
      "path" : "src/netbase.cpp",
      "position" : 129,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999425026/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999425026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999434702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999434702"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        if (bind_addr.has_value() && bind_addr->GetPort() != dummy_port) return bind_addr->GetPort();\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:17:38Z",
      "diff_hunk" : "@@ -129,12 +129,12 @@ uint16_t GetListenPort()\n {\n     // If -bind= is provided with \":port\" part, use that (first one if multiple are provided).\n     for (const std::string& bind_arg : gArgs.GetArgs(\"-bind\")) {\n-        CService bind_addr;\n         constexpr uint16_t dummy_port = 0;\n \n-        if (Lookup(bind_arg, bind_addr, dummy_port, /*fAllowLookup=*/false)) {\n-            if (bind_addr.GetPort() != dummy_port) {\n-                return bind_addr.GetPort();\n+        const std::optional<CService> bind_addr{Lookup(bind_arg, dummy_port, /*fAllowLookup=*/false)};\n+        if (bind_addr.has_value()) {\n+            if (bind_addr.value().GetPort() != dummy_port) {\n+                return bind_addr.value().GetPort();\n             }\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999434702",
      "id" : 999434702,
      "line" : 139,
      "node_id" : "PRRC_kwDOABII5847kinO",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 139,
      "original_position" : 15,
      "original_start_line" : 135,
      "path" : "src/net.cpp",
      "position" : 15,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999434702/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999434702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999439888"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999439888"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: we're ensuring it has a value already\r\n```suggestion\r\n        if (addrLocal.has_value() && addrLocal->IsValid())\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:21:45Z",
      "diff_hunk" : "@@ -1369,9 +1369,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     }\n \n     for (const std::string& strAddr : args.GetArgs(\"-externalip\")) {\n-        CService addrLocal;\n-        if (Lookup(strAddr, addrLocal, GetListenPort(), fNameLookup) && addrLocal.IsValid())\n-            AddLocal(addrLocal, LOCAL_MANUAL);\n+        const std::optional<CService> addrLocal{Lookup(strAddr, GetListenPort(), fNameLookup)};\n+        if (addrLocal.has_value() && addrLocal.value().IsValid())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999439888",
      "id" : 999439888,
      "line" : 1373,
      "node_id" : "PRRC_kwDOABII5847kj4Q",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 1373,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 39,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999439888/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999439888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999447479"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999447479"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    return LookupHost(ip, false).value_or(CNetAddr{});\r\n```",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:27:30Z",
      "diff_hunk" : "@@ -24,9 +24,10 @@ BOOST_FIXTURE_TEST_SUITE(netbase_tests, BasicTestingSetup)\n \n static CNetAddr ResolveIP(const std::string& ip)\n {\n-    CNetAddr addr;\n-    LookupHost(ip, addr, false);\n-    return addr;\n+    std::optional<CNetAddr> addr{LookupHost(ip, false)};\n+    if (addr.has_value())\n+        return addr.value();\n+    return CNetAddr();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999447479",
      "id" : 999447479,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII5847klu3",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 30,
      "original_position" : 10,
      "original_start_line" : 27,
      "path" : "src/test/netbase_tests.cpp",
      "position" : 10,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999447479/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 27,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999447479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999450391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999450391"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this comment was not meant to be committed?",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-19T13:29:42Z",
      "diff_hunk" : "@@ -318,28 +318,30 @@ BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n         {\"2001:db8:aaaa:bbbb:cccc:dddd:eeee:AaAa\", \"2001:db8:aaaa:bbbb:cccc:dddd:eeee:aaaa\"},\n     };\n     for (const auto& [input_address, expected_canonical_representation_output] : canonical_representations_ipv6) {\n-        CNetAddr net_addr;\n-        BOOST_REQUIRE(LookupHost(input_address, net_addr, false));\n-        BOOST_REQUIRE(net_addr.IsIPv6());\n-        BOOST_CHECK_EQUAL(net_addr.ToString(), expected_canonical_representation_output);\n+        const std::optional<CNetAddr> net_addr{LookupHost(input_address, false)};\n+        BOOST_REQUIRE(net_addr.value().IsIPv6());\n+        BOOST_CHECK_EQUAL(net_addr.value().ToString(), expected_canonical_representation_output);\n     }\n }\n-\n+/*",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r999450391",
      "id" : 999450391,
      "line" : 326,
      "node_id" : "PRRC_kwDOABII5847kmcX",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 326,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 76,
      "pull_request_review_id" : 1147279908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999450391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-19T13:33:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/999450391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1000658184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000658184"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Great, gonna implement it! Simpler!",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-20T13:48:33Z",
      "diff_hunk" : "@@ -235,8 +232,9 @@ CService LookupNumeric(const std::string& name, uint16_t portDefault, DNSLookupF\n     CService addr;\n     // \"1.2:345\" will fail to resolve the ip, but will still set the port.\n     // If the ip fails to resolve, re-init the result.\n-    if(!Lookup(name, addr, portDefault, false, dns_lookup_function))\n-        addr = CService();\n+    const std::optional<CService> addr_opt{Lookup(name, portDefault, false, dns_lookup_function)};\n+    if (addr_opt.has_value())\n+        addr = addr_opt.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1000658184",
      "id" : 1000658184,
      "in_reply_to_id" : 999422199,
      "line" : 237,
      "node_id" : "PRRC_kwDOABII5847pNUI",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 237,
      "original_position" : 131,
      "original_start_line" : 235,
      "path" : "src/netbase.cpp",
      "position" : 131,
      "pull_request_review_id" : 1149286941,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000658184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 235,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-20T13:48:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000658184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1000665775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000665775"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry, I removed this PR from draft before pushing more changes.. my fault! ",
      "commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "created_at" : "2022-10-20T13:54:33Z",
      "diff_hunk" : "@@ -318,28 +318,30 @@ BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n         {\"2001:db8:aaaa:bbbb:cccc:dddd:eeee:AaAa\", \"2001:db8:aaaa:bbbb:cccc:dddd:eeee:aaaa\"},\n     };\n     for (const auto& [input_address, expected_canonical_representation_output] : canonical_representations_ipv6) {\n-        CNetAddr net_addr;\n-        BOOST_REQUIRE(LookupHost(input_address, net_addr, false));\n-        BOOST_REQUIRE(net_addr.IsIPv6());\n-        BOOST_CHECK_EQUAL(net_addr.ToString(), expected_canonical_representation_output);\n+        const std::optional<CNetAddr> net_addr{LookupHost(input_address, false)};\n+        BOOST_REQUIRE(net_addr.value().IsIPv6());\n+        BOOST_CHECK_EQUAL(net_addr.value().ToString(), expected_canonical_representation_output);\n     }\n }\n-\n+/*",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1000665775",
      "id" : 1000665775,
      "in_reply_to_id" : 999450391,
      "line" : 326,
      "node_id" : "PRRC_kwDOABII5847pPKv",
      "original_commit_id" : "e4e03e9935b0a5fb4d8d7978a580e1fa785ed64c",
      "original_line" : 326,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/test/net_tests.cpp",
      "position" : 76,
      "pull_request_review_id" : 1149300461,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000665775/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-20T13:54:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000665775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks @stickies-v for your valuable review, just addressed your suggestions! \r\n\r\nReady for review!",
      "created_at" : "2022-10-20T17:09:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1285886944",
      "id" : 1285886944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585MpRPg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285886944/reactions"
      },
      "updated_at" : "2022-10-20T17:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1285886944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Looks like the first commit still uses the old naming scheme and probably should be adapted (s/vIP/addresses/)?\r\n\r\nDone, force-pushed addressing it! ",
      "created_at" : "2023-01-23T14:05:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1400404482",
      "id" : 1400404482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585TeHoC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400404482/reactions"
      },
      "updated_at" : "2023-01-23T14:05:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1400404482",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084117650"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084117650"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * @see LookupHost(const std::string&, unsigned int, bool, DNSLookupFn)\r\n```",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T14:22:24Z",
      "diff_hunk" : "@@ -105,24 +105,25 @@ extern DNSLookupFn g_dns_lookup;\n  * @param name    The string representing a host. Could be a name or a numerical\n  *                IP address (IPv6 addresses in their bracketed form are\n  *                allowed).\n- * @param[out] vIP The resulting network addresses to which the specified host\n- *                 string resolved.\n  *\n- * @returns Whether or not the specified host string successfully resolved to\n- *          any resulting network addresses.\n+ * @returns The resulting network addresses to which the specified host\n+ *          string resolved.\n  *\n- * @see Lookup(const std::string&, std::vector<CService>&, uint16_t, bool, unsigned int, DNSLookupFn)\n+ * @see Lookup(const std::string&, uint16_t, bool, unsigned int, DNSLookupFn)\n  *      for additional parameter descriptions.\n  */\n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function = g_dns_lookup);\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function = g_dns_lookup);\n \n /**\n  * Resolve a host string to its first corresponding network address.\n  *\n- * @see LookupHost(const std::string&, std::vector<CNetAddr>&, uint16_t, bool, DNSLookupFn)\n+ * @returns The resulting network addresses to which the specified host\n+ *          string resolved.\n+ *\n+ * @see LookupHost(const std::string&, uint16_t, bool, DNSLookupFn)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084117650",
      "id" : 1084117650,
      "line" : 123,
      "node_id" : "PRRC_kwDOABII585AnlKS",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 123,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 26,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084117650/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084117650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084158719"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084158719"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n * @see Lookup(const std::string&, uint16_t, bool, unsigned int, DNSLookupFn)\r\n```",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T14:56:04Z",
      "diff_hunk" : "@@ -132,27 +133,25 @@ bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSL\n  *                disambiguated bracketed form), optionally followed by a uint16_t port\n  *                number. (e.g. example.com:8333 or\n  *                [2001:db8:85a3:8d3:1319:8a2e:370:7348]:420)\n- * @param[out] vAddr The resulting services to which the specified service string\n- *                   resolved.\n  * @param portDefault The default port for resulting services if not specified\n  *                    by the service string.\n  * @param fAllowLookup Whether or not hostname lookups are permitted. If yes,\n  *                     external queries may be performed.\n  * @param nMaxSolutions The maximum number of results we want, specifying 0\n  *                      means \"as many solutions as we get.\"\n  *\n- * @returns Whether or not the service string successfully resolved to any\n- *          resulting services.\n+ * @returns The resulting services to which the specified service string\n+ *          resolved.\n  */\n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function = g_dns_lookup);\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function = g_dns_lookup);\n \n /**\n  * Resolve a service string to its first corresponding service.\n  *\n- * @see Lookup(const std::string&, std::vector<CService>&, uint16_t, bool, unsigned int, DNSLookupFn)\n+ * @see Lookup(const std::string&, int16_t, bool, unsigned int, DNSLookupFn)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084158719",
      "id" : 1084158719,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII585AnvL_",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 151,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/netbase.h",
      "position" : 59,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084158719/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084158719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084168091"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084168091"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    return services.empty() ? std::nullopt : services.front()\r\n```",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T15:03:35Z",
      "diff_hunk" : "@@ -149,95 +149,86 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         // them, we return a network address representing it instead. See\n         // CNetAddr::SetSpecial(const std::string&) for more details.\n         if (addr.SetSpecial(name)) {\n-            vIP.push_back(addr);\n-            return true;\n+            addresses.push_back(addr);\n+            return addresses;\n         }\n     }\n \n     for (const CNetAddr& resolved : dns_lookup_function(name, fAllowLookup)) {\n-        if (nMaxSolutions > 0 && vIP.size() >= nMaxSolutions) {\n+        if (nMaxSolutions > 0 && addresses.size() >= nMaxSolutions) {\n             break;\n         }\n         /* Never allow resolving to an internal address. Consider any such result invalid */\n         if (!resolved.IsInternal()) {\n-            vIP.push_back(resolved);\n+            addresses.push_back(resolved);\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return addresses;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> services;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return services;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return services;\n+    services.resize(addresses.size());\n+    for (unsigned int i = 0; i < addresses.size(); i++)\n+        services[i] = CService(addresses[i], port);\n+    return services;\n }\n \n-bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return std::nullopt;\n     }\n-    std::vector<CService> vService;\n-    bool fRet = Lookup(name, vService, portDefault, fAllowLookup, 1, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    addr = vService[0];\n-    return true;\n+\n+    const std::vector<CService> services{Lookup(name, portDefault, fAllowLookup, 1, dns_lookup_function)};\n+    if (services.empty())\n+        return std::nullopt;\n+\n+    return services[0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084168091",
      "id" : 1084168091,
      "line" : 221,
      "node_id" : "PRRC_kwDOABII585Anxeb",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 221,
      "original_position" : 126,
      "original_start_line" : 218,
      "path" : "src/netbase.cpp",
      "position" : 126,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084168091/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 218,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084168091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084174333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084174333"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this entire block can be just removed? We're checking that in the overloaded `Lookup` function already?",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T15:08:39Z",
      "diff_hunk" : "@@ -149,95 +149,86 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         // them, we return a network address representing it instead. See\n         // CNetAddr::SetSpecial(const std::string&) for more details.\n         if (addr.SetSpecial(name)) {\n-            vIP.push_back(addr);\n-            return true;\n+            addresses.push_back(addr);\n+            return addresses;\n         }\n     }\n \n     for (const CNetAddr& resolved : dns_lookup_function(name, fAllowLookup)) {\n-        if (nMaxSolutions > 0 && vIP.size() >= nMaxSolutions) {\n+        if (nMaxSolutions > 0 && addresses.size() >= nMaxSolutions) {\n             break;\n         }\n         /* Never allow resolving to an internal address. Consider any such result invalid */\n         if (!resolved.IsInternal()) {\n-            vIP.push_back(resolved);\n+            addresses.push_back(resolved);\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return addresses;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> services;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return services;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return services;\n+    services.resize(addresses.size());\n+    for (unsigned int i = 0; i < addresses.size(); i++)\n+        services[i] = CService(addresses[i], port);\n+    return services;\n }\n \n-bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return std::nullopt;\n     }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084174333",
      "id" : 1084174333,
      "line" : 215,
      "node_id" : "PRRC_kwDOABII585Any_9",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 215,
      "original_position" : 114,
      "original_start_line" : 213,
      "path" : "src/netbase.cpp",
      "position" : 114,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084174333/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 213,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084174333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084197338"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084197338"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    return addresses.empty() ? std::nullopt : addresses.front();\r\n```",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T15:26:43Z",
      "diff_hunk" : "@@ -149,95 +149,86 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         // them, we return a network address representing it instead. See\n         // CNetAddr::SetSpecial(const std::string&) for more details.\n         if (addr.SetSpecial(name)) {\n-            vIP.push_back(addr);\n-            return true;\n+            addresses.push_back(addr);\n+            return addresses;\n         }\n     }\n \n     for (const CNetAddr& resolved : dns_lookup_function(name, fAllowLookup)) {\n-        if (nMaxSolutions > 0 && vIP.size() >= nMaxSolutions) {\n+        if (nMaxSolutions > 0 && addresses.size() >= nMaxSolutions) {\n             break;\n         }\n         /* Never allow resolving to an internal address. Consider any such result invalid */\n         if (!resolved.IsInternal()) {\n-            vIP.push_back(resolved);\n+            addresses.push_back(resolved);\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return addresses;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return std::nullopt;\n+    return addresses.front();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084197338",
      "id" : 1084197338,
      "line" : 190,
      "node_id" : "PRRC_kwDOABII585An4na",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 190,
      "original_position" : 77,
      "original_start_line" : 189,
      "path" : "src/netbase.cpp",
      "position" : 77,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084197338/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 189,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084197338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084205334"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084205334"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "perhaps no need for intermediary variables?\r\n```suggestion\r\n    rpc_allow_subnets.push_back(CSubNet{LookupHost(\"127.0.0.1\", false).value(), 8});      // always allow IPv4 local subnet\r\n    rpc_allow_subnets.push_back(CSubNet{LookupHost(\"::1\", false).value()});               // always allow IPv6 localhost\r\n```",
      "commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "created_at" : "2023-01-23T15:32:56Z",
      "diff_hunk" : "@@ -162,12 +162,10 @@ static bool ClientAllowed(const CNetAddr& netaddr)\n static bool InitHTTPAllowList()\n {\n     rpc_allow_subnets.clear();\n-    CNetAddr localv4;\n-    CNetAddr localv6;\n-    LookupHost(\"127.0.0.1\", localv4, false);\n-    LookupHost(\"::1\", localv6, false);\n-    rpc_allow_subnets.push_back(CSubNet(localv4, 8));      // always allow IPv4 local subnet\n-    rpc_allow_subnets.push_back(CSubNet(localv6));         // always allow IPv6 localhost\n+    const std::optional<CNetAddr> localv4{LookupHost(\"127.0.0.1\", false)};\n+    const std::optional<CNetAddr> localv6{LookupHost(\"::1\", false)};\n+    rpc_allow_subnets.push_back(CSubNet(localv4.value(), 8));      // always allow IPv4 local subnet\n+    rpc_allow_subnets.push_back(CSubNet(localv6.value()));         // always allow IPv6 localhost",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084205334",
      "id" : 1084205334,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII585An6kW",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 168,
      "original_position" : 13,
      "original_start_line" : 165,
      "path" : "src/httpserver.cpp",
      "position" : 13,
      "pull_request_review_id" : 1265688557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084205334/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 165,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T15:33:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084205334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084579139"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084579139"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it should be:\r\n```cpp\r\nreturn services.empty() ? std::nullopt : std::optional<CService>(services.front());\r\n```",
      "commit_id" : "1f3962cb247f27f5dc5ec8d57cbe5effc8c57fd7",
      "created_at" : "2023-01-23T21:29:29Z",
      "diff_hunk" : "@@ -149,95 +149,86 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         // them, we return a network address representing it instead. See\n         // CNetAddr::SetSpecial(const std::string&) for more details.\n         if (addr.SetSpecial(name)) {\n-            vIP.push_back(addr);\n-            return true;\n+            addresses.push_back(addr);\n+            return addresses;\n         }\n     }\n \n     for (const CNetAddr& resolved : dns_lookup_function(name, fAllowLookup)) {\n-        if (nMaxSolutions > 0 && vIP.size() >= nMaxSolutions) {\n+        if (nMaxSolutions > 0 && addresses.size() >= nMaxSolutions) {\n             break;\n         }\n         /* Never allow resolving to an internal address. Consider any such result invalid */\n         if (!resolved.IsInternal()) {\n-            vIP.push_back(resolved);\n+            addresses.push_back(resolved);\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return addresses;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> services;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return services;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return services;\n+    services.resize(addresses.size());\n+    for (unsigned int i = 0; i < addresses.size(); i++)\n+        services[i] = CService(addresses[i], port);\n+    return services;\n }\n \n-bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return std::nullopt;\n     }\n-    std::vector<CService> vService;\n-    bool fRet = Lookup(name, vService, portDefault, fAllowLookup, 1, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    addr = vService[0];\n-    return true;\n+\n+    const std::vector<CService> services{Lookup(name, portDefault, fAllowLookup, 1, dns_lookup_function)};\n+    if (services.empty())\n+        return std::nullopt;\n+\n+    return services[0];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084579139",
      "id" : 1084579139,
      "in_reply_to_id" : 1084168091,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585ApV1D",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 221,
      "original_position" : 126,
      "original_start_line" : 218,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1266368426,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084579139/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T21:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084579139",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084671898"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084671898"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, perfect!",
      "commit_id" : "1f3962cb247f27f5dc5ec8d57cbe5effc8c57fd7",
      "created_at" : "2023-01-23T23:21:32Z",
      "diff_hunk" : "@@ -149,95 +149,86 @@ static bool LookupIntern(const std::string& name, std::vector<CNetAddr>& vIP, un\n         // them, we return a network address representing it instead. See\n         // CNetAddr::SetSpecial(const std::string&) for more details.\n         if (addr.SetSpecial(name)) {\n-            vIP.push_back(addr);\n-            return true;\n+            addresses.push_back(addr);\n+            return addresses;\n         }\n     }\n \n     for (const CNetAddr& resolved : dns_lookup_function(name, fAllowLookup)) {\n-        if (nMaxSolutions > 0 && vIP.size() >= nMaxSolutions) {\n+        if (nMaxSolutions > 0 && addresses.size() >= nMaxSolutions) {\n             break;\n         }\n         /* Never allow resolving to an internal address. Consider any such result invalid */\n         if (!resolved.IsInternal()) {\n-            vIP.push_back(resolved);\n+            addresses.push_back(resolved);\n         }\n     }\n \n-    return (vIP.size() > 0);\n+    return addresses;\n }\n \n-bool LookupHost(const std::string& name, std::vector<CNetAddr>& vIP, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::vector<CNetAddr> LookupHost(const std::string& name, unsigned int nMaxSolutions, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CNetAddr> addresses;\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return addresses;\n     }\n     std::string strHost = name;\n     if (strHost.empty())\n-        return false;\n+        return addresses;\n     if (strHost.front() == '[' && strHost.back() == ']') {\n         strHost = strHost.substr(1, strHost.size() - 2);\n     }\n \n-    return LookupIntern(strHost, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n+    return LookupIntern(strHost, nMaxSolutions, fAllowLookup, dns_lookup_function);\n }\n \n-bool LookupHost(const std::string& name, CNetAddr& addr, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CNetAddr> LookupHost(const std::string& name, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n-    if (!ContainsNoNUL(name)) {\n-        return false;\n-    }\n-    std::vector<CNetAddr> vIP;\n-    LookupHost(name, vIP, 1, fAllowLookup, dns_lookup_function);\n-    if(vIP.empty())\n-        return false;\n-    addr = vIP.front();\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupHost(name, 1, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return std::nullopt;\n+    return addresses.front();\n }\n \n-bool Lookup(const std::string& name, std::vector<CService>& vAddr, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n+std::vector<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, unsigned int nMaxSolutions, DNSLookupFn dns_lookup_function)\n {\n+    std::vector<CService> services;\n     if (name.empty() || !ContainsNoNUL(name)) {\n-        return false;\n+        return services;\n     }\n     uint16_t port{portDefault};\n     std::string hostname;\n     SplitHostPort(name, port, hostname);\n \n-    std::vector<CNetAddr> vIP;\n-    bool fRet = LookupIntern(hostname, vIP, nMaxSolutions, fAllowLookup, dns_lookup_function);\n-    if (!fRet)\n-        return false;\n-    vAddr.resize(vIP.size());\n-    for (unsigned int i = 0; i < vIP.size(); i++)\n-        vAddr[i] = CService(vIP[i], port);\n-    return true;\n+    const std::vector<CNetAddr> addresses{LookupIntern(hostname, nMaxSolutions, fAllowLookup, dns_lookup_function)};\n+    if (addresses.empty()) return services;\n+    services.resize(addresses.size());\n+    for (unsigned int i = 0; i < addresses.size(); i++)\n+        services[i] = CService(addresses[i], port);\n+    return services;\n }\n \n-bool Lookup(const std::string& name, CService& addr, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n+std::optional<CService> Lookup(const std::string& name, uint16_t portDefault, bool fAllowLookup, DNSLookupFn dns_lookup_function)\n {\n     if (!ContainsNoNUL(name)) {\n-        return false;\n+        return std::nullopt;\n     }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084671898",
      "id" : 1084671898,
      "in_reply_to_id" : 1084174333,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Apsea",
      "original_commit_id" : "eb7b7e2b425b1b86e0d644a7b287baa3fc81b12b",
      "original_line" : 215,
      "original_position" : 114,
      "original_start_line" : 213,
      "path" : "src/netbase.cpp",
      "position" : null,
      "pull_request_review_id" : 1266585455,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26261",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084671898/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2023-01-23T23:21:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1084671898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force-pushed addressing @stickies-v and @theStack review, thanks!\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/26261#pullrequestreview-1265909107\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084117650\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084158719\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084168091\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084174333\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084197338\r\n- https://github.com/bitcoin/bitcoin/pull/26261#discussion_r1084205334",
      "created_at" : "2023-01-23T23:44:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26261#issuecomment-1401158288",
      "id" : 1401158288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26261",
      "node_id" : "IC_kwDOABII585Tg_qQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1401158288/reactions"
      },
      "updated_at" : "2023-01-23T23:44:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1401158288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   }
]
