[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25600](https://github.com/bitcoin/bitcoin/pull/25600) (p2p: Advertise `NODE_FULL_RBF` and connect to 4 outbound full-rbf peers if `-mempoolfullrbf` is set by ariard)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-10-10T16:33:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1273565300",
      "id" : 1273565300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26287",
      "node_id" : "IC_kwDOABII585L6RB0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273565300/reactions"
      },
      "updated_at" : "2022-10-10T16:33:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1273565300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK fa1fff466d6f05b00bf97ccf571b7c440734ad6b\r\n\r\nMight be worthwhile making the default be true for test chains -- make it easier to observe full rbf behaviour on testnet/signet well in advance of actually enabling it on mainnet?",
      "created_at" : "2022-10-11T08:04:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1274265041",
      "id" : 1274265041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26287",
      "node_id" : "IC_kwDOABII585L873R",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274265041/reactions"
      },
      "updated_at" : "2022-10-11T08:04:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274265041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26287#discussion_r992500165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26287"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/992500165"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            return strprintf(Untranslated(\"The -mempoolfullrbf configuration option is currently not supported for the %s chain\"), chainparams.NetworkIDString());\r\n```\r\n\r\n----\r\n\r\nMaybe consider removing or updating `-mempoolfullrbf` here as well:\r\n\r\n```diff\r\n--- a/doc/policy/mempool-replacements.md\r\n+++ b/doc/policy/mempool-replacements.md\r\n@@ -15,8 +15,6 @@ other consensus and policy rules, each of the following conditions are met:\r\n \r\n    *Rationale*: See [BIP125\r\n    explanation](https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki#motivation).\r\n-   Use the (`-mempoolfullrbf`) configuration option to allow transaction replacement without enforcement of the\r\n-   opt-in signaling rule.\r\n \r\n 2. The replacement transaction only include an unconfirmed input if that input was included in\r\n    one of the directly conflicting transactions. An unconfirmed input spends an output from a\r\n```\r\n",
      "commit_id" : "fa1fff466d6f05b00bf97ccf571b7c440734ad6b",
      "created_at" : "2022-10-11T15:44:05Z",
      "diff_hunk" : "@@ -92,7 +92,12 @@ std::optional<bilingual_str> ApplyArgsManOptions(const ArgsManager& argsman, con\n         return strprintf(Untranslated(\"acceptnonstdtxn is not currently supported for %s chain\"), chainparams.NetworkIDString());\n     }\n \n-    mempool_opts.full_rbf = argsman.GetBoolArg(\"-mempoolfullrbf\", mempool_opts.full_rbf);\n+    if (const auto fullrbf{argsman.GetBoolArg(\"-mempoolfullrbf\")}) {\n+        if (!chainparams.IsTestChain()) {\n+            return strprintf(Untranslated(\"The mempoolfullrbf setting is currently not supported for the %s chain\"), chainparams.NetworkIDString());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#discussion_r992500165",
      "id" : 992500165,
      "line" : 97,
      "node_id" : "PRRC_kwDOABII5847KFnF",
      "original_commit_id" : "fa1fff466d6f05b00bf97ccf571b7c440734ad6b",
      "original_line" : 97,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/node/mempool_args.cpp",
      "position" : 7,
      "pull_request_review_id" : 1137756756,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26287",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/992500165/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-11T15:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/992500165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it shows good faith for this PR to exist, but I don't know how well it would address the concerns if at all.\r\n\r\nBlaming the default false `-mempoolfullrbf` option for a full RBF network would be holding Bitcoin Core developers responsible for the decisions of individual node operators and miners. I don't think having the option (again, *default false*) can directly cause a full RBF network, and likewise, I don't think removing this option removes the \"risk\" of a full RBF network. Said \"risk\" is also a misunderstanding, but that's a different conversation. AFAIK Bitcoin Core isn't doing any \"advertising\" or encouraging users to use this config option, it just exists. Any user that wanted full RBF (e.g. because they want more fees) for the past 7 years could have run a patch or Knots or something else.",
      "created_at" : "2022-10-11T16:15:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1274949400",
      "id" : 1274949400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26287",
      "node_id" : "IC_kwDOABII585L_i8Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274949400/reactions"
      },
      "updated_at" : "2022-10-11T16:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274949400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "NACK\r\n\r\nThis is a default false option. There is likely to be a negligible difference in the number of nodes relaying full rbf transactions regardless of whether this option exists given it is default false (as few people even bother to change the defaults). Furthermore, there are other nodes that do full rbf (and have existed for nearly a decade) in addition to the fact that node operators could still revert this change. I would expect the number of people who would do such a revert is on par with the number of people who would explicitly set the option, namely very few.",
      "created_at" : "2022-10-11T16:19:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1274953204",
      "id" : 1274953204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26287",
      "node_id" : "IC_kwDOABII585L_j30",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274953204/reactions"
      },
      "updated_at" : "2022-10-11T16:19:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1274953204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "NACK\r\n\r\nWe've been talking about full-rbf for seven years. It is well-established that zero-conf subsists on nobody deciding to try to sidestep it, and it has been long communicated that anyone using zero-conf should be aware that it is a bad practice.\r\n\r\nNot having full replaceability is causing a variety of issues and we are at a point where instant payment options exist that can be used where people rely on quick payments. This concrete change has been discussed for the last 18 months, I don't see how it comes as a surprise.\r\n\r\nI would posit that now is an excellent time to start thinking about how a business is going to work in a full-rbf environment.",
      "created_at" : "2022-10-12T16:28:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1276444078",
      "id" : 1276444078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26287",
      "node_id" : "IC_kwDOABII585MFP2u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276444078/reactions"
      },
      "updated_at" : "2022-10-12T16:28:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276444078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   }
]
