[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496656286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496656286"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note: This change isn't strictly necessary, but using `w8` instead of `wallet.dat` here makes the test more robust so `default_wallet_filename` can be changed in the future. The top level wallet directory will always contain a `w8` file, but may or may not contain a `wallet.dat` file, depending on the `default_wallet_filename` value.",
      "commit_id" : "5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T11:55:15Z",
      "diff_hunk" : "@@ -108,7 +107,7 @@ def wallet_file(name):\n \n         # should not initialize if wallet path can't be created\n         exp_stderr = \"boost::filesystem::create_directory:\"\n-        self.nodes[0].assert_start_raises_init_error(['-wallet=wallet.dat/bad'], exp_stderr, match=ErrorMatch.PARTIAL_REGEX)\n+        self.nodes[0].assert_start_raises_init_error(['-wallet=w8/bad'], exp_stderr, match=ErrorMatch.PARTIAL_REGEX)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496656286",
      "id" : 496656286,
      "line" : 110,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY1NjI4Ng==",
      "original_commit_id" : "9fbba7ca8712be85a72b8499c437c6259b171d03",
      "original_line" : 110,
      "original_position" : 62,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 62,
      "pull_request_review_id" : 498388433,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-29T17:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496656286",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19502 (Bugfix: Wallet: Soft-fail exceptions within ListWalletDir file checks by luke-jr)\n* #19297 ([test] WIP: rewrite generate() in test_node to gain determinism in test data by glowang)\n* #19168 (Refactor: Improve setup_clean_chain semantics by fjahr)\n* #18836 (wallet: upgradewallet fixes and additional tests by achow101)\n* #18788 (tests: Update more tests to work with descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-09-29T12:58:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700685003",
      "id" : 700685003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDY4NTAwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T18:39:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700685003",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do all of the changes need to happen in one commit? Also, the build without wallet doesn't pass the tests",
      "created_at" : "2020-09-29T13:10:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700691520",
      "id" : 700691520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDY5MTUyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T13:10:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700691520",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I'll check the no wallet build. I don't think this is PR hard to review. It was very difficult to write, because every one change I made broke other things and required more changes. But in the end, the main change was just dropping -wallet=\"\" arguments and tweaking things to work around the dropped arguments.\r\n\r\nI would also expect if you're looking at one test and want to see how this PR affects the test, you'd rather look at one diff instead of multiple diffs. But I guess you have that option regardless by diffing across commits, so I'll see if there are sensible ways to have multiple commits.",
      "created_at" : "2020-09-29T14:30:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700744365",
      "id" : 700744365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDc0NDM2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T14:30:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700744365",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 9fbba7ca8712be85a72b8499c437c6259b171d03 -> c072c8585dde004db0aadbf4309fb97a952a6f29 ([`pr/defw.1`](https://github.com/ryanofsky/bitcoin/commits/pr/defw.1) -> [`pr/defw.2`](https://github.com/ryanofsky/bitcoin/commits/pr/defw.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/defw.1..pr/defw.2)) with suggestions from Marco (thanks!) splitting up commits and adding missing is_wallet_compiled check",
      "created_at" : "2020-09-29T15:03:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700768006",
      "id" : 700768006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDc2ODAwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T15:03:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700768006",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't really like removing the `createwallet` override as it makes it more difficult to enable additional tests for descriptor wallets and lets us enable a test for descriptor wallets without having to modify every `createwallet` call in a test.",
      "created_at" : "2020-09-29T16:16:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700814066",
      "id" : 700814066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDgxNDA2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T16:16:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700814066",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: @achow101 https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700814066\r\n\r\n> I don't really like removing the `createwallet` override as it makes it more difficult to enable additional tests for descriptor wallets and lets us enable a test for descriptor wallets without having to modify every `createwallet` call in a test.\r\n\r\nThanks! Dropped commit be968c406944a74550799d28200255436c880f4b as I didn't realize it was separable. The change does seem like a win to me for simplicity and making things explicit, so maybe I will try to revive it in some form. But there's no reason to include it here.\r\n\r\n---\r\n\r\nUpdated c072c8585dde004db0aadbf4309fb97a952a6f29 -> 5338dfaef077b5c38e3a87d76f12068147a5db2d ([`pr/defw.2`](https://github.com/ryanofsky/bitcoin/commits/pr/defw.2) -> [`pr/defw.3`](https://github.com/ryanofsky/bitcoin/commits/pr/defw.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/defw.2..pr/defw.3)) just dropping commit be968c406944a74550799d28200255436c880f4b\r\n\r\n",
      "created_at" : "2020-09-29T17:08:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700852887",
      "id" : 700852887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDg1Mjg4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T17:08:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700852887",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496914396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496914396"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should the `-wallet=wallet.dat` throughout this test use `self.wallet_data_filename` too then?",
      "commit_id" : "5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T17:27:41Z",
      "diff_hunk" : "@@ -213,7 +213,7 @@ def test_salvage(self):\n         self.assert_tool_output('', '-wallet=salvage', 'salvage')\n \n     def run_test(self):\n-        self.wallet_path = os.path.join(self.nodes[0].datadir, self.chain, 'wallets', 'wallet.dat')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496914396",
      "id" : 496914396,
      "line" : 216,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjkxNDM5Ng==",
      "original_commit_id" : "cef6f09997b110fba9089a37abb4653101541046",
      "original_line" : 216,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/tool_wallet.py",
      "position" : 40,
      "pull_request_review_id" : 498719028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-29T18:15:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496914396",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496916277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496916277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why?",
      "commit_id" : "5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T17:30:30Z",
      "diff_hunk" : "@@ -94,10 +94,10 @@ def wallet_file(name):\n         #   w7_symlink - to verify symlinked wallet path is initialized correctly\n         #   w8         - to verify existing wallet file is loaded correctly\n         #   ''         - to verify default wallet file is created correctly\n-        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', '']\n-        extra_args = ['-wallet={}'.format(n) for n in wallet_names]\n+        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', self.default_wallet_name]\n+        extra_args = ['-nowallet'] + ['-wallet={}'.format(n) for n in wallet_names]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496916277",
      "id" : 496916277,
      "line" : 97,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjkxNjI3Nw==",
      "original_commit_id" : "cef6f09997b110fba9089a37abb4653101541046",
      "original_line" : 98,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 50,
      "pull_request_review_id" : 498719028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-29T18:15:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496916277",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496960050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496960050"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496914396\r\n\r\n> Should the `-wallet=wallet.dat` throughout this test use `self.wallet_data_filename` too then?\r\n\r\nIt effectively is. I think you are maybe only looking at the first commit, not the overall diff? The wallet.dat references are removed in the second commit, since more robust way to refer to wallets is by directory name not data file name. (The data file name used inside wallets is an implementation detail and referring to it is only supported in limited cases for backwards compatibility. Dropping references to the data file name lets the test work with all default_wallet_name values.)",
      "commit_id" : "5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T18:44:35Z",
      "diff_hunk" : "@@ -213,7 +213,7 @@ def test_salvage(self):\n         self.assert_tool_output('', '-wallet=salvage', 'salvage')\n \n     def run_test(self):\n-        self.wallet_path = os.path.join(self.nodes[0].datadir, self.chain, 'wallets', 'wallet.dat')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496960050",
      "id" : 496960050,
      "in_reply_to_id" : 496914396,
      "line" : 216,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk2MDA1MA==",
      "original_commit_id" : "cef6f09997b110fba9089a37abb4653101541046",
      "original_line" : 216,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/tool_wallet.py",
      "position" : 40,
      "pull_request_review_id" : 498777374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-29T18:51:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496960050",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496962672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496962672"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496916277\r\n\r\n> Why?\r\n\r\nSpecifying `-nowallet` keeps test behavior unchanged now that the load on startup option is used. Probably if you were writing this test from scratch, you would drop `-nowallet` and instead change the checks below. But this is the most minimal update for the existing test, it is also nice because it keeps the test more narrow and robust to outside changes.",
      "commit_id" : "5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T18:49:12Z",
      "diff_hunk" : "@@ -94,10 +94,10 @@ def wallet_file(name):\n         #   w7_symlink - to verify symlinked wallet path is initialized correctly\n         #   w8         - to verify existing wallet file is loaded correctly\n         #   ''         - to verify default wallet file is created correctly\n-        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', '']\n-        extra_args = ['-wallet={}'.format(n) for n in wallet_names]\n+        wallet_names = ['w1', 'w2', 'w3', 'w', 'sub/w5', os.path.join(self.options.tmpdir, 'extern/w6'), 'w7_symlink', 'w8', self.default_wallet_name]\n+        extra_args = ['-nowallet'] + ['-wallet={}'.format(n) for n in wallet_names]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#discussion_r496962672",
      "id" : 496962672,
      "in_reply_to_id" : 496916277,
      "line" : 97,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk2MjY3Mg==",
      "original_commit_id" : "cef6f09997b110fba9089a37abb4653101541046",
      "original_line" : 98,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 50,
      "pull_request_review_id" : 498777374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20034",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-29T18:51:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496962672",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 5338dfaef077b5c38e3a87d76f12068147a5db2d",
      "created_at" : "2020-09-29T19:12:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20034#issuecomment-700925004",
      "id" : 700925004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20034",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDkyNTAwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T19:12:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700925004",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
