[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114867160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114867160"
         }
      },
      "body" : "Just use blockHash?",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T19:27:31Z",
      "diff_hunk" : "@@ -2392,15 +2393,16 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n     {\n         std::shared_ptr<CBlock> pblock = std::make_shared<CBlock>();\n         vRecv >> *pblock;\n+        const uint256& blockHash = pblock->GetHash();\n \n-        LogPrint(BCLog::NET, \"received block %s peer=%d\\n\", pblock->GetHash().ToString(), pfrom->id);\n+        LogPrint(BCLog::NET, \"received block %s peer=%d\\n\", blockHash.ToString(), pfrom->id);\n \n         // Process all blocks from whitelisted peers, even if not requested,\n         // unless we're still syncing with the network.\n         // Such an unrequested block may still be processed, subject to the\n         // conditions in AcceptBlock().\n         bool forceProcessing = pfrom->fWhitelisted && !IsInitialBlockDownload();\n-        const uint256 hash(pblock->GetHash());\n+        const uint256 hash(blockHash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114867160",
      "id" : 114867160,
      "original_commit_id" : "ce6d1b2776b2ad9a5d711fb06b0a8be54ca158da",
      "original_position" : 45,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 36364443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114867160",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114869900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114869900"
         }
      },
      "body" : "Thanks, I saw this and then forgot about it",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T19:41:42Z",
      "diff_hunk" : "@@ -2392,15 +2393,16 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n     {\n         std::shared_ptr<CBlock> pblock = std::make_shared<CBlock>();\n         vRecv >> *pblock;\n+        const uint256& blockHash = pblock->GetHash();\n \n-        LogPrint(BCLog::NET, \"received block %s peer=%d\\n\", pblock->GetHash().ToString(), pfrom->id);\n+        LogPrint(BCLog::NET, \"received block %s peer=%d\\n\", blockHash.ToString(), pfrom->id);\n \n         // Process all blocks from whitelisted peers, even if not requested,\n         // unless we're still syncing with the network.\n         // Such an unrequested block may still be processed, subject to the\n         // conditions in AcceptBlock().\n         bool forceProcessing = pfrom->fWhitelisted && !IsInitialBlockDownload();\n-        const uint256 hash(pblock->GetHash());\n+        const uint256 hash(blockHash);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114869900",
      "id" : 114869900,
      "original_commit_id" : "ce6d1b2776b2ad9a5d711fb06b0a8be54ca158da",
      "original_position" : 45,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 36367583,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114869900",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114870270"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114870270"
         }
      },
      "body" : "Please rename this while you're at it. CheckBlockHeader is a terrible name if basically just compares 2 values :)",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T19:43:43Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams, bool fCheckPOW)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114870270",
      "id" : 114870270,
      "original_commit_id" : "2049a1f3b9236586fc88c59d7766a23d295742ac",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : 44,
      "pull_request_review_id" : 36368020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114870270",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114871570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114871570"
         }
      },
      "body" : "Heh, nevermind. I see that's been suggested in #9717",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T19:50:22Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams, bool fCheckPOW)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114871570",
      "id" : 114871570,
      "original_commit_id" : "2049a1f3b9236586fc88c59d7766a23d295742ac",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : 44,
      "pull_request_review_id" : 36369493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114871570",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114872243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114872243"
         }
      },
      "body" : "This hash doesn't match the one that's ultimately reconstructed.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T19:53:53Z",
      "diff_hunk" : "@@ -2020,6 +2020,7 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n         // Keep a CBlock for \"optimistic\" compactblock reconstructions (see\n         // below)\n         std::shared_ptr<CBlock> pblock = std::make_shared<CBlock>();\n+        const uint256& blockHash = pblock->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114872243",
      "id" : 114872243,
      "original_commit_id" : "ce6d1b2776b2ad9a5d711fb06b0a8be54ca158da",
      "original_position" : 4,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 36370265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114872243",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114887298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887298"
         }
      },
      "body" : "The discussion there was more about fully removing it and inlining it, which I prefer not to do for now. Just renaming is fine and as you point out it's free to do it now. Renaming to CheckProof (not with CheckProofOfWork to avoid confusing it with the version without CValidationState).",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-04T21:03:31Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams, bool fCheckPOW)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114887298",
      "id" : 114887298,
      "original_commit_id" : "2049a1f3b9236586fc88c59d7766a23d295742ac",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : 44,
      "pull_request_review_id" : 36387035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/114887298",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Fixed 3 nits by @theuni added a commit for TestBlockValidity, with a tiny optimization on getblocktemplate, and not much extra disruption.",
      "created_at" : "2017-05-04T21:16:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299311670",
      "id" : 299311670,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-04T21:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299311670",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115083718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115083718"
         }
      },
      "body" : "CheckProof doesnt say anything to me? I have no idea what \"Proof\" it would be checking, probably just remove the function.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-05T20:42:10Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams)\n+static bool CheckProof(const Consensus::Params& consensusParams, const CBlockHeader& block, const uint256& blockHash, CValidationState& state)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115083718",
      "id" : 115083718,
      "original_commit_id" : "637359899554a61ca4dee292f2f052b914a52715",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 36604890,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115083718",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115120973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115120973"
         }
      },
      "body" : "Well, CheckProof also makes sense for the blocksigning branch #9177 (rewrite and rebase in progress), since you could be checking proof of work or the block script. But that name change can be done later, after all this function is being only called from 2 places at this point.\r\nFeel free to propose another name, maybe we can also move it to pow.o while at it.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-06T14:07:21Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams)\n+static bool CheckProof(const Consensus::Params& consensusParams, const CBlockHeader& block, const uint256& blockHash, CValidationState& state)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115120973",
      "id" : 115120973,
      "original_commit_id" : "637359899554a61ca4dee292f2f052b914a52715",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 36644789,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115120973",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I think a better approach would be to cache it. A bit like it is already done in CTransaction versus CMulableTransaction",
      "created_at" : "2017-05-06T18:11:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299656905",
      "id" : 299656905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-06T18:11:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299656905",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "> I think a better approach would be to cache it. A bit like it is already done in CTransaction versus CMulableTransaction\r\n\r\nWhat is better about it?\r\nAnyway, this doesn't preclude from caching it too.\r\n\r\nNeeds rebase",
      "created_at" : "2017-05-07T12:07:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299702014",
      "id" : 299702014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-07T12:07:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299702014",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "better in the sense it does not require one more parameter and that it is coherent with what we are doing for Transaction.",
      "created_at" : "2017-05-07T17:17:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299720510",
      "id" : 299720510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-07T17:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299720510",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Rebased\r\n\r\nEDIT: @NicolasDorier I think even if we do that it's better that some functions take the hash directly, maybe not all the the functions here. But I'm happy to review such a PR.",
      "created_at" : "2017-05-07T19:27:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299728592",
      "id" : 299728592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-07T19:29:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299728592",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Hm. if the block were made immutable, caching the result would be trivial. The only place where a block is not immutable in the code is in the creation of a block (where we don't care about the hash).  These changes require carrying around a hash where with an immutable block it would just be a method to return it.\r\n\r\nSo while these changes don't preclude caching it, I think the caching it patch would be smaller and simpler. Thoughts?",
      "created_at" : "2017-05-07T23:43:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299744280",
      "id" : 299744280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-07T23:43:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299744280",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115343468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115343468"
         }
      },
      "body" : "Lets just remove it and call CheckProofOfWork directly?",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-08T20:21:34Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams)\n+static bool CheckProof(const Consensus::Params& consensusParams, const CBlockHeader& block, const uint256& blockHash, CValidationState& state)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115343468",
      "id" : 115343468,
      "original_commit_id" : "637359899554a61ca4dee292f2f052b914a52715",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 36874807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115343468",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115356315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115356315"
         }
      },
      "body" : "In commit \"Pow: Optimization: Pass const uint256& blockHash to CheckBlock\"\r\n\r\nSome places you are using `const uint256` and other places you are using `const uint256&` for the `blockHash` local. Both ways should be functionality identical, but it might be nice to stick with a consistent style.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-08T21:21:51Z",
      "diff_hunk" : "@@ -3235,7 +3236,8 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n         CValidationState state;\n         // Ensure that CheckBlock() passes before calling AcceptBlock, as\n         // belt-and-suspenders.\n-        bool ret = CheckBlock(*pblock, state, chainparams.GetConsensus());\n+        const uint256 blockHash = pblock->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115356315",
      "id" : 115356315,
      "original_commit_id" : "0b4a660e132c5a1309008713b978b941421e1174",
      "original_position" : 63,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 36888758,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-10T15:11:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115356315",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "utACK 2069f9282cebb1c08b7e12c8155de3403dda39b4. Nice cleanup.\r\n\r\nIf a small caching implementation is possible, that would probably give a preferable end result. But this PR very simple and an obvious improvement over the status quo.",
      "created_at" : "2017-05-08T21:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-299997945",
      "id" : 299997945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-08T21:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/299997945",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115538387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115538387"
         }
      },
      "body" : "See the discussion on https://github.com/bitcoin/bitcoin/pull/9717 and https://github.com/bitcoin/bitcoin/pull/10339#discussion_r114870270\r\nIt doesn't seem to make much sense to remove a wrapper of CheckProofOfWork that takes the CValidationState to just add it again on another PR doesn't seem to make much sense. But if we don't do the blocksigning stuff or something we can remove the wrapper later.\r\nIn any case, renamed CheckProof to CheckProofOfWork, the name collision doesn't matter because the parameters are different, but maybe some other name is better.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-09T16:38:13Z",
      "diff_hunk" : "@@ -2820,10 +2820,10 @@ bool FindUndoPos(CValidationState &state, int nFile, CDiskBlockPos &pos, unsigne\n     return true;\n }\n \n-bool CheckBlockHeader(const CBlockHeader& block, CValidationState& state, const Consensus::Params& consensusParams)\n+static bool CheckProof(const Consensus::Params& consensusParams, const CBlockHeader& block, const uint256& blockHash, CValidationState& state)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r115538387",
      "id" : 115538387,
      "original_commit_id" : "637359899554a61ca4dee292f2f052b914a52715",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 37085003,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-09T16:59:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/115538387",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Needed rebase.\r\nYes, making the block immutable and using a cache would be more complete and also likely less disruptive. But I don't think I will have time to try that next week. If somebody else writes that alternative, please ping for review.\r\n",
      "created_at" : "2017-05-09T17:03:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-300232973",
      "id" : 300232973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-09T17:03:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300232973",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I prefer this approach for reducing rehashing first. Caching is always possible later, but brings its own complications (like either eager precomputation, possibly hashing in unnecessary places, or locking issues).",
      "created_at" : "2017-05-09T17:09:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-300235422",
      "id" : 300235422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-09T17:09:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300235422",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK 46f5a9b090d8084edd0160411f634c6140ac983d. Changes since previous review were just resolving chainParams merge conflict, renaming CheckProofOfWork, and making it static in an earlier commit.",
      "created_at" : "2017-05-10T15:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-300518672",
      "id" : 300518672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-10T15:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/300518672",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118114047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118114047"
         }
      },
      "body" : "If you're going to stick to variable names that look like Hungarian style (which is certainly not a requirement, IMO), I do prefer it to be consistent. `hashBlock` would be correct here.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-23T21:42:36Z",
      "diff_hunk" : "@@ -1693,13 +1693,14 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n {\n     AssertLockHeld(cs_main);\n     assert(pindex);\n+    const uint256& blockHash = block.GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118114047",
      "id" : 118114047,
      "original_commit_id" : "008b0e3c214c089e5e5058b1e54715417a4e9a2e",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39876935,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-23T21:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118114047",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118114329"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118114329"
         }
      },
      "body" : "Super nit: this may be slightly confusing as it may make it look like nothing new is computed, so I prefer `const uint256 hashBlock = ` here instead.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-23T21:43:58Z",
      "diff_hunk" : "@@ -3151,6 +3151,7 @@ bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& headers, CValidatio\n static bool AcceptBlock(const std::shared_ptr<const CBlock>& pblock, CValidationState& state, const CChainParams& chainparams, CBlockIndex** ppindex, bool fRequested, const CDiskBlockPos* dbp, bool* fNewBlock)\n {\n     const CBlock& block = *pblock;\n+    const uint256& blockHash = pblock->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118114329",
      "id" : 118114329,
      "original_commit_id" : "008b0e3c214c089e5e5058b1e54715417a4e9a2e",
      "original_position" : 45,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 39876935,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-23T21:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118114329",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118965168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118965168"
         }
      },
      "body" : "does hashBlock even qualify as \"hungarian style\"? Anyway, it wasn't my intention, I just cleed it blockHash because it's the block's hash. I don't care to change it, but I really don't think s/blockHash/hashBlock/ is worth it here at all.",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-29T16:48:02Z",
      "diff_hunk" : "@@ -1693,13 +1693,14 @@ static bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockInd\n {\n     AssertLockHeld(cs_main);\n     assert(pindex);\n+    const uint256& blockHash = block.GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118965168",
      "id" : 118965168,
      "original_commit_id" : "008b0e3c214c089e5e5058b1e54715417a4e9a2e",
      "original_position" : 4,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 40805526,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-29T16:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118965168",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118965330"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118965330"
         }
      },
      "body" : "Again, I don't see how you suggestion for changing the name improves anything or gives more clarity, but if you think so, I can change it everywhere (including all function arguments) I guess...",
      "commit_id" : "46f5a9b090d8084edd0160411f634c6140ac983d",
      "created_at" : "2017-05-29T16:49:39Z",
      "diff_hunk" : "@@ -3151,6 +3151,7 @@ bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& headers, CValidatio\n static bool AcceptBlock(const std::shared_ptr<const CBlock>& pblock, CValidationState& state, const CChainParams& chainparams, CBlockIndex** ppindex, bool fRequested, const CDiskBlockPos* dbp, bool* fNewBlock)\n {\n     const CBlock& block = *pblock;\n+    const uint256& blockHash = pblock->GetHash();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#discussion_r118965330",
      "id" : 118965330,
      "original_commit_id" : "008b0e3c214c089e5e5058b1e54715417a4e9a2e",
      "original_position" : 45,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 40805681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10339",
      "updated_at" : "2017-05-29T16:49:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118965330",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Before bikeshedding blockHash, please let me squash. Nobody seems to have complained about individual functions, which was the main point of keeping it separated. I think it would would be cleaner in a single commit on top of #9717 (or maybe squash that too if it's not going to be merged independently).\r\n",
      "created_at" : "2017-05-31T00:02:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-305042985",
      "id" : 305042985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-31T00:02:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305042985",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Squashed to 2 commits on top of #9717 for now as explained in the previous comment.\r\n\r\nEDIT: also ```scripted-diff: s/blockHash/block_hash/``` on top",
      "created_at" : "2017-05-31T01:52:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10339#issuecomment-305059543",
      "id" : 305059543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10339",
      "updated_at" : "2017-05-31T02:31:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/305059543",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
