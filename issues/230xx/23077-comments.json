[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK and building to try it :smiley: \r\n\r\nEdit: debug build is clean and a first read through the commits looks straightforward.",
      "created_at" : "2021-09-23T16:00:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-925947904",
      "id" : 925947904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843MNgA",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T16:57:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925947904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2021-09-23T16:02:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-925949403",
      "id" : 925949403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843MN3b",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T16:02:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925949403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK ð±",
      "created_at" : "2021-09-23T16:27:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-925969635",
      "id" : 925969635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843MSzj",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T16:27:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925969635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23586626?v=4",
         "events_url" : "https://api.github.com/users/Zero-1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Zero-1729/followers",
         "following_url" : "https://api.github.com/users/Zero-1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Zero-1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Zero-1729",
         "id" : 23586626,
         "login" : "Zero-1729",
         "node_id" : "MDQ6VXNlcjIzNTg2NjI2",
         "organizations_url" : "https://api.github.com/users/Zero-1729/orgs",
         "received_events_url" : "https://api.github.com/users/Zero-1729/received_events",
         "repos_url" : "https://api.github.com/users/Zero-1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Zero-1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Zero-1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Zero-1729"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> CJDNS is like a distributed, shared VPN with multiple entry points where every participant can reach any other participant. All participants use addresses from the fc00::/8 network (reserved IPv6 range). Installation and configuration is done outside of applications, similarly to VPN (either in the host/OS or on the network router).\r\n\r\nSorry but this doesn't look good enough to add one more network to Bitcoin Core. We already have 4 options: ipv4, ipv6, Tor, i2p and 14 combinations which can be used in `onlynet` for outgoing connections.\r\n\r\nWill do more research about CJDNS and compare with other networks before ACKing the concept. Let me know if you know any links.",
      "created_at" : "2021-09-23T17:58:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926033598",
      "id" : 926033598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843Mia-",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T17:58:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926033598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22834](https://github.com/bitcoin/bitcoin/pull/22834) (net: respect -onlynet= when making outbound connections by vasild)\n* [#22766](https://github.com/bitcoin/bitcoin/pull/22766) (refactor: Clarify and disable unused ArgsManager flags by ryanofsky)\n* [#21879](https://github.com/bitcoin/bitcoin/pull/21879) (Wrap accept() and extend usage of Sock by vasild)\n* [#21878](https://github.com/bitcoin/bitcoin/pull/21878) (Make all networking code mockable by vasild)\n* [#19358](https://github.com/bitcoin/bitcoin/pull/19358) (torcontrol : avoid to set wrong outbound proxy and network settings when creating an inbound onion service. by Saibato)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-23T22:08:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926197385",
      "id" : 926197385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843NKaJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-28T19:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926197385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild \r\n\r\n> However, this PR is necessary for address relay to work properly and automatic connections to be made to CJDNS peers. I.e. to make CJDNS a first class citizen network like IPv4, IPv6, Tor and I2P.\r\n\r\nThanks for providing this motivation, it's helpful to understand the aim of this PR. Could you go a bit further and share your perspective on _why_ you think CJDNS should be a first class citizen network in bitcoin core? Does it provide different features / privacy / etc. from other networks? Or is this a case where you think optionality is good, so supporting more networks is better? Thanks in advance!",
      "created_at" : "2021-09-23T22:33:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926211322",
      "id" : 926211322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843NNz6",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T22:33:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926211322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "FWIW, BIP155 does already reserve a network ID for CJDNS (that's not an argument either way of course, but perhaps the BIP's author have opinions on this too). @laanwj?",
      "created_at" : "2021-09-23T22:41:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926214539",
      "id" : 926214539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843NOmL",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T22:42:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926214539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I did some research about CJDNS, GNUnet and Yggdrasil.\r\n\r\nWill read more about these networks and also compare with few others in next few days. Shared initial thoughts and things I did here: https://blockchaincommons.github.io/Bitcoin-Camouflage//blog/cjdns/",
      "created_at" : "2021-09-24T05:04:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926349000",
      "id" : 926349000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843NvbI",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T05:04:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926349000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prayank23, @amitiuttarwar,\r\n\r\nCompared to IPv4/6, CJDNS provides e2e encryption and protects nodes from the traditional traffic analysis and filtering. For example, an ISP blocks port 8333 (dumb) or analyses the traffic to/from a given node, regardless of the port (it is easy to detect that it is Bitcoin P2P protocol being talked on a TCP connection, even if the port is not 8333).\r\n\r\nCompared to Tor and I2P, CJDNS provides redundancy. Each of those have their own shades, which may suit different users. For example Tor is popular/widespread but is somewhat centralized, which could lead to [problems](https://darknetdaily.com/2021/01/09/all-v3-onion-addresses-down-after-attack-on-the-tor-network/). I2P connections have source address, but I2P is somewhat slow. CJDNS does not hide the sender and the recipient from intermediate routers, but it is fast. Different things may work for different people. It is good to have options.\r\n\r\nSo, why not have support for CJDNS? It must be noted that support for X does not come for free. We have to pay the following prices:\r\n* Implementation cost\r\n* Review cost\r\n* Maintenance cost\r\n\r\nFor the _implementation cost_, notice that CJDNS is already included in [BIP155](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#specification) and that there is already rudimentary support for it in `master`:\r\n\r\n```sh\r\n$ git grep -i cjdns origin/master |wc -l\r\n      49\r\n```\r\n\r\nAs a result this PR is relatively small and straight-forward. _Review cost_ should be low. From the application's point of view, connecting to CJDNS is as easy as connecting to a normal IPv6 address. Bitcoin Core need not implement support for a specific proxy that talks a specific protocol. Tor and I2P require that. We have this maintenance cost for them:\r\n\r\n```sh\r\n$ wc -l src/torcontrol.cpp src/i2p.cpp \r\n     636 src/torcontrol.cpp\r\n     418 src/i2p.cpp\r\n```\r\n\r\nSupport for CJDNS goes without that, so its _maintenance cost_ is low compared to Tor and I2P.\r\n\r\nNotice also that [OpenWRT routers support CJDNS](https://openwrt.org/packages/pkgdata/cjdns), so from user's perspective it would be a matter of enabling it on their routers and running Bitcoin Core with `-cjdnsreachable`.\r\n\r\nIn the case of CJDNS, my personal opinion is that the benefits outweigh the cost. ",
      "created_at" : "2021-09-24T13:30:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926626650",
      "id" : 926626650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843OzNa",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T13:30:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926626650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, BIP155 and Tor v3 implementation were both fairly deep changes. I2P was also extensive. This change set is relatively tiny, I've done a first review pass, and in terms of time it was well under 10% that of any of the BIP155 impl, Tor v3, and I2P for me.",
      "created_at" : "2021-09-24T14:32:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926675530",
      "id" : 926675530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843O_JK",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T14:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926675530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, awesome to see this!",
      "created_at" : "2021-09-24T17:45:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-926811654",
      "id" : 926811654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843PgYG",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T17:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926811654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK seeing as there is already basic existing support for this in master and noting that this may match some users' needs of speed while still protecting against traffic analysis.\r\n\r\nGoing to build and try this out",
      "created_at" : "2021-09-25T21:05:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-927182765",
      "id" : 927182765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843Q6-t",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-25T21:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927182765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3072149?v=4",
         "events_url" : "https://api.github.com/users/duncandean/events{/privacy}",
         "followers_url" : "https://api.github.com/users/duncandean/followers",
         "following_url" : "https://api.github.com/users/duncandean/following{/other_user}",
         "gists_url" : "https://api.github.com/users/duncandean/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/duncandean",
         "id" : 3072149,
         "login" : "duncandean",
         "node_id" : "MDQ6VXNlcjMwNzIxNDk=",
         "organizations_url" : "https://api.github.com/users/duncandean/orgs",
         "received_events_url" : "https://api.github.com/users/duncandean/received_events",
         "repos_url" : "https://api.github.com/users/duncandean/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/duncandean/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/duncandean/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/duncandean"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "A testing/experimental Bitcoin Core node is running (most of the time) at `[fcc7:be49:ccd1:dc91:3125:f0da:457d:8ce]:8333`.",
      "created_at" : "2021-09-27T07:27:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-927604654",
      "id" : 927604654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843Sh-u",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-27T07:27:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/927604654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718224439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718224439"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit 7b4005008bce3b2d77a4a40db7db7f6626170f87, do you want to keep this function name and parameter?",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-29T07:23:34Z",
      "diff_hunk" : "@@ -674,7 +674,7 @@ bool CNetAddr::GetInAddr(struct in_addr* pipv4Addr) const\n  */\n bool CNetAddr::GetIn6Addr(struct in6_addr* pipv6Addr) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718224439",
      "id" : 718224439,
      "line" : 675,
      "node_id" : "PRRC_kwDOABII584qzzw3",
      "original_commit_id" : "7b4005008bce3b2d77a4a40db7db7f6626170f87",
      "original_line" : 675,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 11,
      "pull_request_review_id" : 766293660,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-29T07:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718224439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718226944"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718226944"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit 3064e8b1474f955c2506711c57dfbf3b7af48686, how about the regular -reachable flag? What's the interaction here?",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-29T07:27:01Z",
      "diff_hunk" : "@@ -1258,6 +1259,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (!args.IsArgSet(\"-cjdnsreachable\")) {\n+        SetReachable(NET_CJDNS, false);\n+    }\n+    // Now IsReachable(NET_CJDNS) is true if:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718226944",
      "id" : 718226944,
      "line" : 1265,
      "node_id" : "PRRC_kwDOABII584qz0YA",
      "original_commit_id" : "3064e8b1474f955c2506711c57dfbf3b7af48686",
      "original_line" : 1265,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 15,
      "pull_request_review_id" : 766297035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-29T07:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718226944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718239268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718239268"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In commit ec2dc3915a8cb645afceb0a5a80b539a77e77a4b, \r\n\r\nNot sure I like this addr_ approach.\r\nDon't you think a caller should be aware of the transition to CJDNS?",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-29T07:43:18Z",
      "diff_hunk" : "@@ -229,9 +229,27 @@ std::optional<CAddress> GetLocalAddrForPeer(CNode *pnode)\n     return std::nullopt;\n }\n \n+/**\n+ * If an IPv6 address belongs to the address range used by the CJDNS network and\n+ * the CJDNS network is reachable (-cjdnsreachable config is set), then change\n+ * the type from NET_IPV6 to NET_CJDNS.\n+ * @param[in] service Address to convert.\n+ * @return either `addr` or `addr` with modified network.\n+ */\n+CService MaybeFlipIPv6toCJDNS(const CService& service)\n+{\n+    CService ret{service};\n+    if (ret.m_net == NET_IPV6 && ret.m_addr[0] == 0xfc && IsReachable(NET_CJDNS)) {\n+        ret.m_net = NET_CJDNS;\n+    }\n+    return ret;\n+}\n+\n // learn a new local address\n-bool AddLocal(const CService& addr, int nScore)\n+bool AddLocal(const CService& addr_, int nScore)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r718239268",
      "id" : 718239268,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584qz3Yk",
      "original_commit_id" : "ec2dc3915a8cb645afceb0a5a80b539a77e77a4b",
      "original_line" : 249,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 22,
      "pull_request_review_id" : 766313366,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-29T07:43:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/718239268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK baae5be7122056cd78fd66cd2ee4b6bd54cb8620 modulo questions above.\r\nI expect it to be implemented very similarly to Tor/I2P which are already manually tested, so it seems we aren't missing anything.\r\n\r\nI haven't run the code.",
      "created_at" : "2021-09-29T07:54:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-929930455",
      "id" : 929930455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843bZzX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-29T07:54:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/929930455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719390184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719390184"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The function semantics remain unchanged - it is still used to \"get `struct in6_addr`\", so I think it is ok to leave it as is.",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-30T13:11:37Z",
      "diff_hunk" : "@@ -674,7 +674,7 @@ bool CNetAddr::GetInAddr(struct in_addr* pipv4Addr) const\n  */\n bool CNetAddr::GetIn6Addr(struct in6_addr* pipv6Addr) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719390184",
      "id" : 719390184,
      "in_reply_to_id" : 718224439,
      "line" : 675,
      "node_id" : "PRRC_kwDOABII584q4QXo",
      "original_commit_id" : "7b4005008bce3b2d77a4a40db7db7f6626170f87",
      "original_line" : 675,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/netaddress.cpp",
      "position" : 11,
      "pull_request_review_id" : 767839250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719390184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T13:11:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719390184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719394173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719394173"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "By \"regular -reachable flag\" you mean `-onlynet=cjdns`? The interaction is that we can connect to CJDNS if `-cjdnsreachable` is given and CJDNS is not restricted by `-onlynet=`:\r\n```cpp\r\n    // 1. -cjdnsreachable is given and\r\n    // 2.1. -onlynet is not given or\r\n    // 2.2. -onlynet=cjdns is given\r\n```",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-30T13:15:45Z",
      "diff_hunk" : "@@ -1258,6 +1259,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (!args.IsArgSet(\"-cjdnsreachable\")) {\n+        SetReachable(NET_CJDNS, false);\n+    }\n+    // Now IsReachable(NET_CJDNS) is true if:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719394173",
      "id" : 719394173,
      "in_reply_to_id" : 718226944,
      "line" : 1265,
      "node_id" : "PRRC_kwDOABII584q4RV9",
      "original_commit_id" : "3064e8b1474f955c2506711c57dfbf3b7af48686",
      "original_line" : 1265,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 15,
      "pull_request_review_id" : 767844793,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719394173/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T13:15:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719394173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719416303"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719416303"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the callers of `AddLocal()` do not care that a passed `fc...` address may be interpreted as CJDNS instead of IPv6.\r\n\r\nActually, I started by doing the flip just before `AddLocal()` is called, but ended up with duplicated code all over the place in all callers of `AddLocal()` which prompted me to move that snippet inside `AddLocal()`.\r\n\r\nIdeally a CJDNS object should be returned by `LookupIntern()` which is the function which creates the `CNetAddr` objects, so they will not be created as IPv6 and later flipped to CJDNS. However `LookupIntern()` and `WrappedGetAddrInfo()` (which it uses) are defined in `netbase.cpp` and `IsReachable()` (needed to tell whether IPv6 or CJDNS should be created) is in `net.cpp` which would create a circular dependency. Hmm... maybe I should move `IsReachable()` to `netbase.cpp`?",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-09-30T13:38:48Z",
      "diff_hunk" : "@@ -229,9 +229,27 @@ std::optional<CAddress> GetLocalAddrForPeer(CNode *pnode)\n     return std::nullopt;\n }\n \n+/**\n+ * If an IPv6 address belongs to the address range used by the CJDNS network and\n+ * the CJDNS network is reachable (-cjdnsreachable config is set), then change\n+ * the type from NET_IPV6 to NET_CJDNS.\n+ * @param[in] service Address to convert.\n+ * @return either `addr` or `addr` with modified network.\n+ */\n+CService MaybeFlipIPv6toCJDNS(const CService& service)\n+{\n+    CService ret{service};\n+    if (ret.m_net == NET_IPV6 && ret.m_addr[0] == 0xfc && IsReachable(NET_CJDNS)) {\n+        ret.m_net = NET_CJDNS;\n+    }\n+    return ret;\n+}\n+\n // learn a new local address\n-bool AddLocal(const CService& addr, int nScore)\n+bool AddLocal(const CService& addr_, int nScore)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719416303",
      "id" : 719416303,
      "in_reply_to_id" : 718239268,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584q4Wvv",
      "original_commit_id" : "ec2dc3915a8cb645afceb0a5a80b539a77e77a4b",
      "original_line" : 249,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 22,
      "pull_request_review_id" : 767874856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719416303/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-30T13:38:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719416303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719989718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719989718"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Dismiss this comment, I was very confused.",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-10-01T06:59:39Z",
      "diff_hunk" : "@@ -1258,6 +1259,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (!args.IsArgSet(\"-cjdnsreachable\")) {\n+        SetReachable(NET_CJDNS, false);\n+    }\n+    // Now IsReachable(NET_CJDNS) is true if:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719989718",
      "id" : 719989718,
      "in_reply_to_id" : 718226944,
      "line" : 1265,
      "node_id" : "PRRC_kwDOABII584q6ivW",
      "original_commit_id" : "3064e8b1474f955c2506711c57dfbf3b7af48686",
      "original_line" : 1265,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 15,
      "pull_request_review_id" : 768621091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719989718/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T06:59:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719989718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719996912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719996912"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">Actually, I started by doing the flip just before AddLocal() is called, but ended up with duplicated code all over the place in all callers of AddLocal() which prompted me to move that snippet inside AddLocal().\r\n\r\nI think this is a good move, i was just wondering whether it's ok to do it quietly.\r\nImagine logging something like \"finished processing IPv6 addr\" after calling AddLocal, while it's not actually IPv6. \r\n\r\nI think since this is not really the case now, making a comment along AddrLocal might be sufficient to prevent the confusion.\r\n\r\n>Hmm... maybe I should move IsReachable() to netbase.cpp?\r\n\r\nPerhaps attempt that in a separate PR then?",
      "commit_id" : "baae5be7122056cd78fd66cd2ee4b6bd54cb8620",
      "created_at" : "2021-10-01T07:13:21Z",
      "diff_hunk" : "@@ -229,9 +229,27 @@ std::optional<CAddress> GetLocalAddrForPeer(CNode *pnode)\n     return std::nullopt;\n }\n \n+/**\n+ * If an IPv6 address belongs to the address range used by the CJDNS network and\n+ * the CJDNS network is reachable (-cjdnsreachable config is set), then change\n+ * the type from NET_IPV6 to NET_CJDNS.\n+ * @param[in] service Address to convert.\n+ * @return either `addr` or `addr` with modified network.\n+ */\n+CService MaybeFlipIPv6toCJDNS(const CService& service)\n+{\n+    CService ret{service};\n+    if (ret.m_net == NET_IPV6 && ret.m_addr[0] == 0xfc && IsReachable(NET_CJDNS)) {\n+        ret.m_net = NET_CJDNS;\n+    }\n+    return ret;\n+}\n+\n // learn a new local address\n-bool AddLocal(const CService& addr, int nScore)\n+bool AddLocal(const CService& addr_, int nScore)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#discussion_r719996912",
      "id" : 719996912,
      "in_reply_to_id" : 718239268,
      "line" : 249,
      "node_id" : "PRRC_kwDOABII584q6kfw",
      "original_commit_id" : "ec2dc3915a8cb645afceb0a5a80b539a77e77a4b",
      "original_line" : 249,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 22,
      "pull_request_review_id" : 768630691,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23077",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719996912/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-01T07:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/719996912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "How about simply requiring a \"`%cjdns`\" suffix on CJDNS addresses?",
      "created_at" : "2021-10-03T03:43:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23077#issuecomment-932856947",
      "id" : 932856947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23077",
      "node_id" : "IC_kwDOABII5843mkRz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932856947/reactions"
      },
      "updated_at" : "2021-10-03T03:43:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/932856947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
