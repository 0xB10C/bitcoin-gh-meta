[
   {
      "author_association" : "MEMBER",
      "body" : "CI failure seems completely unrelated (`feature_asmap` failure on a `Addrman` log line figuring `3` instead of `2`). Here is the log trace, \"just in case\".\r\n<details>\r\n<p>\r\n<summary>Random `feature_asmap` failure logs</summary>\r\n\r\n```\r\n2021-09-23T14:53:38.217000Z TestFramework (INFO): Initializing test directory /tmp/cirrus-ci-build/ci/scratch/test_runner/test_runner_â¿_ð_20210923_145026/feature_asmap_26\r\n2021-09-23T14:53:39.000000Z TestFramework (INFO): Test bitcoind with no -asmap arg passed\r\n2021-09-23T14:53:39.442000Z TestFramework (INFO): Test bitcoind -asmap=<absolute path>\r\n2021-09-23T14:53:40.286000Z TestFramework (INFO): Test bitcoind -asmap=<relative path>\r\n2021-09-23T14:53:40.859000Z TestFramework (INFO): Test bitcoind -asmap (using default map file)\r\n2021-09-23T14:53:41.404000Z TestFramework (INFO): Test bitcoind -asmap= (using default map file)\r\n2021-09-23T14:53:42.007000Z TestFramework (INFO): Test bitcoind -asmap restart with addrman containing new and tried entries\r\n2021-09-23T14:55:03.894000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.run_test()\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/feature_asmap.py\", line 124, in run_test\r\n    self.test_asmap_interaction_with_addrman_containing_entries()\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/feature_asmap.py\", line 96, in test_asmap_interaction_with_addrman_containing_entries\r\n    self.node.getnodeaddresses()  # getnodeaddresses re-runs the addrman checks\r\n  File \"/usr/lib/python3.6/contextlib.py\", line 88, in __exit__\r\n    next(self.gen)\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_node.py\", line 400, in assert_debug_log\r\n    self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\r\n  File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_node.py\", line 166, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] Expected messages \"['Addrman checks started: new 2, tried 2, total 4', 'Addrman checks completed successfully']\" does not partially match log:\r\n - 2021-09-23T14:53:43.886617Z [http] [httpserver.cpp:237] [http_request_cb] Received a POST request for / from 127.0.0.1:52652\r\n - 2021-09-23T14:53:43.886733Z [httpworker.3] [rpc/request.cpp:174] [parse] ThreadRPCServer method=getnodeaddresses user=__cookie__\r\n - 2021-09-23T14:53:43.886809Z [httpworker.3] [addrman.cpp:770] [ForceCheckAddrman] Addrman checks started: new 3, tried 1, total 4\r\n - 2021-09-23T14:53:43.886870Z [httpworker.3] [addrman.cpp:48] [GetTriedBucket] IP 101.0.0.0 mapped to AS1 belongs to tried bucket 113\r\n - 2021-09-23T14:53:43.886980Z [httpworker.3] [addrman.cpp:850] [ForceCheckAddrman] Addrman checks completed successfully\r\n - 2021-09-23T14:53:43.886991Z [httpworker.3] [addrman.cpp:770] [ForceCheckAddrman] Addrman checks started: new 3, tried 1, total 4\r\n - 2021-09-23T14:53:43.887016Z [httpworker.3] [addrman.cpp:48] [GetTriedBucket] IP 101.0.0.0 mapped to AS1 belongs to tried bucket 113\r\n - 2021-09-23T14:53:43.887102Z [httpworker.3] [addrman.cpp:850] [ForceCheckAddrman] Addrman checks completed successfully\r\n - 2021-09-23T14:54:28.662861Z [scheduler] [net.h:865] [StartExtraBlockRelayPeers] net: enabling extra block-relay-only peers\r\n - 2021-09-23T14:54:43.321822Z [scheduler] [random.cpp:523] [SeedPeriodic] Feeding 33048 bytes of dynamic environment data into RNG\r\n```\r\n</p>\r\n</details>",
      "created_at" : "2021-09-23T17:03:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-925995340",
      "id" : 925995340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843MZFM",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T17:03:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/925995340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23075](https://github.com/bitcoin/bitcoin/pull/23075) (refactoring: Fee estimation functional test cleanups by darosior)\n* [#22919](https://github.com/bitcoin/bitcoin/pull/22919) (fees: skip pointless fee parameter calculation during IBD by RohitRanjangit)\n* [#22722](https://github.com/bitcoin/bitcoin/pull/22722) (rpc: update estimatesmartfee to return max of CBlockPolicyEstimator::estimateSmartFee, mempoollMinFee and minRelayTxFee by pranabp-bit)\n* [#22567](https://github.com/bitcoin/bitcoin/pull/22567) (test: Implicitly sync after generate* to preempt races and intermittent test failures by MarcoFalke)\n* [#22014](https://github.com/bitcoin/bitcoin/pull/22014) (refactor: Make m_cs_fee_estimator non-recursive by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-09-23T22:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-926203885",
      "id" : 926203885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843NL_t",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-23T22:15:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926203885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK",
      "created_at" : "2021-09-24T03:11:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-926309437",
      "id" : 926309437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843Nlw9",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T03:11:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926309437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removed the commit asserting `blocksToConfirm > 0`, it would cause more issues with fuzzing targets than i want to deal with in this PR :)",
      "created_at" : "2021-09-24T09:58:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-926502098",
      "id" : 926502098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843OUzS",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T09:58:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926502098",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, planning to review but as I have very little background on the fee estimator it may take me a bit of time :)",
      "created_at" : "2021-09-24T14:01:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-926650119",
      "id" : 926650119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843O48H",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T14:01:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926650119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Unrelated CI error: Windows socket error (the use of UNIX-only `os.killpg` was just a symptom, not the cause)\r\n\r\n<details>\r\n\r\n```\r\n2021-09-24T10:29:15.111000Z TestFramework (ERROR): Unexpected exception caught during testing \r\n                                   Traceback (most recent call last):\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\feature_taproot.py\", line 1465, in run_test\r\n                                       self.test_spenders(self.nodes[1], spenders_taproot_active(), input_counts=[1, 2, 2, 2, 2, 3])\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\feature_taproot.py\", line 1451, in test_spenders\r\n                                       self.block_submit(node, [tx], msg, witness=True, accept=fail_input is None, cb_pubkey=cb_pubkey, fees=fee, sigops_weight=sigops_weight, err_msg=expected_fail_msg)\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\feature_taproot.py\", line 1244, in block_submit\r\n                                       block_response = node.submitblock(block.serialize().hex())\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\coverage.py\", line 49, in __call__\r\n                                       return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\authproxy.py\", line 144, in __call__\r\n                                       response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                                     File \"C:\\Users\\ContainerAdministrator\\AppData\\Local\\Temp\\cirrus-ci-build\\test\\functional\\test_framework\\authproxy.py\", line 107, in _request\r\n                                       self.__conn.request(method, path, postdata, headers)\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 1257, in request\r\n                                       self._send_request(method, url, body, headers, encode_chunked)\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 1303, in _send_request\r\n                                       self.endheaders(body, encode_chunked=encode_chunked)\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 1252, in endheaders\r\n                                       self._send_output(message_body, encode_chunked=encode_chunked)\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 1012, in _send_output\r\n                                       self.send(msg)\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 952, in send\r\n                                       self.connect()\r\n                                     File \"C:\\Python39\\lib\\http\\client.py\", line 923, in connect\r\n                                       self.sock = self._create_connection(\r\n                                     File \"C:\\Python39\\lib\\socket.py\", line 843, in create_connection\r\n                                       raise err\r\n                                     File \"C:\\Python39\\lib\\socket.py\", line 831, in create_connection\r\n                                       sock.connect(sa)\r\n                                   OSError: [WinError 10048] Only one usage of each socket address (protocol/network address/port) is normally permitted\r\n```\r\n",
      "created_at" : "2021-09-24T15:54:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23074#issuecomment-926737249",
      "id" : 926737249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23074",
      "node_id" : "IC_kwDOABII5843PONh",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-24T15:54:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/926737249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
