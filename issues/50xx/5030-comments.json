[
   {
      "body" : "This has to do with the order in which tests are executed.\r\n\r\n`blockv2_tests.cpp` leaves the block chain in a unspecified state, which causes the miner tests to fail.\r\n\r\nI'm going to split this up into two commits: one that introduces the UNITTEST framework and modifyiable parameters, and one that adds the block v2 test.\r\n",
      "created_at" : "2014-10-02T11:45:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57616174",
      "id" : 57616174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T11:48:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57616174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This should pass now.\r\n",
      "created_at" : "2014-10-02T11:55:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57616999",
      "id" : 57616999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T11:55:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57616999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@SergioDemianLerner  I've split off this part that adds the blockv2 tests: https://github.com/laanwj/bitcoin/commit/782f6c8758ea25dcc93989e8631ba4f34b5ae09e\r\nIt needs some more work to leave the block chain in a usable state for the next test, or to create a new block chain for each test. This already hinted in the comments\r\n```c++\r\n// We don't know the state of the block-chain here: it depends on which other tests are run before this test.\r\n// See https://github.com/bitcoin/bitcoin/pull/4688 for a patch that allows the re-creation of the block-chain\r\n// for each testcase that requires it.\r\n```",
      "created_at" : "2014-10-02T11:57:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57618825",
      "id" : 57618825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T11:57:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57618825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The problem is not that the blockv2_test leaves the blockchain in a bad state. The problem is the the miner_test MUST be executed before blockv2_test because miner_tests tests v1 blocks and blockv2_test tests v2 blocks.\r\nIf the Boost test framework does not allow to specify a unique order for the tests, one way to force this is to include blockv2_test into miner_test via #include, and let both of them be contained in a single .cpp file",
      "created_at" : "2014-10-02T14:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57634789",
      "id" : 57634789,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T14:09:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57634789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Definitively, the easiest way would be that each new test that mines blocks adds an #include line into miner_test.cpp\r\n@laanwj : I suppose I don't have write access to the rebased repo. Could you add the #include \"blockv2_test.cpp\" into the last line of miner_test.cpp and create a new pull request for that?",
      "created_at" : "2014-10-02T14:14:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57635597",
      "id" : 57635597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T14:14:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57635597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "I don't really like tests that are dependent on order, or hacking around that; let's try to do it properly. What we really need is #4688.\r\n\r\nI can't give you write access to my branch, but if you want to edit the branch you could pull my branch and start from there.",
      "created_at" : "2014-10-02T14:59:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57642598",
      "id" : 57642598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T15:02:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57642598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yes I agree, but I'm also more pragmatic and not so purist: why not allowing both? \r\nSome future tests could be dependent on the order and some not. The overhead of recreating the block-chain is low, but we could avoid it in some cases. Other reason to let people add block test cases to a single file is that test cases involving transactions require pre-mined coinbases. If each test must recreate the block-chain, it must start with mining 100 blocks in order to have 50 BTC mature.\r\n\r\nAs an example, most of the block tests in TheBlueMatt FullBlockTestGenerator.java are independent of order. (off-topic: nevertheless they are painfully linked together with references to previous blocks: Block b47 = createNextBlock(b46, ....), this can be avoided by an internal reference of the last tip)\r\n\r\nSo we could create a single empty file \"block_tests.cpp\" where people can easily add tests by including their own files using #include at the end, and at the same time, for the tests that require a new block-chain, people put them in separate files, and they clear the block-chain before each test using #4688 \r\n",
      "created_at" : "2014-10-02T15:35:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57648721",
      "id" : 57648721,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T15:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57648721",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "If somebody were to re-write each test case of FullBlockTestGenerator.java as an independent .cpp file, the block-chain would need to be re-created 40 times in each test_bitcoin execution.",
      "created_at" : "2014-10-02T15:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57649341",
      "id" : 57649341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T15:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57649341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "If some starting point is convenient to be used by multiple tests (like \"100 blocks in order to have 50 BTC mature\") it makes sense to compute that once and cache it. \r\n\r\nI still don't see a good reason to make tests use each other's output. Then it becomes impossible to disable tests without affecting others. I think we've all worked with hairballs like that, so I'd prefer to avoid it. They are called 'unit tests' for a good reason.\r\n\r\nThe whole reason for merging this (and allowing the skip proof-of-work) was to make building blockchains extremely cheap, so unless the overhead becomes serious I'd prefer to just start from scratch for each test. But if necessary I'd prefer caching/precomputation to letting one test use the output of another.\r\n",
      "created_at" : "2014-10-02T19:07:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57689126",
      "id" : 57689126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T19:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57689126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@SergioDemianLerner Please don't confuse the unit tests (in .cpp code) and the network interaction tests (in comparison tool). The purpose of the first is to test whether the code behaves as the implementer intends it to work. The purpose of the second is to detect consensus and other cross-implementation compatibility.\r\n\r\nI would be strongly opposed to converting comparison tool into a unit test. It means that for example a change in serialization code keeps bitcoind compatible with itself, but not with other nodes on the network (including older versions of bitcoind).\r\n\r\nI am in favor of replacing comparison tool with a more general framework (using no Bitcoin core code), preferably in a different language, that replays scenarios of network interactions, and verifies that state running bitcoind (or other code) behaves as expected. See #4545.",
      "created_at" : "2014-10-02T19:30:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57692209",
      "id" : 57692209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-02T19:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57692209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I don't say we should replace the comparison tool, since it has been very useful. It was an example of how the number of tests could grow. But some unit test can test things that are hidden from the remote nodes. I made bitcoind stress unit tests that check RAM and CPU usage, and I'm waiting to merge them when we resolve how.",
      "created_at" : "2014-10-03T13:36:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57796914",
      "id" : 57796914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-03T13:36:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57796914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Ok, good. I misinterpreted your comment it seems.",
      "created_at" : "2014-10-03T15:23:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-57811010",
      "id" : 57811010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-03T15:23:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57811010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "This has been merged! I hadn't notice. Great! Thanks!",
      "created_at" : "2014-10-06T12:19:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-58008884",
      "id" : 58008884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-06T12:19:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58008884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "In bitcoinj we have a large number of unit tests that create block chains and throw them away. Actually a full test run of bitcoinj runs ~5000 unit tests, although not all of those require block chains. So there's no reason to be scared of creating and throwing away chains - they are after all just in memory data structures and a UNITTEST params chain can have blocks mined more or less instantly.\r\n\r\nThe problem here is not performance or how to split things up, it's that Satoshi didn't write testable code in the first place. Lots of global variables everywhere instead of objects. Not much we can do about that except refactor it into a testable state very, very carefully.",
      "created_at" : "2014-10-08T10:34:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5030#issuecomment-58339029",
      "id" : 58339029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5030",
      "updated_at" : "2014-10-08T10:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58339029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   }
]
