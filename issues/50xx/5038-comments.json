[
   {
      "body" : "ACK in principle. As you said on IRC, I'd like to have travis testing for this. Shouldn't be too hard to spawn in a new shell and export a few things as needed.\r\n\r\nOne request though.. please split into 3 commits: build/tests/gitian, that way we can backport more easily if needed.",
      "created_at" : "2014-10-03T20:24:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57854336",
      "id" : 57854336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-03T20:24:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57854336",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "Split",
      "created_at" : "2014-10-03T22:38:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57872168",
      "id" : 57872168,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-03T22:38:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57872168",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr Please see #5040 and grab the commit from there if you agree with it (I'll close that PR).\r\n\r\nIf that is green, ACK.",
      "created_at" : "2014-10-03T23:25:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57880004",
      "id" : 57880004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-03T23:25:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/57880004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "In case it's non-obvious to anyone reading after-the-fact:\r\n\r\nThis PR adds fixes for shell-scripts that needlessly used bashisms. There was previously no test for these. #5040 introduced a test, and the build failed as expected. This PR fixes the scripts and adds the test from #5040. The fact that it's green means that they're confirmed fixed.\r\n\r\nACK.",
      "created_at" : "2014-10-06T22:37:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58111210",
      "id" : 58111210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-06T22:37:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58111210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "utACK.",
      "created_at" : "2014-10-07T00:31:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58120986",
      "id" : 58120986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-07T00:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58120986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Not meaning to depreciate this pull, but is there really no modern non-bash alternative to uglyness like\r\n\r\n    if test x$use_pkgconfig = x; then\r\n\r\nI remember, from maybe 20 years ago, that constructions like that were used for compatibility with some shell from the 80's. Hasn't really anything changed on that front?\r\n",
      "created_at" : "2014-10-07T06:42:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143526",
      "id" : 58143526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-07T06:42:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58143526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I'm pretty sure\r\n```sh\r\nif test \"$use_pkgconfig\" = \"\"; then\r\n```\r\nis fine in most shells, but when the *entire* purpose of a configure script is portability, it makes sense to use the most portable code.",
      "created_at" : "2014-10-07T06:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143637",
      "id" : 58143637,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-07T06:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58143637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "It's just so stupid to have to add a dummy string to do a *string comparison*, as if it's some amazing new thing. In other places we also have limits on how far we go back with regard to compatibility.\r\n\r\nAnyhow, I was just asking. For anything worthwhile (that is actually meant to be reviewed) we should be using Python, not shellscript.\r\n\r\nutACK.",
      "created_at" : "2014-10-07T06:48:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143873",
      "id" : 58143873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-07T06:48:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58143873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Um, why did we make the changes within the gitian build scripts? Those, by definition, run on Ubuntu 12.04, and with bash, unless I'm missing something. I just checked gitian's source, and the build script has a hard-coded `#!/bin/bash`, as well as the fact that the actual command run is `on-target setarch #{@arches[arch]} bash -x < var/build-script > var/build.log 2>&1`",
      "created_at" : "2014-10-08T09:20:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58331286",
      "id" : 58331286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-08T09:22:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58331286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2559390?v=3",
         "events_url" : "https://api.github.com/users/Michagogo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Michagogo/followers",
         "following_url" : "https://api.github.com/users/Michagogo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Michagogo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Michagogo",
         "id" : 2559390,
         "login" : "Michagogo",
         "organizations_url" : "https://api.github.com/users/Michagogo/orgs",
         "received_events_url" : "https://api.github.com/users/Michagogo/received_events",
         "repos_url" : "https://api.github.com/users/Michagogo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Michagogo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Michagogo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Michagogo"
      }
   },
   {
      "body" : "Better to use standards?",
      "created_at" : "2014-10-08T09:27:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58331986",
      "id" : 58331986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-08T09:27:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58331986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "It just seems weird to me to make it ugly in the name of compatibility/reducing bashisms, in a script that will only ever be run by bash.",
      "created_at" : "2014-10-08T09:29:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58332212",
      "id" : 58332212,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-08T09:29:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58332212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2559390?v=3",
         "events_url" : "https://api.github.com/users/Michagogo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Michagogo/followers",
         "following_url" : "https://api.github.com/users/Michagogo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Michagogo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Michagogo",
         "id" : 2559390,
         "login" : "Michagogo",
         "organizations_url" : "https://api.github.com/users/Michagogo/orgs",
         "received_events_url" : "https://api.github.com/users/Michagogo/received_events",
         "repos_url" : "https://api.github.com/users/Michagogo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Michagogo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Michagogo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Michagogo"
      }
   },
   {
      "body" : "@Michagogo Agreed. Wouldn't have been needed for the gitian descriptors as it forces bash. It's just the basic build system that needs to be compatible between shells. @theuni We could revert this with #4727, which completely overhauls the gitian descriptors anyway.",
      "created_at" : "2014-10-08T09:44:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58333796",
      "id" : 58333796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-08T09:44:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58333796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yea, all of the above is fine by me. I didn't argue it because they should be obsoleted soon anyway, as you said.",
      "created_at" : "2014-10-08T19:03:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58409629",
      "id" : 58409629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5038",
      "updated_at" : "2014-10-08T19:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/58409629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
