{
   "assignee" : null,
   "body" : "WARNING: This is a work in progress, and I haven't actually tried mining with it yet.\r\n\r\nNOTE: This includes a commit which changes the default block priority size to 0.  This code has been optimized for not including transactions in a priority space.  If block priority space > 0 then the code does not offer too much of a performance improvement over the existing code. (EDIT: now its fast regardless)\r\n\r\nThe mempool is explicitly assumed to be responsible for maintaining consistency of transactions with respect to not spending non-existent outputs, not double spending, script validity and coinbase maturity.  Only finality of transactions is checked before assembling a block.\r\n\r\nA final call to TestBlockValidity is still performed.  If an invalid block has been constructed, then an error is logged and a NULL pointer is returned.\r\n\r\nThis code produces the same blocks as the code it replaces with the following exceptions:\r\n- The fee rate sort tie breaker is hash instead of priority\r\n- The priority sort has a secondary tie breaker of hash\r\n- The priority block is not limited to transactons above AllowFree()\r\n- The fee rate sorted part of the block is not limited to transactions above minRelayTxFee\r\n\r\nComparing this to the original code over 2000 calls to CreateNewBlock over the last 2 days.\r\n(blockprioritysize=0, maxmempool=300, dbcache=1000, maxsigcachesize=1000000)\r\nTime in ms\r\n\r\n | Time to assemble block | Additional time to perform final TestBlockValidity\r\n---------------- | ------------------------------- | ----------------\r\nmaster | 2602 | 240\r\nthis pull | 14 | 438\r\n\r\nThe extra slowness in TestBlockValidity is because the cache used to be warmed up in the assembly code.\r\n\r\n\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6898/comments",
   "created_at" : "2015-10-28T20:58:09Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6898/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898",
   "id" : 113920496,
   "labels" : [
      {
         "color" : "c7def8",
         "name" : "Mining",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6898/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 8,
      "created_at" : "2015-05-01T12:31:35Z",
      "creator" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestones/0.12.0",
      "id" : 1092458,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/19/labels",
      "number" : 19,
      "open_issues" : 12,
      "state" : "open",
      "title" : "0.12.0",
      "updated_at" : "2015-11-05T22:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/19"
   },
   "number" : 6898,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/6898.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/6898.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
   },
   "state" : "open",
   "title" : "[WIP] Rewrite CreateNewBlock",
   "updated_at" : "2015-11-05T20:08:15Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6898",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
      "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
      "followers_url" : "https://api.github.com/users/morcos/followers",
      "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/morcos",
      "id" : 4360349,
      "login" : "morcos",
      "organizations_url" : "https://api.github.com/users/morcos/orgs",
      "received_events_url" : "https://api.github.com/users/morcos/received_events",
      "repos_url" : "https://api.github.com/users/morcos/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/morcos"
   }
}
