[
   {
      "body" : "https://github.com/bitcoin/bitcoin/pull/6872",
      "created_at" : "2015-10-23T06:42:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6876#issuecomment-150489970",
      "id" : 150489970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6876",
      "updated_at" : "2015-10-23T06:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/150489970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "#6872 is likely unrelated. The issue seems to be something stemming from getblocktemplate-related memory usage.",
      "created_at" : "2015-10-23T09:22:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6876#issuecomment-150525984",
      "id" : 150525984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6876",
      "updated_at" : "2015-10-23T09:22:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/150525984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Has anyone tried the Qt version to see if it has the same problem? \r\n\r\nAnd BTW, are the release versions (of the daemon & Qt) compiled in debug mode?\r\n\r\nLast question: can a unit test be cobbled up to test for this memory issue?\r\n\r\nRon",
      "created_at" : "2015-10-23T14:04:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6876#issuecomment-150581313",
      "id" : 150581313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6876",
      "updated_at" : "2015-10-23T14:04:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/150581313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5530763?v=3",
         "events_url" : "https://api.github.com/users/older-c-coder/events{/privacy}",
         "followers_url" : "https://api.github.com/users/older-c-coder/followers",
         "following_url" : "https://api.github.com/users/older-c-coder/following{/other_user}",
         "gists_url" : "https://api.github.com/users/older-c-coder/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/older-c-coder",
         "id" : 5530763,
         "login" : "older-c-coder",
         "organizations_url" : "https://api.github.com/users/older-c-coder/orgs",
         "received_events_url" : "https://api.github.com/users/older-c-coder/received_events",
         "repos_url" : "https://api.github.com/users/older-c-coder/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/older-c-coder/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/older-c-coder/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/older-c-coder"
      }
   },
   {
      "body" : "#6872 may be related. CreateNewBlock() makes fairly extensive use of CCoinsViewCache. I ran a short (4 hour) test with valgrind --tool=massif, and CCoinsViewCache came up as using a lot of memory. A much longer test run is needed for this apparent memory leak issue to show up clearly. I'm about 24 hours into what I plan to be a 40- or 50-hour massif test. I'll post those results when I have them. It might take even longer than 50 hours for massif to get good results. it's taking 30 seconds for valgrind bitcoind to get through a getblocktemplate call, rather than the usual <= 1 sec. I don't know if the leak is related simply to the number of times GBT is called, or if it depends on the uniqueness of the mempool each time GBT is called.\r\n\r\n@older-c-coder I have not tested with Qt. A unit test would likely be difficult to write, since the issue is only apparent in terms of RSS usage after calling GBT frequently for around 24 hours. It's possible that this process might be accelerated (e.g. create a fake mempool from block X, run GBT/CNB, X++;, etc). Even then, such a test is likely to take a while, and we don't yet know if that approach will work at triggering the leak. ",
      "created_at" : "2015-10-23T20:09:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6876#issuecomment-150677677",
      "id" : 150677677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6876",
      "updated_at" : "2015-10-23T20:09:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/150677677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11898859?v=3",
         "events_url" : "https://api.github.com/users/jtoomim/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtoomim/followers",
         "following_url" : "https://api.github.com/users/jtoomim/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtoomim/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtoomim",
         "id" : 11898859,
         "login" : "jtoomim",
         "organizations_url" : "https://api.github.com/users/jtoomim/orgs",
         "received_events_url" : "https://api.github.com/users/jtoomim/received_events",
         "repos_url" : "https://api.github.com/users/jtoomim/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtoomim/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtoomim/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtoomim"
      }
   }
]
