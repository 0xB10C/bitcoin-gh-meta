[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43574695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43574695"
         }
      },
      "body" : "NACK defaulting nSigOps to 0 when we depend on it being accurate.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-10-31T18:30:00Z",
      "diff_hunk" : "@@ -78,7 +80,8 @@ class CTxMemPoolEntry\n \n public:\n     CTxMemPoolEntry(const CTransaction& _tx, const CAmount& _nFee,\n-                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false);\n+                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false,\n+                    unsigned int nSigOps = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43574695",
      "id" : 43574695,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 15,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43574695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43574702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43574702"
         }
      },
      "body" : "Why change exception to returning NULL here? IMO this should be an independent PR.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-10-31T18:30:55Z",
      "diff_hunk" : "@@ -351,8 +296,10 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         pblocktemplate->vTxSigOps[0] = GetLegacySigOpCount(pblock->vtx[0]);\n \n         CValidationState state;\n-        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false))\n-            throw std::runtime_error(\"CreateNewBlock(): TestBlockValidity failed\");\n+        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false)) {\n+            LogPrintf(\"ERROR: CNB TestBlockValidity failed: %s\\n\",FormatStateMessage(state));\n+            return NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43574702",
      "id" : 43574702,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 378,
      "path" : "src/miner.cpp",
      "position" : 365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43574702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43577964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43577964"
         }
      },
      "body" : "ok i agree, it makes more sense to default it high.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-11-01T01:22:16Z",
      "diff_hunk" : "@@ -78,7 +80,8 @@ class CTxMemPoolEntry\n \n public:\n     CTxMemPoolEntry(const CTransaction& _tx, const CAmount& _nFee,\n-                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false);\n+                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false,\n+                    unsigned int nSigOps = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43577964",
      "id" : 43577964,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 15,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43577964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43578050"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43578050"
         }
      },
      "body" : "It does not make sense to default it period. Note the exact sigop count is part of the GBT response.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-11-01T01:38:28Z",
      "diff_hunk" : "@@ -78,7 +80,8 @@ class CTxMemPoolEntry\n \n public:\n     CTxMemPoolEntry(const CTransaction& _tx, const CAmount& _nFee,\n-                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false);\n+                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false,\n+                    unsigned int nSigOps = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43578050",
      "id" : 43578050,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 15,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43578050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43768315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43768315"
         }
      },
      "body" : "OK agreed.  The default is just for the tests, I think for now it makes sense to remove all defaults from the constructor and just make the tests fill them in.  Unfortunately there are 2 other pulls open which also add arguments to the constructor and require changing the tests.  I'm going to hold off updating the tests in this pull until we're a bit closer assuming those might be merged first.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-11-03T16:16:02Z",
      "diff_hunk" : "@@ -78,7 +80,8 @@ class CTxMemPoolEntry\n \n public:\n     CTxMemPoolEntry(const CTransaction& _tx, const CAmount& _nFee,\n-                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false);\n+                    int64_t _nTime, double _dPriority, unsigned int _nHeight, bool poolHasNoInputsOf = false,\n+                    unsigned int nSigOps = 0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43768315",
      "id" : 43768315,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 15,
      "path" : "src/txmempool.h",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43768315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43768487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43768487"
         }
      },
      "body" : "The idea was this is now more likely to happen, and it seemed to meet that the JSON error from GetBlockTemplate would still be sufficient notification, and it would be better to not bring the node down.  However, I'm happy to leave the existing behavior if people think crashing the node is the right outcome.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-11-03T16:17:28Z",
      "diff_hunk" : "@@ -351,8 +296,10 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         pblocktemplate->vTxSigOps[0] = GetLegacySigOpCount(pblock->vtx[0]);\n \n         CValidationState state;\n-        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false))\n-            throw std::runtime_error(\"CreateNewBlock(): TestBlockValidity failed\");\n+        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false)) {\n+            LogPrintf(\"ERROR: CNB TestBlockValidity failed: %s\\n\",FormatStateMessage(state));\n+            return NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43768487",
      "id" : 43768487,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 378,
      "path" : "src/miner.cpp",
      "position" : 365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43768487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "OK, this has been rewritten to use `CTxMemPoolEntry::GetPriority` for the priority sort.\r\nThis will make it very fast even when maintaining a priority space in the block.  So the commit changing the default blockprioritysize has been removed.  \r\n\r\nOf course until #6357 is merged or some other decision is taken regarding priority, it will not sort by an accurate measure of priority.",
      "created_at" : "2015-11-03T16:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#issuecomment-153405578",
      "id" : 153405578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6898",
      "updated_at" : "2015-11-03T16:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/153405578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43779373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43779373"
         }
      },
      "body" : "Exceptions here should not crash the node... it just gets returned as a nicer JSON-RPC error.",
      "commit_id" : "37d224fe8d708611170bc0bd85f68d5b55b31e1c",
      "created_at" : "2015-11-03T17:33:24Z",
      "diff_hunk" : "@@ -351,8 +296,10 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n         pblocktemplate->vTxSigOps[0] = GetLegacySigOpCount(pblock->vtx[0]);\n \n         CValidationState state;\n-        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false))\n-            throw std::runtime_error(\"CreateNewBlock(): TestBlockValidity failed\");\n+        if (!TestBlockValidity(state, *pblock, pindexPrev, false, false)) {\n+            LogPrintf(\"ERROR: CNB TestBlockValidity failed: %s\\n\",FormatStateMessage(state));\n+            return NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6898#discussion_r43779373",
      "id" : 43779373,
      "original_commit_id" : "8f84ec4230a6845dc42f0c1b388074bd6cc38085",
      "original_position" : 378,
      "path" : "src/miner.cpp",
      "position" : 365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6898",
      "updated_at" : "2015-11-03T20:55:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/43779373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
