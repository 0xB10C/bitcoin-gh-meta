[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552827453"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552827453"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps should strprintf the 20 from the constant",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:19:26Z",
      "diff_hunk" : "@@ -185,16 +185,12 @@ CTxDestination AddAndGetMultisigDestination(const int required, const std::vecto\n     if ((int)pubkeys.size() < required) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"not enough keys supplied (got %u keys, but need at least %d to redeem)\", pubkeys.size(), required));\n     }\n-    if (pubkeys.size() > 16) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Number of keys involved in the multisignature address creation > 16\\nReduce the number\");\n+    if (pubkeys.size() > MAX_PUBKEYS_PER_MULTISIG) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Number of keys involved in the multisignature address creation > 20\\nReduce the number\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552827453",
      "id" : 552827453,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgyNzQ1Mw==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 189,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 562894781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552827453",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552827783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552827783"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Shouldn't this be `OutputType::P2SH_SEGWIT`?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:19:48Z",
      "diff_hunk" : "@@ -203,6 +199,10 @@ CTxDestination AddAndGetMultisigDestination(const int required, const std::vecto\n         }\n     }\n \n+    if (type == OutputType::LEGACY && script_out.size() > MAX_SCRIPT_ELEMENT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552827783",
      "id" : 552827783,
      "line" : 202,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgyNzc4Mw==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 202,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 23,
      "pull_request_review_id" : 562894781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552827783",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552828882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552828882"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please use `%d` or `%s` here.\r\n\r\n`%i` is explicitly locale-involved, which we don't want in RPC.",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:21:04Z",
      "diff_hunk" : "@@ -897,8 +897,8 @@ std::unique_ptr<DescriptorImpl> ParseScript(uint32_t key_exp_index, Span<const c\n             providers.emplace_back(std::move(pk));\n             key_exp_index++;\n         }\n-        if (providers.empty() || providers.size() > 16) {\n-            error = strprintf(\"Cannot have %u keys in multisig; must have between 1 and 16 keys, inclusive\", providers.size());\n+        if (providers.empty() || providers.size() > MAX_PUBKEYS_PER_MULTISIG) {\n+            error = strprintf(\"Cannot have %u keys in multisig; must have between 1 and %i keys, inclusive\", providers.size(), MAX_PUBKEYS_PER_MULTISIG);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552828882",
      "id" : 552828882,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgyODg4Mg==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 901,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 562894781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552828882",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552830925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552830925"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`IsValidMultisigKeyCount`?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:23:15Z",
      "diff_hunk" : "@@ -89,21 +89,49 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidKeysNumber(unsigned int n_keys)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552830925",
      "id" : 552830925,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgzMDkyNQ==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 93,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 562894781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552830925",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552835752"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552835752"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This wants to be a function of its own I think :)",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:28:09Z",
      "diff_hunk" : "@@ -89,21 +89,49 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidKeysNumber(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (IsSmallInteger(opcode)) {\n+        required = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            required = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552835752",
      "id" : 552835752,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjgzNTc1Mg==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 108,
      "original_position" : 30,
      "original_start_line" : 107,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 562894781,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552835752",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552863718"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552863718"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No, the limit only applies to raw P2SH not to embedded witness programs",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T17:58:53Z",
      "diff_hunk" : "@@ -203,6 +199,10 @@ CTxDestination AddAndGetMultisigDestination(const int required, const std::vecto\n         }\n     }\n \n+    if (type == OutputType::LEGACY && script_out.size() > MAX_SCRIPT_ELEMENT_SIZE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552863718",
      "id" : 552863718,
      "in_reply_to_id" : 552827783,
      "line" : 202,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjg2MzcxOA==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 202,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : 23,
      "pull_request_review_id" : 562923595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552863718",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19651 (wallet: importdescriptors update existing by S3RK)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-01-06T18:56:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#issuecomment-755517668",
      "id" : 755517668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20867",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NTUxNzY2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-06T18:56:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/755517668",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903597"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yep :) Done",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T18:57:20Z",
      "diff_hunk" : "@@ -89,21 +89,49 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidKeysNumber(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data)) return false;\n+    if (IsSmallInteger(opcode)) {\n+        required = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            required = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903597",
      "id" : 552903597,
      "in_reply_to_id" : 552835752,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwMzU5Nw==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 108,
      "original_position" : 30,
      "original_start_line" : 107,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 562963222,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903597",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903645"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903645"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T18:57:26Z",
      "diff_hunk" : "@@ -897,8 +897,8 @@ std::unique_ptr<DescriptorImpl> ParseScript(uint32_t key_exp_index, Span<const c\n             providers.emplace_back(std::move(pk));\n             key_exp_index++;\n         }\n-        if (providers.empty() || providers.size() > 16) {\n-            error = strprintf(\"Cannot have %u keys in multisig; must have between 1 and 16 keys, inclusive\", providers.size());\n+        if (providers.empty() || providers.size() > MAX_PUBKEYS_PER_MULTISIG) {\n+            error = strprintf(\"Cannot have %u keys in multisig; must have between 1 and %i keys, inclusive\", providers.size(), MAX_PUBKEYS_PER_MULTISIG);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903645",
      "id" : 552903645,
      "in_reply_to_id" : 552828882,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwMzY0NQ==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 901,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/script/descriptor.cpp",
      "position" : null,
      "pull_request_review_id" : 562963297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903645",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903741"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T18:57:36Z",
      "diff_hunk" : "@@ -185,16 +185,12 @@ CTxDestination AddAndGetMultisigDestination(const int required, const std::vecto\n     if ((int)pubkeys.size() < required) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"not enough keys supplied (got %u keys, but need at least %d to redeem)\", pubkeys.size(), required));\n     }\n-    if (pubkeys.size() > 16) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Number of keys involved in the multisignature address creation > 16\\nReduce the number\");\n+    if (pubkeys.size() > MAX_PUBKEYS_PER_MULTISIG) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Number of keys involved in the multisignature address creation > 20\\nReduce the number\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552903741",
      "id" : 552903741,
      "in_reply_to_id" : 552827453,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkwMzc0MQ==",
      "original_commit_id" : "97198085ae74e3a799ae8a6dbe69fb355abcc256",
      "original_line" : 189,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 562963431,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552903741",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552970485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552970485"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What are your thoughts on just doing: `return IsValidMultisigKeyCount(count);` here?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:30:27Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552970485",
      "id" : 552970485,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3MDQ4NQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 109,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563048973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552970485",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552971271"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552971271"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It seems the params `script` and `it` aren't used?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:32:26Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552971271",
      "id" : 552971271,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3MTI3MQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 98,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563049981,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552971271",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552972728"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552972728"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this necessary? Seems you already `return false` on this condition at L123?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:36:06Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;\n+\n+    return true;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(script, it, required, opcode, data)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!IsSmallInteger(opcode)) return false;\n-    unsigned int keys = CScript::DecodeOP_N(opcode);\n+    if (!GetMultisigKeyCount(script, it, keys, opcode, data)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552972728",
      "id" : 552972728,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3MjcyOA==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 127,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563051768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552972728",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552973161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552973161"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Does this change behavior, and if so is it intended? bc of the `else` condition https://github.com/bitcoin/bitcoin/pull/20867/files#diff-a1732fc4dc1526b294a41db3f2d3d5e863ec76e68ee3f73449618551f7a469ebR102 I would think `!GetMultisigKeyCount` evaluates differently than the original `!IsSmallInteger(opcode)`",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:37:03Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;\n+\n+    return true;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(script, it, required, opcode, data)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552973161",
      "id" : 552973161,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3MzE2MQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 123,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563052291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552973161",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552973679"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552973679"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why does this change (and L342) belong in this PR?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:38:26Z",
      "diff_hunk" : "@@ -312,10 +336,11 @@ CScript GetScriptForMultisig(int nRequired, const std::vector<CPubKey>& keys)\n {\n     CScript script;\n \n-    script << CScript::EncodeOP_N(nRequired);\n+    script << nRequired;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552973679",
      "id" : 552973679,
      "line" : 338,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3MzY3OQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 338,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : 66,
      "pull_request_review_id" : 563052937,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552973679",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552974494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552974494"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Arg they were part of a (incorrect) previous version, good catch!",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:40:49Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552974494",
      "id" : 552974494,
      "in_reply_to_id" : 552971271,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3NDQ5NA==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 98,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563054083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552974494",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552975213"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552975213"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It does, that's actually the feature implemented in this PR: handle up to 20 keys (therefore we need to handle not only small integers (<=16) but also pushed ones).",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:42:37Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;\n+\n+    return true;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(script, it, required, opcode, data)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552975213",
      "id" : 552975213,
      "in_reply_to_id" : 552973161,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3NTIxMw==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 123,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563054992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552975213",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552975511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552975511"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, it's cleaner :) Done",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:43:24Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552975511",
      "id" : 552975511,
      "in_reply_to_id" : 552970485,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3NTUxMQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 109,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563055378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552975511",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552976060"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552976060"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "On L123 i get the count of the required number of keys (the `M` of the `M of N`) and here the total number of keys (the `N` of the `M of N`)",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:44:52Z",
      "diff_hunk" : "@@ -89,21 +89,45 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(const CScript& script, CScript::const_iterator& it, unsigned int& count, opcodetype opcode, valtype data)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {\n+        try {\n+            count = CScriptNum(data, true).getint();\n+        } catch (const scriptnum_error&) {\n+            return false;\n+        }\n+    }\n+    if (!IsValidMultisigKeyCount(count)) return false;\n+\n+    return true;\n+}\n+\n static bool MatchMultisig(const CScript& script, unsigned int& required, std::vector<valtype>& pubkeys)\n {\n     opcodetype opcode;\n     valtype data;\n+    unsigned int keys;\n+\n     CScript::const_iterator it = script.begin();\n     if (script.size() < 1 || script.back() != OP_CHECKMULTISIG) return false;\n \n-    if (!script.GetOp(it, opcode, data) || !IsSmallInteger(opcode)) return false;\n-    required = CScript::DecodeOP_N(opcode);\n+    if (!script.GetOp(it, opcode, data) || !GetMultisigKeyCount(script, it, required, opcode, data)) return false;\n     while (script.GetOp(it, opcode, data) && CPubKey::ValidSize(data)) {\n         pubkeys.emplace_back(std::move(data));\n     }\n-    if (!IsSmallInteger(opcode)) return false;\n-    unsigned int keys = CScript::DecodeOP_N(opcode);\n+    if (!GetMultisigKeyCount(script, it, keys, opcode, data)) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552976060",
      "id" : 552976060,
      "in_reply_to_id" : 552972728,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3NjA2MA==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 127,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : null,
      "pull_request_review_id" : 563056125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552976060",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552976515"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552976515"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Look at the implementation of `operator<<` in `CScript`. It handles all integers while `EncodeOP_N` only supports small (<=16) ones.",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-06T21:45:58Z",
      "diff_hunk" : "@@ -312,10 +336,11 @@ CScript GetScriptForMultisig(int nRequired, const std::vector<CPubKey>& keys)\n {\n     CScript script;\n \n-    script << CScript::EncodeOP_N(nRequired);\n+    script << nRequired;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r552976515",
      "id" : 552976515,
      "in_reply_to_id" : 552973679,
      "line" : 338,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mjk3NjUxNQ==",
      "original_commit_id" : "bf7f509902d46834b60f3b332b35c58cdbd38209",
      "original_line" : 338,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : 66,
      "pull_request_review_id" : 563056681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-06T21:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552976515",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some thing to test:\r\n* Descriptors for P2WSH or P2SH-P2WSH multisig can be expanded, signed for, and those spends relay if keys <= 20.\r\n* Descriptors for P2SH multisig can be expanded, signed for, and those spends relay if keys <= 15 (if compressed) or <= 7 (if uncompressed).\r\n* Inferring descriptor from a multisig script with keys <= 16, but using a direct push rather than OP_n, fails.",
      "created_at" : "2021-01-07T00:29:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#issuecomment-755795401",
      "id" : 755795401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20867",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NTc5NTQwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-07T00:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/755795401",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r553311127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/553311127"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Doesn't this need to check what `opcode` is ?",
      "commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "created_at" : "2021-01-07T12:57:15Z",
      "diff_hunk" : "@@ -89,21 +89,44 @@ static constexpr bool IsSmallInteger(opcodetype opcode)\n     return opcode >= OP_1 && opcode <= OP_16;\n }\n \n+/** Valid number of keys in a multisig are [1,20]. */\n+static constexpr bool IsValidMultisigKeyCount(unsigned int n_keys)\n+{\n+    return n_keys > 0 && n_keys <= MAX_PUBKEYS_PER_MULTISIG;\n+}\n+\n+static bool GetMultisigKeyCount(opcodetype opcode, valtype data, unsigned int& count)\n+{\n+    if (IsSmallInteger(opcode)) {\n+        count = CScript::DecodeOP_N(opcode);\n+    } else {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20867#discussion_r553311127",
      "id" : 553311127,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzMxMTEyNw==",
      "original_commit_id" : "0fd1bf65395fb39b1af13dfbdd6348ae10088b86",
      "original_line" : 102,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/script/standard.cpp",
      "position" : 14,
      "pull_request_review_id" : 563463563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20867",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-07T12:57:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/553311127",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
