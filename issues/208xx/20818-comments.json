[
   {
      "author_association" : "MEMBER",
      "body" : "> Here is how my bitcoind.service looks. I changed the user and group from bitcoin to admin. [Unit] Description=Bitcoin daemon After=network.target\r\n> \r\n> [Service] ExecStart=/usr/bin/bitcoind -daemon\r\n> -pid=/run/bitcoind/bitcoind.pid\r\n> -conf=/etc/bitcoin/bitcoin.conf\r\n> -datadir=/var/lib/bitcoind\r\n> \r\n> Make sure the config directory is readable by the service user\r\n> PermissionsStartOnly=true ExecStartPre=/bin/chgrp admin /etc/bitcoin\r\n> \r\n> Process management\r\n> ####################\r\n> \r\n> Type=forking PIDFile=/run/bitcoind/bitcoind.pid Restart=on-failure TimeoutStopSec=600\r\n> \r\n> Run as admin:admin\r\n> User=admin Group=admin\r\n> \r\n> /run/bitcoind\r\n> RuntimeDirectory=bitcoind RuntimeDirectoryMode=0710\r\n> \r\n> /etc/bitcoin\r\n> ConfigurationDirectory=bitcoin ConfigurationDirectoryMode=0710\r\n> \r\n> /var/lib/bitcoind\r\n> StateDirectory=bitcoind StateDirectoryMode=0710\r\n> \r\n> Hardening measures\r\n> ####################\r\n> \r\n> Provide a private /tmp and /var/tmp.\r\n> PrivateTmp=true\r\n> \r\n> Deny access to /home, /root and /run/user\r\n> ProtectHome=true\r\n> \r\n> Mount /usr, /boot/ and /etc read-only for the process.\r\n> ProtectSystem=full\r\n> \r\n> Disallow the process and all of its children to gain\r\n> new privileges through execve().\r\n> NoNewPrivileges=true\r\n> \r\n> Use a new /dev namespace only populated with API pseudo devices\r\n> such as /dev/null, /dev/zero and /dev/random.\r\n> PrivateDevices=true\r\n> \r\n> Deny the creation of writable and executable memory mappings.\r\n> MemoryDenyWriteExecute=true\r\n> \r\n> [Install] WantedBy=multi-user.target\r\n\r\nIt looks like your `bitcoind.service` is broken a bit. Compare:\r\n> Hardening measures\r\n> ####################\r\n> \r\n> Provide a private /tmp and /var/tmp.\r\n> PrivateTmp=true\r\n\r\nvs\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/ae8f79713543d3db24a886cc27340b1570c2657d/contrib/init/bitcoind.service#L53-L57",
      "created_at" : "2021-01-02T09:15:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20818#issuecomment-753450906",
      "id" : 753450906,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20818",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ1MDkwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T09:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753450906",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I am still getting this error, I'm not sure why the formatting went wrong when I posted this:\r\n # Hardening measures \r\n #################\r\n\r\n bitcoind.service - Bitcoin daemon\r\n     Loaded: loaded (/etc/systemd/system/bitcoind.service; enabled; vendor pres>\r\n     Active: failed (Result: exit-code) since Sat 2021-01-02 17:40:44 UTC; 8s a>\r\n    Process: 2503 ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin (code=exited, st>\r\n",
      "created_at" : "2021-01-02T18:02:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20818#issuecomment-753509546",
      "id" : 753509546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20818",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzUwOTU0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T18:02:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753509546",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/72416439?v=4",
         "events_url" : "https://api.github.com/users/blainerb4/events{/privacy}",
         "followers_url" : "https://api.github.com/users/blainerb4/followers",
         "following_url" : "https://api.github.com/users/blainerb4/following{/other_user}",
         "gists_url" : "https://api.github.com/users/blainerb4/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/blainerb4",
         "id" : 72416439,
         "login" : "blainerb4",
         "node_id" : "MDQ6VXNlcjcyNDE2NDM5",
         "organizations_url" : "https://api.github.com/users/blainerb4/orgs",
         "received_events_url" : "https://api.github.com/users/blainerb4/received_events",
         "repos_url" : "https://api.github.com/users/blainerb4/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/blainerb4/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/blainerb4/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/blainerb4"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From your OP follows that this command\r\n```\r\nExecStartPre=/bin/chgrp admin /etc/bitcoin\r\n```\r\nfails.\r\n\r\nWhat is its output if you run it in your terminal manually?\r\n\r\n```\r\n$ sudo /bin/chgrp admin /etc/bitcoin\r\n```\r\n\r\n---\r\n\r\nTo place a piece of code in the comment embrace it with two strings (before and after) each of them contains only three back quotes, i.e., ```",
      "created_at" : "2021-01-02T18:31:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20818#issuecomment-753512839",
      "id" : 753512839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20818",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzUxMjgzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T18:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753512839",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
