[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This is the first step of the refactoring proposed in #20758 and just does encapsulation, it doesn't remove any of the globals.",
      "created_at" : "2020-12-31T06:51:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-752866799",
      "id" : 752866799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1Mjg2Njc5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-31T06:51:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752866799",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20842 (docs: consolidate typo & url fixing by fanquake)\n* #20729 (p2p: standardize on outbound-{full, block}-relay connection type naming by jonatack)\n* #20295 (rpc: getblockfrompeer by Sjors)\n* #20228 (addrman: Make addrman a top-level component by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-31T08:17:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-752884973",
      "id" : 752884973,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1Mjg4NDk3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-04T18:11:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752884973",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I like this kind of encapsulation a lot.\r\n\r\nI'm not sure why the TSAN build is failing with \"WARNING: ThreadSanitizer: double lock of a mutex\". It seems like a false alarm to me. I think it's choking on `std::condition_variable condMsgProc`/`Mutex mutexMsgProc` so maybe it's something similar to https://github.com/google/sanitizers/issues/1259?\r\n",
      "created_at" : "2021-01-01T01:00:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753235027",
      "id" : 753235027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzIzNTAyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-01T01:00:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753235027",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758244"
         }
      },
      "author_association" : "MEMBER",
      "body" : "When renaming this, you'll probably also have to rename `mutex:PeerManager::UpdatedBlockTip` in `./test/sanitizer_suppressions/tsan`",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:15:32Z",
      "diff_hunk" : "@@ -1295,7 +1479,7 @@ void PeerManager::NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_\n  * Update our best height and announce any block hashes which weren't previously\n  * in ::ChainActive() to our peers.\n  */\n-void PeerManager::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {\n+void PeerManagerImpl::UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758244",
      "id" : 550758244,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1ODI0NA==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1482,
      "original_position" : 341,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 560582568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758244",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758510"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps align with opening parens?",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:18:18Z",
      "diff_hunk" : "@@ -40,210 +34,36 @@ struct CNodeStateStats {\n     std::vector<int> vHeightInFlight;\n };\n \n-/**\n- * Data structure for an individual peer. This struct is not protected by\n- * cs_main since it does not contain validation-critical data.\n- *\n- * Memory is owned by shared pointers and this object is destructed when\n- * the refcount drops to zero.\n- *\n- * Mutexes inside this struct must not be held when locking m_peer_mutex.\n- *\n- * TODO: move most members from CNodeState to this structure.\n- * TODO: move remaining application-layer data members from CNode to this structure.\n- */\n-struct Peer {\n-    /** Same id as the CNode object for this peer */\n-    const NodeId m_id{0};\n-\n-    /** Protects misbehavior data members */\n-    Mutex m_misbehavior_mutex;\n-    /** Accumulated misbehavior score for this peer */\n-    int m_misbehavior_score GUARDED_BY(m_misbehavior_mutex){0};\n-    /** Whether this peer should be disconnected and marked as discouraged (unless it has the noban permission). */\n-    bool m_should_discourage GUARDED_BY(m_misbehavior_mutex){false};\n-\n-    /** Protects block inventory data members */\n-    Mutex m_block_inv_mutex;\n-    /** List of blocks that we'll anounce via an `inv` message.\n-     * There is no final sorting before sending, as they are always sent\n-     * immediately and in the order requested. */\n-    std::vector<uint256> m_blocks_for_inv_relay GUARDED_BY(m_block_inv_mutex);\n-    /** Unfiltered list of blocks that we'd like to announce via a `headers`\n-     * message. If we can't announce via a `headers` message, we'll fall back to\n-     * announcing via `inv`. */\n-    std::vector<uint256> m_blocks_for_headers_relay GUARDED_BY(m_block_inv_mutex);\n-    /** The final block hash that we sent in an `inv` message to this peer.\n-     * When the peer requests this block, we send an `inv` message to trigger\n-     * the peer to request the next sequence of block hashes.\n-     * Most peers use headers-first syncing, which doesn't use this mechanism */\n-    uint256 m_continuation_block GUARDED_BY(m_block_inv_mutex) {};\n-\n-    /** This peer's reported block height when we connected */\n-    std::atomic<int> m_starting_height{-1};\n-\n-    /** Set of txids to reconsider once their parent transactions have been accepted **/\n-    std::set<uint256> m_orphan_work_set GUARDED_BY(g_cs_orphans);\n-\n-    /** Protects m_getdata_requests **/\n-    Mutex m_getdata_requests_mutex;\n-    /** Work queue of items requested by this peer **/\n-    std::deque<CInv> m_getdata_requests GUARDED_BY(m_getdata_requests_mutex);\n-\n-    explicit Peer(NodeId id) : m_id(id) {}\n-};\n-\n-using PeerRef = std::shared_ptr<Peer>;\n-\n-class PeerManager final : public CValidationInterface, public NetEventsInterface {\n+class PeerManager : public CValidationInterface, public NetEventsInterface\n+{\n public:\n-    PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                bool ignore_incoming_txs);\n-\n-    /**\n-     * Overridden from CValidationInterface.\n-     */\n-    void BlockConnected(const std::shared_ptr<const CBlock>& pblock, const CBlockIndex* pindexConnected) override;\n-    void BlockDisconnected(const std::shared_ptr<const CBlock> &block, const CBlockIndex* pindex) override;\n-    /**\n-     * Overridden from CValidationInterface.\n-     */\n-    void UpdatedBlockTip(const CBlockIndex *pindexNew, const CBlockIndex *pindexFork, bool fInitialDownload) override;\n-    /**\n-     * Overridden from CValidationInterface.\n-     */\n-    void BlockChecked(const CBlock& block, const BlockValidationState& state) override;\n-    /**\n-     * Overridden from CValidationInterface.\n-     */\n-    void NewPoWValidBlock(const CBlockIndex *pindex, const std::shared_ptr<const CBlock>& pblock) override;\n+    static std::unique_ptr<PeerManager> make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n+                                             CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n+                                             bool ignore_incoming_txs);\n+    virtual ~PeerManager() { }\n \n-    /** Initialize a peer by adding it to mapNodeState and pushing a message requesting its version */\n-    void InitializeNode(CNode* pnode) override;\n-    /** Handle removal of a peer by updating various state and removing it from mapNodeState */\n-    void FinalizeNode(const CNode& node, bool& fUpdateConnectionTime) override;\n-    /**\n-    * Process protocol messages received from a given node\n-    *\n-    * @param[in]   pfrom           The node which we have received messages from.\n-    * @param[in]   interrupt       Interrupt condition for processing threads\n-    */\n-    bool ProcessMessages(CNode* pfrom, std::atomic<bool>& interrupt) override;\n-    /**\n-    * Send queued protocol messages to be sent to a give node.\n-    *\n-    * @param[in]   pto             The node which we are sending messages to.\n-    * @return                      True if there is more work to be done\n-    */\n-    bool SendMessages(CNode* pto) override EXCLUSIVE_LOCKS_REQUIRED(pto->cs_sendProcessing);\n-\n-    /** Consider evicting an outbound peer based on the amount of time they've been behind our tip */\n-    void ConsiderEviction(CNode& pto, int64_t time_in_seconds) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n-    /** Evict extra outbound peers. If we think our tip may be stale, connect to an extra outbound */\n-    void CheckForStaleTipAndEvictPeers();\n-    /** If we have extra outbound peers, try to disconnect the one with the oldest block announcement */\n-    void EvictExtraOutboundPeers(int64_t time_in_seconds) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n-    /** Retrieve unbroadcast transactions from the mempool and reattempt sending to peers */\n-    void ReattemptInitialBroadcast(CScheduler& scheduler) const;\n+    /** Get statistics from node state */\n+    virtual bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) = 0;\n \n-    /** Process a single message from a peer. Public for fuzz testing */\n-    void ProcessMessage(CNode& pfrom, const std::string& msg_type, CDataStream& vRecv,\n-                        const std::chrono::microseconds time_received, const std::atomic<bool>& interruptMsgProc);\n+    /** Whether this node ignores txs received over p2p. */\n+    virtual bool IgnoresIncomingTxs() = 0;\n \n     /**\n      * Increment peer's misbehavior score. If the new value >= DISCOURAGEMENT_THRESHOLD, mark the node\n      * to be discouraged, meaning the peer might be disconnected and added to the discouragement filter.\n      * Public for unit testing.\n      */\n-    void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message);\n-\n-    /** Get statistics from node state */\n-    bool GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats);\n-\n-    /** Whether this node ignores txs received over p2p. */\n-    bool IgnoresIncomingTxs() {return m_ignore_incoming_txs;};\n-\n-private:\n-    /** Get a shared pointer to the Peer object.\n-     *  May return an empty shared_ptr if the Peer object can't be found. */\n-    PeerRef GetPeerRef(NodeId id) const;\n-\n-    /** Get a shared pointer to the Peer object and remove it from m_peer_map.\n-     *  May return an empty shared_ptr if the Peer object can't be found. */\n-    PeerRef RemovePeer(NodeId id);\n+    virtual void Misbehaving(const NodeId pnode, const int howmuch, const std::string& message) = 0;\n \n     /**\n-     * Potentially mark a node discouraged based on the contents of a BlockValidationState object\n-     *\n-     * @param[in] via_compact_block this bool is passed in because net_processing should\n-     * punish peers differently depending on whether the data was provided in a compact\n-     * block message or not. If the compact block had a valid header, but contained invalid\n-     * txs, the peer should not be punished. See BIP 152.\n-     *\n-     * @return Returns true if the peer was punished (probably disconnected)\n-     */\n-    bool MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n-                                 bool via_compact_block, const std::string& message = \"\");\n-\n-    /**\n-     * Potentially disconnect and discourage a node based on the contents of a TxValidationState object\n-     *\n-     * @return Returns true if the peer was punished (probably disconnected)\n-     */\n-    bool MaybePunishNodeForTx(NodeId nodeid, const TxValidationState& state, const std::string& message = \"\");\n-\n-    /** Maybe disconnect a peer and discourage future connections from its address.\n-     *\n-     * @param[in]   pnode     The node to check.\n-     * @return                True if the peer was marked for disconnection in this function\n+     * Evict extra outbound peers. If we think our tip may be stale, connect to an extra outbound.\n+     * Public for unit testing.\n      */\n-    bool MaybeDiscourageAndDisconnect(CNode& pnode);\n+    virtual void CheckForStaleTipAndEvictPeers() = 0;\n \n-    void ProcessOrphanTx(std::set<uint256>& orphan_work_set) EXCLUSIVE_LOCKS_REQUIRED(cs_main, g_cs_orphans);\n-    /** Process a single headers message from a peer. */\n-    void ProcessHeadersMessage(CNode& pfrom, const Peer& peer,\n-                               const std::vector<CBlockHeader>& headers,\n-                               bool via_compact_block);\n-\n-    void SendBlockTransactions(CNode& pfrom, const CBlock& block, const BlockTransactionsRequest& req);\n-\n-    /** Register with TxRequestTracker that an INV has been received from a\n-     *  peer. The announcement parameters are decided in PeerManager and then\n-     *  passed to TxRequestTracker. */\n-    void AddTxAnnouncement(const CNode& node, const GenTxid& gtxid, std::chrono::microseconds current_time)\n-        EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n-\n-    /** Send a version message to a peer */\n-    void PushNodeVersion(CNode& pnode, int64_t nTime);\n-\n-    const CChainParams& m_chainparams;\n-    CConnman& m_connman;\n-    /** Pointer to this node's banman. May be nullptr - check existence before dereferencing. */\n-    BanMan* const m_banman;\n-    ChainstateManager& m_chainman;\n-    CTxMemPool& m_mempool;\n-    TxRequestTracker m_txrequest GUARDED_BY(::cs_main);\n-\n-    int64_t m_stale_tip_check_time; //!< Next time to check for stale tip\n-\n-    //* Whether this node is running in blocks only mode */\n-    const bool m_ignore_incoming_txs;\n-\n-    /** Whether we've completed initial sync yet, for determining when to turn\n-      * on extra block-relay-only peers. */\n-    bool m_initial_sync_finished{false};\n-\n-    /** Protects m_peer_map. This mutex must not be locked while holding a lock\n-     *  on any of the mutexes inside a Peer object. */\n-    mutable Mutex m_peer_mutex;\n-    /**\n-     * Map of all Peer objects, keyed by peer id. This map is protected\n-     * by the m_peer_mutex. Once a shared pointer reference is\n-     * taken, the lock may be released. Individual fields are protected by\n-     * their own locks.\n-     */\n-    std::map<NodeId, PeerRef> m_peer_map GUARDED_BY(m_peer_mutex);\n+    /** Process a single message from a peer. Public for fuzz testing */\n+    virtual void ProcessMessage(CNode& pfrom, const std::string& msg_type, CDataStream& vRecv,\n+                        const std::chrono::microseconds time_received, const std::atomic<bool>& interruptMsgProc) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758510",
      "id" : 550758510,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1ODUxMA==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 66,
      "original_position" : 244,
      "original_start_line" : null,
      "path" : "src/net_processing.h",
      "position" : null,
      "pull_request_review_id" : 560582678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758510",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758986"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Keep alignment with parens",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:24:58Z",
      "diff_hunk" : "@@ -1034,7 +1211,7 @@ void PeerManager::Misbehaving(const NodeId pnode, const int howmuch, const std::\n     }\n }\n \n-bool PeerManager::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n+bool PeerManagerImpl::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n                                           bool via_compact_block, const std::string& message)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550758986",
      "id" : 550758986,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1ODk4Ng==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1221,
      "original_position" : 277,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 560582678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550758986",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550759607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550759607"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Adding a new parameter to the ctor now requires updating five locations (`PeerManager::make` declaration, `PeerManager::make` definition signature, `PeerManager::make` function body` `PeerManagerImpl` ctor declaration, `PeerManagerImpl` ctor definition signature.\r\n\r\nI wonder if it makes sense to create a `PeerManagerArgs` struct that's passed into the `make()` method and forwarded to the `PeerManagerImpl` ctor so that only one place needs to be changed?",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:33:07Z",
      "diff_hunk" : "@@ -1130,9 +1307,16 @@ static bool BlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Para\n         (GetBlockProofEquivalentTime(*pindexBestHeader, *pindex, *pindexBestHeader, consensusParams) < STALE_RELAY_AGE_LIMIT);\n }\n \n-PeerManager::PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                         CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                         bool ignore_incoming_txs)\n+std::unique_ptr<PeerManager> PeerManager::make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550759607",
      "id" : 550759607,
      "line" : 1316,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1OTYwNw==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1316,
      "original_position" : 296,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 305,
      "pull_request_review_id" : 560582678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550759607",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550759657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550759657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Feel free to fix alignment while you're touching this function :)",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:33:48Z",
      "diff_hunk" : "@@ -2267,7 +2451,7 @@ static void ProcessGetCFCheckPt(CNode& peer, CDataStream& vRecv, const CChainPar\n     connman.PushMessage(&peer, std::move(msg));\n }\n \n-void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDataStream& vRecv,\n+void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDataStream& vRecv,\n                                          const std::chrono::microseconds time_received,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550759657",
      "id" : 550759657,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc1OTY1Nw==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 2455,
      "original_position" : 391,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 560582678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550759657",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550761705"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550761705"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This only needs to be exposed because of the weird lock ordering requirements documented here: https://github.com/bitcoin/bitcoin/blob/e75f91eae3936269b40b4bfdfe540d5526270936/src/init.cpp#L202-L208. Once tx data is moved into `Peer` and `RelayTransactions()` no longer needs to call `ForEachNode()` and therefore take `cs_vNodes` while holding `g_cs_orphans`, this mutex can be private in net_processing.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-01T11:58:43Z",
      "diff_hunk" : "@@ -6,19 +6,13 @@\n #ifndef BITCOIN_NET_PROCESSING_H\n #define BITCOIN_NET_PROCESSING_H\n \n-#include <consensus/params.h>\n #include <net.h>\n #include <sync.h>\n-#include <txrequest.h>\n #include <validationinterface.h>\n \n-class BlockTransactionsRequest;\n-class BlockValidationState;\n-class CBlockHeader;\n class CChainParams;\n class CTxMemPool;\n class ChainstateManager;\n-class TxValidationState;\n \n extern RecursiveMutex cs_main;\n extern RecursiveMutex g_cs_orphans;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550761705",
      "id" : 550761705,
      "line" : 18,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MTcwNQ==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 18,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/net_processing.h",
      "position" : 19,
      "pull_request_review_id" : 560582678,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550761705",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK fa6b22736656b207251fabb068d9a3ddd91d1266",
      "created_at" : "2021-01-02T09:49:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753453403",
      "id" : 753453403,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzQ1MzQwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-02T09:49:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753453403",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550944654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550944654"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think that's relevant for this PR though?",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T02:11:05Z",
      "diff_hunk" : "@@ -6,19 +6,13 @@\n #ifndef BITCOIN_NET_PROCESSING_H\n #define BITCOIN_NET_PROCESSING_H\n \n-#include <consensus/params.h>\n #include <net.h>\n #include <sync.h>\n-#include <txrequest.h>\n #include <validationinterface.h>\n \n-class BlockTransactionsRequest;\n-class BlockValidationState;\n-class CBlockHeader;\n class CChainParams;\n class CTxMemPool;\n class ChainstateManager;\n-class TxValidationState;\n \n extern RecursiveMutex cs_main;\n extern RecursiveMutex g_cs_orphans;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550944654",
      "id" : 550944654,
      "in_reply_to_id" : 550761705,
      "line" : 18,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk0NDY1NA==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 18,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/net_processing.h",
      "position" : 19,
      "pull_request_review_id" : 560665001,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550944654",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550944743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550944743"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Also requires touching everywhere that calls the ctor. Not against it, but doesn't seem like a big win.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T02:12:36Z",
      "diff_hunk" : "@@ -1130,9 +1307,16 @@ static bool BlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Para\n         (GetBlockProofEquivalentTime(*pindexBestHeader, *pindex, *pindexBestHeader, consensusParams) < STALE_RELAY_AGE_LIMIT);\n }\n \n-PeerManager::PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                         CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                         bool ignore_incoming_txs)\n+std::unique_ptr<PeerManager> PeerManager::make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550944743",
      "id" : 550944743,
      "in_reply_to_id" : 550759607,
      "line" : 1316,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk0NDc0Mw==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1316,
      "original_position" : 296,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 305,
      "pull_request_review_id" : 560665044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550944743",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550986467"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550986467"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not necessarily if we're passing in arguments with defaults. Anyway, not important here. Can be considered separately.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T10:24:25Z",
      "diff_hunk" : "@@ -1130,9 +1307,16 @@ static bool BlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Para\n         (GetBlockProofEquivalentTime(*pindexBestHeader, *pindex, *pindexBestHeader, consensusParams) < STALE_RELAY_AGE_LIMIT);\n }\n \n-PeerManager::PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                         CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                         bool ignore_incoming_txs)\n+std::unique_ptr<PeerManager> PeerManager::make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550986467",
      "id" : 550986467,
      "in_reply_to_id" : 550759607,
      "line" : 1316,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk4NjQ2Nw==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1316,
      "original_position" : 296,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 305,
      "pull_request_review_id" : 560684619,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550986467",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550986507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550986507"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Correct, this was just an observation about why is required here now.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T10:24:57Z",
      "diff_hunk" : "@@ -6,19 +6,13 @@\n #ifndef BITCOIN_NET_PROCESSING_H\n #define BITCOIN_NET_PROCESSING_H\n \n-#include <consensus/params.h>\n #include <net.h>\n #include <sync.h>\n-#include <txrequest.h>\n #include <validationinterface.h>\n \n-class BlockTransactionsRequest;\n-class BlockValidationState;\n-class CBlockHeader;\n class CChainParams;\n class CTxMemPool;\n class ChainstateManager;\n-class TxValidationState;\n \n extern RecursiveMutex cs_main;\n extern RecursiveMutex g_cs_orphans;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550986507",
      "id" : 550986507,
      "in_reply_to_id" : 550761705,
      "line" : 18,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk4NjUwNw==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 18,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/net_processing.h",
      "position" : 19,
      "pull_request_review_id" : 560684646,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550986507",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550987838"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550987838"
         }
      },
      "author_association" : "MEMBER",
      "body" : "not resolved",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T10:36:59Z",
      "diff_hunk" : "@@ -1034,7 +1211,7 @@ void PeerManager::Misbehaving(const NodeId pnode, const int howmuch, const std::\n     }\n }\n \n-bool PeerManager::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n+bool PeerManagerImpl::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n                                           bool via_compact_block, const std::string& message)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r550987838",
      "id" : 550987838,
      "in_reply_to_id" : 550758986,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk4NzgzOA==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1221,
      "original_position" : 277,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 560685464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:28:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550987838",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 7bd4517e5830a09a173d82fe3184acf0bcea06a9",
      "created_at" : "2021-01-03T10:37:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753597290",
      "id" : 753597290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzU5NzI5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T10:37:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753597290",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would it make sense to move `PeerManager` to its own file (given how much this PR is moving stuff around anyway)?",
      "created_at" : "2021-01-03T12:44:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753611705",
      "id" : 753611705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYxMTcwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T12:44:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753611705",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551006305"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551006305"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "dammit",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-03T13:29:08Z",
      "diff_hunk" : "@@ -1034,7 +1211,7 @@ void PeerManager::Misbehaving(const NodeId pnode, const int howmuch, const std::\n     }\n }\n \n-bool PeerManager::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n+bool PeerManagerImpl::MaybePunishNodeForBlock(NodeId nodeid, const BlockValidationState& state,\n                                           bool via_compact_block, const std::string& message)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551006305",
      "id" : 551006305,
      "in_reply_to_id" : 550758986,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTAwNjMwNQ==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1221,
      "original_position" : 277,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 560696756,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-03T13:29:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551006305",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK abeecaa66ed136b3f0b7ff500ae5b592256072a5\r\n\r\nThanks for being so responsive to review comments!",
      "created_at" : "2021-01-03T13:30:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753617551",
      "id" : 753617551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYxNzU1MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T13:30:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753617551",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Bumped to fix missed indentation.\r\n\r\n@Sjors After the further commits in #20758 almost all of net_processing is moved into `PeerManager`, so its effectively a dedicated file anyway. Splitting out sub-components (like orphan handling) into their own modules would be a good next step afterwards, I think.",
      "created_at" : "2021-01-03T13:31:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-753617650",
      "id" : 753617650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzYxNzY1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-03T13:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753617650",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551099132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551099132"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "BTW, as part of turning (almost) all of net_processing.cpp into `PeerManagerImpl` methods, we could plausibly remove all the `PeerManagerImpl` declarations by just having net_processing.h start with `namespace { class PeerManagerImpl : public PeerManager {` and end with the closing brackets and the `PeerManager::make` definition -- there's no need to declare class methods before use. That'd remove one of the redundancies above, as well as a bunch of others.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-04T03:09:28Z",
      "diff_hunk" : "@@ -1130,9 +1307,16 @@ static bool BlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Para\n         (GetBlockProofEquivalentTime(*pindexBestHeader, *pindex, *pindexBestHeader, consensusParams) < STALE_RELAY_AGE_LIMIT);\n }\n \n-PeerManager::PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                         CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                         bool ignore_incoming_txs)\n+std::unique_ptr<PeerManager> PeerManager::make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551099132",
      "id" : 551099132,
      "in_reply_to_id" : 550759607,
      "line" : 1316,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA5OTEzMg==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1316,
      "original_position" : 296,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 305,
      "pull_request_review_id" : 560760950,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-04T03:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551099132",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551217966"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551217966"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems reasonable, although like you say earlier, it's not a big win. Perhaps something for a follow-up once more of #20758 has landed.",
      "commit_id" : "abeecaa66ed136b3f0b7ff500ae5b592256072a5",
      "created_at" : "2021-01-04T10:01:02Z",
      "diff_hunk" : "@@ -1130,9 +1307,16 @@ static bool BlockRequestAllowed(const CBlockIndex* pindex, const Consensus::Para\n         (GetBlockProofEquivalentTime(*pindexBestHeader, *pindex, *pindexBestHeader, consensusParams) < STALE_RELAY_AGE_LIMIT);\n }\n \n-PeerManager::PeerManager(const CChainParams& chainparams, CConnman& connman, BanMan* banman,\n-                         CScheduler& scheduler, ChainstateManager& chainman, CTxMemPool& pool,\n-                         bool ignore_incoming_txs)\n+std::unique_ptr<PeerManager> PeerManager::make(const CChainParams& chainparams, CConnman& connman, BanMan* banman,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#discussion_r551217966",
      "id" : 551217966,
      "in_reply_to_id" : 550759607,
      "line" : 1316,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxNzk2Ng==",
      "original_commit_id" : "13a7fec39d7e30becd7bf6eb57709f471d8ba315",
      "original_line" : 1316,
      "original_position" : 296,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 305,
      "pull_request_review_id" : 560905098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20811",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-04T10:01:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/551217966",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-05T12:52:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20811#issuecomment-754617041",
      "id" : 754617041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20811",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NDYxNzA0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-05T12:52:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/754617041",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
