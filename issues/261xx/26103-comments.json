[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972858901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972858901"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since we're tidying, I think this could be moved into a helper in policy.h, interface something like this:\r\n\r\n```c\r\nCTxMemPool::Limits CPFPCarveOutLimits(const CTxMemPool::Limits& normal_limits) {}\r\n```",
      "commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "created_at" : "2022-09-16T09:59:34Z",
      "diff_hunk" : "@@ -899,8 +900,16 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n         // to be secure by simply only having two immediately-spendable\n         // outputs - one for each counterparty. For more info on the uses for\n         // this, see https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-November/016518.html\n+        CTxMemPool::Limits adjusted_limits{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972858901",
      "id" : 972858901,
      "line" : 903,
      "node_id" : "PRRC_kwDOABII5845_KYV",
      "original_commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "original_line" : 903,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 59,
      "pull_request_review_id" : 1110441399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972858901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T10:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972858901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972865346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972865346"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this can be replaced with `CTxMemPool::Limits::NoLimits()`, actually. These numbers seem arbitrarily high and don't restrict anything, suggesting the intent of this test case is just to calculate the ancestors properly.",
      "commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "created_at" : "2022-09-16T10:07:30Z",
      "diff_hunk" : "@@ -203,7 +203,13 @@ BOOST_AUTO_TEST_CASE(MempoolIndexingTest)\n \n     CTxMemPool::setEntries setAncestorsCalculated;\n     std::string dummy;\n-    BOOST_CHECK_EQUAL(pool.CalculateMemPoolAncestors(entry.Fee(2000000LL).FromTx(tx7), setAncestorsCalculated, 100, 1000000, 1000, 1000000, dummy), true);\n+    CTxMemPool::Limits mempool_limits{\n+        .ancestor_count = 100,\n+        .ancestor_size_vbytes = 1'000'000,\n+        .descendant_count = 1'000,\n+        .descendant_size_vbytes = 1'000'000,\n+    };\n+    BOOST_CHECK_EQUAL(pool.CalculateMemPoolAncestors(entry.Fee(2'000'000LL).FromTx(tx7), setAncestorsCalculated, mempool_limits, dummy), true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972865346",
      "id" : 972865346,
      "line" : 212,
      "node_id" : "PRRC_kwDOABII5845_L9C",
      "original_commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "original_line" : 212,
      "original_position" : 11,
      "original_start_line" : 206,
      "path" : "src/test/mempool_tests.cpp",
      "position" : 11,
      "pull_request_review_id" : 1110441399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972865346/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 206,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-16T10:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972865346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972878804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972878804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it would make sense to delete the default ctor and require callers to set all 4 members when constructing.",
      "commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "created_at" : "2022-09-16T10:24:59Z",
      "diff_hunk" : "@@ -17,13 +17,21 @@ namespace kernel {\n  */\n struct MemPoolLimits {\n     //! The maximum allowed number of transactions in a package including the entry and its ancestors.\n-    int64_t ancestor_count{DEFAULT_ANCESTOR_LIMIT};\n+    uint64_t ancestor_count{DEFAULT_ANCESTOR_LIMIT};\n     //! The maximum allowed size in virtual bytes of an entry and its ancestors within a package.\n-    int64_t ancestor_size_vbytes{DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1'000};\n+    uint64_t ancestor_size_vbytes{DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1'000};\n     //! The maximum allowed number of transactions in a package including the entry and its descendants.\n-    int64_t descendant_count{DEFAULT_DESCENDANT_LIMIT};\n+    uint64_t descendant_count{DEFAULT_DESCENDANT_LIMIT};\n     //! The maximum allowed size in virtual bytes of an entry and its descendants within a package.\n-    int64_t descendant_size_vbytes{DEFAULT_DESCENDANT_SIZE_LIMIT_KVB * 1'000};\n+    uint64_t descendant_size_vbytes{DEFAULT_DESCENDANT_SIZE_LIMIT_KVB * 1'000};\n+\n+    /**\n+     * @return MemPoolLimits with all the limits set to the maximum\n+     */\n+    static MemPoolLimits NoLimits() {\n+        uint64_t no_limit{std::numeric_limits<uint64_t>::max()};\n+        return {no_limit, no_limit, no_limit, no_limit};\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972878804",
      "id" : 972878804,
      "line" : 34,
      "node_id" : "PRRC_kwDOABII5845_PPU",
      "original_commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "original_line" : 34,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_limits.h",
      "position" : 22,
      "pull_request_review_id" : 1110441399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972878804/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T10:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972878804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972879704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972879704"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you explain why the change from signed to unsigned?",
      "commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "created_at" : "2022-09-16T10:26:12Z",
      "diff_hunk" : "@@ -17,13 +17,21 @@ namespace kernel {\n  */\n struct MemPoolLimits {\n     //! The maximum allowed number of transactions in a package including the entry and its ancestors.\n-    int64_t ancestor_count{DEFAULT_ANCESTOR_LIMIT};\n+    uint64_t ancestor_count{DEFAULT_ANCESTOR_LIMIT};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26103#discussion_r972879704",
      "id" : 972879704,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5845_PdY",
      "original_commit_id" : "c5e595250e26491b4dfbccab83cd7c6fa77df331",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/kernel/mempool_limits.h",
      "position" : 5,
      "pull_request_review_id" : 1110441399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26103",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972879704/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T10:26:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972879704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   }
]
