[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1123501907) |\n| Stale ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1128394574), [theStack](https://github.com/bitcoin/bitcoin/pull/26186#pullrequestreview-1208610225) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/650](https://github.com/bitcoin-core/gui/pull/650) (Add Import to Wallet GUI by KolbyML)\n* [#26174](https://github.com/bitcoin/bitcoin/pull/26174) (rpc, wallet: add ability to retrieve all address book entries by w0xlt)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-09-27T12:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259461425",
      "id" : 1259461425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LEdsx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259461425/reactions"
      },
      "updated_at" : "2022-12-08T12:16:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259461425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981310011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that all the rpc methods are at the same indentation and thus easily readable/enumerable, I don't think we need the comments here.\r\n\r\nEven though for the current implementation it doesn't reduce LoC that much, I think this alternative would be significantly more compact if in the future we'd also need to check for multiple invalid labels (not just '*'). But even in the current format, I think it's a bit more DRY?\r\n\r\n```suggestion\r\n        address = node.getnewaddress()\r\n        pubkey = node.getaddressinfo(address)['pubkey']\r\n        rpc_calls = [\r\n            [node.getnewaddress],\r\n            [node.setlabel, address],\r\n            [node.getaddressesbylabel],\r\n            [node.importpubkey, pubkey],\r\n            [node.addmultisigaddress, 1, [pubkey]],\r\n            [node.getreceivedbylabel],\r\n        ]\r\n        for rpc_call in rpc_calls:\r\n            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:18:37Z",
      "diff_hunk" : "@@ -25,6 +25,50 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+\n+        # getnewaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getnewaddress, \"*\")\n+        # setlabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.setlabel, address, \"*\")\n+        # getaddressesbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getaddressesbylabel, \"*\")\n+        # importpubkey\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.importpubkey, pubkey, \"*\")\n+        # addmultisigaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.addmultisigaddress, 1, [pubkey], \"*\")\n+        # getreceivedbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getreceivedbylabel, \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981310011",
      "id" : 981310011,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fZo7",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 44,
      "original_position" : 20,
      "original_start_line" : 30,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981310011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981315868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd just move this out of the if/else loop and remove the duplicated lines in the `if` statement?",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:23:05Z",
      "diff_hunk" : "@@ -25,6 +25,50 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+\n+        # getnewaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getnewaddress, \"*\")\n+        # setlabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.setlabel, address, \"*\")\n+        # getaddressesbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getaddressesbylabel, \"*\")\n+        # importpubkey\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.importpubkey, pubkey, \"*\")\n+        # addmultisigaddress\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.addmultisigaddress, 1, [pubkey], \"*\")\n+        # getreceivedbylabel\n+        assert_raises_rpc_error(-11, \"Invalid label name\", node.getreceivedbylabel, \"*\")\n+\n+        if self.options.descriptors:\n+            # importdescriptors\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+            assert_equal(r[0]['success'], False)\n+            assert_equal(r[0]['error']['code'], -11)\n+            assert_equal(r[0]['error']['message'], \"Invalid label name\")\n+        else:\n+            # importprivkey\n+            privkey = node.dumpprivkey(address)\n+            assert_raises_rpc_error(-11, \"Invalid label name\", node.importprivkey, privkey, \"*\")\n+\n+            # importmulti\n+            r = node.importmulti([{\n+                'scriptPubKey': {'address': address},\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+\n+            assert_equal(r[0]['success'], False)\n+            assert_equal(r[0]['error']['code'], -11)\n+            assert_equal(r[0]['error']['message'], \"Invalid label name\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981315868",
      "id" : 981315868,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fbEc",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 70,
      "original_position" : 46,
      "original_start_line" : 68,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981315868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n            strLabel = LabelFromValue(request.params[1]);\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:34:40Z",
      "diff_hunk" : "@@ -142,7 +142,7 @@ RPCHelpMan importprivkey()\n         std::string strSecret = request.params[0].get_str();\n         std::string strLabel;\n         if (!request.params[1].isNull())\n-            strLabel = request.params[1].get_str();\n+            strLabel = LabelFromValue(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330263",
      "id" : 981330263,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846felX",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 145,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330263",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        strLabel = LabelFromValue(request.params[1]);\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T14:34:52Z",
      "diff_hunk" : "@@ -235,7 +235,7 @@ RPCHelpMan importaddress()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981330526",
      "id" : 981330526,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fepe",
      "original_commit_id" : "3012200bc0602fc35a53b6a25a7d23eaaed54f9c",
      "original_line" : 238,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1122089040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T14:43:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981330526",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the review @stickies-v, I've addressed all your comments.",
      "created_at" : "2022-09-27T14:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259630564",
      "id" : 1259630564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LFG_k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259630564/reactions"
      },
      "updated_at" : "2022-09-27T14:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259630564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981364061"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this line adds much, it's not the expected type of r and it's not necessary to declare it before the if/else. I'd prefer to remove, not really pythonic.",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:01:23Z",
      "diff_hunk" : "@@ -25,6 +25,42 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+        r = None",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981364061",
      "id" : 981364061,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fm1d",
      "original_commit_id" : "b2d0d4b6f9d41602d91a48427b140db8a6a1a364",
      "original_line" : 43,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122171321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T15:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981364061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981366008"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: if you move the entire if/else loop to before the execution of the rpc calls, you could replace this with `rpc_calls.append(...)`",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:03:04Z",
      "diff_hunk" : "@@ -25,6 +25,42 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+        r = None\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            privkey = node.dumpprivkey(address)\n+            assert_raises_rpc_error(-11, \"Invalid label name\", node.importprivkey, privkey, \"*\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981366008",
      "id" : 981366008,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846fnT4",
      "original_commit_id" : "b2d0d4b6f9d41602d91a48427b140db8a6a1a364",
      "original_line" : 52,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1122171321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-27T15:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981366008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed, thanks @stickies-v. \r\n![](https://cdn.discordapp.com/emojis/966020215764844605.gif?size=4096)",
      "created_at" : "2022-09-27T15:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1259662225",
      "id" : 1259662225,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585LFOuR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259662225/reactions"
      },
      "updated_at" : "2022-09-27T15:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259662225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981389534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: PEP8 suggests a single whiteline",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-27T15:22:06Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])\n+\n+            r = node.importmulti([{\n+                'scriptPubKey': {'address': address},\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+\n+        assert_equal(r[0]['success'], False)\n+        assert_equal(r[0]['error']['code'], -11)\n+        assert_equal(r[0]['error']['message'], \"Invalid label name\")\n+\n+        for rpc_call in rpc_calls:\n+            assert_raises_rpc_error(-11, \"Invalid label name\", *rpc_call, \"*\")\n+\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r981389534",
      "id" : 981389534,
      "line" : 62,
      "node_id" : "PRRC_kwDOABII5846ftDe",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 62,
      "original_position" : 38,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 38,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/981389534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982229517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: would avoid using one-letter variables, the brevity isn't necessary here imo and it's just slightly more confusing\r\n```suggestion\r\n            response = node.importdescriptors([{\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T10:28:15Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982229517",
      "id" : 982229517,
      "line" : 41,
      "node_id" : "PRRC_kwDOABII5846i6IN",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 41,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 17,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982229517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982237949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: f-string\r\n```suggestion\r\n                'desc': f'pkh({address})',\r\n```",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T10:37:37Z",
      "diff_hunk" : "@@ -25,6 +25,41 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            r = node.importdescriptors([{\n+                'desc': 'pkh(' + address + ')',",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982237949",
      "id" : 982237949,
      "line" : 42,
      "node_id" : "PRRC_kwDOABII5846i8L9",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 42,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 18,
      "pull_request_review_id" : 1122209594,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-28T10:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982237949",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982277088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What about moving the null check into `LabelFromValue` (if needed with an optional arg to set the default value to something other than `\"\"`)?",
      "commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "created_at" : "2022-09-28T11:21:37Z",
      "diff_hunk" : "@@ -431,7 +431,7 @@ RPCHelpMan importpubkey()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982277088",
      "id" : 982277088,
      "line" : 434,
      "node_id" : "PRRC_kwDOABII5846jFvg",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 434,
      "original_position" : 23,
      "original_start_line" : 432,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 23,
      "pull_request_review_id" : 1123501907,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 432,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-28T11:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982277088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982484084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you think of 5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7?",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-28T14:30:36Z",
      "diff_hunk" : "@@ -431,7 +431,7 @@ RPCHelpMan importpubkey()\n \n     std::string strLabel;\n     if (!request.params[1].isNull())\n-        strLabel = request.params[1].get_str();\n+        strLabel = LabelFromValue(request.params[1]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r982484084",
      "id" : 982484084,
      "in_reply_to_id" : 982277088,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846j4R0",
      "original_commit_id" : "d29358558ec600d46e50782c3174e8cefa432e83",
      "original_line" : 434,
      "original_position" : 23,
      "original_start_line" : 432,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : null,
      "pull_request_review_id" : 1123808905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-28T21:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/982484084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984447620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like listsinceblock ought to be added to this test if #25934 is merged. Edit: should the wildcard functionality be added either in that PR or this one?",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-30T10:23:59Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984447620",
      "id" : 984447620,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5846rXqE",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 38,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 14,
      "pull_request_review_id" : 1126608655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T10:25:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984447620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984485290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "answered here: https://github.com/bitcoin/bitcoin/pull/25934#discussion_r984481844",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-09-30T11:16:31Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r984485290",
      "id" : 984485290,
      "in_reply_to_id" : 984447620,
      "line" : 38,
      "node_id" : "PRRC_kwDOABII5846rg2q",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 38,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 14,
      "pull_request_review_id" : 1126664123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T11:16:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984485290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985587377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "in b0fdad3436083aa8b965db374b7e97c94e6e246c: `LabelFromValue()` returns by value (as opposed to `get_str()` indeed return a ref to the `data` object, so having `label` be  a `const std::string&` is quite risky from a dangling reference perspective. I would update `label` to be a `std::string` here (and similar cases further down) - even though it's changed to an `auto` in later commits.",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T09:49:00Z",
      "diff_hunk" : "@@ -1169,7 +1169,7 @@ static UniValue ProcessImport(CWallet& wallet, const UniValue& data, const int64\n         if (internal && data.exists(\"label\")) {\n             throw JSONRPCError(RPC_INVALID_PARAMETER, \"Internal addresses should not have a label\");\n         }\n-        const std::string& label = data.exists(\"label\") ? data[\"label\"].get_str() : \"\";\n+        const std::string& label = data.exists(\"label\") ? LabelFromValue(data[\"label\"]) : \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985587377",
      "id" : 985587377,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846vt6x",
      "original_commit_id" : "b0fdad3436083aa8b965db374b7e97c94e6e246c",
      "original_line" : 1172,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/backup.cpp",
      "position" : 32,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985587377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985674324"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since `AddrBookFilter` takes a `std::optional<std::string>`, I think there's no need for the `CHECK_NONFATAL` here? Wouldn't be any behaviour change either I think, because the existing code would throw if params[0] were to be null? (not 100% sure on that)\r\n\r\n```suggestion\r\n        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{LabelFromValue(params[0])});\r\n```",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T11:24:55Z",
      "diff_hunk" : "@@ -21,7 +21,7 @@ static CAmount GetReceived(const CWallet& wallet, const UniValue& params, bool b\n     std::vector<CTxDestination> addresses;\n     if (by_label) {\n         // Get the set of addresses assigned to label\n-        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{LabelFromValue(params[0])});\n+        addresses = wallet.ListAddrBookAddresses(CWallet::AddrBookFilter{CHECK_NONFATAL(LabelFromValue(params[0]))});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985674324",
      "id" : 985674324,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5846wDJU",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 24,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/coins.cpp",
      "position" : 5,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:30:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985674324",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985676517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing `#include <util/check.h>` here and in other places.",
      "commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "created_at" : "2022-10-03T11:27:42Z",
      "diff_hunk" : "@@ -140,7 +138,7 @@ RPCHelpMan setlabel()\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n     }\n \n-    std::string label = LabelFromValue(request.params[1]);\n+    auto label = *CHECK_NONFATAL(LabelFromValue(request.params[1]));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r985676517",
      "id" : 985676517,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII5846wDrl",
      "original_commit_id" : "5b98f5a2aeb0d49ab5c72732acb4ae0d00f907c7",
      "original_line" : 141,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/addresses.cpp",
      "position" : 16,
      "pull_request_review_id" : 1128095723,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T11:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985676517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removed from the milestone for now, as this is not a regression. Though, it can still be re-added and put into rc3 if merged in time.",
      "created_at" : "2022-10-17T17:11:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1281188620",
      "id" : 1281188620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585MXWMM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281188620/reactions"
      },
      "updated_at" : "2022-10-17T17:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281188620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1040928046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since the asterisk is added in the for-loop below, there is no need to add it here. I'd suggest to also add test coverage for `importaddress` here:\r\n```suggestion\r\n            rpc_calls.extend([\r\n                [node.importprivkey, node.dumpprivkey(address)],\r\n                [node.importaddress, address],\r\n            ])\r\n```",
      "commit_id" : "8b716611b1bf975e54050af278da7b6c1d6a042d",
      "created_at" : "2022-12-06T12:44:01Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            response = node.importdescriptors([{\n+                'desc': f'pkh({pubkey})',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1040928046",
      "id" : 1040928046,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII584-C00u",
      "original_commit_id" : "bb6d4670a21f5502ddd0dfbd4f1699a652ba0355",
      "original_line" : 47,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : 23,
      "pull_request_review_id" : 1206523980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-06T12:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1040928046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1042285597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks done",
      "commit_id" : "493cadc8ee0339244b722b2c36dac078a3397800",
      "created_at" : "2022-12-07T14:38:01Z",
      "diff_hunk" : "@@ -25,6 +25,40 @@ def set_test_params(self):\n     def skip_test_if_missing_module(self):\n         self.skip_if_no_wallet()\n \n+    def invalid_label_name_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        pubkey = node.getaddressinfo(address)['pubkey']\n+        rpc_calls = [\n+            [node.getnewaddress],\n+            [node.setlabel, address],\n+            [node.getaddressesbylabel],\n+            [node.importpubkey, pubkey],\n+            [node.addmultisigaddress, 1, [pubkey]],\n+            [node.getreceivedbylabel],\n+        ]\n+        if self.options.descriptors:\n+            response = node.importdescriptors([{\n+                'desc': f'pkh({pubkey})',\n+                'label': '*',\n+                'timestamp': 'now',\n+            }])\n+        else:\n+            rpc_calls.append([node.importprivkey, node.dumpprivkey(address), \"*\"])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1042285597",
      "id" : 1042285597,
      "in_reply_to_id" : 1040928046,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-IAQd",
      "original_commit_id" : "bb6d4670a21f5502ddd0dfbd4f1699a652ba0355",
      "original_line" : 47,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "test/functional/wallet_labels.py",
      "position" : null,
      "pull_request_review_id" : 1208538111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-07T14:38:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1042285597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to add coverage to `listsinceblock` and squashed 493cadc8ee0339244b722b2c36dac078a3397800 into the first commit.",
      "created_at" : "2022-12-08T12:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#issuecomment-1342641963",
      "id" : 1342641963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26186",
      "node_id" : "IC_kwDOABII585QBxcr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342641963/reactions"
      },
      "updated_at" : "2022-12-08T12:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342641963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045163890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Conceptually there isn't a default label, the record label is just empty.\r\n\r\nWhat if you return the empty string from `LabelFromValue` instead? It will also remove the need for all the `.value_or(DEFAULT_WALLET_LABEL);`.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-11T02:57:35Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045163890",
      "id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-S-9y",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1212637529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-11T02:58:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045163890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045666419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Some RPCs require the label to be optional for filtering. `getaddressesbylabel` will return all addresses if the label is nullopt for example.\r\nI could hard-code the `\"\"` in `.value_or` calls if you prefer though.",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T10:44:37Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045666419",
      "id" : 1045666419,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-U5pz",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213287703,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T10:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045666419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045753945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe you are referring to `listsinceblock`? (as far as I can see, it's the only place where the label is used as optional), `getaddressesbylabel` uses a string not an optional.\r\n\r\nCheck this out: https://github.com/furszy/bitcoin-core/commit/8ce2d8965537a889fe88ca1a891763b35aba32ad. (If you like it, feel free to squash it on the first commit).",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T12:15:41Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045753945",
      "id" : 1045753945,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-VPBZ",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213421977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T12:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045753945",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045852407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The CI doesn't pass on your commit because of `listsinceblock`. A label can be empty in this RPC.\r\n\r\nhttps://cirrus-ci.com/task/6056876765347840?logs=ci#L3626",
      "commit_id" : "21b429632d15a170317a73fb5b7aa3cf95347c78",
      "created_at" : "2022-12-12T13:51:35Z",
      "diff_hunk" : "@@ -107,6 +107,7 @@ static const bool DEFAULT_WALLET_RBF = true;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n+static const std::string DEFAULT_WALLET_LABEL = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26186#discussion_r1045852407",
      "id" : 1045852407,
      "in_reply_to_id" : 1045163890,
      "line" : 110,
      "node_id" : "PRRC_kwDOABII584-VnD3",
      "original_commit_id" : "e40b9a483a73540c266f08d27b083c7e2c1ebd52",
      "original_line" : 110,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 1213617279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26186",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T13:51:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045852407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   }
]
