[
   {
      "author_association" : "MEMBER",
      "body" : "I agree with the concept.  I wish we could announce our own addresses to these peers, but I think doing so results in a topology leak. :(   The reason I'd like this is that if an attacker eclipses a node except for its blocks only links it will eventually eclipse its blocks-only links too through control of the addrman state.",
      "created_at" : "2019-04-05T19:40:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480398699",
      "id" : 480398699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDM5ODY5OQ==",
      "updated_at" : "2019-04-05T19:40:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480398699",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This approach was motivated by the [TxProbe paper.](https://arxiv.org/pdf/1812.00942.pdf)  Fundamentally, transaction relay is going to leak information about our node's peers (as long as we care about not wasting bandwidth).  Rather than combat transaction-relay based inferences, which I think is a lost cause in the long-run even if there are improvements we can make in the short-term, I figure we can directly address why we care about keeping the graph private.\r\n\r\nSome considerations I had while working on this:\r\n\r\n * Is 2 the right number of blocks-only connections?  From a robustness standpoint, more connections like this are better; however there's a tradeoff with resource utilization.  Two resources that occurred to me to worry about were the memory used by each CNode object (hence the refactor commits that allow the transaction-relay data structures to not be instantiated for the blocks-only peers), and the number of connection slots on the network (I figure going from 8 to 10 is not that bad?).  I also did some simulations to verify that a random graph of 10000 peers would be fully connected if each peer makes 2 outbound connections to random other peers, which I thought was a good justification for 2 being a useful number of outbounds to add.\r\n\r\n * How should addrman interactions work on these blocks-only connections?  My approach attempts to leave addrman unchanged as a result of these connections, neither processing addr messages nor sending any, to avoid leaking information via addr messages that we relay to other peers.  But I have not given a lot of thought to what kind of attacks are possible using addrman, nor what the consequences are to not updating addrman with information from our blocks-only peers.\r\n",
      "created_at" : "2019-04-05T19:41:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480398802",
      "id" : 480398802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDM5ODgwMg==",
      "updated_at" : "2019-04-06T01:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480398802",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I also did some simulations to verify that a random graph of 10000 peers would be fully connected if each peer makes 2 outbound connections to random other peers,\r\n\r\nCan you run these simulations assuming x% of the 10,000 peers are black holes (don't connect the graph), for various values of x%?\r\n\r\n2 might be fine for now, but ultimately I'd like to optimize memory usage for both inbound and outbound blocksonly links, then at least double the inbound connection limit for blocks only links, and make 8 blocks only links.  (I suspect running that simulation assuming reasonable number of black hole peers will show that 2 is not really enough).     ",
      "created_at" : "2019-04-05T19:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480400958",
      "id" : 480400958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDQwMDk1OA==",
      "updated_at" : "2019-04-05T19:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480400958",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I figure we can directly address why we care about keeping the graph private\r\n\r\nTo the uninformed p2p reader this reason is?",
      "created_at" : "2019-04-05T20:15:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480408075",
      "id" : 480408075,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDQwODA3NQ==",
      "updated_at" : "2019-04-05T20:15:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480408075",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16003](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16003.html) (init: an incorrect amount of file descriptors is requested, and a different amount is also asserted by tryphe)\n* [#15976](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15976.html) (refactor: move methods under CChainState (pt. 1) by jamesob)\n* [#15502](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15502.html) (Speed up initial connection to p2p network by ajtowns)\n* [#15253](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15253.html) (Net: Consistently log outgoing INV messages by Empact)\n* [#14856](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14856.html) (net: remove more CConnman globals (theuni) by dongcarl)\n* [#14033](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14033.html) (p2p: Drop CADDR_TIME_VERSION checks now that MIN_PEER_PROTO_VERSION is greater by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-04-05T21:12:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480423675",
      "id" : 480423675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDQyMzY3NQ==",
      "updated_at" : "2019-05-17T15:01:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480423675",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> To the uninformed p2p reader this reason is?\r\n\r\n> (b) Knowledge of the network graph could be used to split a target node or\r\nnodes from the honest network (eg by knowing which peers to attack in order to\r\nachieve a network split).",
      "created_at" : "2019-04-05T21:37:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480430294",
      "id" : 480430294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDQzMDI5NA==",
      "updated_at" : "2019-04-05T21:37:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480430294",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can you run these simulations assuming x% of the 10,000 peers are black holes (don't connect the graph), for various values of x%?\r\n\r\nThis table shows my simulation results for various black hole rates, with various values of how many outbound connections we make (k=2 is what I've implemented in this PR).  This is on a 10,000 node graph with no non-listening nodes.  Each table entry shows the success count (where success is defined as \"the subgraph of non-black-hole nodes is connected\") out of 1000 simulations.\r\n\r\n\r\nblack hole rate | k=2 | k=4 | k=6 | k=8\r\n-- | -- | -- | -- | --\r\n0 | 1000 | 1000 | 1000 | 1000\r\n5% | 30 | 998 | 1000 | 1000\r\n10% | 0 | 976 | 1000 | 1000\r\n15% | ÃÂ  | 867 | 999 | 1000\r\n20% | ÃÂ  | 598 | 994 | 1000\r\n25% | ÃÂ  | 229 | 978 | 1000\r\n30% | ÃÂ  | 33 | 928 | 998\r\n35% | ÃÂ  | 2 | 812 | 992\r\n\r\n\r\n> 2 might be fine for now, but ultimately I'd like to optimize memory usage for both inbound and outbound blocksonly links, then at least double the inbound connection limit for blocks only links, and make 8 blocks only links.\r\n\r\nThis is roughly what I have in mind as well.  I think we need a p2p protocol change to allow negotiating blocks-only links (so that the peer on the other side of our connection knows that the inbound peer won't turn transaction relay on later), so I figured we could start small for now.",
      "created_at" : "2019-04-08T14:59:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480868516",
      "id" : 480868516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDg2ODUxNg==",
      "updated_at" : "2019-04-08T14:59:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480868516",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sdaftuar Thanks for sharing the results of the analysis! Would you be willing to share the simulation scripts?",
      "created_at" : "2019-04-08T17:32:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-480928635",
      "id" : 480928635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MDkyODYzNQ==",
      "updated_at" : "2019-04-08T17:32:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480928635",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift My simulation code is unreadable, and also may have bugs, so I'd prefer that anyone interested in this would independently corroborate my results from scratch. ",
      "created_at" : "2019-04-09T11:57:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-481220805",
      "id" : 481220805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MTIyMDgwNQ==",
      "updated_at" : "2019-04-09T11:57:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/481220805",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> separating block relay from transaction relay;\r\n\r\nThis is indeed a good idea. I also see it as a small step towards peer rotation, I think this suggestion makes it easier to reason about rotation.\r\n\r\nI'm not sure if this is strongly related to the data you provided, but I'm also curious how many nodes have to be attacked (suspended?) to split network in halves etc.",
      "created_at" : "2019-04-10T17:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-481787812",
      "id" : 481787812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4MTc4NzgxMg==",
      "updated_at" : "2019-04-10T17:35:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/481787812",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Wouldn't this break all the benefits of compact blocks? (Ignoring that with the current implementation, block relay would likely still occur on the normal connections.)",
      "created_at" : "2019-04-18T18:41:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-484634796",
      "id" : 484634796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NDYzNDc5Ng==",
      "updated_at" : "2019-04-18T18:41:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484634796",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr I don't think so.  The idea is that nodes are still expected to do transaction relay with other peers, and my belief is that transaction propagation is good enough that compact block relay works just fine on these blocksonly links.  I believe my testing of this branch confirms that as well, but I'd welcome additional testers to corroborate those results in case I'm overlooking something.",
      "created_at" : "2019-04-18T19:57:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-484666402",
      "id" : 484666402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NDY2NjQwMg==",
      "updated_at" : "2019-04-18T19:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484666402",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-05-16T18:05:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-493172934",
      "id" : 493172934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzE3MjkzNA==",
      "updated_at" : "2019-05-16T18:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493172934",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK: I like the idea",
      "created_at" : "2019-05-16T19:13:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-493196048",
      "id" : 493196048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzE5NjA0OA==",
      "updated_at" : "2019-05-16T19:13:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493196048",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285334943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285334943"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/15759/commits/c36939ca2ea636dce8047065d88c2e70bd418405\r\n\r\nMove initialization here and drop constructor:\r\n```cpp\r\nCRollingBloomFilter addrKnown GUARDED_BY(cs_addrsend){5000, 0.001};\r\n```\r\n",
      "commit_id" : "1b90f9cafb575da27bdfa5c61c254e34ad018a20",
      "created_at" : "2019-05-18T09:01:18Z",
      "diff_hunk" : "@@ -691,12 +691,18 @@ class CNode\n     uint256 hashContinue;\n     std::atomic<int> nStartingHeight{-1};\n \n-    // flood relay\n-    std::vector<CAddress> vAddrToSend;\n-    CRollingBloomFilter addrKnown;\n-    bool fGetAddr{false};\n-    int64_t nNextAddrSend GUARDED_BY(cs_sendProcessing){0};\n-    int64_t nNextLocalAddrSend GUARDED_BY(cs_sendProcessing){0};\n+    struct AddrRelay {\n+        CCriticalSection cs_addrsend;\n+        std::vector<CAddress> vAddrToSend GUARDED_BY(cs_addrsend);\n+        CRollingBloomFilter addrKnown GUARDED_BY(cs_addrsend);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285334943",
      "id" : 285334943,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NTMzNDk0Mw==",
      "original_commit_id" : "c36939ca2ea636dce8047065d88c2e70bd418405",
      "original_position" : 13,
      "path" : "src/net.h",
      "position" : 87,
      "pull_request_review_id" : 239190945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759",
      "updated_at" : "2019-05-18T09:21:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285334943",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/15759/commits/c36939ca2ea636dce8047065d88c2e70bd418405\r\n\r\nCould explain why the new mutex? This commit isn't just refactor.",
      "commit_id" : "1b90f9cafb575da27bdfa5c61c254e34ad018a20",
      "created_at" : "2019-05-18T09:04:33Z",
      "diff_hunk" : "@@ -691,12 +691,18 @@ class CNode\n     uint256 hashContinue;\n     std::atomic<int> nStartingHeight{-1};\n \n-    // flood relay\n-    std::vector<CAddress> vAddrToSend;\n-    CRollingBloomFilter addrKnown;\n-    bool fGetAddr{false};\n-    int64_t nNextAddrSend GUARDED_BY(cs_sendProcessing){0};\n-    int64_t nNextLocalAddrSend GUARDED_BY(cs_sendProcessing){0};\n+    struct AddrRelay {\n+        CCriticalSection cs_addrsend;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335020",
      "id" : 285335020,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NTMzNTAyMA==",
      "original_commit_id" : "c36939ca2ea636dce8047065d88c2e70bd418405",
      "original_position" : 11,
      "path" : "src/net.h",
      "position" : 85,
      "pull_request_review_id" : 239190945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759",
      "updated_at" : "2019-05-18T09:21:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335020",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335094"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335094"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/15759/commits/c36939ca2ea636dce8047065d88c2e70bd418405\r\n\r\nnit, coult early return before the above lock:\r\n```cpp\r\nif (!_addr.IsValid()) return;\r\nLOCK(m_addr_relay.cs_addrsend);\r\nif (!m_addr_relay.addrKnown.contains(_addr.GetKey())) {\r\n```",
      "commit_id" : "1b90f9cafb575da27bdfa5c61c254e34ad018a20",
      "created_at" : "2019-05-18T09:06:31Z",
      "diff_hunk" : "@@ -812,19 +818,21 @@ class CNode\n \n     void AddAddressKnown(const CAddress& _addr)\n     {\n-        addrKnown.insert(_addr.GetKey());\n+        LOCK(m_addr_relay.cs_addrsend);\n+        m_addr_relay.addrKnown.insert(_addr.GetKey());\n     }\n \n     void PushAddress(const CAddress& _addr, FastRandomContext &insecure_rand)\n     {\n+        LOCK(m_addr_relay.cs_addrsend);\n         // Known checking here is only to save space from duplicates.\n         // SendMessages will filter it again for knowns that were added\n         // after addresses were pushed.\n-        if (_addr.IsValid() && !addrKnown.contains(_addr.GetKey())) {\n-            if (vAddrToSend.size() >= MAX_ADDR_TO_SEND) {\n-                vAddrToSend[insecure_rand.randrange(vAddrToSend.size())] = _addr;\n+        if (_addr.IsValid() && !m_addr_relay.addrKnown.contains(_addr.GetKey())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335094",
      "id" : 285335094,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NTMzNTA5NA==",
      "original_commit_id" : "c36939ca2ea636dce8047065d88c2e70bd418405",
      "original_position" : 43,
      "path" : "src/net.h",
      "position" : 182,
      "pull_request_review_id" : 239190945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759",
      "updated_at" : "2019-05-18T09:21:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335094",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335134"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/15759/commits/c36939ca2ea636dce8047065d88c2e70bd418405\r\n\r\nnit, could add `{ }`",
      "commit_id" : "1b90f9cafb575da27bdfa5c61c254e34ad018a20",
      "created_at" : "2019-05-18T09:07:59Z",
      "diff_hunk" : "@@ -3551,12 +3559,13 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n                     }\n                 }\n             }\n-            pto->vAddrToSend.clear();\n+            pto->m_addr_relay.vAddrToSend.clear();\n             if (!vAddr.empty())\n                 connman->PushMessage(pto, msgMaker.Make(NetMsgType::ADDR, vAddr));\n             // we only send the big addr message once\n-            if (pto->vAddrToSend.capacity() > 40)\n-                pto->vAddrToSend.shrink_to_fit();\n+            if (pto->m_addr_relay.vAddrToSend.capacity() > 40)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335134",
      "id" : 285335134,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NTMzNTEzNA==",
      "original_commit_id" : "c36939ca2ea636dce8047065d88c2e70bd418405",
      "original_position" : 95,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 239190945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759",
      "updated_at" : "2019-05-18T09:21:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335134",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335336"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/15759/commits/5e6e12ef04b640d32d0341a3a1874fde46b0f95e\r\n\r\nInitialize here\r\n```cpp\r\nCRollingBloomFilter filterInventoryKnown GUARDED_BY(cs_tx_inventory){50000, 0.000001};\r\n```\r\nAnd can drop `.reset()` call, `CRollingBloomFilter` constructor already calls it.",
      "commit_id" : "1b90f9cafb575da27bdfa5c61c254e34ad018a20",
      "created_at" : "2019-05-18T09:15:07Z",
      "diff_hunk" : "@@ -704,24 +697,44 @@ class CNode\n \n     AddrRelay m_addr_relay;\n \n-    // inventory based relay\n-    CRollingBloomFilter filterInventoryKnown GUARDED_BY(cs_inventory);\n-    // Set of transaction ids we still have to announce.\n-    // They are sorted by the mempool before relay, so the order is not important.\n-    std::set<uint256> setInventoryTxToSend;\n     // List of block ids we still have announce.\n     // There is no final sorting before sending, as they are always sent immediately\n     // and in the order requested.\n     std::vector<uint256> vInventoryBlockToSend GUARDED_BY(cs_inventory);\n     CCriticalSection cs_inventory;\n-    int64_t nNextInvSend{0};\n+\n+    struct TxRelay {\n+        mutable CCriticalSection cs_filter;\n+        // We use fRelayTxes for two purposes -\n+        // a) it allows us to not relay tx invs before receiving the peer's version message\n+        // b) the peer may tell us in its version message that we should not relay tx invs\n+        //    unless it loads a bloom filter.\n+        bool fRelayTxes GUARDED_BY(cs_filter){false};\n+        std::unique_ptr<CBloomFilter> pfilter PT_GUARDED_BY(cs_filter);\n+\n+        mutable CCriticalSection cs_tx_inventory;\n+        CRollingBloomFilter filterInventoryKnown GUARDED_BY(cs_tx_inventory);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#discussion_r285335336",
      "id" : 285335336,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4NTMzNTMzNg==",
      "original_commit_id" : "5e6e12ef04b640d32d0341a3a1874fde46b0f95e",
      "original_position" : 42,
      "path" : "src/net.h",
      "position" : 116,
      "pull_request_review_id" : 239190945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15759",
      "updated_at" : "2019-05-18T09:21:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/285335336",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\nI'm still trying to understand this more detailed: does that mean that with 2 block-only connection and an assumed 5% black-hole-nodes rate, we only have a 3% chance to succeed? Since we relay, I guess there is no chance we could identify (and thus disconnect) black-hole peers?",
      "created_at" : "2019-05-18T10:12:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-493665389",
      "id" : 493665389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15759",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzY2NTM4OQ==",
      "updated_at" : "2019-05-18T10:12:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493665389",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
