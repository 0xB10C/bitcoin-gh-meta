[
   {
      "author_association" : "NONE",
      "body" : "HWI supplies descriptors that include the non-canonical descriptor with the h for hardened and are converted when ran through getdescriptorinfo\r\n\r\nIt would be nice if getdescriptorinfo would not change what is provided to it and provides a checksum for what was the input",
      "created_at" : "2019-05-06T17:15:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-489699710",
      "id" : 489699710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTY5OTcxMA==",
      "updated_at" : "2019-05-06T17:15:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489699710",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/12241959?v=4",
         "events_url" : "https://api.github.com/users/myveryown/events{/privacy}",
         "followers_url" : "https://api.github.com/users/myveryown/followers",
         "following_url" : "https://api.github.com/users/myveryown/following{/other_user}",
         "gists_url" : "https://api.github.com/users/myveryown/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/myveryown",
         "id" : 12241959,
         "login" : "myveryown",
         "node_id" : "MDQ6VXNlcjEyMjQxOTU5",
         "organizations_url" : "https://api.github.com/users/myveryown/orgs",
         "received_events_url" : "https://api.github.com/users/myveryown/received_events",
         "repos_url" : "https://api.github.com/users/myveryown/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/myveryown/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/myveryown/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/myveryown"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was working with @myveryown earlier today on debugging a difficulty using descriptors and I found it very unintuitive that this command returns not just an obvious checksum (which is appreciated) but also converts `h` to `'` in origin info in a way that's not immediately obvious:\r\n\r\n```bash\r\n$ bitcoin-cli getdescriptorinfo \"wpkh([f6bb4c63/0h/0h/30h]028429a37c3f09c8c5cc1fab58df32d1a7da7616c748a40eeb1aae1d64acb9c5cc)\" | jq -r .descriptor\r\nwpkh([f6bb4c63/0'/0'/30']028429a37c3f09c8c5cc1fab58df32d1a7da7616c748a40eeb1aae1d64acb9c5cc)#5wdxpxcx\r\n```\r\n\r\nIt wasn't until @gwillen pointed out this substitution of `h` with `'` that I realized what was going wrong with my attempts to troubleshoot @myveryown's problem.  I'm in agreement with the OP on both points:\r\n\r\n1. getdescriptorinfo should provide a way to get the checksum for a non-canonical descriptor\r\n2. Paths using hardened derivation should preferentially be indicated by an `h` rather than a `'`\r\n\r\nI think the output should probably look something like this:\r\n\r\n```text\r\n$ bitcoin-cli getdescriptorinfo \"wpkh([f6bb4c63/0h/0h/30h]028429a37c3f09c8c5cc1fab58df32d1a7da7616c748a40eeb1aae1d64acb9c5cc)\"\r\n{\r\n  \"descriptor\": \"wpkh([f6bb4c63/0h/0h/30h]028429a37c3f09c8c5cc1fab58df32d1a7da7616c748a40eeb1aae1d64acb9c5cc)#vk9vfu0h\"\r\n  \"normalized\": \"wpkh([f6bb4c63/0'/0'/30']028429a37c3f09c8c5cc1fab58df32d1a7da7616c748a40eeb1aae1d64acb9c5cc)#5wdxpxcx\",\r\n  \"isrange\": false,\r\n  \"issolvable\": true,\r\n  \"hasprivatekeys\": false\r\n}\r\n```\r\n\r\n(Instead of \"canonical\", I use \"normalized\" because it has the same number of letters as \"descriptor\" and so aligns well in fixed-width displays.  Also canonical seems more ambiguous than normalized in this context.)",
      "created_at" : "2019-05-06T17:57:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-489714275",
      "id" : 489714275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTcxNDI3NQ==",
      "updated_at" : "2019-05-06T17:57:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489714275",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61096?v=4",
         "events_url" : "https://api.github.com/users/harding/events{/privacy}",
         "followers_url" : "https://api.github.com/users/harding/followers",
         "following_url" : "https://api.github.com/users/harding/following{/other_user}",
         "gists_url" : "https://api.github.com/users/harding/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/harding",
         "id" : 61096,
         "login" : "harding",
         "node_id" : "MDQ6VXNlcjYxMDk2",
         "organizations_url" : "https://api.github.com/users/harding/orgs",
         "received_events_url" : "https://api.github.com/users/harding/received_events",
         "repos_url" : "https://api.github.com/users/harding/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/harding/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/harding/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/harding"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm going to take a crack at this today -- I'm going to both switch the default marker to \"h\", and have getaddressinfo return the same descriptor provided, rather than alter it. Then people can bikeshed the result. ;-)\r\n\r\n(EDIT: Oh, I like @harding 's suggestion of providing both the as-given descriptor and the normalized descriptor, will do.)",
      "created_at" : "2019-05-06T18:26:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-489724528",
      "id" : 489724528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTcyNDUyOA==",
      "updated_at" : "2019-05-06T18:27:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489724528",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on making descriptor checksum based on `h` or `'` given by the user, rather than canonical form. But let's add an error for mixed usage.\r\n\r\nI don't think the `normalized` field is useful.\r\n\r\nI'm fine with switching the default to `h`. In addition to RPC usage, it's probably also less susceptible to graphical operating systems messing with quote marks.\r\n\r\nI'm on the fence regarding private keys. At least our RPC should not echo private keys, so it would have to return the checksum without the rest of the descriptor. There could be a separate checksum_private return field for this case.\r\n\r\nCan you update the PR description to say `getdescriptorinfo` instead of `getaddressinfo` (assuming that's what you meant)?",
      "created_at" : "2019-05-07T10:17:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-490022807",
      "id" : 490022807,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDAyMjgwNw==",
      "updated_at" : "2019-05-07T10:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490022807",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry yes, that is what I meant, fixed.",
      "created_at" : "2019-05-07T20:35:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-490245206",
      "id" : 490245206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDI0NTIwNg==",
      "updated_at" : "2019-05-07T20:35:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490245206",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, it seems like changing the default character from \"'\" to \"h\" is a one-line change, whereas preserving the user's original usage BUT still stripping private keys is going to be a hugely-invasive change to descriptor parsing (since we parse and deparse completely in order to print right now, and do not track which spelling was used), and giving a sensible error message for mixed usage is a different hugely-invasive change (since we do not currently have any way of returning error codes from parsing, so they would have to be added.)\r\n\r\nSo I'm going to PR the one-line change as \"hopefully the best use of time right now\", since I'm not aware of anybody clamoring to use \"'\" instead of \"h\", and everyone seems to prefer the opposite.",
      "created_at" : "2019-05-08T01:45:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15740#issuecomment-490315299",
      "id" : 490315299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDMxNTI5OQ==",
      "updated_at" : "2019-05-08T01:45:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490315299",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   }
]
