[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246022808"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246022808"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think this should use the same script.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T14:50:14Z",
      "diff_hunk" : "@@ -875,6 +875,30 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n     return true;\n }\n \n+bool CWallet::RemoveFromWallet(const CTransaction& tx)\n+{\n+    LOCK(cs_wallet);\n+\n+    if (!WalletBatch(*database).EraseTx(tx.GetHash()))\n+        return false;\n+\n+    WalletLogPrintf(\"RemoveFromWallet %s\\n\", tx.GetHash().ToString());\n+\n+    // Notify UI of new or updated transaction\n+    NotifyTransactionChanged(this, tx.GetHash(), CT_DELETED);\n+\n+    // Notify an external script when a wallet transaction comes in or is updated\n+    std::string strCmd = gArgs.GetArg(\"-walletnotify\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246022808",
      "id" : 246022808,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjAyMjgwOA==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 892,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190275992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246022808",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246022912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246022912"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Add braces here and throughout.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T14:50:31Z",
      "diff_hunk" : "@@ -343,6 +343,89 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    if (::IsMine(*pwallet, script) == ISMINE_SPENDABLE)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246022912",
      "id" : 246022912,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjAyMjkxMg==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 349,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 190275992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246022912",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246023468"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246023468"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe submit this change in a separate PR.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T14:52:08Z",
      "diff_hunk" : "@@ -947,7 +971,10 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockI\n             if (pIndex != nullptr)\n                 wtx.SetMerkleBranch(pIndex, posInBlock);\n \n-            return AddToWallet(wtx, false);\n+            if (IsMine(tx) || IsFromMe(tx))\n+                return AddToWallet(wtx, false);\n+\n+            return RemoveFromWallet(tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246023468",
      "id" : 246023468,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjAyMzQ2OA==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 969,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190275992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246023468",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246052520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246052520"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, that makes a lot of sense now that you point that out, however, I have no idea what I'd name that. Any ideas?",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T16:01:56Z",
      "diff_hunk" : "@@ -875,6 +875,30 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n     return true;\n }\n \n+bool CWallet::RemoveFromWallet(const CTransaction& tx)\n+{\n+    LOCK(cs_wallet);\n+\n+    if (!WalletBatch(*database).EraseTx(tx.GetHash()))\n+        return false;\n+\n+    WalletLogPrintf(\"RemoveFromWallet %s\\n\", tx.GetHash().ToString());\n+\n+    // Notify UI of new or updated transaction\n+    NotifyTransactionChanged(this, tx.GetHash(), CT_DELETED);\n+\n+    // Notify an external script when a wallet transaction comes in or is updated\n+    std::string strCmd = gArgs.GetArg(\"-walletnotify\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246052520",
      "id" : 246052520,
      "in_reply_to_id" : 246022808,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA1MjUyMA==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 892,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190314269,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246052520",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Split into 2 PRs, check #15130",
      "created_at" : "2019-01-08T16:31:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-452362966",
      "id" : 452362966,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MjM2Mjk2Ng==",
      "updated_at" : "2019-01-08T16:31:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452362966",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246065849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246065849"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe remove notification? This is only happens after the RPC so the client doesn't need a notification.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T16:36:36Z",
      "diff_hunk" : "@@ -875,6 +875,30 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n     return true;\n }\n \n+bool CWallet::RemoveFromWallet(const CTransaction& tx)\n+{\n+    LOCK(cs_wallet);\n+\n+    if (!WalletBatch(*database).EraseTx(tx.GetHash()))\n+        return false;\n+\n+    WalletLogPrintf(\"RemoveFromWallet %s\\n\", tx.GetHash().ToString());\n+\n+    // Notify UI of new or updated transaction\n+    NotifyTransactionChanged(this, tx.GetHash(), CT_DELETED);\n+\n+    // Notify an external script when a wallet transaction comes in or is updated\n+    std::string strCmd = gArgs.GetArg(\"-walletnotify\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246065849",
      "id" : 246065849,
      "in_reply_to_id" : 246022808,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA2NTg0OQ==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 892,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190331916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246065849",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246073751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246073751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah that's true",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T16:57:07Z",
      "diff_hunk" : "@@ -875,6 +875,30 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n     return true;\n }\n \n+bool CWallet::RemoveFromWallet(const CTransaction& tx)\n+{\n+    LOCK(cs_wallet);\n+\n+    if (!WalletBatch(*database).EraseTx(tx.GetHash()))\n+        return false;\n+\n+    WalletLogPrintf(\"RemoveFromWallet %s\\n\", tx.GetHash().ToString());\n+\n+    // Notify UI of new or updated transaction\n+    NotifyTransactionChanged(this, tx.GetHash(), CT_DELETED);\n+\n+    // Notify an external script when a wallet transaction comes in or is updated\n+    std::string strCmd = gArgs.GetArg(\"-walletnotify\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246073751",
      "id" : 246073751,
      "in_reply_to_id" : 246022808,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjA3Mzc1MQ==",
      "original_commit_id" : "c6e9bca890bcfbe25bacec17a5cebb10dc677519",
      "original_line" : 892,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190342176,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246073751",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246204244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246204244"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This looks a bit invasive.\r\nI haven't looked closer at it, but would it not be possible to remove transaction with the removed addresses during `LoadToWallet()` rather then an expansive rescan?",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-08T23:35:58Z",
      "diff_hunk" : "@@ -947,7 +963,10 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockI\n             if (pIndex != nullptr)\n                 wtx.SetMerkleBranch(pIndex, posInBlock);\n \n-            return AddToWallet(wtx, false);\n+            if (IsMine(tx) || IsFromMe(tx))\n+                return AddToWallet(wtx, false);\n+\n+            return RemoveFromWallet(tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246204244",
      "id" : 246204244,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjIwNDI0NA==",
      "original_commit_id" : "a3a12335264d88ec2d6ccfe41ad93c0a26c62eea",
      "original_line" : 969,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 190507249,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246204244",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not opposed against removing scripts. But maybe combining with `importmulti` for more advanced script removing and batches would eventually make sense.",
      "created_at" : "2019-01-08T23:36:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-452491378",
      "id" : 452491378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MjQ5MTM3OA==",
      "updated_at" : "2019-01-08T23:36:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452491378",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246537640"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246537640"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Drop this line :-)",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-09T20:49:19Z",
      "diff_hunk" : "@@ -343,6 +343,102 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    isminetype ismine = ::IsMine(*pwallet, script);\n+    if (ismine == ISMINE_SPENDABLE) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address\");\n+    } else if (ismine == ISMINE_NO) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address\");\n+    }\n+\n+    pwallet->MarkDirty();\n+\n+    if (pwallet->HaveWatchOnly(script) && !pwallet->RemoveWatchOnly(script)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing address from wallet\");\n+    }\n+    \n+    CTxDestination destination;\n+    if (ExtractDestination(script, destination)) {\n+        pwallet->DelAddressBook(destination);\n+    }\n+}\n+\n+static void RemoveAddress(CWallet* const pwallet, const CTxDestination& dest) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    CScript script = GetScriptForDestination(dest);\n+    RemoveScript(pwallet, script);\n+    // remove from address book\n+    if (IsValidDestination(dest)) {\n+        pwallet->DelAddressBook(dest);\n+    }\n+}\n+\n+UniValue removeaddress(const JSONRPCRequest& request)\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    CWallet* const pwallet = wallet.get();\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            RPCHelpMan{\"removeaddress\",\n+                \"\\nRemoves an address that was being watched as if it were in your wallet but was not being used to spend. Requires a new wallet backup.\\n\",\n+                {\n+                    {\"address\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The Bitcoin address\"},\n+                    {\"rescan\", RPCArg::Type::BOOL, /* opt */ true, /* default_val */ \"true\", \"Rescan the wallet for transactions\"},\n+                }}\n+                .ToString() +\n+            \"\\nNote: This call can take over an hour to complete if rescan is true, during that time, other rpc calls\\n\"\n+            \"may report that the removed address exists but related transactions are still missing, leading to temporarily incorrect/bogus balances and unspent outputs until rescan completes.\\n\"\n+            \"\\nExamples:\\n\"\n+            \"\\nRemove an address with rescan\\n\"\n+            + HelpExampleCli(\"removeaddress\", \"\\\"myaddress\\\"\") +\n+            \"\\nRemove an address without rescan\\n\"\n+            + HelpExampleCli(\"removeaddress\", \"\\\"myaddress\\\" false\") +\n+            \"\\nAs a JSON-RPC call\\n\"\n+            + HelpExampleRpc(\"removeaddress\", \"\\\"myaddress\\\", false\")\n+        );\n+\n+    // Whether to perform rescan after import\n+    bool fRescan = true;\n+    if (!request.params[1].isNull()) {\n+        fRescan = request.params[1].get_bool();\n+    }\n+\n+    if (fRescan && fPruneMode) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Rescan is disabled in pruned mode\");\n+    }\n+\n+    WalletRescanReserver reserver(pwallet);\n+    if (fRescan && !reserver.reserve()) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet is currently rescanning. Abort existing rescan or wait.\");\n+    }\n+\n+    {\n+        auto locked_chain = pwallet->chain().lock();\n+        LOCK(pwallet->cs_wallet);\n+\n+        CTxDestination dest = DecodeDestination(request.params[0].get_str());\n+        if (IsValidDestination(dest)) {\n+            RemoveAddress(pwallet, dest);\n+        }\n+        else {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n+        }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246537640",
      "id" : 246537640,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjUzNzY0MA==",
      "original_commit_id" : "a3a12335264d88ec2d6ccfe41ad93c0a26c62eea",
      "original_line" : 432,
      "original_position" : 90,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 190931771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246537640",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-01-09T22:47:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-452898412",
      "id" : 452898412,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1Mjg5ODQxMg==",
      "updated_at" : "2020-05-15T10:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452898412",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246623943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246623943"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Without this, it will remove the balance and addresses from the wallets but it will leave all the transactions with their ids in the wallet so with this function it will remove them from the wallet during the rescan.  I am not sure if there is a faster way to do it.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-10T03:04:49Z",
      "diff_hunk" : "@@ -947,7 +963,10 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockI\n             if (pIndex != nullptr)\n                 wtx.SetMerkleBranch(pIndex, posInBlock);\n \n-            return AddToWallet(wtx, false);\n+            if (IsMine(tx) || IsFromMe(tx))\n+                return AddToWallet(wtx, false);\n+\n+            return RemoveFromWallet(tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246623943",
      "id" : 246623943,
      "in_reply_to_id" : 246204244,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjYyMzk0Mw==",
      "original_commit_id" : "a3a12335264d88ec2d6ccfe41ad93c0a26c62eea",
      "original_line" : 969,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 191034643,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246623943",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246645536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246645536"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't see the reason why a rescan would be required. IMO it's only required after adding a script where its creation-timestamp lies in the past (expected historical transactions). You don't need to go through the whole (or part of) the blockchain history just to know that a transaction in your wallet doesn't belong to you anymore. Also, don't forget that rescans are incompatible for pruned peers.\r\n\r\nIt should be sufficient to loop though `mapWallet` and remove transactions that are no longer `IsMine(tx) || IsFromMe(tx)` (after the deletion of one or many scripts/addresses).",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-01-10T06:15:00Z",
      "diff_hunk" : "@@ -947,7 +963,10 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const CBlockI\n             if (pIndex != nullptr)\n                 wtx.SetMerkleBranch(pIndex, posInBlock);\n \n-            return AddToWallet(wtx, false);\n+            if (IsMine(tx) || IsFromMe(tx))\n+                return AddToWallet(wtx, false);\n+\n+            return RemoveFromWallet(tx);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r246645536",
      "id" : 246645536,
      "in_reply_to_id" : 246204244,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NjY0NTUzNg==",
      "original_commit_id" : "a3a12335264d88ec2d6ccfe41ad93c0a26c62eea",
      "original_line" : 969,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 191060664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/246645536",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added functionality to remove scripts as well",
      "created_at" : "2019-01-12T00:08:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-453696884",
      "id" : 453696884,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MzY5Njg4NA==",
      "updated_at" : "2019-01-12T00:08:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/453696884",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks much better!\r\nWill test soon.",
      "created_at" : "2019-01-12T00:15:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-453698299",
      "id" : 453698299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MzY5ODI5OQ==",
      "updated_at" : "2019-01-12T00:15:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/453698299",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@benthecarman could you address [Travis linter failure](https://travis-ci.org/bitcoin/bitcoin/jobs/478599787)?",
      "created_at" : "2019-01-16T20:48:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-454934756",
      "id" : 454934756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDkzNDc1Ng==",
      "updated_at" : "2019-01-16T20:48:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454934756",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added release notes",
      "created_at" : "2019-01-17T19:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-455309384",
      "id" : 455309384,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTMwOTM4NA==",
      "updated_at" : "2019-01-17T19:52:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455309384",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and fixed release notes",
      "created_at" : "2019-02-04T11:42:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-460218860",
      "id" : 460218860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDIxODg2MA==",
      "updated_at" : "2019-02-04T11:42:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460218860",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could trailing whitespaces be removed?\r\nSee Travis log: https://travis-ci.org/bitcoin/bitcoin/jobs/488455534",
      "created_at" : "2019-02-04T11:55:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-460222103",
      "id" : 460222103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDIyMjEwMw==",
      "updated_at" : "2019-02-04T11:56:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460222103",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@hebasto Sorry about that, fixed",
      "created_at" : "2019-02-04T12:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-460228459",
      "id" : 460228459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDIyODQ1OQ==",
      "updated_at" : "2019-02-04T12:15:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460228459",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314394732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314394732"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Did you mean \"Remove\" instead of \"Add\"?",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-08-15T16:35:26Z",
      "diff_hunk" : "@@ -350,6 +350,98 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script, bool isRedeemScript) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    isminetype ismine = ::IsMine(*pwallet, script);\n+    if (!isRedeemScript && ismine == ISMINE_SPENDABLE) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address\");\n+    } else if (!isRedeemScript && ismine == ISMINE_NO) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address or script\");\n+    }\n+    assert(ismine == ISMINE_WATCH_ONLY || isRedeemScript);\n+\n+    if (pwallet->HaveWatchOnly(script) && !pwallet->RemoveWatchOnly(script)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing address/script from wallet\");\n+    }\n+    if (isRedeemScript){\n+        const CScriptID id(script);\n+        if (!pwallet->HaveCScript(id)) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing p2sh redeemScript from wallet\");\n+        }\n+        RemoveAddress(pwallet, id);\n+    } else {\n+        CTxDestination destination;\n+        if (ExtractDestination(script, destination)) {\n+            pwallet->DelAddressBook(destination);\n+        }\n+    }\n+    pwallet->RemoveOldTransactions();\n+}\n+\n+static void RemoveAddress(CWallet* const pwallet, const CTxDestination& dest) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    CScript script = GetScriptForDestination(dest);\n+    RemoveScript(pwallet, script, false);\n+    // remove from address book\n+    if (IsValidDestination(dest)) {\n+        pwallet->DelAddressBook(dest);\n+    }\n+}\n+\n+UniValue removeaddress(const JSONRPCRequest& request)\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    CWallet* const pwallet = wallet.get();\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            RPCHelpMan{\"removeaddress\",\n+                \"\\nRemoves an address or script (in hex) that was being watched as if it were in your wallet but was not being used to spend. Requires a new wallet backup.\\n\",\n+                {\n+                    {\"address\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The Bitcoin address (or hex-encoded script)\"},\n+                    {\"p2sh\", RPCArg::Type::BOOL, /* opt */ true, /* default_val */ \"false\", \"Add the P2SH version of the script as well\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314394732",
      "id" : 314394732,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDM5NDczMg==",
      "original_commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "original_line" : 406,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 275537287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314394732",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314395873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314395873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this is too broad. Suggest adding an additional condition that the to be deleted transaction is to or from the specific watch-only address we're removing.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-08-15T16:38:31Z",
      "diff_hunk" : "@@ -938,6 +938,25 @@ void CWallet::LoadToWallet(const CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions()\n+{\n+    AssertLockHeld(cs_wallet);\n+\n+    std::vector<CWalletTx> vWtx;\n+    for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it) {\n+        CWalletTx tx = it->second;\n+        if (!IsFromMe(*tx.tx) && !IsMine(*tx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314395873",
      "id" : 314395873,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDM5NTg3Mw==",
      "original_commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "original_line" : 948,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 275537287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314395873",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314396254"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314396254"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest adding a third argument `purge_transactions` (default true) about removing existing transactions from the wallet. ",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2019-08-15T16:39:37Z",
      "diff_hunk" : "@@ -350,6 +350,98 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script, bool isRedeemScript) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    isminetype ismine = ::IsMine(*pwallet, script);\n+    if (!isRedeemScript && ismine == ISMINE_SPENDABLE) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address\");\n+    } else if (!isRedeemScript && ismine == ISMINE_NO) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address or script\");\n+    }\n+    assert(ismine == ISMINE_WATCH_ONLY || isRedeemScript);\n+\n+    if (pwallet->HaveWatchOnly(script) && !pwallet->RemoveWatchOnly(script)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing address/script from wallet\");\n+    }\n+    if (isRedeemScript){\n+        const CScriptID id(script);\n+        if (!pwallet->HaveCScript(id)) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing p2sh redeemScript from wallet\");\n+        }\n+        RemoveAddress(pwallet, id);\n+    } else {\n+        CTxDestination destination;\n+        if (ExtractDestination(script, destination)) {\n+            pwallet->DelAddressBook(destination);\n+        }\n+    }\n+    pwallet->RemoveOldTransactions();\n+}\n+\n+static void RemoveAddress(CWallet* const pwallet, const CTxDestination& dest) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    CScript script = GetScriptForDestination(dest);\n+    RemoveScript(pwallet, script, false);\n+    // remove from address book\n+    if (IsValidDestination(dest)) {\n+        pwallet->DelAddressBook(dest);\n+    }\n+}\n+\n+UniValue removeaddress(const JSONRPCRequest& request)\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    CWallet* const pwallet = wallet.get();\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            RPCHelpMan{\"removeaddress\",\n+                \"\\nRemoves an address or script (in hex) that was being watched as if it were in your wallet but was not being used to spend. Requires a new wallet backup.\\n\",\n+                {\n+                    {\"address\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The Bitcoin address (or hex-encoded script)\"},\n+                    {\"p2sh\", RPCArg::Type::BOOL, /* opt */ true, /* default_val */ \"false\", \"Add the P2SH version of the script as well\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314396254",
      "id" : 314396254,
      "in_reply_to_id" : 314394732,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDM5NjI1NA==",
      "original_commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "original_line" : 406,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 275537287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314396254",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314983574"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314983574"
         }
      },
      "author_association" : "NONE",
      "body" : "Hi",
      "commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "created_at" : "2019-08-18T12:36:30Z",
      "diff_hunk" : "@@ -938,6 +938,25 @@ void CWallet::LoadToWallet(const CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions()\n+{\n+    AssertLockHeld(cs_wallet);\n+\n+    std::vector<CWalletTx> vWtx;\n+    for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it) {\n+        CWalletTx tx = it->second;\n+        if (!IsFromMe(*tx.tx) && !IsMine(*tx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314983574",
      "id" : 314983574,
      "in_reply_to_id" : 314395873,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDk4MzU3NA==",
      "original_commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "original_position" : 11,
      "path" : "src/wallet/wallet.cpp",
      "position" : 11,
      "pull_request_review_id" : 276276429,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "updated_at" : "2019-08-18T12:36:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314983574",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/52591039?v=4",
         "events_url" : "https://api.github.com/users/Mine8801/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Mine8801/followers",
         "following_url" : "https://api.github.com/users/Mine8801/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Mine8801/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Mine8801",
         "id" : 52591039,
         "login" : "Mine8801",
         "node_id" : "MDQ6VXNlcjUyNTkxMDM5",
         "organizations_url" : "https://api.github.com/users/Mine8801/orgs",
         "received_events_url" : "https://api.github.com/users/Mine8801/received_events",
         "repos_url" : "https://api.github.com/users/Mine8801/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Mine8801/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Mine8801/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Mine8801"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314983677"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314983677"
         }
      },
      "author_association" : "NONE",
      "body" : "purge_transactions",
      "commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "created_at" : "2019-08-18T12:38:23Z",
      "diff_hunk" : "@@ -938,6 +938,25 @@ void CWallet::LoadToWallet(const CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions()\n+{\n+    AssertLockHeld(cs_wallet);\n+\n+    std::vector<CWalletTx> vWtx;\n+    for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it) {\n+        CWalletTx tx = it->second;\n+        if (!IsFromMe(*tx.tx) && !IsMine(*tx.tx)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r314983677",
      "id" : 314983677,
      "in_reply_to_id" : 314395873,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDk4MzY3Nw==",
      "original_commit_id" : "4c7d2b68b3d76de34b98f9c2dabc8a8fa678b09f",
      "original_position" : 11,
      "path" : "src/wallet/wallet.cpp",
      "position" : 11,
      "pull_request_review_id" : 276276522,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "updated_at" : "2019-08-18T12:38:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314983677",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/52591039?v=4",
         "events_url" : "https://api.github.com/users/Mine8801/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Mine8801/followers",
         "following_url" : "https://api.github.com/users/Mine8801/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Mine8801/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Mine8801",
         "id" : 52591039,
         "login" : "Mine8801",
         "node_id" : "MDQ6VXNlcjUyNTkxMDM5",
         "organizations_url" : "https://api.github.com/users/Mine8801/orgs",
         "received_events_url" : "https://api.github.com/users/Mine8801/received_events",
         "repos_url" : "https://api.github.com/users/Mine8801/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Mine8801/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Mine8801/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Mine8801"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This has a silent merge conflict with master because RPCHelpMan syntax changed a bit.",
      "created_at" : "2019-09-03T17:54:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-527568402",
      "id" : 527568402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyNzU2ODQwMg==",
      "updated_at" : "2019-09-03T17:54:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/527568402",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-09-05T14:10:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-528383087",
      "id" : 528383087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyODM4MzA4Nw==",
      "updated_at" : "2019-09-05T14:10:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/528383087",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@benthecarman - it looks like Sjor's comments are still unaddressed and a rebase is needed. Is this still something you intend to continue with?",
      "created_at" : "2020-05-01T00:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-622196838",
      "id" : 622196838,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjE5NjgzOA==",
      "updated_at" : "2020-05-01T00:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622196838",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed for @Sjors's comments and rebased",
      "created_at" : "2020-05-04T03:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-623239713",
      "id" : 623239713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzIzOTcxMw==",
      "updated_at" : "2020-05-04T03:24:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623239713",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r419315899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/419315899"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why is this entire function commented out?",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-04T09:33:58Z",
      "diff_hunk" : "@@ -924,6 +924,42 @@ void CWallet::LoadToWallet(CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions(const CScript& script)\n+{\n+    // AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r419315899",
      "id" : 419315899,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTMxNTg5OQ==",
      "original_commit_id" : "c7e72e88b40f97a7c3a4c5c07a978bc2f54e6db9",
      "original_line" : 929,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 404834823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/419315899",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r419469301"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/419469301"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "woops, pushed wrong commit. Should be good now",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-04T14:15:39Z",
      "diff_hunk" : "@@ -924,6 +924,42 @@ void CWallet::LoadToWallet(CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions(const CScript& script)\n+{\n+    // AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r419469301",
      "id" : 419469301,
      "in_reply_to_id" : 419315899,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ2OTMwMQ==",
      "original_commit_id" : "c7e72e88b40f97a7c3a4c5c07a978bc2f54e6db9",
      "original_line" : 929,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 405028616,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/419469301",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425282738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425282738"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is getting caught in the linter. Be sure the position of the argument is consistent with the dispatch table in rpcwallet.cpp (it isn't -- the index starts at 0).",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-14T16:45:28Z",
      "diff_hunk" : "@@ -128,6 +128,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"importprivkey\", 2, \"rescan\" },\n     { \"importaddress\", 2, \"rescan\" },\n     { \"importaddress\", 3, \"p2sh\" },\n+    { \"removeaddress\", 2, \"p2sh\" },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425282738",
      "id" : 425282738,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4MjczOA==",
      "original_commit_id" : "c91732604e33f25eb9b41e9a995a5d660974f7fc",
      "original_line" : 131,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/client.cpp",
      "position" : null,
      "pull_request_review_id" : 411993539,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425282738",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425290384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425290384"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This will be caught too as `CHECK_NONFATAL` is recommended instead of `assert` for rpc code.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-14T16:57:24Z",
      "diff_hunk" : "@@ -323,6 +323,110 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest, bool purgeTxs);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script, bool isRedeemScript, bool purgeTxs) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    isminetype ismine = pwallet->IsMine(script);\n+    if (!isRedeemScript && ismine == ISMINE_SPENDABLE) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address\");\n+    } else if (!isRedeemScript && ismine == ISMINE_NO) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address or script\");\n+    }\n+    assert(ismine == ISMINE_WATCH_ONLY || isRedeemScript);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425290384",
      "id" : 425290384,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI5MDM4NA==",
      "original_commit_id" : "c91732604e33f25eb9b41e9a995a5d660974f7fc",
      "original_line" : 335,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 411993539,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425290384",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425733491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425733491"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think `RemoveTransactions()` would be a better name, as this can remove any transactions, being \"old\" is not a requirement.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-15T11:16:19Z",
      "diff_hunk" : "@@ -924,6 +924,45 @@ void CWallet::LoadToWallet(CWalletTx& wtxIn)\n     }\n }\n \n+void CWallet::RemoveOldTransactions(const CScript& script)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425733491",
      "id" : 425733491,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTczMzQ5MQ==",
      "original_commit_id" : "c91732604e33f25eb9b41e9a995a5d660974f7fc",
      "original_line" : 927,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 412558175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425733491",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This would be a very usefull addition for me, I have a wallet with watch-only addresses imported that I would like to remove.",
      "created_at" : "2020-05-15T11:20:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-629180221",
      "id" : 629180221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTE4MDIyMQ==",
      "updated_at" : "2020-05-15T11:20:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629180221",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`RemoveOldTransactions()` got renamed to `RemoveTransactions()` but calling plance didn't get changed, so it doesn't build now.\r\n```\r\nwallet/rpcdump.cpp: In function âvoid RemoveScript(CWallet*, const CScript&, bool, bool)â:\r\nwallet/rpcdump.cpp:356:18: error: âclass CWalletâ has no member named âRemoveOldTransactionsâ; did you mean âRemoveTransactionsâ?\r\n  356 |         pwallet->RemoveOldTransactions(script);\r\n      |                  ^~~~~~~~~~~~~~~~~~~~~\r\n      |                  RemoveTransactions\r\n```",
      "created_at" : "2020-05-15T15:19:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-629300605",
      "id" : 629300605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTMwMDYwNQ==",
      "updated_at" : "2020-05-15T15:19:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629300605",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> `RemoveOldTransactions()` got renamed to `RemoveTransactions()` but calling plance didn't get changed, so it doesn't build now.\r\n> \r\n> ```\r\n> wallet/rpcdump.cpp: In function âvoid RemoveScript(CWallet*, const CScript&, bool, bool)â:\r\n> wallet/rpcdump.cpp:356:18: error: âclass CWalletâ has no member named âRemoveOldTransactionsâ; did you mean âRemoveTransactionsâ?\r\n>   356 |         pwallet->RemoveOldTransactions(script);\r\n>       |                  ^~~~~~~~~~~~~~~~~~~~~\r\n>       |                  RemoveTransactions\r\n> ```\r\n\r\nwoops, fixed now :) ",
      "created_at" : "2020-05-15T15:22:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-629303367",
      "id" : 629303367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyOTMwMzM2Nw==",
      "updated_at" : "2020-05-15T15:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/629303367",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425910682"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425910682"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This line is not needed, results in a duplicate \"Examples:\" in help output.",
      "commit_id" : "ad0de4c639c215e334bc076c4bc2f6340f8f3a67",
      "created_at" : "2020-05-15T16:22:06Z",
      "diff_hunk" : "@@ -323,6 +323,110 @@ UniValue importaddress(const JSONRPCRequest& request)\n     return NullUniValue;\n }\n \n+static void RemoveAddress(CWallet*, const CTxDestination& dest, bool purgeTxs);\n+static void RemoveScript(CWallet* const pwallet, const CScript& script, bool isRedeemScript, bool purgeTxs) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    isminetype ismine = pwallet->IsMine(script);\n+    if (!isRedeemScript && ismine == ISMINE_SPENDABLE) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet contains the private key for this address\");\n+    } else if (!isRedeemScript && ismine == ISMINE_NO) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"The wallet does not contain this address or script\");\n+    }\n+    CHECK_NONFATAL(ismine == ISMINE_WATCH_ONLY || isRedeemScript);\n+\n+    auto spk_man = pwallet->GetLegacyScriptPubKeyMan();\n+\n+    if (spk_man->HaveWatchOnly(script) && !spk_man->RemoveWatchOnly(script)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing address/script from wallet\");\n+    }\n+    if (isRedeemScript) {\n+        CScriptID scriptID = CScriptID(script);\n+        if (!spk_man->HaveCScript(scriptID)) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Error removing p2sh redeemScript from wallet\");\n+        }\n+        RemoveAddress(pwallet, ScriptHash(scriptID), purgeTxs);\n+    } else {\n+        CTxDestination destination;\n+        if (ExtractDestination(script, destination)) {\n+            pwallet->DelAddressBook(destination);\n+        }\n+    }\n+\n+    if (purgeTxs) {\n+        pwallet->RemoveTransactions(script);\n+    }\n+}\n+\n+static void RemoveAddress(CWallet* const pwallet, const CTxDestination& dest, bool purgeTxs) EXCLUSIVE_LOCKS_REQUIRED(pwallet->cs_wallet)\n+{\n+    CScript script = GetScriptForDestination(dest);\n+    RemoveScript(pwallet, script, false, purgeTxs);\n+    // remove from address book\n+    if (IsValidDestination(dest)) {\n+        pwallet->DelAddressBook(dest);\n+    }\n+}\n+\n+UniValue removeaddress(const JSONRPCRequest& request)\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    CWallet* const pwallet = wallet.get();\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+            RPCHelpMan{\"removeaddress\",\n+                \"\\nRemoves an address or script (in hex) that was being watched as if it were in your wallet but was not being used to spend. Requires a new wallet backup.\\n\",\n+                {\n+                    {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The Bitcoin address (or hex-encoded script)\"},\n+                    {\"p2sh\", RPCArg::Type::BOOL, /* default */ \"false\", \"Remove the P2SH version of the script as well\"},\n+                    {\"purgetransactions\", RPCArg::Type::BOOL, /* default_val */ \"false\", \"Remove existing transactions from the wallet\"},\n+                },\n+                RPCResult{RPCResult::Type::NONE, \"\", \"\"},\n+                RPCExamples{\n+            \"\\nExamples:\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#discussion_r425910682",
      "id" : 425910682,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkxMDY4Mg==",
      "original_commit_id" : "15ee30111042f24a0c11732d5a821289d12ff7b0",
      "original_line" : 387,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 412790288,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15129",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-15T16:24:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/425910682",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@benthecarman CIs are still red since ad0de4c.",
      "created_at" : "2020-05-19T15:33:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15129#issuecomment-630900848",
      "id" : 630900848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15129",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDkwMDg0OA==",
      "updated_at" : "2020-05-19T15:33:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630900848",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   }
]
