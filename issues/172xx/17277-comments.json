[
   {
      "author_association" : "MEMBER",
      "body" : "I failed to replicate this with WSL and Ubuntu 18.04.\r\n\r\nA quick Google found some articles where the `conftest.exe` generated by the mingw configure script gets flagged by anti-virus programs. Do you have an AV program that could be the culprit?",
      "created_at" : "2019-11-04T16:26:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-549433101",
      "id" : 549433101,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTQzMzEwMQ==",
      "updated_at" : "2019-11-04T16:26:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549433101",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I failed to replicate this with WSL and Ubuntu 18.04.\r\n> \r\n> A quick Google found some articles where the `conftest.exe` generated by the mingw configure script gets flagged by anti-virus programs. Do you have an AV program that could be the culprit?\r\n\r\nNo, only the regular \"Windows Security\" virus protection that's built in to Windows 10. Let me do some further testing on another machine and see if I can reproduce it and compare it to the offending machine.",
      "created_at" : "2019-11-05T00:26:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-549608697",
      "id" : 549608697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTYwODY5Nw==",
      "updated_at" : "2019-11-05T00:26:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549608697",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please upload your `config.log` somewhere, it might give a clue why you end up with a `conftest.exe` instead of a Linux executable. ",
      "created_at" : "2019-11-05T10:16:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-549758040",
      "id" : 549758040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTc1ODA0MA==",
      "updated_at" : "2019-11-05T10:16:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549758040",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Please upload your `config.log` somewhere, it might give a clue why you end up with a `conftest.exe` instead of a Linux executable.\r\n\r\nShould there be a config.log? This is occurring in the make of the depends folder, before I get to the configure step.",
      "created_at" : "2019-11-06T13:36:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550311482",
      "id" : 550311482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDMxMTQ4Mg==",
      "updated_at" : "2019-11-06T13:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550311482",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Should there be a config.log? This is occurring in the make of the depends folder, before I get to the configure step.\r\n\r\nThere's always a config.log when configure runs.\r\n\r\nAlso it would be good to know what dependency is generating this error! It's useful information at least that it's not bitcoin's own configure script.\r\n",
      "created_at" : "2019-11-06T13:47:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550315844",
      "id" : 550315844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDMxNTg0NA==",
      "updated_at" : "2019-11-06T13:47:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550315844",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "It seems there must be a part of the make process (of the dependencies) that removes the config.log(s) after it completes. I did a file search *while* it was running and *did* see a config.log present under, for example, a zeromq subfolder, but this file disappeared once everything was completed. I'll capture the console output and monitor it to see if I can better pinpoint the package where this is happening.",
      "created_at" : "2019-11-06T14:39:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550338967",
      "id" : 550338967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDMzODk2Nw==",
      "updated_at" : "2019-11-06T14:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550338967",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Okay, I think I found it. It's happening during the configuring of  bdb. The error happens after the following bdb config.log line 5842, where the console output is: \"checking for clock_gettime monotonic clock\". I'm outside of my knowledge as far as what might be going wrong here.\r\n[bdb_config.log](https://github.com/bitcoin/bitcoin/files/3815348/bdb_config.log)\r\n",
      "created_at" : "2019-11-06T15:40:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550367003",
      "id" : 550367003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDM2NzAwMw==",
      "updated_at" : "2019-11-06T15:40:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550367003",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "that helps!\r\nberkeleydb apparently checks whether it's cross-compiling by trying to execute the build output\r\n```\r\nconfigure:4860: checking whether we are cross compiling\r\nconfigure:4868: x86_64-w64-mingw32-gcc -o conftest.exe -pipe -O2     -I/home/mmortal03/bitcoin/depends/x86_64-w64-mingw32/include   -DUNICODE -D_UNICODE   -L/home/mmortal03/bitcoin/depends/x86_64-w64-mingw32/lib     conftest.c  >&5\r\nconfigure:4872: $? = 0\r\nconfigure:4879: ./conftest.exe\r\nconfigure:4883: $? = 0\r\nconfigure:4898: result: no\r\n```\r\nthis is quite unusual; it should derive this from command line settings only\r\nthen again the build system for bdb 4.8 is old as the hills",
      "created_at" : "2019-11-06T15:55:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550374198",
      "id" : 550374198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDM3NDE5OA==",
      "updated_at" : "2019-11-06T15:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550374198",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Definitely interesting, so the next question is: why does its execution error out on *my* machine, whereas it doesn't on sipsorcery's machine? \r\n\r\nI noticed that the line @laanwj referenced is not the only time where ./conftest.exe is run, so, might there be something specific to the \"checking for clock_gettime monotonic clock\" test that's causing the executable to fail, *only* at this step? \r\n\r\n@sipsorcery , what version of Windows 10 are you running? I'm on 1903. I came across the following, but I don't know if it applies or not (and it's unclear whether it's been fixed in the latest Windows 10 builds or not): https://github.com/microsoft/WSL/issues/3840",
      "created_at" : "2019-11-07T03:43:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550657306",
      "id" : 550657306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDY1NzMwNg==",
      "updated_at" : "2019-11-07T03:43:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550657306",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mmortal03 I'm on Windows 10 Pro Insider Preview Build 18956.rs_prerelease.190803-1414.\r\n\r\nI switched to the Windows Insider Ring about 6 months ago and prior to that was able to build Bitcoin Core on the standard release version of Windows 10.\r\n\r\nAre you using WSL 1 or 2? There are some fundamental changes between them.\r\n\r\n````\r\n wsl -l -v\r\n  NAME            STATE           VERSION\r\n* Ubuntu-18.04    Running         1\r\n````\r\n\r\n",
      "created_at" : "2019-11-07T08:11:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550970563",
      "id" : 550970563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDk3MDU2Mw==",
      "updated_at" : "2019-11-07T08:11:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550970563",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@sipsorcery I just tried that from the Windows command line, as well as PowerShell, but my wsl command doesn't have that verbose argument as an option, it only has the list argument, so I can't provide the same output. I would suspect I'm on version 1, though.",
      "created_at" : "2019-11-07T08:56:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550985015",
      "id" : 550985015,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDk4NTAxNQ==",
      "updated_at" : "2019-11-07T08:56:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550985015",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It'd be good to ensure all updates (windows and ubuntu, and WSL) are up to date first, to avoid spending time chasing ghosts.\r\n\r\n> might there be something specific to the \"checking for clock_gettime monotonic clock\" test that's causing the executable to fail, only at this step?\r\n\r\nCould be, yes. You could try to extract test code it's trying to compile and run at that step, compile it yourself and try to figure out why it produces an invalid exe.\r\n",
      "created_at" : "2019-11-07T09:11:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-550990393",
      "id" : 550990393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDk5MDM5Mw==",
      "updated_at" : "2019-11-07T09:13:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550990393",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for your help so far. Yep, my Windows install and Ubuntu/WSL are up to date.\r\n\r\nI've made some progress. I've followed your suggestion and extracted the test code and tried compiling it myself, checking the verbose compiler output and such. Nothing looks to be going wrong there -- the correct library paths are being accessed. \r\n\r\nI've reduced the compilation command to the bare minimum. It still results in the same error after trying to run the executable:\r\n\r\n`x86_64-w64-mingw32-gcc -o conftest.exe conftest.c  -lpthread`\r\n\r\nKeep in mind that it's an exceedingly short bit of code: \r\n\r\n```\r\n#include <sys/time.h>\r\nmain() {\r\n\tstruct timespec t;\r\n\treturn (clock_gettime(CLOCK_MONOTONIC, &t) != 0);\r\n}\r\n```\r\n\r\nElsewhere, people say that this error code, 0xC000007B, tends to occur when 32-bit and 64-bit libraries get mixed up, but I don't see any evidence of that here.\r\n\r\nFor kicks, I tried compiling it with i686-w64-mingw32-gcc, and this *does* produce a properly executing program, but this doesn't really provide any further illumination.\r\n\r\nI tried installing wine, and running the 64-bit executable with: \r\n`wine64 conftest.exe`\r\n\r\nAnd this produces the following error:\r\n`0009:err:module:import_dll Library libwinpthread-1.dll (which is needed by L\"Z:\\\\home\\\\mmortal03\\\\conftest_build_unix\\\\conftest.exe\") not found`\r\n\r\nI went and grabbed the libwinpthread-1.dll from /usr/x86_64-w64-mingw32/lib/ and placed it in the same directory as the executable, **which seems to fix the problem** (it, in the least, suppresses the error pop-up), both through wine64, and running it natively in Windows.\r\n\r\nI have no idea why I would have to manually do this to get it to work on my machine, whereas it \"just works\" â¢ for @sipsorcery , and I have no idea how one would go about fixing this in the build system.",
      "created_at" : "2019-11-08T08:11:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-551428903",
      "id" : 551428903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTQyODkwMw==",
      "updated_at" : "2019-11-08T08:15:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551428903",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "That's a great analysis!\r\n\r\n> I have no idea how one would go about fixing this in the build system.\r\n\r\nThe most effective, I think, would be to add a patch in depends to berkeleydb's build system that either:\r\n\r\n- Fix berkeleydb's build system to *properly* detect a cross build in this case. In modern times of WSL, multi-arch, and qemu-user, being able to execute binaries doesn't mean it's not a cross build. Build systems should not try to execute anything they produce for the target.\r\n- Removes this specific test-case (but would need to investigate where the result is used, depending on what monotonic time is used for; if it's only for benchmarking/tests, we don't care, just hardwire it to false)\r\n- Replace this specific test case with a check that doesn't trigger the problem. E.g. do a static link of libc so that the conftest doesn't need an extra dll.\r\n",
      "created_at" : "2019-11-08T08:55:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-551442832",
      "id" : 551442832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTQ0MjgzMg==",
      "updated_at" : "2019-11-08T08:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551442832",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "In terms of going the static linking route, I came across the suggestion of the following parameters which do seem to work around the issue of needing libwinpthread-1.dll to be present:\r\n\r\n`x86_64-w64-mingw32-gcc -o conftest.exe conftest.c -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive`\r\n\r\nSource: https://stackoverflow.com/a/43402308/4438237\r\n\r\nAlso important, the following distinguishes between this issue in the mingw-w64 project and what MinGW.org does: https://github.com/metaeducation/ren-c/issues/624#issuecomment-331628363 ",
      "created_at" : "2019-11-08T10:01:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17277#issuecomment-551496513",
      "id" : 551496513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTQ5NjUxMw==",
      "updated_at" : "2019-11-08T10:01:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551496513",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/8298277?v=4",
         "events_url" : "https://api.github.com/users/mmortal03/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mmortal03/followers",
         "following_url" : "https://api.github.com/users/mmortal03/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mmortal03/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mmortal03",
         "id" : 8298277,
         "login" : "mmortal03",
         "node_id" : "MDQ6VXNlcjgyOTgyNzc=",
         "organizations_url" : "https://api.github.com/users/mmortal03/orgs",
         "received_events_url" : "https://api.github.com/users/mmortal03/received_events",
         "repos_url" : "https://api.github.com/users/mmortal03/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mmortal03/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mmortal03/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mmortal03"
      }
   }
]
