[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-10-21T22:27:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-544734459",
      "id" : 544734459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDczNDQ1OQ==",
      "updated_at" : "2019-10-22T22:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544734459",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-22T18:22:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-545091004",
      "id" : 545091004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTA5MTAwNA==",
      "updated_at" : "2019-10-22T18:22:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545091004",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Primary platforms Bitcoin runs on (x86 / win linux) are not strictly IEEE 754 (in particular, the standard x86 FPU is non-754 due to excess precision and non-strict truncation when moving between registers and memory). It's also not too uncommon for random obscure library code to silently dork around with rounding settings even on SSE (which is much more 754). Standard compiler optimization settings also break IEEE 754 handling even more than the base platform.\r\n\r\nSo I think it's not especially wise to make a very strong assumption of IEEE 754 overall.\r\n\r\nI don't know if any of that directly impacts this change (though 0/0 is NaN as is 1 / +/-0) Also, there are values other than ==0.0 which in division can produce under/overflow so it's not instantly obvious that the 0.0 equality tests in the code are correct. (in general, equality tests in floating point code are frequent sources of bugs).\r\n\r\nInserting extra floating point variables to silence a non-error error seems kinda ugly.  Considering that these are just debugging messages, it might be better to just rework them (e.g. don't print if there is nothing to report, or don't divide numbers just give the raw numbers).   Returning \"inf\" in debug lines also might needlessly mess up parsing just as much as not outputting the log in 'impossible' cases where the time elapsed is zero. \r\n\r\n",
      "created_at" : "2019-10-29T21:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-547641746",
      "id" : 547641746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzY0MTc0Ng==",
      "updated_at" : "2019-10-29T21:39:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547641746",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell Thanks for reviewing. Those are all good points. I agree that we should be careful with the IEEE 754 assumptions we're making.\r\n\r\nI've now pushed an updated version of this PR -- now doing:\r\n\r\n1.) \r\n\r\n```diff\r\n-static int64_t nBlocksTotal = 0;\r\n+static int64_t nBlocksTotal = 1;\r\n```\r\n\r\nAs suggested in a related PR: _\"This change would have been better done-- easier to review for correctness, more stable against \"regression\"-- by simply changing the existing initialization constant for nBlocksTotal from 0 to 1.\"_\r\n\r\n2.)\r\n\r\nAs suggested: now giving raw numbers instead of percentages.\r\n\r\n3.)\r\n\r\nSetting `m_scanning_progress` to `0.0` in the case of `!(progress_end - progress_begin > 0.0)` to avoid any potential floating-point division by zero.\r\n\r\nPlease re-review :)\r\n\r\n---\r\n\r\n<details>\r\n<summary>Fun bonus trivia</summary>\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <iostream>\r\n[cling]$ void f(double d) {\r\n[cling]$     if (d == 0.0) {\r\n[cling]$     } else if (d < 0.0) {\r\n[cling]$     } else if (d > 0.0) {\r\n[cling]$     } else {\r\n[cling]$         std::cout << \"reachable.\\n\";\r\n[cling]$     }\r\n[cling]$ }\r\n[cling]$ f(0.0/0.0)\r\nreachable.\r\n[cling]$ .q\r\n$\r\n```\r\n\r\n:)\r\n\r\n</details>",
      "created_at" : "2019-10-29T23:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-547676331",
      "id" : 547676331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzY3NjMzMQ==",
      "updated_at" : "2019-10-29T23:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547676331",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
