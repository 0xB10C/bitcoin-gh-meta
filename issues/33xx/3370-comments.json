[
   {
      "body" : "I've synced both the testnet and mainnet chain with this patch applied (from the network), I've had no problems, and no apparent difference in speed.",
      "created_at" : "2013-12-11T06:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-30297438",
      "id" : 30297438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-11T06:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30297438",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj It's not being able to sync I'm worried about. It must however also deal well with invalid blocks and orphans. I'll do a local pulltester run next weekend to see what goes wrong.",
      "created_at" : "2013-12-11T10:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-30310472",
      "id" : 30310472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-11T10:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30310472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Rebased, and fixed two bugs that PullTester found (thanks, @TheBlueMatt!):\r\n* Blocks with potential corruption weren't removed from mapAlreadyAskedFor, so they weren't downloaded again.\r\n* When checking for a new most-work chain, only blocks that weren't in the previous most-work chain were checked for errors, instead of all blocks that weren't already active.",
      "created_at" : "2013-12-14T14:38:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-30574859",
      "id" : 30574859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-14T14:38:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/30574859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Can I have some reviews? @gavinandresen @laanwj @gmaxwell @jgarzik ",
      "created_at" : "2013-12-20T21:39:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31043791",
      "id" : 31043791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-20T21:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31043791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3370#discussion_r8516992"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3370"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8516992"
         }
      },
      "body" : "You're dereferencing a pointer and putting it into a reference, making it impossible to check for NULL, which can be returned from State(). Could this ever be an issue?\r\n",
      "commit_id" : "75f51f2a63e0ebe34ab290c2b7141dd240b98c3b",
      "created_at" : "2013-12-21T09:45:18Z",
      "diff_hunk" : "@@ -4004,16 +4026,21 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n         if (!lockMain)\n             return true;\n \n-        if (State(pto->GetId())->fShouldBan) {\n+        CNodeState &state = *State(pto->GetId());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#discussion_r8516992",
      "id" : 8516992,
      "original_commit_id" : "366987a1a90da382d22ecd97b61cad334d244679",
      "original_position" : 577,
      "path" : "src/main.cpp",
      "position" : 625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3370",
      "updated_at" : "2014-01-27T20:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8516992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3370#discussion_r8520442"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3370"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8520442"
         }
      },
      "body" : "The main-specific node state is created when a CNode is created, and destroyed when it is deleted (called from constructor and destructor). This means that for an existing CNode (pto in this case), state will always exist. When using a stored NodeId, the chance exists that it has been deleted in the mean time.",
      "commit_id" : "75f51f2a63e0ebe34ab290c2b7141dd240b98c3b",
      "created_at" : "2013-12-22T16:46:28Z",
      "diff_hunk" : "@@ -4004,16 +4026,21 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n         if (!lockMain)\n             return true;\n \n-        if (State(pto->GetId())->fShouldBan) {\n+        CNodeState &state = *State(pto->GetId());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#discussion_r8520442",
      "id" : 8520442,
      "original_commit_id" : "366987a1a90da382d22ecd97b61cad334d244679",
      "original_position" : 577,
      "path" : "src/main.cpp",
      "position" : 625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3370",
      "updated_at" : "2014-01-27T20:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/8520442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Update: mapBlockSource now also stores source information for orphan blocks. That means that we can potentially assign them a DoS score if their block is found to be invalid later on. It also means we can potentially send them a \"reject\" message for it.\r\n",
      "created_at" : "2013-12-22T16:48:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31090837",
      "id" : 31090837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-22T16:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31090837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Reverted to an older version... let's see if pulltester likes it again :(",
      "created_at" : "2013-12-23T22:43:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31148397",
      "id" : 31148397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T22:43:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31148397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Are you sure it's not pull testers  fault?",
      "created_at" : "2013-12-23T23:09:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31149370",
      "id" : 31149370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31149370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I think it is indeterminism. I've seen report 1, 6 and 8 blocks which differ. Maybe I was just lucky the first time that it worked as expected.",
      "created_at" : "2013-12-23T23:14:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31149538",
      "id" : 31149538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:14:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31149538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "doesn't mean it's not pull testers not broken... It certainly doesn't take kindly to changing the download algorithm.",
      "created_at" : "2013-12-23T23:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31149600",
      "id" : 31149600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:15:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31149600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right the now, the rule this branch should be following is that in case of multiple valid equal-work chains, the one where the tip block was received first is chosen.",
      "created_at" : "2013-12-23T23:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31149728",
      "id" : 31149728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:19:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31149728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I'm not sure that that's the same as master in all cases? though I doubt pull tester would identify the difference.",
      "created_at" : "2013-12-23T23:26:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31149982",
      "id" : 31149982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:26:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31149982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I'm not sure that's the same as master either, though I can't immediately comeup with a scenario where it differs.\r\n\r\nThe question is first: is this rule acceptable (imho, if it differs with the current behaviour, i prefer this clearer rule). If so, can we have pulltester tolerate it? :)",
      "created_at" : "2013-12-23T23:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31150138",
      "id" : 31150138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31150138",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "If the rule is different on any more than non existent cases it's a different network consensus which could be problematic. Ideally pull tester should identify any difference in network consensus unless we can come up with a proof that it can never matter.",
      "created_at" : "2013-12-23T23:34:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31150339",
      "id" : 31150339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:34:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31150339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right, agree. Though it feels like we're not actually understanding well enough what the behaviour of the current code is, in non-trivial reorganization cases. My intuition says that as long as you select one of the valid highest-pow chains, and there is no way to make a node switch to an equal-work chain when it already has one, we should always converge - but perhaps we need to think harder about that.\r\n\r\nIn any case, I like the rule \"the earliest seen of all highest-pow valid chains\". Perhaps this needs to be discussed outside of this pullreq though.",
      "created_at" : "2013-12-23T23:43:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31150656",
      "id" : 31150656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-23T23:43:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31150656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, no question this needs simulation and study. Until then, I'm not comfortable with any, even subtle, changes to the best chain selection.",
      "created_at" : "2013-12-24T00:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31151317",
      "id" : 31151317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-24T00:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31151317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Does headers-first download need a behavior change there, or is it just by accident and can it be corrected?\r\n",
      "created_at" : "2013-12-24T07:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31162392",
      "id" : 31162392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-24T07:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31162392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I'm pretty sure it's possible to recreate the old behavior in a headers-first compatible implementation, but I'd rather not. I like having a clear rule about what the intended behavior is, and have that implemented.\r\n\r\nAfter having thought a bit about this, this is a case where the old and new implementation differ, IIRC:\r\n* The following setup exists: A->B and A->C. Now an orphan E is announced (with unknown parent D that builds on B), D is requested, but in the mean time block F (building on C) arrives. We switch to chain A->C->F in any case, but if now D arrives, and E turns out to be invalid, the old implementation would remain on A->C->F, while the new implementation will switch to A->B->D as D arrived before F.\r\nI doubt this is the simplest scenario to trigger a difference, and it would surprise me if that was what PullTester observes.\r\n\r\nI still like the \"the earliest received of all valid maximal-PoW chains\" rule, as it's easy to implement and stateless. The current rules depend on what the current best chain is.",
      "created_at" : "2013-12-25T20:04:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31204554",
      "id" : 31204554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-25T20:04:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31204554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, actually I believe this (and similar cases) are what pull tester is tickling. The latest run tickles a few cases:\r\n* b8 is an invalid block built on an equal-work fork (b7). pull-tester expects to stay on b6 (the previous best chain), but this pull appears to switch to b7.\r\n* b11 is the same case with b11 being invalid in a different way (too much fee vs double-spend).\r\n* b13/b14 is:\r\n\r\n```\r\n        //     genesis -> b1 (0) -> b2 (1) -> b5 (2) -> b6  (3)\r\n        //                                          \\-> b12 (3) -> b13 (4) -> b14 (5)\r\n        //                                              (b12 added last)\r\n```\r\n\r\nOnly b14 is invalid so pull tester expects to select b13 but this pull differs somehow (its not entirely clear from the logs what the difference is, and this one is very likely to be pull-tester responding incorrectly to getblocks/getheaders, confusing the download process to be confused)",
      "created_at" : "2013-12-25T20:26:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31204808",
      "id" : 31204808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-25T20:26:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31204808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Seems there was a bug in my code - the Comparator for CBlockIndex objects compared pb->nSequenceId with itself rather than with pa->nSequenceId. I remember fixing this bug before - perhaps I lost some git commit. Let's see.",
      "created_at" : "2013-12-25T22:41:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31206453",
      "id" : 31206453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-25T22:41:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31206453",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ha...",
      "created_at" : "2013-12-25T22:56:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31206622",
      "id" : 31206622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-25T22:56:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31206622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Works for me",
      "created_at" : "2013-12-25T23:05:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31206735",
      "id" : 31206735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-25T23:05:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31206735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Merged two commits, and added some comments.\r\n\r\nAlso some earlier changes, which got lost because they were commented on by @mikehearn in commits that have since been rebased:\r\n* Changed to a global sequence number for received blocks instead of a timestamp.\r\n* Removed interruption points that could result in a non-best-known-chain to be observed externally.\r\n",
      "created_at" : "2013-12-27T15:40:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-31267042",
      "id" : 31267042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2013-12-27T15:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/31267042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/75f51f2a63e0ebe34ab290c2b7141dd240b98c3b for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-01-27T21:35:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-33425574",
      "id" : 33425574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2014-01-27T21:35:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33425574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "ACK.\r\n",
      "created_at" : "2014-01-29T21:48:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-33634972",
      "id" : 33634972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2014-01-29T21:48:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33634972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Merging; got ACKs from me and @jgarzik in #3514 ",
      "created_at" : "2014-01-29T21:49:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3370#issuecomment-33635032",
      "id" : 33635032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3370",
      "updated_at" : "2014-01-29T21:49:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/33635032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
