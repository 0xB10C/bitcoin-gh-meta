[
   {
      "body" : "I'm open to alternatives (naming) for  `setban` and `listbanned`. I thought adding banning options over the `addnode` command is a misuse.\r\nI'm also not sure about banning whole IPs instead of only IP:port (node).",
      "created_at" : "2015-05-19T09:01:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#issuecomment-103406052",
      "id" : 103406052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6158",
      "updated_at" : "2015-05-19T09:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103406052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593780"
         }
      },
      "body" : "Why was/is this returning a bool, if it seems to be only true?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:32:34Z",
      "diff_hunk" : "@@ -458,13 +458,30 @@ bool CNode::IsBanned(CNetAddr ip)\n     return fResult;\n }\n \n-bool CNode::Ban(const CNetAddr &addr) {\n+bool CNode::Ban(const CNetAddr &addr, int64_t bantimeoffset) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593780",
      "id" : 30593780,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593867"
         }
      },
      "body" : "Same question for this function...",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:33:46Z",
      "diff_hunk" : "@@ -458,13 +458,30 @@ bool CNode::IsBanned(CNetAddr ip)\n     return fResult;\n }\n \n-bool CNode::Ban(const CNetAddr &addr) {\n+bool CNode::Ban(const CNetAddr &addr, int64_t bantimeoffset) {\n     int64_t banTime = GetTime()+GetArg(\"-bantime\", 60*60*24);  // Default 24-hour ban\n-    {\n-        LOCK(cs_setBanned);\n-        if (setBanned[addr] < banTime)\n-            setBanned[addr] = banTime;\n-    }\n+    if (bantimeoffset > 0)\n+        banTime = GetTime()+bantimeoffset;\n+\n+    LOCK(cs_setBanned);\n+    if (setBanned[addr] < banTime)\n+        setBanned[addr] = banTime;\n+\n+    return true;\n+}\n+\n+bool CNode::Unban(const CNetAddr &addr) {\n+    LOCK(cs_setBanned);\n+    if (setBanned.erase(addr))\n+        return true;\n+    return false;\n+}\n+\n+bool CNode::GetBanned(std::map<CNetAddr, int64_t> &banMap)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593867",
      "id" : 30593867,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 29,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593979"
         }
      },
      "body" : "``listbanned`` is not added here?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:35:28Z",
      "diff_hunk" : "@@ -91,6 +91,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"estimatepriority\", 0 },\n     { \"prioritisetransaction\", 1 },\n     { \"prioritisetransaction\", 2 },\n+    { \"setban\", 2 },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30593979",
      "id" : 30593979,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 4,
      "path" : "src/rpcclient.cpp",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30593979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594022"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594022"
         }
      },
      "body" : "What is the default value, if no bantime is supplied? Perhaps add this information in here?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:36:02Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594022",
      "id" : 30594022,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 18,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594022",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594097"
         }
      },
      "body" : "Why make a copy here, you seem to only use it once anyway?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:36:51Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594097",
      "id" : 30594097,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 24,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594135"
         }
      },
      "body" : "Suggestion: Perhaps also add a removeall option?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:37:32Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();\n+    CNetAddr netAddr(strNode);\n+    if (!netAddr.IsValid())\n+        throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: Invalid IP Address\");\n+\n+    if (strCommand == \"add\")\n+    {\n+        if (CNode::IsBanned(netAddr))\n+            throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: IP already banned\");\n+\n+        int64_t banTime = 0; //use standard bantime if not specified\n+        if (params.size() == 3 && !params[2].is_null())\n+            banTime = params[2].get_int64();\n+\n+        CNode::Ban(netAddr, banTime);\n+\n+        //disconnect possible nodes\n+        while(CNode *bannedNode = FindNode(netAddr))\n+            bannedNode->CloseSocketDisconnect();\n+    }\n+    else if(strCommand == \"remove\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594135",
      "id" : 30594135,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 44,
      "path" : "src/rpcnet.cpp",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594276"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594276"
         }
      },
      "body" : "Right. I didn't want to change this in this PR and i kept it for legacy reasons and to lower the risk of breaking something.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:39:36Z",
      "diff_hunk" : "@@ -458,13 +458,30 @@ bool CNode::IsBanned(CNetAddr ip)\n     return fResult;\n }\n \n-bool CNode::Ban(const CNetAddr &addr) {\n+bool CNode::Ban(const CNetAddr &addr, int64_t bantimeoffset) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594276",
      "id" : 30594276,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594319"
         }
      },
      "body" : "This is only for the rpc client (bitcoin-cli) string to json conversion which is not required for `listbanned`.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:40:29Z",
      "diff_hunk" : "@@ -91,6 +91,7 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"estimatepriority\", 0 },\n     { \"prioritisetransaction\", 1 },\n     { \"prioritisetransaction\", 2 },\n+    { \"setban\", 2 },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594319",
      "id" : 30594319,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 4,
      "path" : "src/rpcclient.cpp",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594366"
         }
      },
      "body" : "Right. This is a good point. It's actually the cmd arg -bantime. Will add this information.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:41:13Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594366",
      "id" : 30594366,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 18,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594428"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594428"
         }
      },
      "body" : "Indeed. This is a relict from copy/paste some code from addnode. Will change.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T12:41:59Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30594428",
      "id" : 30594428,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 24,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30594428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30604541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30604541"
         }
      },
      "body" : "+1 for removeall option to clear the list of banned peers. And if possible, adding a right click -> kick/ban option for GUI, which could also be implemented like this: http://i.imgur.com/K5jifJx.png (but better looking obv.)",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T14:29:05Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();\n+    CNetAddr netAddr(strNode);\n+    if (!netAddr.IsValid())\n+        throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: Invalid IP Address\");\n+\n+    if (strCommand == \"add\")\n+    {\n+        if (CNode::IsBanned(netAddr))\n+            throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: IP already banned\");\n+\n+        int64_t banTime = 0; //use standard bantime if not specified\n+        if (params.size() == 3 && !params[2].is_null())\n+            banTime = params[2].get_int64();\n+\n+        CNode::Ban(netAddr, banTime);\n+\n+        //disconnect possible nodes\n+        while(CNode *bannedNode = FindNode(netAddr))\n+            bannedNode->CloseSocketDisconnect();\n+    }\n+    else if(strCommand == \"remove\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30604541",
      "id" : 30604541,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 44,
      "path" : "src/rpcnet.cpp",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30604541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7673023?v=3",
         "events_url" : "https://api.github.com/users/LeMiner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LeMiner/followers",
         "following_url" : "https://api.github.com/users/LeMiner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LeMiner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LeMiner",
         "id" : 7673023,
         "login" : "LeMiner",
         "organizations_url" : "https://api.github.com/users/LeMiner/orgs",
         "received_events_url" : "https://api.github.com/users/LeMiner/received_events",
         "repos_url" : "https://api.github.com/users/LeMiner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LeMiner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LeMiner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LeMiner"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30606414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30606414"
         }
      },
      "body" : "Agreed on the remove all feature. But it would be ugly to have a command like `setban <IP> removeall` (<IP> would then be dummy). And supporting `setban removeall` will make the help message unreadable (because of parameter mixups).\r\nIMO adding a `clearbanned` command could make sense.\r\nAny other suggestions?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T14:45:15Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();\n+    CNetAddr netAddr(strNode);\n+    if (!netAddr.IsValid())\n+        throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: Invalid IP Address\");\n+\n+    if (strCommand == \"add\")\n+    {\n+        if (CNode::IsBanned(netAddr))\n+            throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: IP already banned\");\n+\n+        int64_t banTime = 0; //use standard bantime if not specified\n+        if (params.size() == 3 && !params[2].is_null())\n+            banTime = params[2].get_int64();\n+\n+        CNode::Ban(netAddr, banTime);\n+\n+        //disconnect possible nodes\n+        while(CNode *bannedNode = FindNode(netAddr))\n+            bannedNode->CloseSocketDisconnect();\n+    }\n+    else if(strCommand == \"remove\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30606414",
      "id" : 30606414,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 44,
      "path" : "src/rpcnet.cpp",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30606414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608331"
         }
      },
      "body" : "Just added information about the default bantime.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T15:01:21Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608331",
      "id" : 30608331,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 18,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608374"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608374"
         }
      },
      "body" : "Fixed @Diapolo's nit",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T15:01:43Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608374",
      "id" : 30608374,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 24,
      "path" : "src/rpcnet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608843"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608843"
         }
      },
      "body" : "Understood, but IMHO a function that doesn't need it could just be ``void``. Perhaps you can just add a commit for that at the end? At least it could be changed for ``GetBanned`` as you just added it :).",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T15:05:44Z",
      "diff_hunk" : "@@ -458,13 +458,30 @@ bool CNode::IsBanned(CNetAddr ip)\n     return fResult;\n }\n \n-bool CNode::Ban(const CNetAddr &addr) {\n+bool CNode::Ban(const CNetAddr &addr, int64_t bantimeoffset) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30608843",
      "id" : 30608843,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30608843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30609210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30609210"
         }
      },
      "body" : "``clearbanned`` is fine with me, or perhaps ``setban * remove`` ;)?",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T15:08:39Z",
      "diff_hunk" : "@@ -443,3 +443,79 @@ Value getnetworkinfo(const Array& params, bool fHelp)\n     obj.push_back(Pair(\"localaddresses\", localAddresses));\n     return obj;\n }\n+\n+Value setban(const Array& params, bool fHelp)\n+{\n+    string strCommand;\n+    if (params.size() >= 2)\n+        strCommand = params[1].get_str();\n+    if (fHelp || params.size() < 2 ||\n+        (strCommand != \"add\" && strCommand != \"remove\"))\n+        throw runtime_error(\n+                            \"setban \\\"node\\\" \\\"add|remove\\\" (bantime)\\n\"\n+                            \"\\nAttempts add or remove a IP from the banned list.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"ip\\\"       (string, required) The IP (see getpeerinfo for nodes ip)\\n\"\n+                            \"2. \\\"command\\\"  (string, required) 'add' to add a IP to the list, 'remove' to remove a IP from the list\\n\"\n+                            \"1. \\\"bantime\\\"  (numeric, optional) time in seconds how long the ip is banned\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"setban\", \"\\\"192.168.0.6\\\" \\\"add\\\" 86400\")\n+                            + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\" 86400\")\n+                            );\n+\n+    string strNode = params[0].get_str();\n+    CNetAddr netAddr(strNode);\n+    if (!netAddr.IsValid())\n+        throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: Invalid IP Address\");\n+\n+    if (strCommand == \"add\")\n+    {\n+        if (CNode::IsBanned(netAddr))\n+            throw JSONRPCError(RPC_CLIENT_NODE_ALREADY_ADDED, \"Error: IP already banned\");\n+\n+        int64_t banTime = 0; //use standard bantime if not specified\n+        if (params.size() == 3 && !params[2].is_null())\n+            banTime = params[2].get_int64();\n+\n+        CNode::Ban(netAddr, banTime);\n+\n+        //disconnect possible nodes\n+        while(CNode *bannedNode = FindNode(netAddr))\n+            bannedNode->CloseSocketDisconnect();\n+    }\n+    else if(strCommand == \"remove\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30609210",
      "id" : 30609210,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 44,
      "path" : "src/rpcnet.cpp",
      "position" : 43,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30609210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Added a `clearbanned` command (also included in tests).",
      "created_at" : "2015-05-19T15:09:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#issuecomment-103540685",
      "id" : 103540685,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6158",
      "updated_at" : "2015-05-19T15:09:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/103540685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30610107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30610107"
         }
      },
      "body" : "Agreed. Added a commit on top.",
      "commit_id" : "194b855dfb93987c519087608af0f169d491cd84",
      "created_at" : "2015-05-19T15:16:11Z",
      "diff_hunk" : "@@ -458,13 +458,30 @@ bool CNode::IsBanned(CNetAddr ip)\n     return fResult;\n }\n \n-bool CNode::Ban(const CNetAddr &addr) {\n+bool CNode::Ban(const CNetAddr &addr, int64_t bantimeoffset) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6158#discussion_r30610107",
      "id" : 30610107,
      "original_commit_id" : "ab10e9d0cefdbac6733042005888a52fe5009a9d",
      "original_position" : 5,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6158",
      "updated_at" : "2015-05-19T15:16:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/30610107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
