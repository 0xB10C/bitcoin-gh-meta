[
   {
      "body" : "ut ACK. Very clean commits, kudos.",
      "created_at" : "2015-05-23T06:03:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104850498",
      "id" : 104850498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-23T06:03:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104850498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Do we have any specific users for this change yet? I proposed earlier that we just add a very simple callback option to EvalScript() to optionally execute a function at each step in a way guaranteed to not be able to change the EvalScript() loop state unless desired.\r\n\r\nGiven how limited the scripting system is, I just don't see there being much demand for a full-on, fully consensus accurate, debugger; if you do need a debugger for your script it's almost certainly too complex. Simply providing a mechanism to get a good instruction trace if desired should be fine and it's a lot less risky than this pull-req.",
      "created_at" : "2015-05-23T23:22:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104954520",
      "id" : 104954520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-23T23:22:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104954520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Scripts get \"too complex\" fast...",
      "created_at" : "2015-05-23T23:28:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104954862",
      "id" : 104954862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-23T23:28:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104954862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Well again, do we have a concrete use-case/example?",
      "created_at" : "2015-05-23T23:51:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104955693",
      "id" : 104955693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-23T23:51:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104955693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "The obvious use case is a debugger, as already mentioned.",
      "created_at" : "2015-05-24T00:20:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104960641",
      "id" : 104960641,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T00:20:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104960641",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I mean, an example of a script where you'd actually need a debugger vs. just getting an execution transcript. Remember that script execution is deterministic, and *must* execute quickly, so you can always implement an apparent debugger by just replaying the script from the start and stopping at the right point.",
      "created_at" : "2015-05-24T05:39:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104982323",
      "id" : 104982323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T05:39:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104982323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I think the debugger can also be interesting for testing simple scripts. For example, one could write some unittests to make sure an individual operand/instruction affects the stack in expected ways.\r\nI think an example of the debugger being used automatically for testing purposes should be enough to justify this.\r\nIt also makes libconsensus more interesting. The consensus risks of non-trivially changing consensus code will have to be compensated with testing, but it's not like https://github.com/luke-jr/bitcoin/commit/978d000c6201951b4611f7374c72de9988516c3c is hard to read or review. The rest are just enhancements to libconsensus' API, so I don't really see where the huge risks are.\r\nMaybe luke should  reduce the scope of the PR to that single commit and leave the changes on libconsensus for a later PR, would you consider that less risky?\r\nBecause https://github.com/luke-jr/bitcoin/commit/978d000c6201951b4611f7374c72de9988516c3c  looks really safe and elegant to me. \r\n",
      "created_at" : "2015-05-24T06:06:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104983332",
      "id" : 104983332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T06:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104983332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "This-cannot-possibly-be-wrong ACK https://github.com/luke-jr/bitcoin/commit/978d000c6201951b4611f7374c72de9988516c3c\r\nut ACK https://github.com/luke-jr/bitcoin/commit/beabd6350e49c3660f45d3d5c85633f2cd21e26a",
      "created_at" : "2015-05-24T06:12:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-104983428",
      "id" : 104983428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T06:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/104983428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon Well, remember my simpler proposal of a callback works just fine for the unittest case - what I want to get some time to implement - as you only need an execution trace rather than the ability to dynamically modify state. Basically, at each step the callback fires and you check it against an expected execution log and/or append to one.\r\n\r\nBut anyway, I agree that I can't see how the first commit would fail... So meh, utACK on code, NACK on overall approach. Churn in the consensus critical part is dangerous and adds to cognitive load for everyone to finding and spotting problems.",
      "created_at" : "2015-05-24T21:34:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-105063546",
      "id" : 105063546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T21:34:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105063546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Oh, and @luke-jr if you could add a few lines of comments to the CScriptExecution explaining more about the rational and design that'd be good for future maintenance, esp. ones describing what each state variable does.",
      "created_at" : "2015-05-24T21:38:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-105063931",
      "id" : 105063931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-05-24T21:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105063931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Seems to risky to me to change the consensus code for this. Don't get me wrong, there are scenarios in which single-stepping is useful - but never in consensus usage, so it would be better to do it in an external utility class which just 'emulates' consensus.",
      "created_at" : "2015-06-06T09:26:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6178#issuecomment-109555538",
      "id" : 109555538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6178",
      "updated_at" : "2015-06-06T09:26:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/109555538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
