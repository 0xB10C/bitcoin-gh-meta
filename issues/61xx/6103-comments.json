[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29596655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29596655"
         }
      },
      "body" : "This entire file needs to be retabbed.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-04T16:01:02Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29596655",
      "id" : 29596655,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29596655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "Are you planning on supplying an RPC/regression test for this?",
      "created_at" : "2015-05-04T16:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98767292",
      "id" : 98767292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98767292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "That work was in previous PR. I can't see a use case where this is useful. Maybe @jmcorgan have something to say about that, otherwise I would remove this RPC call.",
      "created_at" : "2015-05-04T16:10:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98768493",
      "id" : 98768493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:18:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98768493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29597688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29597688"
         }
      },
      "body" : "As mentioned in one of the previous PRs, block acceptance is really not interesting or useful. It does not mean the block is part of the best chain, or even that it is valid. Use the NotifyBlockTip signal place, which indicates a new tip of the best chain was accepted.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-04T16:13:07Z",
      "diff_hunk" : "@@ -95,6 +97,12 @@ class CClientUIInterface\n \n     /** New block has been accepted */\n     boost::signals2::signal<void (const uint256& hash)> NotifyBlockTip;\n+\n+    /** New block has been accepted */\n+    boost::signals2::signal<void (const CBlock& block)> NotifyAcceptBlock;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29597688",
      "id" : 29597688,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 15,
      "path" : "src/ui_interface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29597688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "As far as I know, no RPC tests for ZMQ support have yet been PR'd.\r\n\r\nI think there might be some confusion here.  When I say RPC tests, I mean the Python regression tests that live qa/rpc-tests tree.  They're pretty much only called RPC tests because of history and the primary way they interface with bitcoind.  They exercise and verify many large bits of functionality and are always useful!  Case in point, when REST support was originally added, it had some pretty serious bugs that weren't caught because there was no RPC test.  See PR #5379 for an example of how RPC tests for the REST interface were implemented.\r\n\r\nI suppose RPC tests could be PR'd separately, but I bet this will go in faster and with more enthusiasm if tests are added.",
      "created_at" : "2015-05-04T16:22:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98771316",
      "id" : 98771316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T16:22:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98771316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/430315?v=3",
         "events_url" : "https://api.github.com/users/ajweiss/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajweiss/followers",
         "following_url" : "https://api.github.com/users/ajweiss/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajweiss/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajweiss",
         "id" : 430315,
         "login" : "ajweiss",
         "organizations_url" : "https://api.github.com/users/ajweiss/orgs",
         "received_events_url" : "https://api.github.com/users/ajweiss/received_events",
         "repos_url" : "https://api.github.com/users/ajweiss/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajweiss/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajweiss"
      }
   },
   {
      "body" : "@promag Nice that you have started recycle/update/rebase this!\r\nI have plans to test this during this week and therefore would be willing to write some RPC'like tests.",
      "created_at" : "2015-05-04T18:38:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-98808690",
      "id" : 98808690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-04T18:38:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98808690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646858"
         }
      },
      "body" : "L39: s/`LogPrint`/`LogPrintf` otherwise you start introducing a debug category with string identifier `\"ZMQ error: %s, errno=%s\\n\"`.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T06:52:56Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646858",
      "id" : 29646858,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646980"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646980"
         }
      },
      "body" : "this should be: `bitcoind -zmqpub=tcp://127.0.0.1:28332` (~~dash~~ colon instead slash before port)\r\nEdit: dash / colon",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T06:57:15Z",
      "diff_hunk" : "@@ -0,0 +1,145 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is disabled.  Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the ZeroMQ facility only needs to have the ZeroMQ endpoint\n+specified:\n+\n+    $ bitcoind -zmqpub=tcp://127.0.0.1/28332",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29646980",
      "id" : 29646980,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 65,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29646980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29647082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29647082"
         }
      },
      "body" : "Does it make sense to use the uiInterface `CClientUIInterface` as signaling layer for zmq? Or would it be better to introduce a custom signaling class/struct?",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T07:00:54Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29647082",
      "id" : 29647082,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 66,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29647082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29648007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29648007"
         }
      },
      "body" : "What's the use case of `getzmqurl`? Why should someone need to get the ZMQ URL over RPC?",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T07:27:29Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29648007",
      "id" : 29648007,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29648007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29649282"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29649282"
         }
      },
      "body" : "I think this line can be removed. Also L112.\r\nSee also: https://github.com/bitcoin/bitcoin/blob/master/src/rpcblockchain.cpp#L308 and https://github.com/bitcoin/bitcoin/blob/master/src/rest.cpp#L182",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T07:59:11Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+  fZMQPub = true;\n+  LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+  zmq_msg_t msg;\n+  const unsigned int topiclen = strlen(topic);\n+  const unsigned int msglen = ss.size() + topiclen;\n+\n+  // Initialize a new zmq_msg_t to hold serialized content\n+  int rc = zmq_msg_init_size(&msg, msglen);\n+  if (rc) {\n+    zmqError(\"Unable to initialize ZMQ msg\");\n+    return;\n+  }\n+\n+  // Copy topic and serialized TX into message buffer\n+  unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+  memcpy(&buf[0], topic, topiclen); // omits null trailer\n+  memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+  // Fire-and-forget\n+  rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+  if (rc == -1) {\n+    zmqError(\"Unable to send ZMQ message\");\n+    return;\n+  }\n+\n+  LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize transaction\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(10000); // FIXME used defined constant\n+  ss << tx;\n+\n+  zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const CBlock &blk)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize block\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(1000000); // FIXME use defined constant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29649282",
      "id" : 29649282,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 127,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29649282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655661"
         }
      },
      "body" : "fixed in upcoming commit",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:53:56Z",
      "diff_hunk" : "@@ -0,0 +1,145 @@\n+# Block and Transaction Broadcasting With ZeroMQ\n+\n+[ZeroMQ](http://zeromq.org/) is a lightweight wrapper around TCP\n+connections, inter-process communications, and shared-memory,\n+providing various message-oriented semantics such as publish/subcribe,\n+request/reply, and push/pull.\n+\n+The Bitcoin Core daemon can be configured to act as a trusted \"border\n+router\", implementing the bitcoin wire protocol and relay, making\n+consensus decisions, maintaining the local blockchain database,\n+broadcasting locally generated transactions into the network, and\n+providing a queryable RPC interface to interact on a polled basis for\n+requesting blockchain related data.  However, there exists only a\n+limited service to notify external software of events like the arrival\n+of new blocks or transactions.\n+\n+The ZeroMQ facility binds a \"publish\" port that broadcasts all newly\n+arrived *and validated* blocks and transactions to one or more\n+connected subscribers.  This read-only facility requires only the\n+connection of a corresponding ZeroMQ subscriber port in receiving\n+software; it is not authenticated nor is there any two-way protocol\n+involvement.\n+\n+In this fashion, external software can use a trusted Bitcoin Core\n+daemon to do the heavy lifting of communicating with the P2P network,\n+while still receiving network information asynchronously in real\n+time. As transactions and blocks arrive via the P2P network, Bitcoin\n+Core will apply all the validation and standardization rules to this\n+data, only passing along through ZeroMQ those items that pass.\n+\n+ZeroMQ sockets are self-connecting and self-healing; that is, connects\n+made between two endpoints will be automatically restored after an\n+outage, and either end may be freely started or stopped in any order.\n+\n+Because ZeroMQ is message oriented, subscribers receive transactions\n+and blocks all-at-once and do not need to implement any sort of\n+buffering or reassembly.\n+\n+## Prerequisites\n+\n+The ZeroMQ feature in Bitcoin Core uses only a very small part of the\n+ZeroMQ C API, and is thus compatible with any version of ZeroMQ\n+from 2.1 onward, including all versions in the 3.x and 4.x release\n+series.  Typically, it is packaged by distributions as something like\n+*libzmq-dev*.\n+\n+The C++ wrapper for ZeroMQ is *not* needed.\n+\n+## Enabling\n+\n+By default, the ZeroMQ port functionality is disabled.  Two steps are\n+required to enable--compiling in the ZeroMQ code, and configuring\n+runtime operation on the command-line or configuration file.\n+\n+    $ ./configure --enable-zmq (other options)\n+\n+This will produce a binary that is capable of providing the ZeroMQ\n+facility, but will not do so until also configured properly.\n+\n+## Configuration\n+\n+Currently, the ZeroMQ facility only needs to have the ZeroMQ endpoint\n+specified:\n+\n+    $ bitcoind -zmqpub=tcp://127.0.0.1/28332",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655661",
      "id" : 29655661,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 65,
      "path" : "doc/zmq.md",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655725"
         }
      },
      "body" : "I've changed this to use zeromq multipart messages. Changed in upcoming commit",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:54:53Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+  fZMQPub = true;\n+  LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+  zmq_msg_t msg;\n+  const unsigned int topiclen = strlen(topic);\n+  const unsigned int msglen = ss.size() + topiclen;\n+\n+  // Initialize a new zmq_msg_t to hold serialized content\n+  int rc = zmq_msg_init_size(&msg, msglen);\n+  if (rc) {\n+    zmqError(\"Unable to initialize ZMQ msg\");\n+    return;\n+  }\n+\n+  // Copy topic and serialized TX into message buffer\n+  unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+  memcpy(&buf[0], topic, topiclen); // omits null trailer\n+  memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+  // Fire-and-forget\n+  rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+  if (rc == -1) {\n+    zmqError(\"Unable to send ZMQ message\");\n+    return;\n+  }\n+\n+  LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize transaction\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(10000); // FIXME used defined constant\n+  ss << tx;\n+\n+  zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const CBlock &blk)\n+{\n+  if (!zmqPubSocket)\n+    return;\n+\n+  // Serialize block\n+  CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+  ss.reserve(1000000); // FIXME use defined constant",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655725",
      "id" : 29655725,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 127,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655732"
         }
      },
      "body" : "Removed in upcoming commit",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:55:00Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655732",
      "id" : 29655732,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655767"
         }
      },
      "body" : "I believe this discussion should happen in a different PR.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:55:43Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+  zmqContext = zmq_init(1);\n+  if (!zmqContext) {\n+    zmqError(\"Unable to initialize ZMQ context\");\n+    return;\n+  }\n+\n+  zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+  if (!zmqPubSocket) {\n+    zmqError(\"Unable to open ZMQ pub socket\");\n+    return;\n+  }\n+\n+  int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+  if (rc != 0) {\n+    zmqError(\"Unable to bind ZMQ socket\");\n+    zmq_close(zmqPubSocket);\n+    zmqPubSocket = 0;\n+    return;\n+  }\n+\n+  uiInterface.NotifyAcceptBlock.connect(ZMQPublishBlock);\n+  uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655767",
      "id" : 29655767,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 66,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655781"
         }
      },
      "body" : "Fixed in upcoming commit",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:56:01Z",
      "diff_hunk" : "@@ -95,6 +97,12 @@ class CClientUIInterface\n \n     /** New block has been accepted */\n     boost::signals2::signal<void (const uint256& hash)> NotifyBlockTip;\n+\n+    /** New block has been accepted */\n+    boost::signals2::signal<void (const CBlock& block)> NotifyAcceptBlock;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655781",
      "id" : 29655781,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 15,
      "path" : "src/ui_interface.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655814"
         }
      },
      "body" : "Fixed in upcoming commit",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T09:56:36Z",
      "diff_hunk" : "@@ -0,0 +1,175 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const CBlock &blk);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+  LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29655814",
      "id" : 29655814,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 39,
      "path" : "src/zmqports.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29655814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29657727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29657727"
         }
      },
      "body" : "I believe this is the right way of getting a block.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T10:29:54Z",
      "diff_hunk" : "@@ -0,0 +1,183 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const uint256 &hash);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+    zmqContext = zmq_init(1);\n+    if (!zmqContext) {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+    if (!zmqPubSocket) {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        return;\n+    }\n+\n+    int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+    if (rc != 0) {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(zmqPubSocket);\n+        zmqPubSocket = 0;\n+        return;\n+    }\n+\n+    uiInterface.NotifyBlockTip.connect(ZMQPublishBlock);\n+    uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+    fZMQPub = true;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+    zmq_msg_t msg;\n+    const unsigned int topiclen = strlen(topic);\n+    const unsigned int msglen = ss.size() + topiclen;\n+\n+    // Initialize a new zmq_msg_t to hold serialized content\n+    int rc = zmq_msg_init_size(&msg, msglen);\n+    if (rc) {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return;\n+    }\n+\n+    // Copy topic and serialized TX into message buffer\n+    unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+    memcpy(&buf[0], topic, topiclen); // omits null trailer\n+    memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+    // Fire-and-forget\n+    rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+    if (rc == -1) {\n+        zmqError(\"Unable to send ZMQ message\");\n+        return;\n+    }\n+\n+    LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    // Serialize transaction\n+    CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+    ss << tx;\n+\n+    zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const uint256 &hash)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    CBlock blk;\n+    {\n+        LOCK(cs_main);\n+    \n+        CBlockIndex* pblockindex = mapBlockIndex[hash];\n+        if(!ReadBlockFromDisk(blk, pblockindex))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29657727",
      "id" : 29657727,
      "original_commit_id" : "8e9ff5c88de98aeb2e7cc0310f40693253d5f607",
      "original_position" : 130,
      "path" : "src/zmqports.cpp",
      "position" : 130,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29657727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I'm planning to add the option -zmqformat=raw|json. This way a subscriber doesn't need to rely on 3rd libs to process the messages. What do you think?\r\nPending on #6108",
      "created_at" : "2015-05-05T10:37:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99028978",
      "id" : 99028978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T11:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99028978",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660299"
         }
      },
      "body" : "I didn't say it has to be removed. I just don't see a usecase for this. Maybe @jgarzik can roll this up?",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:21:33Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660299",
      "id" : 29660299,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660573"
         }
      },
      "body" : "Is the reason why the `#ifdefs` are here instead of wrapping the code-part in `init.cpp` to lower the #ifdef in `init.cpp`? Maybe also something for @jgarzik to answer.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:28:05Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29660573",
      "id" : 29660573,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : 18,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29660573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661012"
         }
      },
      "body" : "FYI https://github.com/bitcoin/bitcoin/pull/4594#issuecomment-50352710",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:37:06Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661012",
      "id" : 29661012,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : 18,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661012",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Would be nice if you could cherry-pick / pull-in this RPC/ZMQ test case:\r\nhttps://github.com/jonasschnelli/bitcoin/commit/91334e70ee5b2713ebbb7d5dbd6a5a29936aba66",
      "created_at" : "2015-05-05T11:40:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99052323",
      "id" : 99052323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T11:40:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99052323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661290"
         }
      },
      "body" : "@promag: Thanks. Yes this makes sense.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:42:19Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQPORTS_H\n+#define BITCOIN_ZMQPORTS_H\n+\n+#if defined(HAVE_CONFIG_H)\n+#include \"config/bitcoin-config.h\"\n+#endif\n+\n+#include <string>\n+\n+// Global state\n+extern bool fZMQPub;\n+\n+#if ENABLE_ZMQ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661290",
      "id" : 29661290,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 18,
      "path" : "src/zmqports.h",
      "position" : 18,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661313"
         }
      },
      "body" : "Or maybe something for @jmcorgan",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:42:49Z",
      "diff_hunk" : "@@ -282,6 +282,9 @@ static const CRPCCommand vRPCCommands[] =\n     { \"network\",            \"getpeerinfo\",            &getpeerinfo,            true  },\n     { \"network\",            \"ping\",                   &ping,                   true  },\n \n+    /* ZMQ notification */\n+    { \"zmq\",                \"getzmqurl\",              &getzmqurl,              true  },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661313",
      "id" : 29661313,
      "original_commit_id" : "77ecbe3e0187e52a00255349328d6457508eb8d0",
      "original_position" : 5,
      "path" : "src/rpcserver.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661529"
         }
      },
      "body" : "typo: should be `ZMQInitialize(mapArgs[\"-zmqpub\"]);` (mind the dash)",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T11:47:33Z",
      "diff_hunk" : "@@ -1022,6 +1029,11 @@ bool AppInit2(boost::thread_group& threadGroup)\n     BOOST_FOREACH(string strDest, mapMultiArgs[\"-seednode\"])\n         AddOneShot(strDest);\n \n+    if (mapArgs.count(\"-zmqpub\"))\n+    {\n+        ZMQInitialize(mapArgs[\"zmqpub\"]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29661529",
      "id" : 29661529,
      "original_commit_id" : "a268d1cfc0a5e5631b8e60723155fbaa79fcc9de",
      "original_position" : 34,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T11:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29661529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@promag: I would not add JSON support and keep ZMQ as clean and low-level as possible. Keeping it bin only can make things faster and with JSON there is always a risks of things get handled different during enc-/decoding of JSON streams depending on the library you use.",
      "created_at" : "2015-05-05T12:03:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99060018",
      "id" : 99060018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:03:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99060018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Tested reviewed leak-checked ACK.\r\nnits: usage of `uiInterface` as \"signal layer\"",
      "created_at" : "2015-05-05T12:07:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99061930",
      "id" : 99061930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99061930",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29663747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29663747"
         }
      },
      "body" : "nit: L128 has whitespace.",
      "commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "created_at" : "2015-05-05T12:32:00Z",
      "diff_hunk" : "@@ -0,0 +1,164 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"zmqports.h\"\n+\n+#if ENABLE_ZMQ\n+#include <zmq.h>\n+#endif\n+\n+#include \"primitives/block.h\"\n+#include \"primitives/transaction.h\"\n+#include \"version.h\"\n+#include \"main.h\"\n+#include \"streams.h\"\n+#include \"util.h\"\n+#include \"netbase.h\"\n+#include \"ui_interface.h\"\n+#include \"json/json_spirit_value.h\"\n+\n+using namespace json_spirit;\n+using namespace std;\n+\n+// Global state\n+bool fZMQPub = false;\n+\n+#if ENABLE_ZMQ\n+\n+// ZMQ related file scope variables\n+static void *zmqContext;\n+static void *zmqPubSocket;\n+\n+// Internal utility functions\n+static void ZMQPublishBlock(const uint256 &hash);\n+static void ZMQPublishTransaction(const CTransaction &tx);\n+\n+static void zmqError(const char *str)\n+{\n+    LogPrint(\"ZMQ error: %s, errno=%s\\n\", str, zmq_strerror(errno));\n+}\n+\n+// Called at startup to conditionally set up ZMQ socket(s)\n+void ZMQInitialize(const std::string &endp)\n+{\n+    zmqContext = zmq_init(1);\n+    if (!zmqContext) {\n+        zmqError(\"Unable to initialize ZMQ context\");\n+        return;\n+    }\n+\n+    zmqPubSocket = zmq_socket(zmqContext, ZMQ_PUB);\n+    if (!zmqPubSocket) {\n+        zmqError(\"Unable to open ZMQ pub socket\");\n+        return;\n+    }\n+\n+    int rc = zmq_bind(zmqPubSocket, endp.c_str());\n+    if (rc != 0) {\n+        zmqError(\"Unable to bind ZMQ socket\");\n+        zmq_close(zmqPubSocket);\n+        zmqPubSocket = 0;\n+        return;\n+    }\n+\n+    uiInterface.NotifyBlockTip.connect(ZMQPublishBlock);\n+    uiInterface.NotifyRelayTx.connect(ZMQPublishTransaction);\n+\n+    fZMQPub = true;\n+    LogPrint(\"zmq\", \"PUB socket listening at %s\\n\", endp);\n+}\n+\n+// Internal function to publish a serialized data stream on a given\n+// topic\n+//\n+// Note: assumes topic is a valid null terminated C string\n+static void zmqPublish(const char *topic, const CDataStream &ss)\n+{\n+    zmq_msg_t msg;\n+    const unsigned int topiclen = strlen(topic);\n+    const unsigned int msglen = ss.size() + topiclen;\n+\n+    // Initialize a new zmq_msg_t to hold serialized content\n+    int rc = zmq_msg_init_size(&msg, msglen);\n+    if (rc) {\n+        zmqError(\"Unable to initialize ZMQ msg\");\n+        return;\n+    }\n+\n+    // Copy topic and serialized TX into message buffer\n+    unsigned char *buf = (unsigned char *)zmq_msg_data(&msg);\n+    memcpy(&buf[0], topic, topiclen); // omits null trailer\n+    memcpy(&buf[topiclen], &ss[0], ss.size());\n+\n+    // Fire-and-forget\n+    rc = zmq_msg_send(&msg, zmqPubSocket, 0);\n+    if (rc == -1) {\n+        zmqError(\"Unable to send ZMQ message\");\n+        return;\n+    }\n+\n+    LogPrint(\"zmq\", \"Published to topic %s\\n\", topic);\n+}\n+\n+// Called after all transaction relay checks are completed\n+static void ZMQPublishTransaction(const CTransaction &tx)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    // Serialize transaction\n+    CDataStream ss(SER_NETWORK, PROTOCOL_VERSION);\n+    ss << tx;\n+\n+    zmqPublish(\"TXN\", ss);\n+}\n+\n+// Called after all block checks completed and successfully added to\n+// disk index\n+static void ZMQPublishBlock(const uint256 &hash)\n+{\n+    if (!zmqPubSocket)\n+        return;\n+\n+    CBlock blk;\n+    {\n+        LOCK(cs_main);\n+    ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#discussion_r29663747",
      "id" : 29663747,
      "original_commit_id" : "3f4f2b098605632d7ff1265f185cdb9862563a5c",
      "original_position" : 128,
      "path" : "src/zmqports.cpp",
      "position" : 128,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6103",
      "updated_at" : "2015-05-05T12:32:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/29663747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "nit:\r\nsignaling disconnect is missing\r\n\r\n```diff\r\ndiff --git a/src/zmqports.cpp b/src/zmqports.cpp\r\nindex d083292..bd1229c 100644\r\n--- a/src/zmqports.cpp\r\n+++ b/src/zmqports.cpp\r\n@@ -155,6 +155,9 @@ void ZMQShutdown()\r\n \r\n         zmq_ctx_destroy(zmqContext);\r\n         zmqContext = 0;\r\n+\r\n+        uiInterface.NotifyBlockTip.disconnect(ZMQPublishBlock);\r\n+        uiInterface.NotifyRelayTx.disconnect(ZMQPublishTransaction);\r\n     }\r\n \r\n     fZMQPub = false;\r\n```",
      "created_at" : "2015-05-05T12:39:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99067391",
      "id" : 99067391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T12:39:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99067391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli Regarding the output formats, I don't think having JSON is that bad, it is just an option.\r\nActually I think we could support 3 formats for now:\r\n - network: currently supported\r\n - json: needs BlockToUni to convert to JSON (similar to RPC getblock)\r\n - hash: just send the block hash or txid (this allows a subscriber to queue the notification to process it later)",
      "created_at" : "2015-05-05T13:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99074984",
      "id" : 99074984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99074984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag I agree with 1 (p2p) and 3 (hash). IMO the ZMQ interface is a push/notify interface (for now). If someone like to get JSON output he could do a RPC request with received data. Adding JSON format over ZMQ level would just encourage user \"to go the wrong way\".\r\nAdding a way of only receiving hashes over ZMQ would be good.\r\nBut i'm ready to hear other opinions.",
      "created_at" : "2015-05-05T13:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99076113",
      "id" : 99076113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99076113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Specifically for blocks, I'm not sure that pushing full blocks is even useful, unless we make it push all new blocks (including intermediary reorged ones). The interesting information is \"there is a new block chain tip, and this is it\".",
      "created_at" : "2015-05-05T13:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99076584",
      "id" : 99076584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99076584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa consider the following use case: a subscriber wants to know if there are transactions (in the new block chain tip) with outputs targeting a set of addresses.",
      "created_at" : "2015-05-05T13:27:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99077359",
      "id" : 99077359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99077359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I'm not sure if publishing a block of 20MB is problematic.",
      "created_at" : "2015-05-05T13:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99079734",
      "id" : 99079734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99079734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "That use case would not be covered, as the current code only reports the\nnew tip, not potential intermediate blocks that were connected as part of a\nreorganization.\n\nA possibility is reporting all new chain blocks, but what if this (due to a\nfork bug, perhaps) ends up reporting 100s of megabytes?\n",
      "created_at" : "2015-05-05T13:52:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99083743",
      "id" : 99083743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:52:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99083743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa right, so publishing the new tip hash and having the consumer walk the block chain would be more appropriate/secure.",
      "created_at" : "2015-05-05T13:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99084210",
      "id" : 99084210,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99084210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "For now i see the ZMQ extension as a notification-only one-way interface. I guess it's more optimized if a user gets informed about a new block **hash** (or new mempool tx **hash**) and then he decides if he likes to load the block with or without tx details over REST or RPC.",
      "created_at" : "2015-05-05T13:59:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99085599",
      "id" : 99085599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T13:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99085599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Agree on network binary format and hash format? Other publish strategies can be discussed later after this PR.",
      "created_at" : "2015-05-05T14:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99086882",
      "id" : 99086882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99086882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag: i think you need to get rid of commit 454285518915d73e55674cf702bd0372a2da266e",
      "created_at" : "2015-05-05T14:05:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99087164",
      "id" : 99087164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99087164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli rebased\r\nmissing updated doc and test to reflect multipart message",
      "created_at" : "2015-05-05T14:31:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99095760",
      "id" : 99095760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99095760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Should we use CValidationInterface instead of CClientUIInterface?",
      "created_at" : "2015-05-05T14:39:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99098817",
      "id" : 99098817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99098817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Yes.\n",
      "created_at" : "2015-05-05T14:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99100905",
      "id" : 99100905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T14:45:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99100905",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Pending questions:\r\n 1. support network binary format and hash format?\r\n 2. class name CZMQPublisher : public CValidationInterface?\r\n 3. use CValidationInterface::SetBestChain instead of CClientUIInterface::NotifyBlockTip?",
      "created_at" : "2015-05-05T15:57:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99123650",
      "id" : 99123650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T15:57:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99123650",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "1. Hash is enough for me. Binary makes sense if we make sure the full set of newly accepted blocks is announced.\r\n\r\n2. Sounds good.\r\n\r\n3. SetBestChain won't work, as it is only called after the best chain on disk is changed (which is infrequently). I'll write a patch to add the signals you need to CValidationInterface.",
      "created_at" : "2015-05-05T16:00:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99124284",
      "id" : 99124284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:00:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99124284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa At the moment CValidationInterface is very related to CWallet, but it shouldn't right?",
      "created_at" : "2015-05-05T16:03:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99125552",
      "id" : 99125552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:03:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99125552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag It used to be called CWalletInterface. We renamed it because it shouldn't be used exclusively for wallets.",
      "created_at" : "2015-05-05T16:03:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6103#issuecomment-99125730",
      "id" : 99125730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6103",
      "updated_at" : "2015-05-05T16:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99125730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
