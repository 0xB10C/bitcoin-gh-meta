[
   {
      "body" : "Thanks for the report.\r\nI'll fix this.",
      "created_at" : "2015-05-27T05:51:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105766235",
      "id" : 105766235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T05:51:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105766235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Thanks!",
      "created_at" : "2015-05-27T06:02:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105767800",
      "id" : 105767800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T06:02:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105767800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@SergioDemianLerner: Is the DoS attack vector a JSON-Spirit issue or a general JSON parsing problem? Would using the (new) `UniValue` parser reduce the attack possibilities. (https://github.com/bitcoin/bitcoin/blob/master/src/univalue/univalue_read.cpp and #6121)?\r\n",
      "created_at" : "2015-05-27T07:47:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105805408",
      "id" : 105805408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T07:47:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105805408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli IMO, the problem is fundamental with using JSON in the first place. The REST interface should have simple flat input which is easy to validate, not a writhing snake-pit of recursive complexity. \r\n\r\nIt is likely that the new JSON parser has better properties regarding out-of-memory or CPU denial of service, but I have not seen any definitive results in that direction. \r\n\r\nBut the fundamental issue remains the same. Ideally `getutxos`'s input would just be an URI scheme like with the other REST methods.\r\n",
      "created_at" : "2015-05-27T07:59:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105809032",
      "id" : 105809032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T07:59:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105809032",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Agreed.\r\nWhat i'm not sure is, if the getutxos input structure is not to complex to flat down to a standard REST URI syntax. But i'll give it a try.\r\n\r\nWhat also could make sense to add some DoS counter-measures (for REST in general because it's unauthenticated).",
      "created_at" : "2015-05-27T08:04:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105809919",
      "id" : 105809919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T08:04:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105809919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "If the input structure is *fundamentally* too complex, maybe we should think about removing the method, as it is not in accordance with the idea of the REST interface, which is to offer a light and simple interface. Remember that one of the persistent complaints about the original `getutxos` P2P proposal was, too, that it was kind of DoS sensitive (it made it possible to overflow the send buffer).\r\n\r\nMaybe submitting a list of queries at the same time is problematic; e.g. maybe change it to query one utxo at a time?\r\n",
      "created_at" : "2015-05-27T08:50:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105828224",
      "id" : 105828224,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T08:52:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105828224",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Agreed.\r\nI initially added a limiting constant (https://github.com/bitcoin/bitcoin/blob/master/src/rest.cpp#L22). Maybe we should use a value between 1 and 15. REST clients probably should serialize queries if they need more txid to be checked.\r\n\r\nI think the URI scheme is okay:\r\n`/rest/getutxos/checkmempool/txid-n/txid-n/txid-n/txid-n/.. `\r\nor this for not querying the mempool:\r\n`/rest/getutxos/txid-n/txid-n/txid-n/txid-n/.. `\r\n\r\nAllow a URI max length of 1024 chars this would basically allow to query ~14 txid per request which is reasonable IMO.",
      "created_at" : "2015-05-27T08:56:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105829330",
      "id" : 105829330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T08:56:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105829330",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Remind me what the benefit of using HTTP and JSON over the patch I wrote is, again?",
      "created_at" : "2015-05-27T09:05:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105830928",
      "id" : 105830928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T09:05:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105830928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn: this is probably a different discussion. :)\r\nBut JSON support is not the main transport format for the `rest/getutxos` command.\r\nYou can/should use the binary p2p serialized format described in Bip64 (as HTTP/REST inputs and output).\r\n\r\nIMO bin (p2p serialized) over HTTP/REST is absolutely reasonable and has advantages over P2P as specified in Bip64.\r\nHTTP can easily be cached, filtered, blocked, whitelisted, etc.",
      "created_at" : "2015-05-27T09:09:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105833001",
      "id" : 105833001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T09:09:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105833001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@mikehearn re: offering it through the HTTP interface, at least this interface isn't exposed to every P2P peer.\r\n\r\nI don't think there is any advantage to using JSON here, at all, which is why I'm arguing against it.",
      "created_at" : "2015-05-27T09:18:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6192#issuecomment-105834978",
      "id" : 105834978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6192",
      "updated_at" : "2015-05-27T09:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/105834978",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
