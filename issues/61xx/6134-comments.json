[
   {
      "body" : "Seems quite reasonable - ut ACK\r\n",
      "created_at" : "2015-09-15T17:32:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-140474419",
      "id" : 140474419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-09-15T17:32:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/140474419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2015-09-20T16:57:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-141810898",
      "id" : 141810898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-09-20T16:57:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141810898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "OK I reworked this to be a bit better, and combined it with the patch that increases the success threshold to 95%.\r\n\r\n@jonasschnelli I did something much simpler in the interface.  The slider just indicates the # of blocks for which your fee estimate was valid.  Perhaps we need to consider some kind of additional UI element that would explain to people why they aren't able to get an estimate for a smaller # of blocks.  I think it'll be very rare and maybe never that you'll successfully get an estimate for 1 block, which people will probably try to do.",
      "created_at" : "2015-10-16T16:48:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-148765848",
      "id" : 148765848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-10-16T16:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/148765848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "The last commit is as of yet untested, but should resolve some of the issues around accidentally generating transactions that wouldn't be accepted to your own mempool",
      "created_at" : "2015-11-10T23:29:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-155601549",
      "id" : 155601549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-10T23:29:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/155601549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Needs rebase (trivial `main.h` conflict).\r\nTested a bit.\r\n\r\nQT: Probably not related to this PR, but is there a reason why the slider Ã¢ÂÂ by default Ã¢ÂÂ is on the left side \"slow confirmation time\" and not at the very right side? I guess less then <1% of transactions aim for confirmation >=25blocks.\r\n\r\nQT: In my case (mainnet at current height), num-blocks 25 till 18 had the same fee. This feels bad for users, because they might think, \"why should I pay a higher fee than i really need for my target?\". We need to aggregate num-blocks with the same fee (stop at block 18, don't go further down with the fee, up with the num block target). Also num-blocks 10 and 11 had the same fee, these should be aggregated.\r\n\r\nThere should be something when calling `estimatefee 1`. I know that there are to many unknowns for a precise calculation. But it's an **estimation**. We should not return -1. We should return a value as accurate as possible with the parameters that are available (even is there are hight risks that the estimation is wrong).",
      "created_at" : "2015-11-13T19:58:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-156541793",
      "id" : 156541793,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-13T19:58:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156541793",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli This PR should prevent getting a -1 unless you directly call the RPC call estimatefee.  I might still expose estimateapproxfee, but for anyone using GUI or wallet code that automatically generates fee, they should now get the best answer possible.  I figured that for outside users, they could emulate the logic of estimateapproxfee themselves for now.  In the future I agree there should be an RPC call which just does the right thing, but I wasn't ready to expose that now as I'm not sure exactly what it should look like yet.",
      "created_at" : "2015-11-13T22:04:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-156571950",
      "id" : 156571950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-13T22:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156571950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Rebased",
      "created_at" : "2015-11-14T19:02:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-156734259",
      "id" : 156734259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-14T19:02:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156734259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Concept(s) ACK.",
      "created_at" : "2015-11-14T20:56:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-156745548",
      "id" : 156745548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-14T20:56:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156745548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "added some checks in the unit test and exposed the functions via RPC (with a warning) and tested in the RPC test.\r\n\r\n",
      "created_at" : "2015-11-15T17:59:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-156839819",
      "id" : 156839819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-15T17:59:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/156839819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Concept ACK. Plans to test this soon.",
      "created_at" : "2015-11-16T20:07:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-157154908",
      "id" : 157154908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-16T20:07:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157154908",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Rebased with a name change to estimateSmartFee instead of Approx",
      "created_at" : "2015-11-16T20:44:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-157163803",
      "id" : 157163803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-16T20:44:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157163803",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "ACK apart from those nits",
      "created_at" : "2015-11-17T17:50:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-157451133",
      "id" : 157451133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-17T17:50:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157451133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216058"
         }
      },
      "body" : "Can ```GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE)``` be an attribute so that it can be calculated just once in the constructor?",
      "commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "created_at" : "2015-11-18T15:47:48Z",
      "diff_hunk" : "@@ -504,6 +505,33 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget)\n     return CFeeRate(median);\n }\n \n+CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, int *answerFoundAtTarget, const CTxMemPool *pool)\n+{\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget;\n+    // Return failure if trying to analyze a target we're not tracking\n+    if (confTarget <= 0 || (unsigned int)confTarget > feeStats.GetMaxConfirms())\n+        return CFeeRate(0);\n+\n+    double median = -1;\n+    while (median < 0 && (unsigned int)confTarget <= feeStats.GetMaxConfirms()) {\n+        median = feeStats.EstimateMedianVal(confTarget++, SUFFICIENT_FEETXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n+    }\n+\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget - 1;\n+\n+    // If mempool is limiting txs , return at least the min fee from the mempool\n+    CAmount minPoolFee = pool->GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216058",
      "id" : 45216058,
      "original_commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "original_position" : 29,
      "path" : "src/policy/fees.cpp",
      "position" : 29,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134",
      "updated_at" : "2015-11-18T15:47:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216058",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Concept ACK with a very fast review. Again, this would be simpler if there was no priority...",
      "created_at" : "2015-11-18T15:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#issuecomment-157755539",
      "id" : 157755539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6134",
      "updated_at" : "2015-11-18T15:49:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/157755539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216518"
         }
      },
      "body" : "style nit: https://github.com/bitcoin/bitcoin/blob/master/src/.clang-format#L41",
      "commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "created_at" : "2015-11-18T15:50:53Z",
      "diff_hunk" : "@@ -504,6 +505,33 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget)\n     return CFeeRate(median);\n }\n \n+CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, int *answerFoundAtTarget, const CTxMemPool *pool)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216518",
      "id" : 45216518,
      "original_commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "original_position" : 12,
      "path" : "src/policy/fees.cpp",
      "position" : 12,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134",
      "updated_at" : "2015-11-18T15:50:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216738"
         }
      },
      "body" : "style nit: too many new lines",
      "commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "created_at" : "2015-11-18T15:52:14Z",
      "diff_hunk" : "@@ -513,6 +541,31 @@ double CBlockPolicyEstimator::estimatePriority(int confTarget)\n     return priStats.EstimateMedianVal(confTarget, SUFFICIENT_PRITXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n }\n \n+double CBlockPolicyEstimator::estimateSmartPriority(int confTarget, int *answerFoundAtTarget, const CTxMemPool *pool)\n+{\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget;\n+    // Return failure if trying to analyze a target we're not tracking\n+    if (confTarget <= 0 || (unsigned int)confTarget > priStats.GetMaxConfirms())\n+        return -1;\n+\n+    // If mempool is limiting txs, no priority txs are allowed\n+    CAmount minPoolFee = pool->GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();\n+    if (minPoolFee > 0)\n+        return INF_PRIORITY;\n+\n+    double median = -1;\n+    while (median < 0 && (unsigned int)confTarget <= priStats.GetMaxConfirms()) {\n+        median = priStats.EstimateMedianVal(confTarget++, SUFFICIENT_PRITXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n+    }\n+\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget - 1;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45216738",
      "id" : 45216738,
      "original_commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "original_position" : 66,
      "path" : "src/policy/fees.cpp",
      "position" : 66,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134",
      "updated_at" : "2015-11-18T15:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45216738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45217357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45217357"
         }
      },
      "body" : "Someone should prepare `clang-format-diff.py` for use in bitcoin?",
      "commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "created_at" : "2015-11-18T15:56:19Z",
      "diff_hunk" : "@@ -513,6 +541,31 @@ double CBlockPolicyEstimator::estimatePriority(int confTarget)\n     return priStats.EstimateMedianVal(confTarget, SUFFICIENT_PRITXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n }\n \n+double CBlockPolicyEstimator::estimateSmartPriority(int confTarget, int *answerFoundAtTarget, const CTxMemPool *pool)\n+{\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget;\n+    // Return failure if trying to analyze a target we're not tracking\n+    if (confTarget <= 0 || (unsigned int)confTarget > priStats.GetMaxConfirms())\n+        return -1;\n+\n+    // If mempool is limiting txs, no priority txs are allowed\n+    CAmount minPoolFee = pool->GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();\n+    if (minPoolFee > 0)\n+        return INF_PRIORITY;\n+\n+    double median = -1;\n+    while (median < 0 && (unsigned int)confTarget <= priStats.GetMaxConfirms()) {\n+        median = priStats.EstimateMedianVal(confTarget++, SUFFICIENT_PRITXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n+    }\n+\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget - 1;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45217357",
      "id" : 45217357,
      "original_commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "original_position" : 66,
      "path" : "src/policy/fees.cpp",
      "position" : 66,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134",
      "updated_at" : "2015-11-18T15:56:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45217357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45218874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45218874"
         }
      },
      "body" : "Sure.  But honestly it seems a bit silly to me that this is not an attribute of the mempool.  I understand the point of keeping policy out of the mempool, but why should you need to be aware of the max size of the mempool just to ask what it's min fee is.   The one advantage I can see for the current structure is that you can call TrimToSize with some other number to do testing.\r\nPerhaps TrimToSize should take a sizelimit, and set an internal attribute of the mempool that GetMinFee uses?\r\n",
      "commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "created_at" : "2015-11-18T16:06:20Z",
      "diff_hunk" : "@@ -504,6 +505,33 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget)\n     return CFeeRate(median);\n }\n \n+CFeeRate CBlockPolicyEstimator::estimateSmartFee(int confTarget, int *answerFoundAtTarget, const CTxMemPool *pool)\n+{\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget;\n+    // Return failure if trying to analyze a target we're not tracking\n+    if (confTarget <= 0 || (unsigned int)confTarget > feeStats.GetMaxConfirms())\n+        return CFeeRate(0);\n+\n+    double median = -1;\n+    while (median < 0 && (unsigned int)confTarget <= feeStats.GetMaxConfirms()) {\n+        median = feeStats.EstimateMedianVal(confTarget++, SUFFICIENT_FEETXS, MIN_SUCCESS_PCT, true, nBestSeenHeight);\n+    }\n+\n+    if (answerFoundAtTarget)\n+        *answerFoundAtTarget = confTarget - 1;\n+\n+    // If mempool is limiting txs , return at least the min fee from the mempool\n+    CAmount minPoolFee = pool->GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6134#discussion_r45218874",
      "id" : 45218874,
      "original_commit_id" : "56106a3300f844afcadf6dce50d5ef1d337f50b9",
      "original_position" : 29,
      "path" : "src/policy/fees.cpp",
      "position" : 29,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6134",
      "updated_at" : "2015-11-18T16:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45218874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   }
]
