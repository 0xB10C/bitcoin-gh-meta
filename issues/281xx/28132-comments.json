[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ariard](https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646993842) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28130](https://github.com/bitcoin/bitcoin/pull/28130) (Remove arbitrary restrictions on OP_RETURN by default by petertodd)\n* [#26525](https://github.com/bitcoin/bitcoin/pull/26525) (Remove -mempoolfullrbf option by BitcoinErrorLog)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-23T15:44:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646873208",
      "id" : 1646873208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iKUp4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646873208/reactions"
      },
      "updated_at" : "2023-07-23T23:51:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646873208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "FYI [mempool.space has enabled full-rbf by default](https://github.com/mempool/mempool/pull/3867), among many others.",
      "created_at" : "2023-07-23T15:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646874124",
      "id" : 1646874124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iKU4M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646874124/reactions"
      },
      "updated_at" : "2023-07-23T15:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646874124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "When you say \"by default\", do you mean that full-rbf would come by default as part of IBD or when you update Bitcoin Core? When would full-rbf be \"by default\"?",
      "created_at" : "2023-07-23T20:41:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646954964",
      "id" : 1646954964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iKonU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646954964/reactions"
      },
      "updated_at" : "2023-07-23T20:41:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646954964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20481828?v=4",
         "events_url" : "https://api.github.com/users/emc99/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emc99/followers",
         "following_url" : "https://api.github.com/users/emc99/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emc99/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emc99",
         "id" : 20481828,
         "login" : "emc99",
         "node_id" : "MDQ6VXNlcjIwNDgxODI4",
         "organizations_url" : "https://api.github.com/users/emc99/orgs",
         "received_events_url" : "https://api.github.com/users/emc99/received_events",
         "repos_url" : "https://api.github.com/users/emc99/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emc99/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emc99/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emc99"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> When you say \"by default\", do you mean that full-rbf would come by default as part of IBD or when you update Bitcoin Core? When would full-rbf be \"by default\"?\r\n\r\nThis pull-req has nothing to do with Initial Block Download (IBD).\r\n\r\nIt simply changes the default for the `-mempoolfullrbf` option to true/enabled. Previously the default was false/disabled. Users who update Bitcoin Core to a version containing this change would by default propagate and mine full-rbf replacements unless they had chosen to disable full-rbf.\r\n\r\nA significant fraction of the P2P network has already chosen to enable full-rbf, so full-rbf replacements propagate reasonably well. Almost half of pools by hash power has enabled full-rbf, so full-rbf replacements that reach those miners are readily mined, as seen on https://mempool.space/rbf#fullrbf and https://fullrbf.mempool.observer/",
      "created_at" : "2023-07-23T21:44:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646966801",
      "id" : 1646966801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iKrgR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646966801/reactions"
      },
      "updated_at" : "2023-07-23T21:44:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646966801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On the first line of arguments, I think zero-conf business acceptance have the option to deploy additional full-nodes with good transaction-relay peering to obtain a reasonable view of network mempools, and therefore increase their odds of seeing a double-spend of a confirmation of interest. In practice, zero-conf applications have risk threshold, once those thresholds are reached they will deactivate zero-conf acceptance.\r\n\r\nOn the second line or arguments, mempool consistency with miners is becoming a practical concern in my opinion with the appereance of so-called âtransaction acceleratorsâ, as now LSPs can use those out-of-band transaction-relay service to fee-bump their stuck multi-party transactions, and therefore provoke a divergence with the rest of the network. I raised this risk of [âmining income asymmetries due to unequal access in to transaction flows bypassing policiesâ](https://github.com/bitcoin/bitcoin/pull/26438#issuecomment-1299522242) in Suhas proposal to remove the mempoolfullrbf option months ago.\r\n\r\nOn the third line of arguments about the enhancement of multi-party funded transactions flows, the original motivation is explained in this [post](https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-May/003033.html) on the lightning dev mailing list. RBF opt-out allows a counterparty contributing an input to block the confirmation of a multi-party transaction at minimal cost, therefore enabling a liquidity griefing at low-cost (size of the pinning tx * mempool min fee).\r\n\r\nSince then, early Lightning Service Providers deploying dual-funding have raised again the [concern](https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-May/003920.html) on the mailing list during May of this year, and how sustained RBF signaling flag opt-out can be an annoying vector of pinning attack. While from my understanding the issue might be solved on the Lightning-side by upcoming deployment of nversion=3 (where full-rbf is implied by the policy regime), this wonât solve the pinning issue for coinjoin multi-party transactions which are concerned too (and this is not sure that weâre deploying nversion=3 for the dual-funding/splicing flows due to package limits size). With that context in mind, full-rbf by default is a welcome deployment for second-layers and multi-party applications.\r\n\r\nOn the deployment schedule, weâre still mid-26.0 schedule, so I think itâs reasonable to land it now (feature freeze scheduled for 2023-10-01 as of today July 24th). This still gives a period of roughly 5 months to zero-conf business and other software that would need to tweak their software.\r\n\r\n37% of the hash power sounds a reasonable demonstration of the Bitcoin mining ecosystem selecting the transaction-relay policy favoring maximization of their mining income strategy.\r\n\r\nSo Iâm Concept ACK on this change, I still think this change deserves announcement on the mailing list and usual technical communication channels to warn ecosystem stakeholders impacted by the proposed change.",
      "created_at" : "2023-07-23T23:51:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1646993842",
      "id" : 1646993842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iKyGy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646993842/reactions"
      },
      "updated_at" : "2023-07-23T23:51:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1646993842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I queried the explorer like this\r\n```\r\n~ $ curl -s https://mempool.space/api/v1/block/0000000000000000000153159d7b95debfb0dadcd1040aaf9dbeb0025a1ddeac/audit-summary | jq .fullrbfTxs\r\n[\r\n  \"53cec64b52989c531550ac4606bedf1ff83d5bfd90efdc4006f122ac6b1b7643\",\r\n  \"5bc64344c56f847e2d992fab241567075473eec9423776afadc187299352bce1\",\r\n  \"64ec51dedd1404a775d590f530a01bbdc4239c8eb6d33ce4b9217ec2f0b8ddae\"\r\n]\r\n```\r\nOnly 4 of 6 mentioned transactions seem to be full-rbf, or was it a wrong request?",
      "created_at" : "2023-07-24T09:40:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28132#issuecomment-1647569661",
      "id" : 1647569661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28132",
      "node_id" : "IC_kwDOABII585iM-r9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1647569661/reactions"
      },
      "updated_at" : "2023-07-24T09:40:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1647569661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73423761?v=4",
         "events_url" : "https://api.github.com/users/recursive-rat4/events{/privacy}",
         "followers_url" : "https://api.github.com/users/recursive-rat4/followers",
         "following_url" : "https://api.github.com/users/recursive-rat4/following{/other_user}",
         "gists_url" : "https://api.github.com/users/recursive-rat4/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/recursive-rat4",
         "id" : 73423761,
         "login" : "recursive-rat4",
         "node_id" : "MDQ6VXNlcjczNDIzNzYx",
         "organizations_url" : "https://api.github.com/users/recursive-rat4/orgs",
         "received_events_url" : "https://api.github.com/users/recursive-rat4/received_events",
         "repos_url" : "https://api.github.com/users/recursive-rat4/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/recursive-rat4/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/recursive-rat4/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/recursive-rat4"
      }
   }
]
