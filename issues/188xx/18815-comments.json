[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18061 (util: Pass size to ParseHex to assist preallocation by elichai)\n* #16116 (Avoid unnecessary signing provider copies on descriptor expansion by Empact)\n* #13204 (Faster sigcache nonce by JeremyRubin)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-29T16:24:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-621319436",
      "id" : 621319436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTMxOTQzNg==",
      "updated_at" : "2020-04-29T16:24:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621319436",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-04-29T18:23:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-621382696",
      "id" : 621382696,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTM4MjY5Ng==",
      "updated_at" : "2020-04-29T18:23:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621382696",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would it make sense to also benchmark the logging setup we use in the fuzz tests to avoid logging to disk?\r\n\r\n```c++\r\n    static TestingSetup setup{\r\n        CBaseChainParams::REGTEST,\r\n        {\r\n            \"-nodebuglogfile\",\r\n        },\r\n    };\r\n```",
      "created_at" : "2020-04-29T19:05:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-621404493",
      "id" : 621404493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTQwNDQ5Mw==",
      "updated_at" : "2020-04-29T19:06:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621404493",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To be honest, I think the idea of logging being performance critical is a bit scary. It was never meant like this. We shouldn't log in inner loops and such. Sure, debug flags are enabled it's different but one can expect a performance hit in that case. It's not really something to optimize for IMO.\r\n\r\n(not opposed to adding a benchmark, but I just think it's not a very high priority thing to optimize and a benchmark encourages this)\r\n\r\nEdit: I understand it now in the context of #18678",
      "created_at" : "2020-04-30T08:11:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-621684008",
      "id" : 621684008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTY4NDAwOA==",
      "updated_at" : "2020-04-30T09:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621684008",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Jup, this is not primarily to encourage people to optimize this function, but rather to make finding performance bottlenecks (https://github.com/bitcoin/bitcoin/issues/18538#issuecomment-614898713) or regressions (#17218) easier.",
      "created_at" : "2020-04-30T12:09:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-621792550",
      "id" : 621792550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTc5MjU1MA==",
      "updated_at" : "2020-04-30T12:09:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621792550",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think a big issue with the logging is that it does a bunch of string concatenation and allocation for formatting, instead of format strings+printf. When you do this in a tight loop/IBD, I'm not surprised that you would see performance issues.\r\n\r\nMy guess for the thread_local issue is just the fact that it has to allocate and concatenate even more when it formats threads names into the log.",
      "created_at" : "2020-05-02T10:07:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18815#issuecomment-622929713",
      "id" : 622929713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjkyOTcxMw==",
      "updated_at" : "2020-05-02T10:08:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622929713",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   }
]
