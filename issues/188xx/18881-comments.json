[
   {
      "author_association" : "MEMBER",
      "body" : "cc @sipa",
      "created_at" : "2020-05-05T06:06:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-623871970",
      "id" : 623871970,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18881",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzg3MTk3MA==",
      "updated_at" : "2020-05-05T06:06:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623871970",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420013187"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420013187"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    static LockData* lockdata = new LockData();\r\n```\r\n\r\nnot sure why auto needs to hide both the type and the pointer-ness. The additional 5 chars don't seem overly verbose.",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T10:35:42Z",
      "diff_hunk" : "@@ -78,21 +78,14 @@ typedef std::map<std::pair<void*, void*>, LockStack> LockOrders;\n typedef std::set<std::pair<void*, void*> > InvLockOrders;\n \n struct LockData {\n-    // Very ugly hack: as the global constructs and destructors run single\n-    // threaded, we use this boolean to know whether LockData still exists,\n-    // as DeleteLock can get called by global RecursiveMutex destructors\n-    // after LockData disappears.\n-    bool available;\n-    LockData() : available(true) {}\n-    ~LockData() { available = false; }\n-\n     LockOrders lockorders;\n     InvLockOrders invlockorders;\n     std::mutex dd_mutex;\n };\n LockData& GetLockData() {\n-    static LockData lockdata;\n-    return lockdata;\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static auto lockdata = new LockData();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420013187",
      "id" : 420013187,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDAxMzE4Nw==",
      "original_commit_id" : "5a406f76030263c1c4e5335cea3be022263426f2",
      "original_line" : 87,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/sync.cpp",
      "position" : null,
      "pull_request_review_id" : 405669322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420013187",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 5a406f76030263c1c4e5335cea3be022263426f2 -> 7e3f40dd594d81b37458f9f5d36d4d7df99f8917 ([pr18881.01](https://github.com/hebasto/bitcoin/commits/pr18881.01) -> [pr18881.02](https://github.com/hebasto/bitcoin/commits/pr18881.02), [diff](https://github.com/hebasto/bitcoin/compare/pr18881.01..pr18881.02)):\r\n\r\n- addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420013187):\r\n> not sure why auto needs to hide both the type and the pointer-ness. The additional 5 chars don't seem overly verbose.",
      "created_at" : "2020-05-05T10:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-623985636",
      "id" : 623985636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18881",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzk4NTYzNg==",
      "updated_at" : "2020-05-05T10:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623985636",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420022157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420022157"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-623985636).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T10:53:15Z",
      "diff_hunk" : "@@ -78,21 +78,14 @@ typedef std::map<std::pair<void*, void*>, LockStack> LockOrders;\n typedef std::set<std::pair<void*, void*> > InvLockOrders;\n \n struct LockData {\n-    // Very ugly hack: as the global constructs and destructors run single\n-    // threaded, we use this boolean to know whether LockData still exists,\n-    // as DeleteLock can get called by global RecursiveMutex destructors\n-    // after LockData disappears.\n-    bool available;\n-    LockData() : available(true) {}\n-    ~LockData() { available = false; }\n-\n     LockOrders lockorders;\n     InvLockOrders invlockorders;\n     std::mutex dd_mutex;\n };\n LockData& GetLockData() {\n-    static LockData lockdata;\n-    return lockdata;\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static auto lockdata = new LockData();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420022157",
      "id" : 420022157,
      "in_reply_to_id" : 420013187,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDAyMjE1Nw==",
      "original_commit_id" : "5a406f76030263c1c4e5335cea3be022263426f2",
      "original_line" : 87,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/sync.cpp",
      "position" : null,
      "pull_request_review_id" : 405679685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420022157",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420046291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420046291"
         }
      },
      "author_association" : "MEMBER",
      "body" : "approach guarantees",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:43:31Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guaranties that:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420046291",
      "id" : 420046291,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NjI5MQ==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 864,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420046291",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420046912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420046912"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the markdown is more readable without wrapping \"static\" in code markup (same for line 853 below)",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:44:45Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420046912",
      "id" : 420046912,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NjkxMg==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 847,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420046912",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420047499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420047499"
         }
      },
      "author_association" : "MEMBER",
      "body" : "can drop \"idiom\"? or maybe more clear with quotes: \"Construct On First Use\" idiom, but I personally prefer without \"idiom\"\r\n\r\n(same for line 853 below)",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:45:59Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420047499",
      "id" : 420047499,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NzQ5OQ==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 843,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420047499",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420047910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420047910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/gets/is/",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:46:47Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guaranties that:\n+\n+- an object gets constructed prior to its first use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420047910",
      "id" : 420047910,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NzkxMA==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 866,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420047910",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420048042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420048042"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/doesn't get/is not/",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:47:07Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guaranties that:\n+\n+- an object gets constructed prior to its first use\n+- an object doesnât get destructed until after its last use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420048042",
      "id" : 420048042,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0ODA0Mg==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 867,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420048042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 7e3f40dd594d81b37458f9f5d36d4d7df99f8917 -> a2234071ddc633cf92ba501126b74bf78731f676 ([pr18881.02](https://github.com/hebasto/bitcoin/commits/pr18881.02) -> [pr18881.03](https://github.com/hebasto/bitcoin/commits/pr18881.03), [diff](https://github.com/hebasto/bitcoin/compare/pr18881.02..pr18881.03)):\r\n\r\n- addressed @jonatack's [comment](https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420046291):\r\n> approach guarantees",
      "created_at" : "2020-05-05T11:49:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624007651",
      "id" : 624007651,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18881",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDAwNzY1MQ==",
      "updated_at" : "2020-05-05T11:49:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624007651",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420049394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420049394"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thank you! [Updated](https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624007651).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:49:47Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guaranties that:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420049394",
      "id" : 420049394,
      "in_reply_to_id" : 420046291,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0OTM5NA==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 864,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405712930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420049394",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420049925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420049925"
         }
      },
      "author_association" : "MEMBER",
      "body" : "developer",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:50:54Z",
      "diff_hunk" : "@@ -13,21 +13,7 @@ const char * const DEFAULT_DEBUGLOGFILE = \"debug.log\";\n \n BCLog::Logger& LogInstance()\n {\n-/**\n- * NOTE: the logger instances is leaked on exit. This is ugly, but will be\n- * cleaned up by the OS/libc. Defining a logger as a global object doesn't work\n- * since the order of destruction of static/global objects is undefined.\n- * Consider if the logger gets destroyed, and then some later destructor calls\n- * LogPrintf, maybe indirectly, and you get a core dump at shutdown trying to\n- * access the logger. When the shutdown sequence is fully audited and tested,\n- * explicit destruction of these objects can be implemented by changing this\n- * from a raw pointer to a std::unique_ptr.\n- * Since the destructor is never called, the logger and all its members must\n- * have a trivial destructor.\n- *\n- * This method of initialization was originally introduced in\n- * ee3374234c60aba2cc4c5cd5cac1c0aefc2d817c.\n- */\n+    // See doc/developers-notes.md#construct-on-first-use-idiom",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420049925",
      "id" : 420049925,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0OTkyNQ==",
      "original_commit_id" : "a2234071ddc633cf92ba501126b74bf78731f676",
      "original_line" : 16,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/logging.cpp",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420049925",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050170"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050170"
         }
      },
      "author_association" : "MEMBER",
      "body" : "developer",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:51:23Z",
      "diff_hunk" : "@@ -436,8 +436,7 @@ class RNGState {\n \n RNGState& GetRNGState() noexcept\n {\n-    // This C++11 idiom relies on the guarantee that static variable are initialized\n-    // on first call, even when multiple parallel calls are permitted.\n+    // See doc/developers-notes.md#construct-on-first-use-idiom",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050170",
      "id" : 420050170,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MDE3MA==",
      "original_commit_id" : "a2234071ddc633cf92ba501126b74bf78731f676",
      "original_line" : 439,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/random.cpp",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050170",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050539"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If the destructor for an object needs to be called",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:52:04Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:\n+\n+- an object gets constructed prior to its first use\n+- an object doesnât get destructed until after its last use\n+- the initialization of an object is thread-safe\n+\n+*Note 1*: Even though the object pointed to by a pointer is never deleted, the memory doesn't actually \"leak\" since the operating system automatically reclaims all the memory in a program's heap when that program exits.\n+\n+*Note 2*: If it is required that the destructor for an object is called while the program is exiting, other approaches must be used.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050539",
      "id" : 420050539,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MDUzOQ==",
      "original_commit_id" : "a2234071ddc633cf92ba501126b74bf78731f676",
      "original_line" : 872,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050539",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "developer",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:52:17Z",
      "diff_hunk" : "@@ -78,21 +78,14 @@ typedef std::map<std::pair<void*, void*>, LockStack> LockOrders;\n typedef std::set<std::pair<void*, void*> > InvLockOrders;\n \n struct LockData {\n-    // Very ugly hack: as the global constructs and destructors run single\n-    // threaded, we use this boolean to know whether LockData still exists,\n-    // as DeleteLock can get called by global RecursiveMutex destructors\n-    // after LockData disappears.\n-    bool available;\n-    LockData() : available(true) {}\n-    ~LockData() { available = false; }\n-\n     LockOrders lockorders;\n     InvLockOrders invlockorders;\n     std::mutex dd_mutex;\n };\n LockData& GetLockData() {\n-    static LockData lockdata;\n-    return lockdata;\n+    // See doc/developers-notes.md#construct-on-first-use-idiom",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420050657",
      "id" : 420050657,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MDY1Nw==",
      "original_commit_id" : "a2234071ddc633cf92ba501126b74bf78731f676",
      "original_line" : 86,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/sync.cpp",
      "position" : null,
      "pull_request_review_id" : 405709912,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420050657",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420053647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420053647"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oops, somehow that comment was published before the review...GitHub :man_shrugging: ",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T11:58:06Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use idiom\n+------------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"`static` initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the `static` initialization order problem, use the Construct On First Use idiom:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developers-notes.md#construct-on-first-use-idiom\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guaranties that:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420053647",
      "id" : 420053647,
      "in_reply_to_id" : 420046291,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA1MzY0Nw==",
      "original_commit_id" : "7e3f40dd594d81b37458f9f5d36d4d7df99f8917",
      "original_line" : 864,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405718197,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420053647",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated a2234071ddc633cf92ba501126b74bf78731f676 -> d3c26862e263fea7d49df7f9bc9acef30a84c1ca ([pr18881.03](https://github.com/hebasto/bitcoin/commits/pr18881.03) -> [pr18881.04](https://github.com/hebasto/bitcoin/commits/pr18881.04), [diff](https://github.com/hebasto/bitcoin/compare/pr18881.03..pr18881.04)):\r\n\r\n- addressed @jonatack's comments",
      "created_at" : "2020-05-05T12:14:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624019271",
      "id" : 624019271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18881",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDAxOTI3MQ==",
      "updated_at" : "2020-05-05T12:14:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624019271",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420082930"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420082930"
         }
      },
      "author_association" : "MEMBER",
      "body" : "approach",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T12:50:19Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420082930",
      "id" : 420082930,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4MjkzMA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 864,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405754524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420082930",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420083226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420083226"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/use the/be sure to/",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T12:50:50Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420083226",
      "id" : 420083226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4MzIyNg==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 853,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405754524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420083226",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420084466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420084466"
         }
      },
      "author_association" : "MEMBER",
      "body" : "comment seems unneeded?",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T12:53:00Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420084466",
      "id" : 420084466,
      "line" : 858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4NDQ2Ng==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 858,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 27,
      "pull_request_review_id" : 405754524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420084466",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420084908"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420084908"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is this code snippet a good explanation of the concept?",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T12:53:44Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420084908",
      "id" : 420084908,
      "line" : 856,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4NDkwOA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 856,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 25,
      "pull_request_review_id" : 405754524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420084908",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420086744"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420086744"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sorry to re-review the same area, but I think this could be reduced to two points and would be better written as:\r\n- the object is constructed before first use and not destroyed until after last use\r\n- the object initialization is thread-safe\r\n\r\n(also: destructed -> destroyed and the \"its\" can be removed)",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T12:56:34Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:\n+\n+- an object is constructed prior to its first use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420086744",
      "id" : 420086744,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA4Njc0NA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 866,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405754524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420086744",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420100644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420100644"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems developers need multi-line comments to describe rationale of using  COFU :)\r\nThis oneliner is just a pointer to docs with detailed explanation and pitfalls (like not calling a destructor). I'd prefer keep it as is.",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:17:41Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420100644",
      "id" : 420100644,
      "in_reply_to_id" : 420084466,
      "line" : 858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwMDY0NA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 858,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 27,
      "pull_request_review_id" : 405777105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420100644",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420101738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420101738"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not? I'd say \"example\" rather \"explanation\".",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:19:16Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420101738",
      "id" : 420101738,
      "in_reply_to_id" : 420084908,
      "line" : 856,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwMTczOA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 856,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 25,
      "pull_request_review_id" : 405778448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:24:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420101738",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated d3c26862e263fea7d49df7f9bc9acef30a84c1ca -> 86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc ([pr18881.04](https://github.com/hebasto/bitcoin/commits/pr18881.04) -> [pr18881.05](https://github.com/hebasto/bitcoin/commits/pr18881.05), [diff](https://github.com/hebasto/bitcoin/compare/pr18881.04..pr18881.05)):\r\n\r\n- addressed @jonatack's comments",
      "created_at" : "2020-05-05T13:26:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624053939",
      "id" : 624053939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18881",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNDA1MzkzOQ==",
      "updated_at" : "2020-05-05T13:26:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624053939",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107046"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624053939).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:26:50Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107046",
      "id" : 420107046,
      "in_reply_to_id" : 420082930,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwNzA0Ng==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 864,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405785343,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:26:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107046",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107190"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624053939).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:27:01Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107190",
      "id" : 420107190,
      "in_reply_to_id" : 420083226,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwNzE5MA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 853,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405785532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107190",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107506"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/18881#issuecomment-624053939).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:27:27Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:\n+\n+- an object is constructed prior to its first use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420107506",
      "id" : 420107506,
      "in_reply_to_id" : 420086744,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwNzUwNg==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 866,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405785948,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:27:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420107506",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420109240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420109240"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, in the codebase it's fine but here it's a pointer to itself :) edit: reading the rendered doc I guess it's fine",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:29:45Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420109240",
      "id" : 420109240,
      "in_reply_to_id" : 420084466,
      "line" : 858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwOTI0MA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 858,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 27,
      "pull_request_review_id" : 405788154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:32:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420109240",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420109425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420109425"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"its\" seems prevent any ambiguation :)",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:30:01Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};\n+    return *g_logger;\n+}\n+```\n+\n+*Rationale*: This approache guarantees that:\n+\n+- an object is constructed prior to its first use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420109425",
      "id" : 420109425,
      "in_reply_to_id" : 420086744,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDEwOTQyNQ==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 866,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : null,
      "pull_request_review_id" : 405788393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420109425",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420112012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420112012"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure; people can look it up anyway for more info.",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:33:39Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420112012",
      "id" : 420112012,
      "in_reply_to_id" : 420084908,
      "line" : 856,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDExMjAxMg==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 856,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 25,
      "pull_request_review_id" : 405791697,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:33:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420112012",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420112084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420112084"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As it is an \"example\", the presence of the comment line seems reasonable, no?",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T13:33:44Z",
      "diff_hunk" : "@@ -839,6 +840,37 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, use the Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420112084",
      "id" : 420112084,
      "in_reply_to_id" : 420084466,
      "line" : 858,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDExMjA4NA==",
      "original_commit_id" : "d3c26862e263fea7d49df7f9bc9acef30a84c1ca",
      "original_line" : 858,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 27,
      "pull_request_review_id" : 405791799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T13:33:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420112084",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420242951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420242951"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's nicer to use std::unique_pointer here, so that the object also gets destroyed on shutdown (in reserve order compared to initialization).",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T16:29:33Z",
      "diff_hunk" : "@@ -839,6 +840,36 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, be sure to Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420242951",
      "id" : 420242951,
      "line" : 859,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0Mjk1MQ==",
      "original_commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "original_line" : 859,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 28,
      "pull_request_review_id" : 405956635,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T16:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420242951",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420247771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420247771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree that the docs should recommend the version that doesn't leak. An additional note can say that a version that leaks might be preferable in rare circumstances.",
      "commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "created_at" : "2020-05-05T16:36:16Z",
      "diff_hunk" : "@@ -839,6 +840,36 @@ namespace {\n #endif // BITCOIN_FOO_BAR_H\n ```\n \n+Construct On First Use\n+------------------------\n+\n+It is not possible to control the order in which non-local static objects in *different* translation units are initialized.\n+This is the so-called \"static initialization order problem\". It could cause the use of an object:\n+- before it is constructed (on program startup)\n+- after it is destructed (at program exit)\n+\n+Both cases lead to undefined behavior.\n+\n+To prevent the static initialization order problem, be sure to Construct On First Use:\n+\n+```C++\n+BCLog::Logger& LogInstance()\n+{\n+    // See doc/developer-notes.md#construct-on-first-use\n+    static BCLog::Logger* g_logger{new BCLog::Logger()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18881#discussion_r420247771",
      "id" : 420247771,
      "in_reply_to_id" : 420242951,
      "line" : 859,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0Nzc3MQ==",
      "original_commit_id" : "86ce03c53e22f0ce2c4bfbabd4aae5cf62dcb0fc",
      "original_line" : 859,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "doc/developer-notes.md",
      "position" : 28,
      "pull_request_review_id" : 405962487,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18881",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-05T16:36:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/420247771",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
