[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r183571007"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183571007"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note, equivalent to `count = std::dynamic_extent` in std::span.",
      "commit_id" : "91c12000dd97d7b9b9c82d1bbc92c7bbadd3d6ed",
      "created_at" : "2018-04-23T23:54:52Z",
      "diff_hunk" : "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }\n+\n+    constexpr Span<C> subspan(std::ptrdiff_t offset) const noexcept { return Span<C>(m_data + offset, m_size - offset); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r183571007",
      "id" : 183571007,
      "original_commit_id" : "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
      "original_position" : 9,
      "path" : "src/span.h",
      "position" : 9,
      "pull_request_review_id" : 114594507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
      "updated_at" : "2018-04-24T00:00:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183571007",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Makes `interpreter.cpp` more self-contained, that's good.\r\nVerified that:\r\n- Consensus `IsPayToScriptHash` matches `CScript::IsPayToScriptHash`: copy-only apart from variable names\r\n- Consensus `IsWitnessProgram` matches `CScript::IsWitnessProgram`: \r\n  - a size_t becomes ptr_diff_t: not an issue as only positive values are possible (unsigned char + 2)\r\n  - `std::vector<unsigned char>(this->begin() + 2, this->end())` becomes `script.subspan(2)`: should be ok, it's defined as `Span(m_data + offset, m_size - offset)`\r\n- Consensus `IsPushOnly` matches `CScript::IsPushOnly`:\r\n  - `pc` becomes `Span` instead of a `const_iterator`: effective behavior is the same\r\n  - `GetOp` becomes `GetScriptOp`: GetOp is already defined in that way, so should be fine\r\n\r\nOther changes look straightforward.\r\n\r\nutACK 91c12000dd97d7b9b9c82d1bbc92c7bbadd3d6ed",
      "created_at" : "2018-04-25T13:51:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-384294167",
      "id" : 384294167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-25T13:51:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384294167",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems to be lacking a bunch of motivation. Can you clarify *why* you want to run a script stored in a span?",
      "created_at" : "2018-04-27T16:40:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385026068",
      "id" : 385026068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-27T16:40:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385026068",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@TheBlueMatt They're not stored in a Span; a Span is just a way to refer to a script stored anywhere (vector, array, prevector, whatever custom structure that can hold a continuous sequence of bytes).\n\nI'll add some more motivation.",
      "created_at" : "2018-04-27T16:51:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385029327",
      "id" : 385029327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-27T16:51:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385029327",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Suresure, I was asking for motivation of where we want to do this in the immediate future (do you have any branches that run scripts in non-prevector form?). The only place I can think of it being useful is in libbitcoinconsensus.",
      "created_at" : "2018-04-27T16:55:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385030495",
      "id" : 385030495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-27T16:55:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385030495",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@TheBlueMatt No code to show, but I added some thoughts to the PR description.",
      "created_at" : "2018-04-27T17:02:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385032610",
      "id" : 385032610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-27T17:02:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385032610",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, the scriptPubKey/scriptSig distinction seems like a reasonable idea. Would love to see a branch with that implemented to see the feasibility of using this in the short-term after a merge.",
      "created_at" : "2018-04-27T17:12:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385035134",
      "id" : 385035134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
      "updated_at" : "2018-04-27T17:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385035134",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
