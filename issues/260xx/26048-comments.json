[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26048#discussion_r966268944"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966268944"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    mapTx.modify(updateIt, [&/=](CTxMemPoolEntry& e) {\r\n```\r\n\r\nIs there any downside to just taking a reference/copy of everything that is used inside the lambda? This would make the code not too much more verbose than it previously was, and it would still be clear that every symbol used in the lambda is captured by reference/copy.",
      "commit_id" : "a02af7ca5066d3ffebb81c5b74f3f36b80eb9f20",
      "created_at" : "2022-09-08T18:03:14Z",
      "diff_hunk" : "@@ -155,7 +125,9 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendan\n             }\n         }\n     }\n-    mapTx.modify(updateIt, update_descendant_state(modifySize, modifyFee, modifyCount));\n+    mapTx.modify(updateIt, [modifySize, modifyFee, modifyCount](CTxMemPoolEntry& e) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26048#discussion_r966268944",
      "id" : 966268944,
      "line" : 128,
      "node_id" : "PRRC_kwDOABII5845mBgQ",
      "original_commit_id" : "a02af7ca5066d3ffebb81c5b74f3f36b80eb9f20",
      "original_line" : 128,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 55,
      "pull_request_review_id" : 1101179592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966268944/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-08T18:03:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966268944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25673](https://github.com/bitcoin/bitcoin/pull/25673) (refactor: make member functions const when applicable by aureleoules)\n* [#23962](https://github.com/bitcoin/bitcoin/pull/23962) (Use `int32_t` type for transaction size/weight consistently by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-09-09T03:15:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26048#issuecomment-1241450056",
      "id" : 1241450056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26048",
      "node_id" : "IC_kwDOABII585J_wZI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241450056/reactions"
      },
      "updated_at" : "2022-09-09T03:15:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241450056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26048#discussion_r966878506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966878506"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point, no downside. Changed them all to default-capture by value since they are pointers and int arguments.",
      "commit_id" : "1b348d2725f6271d7f78b4668ab35014cdb176be",
      "created_at" : "2022-09-09T10:10:44Z",
      "diff_hunk" : "@@ -155,7 +125,9 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap& cachedDescendan\n             }\n         }\n     }\n-    mapTx.modify(updateIt, update_descendant_state(modifySize, modifyFee, modifyCount));\n+    mapTx.modify(updateIt, [modifySize, modifyFee, modifyCount](CTxMemPoolEntry& e) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26048#discussion_r966878506",
      "id" : 966878506,
      "in_reply_to_id" : 966268944,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845oWUq",
      "original_commit_id" : "a02af7ca5066d3ffebb81c5b74f3f36b80eb9f20",
      "original_line" : 128,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1102053823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966878506/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-09T10:10:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/966878506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@amovfx probably the best way to review this PR is to review the code manually and check that no behavior has changed. If you want to run a quick smoke check (would show if something is really wrong in mempool entry accounting), I often use `make check && test/functional/test_runner.py test/functional/mempool* test/functional/rpc_packages.py test/functional/feature_rbf.py test/functional/mining_prioritisetransaction.py`.",
      "created_at" : "2022-09-09T10:19:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26048#issuecomment-1241786501",
      "id" : 1241786501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26048",
      "node_id" : "IC_kwDOABII585KBCiF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241786501/reactions"
      },
      "updated_at" : "2022-09-09T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1241786501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @amovfx probably the best way to review this PR is to review the code manually and check that no behavior has changed. If you want to run a quick smoke check (would show if something is really wrong in mempool entry accounting), I often use `make check && test/functional/test_runner.py test/functional/mempool* test/functional/rpc_packages.py test/functional/feature_rbf.py test/functional/mining_prioritisetransaction.py`.\r\n\r\nThanks! Ill do this. I did this and everything is working, I tried running the test thats getting caught on the check for 32-bit + dash [gui] [CentOS 8], \"wallet_reorgsrestore.py\" and my test passed fine on macOS.\r\n\r\nI imagine I should be trying to test that in a docker container?",
      "created_at" : "2022-09-09T18:15:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26048#issuecomment-1242316196",
      "id" : 1242316196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26048",
      "node_id" : "IC_kwDOABII585KDD2k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242316196/reactions"
      },
      "updated_at" : "2022-09-09T18:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242316196",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45839100?v=4",
         "events_url" : "https://api.github.com/users/amovfx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amovfx/followers",
         "following_url" : "https://api.github.com/users/amovfx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amovfx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amovfx",
         "id" : 45839100,
         "login" : "amovfx",
         "node_id" : "MDQ6VXNlcjQ1ODM5MTAw",
         "organizations_url" : "https://api.github.com/users/amovfx/orgs",
         "received_events_url" : "https://api.github.com/users/amovfx/received_events",
         "repos_url" : "https://api.github.com/users/amovfx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amovfx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amovfx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amovfx"
      }
   }
]
