[
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/26088/checks?check_run_id=8346907823:\r\n```bash\r\nThe locale dependent function strtol(...) appears to be used:\r\nsrc/httprpc.cpp:            const auto perms{strtol(cookie_perms_arg->c_str(), &cookie_perms_end, 8)};\r\n\r\nUnnecessary locale depedence can cause bugs that are very tricky to isolate and fix. Please avoid using locale dependent functions if possible.\r\n```",
      "created_at" : "2022-09-14T09:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#issuecomment-1246495531",
      "id" : 1246495531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26088",
      "node_id" : "IC_kwDOABII585KTAMr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246495531/reactions"
      },
      "updated_at" : "2022-09-14T09:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246495531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed lint error.",
      "created_at" : "2022-09-14T09:43:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#issuecomment-1246508091",
      "id" : 1246508091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26088",
      "node_id" : "IC_kwDOABII585KTDQ7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246508091/reactions"
      },
      "updated_at" : "2022-09-14T09:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246508091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971081731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971081731"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n    if (cookie_perms) {\r\n```",
      "commit_id" : "857d46e47a18265eb229a1ea20064d634786bc72",
      "created_at" : "2022-09-14T17:01:39Z",
      "diff_hunk" : "@@ -98,6 +98,15 @@ bool GenerateAuthCookie(std::string *cookie_out)\n     file << cookie;\n     file.close();\n \n+    if(cookie_perms) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971081731",
      "id" : 971081731,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58454YgD",
      "original_commit_id" : "aa5afedd51f0301b45edfcdb6aa2d5d19e7816a8",
      "original_line" : 101,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/request.cpp",
      "position" : null,
      "pull_request_review_id" : 1107896339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971081731/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-14T17:01:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971081731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971087418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087418"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n        if (cookie_perms_arg) {\r\n```",
      "commit_id" : "857d46e47a18265eb229a1ea20064d634786bc72",
      "created_at" : "2022-09-14T17:08:02Z",
      "diff_hunk" : "@@ -238,12 +238,35 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n     return true;\n }\n \n+static std::optional<unsigned> StringToOctal(const std::string& str)\n+{\n+    unsigned ret = 0;\n+    for (char c : str) {\n+        if (c < '0' || c > '7') return std::nullopt;\n+        ret = (ret << 3) | (c - '0');\n+    }\n+    return ret;\n+}\n+\n static bool InitRPCAuthentication()\n {\n     if (gArgs.GetArg(\"-rpcpassword\", \"\") == \"\")\n     {\n         LogPrintf(\"Using random cookie authentication.\\n\");\n-        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+\n+        std::optional<fs::perms> cookie_perms;\n+        auto cookie_perms_arg{gArgs.GetArg(\"-rpccookieperms\")};\n+        if(cookie_perms_arg) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971087418",
      "id" : 971087418,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58454Z46",
      "original_commit_id" : "aa5afedd51f0301b45edfcdb6aa2d5d19e7816a8",
      "original_line" : 259,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1107904911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087418/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-14T17:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971087653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087653"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n            if (!perms) {\r\n```",
      "commit_id" : "857d46e47a18265eb229a1ea20064d634786bc72",
      "created_at" : "2022-09-14T17:08:18Z",
      "diff_hunk" : "@@ -238,12 +238,35 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n     return true;\n }\n \n+static std::optional<unsigned> StringToOctal(const std::string& str)\n+{\n+    unsigned ret = 0;\n+    for (char c : str) {\n+        if (c < '0' || c > '7') return std::nullopt;\n+        ret = (ret << 3) | (c - '0');\n+    }\n+    return ret;\n+}\n+\n static bool InitRPCAuthentication()\n {\n     if (gArgs.GetArg(\"-rpcpassword\", \"\") == \"\")\n     {\n         LogPrintf(\"Using random cookie authentication.\\n\");\n-        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+\n+        std::optional<fs::perms> cookie_perms;\n+        auto cookie_perms_arg{gArgs.GetArg(\"-rpccookieperms\")};\n+        if(cookie_perms_arg) {\n+            auto perms{StringToOctal(*cookie_perms_arg)};\n+            if(!perms) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971087653",
      "id" : 971087653,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58454Z8l",
      "original_commit_id" : "aa5afedd51f0301b45edfcdb6aa2d5d19e7816a8",
      "original_line" : 261,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1107904911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087653/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-14T17:09:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971087653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971124443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971124443"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@aureleoules running clang-format on your changes before pushing avoids these little issues; see `/contrib/devtools/clang-format-diff.py` for more info",
      "commit_id" : "857d46e47a18265eb229a1ea20064d634786bc72",
      "created_at" : "2022-09-14T17:47:41Z",
      "diff_hunk" : "@@ -238,12 +238,35 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n     return true;\n }\n \n+static std::optional<unsigned> StringToOctal(const std::string& str)\n+{\n+    unsigned ret = 0;\n+    for (char c : str) {\n+        if (c < '0' || c > '7') return std::nullopt;\n+        ret = (ret << 3) | (c - '0');\n+    }\n+    return ret;\n+}\n+\n static bool InitRPCAuthentication()\n {\n     if (gArgs.GetArg(\"-rpcpassword\", \"\") == \"\")\n     {\n         LogPrintf(\"Using random cookie authentication.\\n\");\n-        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+\n+        std::optional<fs::perms> cookie_perms;\n+        auto cookie_perms_arg{gArgs.GetArg(\"-rpccookieperms\")};\n+        if(cookie_perms_arg) {\n+            auto perms{StringToOctal(*cookie_perms_arg)};\n+            if(!perms) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971124443",
      "id" : 971124443,
      "in_reply_to_id" : 971087653,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58454i7b",
      "original_commit_id" : "aa5afedd51f0301b45edfcdb6aa2d5d19e7816a8",
      "original_line" : 261,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1107958603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971124443/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-14T17:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971124443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971164132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971164132"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes I forgot to run it... Fixed the issues by running it.",
      "commit_id" : "857d46e47a18265eb229a1ea20064d634786bc72",
      "created_at" : "2022-09-14T18:28:23Z",
      "diff_hunk" : "@@ -238,12 +238,35 @@ static bool HTTPReq_JSONRPC(const std::any& context, HTTPRequest* req)\n     return true;\n }\n \n+static std::optional<unsigned> StringToOctal(const std::string& str)\n+{\n+    unsigned ret = 0;\n+    for (char c : str) {\n+        if (c < '0' || c > '7') return std::nullopt;\n+        ret = (ret << 3) | (c - '0');\n+    }\n+    return ret;\n+}\n+\n static bool InitRPCAuthentication()\n {\n     if (gArgs.GetArg(\"-rpcpassword\", \"\") == \"\")\n     {\n         LogPrintf(\"Using random cookie authentication.\\n\");\n-        if (!GenerateAuthCookie(&strRPCUserColonPass)) {\n+\n+        std::optional<fs::perms> cookie_perms;\n+        auto cookie_perms_arg{gArgs.GetArg(\"-rpccookieperms\")};\n+        if(cookie_perms_arg) {\n+            auto perms{StringToOctal(*cookie_perms_arg)};\n+            if(!perms) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26088#discussion_r971164132",
      "id" : 971164132,
      "in_reply_to_id" : 971087653,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58454snk",
      "original_commit_id" : "aa5afedd51f0301b45edfcdb6aa2d5d19e7816a8",
      "original_line" : 261,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : null,
      "pull_request_review_id" : 1108015410,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26088",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971164132/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-14T18:28:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/971164132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   }
]
