[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19877#discussion_r483977328"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19877"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483977328"
         }
      },
      "author_association" : "NONE",
      "body" : "Why did you move `test_getpeerinfo` function declaration 75 lines upwards if you haven't modified it? It just creates unnecessary diffs for your commit.",
      "commit_id" : "9bd90db7e97cbc3f34d6f6da8097305325af0420",
      "created_at" : "2020-09-05T18:48:12Z",
      "diff_hunk" : "@@ -69,6 +72,30 @@ def test_connection_count(self):\n         # After using `connect_nodes` to connect nodes 0 and 1 to each other.\n         assert_equal(self.nodes[0].getconnectioncount(), 2)\n \n+    def test_getpeerinfo(self):\n+        self.log.info(\"Test getpeerinfo\")\n+        # Create a few getpeerinfo last_block/last_transaction values.\n+        if self.is_wallet_compiled():\n+            self.nodes[0].sendtoaddress(self.nodes[1].getnewaddress(), 1)\n+        self.nodes[1].generate(1)\n+        self.sync_all()\n+        time_now = int(time.time())\n+        peer_info = [x.getpeerinfo() for x in self.nodes]\n+        # Verify last_block and last_transaction keys/values.\n+        for node, peer, field in product(range(self.num_nodes), range(2), ['last_block', 'last_transaction']):\n+            assert field in peer_info[node][peer].keys()\n+            if peer_info[node][peer][field] != 0:\n+                assert_approx(peer_info[node][peer][field], time_now, vspan=60)\n+        # check both sides of bidirectional connection between nodes\n+        # the address bound to on one side will be the source address for the other node\n+        assert_equal(peer_info[0][0]['addrbind'], peer_info[1][0]['addr'])\n+        assert_equal(peer_info[1][0]['addrbind'], peer_info[0][0]['addr'])\n+        assert_equal(peer_info[0][0]['minfeefilter'], Decimal(\"0.00000500\"))\n+        assert_equal(peer_info[1][0]['minfeefilter'], Decimal(\"0.00001000\"))\n+        # check the `servicesnames` field\n+        for info in peer_info:\n+            assert_net_servicesnames(int(info[0][\"services\"], 0x10), info[0][\"servicesnames\"])\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19877#discussion_r483977328",
      "id" : 483977328,
      "line" : 98,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk3NzMyOA==",
      "original_commit_id" : "9bd90db7e97cbc3f34d6f6da8097305325af0420",
      "original_line" : 98,
      "original_position" : 42,
      "original_start_line" : 75,
      "path" : "test/functional/rpc_net.py",
      "position" : 42,
      "pull_request_review_id" : 483072459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19877",
      "side" : "RIGHT",
      "start_line" : 75,
      "start_side" : "RIGHT",
      "updated_at" : "2020-09-05T18:48:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/483977328",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/9049790?v=4",
         "events_url" : "https://api.github.com/users/ipriver/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ipriver/followers",
         "following_url" : "https://api.github.com/users/ipriver/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ipriver/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ipriver",
         "id" : 9049790,
         "login" : "ipriver",
         "node_id" : "MDQ6VXNlcjkwNDk3OTA=",
         "organizations_url" : "https://api.github.com/users/ipriver/orgs",
         "received_events_url" : "https://api.github.com/users/ipriver/received_events",
         "repos_url" : "https://api.github.com/users/ipriver/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ipriver/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ipriver/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ipriver"
      }
   }
]
