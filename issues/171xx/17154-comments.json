[
   {
      "author_association" : "MEMBER",
      "body" : "Slightly tend to NACK. What is this needed for?\r\n\r\nEffectively, a gui user will send the transaction twice (spending different coins), losing all their funds.",
      "created_at" : "2019-10-15T19:25:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542366872",
      "id" : 542366872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjM2Njg3Mg==",
      "updated_at" : "2019-10-15T19:25:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542366872",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n> Slightly tend to NACK. What is this needed for?\r\n\r\nCurrently the function returns a bool, which is always `true`, but the callers have logic that depends on the return value.\r\n\r\n`CommitTransaction()` did previously return `true`/`false` based on success. That was removed in #9302 so that the `send___` RPC methods would return the txid even if the transaction failed to broadcast. That's useful because the transaction will still exist in the wallet, so the RPC user would want to know about it. The fix should have been to have the call sites ignore the return value of `CommitTransaction()`, but instead the PR changed the function itself to not return success/failure, meaning that as a side effect `WalletModel::sendCoins()` is no longer informed if transaction broadcast fails. From reading the PR, it looks to me like that change was unintentional.\r\n\r\nI could change this PR to maintain the current behaviour (not return success to `WalletModel::sendCoins()`). Do you think that's preferable?",
      "created_at" : "2019-10-15T19:47:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542375108",
      "id" : 542375108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjM3NTEwOA==",
      "updated_at" : "2019-10-15T19:47:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542375108",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> From reading the PR, it looks to me like that change was unintentional.\r\n\r\nI am pretty sure it was intentional. At least that was my understanding, see https://github.com/bitcoin/bitcoin/pull/9302#issuecomment-266284389\r\n\r\nTo sum up, the wallet is only allowed to do one of the following:\r\n* Create a tx, sign it and add it to the wallet, so that it can be rebroadcast immediately or later, then `return true`\r\n* Create a tx, sign it and throw it away for some reason, then `return false`\r\n\r\nA wallet is not allowed to create a tx, sign it and add it to the wallet, so that it will be rebroadcast later, but `return false`. <-- This is what you pull request is doing.",
      "created_at" : "2019-10-15T20:45:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542396757",
      "id" : 542396757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjM5Njc1Nw==",
      "updated_at" : "2019-10-15T20:45:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542396757",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15921](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15921.html) (validation: Tidy up ValidationState interface by jnewbery)\n* [#14582](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14582.html) (wallet: try -avoidpartialspends mode and use its result if fees do not change by kallewoof)\n* [#9381](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/9381.html) (Remove CWalletTx merging logic from AddToWallet by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-10-15T20:47:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542397716",
      "id" : 542397716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjM5NzcxNg==",
      "updated_at" : "2019-10-15T20:47:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542397716",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "In that case, `CommitTransaction` should not return anything, and all the dead code in `if (!CommitTransaction())` blocks should be removed.",
      "created_at" : "2019-10-15T20:59:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542402331",
      "id" : 542402331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjQwMjMzMQ==",
      "updated_at" : "2019-10-15T20:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542402331",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fine with me",
      "created_at" : "2019-10-15T22:04:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17154#issuecomment-542424765",
      "id" : 542424765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17154",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjQyNDc2NQ==",
      "updated_at" : "2019-10-15T22:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542424765",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
