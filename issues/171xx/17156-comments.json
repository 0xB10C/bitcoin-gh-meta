[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nThanks for addressing these issues quickly! :) Will test.",
      "created_at" : "2019-10-15T22:50:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-542437438",
      "id" : 542437438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MjQzNzQzOA==",
      "updated_at" : "2019-10-15T22:51:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/542437438",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "With this patch applied the PSBT fuzzer appears to be unable to trigger the problematic conditions listed in the issue #17149.\r\n\r\nHowever, I noticed that using the following 202 byte input:\r\n\r\n```\r\n70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\r\n```\r\n\r\nThe following UBSan condition is triggered:\r\n\r\n```\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7fff2c5dc562 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7fff2c5dc562: note: pointer points here\r\n ff ff  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^\r\n    #0 0x56183e4f724f in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) src/./prevector.h:452:9\r\n    #1 0x56183e4ec6fa in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) src/./prevector.h:272:9\r\n    #2 0x56183e4ec6fa in CScript::operator=(CScript&&) src/./script/script.h:390\r\n    #3 0x56183f407fa9 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) src/script/sign.cpp:240:23\r\n    #4 0x56183f30c8a3 in SignPSBTInput(SigningProvider const&, PartiallySignedTransaction&, int, int, SignatureData*, bool) src/psbt.cpp:285:24\r\n    #5 0x56183e7eb0e8 in AnalyzePSBT(PartiallySignedTransaction) src/node/psbt.cpp:54:29\r\n    #6 0x56183e393014 in test_one_input(std::vector<unsigned char, std::allocator<unsigned char> > const&) src/test/fuzz/psbt.cpp:28:35\r\nâ¦\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior prevector.h:452:19 in\r\n```\r\n\r\nMight be worth tackling that one as well?",
      "created_at" : "2019-10-17T11:06:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543123631",
      "id" : 543123631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzEyMzYzMQ==",
      "updated_at" : "2019-10-17T11:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543123631",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What do I need to run in order to get the same error?",
      "created_at" : "2019-10-17T17:55:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543290034",
      "id" : 543290034,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5MDAzNA==",
      "updated_at" : "2019-10-17T17:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543290034",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Something like this:\r\n\r\n```\r\n#check out this branch\r\n./configure --disable-ccache --enable-fuzz --with-sanitizers=fuzzer,address,undefined CC=clang CXX=clang++\r\nmake -j 9\r\nexport LSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/lsan\"\r\nexport TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan\"\r\nexport UBSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/ubsan:print_stacktrace=1:halt_on_error=1\"\r\n#run this fuzzer with the seed\r\n./src/test/fuzz/this_fuzzer -runs=1 ./the_input\r\n",
      "created_at" : "2019-10-17T18:06:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543294418",
      "id" : 543294418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5NDQxOA==",
      "updated_at" : "2019-10-17T18:06:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543294418",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure how to translate the base16 seed into a binary seed with the command line, though",
      "created_at" : "2019-10-17T18:07:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543294629",
      "id" : 543294629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzI5NDYyOQ==",
      "updated_at" : "2019-10-17T18:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543294629",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\n```\r\n$ xxd -r -p > seed <<< \"70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\"\r\n$ head -c4 seed\r\npsbt\r\n```\r\n\r\n:)",
      "created_at" : "2019-10-17T18:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543302776",
      "id" : 543302776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzMwMjc3Ng==",
      "updated_at" : "2019-10-17T18:27:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543302776",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n```\r\n$ CC=clang CXX=clang++ ./configure --enable-fuzz \\\r\n      --with-sanitizers=address,fuzzer,undefined\r\n$ make\r\n$ mkdir psbt-seeds/\r\n$ xxd -r -p > psbt-seeds/seed <<< \"70736274ff01009a020000000258e87a21b56daf0c23be8e7070456c336f\r\n7cbaa5c8757924f545887bb282dd750000000000ffffffff838d0427d0ec\r\n650a68aa46bb0b098aea4422c071b2ca78352a077959d07cea1d01000000\r\n00ffffffff0270aaf00800000000160014d85c2b71d0060b09c9886aeb81\r\n5e50991dda124d00e1f5050000000016001400aea9a2e5f0f876a588df55\r\n46e8742d202020ffff603016000001012000c2eb0b000000001714a9b7f5\r\nfaff09090010610000db2a077959d07cea1d01000000\"\r\n$ UBSAN_OPTIONS=\"print_stacktrace=1:halt_on_error=1\" src/test/fuzz/psbt psbt-seeds/\r\nâ¦\r\nprevector.h:452:19: runtime error: reference binding to misaligned address 0x7fff2c5dc562 for type 'prevector<28, unsigned char, unsigned int, int>::size_type' (aka 'unsigned int'), which requires 4 byte alignment\r\n0x7fff2c5dc562: note: pointer points here\r\n ff ff  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00\r\n              ^\r\n    #0 0x56183e4f724f in prevector<28u, unsigned char, unsigned int, int>::swap(prevector<28u, unsigned char, unsigned int, int>&) src/./prevector.h:452:9\r\n    #1 0x56183e4ec6fa in prevector<28u, unsigned char, unsigned int, int>::operator=(prevector<28u, unsigned char, unsigned int, int>&&) src/./prevector.h:272:9\r\n    #2 0x56183e4ec6fa in CScript::operator=(CScript&&) src/./script/script.h:390\r\n    #3 0x56183f407fa9 in ProduceSignature(SigningProvider const&, BaseSignatureCreator const&, CScript const&, SignatureData&) src/script/sign.cpp:240:23\r\n    #4 0x56183f30c8a3 in SignPSBTInput(SigningProvider const&, PartiallySignedTransaction&, int, int, SignatureData*, bool) src/psbt.cpp:285:24\r\n    #5 0x56183e7eb0e8 in AnalyzePSBT(PartiallySignedTransaction) src/node/psbt.cpp:54:29\r\n    #6 0x56183e393014 in test_one_input(std::vector<unsigned char, std::allocator<unsigned char> > const&) src/test/fuzz/psbt.cpp:28:35\r\nâ¦\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior prevector.h:452:19 in\r\n```\r\n\r\n:)",
      "created_at" : "2019-10-17T18:39:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543308076",
      "id" : 543308076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzMwODA3Ng==",
      "updated_at" : "2019-10-17T18:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543308076",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not really sure why that happens.\r\n\r\n```\r\ndiff --git a/src/script/sign.cpp b/src/script/sign.cpp\r\nindex 0ed92e8d5b..be24d002ad 100644\r\n--- a/src/script/sign.cpp\r\n+++ b/src/script/sign.cpp\r\n@@ -237,7 +237,11 @@ bool ProduceSignature(const SigningProvider& provider, const BaseSignatureCreato\r\n     if (P2SH) {\r\n         result.push_back(std::vector<unsigned char>(subscript.begin(), subscript.end()));\r\n     }\r\n-    sigdata.scriptSig = PushAll(result);\r\n+    if (result.size() == 0) {\r\n+        sigdata.scriptSig.clear();\r\n+    } else {\r\n+        sigdata.scriptSig = PushAll(result);\r\n+    }\r\n \r\n     // Test solution\r\n     sigdata.complete = solved && VerifyScript(sigdata.scriptSig, fromPubKey, &sigdata.scriptWitness, STANDARD_SCRIPT_VERIFY_FLAGS, creator.Checker());\r\n```\r\n\r\nfixes the problem, but it's more signing code than not. ISTM we should see this elsewhere too but it doesn't seem like it.",
      "created_at" : "2019-10-18T00:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-543416770",
      "id" : 543416770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MzQxNjc3MA==",
      "updated_at" : "2019-10-18T00:00:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/543416770",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 \r\n\r\n> ISTM we should see this elsewhere too but it doesn't seem like it.\r\n\r\nIsn't the difference that the *move* assignment operator is used in this case whereas the other non-warning cases you're referring to use the *copy* assignment operator?\r\n\r\nIf I'm correct then these two should trigger the UBSan warning:\r\n\r\n```\r\nsigdata.scriptSig = PushAll(result);\r\n```\r\n\r\n```\r\nCString script_sig = PushAll(result);\r\nsigdata.scriptSig = std::move(script_sig);\r\n```\r\n\r\nWhereas this won't trigger the UBSan warning:\r\n\r\n```\r\nCString script_sig = PushAll(result);\r\nsigdata.scriptSig = script_sig;\r\n```\r\n\r\nCould that be the case?",
      "created_at" : "2019-10-19T15:29:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544160293",
      "id" : 544160293,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE2MDI5Mw==",
      "updated_at" : "2019-10-19T15:29:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544160293",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Isn't the difference that the _move_ assignment operator is used in this case whereas the other non-warning cases you're referring to use the _copy_ assignment operator?\r\n\r\nWhat I meant was that we should see this same error for any fuzzers that hit ProduceSignature. But I think we just don't have any fuzzers that reach ProduceSignature.",
      "created_at" : "2019-10-19T16:31:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544168946",
      "id" : 544168946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE2ODk0Ng==",
      "updated_at" : "2019-10-19T16:31:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544168946",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've added a commit which adds a copy constructor and copy `operator=` to `CScript` which fixes the UBSan warning.",
      "created_at" : "2019-10-19T16:51:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544171404",
      "id" : 544171404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDE3MTQwNA==",
      "updated_at" : "2019-10-19T16:51:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544171404",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 Good! Then we should be able to get rid of this UBSan suppression? :)\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L2",
      "created_at" : "2019-10-20T19:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-544281583",
      "id" : 544281583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDI4MTU4Mw==",
      "updated_at" : "2019-10-20T19:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544281583",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Judging from my testing we can get rid of both these UBSan suppressions as part of this PR:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L1-L2\r\n\r\nGreat!",
      "created_at" : "2019-10-22T15:10:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-545010103",
      "id" : 545010103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTAxMDEwMw==",
      "updated_at" : "2019-10-22T15:10:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545010103",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339335339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339335339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might want to add a comment in the code describing why this explicit copy constructor (which seems to be redundant) was added, otherwise it might be removed again with the next 'clean up warnings' PR.",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-10-27T10:24:41Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339335339",
      "id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzOTMzNTMzOQ==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 5,
      "pull_request_review_id" : 307565031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T20:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339335339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339340644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339340644"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed! That is also why it is important also to remove the UBSan suppressions as part of this PR: to catch non-refactoring nature of such a mistaken \"clean up\" in a future PR  :)\r\n\r\nThese needs to go:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/b8f041af2d2c89afdc14f8c632dfb7fecb535cb5/test/sanitizer_suppressions/ubsan#L1-L2",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-10-27T12:40:32Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r339340644",
      "id" : 339340644,
      "in_reply_to_id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzOTM0MDY0NA==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 5,
      "pull_request_review_id" : 307570445,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T20:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/339340644",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 Can you remove the UBSan suppressions? That will allow Travis to confirm that you've solved the alignment issue. Then this PR should be ready to go AFAICT.\r\n\r\n~~@fanquake Would you mind adding waiting for author-tag? :)~~",
      "created_at" : "2019-11-04T09:20:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549272331",
      "id" : 549272331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTI3MjMzMQ==",
      "updated_at" : "2019-11-04T20:14:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549272331",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r341984253"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341984253"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm afraid this will trigger a sign-compare warning when compiling with Clang due to LHS being `int` and the RHS being `unsigned long` (`size_t`).",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T10:33:46Z",
      "diff_hunk" : "@@ -69,6 +69,9 @@ bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) con\n     PSBTInput input = inputs[input_index];\n     int prevout_index = tx->vin[input_index].prevout.n;\n     if (input.non_witness_utxo) {\n+        if (prevout_index >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r341984253",
      "id" : 341984253,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTk4NDI1Mw==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/psbt.cpp",
      "position" : 7,
      "pull_request_review_id" : 310982956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T20:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341984253",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244304"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a comment and removed the suppressions.",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T20:03:21Z",
      "diff_hunk" : "@@ -411,6 +411,7 @@ class CScript : public CScriptBase\n     CScript(const_iterator pbegin, const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n+    CScript(const CScript& a) : CScript(a.begin(), a.end()) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244304",
      "id" : 342244304,
      "in_reply_to_id" : 339335339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI0NDMwNA==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 5,
      "pull_request_review_id" : 311324695,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T20:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244304",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244341"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T20:03:26Z",
      "diff_hunk" : "@@ -69,6 +69,9 @@ bool PartiallySignedTransaction::GetInputUTXO(CTxOut& utxo, int input_index) con\n     PSBTInput input = inputs[input_index];\n     int prevout_index = tx->vin[input_index].prevout.n;\n     if (input.non_witness_utxo) {\n+        if (prevout_index >= input.non_witness_utxo->vout.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342244341",
      "id" : 342244341,
      "in_reply_to_id" : 341984253,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjI0NDM0MQ==",
      "original_commit_id" : "c8c393b149f975f13e3ac7e4be17196d7c482b69",
      "original_position" : 4,
      "path" : "src/psbt.cpp",
      "position" : 7,
      "pull_request_review_id" : 311324738,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T20:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342244341",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK db30e5bd6fb51913a4ce2177097be3ebcabab146 assuming Travis is happy too -- diff looks correct",
      "created_at" : "2019-11-04T20:19:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549529326",
      "id" : 549529326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTUyOTMyNg==",
      "updated_at" : "2019-11-04T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549529326",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342304795"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342304795"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you sure this is correct? This will reset the intermediate result to -1, and then accumulate all remaining values.",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T22:33:55Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342304795",
      "id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwNDc5NQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 25,
      "pull_request_review_id" : 311403300,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T22:33:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342304795",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342307700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342307700"
         }
      },
      "author_association" : "MEMBER",
      "body" : "-1 will fail MoneyRange so later values that go through this will also always return -1.",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T22:42:29Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342307700",
      "id" : 342307700,
      "in_reply_to_id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwNzcwMA==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 25,
      "pull_request_review_id" : 311407123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T22:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342307700",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342308366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342308366"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Correct. Thx.",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-04T22:44:35Z",
      "diff_hunk" : "@@ -79,9 +84,16 @@ PSBTAnalysis AnalyzePSBT(PartiallySignedTransaction psbtx)\n         // Get the output amount\n         CAmount out_amt = std::accumulate(psbtx.tx->vout.begin(), psbtx.tx->vout.end(), CAmount(0),\n             [](CAmount a, const CTxOut& b) {\n+                if (!MoneyRange(a) || !MoneyRange(b.nValue) || !MoneyRange(a + b.nValue)) {\n+                    return CAmount(-1);\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r342308366",
      "id" : 342308366,
      "in_reply_to_id" : 342304795,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMwODM2Ng==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 25,
      "path" : "src/node/psbt.cpp",
      "position" : 25,
      "pull_request_review_id" : 311407978,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-04T22:44:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342308366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17208](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17208.html) (Make all tests pass UBSan without using any UBSan suppressions by practicalswift)\n* [#10785](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10785.html) (Serialization improvements by sipa)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-11-05T00:16:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#issuecomment-549606221",
      "id" : 549606221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17156",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0OTYwNjIyMQ==",
      "updated_at" : "2019-11-05T00:16:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549606221",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r346997910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346997910"
         }
      },
      "author_association" : "MEMBER",
      "body" : "could explain how this would otherwise be undefined behavior and why this can't be fixed in `prevector.h`?",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-15T20:26:22Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r346997910",
      "id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Njk5NzkxMA==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 317851807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-15T20:26:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346997910",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347011705"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347011705"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure why it would be undefined behavior,  but UBSan was triggering on it. I think prevector already has a copy constructor?",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-15T21:08:19Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347011705",
      "id" : 347011705,
      "in_reply_to_id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzAxMTcwNQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 317870083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-15T21:08:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347011705",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347520135"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347520135"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In that case I'd prefer to leave the third commit for a separate pull request. Changing those parts of the code without understanding why for the sole reason to please a sanitizer seems worrisome ",
      "commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "created_at" : "2019-11-18T17:47:36Z",
      "diff_hunk" : "@@ -412,6 +412,9 @@ class CScript : public CScriptBase\n     CScript(std::vector<unsigned char>::const_iterator pbegin, std::vector<unsigned char>::const_iterator pend) : CScriptBase(pbegin, pend) { }\n     CScript(const unsigned char* pbegin, const unsigned char* pend) : CScriptBase(pbegin, pend) { }\n \n+    // Define a copy constructor so that operator= is a copy instead of a move to avoid undefined behavior",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17156#discussion_r347520135",
      "id" : 347520135,
      "in_reply_to_id" : 346997910,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzUyMDEzNQ==",
      "original_commit_id" : "db30e5bd6fb51913a4ce2177097be3ebcabab146",
      "original_position" : 4,
      "path" : "src/script/script.h",
      "position" : 4,
      "pull_request_review_id" : 318514434,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17156",
      "updated_at" : "2019-11-18T17:47:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347520135",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
