[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@dhruv welcome! Looks like a great first contribution.\r\n\r\nRan tests and everything LGTM, but @jnewbery is probably the guy who you'd want to take a look at this since it was his suggestion.",
      "created_at" : "2020-08-16T00:59:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#issuecomment-674463848",
      "id" : 674463848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19727",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDQ2Mzg0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-16T00:59:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674463848",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Thanks @dhruv . I'll review soon.",
      "created_at" : "2020-08-16T08:28:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#issuecomment-674497791",
      "id" : 674497791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19727",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDQ5Nzc5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-16T08:28:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674497791",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @dhruv welcome! Looks like a great first contribution.\r\n\r\nThank you for the warm welcome and review, @adamjonas. I am excited to be here.\r\n",
      "created_at" : "2020-08-16T16:23:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#issuecomment-674546961",
      "id" : 674546961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19727",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDU0Njk2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-16T16:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674546961",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/856960?v=4",
         "events_url" : "https://api.github.com/users/dhruv/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dhruv/followers",
         "following_url" : "https://api.github.com/users/dhruv/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dhruv/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dhruv",
         "id" : 856960,
         "login" : "dhruv",
         "node_id" : "MDQ6VXNlcjg1Njk2MA==",
         "organizations_url" : "https://api.github.com/users/dhruv/orgs",
         "received_events_url" : "https://api.github.com/users/dhruv/received_events",
         "repos_url" : "https://api.github.com/users/dhruv/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dhruv/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dhruv"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471156749"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471156749"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Unrelated to this PR, but is there a better way to sync here? `wait_until` RPC shows something that would happen after a block announcement?",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T20:47:18Z",
      "diff_hunk" : "@@ -125,7 +120,7 @@ def run_test(self):\n         wait_until(lambda: no_verack_idlenode.version_received, timeout=10, lock=mininode_lock)\n \n         # Mine a block and make sure that it's not sent to the connected nodes\n-        self.nodes[0].generatetoaddress(1, self.nodes[0].get_deterministic_priv_key().address)\n+        self.nodes[0].generate(nblocks=1)\n \n         #Give the node enough time to possibly leak out a message\n         time.sleep(5)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471156749",
      "id" : 471156749,
      "line" : 126,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1Njc0OQ==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 126,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 83,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471156749",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471157548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471157548"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should we wait until all the pings are received by the node?\r\ne.g. through \r\n```py\r\n`getpeerinfo` -> peer['bytesrecv_per_msg'].get('ping', 0)\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T20:55:02Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n-            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n-        no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n+            CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Another peer that never sends a version. Just sits idle and hopes to receive\n+        # any message (it shouldn't!)\n+        no_version_idlenode = self.nodes[0].add_p2p_connection(CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Peer that sends a version but not a verack.\n         no_verack_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVerackIdle(), wait_for_verack=False)\n \n-        # Send enough veracks without a message to reach the peer discouragement\n-        # threshold. This should get us disconnected.\n+        # Send enough ping messages (any non-version message will do) prior to sending\n+        # version to reach the peer discouragement threshold. This should get us disconnected.\n         for _ in range(DISCOURAGEMENT_THRESHOLD):\n-            no_version_disconnect_node.send_message(msg_verack())\n+            no_version_disconnect_node.send_message(msg_ping())\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471157548",
      "id" : 471157548,
      "line" : 113,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1NzU0OA==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 113,
      "original_position" : 69,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 69,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471157548",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158011"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think we should take this opportunity to rename the mininodes to \"peers\" instead of nodes, because they aren't actually bitcoind nodes.\r\n(nit but I'm sure jnewbery would agree)\r\n```suggestion\r\n        no_version_disconnect_peer = self.nodes[0].add_p2p_connection(\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T20:57:48Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158011",
      "id" : 471158011,
      "line" : 99,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1ODAxMQ==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 99,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 50,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158011",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158117"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n        # Wait until we got the verack in response to the version. Though, don't wait for the node to receive the\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T20:58:33Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n-            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n-        no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n+            CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Another peer that never sends a version. Just sits idle and hopes to receive\n+        # any message (it shouldn't!)\n+        no_version_idlenode = self.nodes[0].add_p2p_connection(CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Peer that sends a version but not a verack.\n         no_verack_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVerackIdle(), wait_for_verack=False)\n \n-        # Send enough veracks without a message to reach the peer discouragement\n-        # threshold. This should get us disconnected.\n+        # Send enough ping messages (any non-version message will do) prior to sending\n+        # version to reach the peer discouragement threshold. This should get us disconnected.\n         for _ in range(DISCOURAGEMENT_THRESHOLD):\n-            no_version_disconnect_node.send_message(msg_verack())\n+            no_version_disconnect_node.send_message(msg_ping())\n \n-        # Wait until we got the verack in response to the version. Though, don't wait for the other node to receive the\n+        # Wait until we got the verack in response to the version. Though, don't wait for self.nodes[0] to receive the",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158117",
      "id" : 471158117,
      "line" : 114,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1ODExNw==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 114,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 71,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158117",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158660"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158660"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: same\r\n```suggestion\r\n        no_version_idle_peer = self.nodes[0].add_p2p_connection(CLazyNode(), send_version=False, wait_for_verack=False)\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T21:04:03Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n-            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n-        no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n+            CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Another peer that never sends a version. Just sits idle and hopes to receive\n+        # any message (it shouldn't!)\n+        no_version_idlenode = self.nodes[0].add_p2p_connection(CLazyNode(), send_version=False, wait_for_verack=False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158660",
      "id" : 471158660,
      "line" : 104,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1ODY2MA==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 104,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 57,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158660",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158709"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: same again\r\n```suggestion\r\n        no_verack_idle_peer = self.nodes[0].add_p2p_connection(CNodeNoVerackIdle(), wait_for_verack=False)\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T21:04:42Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n-            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n-        no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n+            CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Another peer that never sends a version. Just sits idle and hopes to receive\n+        # any message (it shouldn't!)\n+        no_version_idlenode = self.nodes[0].add_p2p_connection(CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Peer that sends a version but not a verack.\n         no_verack_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVerackIdle(), wait_for_verack=False)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471158709",
      "id" : 471158709,
      "line" : 107,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1ODcwOQ==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 107,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 60,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471158709",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471159498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471159498"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I like the documentation you've added!\r\nnit: I think \"hopes\" kind of sounds like it's doing something actively\r\n```suggestion\r\n        # Another peer that never sends a version, nor any other messages. It shouldn't receive anything from the node.\r\n```",
      "commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "created_at" : "2020-08-16T21:12:59Z",
      "diff_hunk" : "@@ -106,17 +94,24 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n+        # Peer that never sends a version. We will send a bunch of messages\n+        # from this node anyway and verify eventual disconnection.\n         no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n-            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n-        no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n+            CLazyNode(), send_version=False, wait_for_verack=False)\n+\n+        # Another peer that never sends a version. Just sits idle and hopes to receive",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19727#discussion_r471159498",
      "id" : 471159498,
      "line" : 102,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTE1OTQ5OA==",
      "original_commit_id" : "43986d9a78d799499b51ca6d743c429faea41ad0",
      "original_line" : 102,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/p2p_leak.py",
      "position" : 55,
      "pull_request_review_id" : 468093555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19727",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-16T21:18:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/471159498",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/gzhao408/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gzhao408/followers",
         "following_url" : "https://api.github.com/users/gzhao408/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gzhao408/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gzhao408",
         "id" : 25183001,
         "login" : "gzhao408",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/gzhao408/orgs",
         "received_events_url" : "https://api.github.com/users/gzhao408/received_events",
         "repos_url" : "https://api.github.com/users/gzhao408/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gzhao408/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gzhao408/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gzhao408"
      }
   }
]
