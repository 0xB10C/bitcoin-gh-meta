[
   {
      "author_association" : "MEMBER",
      "body" : "cc @martinus @JeremyRubin ",
      "created_at" : "2020-08-13T14:26:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673511155",
      "id" : 673511155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MzUxMTE1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-13T14:26:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673511155",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmmmm...\r\n\r\nI'd maybe rather just abort the test and return early if only 1 thread gets made because we shouldn't ever be running with the checkqueue on a single core machine...",
      "created_at" : "2020-08-13T15:31:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673547482",
      "id" : 673547482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MzU0NzQ4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-13T15:31:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673547482",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@JeremyRubin \r\n> Hmmmm...\r\n> \r\n> I'd maybe rather just abort the test and return early if only 1 thread gets made because we shouldn't ever be running with the checkqueue on a single core machine...\r\n\r\nWe do not know for sure who many CPU cores/threads users dedicate to Bitcoin Core :)\r\n\r\nWith this PR benchmark results are quite consistent:\r\n```\r\n$ taskset --cpu-list 0-7 src/bench/bench_bitcoin -filter=CCheckQueueSpeedPrevectorJob\r\n|              ns/job |               job/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|              177.62 |        5,629,902.65 |    1.9% |      0.01 | `CCheckQueueSpeedPrevectorJob`\r\n```\r\n```\r\n$ taskset --cpu-list 0-3 src/bench/bench_bitcoin -filter=CCheckQueueSpeedPrevectorJob\r\n|              ns/job |               job/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|              176.05 |        5,680,327.83 |    3.3% |      0.01 | `CCheckQueueSpeedPrevectorJob`\r\n```\r\n```\r\n$ taskset --cpu-list 0-1 src/bench/bench_bitcoin -filter=CCheckQueueSpeedPrevectorJob\r\n|              ns/job |               job/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               55.45 |       18,034,367.56 |    2.6% |      0.00 | `CCheckQueueSpeedPrevectorJob`\r\n```\r\n```\r\n$ taskset --cpu-list 0 src/bench/bench_bitcoin -filter=CCheckQueueSpeedPrevectorJob\r\n|              ns/job |               job/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               54.73 |       18,271,118.07 |    4.0% |      0.00 | `CCheckQueueSpeedPrevectorJob`\r\n```\r\n\r\nAnd early return do not disable the test, right?",
      "created_at" : "2020-08-13T16:43:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673585027",
      "id" : 673585027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MzU4NTAyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-13T16:43:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673585027",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If it's a benchmark that benchmarks thread synchronization/interaction (which is, I think, the only valid reason to run a benchmark multi-threaded) then I agree running it without threads makes little sense.\r\n\r\n(And if so you could even see the \"two threads on a single-core machine\" case as a realistic case, because bitcoind will create threads on such a machine)",
      "created_at" : "2020-08-14T10:50:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-674016320",
      "id" : 674016320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDAxNjMyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-14T10:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674016320",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated d786765721e02e7d2c888c8276c02064e5056593 -> a65c1adc7638c2b6f2038cbe11a637b285dd8dd2 ([pr19710.01](https://github.com/hebasto/bitcoin/commits/pr19710.01) -> [pr19710.02](https://github.com/hebasto/bitcoin/commits/pr19710.02), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.01..pr19710.02)).\r\n\r\nAddressed:\r\n- @JeremyRubin's [comment](https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673547482):\r\n> Hmmmm...\r\n> \r\n> I'd maybe rather just abort the test and return early if only 1 thread gets made because we shouldn't ever be running with the checkqueue on a single core machine...\r\n\r\n- @laanwj's [comment](https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-674016320)\r\n\r\n> If it's a benchmark that benchmarks thread synchronization/interaction (which is, I think, the only valid reason to run a benchmark multi-threaded) then I agree running it without threads makes little sense.",
      "created_at" : "2020-08-14T12:17:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-674046344",
      "id" : 674046344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDA0NjM0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-14T12:24:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674046344",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-08-20T20:36:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-677890523",
      "id" : 677890523,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3Nzg5MDUyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-21T16:52:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677890523",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cr ACK a65c1adc7638c2b6f2038cbe11a637b285dd8dd2",
      "created_at" : "2020-08-21T06:56:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-678077933",
      "id" : 678077933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODA3NzkzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-21T06:56:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678077933",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated a65c1adc7638c2b6f2038cbe11a637b285dd8dd2 -> 4f9164389a078f64258f3d7f2ecda5ab68968e8c ([pr19710.02](https://github.com/hebasto/bitcoin/commits/pr19710.02) -> [pr19710.03](https://github.com/hebasto/bitcoin/commits/pr19710.03), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.02..pr19710.03)).\r\n\r\nAddressed @vasild's comments:\r\n- https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476578354:\r\n> Also, maybe don't drop the MIN_CORES constant and use it here instead of the magic number \"2\"?\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476579234\r\n> Maybe also comment here \"why we do - 1\".",
      "created_at" : "2020-08-25T19:45:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680233439",
      "id" : 680233439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19710",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDIzMzQzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T19:45:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680233439",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
