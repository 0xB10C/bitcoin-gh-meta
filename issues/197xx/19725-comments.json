[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944290"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944290"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: instead of adding extended documentation to the release notes, the documentation can be added to the rpc itself. Affected/interested users can call `help rpc_method` or `--help` if needed.",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T06:18:31Z",
      "diff_hunk" : "@@ -102,6 +102,22 @@ will trigger BIP 125 (replace-by-fee) opt-in. (#11413)\n   option `-deprecatedrpc=banscore` is used. The `banscore` field will be fully\n   removed in the next major release. (#19469)\n \n+- The `getpeerinfo` RPC no longer returns the `inbound` or `addnode` fields by\n+  default. These two fields will be fully removed in the next major release.\n+  They can be accessed with the configuration options\n+  `-deprecatedrpc=getpeerinfo_inbound` and `-deprecatedrpc=getpeerinfo_addnode`\n+  respectively. However, it is recommended to instead use the `connection_type`\n+  field, which will indicate whether the peer is inbound, addnode(manual), or\n+  another type of connection.\n+\n+- The `getpeerinfo` RPC now returns a `connection_type` field. This indicates\n+  the type of connection established with the peer. It will return one of six\n+  options: 1. outbound full relay (default automatic connections) 2. block\n+  relay only (connections that only relay blocks, not transactions or\n+  addresses) 3. inbound (connection initiated by the peer) 4. manual (peers\n+  added via addnode or -connect configuration param) 5. feeler / 6. addrfetch\n+  (both short lived automatic connections used for robustness).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944290",
      "id" : 470944290,
      "line" : 119,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0NDI5MA==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 119,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 18,
      "pull_request_review_id" : 467951589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T06:31:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944290",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944452"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944452"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For new code it would make sense to properly clang-format it. See e.g. https://github.com/bitcoin/bitcoin/tree/master/contrib/devtools#clang-format-diffpy ",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T06:20:49Z",
      "diff_hunk" : "@@ -874,6 +875,25 @@ class CNode\n         assert(false);\n     }\n \n+    std::string ConnectionTypeToString() const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944452",
      "id" : 470944452,
      "line" : 878,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0NDQ1Mg==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 878,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 12,
      "pull_request_review_id" : 467951589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T06:31:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944452",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This seems strangely implementation-specific to me. I think we should at least keep a simple connection direction somewhere?",
      "created_at" : "2020-08-15T06:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#issuecomment-674356692",
      "id" : 674356692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19725",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDM1NjY5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-15T06:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674356692",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944663"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944663"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Would it make sense to replace the spaces with `-` to preserve the previous format of the log message? Also, if this was used in an arbitrary sentence, it might not be clear that this is a single word/\"operator\"",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T06:24:07Z",
      "diff_hunk" : "@@ -874,6 +875,25 @@ class CNode\n         assert(false);\n     }\n \n+    std::string ConnectionTypeToString() const {\n+        switch (m_conn_type) {\n+            case ConnectionType::INBOUND:\n+                return \"inbound\";\n+            case ConnectionType::MANUAL:\n+                return \"manual\";\n+            case ConnectionType::FEELER:\n+                return \"feeler\";\n+            case ConnectionType::OUTBOUND:\n+                return \"outbound full relay\";\n+            case ConnectionType::BLOCK_RELAY:\n+                return \"block relay only\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944663",
      "id" : 470944663,
      "line" : 889,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0NDY2Mw==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 889,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 23,
      "pull_request_review_id" : 467951589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T06:31:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944663",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944955"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944955"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                            {RPCResult::Type::STR, \"connection_type\", \"Type of connection:\\n \" + Join(foobar, \",\\n\") + \".\"},\r\n```\r\n\r\nWhat about moving the connection type documentation into a global like `NET_PERMISSIONS_DOC`?",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T06:27:41Z",
      "diff_hunk" : "@@ -133,6 +134,10 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n                                                               \"When a message type is not listed in this json object, the bytes received are 0.\\n\"\n                                                               \"Only known message types can appear as keys in the object and all bytes received of unknown message types are listed under '\"+NET_MESSAGE_COMMAND_OTHER+\"'.\"}\n                             }},\n+                            {RPCResult::Type::STR, \"connection_type\", \"Type of connection: outbound full relay (default automatic connections),\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470944955",
      "id" : 470944955,
      "line" : 137,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0NDk1NQ==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 137,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 467951589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T06:31:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470944955",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470945177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470945177"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n  field.\r\n```\r\n\r\nProbably can remove the extended documentation",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T06:30:38Z",
      "diff_hunk" : "@@ -102,6 +102,22 @@ will trigger BIP 125 (replace-by-fee) opt-in. (#11413)\n   option `-deprecatedrpc=banscore` is used. The `banscore` field will be fully\n   removed in the next major release. (#19469)\n \n+- The `getpeerinfo` RPC no longer returns the `inbound` or `addnode` fields by\n+  default. These two fields will be fully removed in the next major release.\n+  They can be accessed with the configuration options\n+  `-deprecatedrpc=getpeerinfo_inbound` and `-deprecatedrpc=getpeerinfo_addnode`\n+  respectively. However, it is recommended to instead use the `connection_type`\n+  field, which will indicate whether the peer is inbound, addnode(manual), or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470945177",
      "id" : 470945177,
      "line" : 110,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0NTE3Nw==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 110,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 9,
      "pull_request_review_id" : 467951589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T06:31:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470945177",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470949512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470949512"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it's premature to be deprecating these fields. It would be preferable to let the new code mature for a release or so and to implement how it might be presented in the GUI, before considering removing access to these via the RPC.",
      "commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "created_at" : "2020-08-15T07:28:55Z",
      "diff_hunk" : "@@ -102,6 +102,22 @@ will trigger BIP 125 (replace-by-fee) opt-in. (#11413)\n   option `-deprecatedrpc=banscore` is used. The `banscore` field will be fully\n   removed in the next major release. (#19469)\n \n+- The `getpeerinfo` RPC no longer returns the `inbound` or `addnode` fields by",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19725#discussion_r470949512",
      "id" : 470949512,
      "line" : 105,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDk0OTUxMg==",
      "original_commit_id" : "26baed40876577ef6bc07cc4a301197951a95fe3",
      "original_line" : 105,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : 4,
      "pull_request_review_id" : 467954657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19725",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-15T07:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/470949512",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
