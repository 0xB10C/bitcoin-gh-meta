[
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ While you're at it touching `crypto_chacha20_poly1305_aead.cpp`, would you mind fixing this one too? :)\r\n\r\n```\r\ntest/fuzz/crypto_chacha20_poly1305_aead.cpp:50:27: runtime error: unsigned integer overflow: 18446744073709551615 + 1 cannot be represented in type 'unsigned long'\r\n```\r\n\r\n(Line 50 is after applying this patch.)\r\n\r\nBase64 encoded test case:\r\n\r\n```\r\nAOcDAAAKI0q6uhoA/wAKf////xUVFf//AAAAAABKFRUVFRUVFQoVFRUVFRUVFRUVFRUbBhUVFQAVFUkAAAAOABoA/wAKf/////8B///////////////////k/////////0AbBg==\r\n```",
      "created_at" : "2020-08-14T15:43:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19713#issuecomment-674136519",
      "id" : 674136519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19713",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDEzNjUxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-14T15:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674136519",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is one other complaint in the fuzz directory:\r\nhttps://github.com/bitcoin/bitcoin/blob/3ab2582c7fe76d2839ab493512758d5601903c86/src/test/fuzz/pow.cpp#L45-L47\r\n```\r\ntest/fuzz/pow.cpp:46:39: runtime error: implicit conversion from type 'long' of value 4294967712 (64-bit, signed) to type 'uint32_t' (aka 'unsigned int')      changed the value to 416 (32-bit, unsigned)\r\n```\r\nNot entirely sure what value to set `current_block.nTime` to in that scenario. Also it can overflow via multiplication *or* addition.",
      "created_at" : "2020-08-15T22:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19713#issuecomment-674452610",
      "id" : 674452610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19713",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDQ1MjYxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-15T22:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674452610",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Not entirely sure what value to set `current_block.nTime` to in that scenario. Also it can overflow via multiplication _or_ addition.\r\n\r\nPerhaps you can use `MultiplicationOverflow` and `AdditionOverflow` (both in `test/fuzz/util.h`) to guard against the overflows? :)\r\n",
      "created_at" : "2020-08-17T07:48:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19713#issuecomment-674721010",
      "id" : 674721010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19713",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NDcyMTAxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-17T07:48:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/674721010",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Get this complaint on macOS Catalina v10.15.4 with `clang version 10.0.1` (installed via `brew install llvm`):\r\n```\r\n/usr/local/Cellar/llvm/10.0.1/bin/../include/c++/v1/memory:1876:35: runtime error: implicit conversion from type 'char' of value -41 (8-bit, signed) to type 'unsigned char' changed the value to 215 (8-bit, unsigned)\r\n    #0 0x1075d43ff in std::__1::vector<unsigned char, std::__1::allocator<unsigned char> >::vector<std::__1::__wrap_iter<char const*> >(std::__1::__wrap_iter<char const*>, std::__1::enable_if<(__is_cpp17_forward_iterator<std::__1::__wrap_iter<char const*> >::value) && (is_constructible<unsigned char, std::__1::iterator_traits<std::__1::__wrap_iter<char const*> >::reference>::value), std::__1::__wrap_iter<char const*> >::type) vector:1223\r\n    #1 0x1075d3656 in std::__1::optional<CBlockHeader> ConsumeDeserializable<CBlockHeader>(FuzzedDataProvider&, unsigned long) util.h:70\r\n    #2 0x1075d1867 in test_one_input(std::__1::vector<unsigned char, std::__1::allocator<unsigned char> > const&) pow.cpp:31\r\n    #3 0x107b13429 in LLVMFuzzerTestOneInput fuzz.cpp:45\r\n    #4 0x107be4d00 in fuzzer::Fuzzer::ExecuteCallback(unsigned char const*, unsigned long) FuzzerLoop.cpp:556\r\n    #5 0x107be4445 in fuzzer::Fuzzer::RunOne(unsigned char const*, unsigned long, bool, fuzzer::InputInfo*, bool*) FuzzerLoop.cpp:470\r\n    #6 0x107be6ae7 in fuzzer::Fuzzer::ReadAndExecuteSeedCorpora(std::__1::vector<fuzzer::SizedFile, fuzzer::fuzzer_allocator<fuzzer::SizedFile> >&) FuzzerLoop.cpp:765\r\n    #7 0x107be6e49 in fuzzer::Fuzzer::Loop(std::__1::vector<fuzzer::SizedFile, fuzzer::fuzzer_allocator<fuzzer::SizedFile> >&) FuzzerLoop.cpp:792\r\n    #8 0x107bd413d in fuzzer::FuzzerDriver(int*, char***, int (*)(unsigned char const*, unsigned long)) FuzzerDriver.cpp:829\r\n    #9 0x107c00572 in main FuzzerMain.cpp:19\r\n    #10 0x7fff7114bcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)\r\n```\r\nCan't reproduce on my ubuntu digitalocean box with `clang-10` and am wondering if anybody else with a Mac can reproduce.",
      "created_at" : "2020-08-18T11:46:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19713#issuecomment-675430197",
      "id" : 675430197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19713",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTQzMDE5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T11:47:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675430197",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I can reproduce this on macOS 10.15.5 with clang installed from `brew install llvm`.",
      "created_at" : "2020-08-19T17:25:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19713#issuecomment-676558801",
      "id" : 676558801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19713",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NjU1ODgwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T17:25:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/676558801",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/29065991?v=4",
         "events_url" : "https://api.github.com/users/adaminsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adaminsky/followers",
         "following_url" : "https://api.github.com/users/adaminsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adaminsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adaminsky",
         "id" : 29065991,
         "login" : "adaminsky",
         "node_id" : "MDQ6VXNlcjI5MDY1OTkx",
         "organizations_url" : "https://api.github.com/users/adaminsky/orgs",
         "received_events_url" : "https://api.github.com/users/adaminsky/received_events",
         "repos_url" : "https://api.github.com/users/adaminsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adaminsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adaminsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adaminsky"
      }
   }
]
