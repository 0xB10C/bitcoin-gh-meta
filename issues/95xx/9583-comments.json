[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96897409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96897409"
         }
      },
      "body" : "This comments seems outdated now.",
      "commit_id" : "989989354b68d3954fe2742b96c53eeb2e8a7670",
      "created_at" : "2017-01-19T16:24:07Z",
      "diff_hunk" : "@@ -2473,20 +2473,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             pindexNewTip = chainActive.Tip();\n             pindexFork = chainActive.FindFork(pindexOldTip);\n             fInitialDownload = IsInitialBlockDownload();\n+\n+            // throw all transactions though the signal-interface\n+            // while _not_ holding the cs_main lock",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96897409",
      "id" : 96897409,
      "original_commit_id" : "f73bd2c3707d874397b8df461e3d783e410d6805",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 17494952,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583",
      "updated_at" : "2017-01-19T16:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96897409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96898047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96898047"
         }
      },
      "body" : "I think you need to clear connectTrace.blocksConnected here.",
      "commit_id" : "989989354b68d3954fe2742b96c53eeb2e8a7670",
      "created_at" : "2017-01-19T16:26:47Z",
      "diff_hunk" : "@@ -2473,20 +2473,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             pindexNewTip = chainActive.Tip();\n             pindexFork = chainActive.FindFork(pindexOldTip);\n             fInitialDownload = IsInitialBlockDownload();\n+\n+            // throw all transactions though the signal-interface\n+            // while _not_ holding the cs_main lock\n+            for (const auto& pair : connectTrace.blocksConnected) {\n+                assert(pair.second);\n+                const CBlock& block = *(pair.second);\n+                for (unsigned int i = 0; i < block.vtx.size(); i++)\n+                    GetMainSignals().SyncTransaction(*block.vtx[i], pair.first, i);\n+            }\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96898047",
      "id" : 96898047,
      "original_commit_id" : "f73bd2c3707d874397b8df461e3d783e410d6805",
      "original_position" : 13,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 17495645,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583",
      "updated_at" : "2017-01-19T16:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96898047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96899005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96899005"
         }
      },
      "body" : "It will be automatically when it continues the loop.",
      "commit_id" : "989989354b68d3954fe2742b96c53eeb2e8a7670",
      "created_at" : "2017-01-19T16:30:31Z",
      "diff_hunk" : "@@ -2473,20 +2473,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             pindexNewTip = chainActive.Tip();\n             pindexFork = chainActive.FindFork(pindexOldTip);\n             fInitialDownload = IsInitialBlockDownload();\n+\n+            // throw all transactions though the signal-interface\n+            // while _not_ holding the cs_main lock\n+            for (const auto& pair : connectTrace.blocksConnected) {\n+                assert(pair.second);\n+                const CBlock& block = *(pair.second);\n+                for (unsigned int i = 0; i < block.vtx.size(); i++)\n+                    GetMainSignals().SyncTransaction(*block.vtx[i], pair.first, i);\n+            }\n         }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96899005",
      "id" : 96899005,
      "original_commit_id" : "f73bd2c3707d874397b8df461e3d783e410d6805",
      "original_position" : 13,
      "path" : "src/validation.cpp",
      "position" : 12,
      "pull_request_review_id" : 17496654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583",
      "updated_at" : "2017-01-19T16:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96899005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96899200"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96899200"
         }
      },
      "body" : "Fixed",
      "commit_id" : "989989354b68d3954fe2742b96c53eeb2e8a7670",
      "created_at" : "2017-01-19T16:31:10Z",
      "diff_hunk" : "@@ -2473,20 +2473,20 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             pindexNewTip = chainActive.Tip();\n             pindexFork = chainActive.FindFork(pindexOldTip);\n             fInitialDownload = IsInitialBlockDownload();\n+\n+            // throw all transactions though the signal-interface\n+            // while _not_ holding the cs_main lock",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9583#discussion_r96899200",
      "id" : 96899200,
      "original_commit_id" : "f73bd2c3707d874397b8df461e3d783e410d6805",
      "original_position" : 6,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 17496844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9583",
      "updated_at" : "2017-01-19T16:31:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96899200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
