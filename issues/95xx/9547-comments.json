[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96081958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96081958"
         }
      },
      "body" : "because of the ++count above I don't believe this can be 1 here.",
      "commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "created_at" : "2017-01-13T21:56:15Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ bool benchmark::State::KeepRunning()\n     lastCycles = nowCycles;\n     ++count;\n \n-    if (now - beginTime < maxElapsed) return true; // Keep going\n+    if (now - beginTime < maxElapsed || count == 1) return true; // Keep going",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96081958",
      "id" : 96081958,
      "original_commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "original_position" : 5,
      "path" : "src/bench/bench.cpp",
      "position" : 5,
      "pull_request_review_id" : 16660499,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547",
      "updated_at" : "2017-01-13T21:56:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96081958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96082456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96082456"
         }
      },
      "body" : "@gmaxwell But there is a `--count` on the line below :-)",
      "commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "created_at" : "2017-01-13T21:59:35Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ bool benchmark::State::KeepRunning()\n     lastCycles = nowCycles;\n     ++count;\n \n-    if (now - beginTime < maxElapsed) return true; // Keep going\n+    if (now - beginTime < maxElapsed || count == 1) return true; // Keep going",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96082456",
      "id" : 96082456,
      "original_commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "original_position" : 5,
      "path" : "src/bench/bench.cpp",
      "position" : 5,
      "pull_request_review_id" : 16661012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547",
      "updated_at" : "2017-01-13T21:59:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96082456",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96082659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96082659"
         }
      },
      "body" : "yes, my read it can't be 1 or 0, it must be >1 and then the decrements reduces it to 1.  If it is possible to be 0 at the division then I believe there is a bug elsewhere (in addition).",
      "commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "created_at" : "2017-01-13T22:00:59Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ bool benchmark::State::KeepRunning()\n     lastCycles = nowCycles;\n     ++count;\n \n-    if (now - beginTime < maxElapsed) return true; // Keep going\n+    if (now - beginTime < maxElapsed || count == 1) return true; // Keep going",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96082659",
      "id" : 96082659,
      "original_commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "original_position" : 5,
      "path" : "src/bench/bench.cpp",
      "position" : 5,
      "pull_request_review_id" : 16661234,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547",
      "updated_at" : "2017-01-13T22:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96082659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96084910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96084910"
         }
      },
      "body" : "If `count` would be guaranteed to be different from zero, then the check on line 50 (`if (count == 0) {`) wouldn't be needed, right? :-)\r\n\r\nIf the branch `if (count == 0) {` is taken then the relevant parts of the remaining code can be reduced to something like:\r\n\r\n```\r\ncount = 0; // implicit\r\n++count;\r\n--count;\r\ndouble average = (now-beginTime)/count;\r\n```\r\n\r\nAssuming I'm reading it correctly :-)\r\n\r\nLet me know if I'm missing something obvious Ã¢ÂÂ this is one of my first contributions so please bear with me :-)",
      "commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "created_at" : "2017-01-13T22:16:11Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ bool benchmark::State::KeepRunning()\n     lastCycles = nowCycles;\n     ++count;\n \n-    if (now - beginTime < maxElapsed) return true; // Keep going\n+    if (now - beginTime < maxElapsed || count == 1) return true; // Keep going",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96084910",
      "id" : 96084910,
      "original_commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "original_position" : 5,
      "path" : "src/bench/bench.cpp",
      "position" : 5,
      "pull_request_review_id" : 16663658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547",
      "updated_at" : "2017-01-13T22:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96084910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "If we're guaranteed that `count` cannot be `0` in this context, should I remove the then redundant [`if (count == 0) {`-check on line 50](https://github.com/practicalswift/bitcoin/blob/6f96b2e518770dae28c07d65fb326c7eb95f50bb/src/bench/bench.cpp#L50) instead?\r\n\r\nAs said, please let me know if I'm missing something obvious here and I'll close the PR :-)",
      "created_at" : "2017-01-18T16:35:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#issuecomment-273526989",
      "id" : 273526989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9547",
      "updated_at" : "2017-01-18T16:36:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273526989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=3",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96919893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96919893"
         }
      },
      "body" : "Looks like if `maxElapsed` is > 0 then the logic here is redundant for that code path. `count=0` means `now` and `beginTime` are both 0.",
      "commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "created_at" : "2017-01-19T18:05:30Z",
      "diff_hunk" : "@@ -88,7 +88,7 @@ bool benchmark::State::KeepRunning()\n     lastCycles = nowCycles;\n     ++count;\n \n-    if (now - beginTime < maxElapsed) return true; // Keep going\n+    if (now - beginTime < maxElapsed || count == 1) return true; // Keep going",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9547#discussion_r96919893",
      "id" : 96919893,
      "original_commit_id" : "6f96b2e518770dae28c07d65fb326c7eb95f50bb",
      "original_position" : 5,
      "path" : "src/bench/bench.cpp",
      "position" : 5,
      "pull_request_review_id" : 17518489,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9547",
      "updated_at" : "2017-01-19T18:05:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/96919893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
