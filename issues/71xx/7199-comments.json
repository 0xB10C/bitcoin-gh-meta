[
   {
      "body" : "I guess it would be very tricky to track a log entry back to a RPC call because of the current thread/process model. But I agree, it would be useful.",
      "created_at" : "2015-12-12T12:55:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7199#issuecomment-164147623",
      "id" : 164147623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7199",
      "updated_at" : "2015-12-12T12:55:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164147623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I don't think it'd be very difficult.\r\n\r\nJust make the log messages in rpc*.cpp go to a different log. We already have a 'rpc' debug category.\r\n\r\nNote that substantial effort is underway to reduce log noise, e.g. #7075 #6519 so this may not turn out to be needed. In general, the debug.log is supposed to only log (by default) problems that are either caused by local use or critical local or network-wide issues.\r\n",
      "created_at" : "2015-12-14T11:10:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7199#issuecomment-164411254",
      "id" : 164411254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7199",
      "updated_at" : "2015-12-14T11:10:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164411254",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Right. Most commands would work without problems. But everything that dispatch a signal/thread, or lets say, works \"async\", would lead to follow up log entries in the \"traditional log\". Lets say you call `generate`. I guess the follow up wallet log log entries are difficult to relate to the \"generate\" command. But maybe that is the only point where async dispatching is involved.",
      "created_at" : "2015-12-14T11:23:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7199#issuecomment-164413854",
      "id" : 164413854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7199",
      "updated_at" : "2015-12-14T11:23:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164413854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Oh yes I completely agree that in general 'total attribution' of log messages is a hard problem, this would either require passing down a token down the call chain, a thread-local context, or something ugly like that. Or saner/long term, removing all logging in lower-level code and pass up and log problems upstream (like in #6519).\r\n\r\nBut I think what most people mean that request RPC logging is more like an 'audit log', that logs RPC interaction and usage, wallet changes, etc for debugging applications not bitcoin core itself, so if it lacks bitcoin-internal-detail stuff that's not a problem.\r\n",
      "created_at" : "2015-12-14T11:37:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7199#issuecomment-164416095",
      "id" : 164416095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7199",
      "updated_at" : "2015-12-14T11:37:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164416095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj I have some code for rpc audit logging using the passing-down-token method as a follow-up for #7044 .  \r\n\r\nI created an CRPCArguments class and am passing things like username, the \"params\" argument, and thinking of wrapping the fHelp boolean in it as well.  \r\n\r\nThere's unfortunately a lot of wiggle room on what exactly should be logged(which calls, and what info per call), which will probably make this hard to upstream. ",
      "created_at" : "2015-12-14T13:28:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7199#issuecomment-164436264",
      "id" : 164436264,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7199",
      "updated_at" : "2015-12-14T13:28:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/164436264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
