[
   {
      "body" : "@jtimon as this is literally only used CreateNewBlock can you also add a parameter to override per getblocktemplate call ?",
      "created_at" : "2015-11-30T04:21:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-160512755",
      "id" : 160512755,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-11-30T04:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160512755",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46107992"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46107992"
         }
      },
      "body" : "nit: why the extra parens?",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-11-30T04:25:50Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)\n+        size = (params[0].get_int64());        // rejects 0.0 amounts",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46107992",
      "id" : 46107992,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 23,
      "path" : "src/rpcmining.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-11-30T04:25:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46107992",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46108480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46108480"
         }
      },
      "body" : "No good reason. Will fix.\r\n\r\nOh, and another thing right next to it: Bitcoin Core uses unsigned ints for nBlockMaxSize, not uint64_t. This shouldn't cause any functional problems as written right now, but it's still probably worth fixing.",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-11-30T04:43:38Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)\n+        size = (params[0].get_int64());        // rejects 0.0 amounts",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46108480",
      "id" : 46108480,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 23,
      "path" : "src/rpcmining.cpp",
      "position" : 23,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-11-30T04:59:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46108480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11898859?v=3",
         "events_url" : "https://api.github.com/users/jtoomim/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtoomim/followers",
         "following_url" : "https://api.github.com/users/jtoomim/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtoomim/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtoomim",
         "id" : 11898859,
         "login" : "jtoomim",
         "organizations_url" : "https://api.github.com/users/jtoomim/orgs",
         "received_events_url" : "https://api.github.com/users/jtoomim/received_events",
         "repos_url" : "https://api.github.com/users/jtoomim/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtoomim/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtoomim/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtoomim"
      }
   },
   {
      "body" : "@pstratem RE: per GBT call parameter: Possible, but I don't see the use-case for that being compelling enough to overcome my laziness. I think that runtime blockmaxsize adjustment will usually be done by a human pool operator in order to tweak and optimize block propagation times. This would be easiest to perform as a fire-once-and-forget kind of tweak. The option you're suggesting would be useful for pools that want to generate e.g. empty blocks immediately after receiving a block from a peer. That would be useful, but not quite useful enough for me to want to implement it myself.",
      "created_at" : "2015-11-30T04:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-160516124",
      "id" : 160516124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-11-30T04:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160516124",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11898859?v=3",
         "events_url" : "https://api.github.com/users/jtoomim/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtoomim/followers",
         "following_url" : "https://api.github.com/users/jtoomim/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtoomim/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtoomim",
         "id" : 11898859,
         "login" : "jtoomim",
         "organizations_url" : "https://api.github.com/users/jtoomim/orgs",
         "received_events_url" : "https://api.github.com/users/jtoomim/received_events",
         "repos_url" : "https://api.github.com/users/jtoomim/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtoomim/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtoomim/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtoomim"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46316854"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46316854"
         }
      },
      "body" : "This accepts unbounded size? What happens when it's above 1MB?",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T18:25:08Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46316854",
      "id" : 46316854,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 22,
      "path" : "src/rpcmining.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T18:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46316854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46317186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46317186"
         }
      },
      "body" : "I expect it will make CreateNewBlock fail its own sanity check.",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T18:27:36Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46317186",
      "id" : 46317186,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 22,
      "path" : "src/rpcmining.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T18:27:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46317186",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46317935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46317935"
         }
      },
      "body" : "miner.cpp:131:         nBlockMaxSize = std::max((unsigned int)1000, std::min((unsigned int)(MAX_BLOCK_SIZE-1000), nBlockMaxSize));\r\n\r\nIf you pass a value larger than 1000000 to setblockmaxsize, then the variable will be set to that large value. However, when it's used, it's clamped to MAX_BLOCK_SIZE-1000, so block creation continues unimpeded with valid values.\r\n\r\nThe check against an excessively low block size (< 1000 bytes) wasn't necessary either. I mostly put it in because I didn't want to think about what might go wrong with negative values.",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T18:33:12Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46317935",
      "id" : 46317935,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 22,
      "path" : "src/rpcmining.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T18:35:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46317935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11898859?v=3",
         "events_url" : "https://api.github.com/users/jtoomim/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtoomim/followers",
         "following_url" : "https://api.github.com/users/jtoomim/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtoomim/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtoomim",
         "id" : 11898859,
         "login" : "jtoomim",
         "organizations_url" : "https://api.github.com/users/jtoomim/orgs",
         "received_events_url" : "https://api.github.com/users/jtoomim/received_events",
         "repos_url" : "https://api.github.com/users/jtoomim/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtoomim/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtoomim/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtoomim"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46318207"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46318207"
         }
      },
      "body" : "Agree, not really an issue (though the RPC could fail to warn the user that it's not going to do what he requests).",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T18:35:09Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46318207",
      "id" : 46318207,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 22,
      "path" : "src/rpcmining.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T18:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46318207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Can you rename to `setmaxblocksize`?",
      "created_at" : "2015-12-01T18:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-161057233",
      "id" : 161057233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-12-01T18:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161057233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46318573"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46318573"
         }
      },
      "body" : "I guess a warning would be useful for clarity about its purpose at least in the help doc.",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T18:37:49Z",
      "diff_hunk" : "@@ -590,6 +590,31 @@ UniValue getblocktemplate(const UniValue& params, bool fHelp)\n     return result;\n }\n \n+UniValue setblockmaxsize(const UniValue& params, bool fHelp)\n+{\n+    if (fHelp || params.size() < 1 || params.size() > 1)\n+        throw runtime_error(\n+            \"setblockmaxsize size\\n\"\n+            \"\\nSet the maximum block size in bytes for getblocktemplate.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. size           (numeric, required) The maximum size (in bytes) of blocks to create when mining. Minimum value: 1000.\\n\"\n+            \"\\nResult\\n\"\n+            \"true|false        (boolean) Returns true if successful\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"setblockmaxsize\", \"1000000\")\n+            + HelpExampleRpc(\"setblockmaxsize\", \"1000000\")\n+        );\n+\n+    LOCK(cs_main); // need to block against getblocktemplate\n+\n+    uint64_t size = nBlockMaxSize;\n+    if (params[0].get_real() >= 1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46318573",
      "id" : 46318573,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 22,
      "path" : "src/rpcmining.cpp",
      "position" : 22,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T18:37:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46318573",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=3",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "body" : "> Can you rename to setmaxblocksize?\r\n\r\nOnly if we want to have a different name for the RPC and for the internal variable and command line switch, or if we want to rename the internal variable and command line switch.",
      "created_at" : "2015-12-01T18:41:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-161058461",
      "id" : 161058461,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-12-01T18:43:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161058461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11898859?v=3",
         "events_url" : "https://api.github.com/users/jtoomim/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtoomim/followers",
         "following_url" : "https://api.github.com/users/jtoomim/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtoomim/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtoomim",
         "id" : 11898859,
         "login" : "jtoomim",
         "organizations_url" : "https://api.github.com/users/jtoomim/orgs",
         "received_events_url" : "https://api.github.com/users/jtoomim/received_events",
         "repos_url" : "https://api.github.com/users/jtoomim/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtoomim/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtoomim/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtoomim"
      }
   },
   {
      "body" : "Hmm forget about renaming. It is messed up in the master already...\r\n",
      "created_at" : "2015-12-01T18:44:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-161059143",
      "id" : 161059143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-12-01T18:44:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161059143",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46331948"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46331948"
         }
      },
      "body" : "This line now mutates a global variable. I think you should make a copy first.",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-01T20:11:48Z",
      "diff_hunk" : "@@ -125,8 +126,7 @@ CBlockTemplate* CreateNewBlock(const CChainParams& chainparams, const CScript& s\n     pblocktemplate->vTxFees.push_back(-1); // updated at end\n     pblocktemplate->vTxSigOps.push_back(-1); // updated at end\n \n-    // Largest block you're willing to create:\n-    unsigned int nBlockMaxSize = GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n+    // Largest block you're willing to create\n     // Limit to betweeen 1K and MAX_BLOCK_SIZE-1K for sanity:\n     nBlockMaxSize = std::max((unsigned int)1000, std::min((unsigned int)(MAX_BLOCK_SIZE-1000), nBlockMaxSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46331948",
      "id" : 46331948,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 16,
      "path" : "src/miner.cpp",
      "position" : 16,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-01T20:11:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46331948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46651229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46651229"
         }
      },
      "body" : "Make a copy? :-/\r\n\r\nhttps://software.intel.com/en-us/blogs/2013/01/06/benign-data-races-what-could-possibly-go-wrong?page=1",
      "commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "created_at" : "2015-12-04T05:48:43Z",
      "diff_hunk" : "@@ -125,8 +126,7 @@ CBlockTemplate* CreateNewBlock(const CChainParams& chainparams, const CScript& s\n     pblocktemplate->vTxFees.push_back(-1); // updated at end\n     pblocktemplate->vTxSigOps.push_back(-1); // updated at end\n \n-    // Largest block you're willing to create:\n-    unsigned int nBlockMaxSize = GetArg(\"-blockmaxsize\", DEFAULT_BLOCK_MAX_SIZE);\n+    // Largest block you're willing to create\n     // Limit to betweeen 1K and MAX_BLOCK_SIZE-1K for sanity:\n     nBlockMaxSize = std::max((unsigned int)1000, std::min((unsigned int)(MAX_BLOCK_SIZE-1000), nBlockMaxSize));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#discussion_r46651229",
      "id" : 46651229,
      "original_commit_id" : "2c79653121e5c4699241c690dc14d3e5c25220c6",
      "original_position" : 16,
      "path" : "src/miner.cpp",
      "position" : 16,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7131",
      "updated_at" : "2015-12-04T05:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/46651229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "> @jtimon as this is literally only used CreateNewBlock can you also add a parameter to override per getblocktemplate call ?\r\n\r\nI also like that solution more. Especially as `getblocktemplate` is designed to be extended with extra parameters by taking an object, instead of having to tack on another positional argument.\r\n\r\nChanging global parameters in RPC calls is something I'd like to avoid, especially if they only apply \"hidden parameters\" to other RPC calls instead of change processes going on in the background. Stateful APIs are something commonly regretted, it complicates concurrent usage, for example.\r\n",
      "created_at" : "2015-12-04T08:55:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7131#issuecomment-161911540",
      "id" : 161911540,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7131",
      "updated_at" : "2015-12-04T08:56:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/161911540",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
