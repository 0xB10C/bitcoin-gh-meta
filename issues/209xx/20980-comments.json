[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562380245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562380245"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If you are going to change these, you'll have to fixup the mypy issues (causing the lint job to fail):\r\n```bash\r\ncontrib/devtools/symbol-check.py:198: error: List item 0 has incompatible type \"Optional[str]\"; expected \"Union[bytes, str, _PathLike[Any]]\"\r\ncontrib/devtools/symbol-check.py:219: error: List item 0 has incompatible type \"Optional[str]\"; expected \"Union[bytes, str, _PathLike[Any]]\"\r\nFound 2 errors in 1 file (checked 189 source files)\r\n^---- failure generated from test/lint/lint-python.sh\r\n```\r\n\r\nIt's  unhappy because we've got an `Optional[str]` (from `shutil.which`) being added into the first argument of `subprocess.Popen`.",
      "commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "created_at" : "2021-01-22T04:26:25Z",
      "diff_hunk" : "@@ -8,15 +8,16 @@\n Otherwise the exit status will be 1 and it will log which executables failed which checks.\n Needs `objdump` (for PE) and `otool` (for MACHO).\n '''\n+import shutil\n import subprocess\n import sys\n import os\n from typing import List, Optional\n \n import pixie\n \n-OBJDUMP_CMD = os.getenv('OBJDUMP', '/usr/bin/objdump')\n-OTOOL_CMD = os.getenv('OTOOL', '/usr/bin/otool')\n+OBJDUMP_CMD = os.getenv('OBJDUMP', shutil.which('objdump'))\n+OTOOL_CMD = os.getenv('OTOOL', shutil.which('otool'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562380245",
      "id" : 562380245,
      "line" : 20,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjM4MDI0NQ==",
      "original_commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "original_line" : 20,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "contrib/devtools/security-check.py",
      "position" : 15,
      "pull_request_review_id" : 573942986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-22T04:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562380245",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562381009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562381009"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The Linux security checks don't need either `objdump`, or `otool` (we are using [pixie](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/pixie.py)), so why set them here? Same for macOS not needing `objdump` and PE not needing `otool`.",
      "commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "created_at" : "2021-01-22T04:28:52Z",
      "diff_hunk" : "@@ -362,14 +362,14 @@ clean-local: clean-docs\n \n test-security-check:\n if TARGET_DARWIN\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_MACHO\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-symbol-check.py TestSymbolChecks.test_MACHO\n+\t$(AM_V_at) OBJDUMP=$(OBJDUMP) OTOOL=$(OTOOL) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_MACHO\n+\t$(AM_V_at) OTOOL=$(OTOOL) $(PYTHON) $(top_srcdir)/contrib/devtools/test-symbol-check.py TestSymbolChecks.test_MACHO\n endif\n if TARGET_WINDOWS\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_PE\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-symbol-check.py TestSymbolChecks.test_PE\n+\t$(AM_V_at) OBJDUMP=$(OBJDUMP) OTOOL=$(OTOOL) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_PE\n+\t$(AM_V_at) OBJDUMP=$(OBJDUMP) $(PYTHON) $(top_srcdir)/contrib/devtools/test-symbol-check.py TestSymbolChecks.test_PE\n endif\n if TARGET_LINUX\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_ELF\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/test-symbol-check.py TestSymbolChecks.test_ELF\n+\t$(AM_V_at) OBJDUMP=$(OBJDUMP) OTOOL=$(OTOOL) $(PYTHON) $(top_srcdir)/contrib/devtools/test-security-check.py TestSecurityChecks.test_ELF",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562381009",
      "id" : 562381009,
      "line" : 373,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjM4MTAwOQ==",
      "original_commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "original_line" : 373,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "Makefile.am",
      "position" : 18,
      "pull_request_review_id" : 573942986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-22T04:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562381009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562383236"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562383236"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: could drop `ELF` from here and below. As the security (and symbol) checks are across all platforms.",
      "commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "created_at" : "2021-01-22T04:37:37Z",
      "diff_hunk" : "@@ -208,6 +208,8 @@ mkdir -p \"$DISTSRC\"\n     # Build Bitcoin Core\n     make --jobs=\"$MAX_JOBS\" ${V:+V=1}\n \n+    # Check that ELF security checks tools are sane",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20980#discussion_r562383236",
      "id" : 562383236,
      "line" : 211,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjM4MzIzNg==",
      "original_commit_id" : "460b697708f85853abfd0cce1fb2a913d2074588",
      "original_line" : 211,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "contrib/guix/libexec/build.sh",
      "position" : 4,
      "pull_request_review_id" : 573942986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20980",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-22T04:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562383236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
