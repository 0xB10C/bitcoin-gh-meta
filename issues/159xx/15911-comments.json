[
   {
      "author_association" : "MEMBER",
      "body" : "_(my initial attempt  ddfce96d79809112d8253a8a82cc9bf11c3a1beb used `Optional<Bool>`)_ Given that `wallet->m_signal_rbf` is a `boolean` I think we should just stop treating `replaceable` as an optional parameter. In that case `ConstructTransaction` can take a boolean parameter and be simplified a bit.",
      "created_at" : "2019-04-27T18:16:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#issuecomment-487308342",
      "id" : 487308342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzMwODM0Mg==",
      "updated_at" : "2019-04-27T18:32:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487308342",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-04-27T20:55:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#issuecomment-487319002",
      "id" : 487319002,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzMxOTAwMg==",
      "updated_at" : "2019-05-10T20:09:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487319002",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280013263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280013263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"fallback to\" seems unnecessary here.",
      "commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "created_at" : "2019-05-01T06:38:40Z",
      "diff_hunk" : "@@ -3979,7 +3979,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n                                     {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                                 },\n                             },\n-                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"false\", \"Marks this transaction as BIP125 replaceable.\\n\"\n+                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"fallback to wallet's default\", \"Marks this transaction as BIP125 replaceable.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280013263",
      "id" : 280013263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDAxMzI2Mw==",
      "original_commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 232499544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911",
      "updated_at" : "2019-05-01T06:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280013263",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280013281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280013281"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably ought to throw an error if it's not a boolean here.",
      "commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "created_at" : "2019-05-01T06:38:57Z",
      "diff_hunk" : "@@ -4014,7 +4014,11 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n \n     CAmount fee;\n     int change_position;\n-    CMutableTransaction rawTx = ConstructTransaction(request.params[0], request.params[1], request.params[2], request.params[3][\"replaceable\"]);\n+    bool rbf = pwallet->m_signal_rbf;\n+    if (!request.params[3][\"replaceable\"].isNull()) {\n+        rbf = request.params[3][\"replaceable\"].isTrue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280013281",
      "id" : 280013281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDAxMzI4MQ==",
      "original_commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "original_position" : 16,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 232499544,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911",
      "updated_at" : "2019-05-01T06:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280013281",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280073217"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280073217"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would need a scripted diff to change that?\r\n\r\n```\r\n$ git grep --count  \"fallback to wallet's default\" \r\nsrc/wallet/rpcwallet.cpp:7\r\n",
      "commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "created_at" : "2019-05-01T13:36:56Z",
      "diff_hunk" : "@@ -3979,7 +3979,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n                                     {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                                 },\n                             },\n-                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"false\", \"Marks this transaction as BIP125 replaceable.\\n\"\n+                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"fallback to wallet's default\", \"Marks this transaction as BIP125 replaceable.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280073217",
      "id" : 280073217,
      "in_reply_to_id" : 280013263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDA3MzIxNw==",
      "original_commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 232573508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911",
      "updated_at" : "2019-05-01T13:36:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280073217",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280112661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280112661"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I used the same wording as elsewhere, so could indeed do a replace-all.",
      "commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "created_at" : "2019-05-01T15:42:53Z",
      "diff_hunk" : "@@ -3979,7 +3979,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n                                     {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                                 },\n                             },\n-                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"false\", \"Marks this transaction as BIP125 replaceable.\\n\"\n+                            {\"replaceable\", RPCArg::Type::BOOL, /* default */ \"fallback to wallet's default\", \"Marks this transaction as BIP125 replaceable.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15911#discussion_r280112661",
      "id" : 280112661,
      "in_reply_to_id" : 280013263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MDExMjY2MQ==",
      "original_commit_id" : "609685107bfb51d2ca8ab034694ad771ad267649",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 232624823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15911",
      "updated_at" : "2019-05-01T15:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/280112661",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
