[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281279178"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281279178"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should this be of type int?",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T17:24:56Z",
      "diff_hunk" : "@@ -129,6 +130,8 @@ def main(self):\n                             help=\"use bitcoin-cli instead of RPC for all commands\")\n         parser.add_argument(\"--perf\", dest=\"perf\", default=False, action=\"store_true\",\n                             help=\"profile running nodes with perf for the duration of the test\")\n+        parser.add_argument(\"--randseed\", action=\"store\",\n+                            help=\"set a random seed for deterministically reproducing a previous test run\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281279178",
      "id" : 281279178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTI3OTE3OA==",
      "original_commit_id" : "3105cf4f1c9d5ee2dec01b8b3b33e51a605ad2bf",
      "original_position" : 13,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 13,
      "pull_request_review_id" : 234098454,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T17:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281279178",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281281824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281281824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "thanks. Updated",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T17:32:12Z",
      "diff_hunk" : "@@ -129,6 +130,8 @@ def main(self):\n                             help=\"use bitcoin-cli instead of RPC for all commands\")\n         parser.add_argument(\"--perf\", dest=\"perf\", default=False, action=\"store_true\",\n                             help=\"profile running nodes with perf for the duration of the test\")\n+        parser.add_argument(\"--randseed\", action=\"store\",\n+                            help=\"set a random seed for deterministically reproducing a previous test run\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281281824",
      "id" : 281281824,
      "in_reply_to_id" : 281279178,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTI4MTgyNA==",
      "original_commit_id" : "3105cf4f1c9d5ee2dec01b8b3b33e51a605ad2bf",
      "original_position" : 13,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 13,
      "pull_request_review_id" : 234101873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T17:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281281824",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK e08e4c5. Does it make sense to add the same parameter to `test/functional/test_runner.py`?",
      "created_at" : "2019-05-06T17:58:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#issuecomment-489715008",
      "id" : 489715008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15963",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTcxNTAwOA==",
      "updated_at" : "2019-05-06T17:58:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489715008",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281295618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281295618"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alternatively:\r\n```python3\r\n        # Seed the PRNG. Note that testruns are reproducible if and only if\r\n        # a single thread accesses the PRNG. For more information, see\r\n        # https://docs.python.org/3/library/random.html#notes-on-reproducibility.\r\n```",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T18:09:54Z",
      "diff_hunk" : "@@ -158,6 +161,21 @@ def main(self):\n             self.options.tmpdir = tempfile.mkdtemp(prefix=TMPDIR_PREFIX)\n         self._start_logging()\n \n+        # Seed the PRNG.  Note that testruns are only reproducible if only a\n+        # single thread accesses the PRNG (see\n+        # https://docs.python.org/3/library/random.html#notes-on-reproducibility).\n+        # The network thread shouldn't access random. If we need to change the",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281295618",
      "id" : 281295618,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTI5NTYxOA==",
      "original_commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "original_position" : 24,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 24,
      "pull_request_review_id" : 234119309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T18:24:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281295618",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281296533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281296533"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        parser.add_argument(\"--randseed\", type=int,\r\n```\r\n\r\nsyle-nit: No need to mention the default when it isn't done anywhere else in our code.",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T18:12:13Z",
      "diff_hunk" : "@@ -129,6 +130,8 @@ def main(self):\n                             help=\"use bitcoin-cli instead of RPC for all commands\")\n         parser.add_argument(\"--perf\", dest=\"perf\", default=False, action=\"store_true\",\n                             help=\"profile running nodes with perf for the duration of the test\")\n+        parser.add_argument(\"--randseed\", action=\"store\", type=int,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281296533",
      "id" : 281296533,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTI5NjUzMw==",
      "original_commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "original_position" : 12,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 12,
      "pull_request_review_id" : 234121080,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T18:12:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281296533",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281299709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281299709"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Alternatively, to use `self.options.randseed` only once, avoid a `not` conditional, and begin the conditional with the most frequent case:\r\n```python3\r\n        seed = self.options.randseed\r\n\r\n        if seed is None:\r\n            seed = random.randrange(sys.maxsize)\r\n        else:\r\n            self.log.debug(\"Using user supplied random seed {}\".format(seed))\r\n```\r\nFeel free to ignore. FWIW, inline assignment in the conditional e.g. `if seed := self.options.randseed is None:` is coming to Python 3.8, IIUC.",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T18:20:29Z",
      "diff_hunk" : "@@ -158,6 +161,21 @@ def main(self):\n             self.options.tmpdir = tempfile.mkdtemp(prefix=TMPDIR_PREFIX)\n         self._start_logging()\n \n+        # Seed the PRNG.  Note that testruns are only reproducible if only a\n+        # single thread accesses the PRNG (see\n+        # https://docs.python.org/3/library/random.html#notes-on-reproducibility).\n+        # The network thread shouldn't access random. If we need to change the\n+        # network thread to access randomness, it should instantiate its own\n+        # random.Random object.\n+        if self.options.randseed is not None:\n+            self.log.debug(\"Using user supplied random seed {}\".format(self.options.randseed))\n+            seed = self.options.randseed\n+        else:\n+            seed = random.randrange(sys.maxsize)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281299709",
      "id" : 281299709,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTI5OTcwOQ==",
      "original_commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "original_position" : 31,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 31,
      "pull_request_review_id" : 234119309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T22:13:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281299709",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281305622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281305622"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: git grepping shows \"test run\" is the usual spelling in this repo",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T18:35:53Z",
      "diff_hunk" : "@@ -158,6 +161,21 @@ def main(self):\n             self.options.tmpdir = tempfile.mkdtemp(prefix=TMPDIR_PREFIX)\n         self._start_logging()\n \n+        # Seed the PRNG.  Note that testruns are only reproducible if only a",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281305622",
      "id" : 281305622,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTMwNTYyMg==",
      "original_commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "original_position" : 21,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 21,
      "pull_request_review_id" : 234132777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T18:35:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281305622",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281337617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281337617"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps just --seed for brevity",
      "commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "created_at" : "2019-05-06T20:04:01Z",
      "diff_hunk" : "@@ -129,6 +130,8 @@ def main(self):\n                             help=\"use bitcoin-cli instead of RPC for all commands\")\n         parser.add_argument(\"--perf\", dest=\"perf\", default=False, action=\"store_true\",\n                             help=\"profile running nodes with perf for the duration of the test\")\n+        parser.add_argument(\"--randseed\", action=\"store\", type=int,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15963#discussion_r281337617",
      "id" : 281337617,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTMzNzYxNw==",
      "original_commit_id" : "e08e4c5831aa68978844934a3e728a14d1ef6ae3",
      "original_position" : 12,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : 12,
      "pull_request_review_id" : 234173659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15963",
      "updated_at" : "2019-05-06T20:04:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281337617",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
