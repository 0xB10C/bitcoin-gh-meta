[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17581](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17581.html) (refactor: Remove settings merge reverse precedence code by ryanofsky)\n* [#17580](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17580.html) (refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags by ryanofsky)\n* [#17493](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17493.html) (util: Forbid ambiguous multiple assignments in config file by ryanofsky)\n* [#17473](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17473.html) (refactor: Settings code cleanups by ryanofsky)\n* [#17305](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17305.html) (doc: Updated -blocksonly documentation by birtony)\n* [#17127](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17127.html) (util: Correct permissions for datadir and wallets subdir by hebasto)\n* [#16673](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16673.html) (Relog configuration args on debug.log rotation by LarryRuane)\n* [#16545](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16545.html) (refactor: Implement missing error checking for ArgsManager flags by ryanofsky)\n* [#16365](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16365.html) (Log RPC parameters (arguments) if -debug=rpcparams by LarryRuane)\n* [#16115](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16115.html) (On bitcoind startup, write config args to debug.log by LarryRuane)\n* [#15204](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15204.html) (gui: Add Open External Wallet action by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-05-02T00:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-488521570",
      "id" : 488521570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15937",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODUyMTU3MA==",
      "updated_at" : "2019-12-17T01:39:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488521570",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-05-16T16:58:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-493149518",
      "id" : 493149518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15937",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzE0OTUxOA==",
      "updated_at" : "2019-05-16T16:58:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493149518",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Strong Concept ACK\r\n\"Loosing\" the wallets especially in conjunction with pruning is a concept hard to understand.",
      "created_at" : "2019-05-18T10:23:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-493666062",
      "id" : 493666062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15937",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MzY2NjA2Mg==",
      "updated_at" : "2019-05-18T10:23:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493666062",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297212143"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15937"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297212143"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit, remove ` && request.params[4].isBool()`?",
      "commit_id" : "9d5c780dcb8d573aee934d110a27194a637fed8d",
      "created_at" : "2019-06-25T14:17:22Z",
      "diff_hunk" : "@@ -2688,6 +2701,11 @@ static UniValue createwallet(const JSONRPCRequest& request)\n         flags |= WALLET_FLAG_BLANK_WALLET;\n     }\n \n+    bool load_on_startup = false;\n+    if (!request.params[4].isNull() && request.params[4].isBool()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297212143",
      "id" : 297212143,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzIxMjE0Mw==",
      "original_commit_id" : "9d5c780dcb8d573aee934d110a27194a637fed8d",
      "original_position" : 59,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 59,
      "pull_request_review_id" : 254036448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15937",
      "updated_at" : "2019-06-25T14:24:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297212143",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297213064"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15937"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297213064"
         }
      },
      "author_association" : "MEMBER",
      "body" : "An error is thrown but wallet remains loaded. Either:\r\n - make this a warning in the response;\r\n - move `AddWalletSetting()` before loading - which must be reverted if the actual load fails;\r\n - unload the wallet before throwing.",
      "commit_id" : "9d5c780dcb8d573aee934d110a27194a637fed8d",
      "created_at" : "2019-06-25T14:19:13Z",
      "diff_hunk" : "@@ -2626,10 +2628,20 @@ static UniValue loadwallet(const JSONRPCRequest& request)\n         }\n     }\n \n+    bool load_on_startup = false;\n+    if (!request.params[1].isNull() && request.params[1].isBool()) {\n+        load_on_startup = request.params[1].get_bool();\n+    }\n+\n     std::string error, warning;\n     std::shared_ptr<CWallet> const wallet = LoadWallet(*g_rpc_interfaces->chain, location, error, warning);\n     if (!wallet) throw JSONRPCError(RPC_WALLET_ERROR, error);\n \n+    if (load_on_startup && !AddWalletSetting(wallet->chain(), location.GetName())) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Wallet loaded, but load-on-startup list could not be written, so wallet \"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297213064",
      "id" : 297213064,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzIxMzA2NA==",
      "original_commit_id" : "9d5c780dcb8d573aee934d110a27194a637fed8d",
      "original_position" : 39,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 39,
      "pull_request_review_id" : 254036448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15937",
      "updated_at" : "2019-06-25T14:24:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297213064",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">For GUI this makes perfect sense, for RPC I'm not sure if there's a use case that pays off.\r\n\r\nbitcoind also autoloads wallets as configured. (And it only really makes sense in general to use bitcoin_rw.conf for this...)",
      "created_at" : "2020-01-29T03:32:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-579576452",
      "id" : 579576452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15937",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTU3NjQ1Mg==",
      "updated_at" : "2020-01-29T03:32:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579576452",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
