[
   {
      "author_association" : "MEMBER",
      "body" : "This is built on #15141. Only commit _[validation] Add CValidationState subclasses_ onwards are for review in this PR.",
      "created_at" : "2019-04-29T16:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-487657620",
      "id" : 487657620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzY1NzYyMA==",
      "updated_at" : "2019-04-29T16:53:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487657620",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-04-29T17:14:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-487665138",
      "id" : 487665138,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzY2NTEzOA==",
      "updated_at" : "2019-04-29T17:14:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487665138",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.\r\n\r\nI'd like to see `Invalid` and ilk return void instead of always false, and clean up the call sites correspondingly. This adds a  lines here and there, but I think it improves the readability of the code to see a false literal returned explicitly.\r\n\r\nI also somewhat think that ideally there should be a third state class which handles Corruption cases for 'system state' or something. This covers the notion that the issue is not the fault of the block or the transaction, it is an issue with our local state or implementation. Not sure it's worth the churn though, two is already a huge improvement.",
      "created_at" : "2019-04-30T05:58:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-487829136",
      "id" : 487829136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4NzgyOTEzNg==",
      "updated_at" : "2019-04-30T05:58:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487829136",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-04-30T19:33:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-488085122",
      "id" : 488085122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODA4NTEyMg==",
      "updated_at" : "2019-04-30T19:33:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488085122",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I also somewhat think that ideally there should be a third state class which handles Corruption cases for 'system state' or something. This covers the notion that the issue is not the fault of the block or the transaction,\r\n\r\nThe current split is more about \"what was being tested\" not \"what was at fault\" -- that's easy to deal with via types, because you know what's being tested at compile time; but you don't know what's going to have been at fault at compile time, so I think dealing with that via the type system (ie as a third state class) wouldn't work.",
      "created_at" : "2019-05-03T00:02:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-488873982",
      "id" : 488873982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4ODg3Mzk4Mg==",
      "updated_at" : "2019-05-03T00:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488873982",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15981](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15981.html) (Use __func__ for log messages by Bushstar)\n* [#15976](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15976.html) (refactor: move methods under CChainState (pt. 1) by jamesob)\n* [#15971](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15971.html) (validation: Add compile-time checking for negative locking requirement in LimitValidationInterfaceQueue by practicalswift)\n* [#15894](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15894.html) (Remove duplicated \"Error: \" prefix in logs by hebasto)\n* [#15855](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15855.html) ([refactor] interfaces: Add missing LockAnnotation for cs_main by MarcoFalke)\n* [#15713](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15713.html) (refactor: Replace chain relayTransactions/submitMemoryPool by higher method by ariard)\n* [#15606](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15606.html) ([experimental] UTXO snapshots by jamesob)\n* [#15191](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15191.html) (validation: Add missing cs_{LastBlockFile,nBlockSequenceId} locks in PruneAndFlush() and UnloadBlockIndex(). Add missing locking annotations. by practicalswift)\n* [#15169](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15169.html) (Parallelize CheckInputs() in AcceptToMemoryPool() by sdaftuar)\n* [#15045](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15045.html) ([test] Apply maximal flags to tx_valid tests and minimal flags to tx_invalid tests by jl2012)\n* [#14193](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14193.html) (validation: Add missing mempool locks by MarcoFalke)\n* [#13533](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13533.html) ([tests] Reduced number of validations in tx_validationcache_tests by lucash-dev)\n* [#10443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10443.html) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n* [#9381](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/9381.html) (Remove CWalletTx merging logic from AddToWallet by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-05-04T19:58:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-489360735",
      "id" : 489360735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ4OTM2MDczNQ==",
      "updated_at" : "2019-05-08T20:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/489360735",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15921#discussion_r281706562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15921"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281706562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`first_invalid` has been dropped, right? :-)",
      "commit_id" : "8d88c860808acde6c816dde3b473e39af7304de4",
      "created_at" : "2019-05-07T16:01:02Z",
      "diff_hunk" : "@@ -228,7 +229,7 @@ bool ProcessNewBlock(const CChainParams& chainparams, const std::shared_ptr<cons\n  * @param[out] ppindex If set, the pointer will be set to point to the last new block index object for the given headers\n  * @param[out] first_invalid First header that fails validation, if one exists",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#discussion_r281706562",
      "id" : 281706562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI4MTcwNjU2Mg==",
      "original_commit_id" : "4b4d08115519d1c3e3c105383d34141fa325b128",
      "original_position" : 19,
      "path" : "src/validation.h",
      "position" : 19,
      "pull_request_review_id" : 234611280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15921",
      "updated_at" : "2019-05-08T17:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/281706562",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-05-08T21:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15921#issuecomment-490499729",
      "id" : 490499729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15921",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ5MDQ5OTcyOQ==",
      "updated_at" : "2019-05-08T21:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/490499729",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
