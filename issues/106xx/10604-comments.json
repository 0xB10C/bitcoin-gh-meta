[
   {
      "body" : "It's good to add the wallet name to `getwalletinfo` but I don't see a reason to break backwards compatibility by returning an array in place of the previous wallet info object.\r\n\r\nI thought the approach we were going to take for multiwallet RPC support was to add some kind of `listwallets` API that would return wallet names, and some kind of RPC session variable that would control which wallet is returned by `GetWalletForJSONRPCRequest` and used by all current wallet apis (including `getwalletinfo`).",
      "created_at" : "2017-06-15T18:17:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308825765",
      "id" : 308825765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-15T18:17:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308825765",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "Jonas had a suggestion about how we could use different RPC endpoints to access individual wallets here: https://github.com/bitcoin/bitcoin/pull/8694#issuecomment-246095336\r\n\r\nAlso more discussion in https://github.com/bitcoin/bitcoin/pull/8788",
      "created_at" : "2017-06-15T18:21:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308826700",
      "id" : 308826700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-15T18:36:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308826700",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> Jonas had a suggestion about how we could use different RPC endpoints to access individual wallets\r\n\r\nSounds good, although I don't think that's relevant for this PR, since it doesn't touch any RPCs that are specific to a single wallet.\r\n\r\n> I thought the approach we were going to take for multiwallet RPC support was to add some kind of `listwallets` API\r\n\r\nI missed that discussion (and can't find mention of `listwallets` in the PRs you've linked to). Can you point me at where this was discussed? It shouldn't be difficult to change this PR to implement a new `listwallets` RPC and use that in the test if that's what people want.",
      "created_at" : "2017-06-15T19:01:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308836821",
      "id" : 308836821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-15T19:01:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308836821",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> Sounds good, although I don't think that's relevant for this PR, since it doesn't touch any RPCs that are specific to a single wallet.\r\n\r\nDeriving the wallet from the RPC endpoint is relevant to this PR if you want getwalletinfo to be able to return information about all wallets without changing it to return an array.\r\n\r\n> I missed that discussion (and can't find mention of listwallets in the PRs you've linked to). Can you point me at where this was discussed? It shouldn't be difficult to change this PR to implement a new listwallets RPC and use that in the test if that's what people want.\r\n\r\nThere's no discussion about listwallets, I was just suggesting that as an alternative to making getwalletinfo return an array.",
      "created_at" : "2017-06-15T19:05:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-308837798",
      "id" : 308837798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-15T19:05:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/308837798",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/7133040?v=3",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> It's good to add the wallet name to getwalletinfo but I don't see a reason to break backwards compatibility by returning an array in place of the previous wallet info object.\r\n> I thought the approach we were going to take for multiwallet RPC support was to add some kind of  listwallets API that would return wallet names, and some kind of RPC session variable that would control which wallet is returned by GetWalletForJSONRPCRequest and used by all current wallet apis (including getwalletinfo).\r\n\r\nI agree - last meeting we decided on using RPC endpoints to distinguish wallets. This means that the current wallet RPCs, including `getwalletinfo`, will take derive the wallet to be use from this. Adding the wallet name to the current API makes sense, of course.\r\n\r\nAlso adding a new `listwallets` RPC on a global (not per-wallet) level makes sense. This will keep backward compatibility but make it possible to list the currently loaded wallets.\r\n",
      "created_at" : "2017-06-22T12:53:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-310371252",
      "id" : 310371252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-22T12:53:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/310371252",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@ryanofsky @laanwj - thanks for the useful feedback on the API here.\r\n\r\nI've updated this PR to add a new `listwallets` RPC, which simply lists the names of the currently loaded wallets. The command intentionally shows no information about the wallet. If/when we add multi-user multiwallet functionality, the `listwallet` RPC should not reveal the contents of the individual wallets.\r\n\r\nThe PR still adds `walletname` to the output of the `getwalletinfo` RPC.\r\n\r\nAlso rebased on master.",
      "created_at" : "2017-06-27T13:52:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10604#issuecomment-311364736",
      "id" : 311364736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10604",
      "updated_at" : "2017-06-27T13:52:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/311364736",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
