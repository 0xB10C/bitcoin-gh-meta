[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10695#discussion_r124670279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10695"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124670279"
         }
      },
      "body" : "For my own sanity it'd be nice if cltv_invalidate looked much more like cltv_validate, which would make it more obvious that the invalid tx is clearly invalid due to the CLTV and not some other reason, and while you're at it would be nice to test other ways CLTV can be invalid (both tx doesnt meet sequence requirements and tx doesnt meet locktime requirements).",
      "commit_id" : "06e3f006e499e3238905b92cbca563c69e170410",
      "created_at" : "2017-06-28T22:13:30Z",
      "diff_hunk" : "@@ -33,19 +26,34 @@ def cltv_invalidate(tx):\n     tx.vin[0].scriptSig = CScript([OP_1NEGATE, OP_CHECKLOCKTIMEVERIFY, OP_DROP] +\n                                   list(CScript(tx.vin[0].scriptSig)))\n \n+def cltv_validate(node, tx, height):\n+    '''Modify the signature in vin 0 of the tx to pass CLTV\n+    Prepends <height> CLTV DROP in the scriptSig, and sets\n+    the locktime to height'''\n+    tx.vin[0].nSequence = 0\n+    tx.nLockTime = height",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10695#discussion_r124670279",
      "id" : 124670279,
      "original_commit_id" : "1cf60bb12574256364f78666e546bf4d5d7b1508",
      "original_position" : 44,
      "path" : "test/functional/bip65-cltv-p2p.py",
      "position" : 44,
      "pull_request_review_id" : 46983256,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10695",
      "updated_at" : "2017-06-28T23:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124670279",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
