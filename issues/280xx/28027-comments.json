[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1620768425) |\n| Approach ACK | [S3RK](https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1630248097) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26728](https://github.com/bitcoin/bitcoin/pull/26728) (wallet: Have the wallet store the key for automatically generated descriptors by achow101)\n* [#25907](https://github.com/bitcoin/bitcoin/pull/25907) (wallet: rpc to add automatically generated descriptors by achow101)\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add getxpub by Sjors)\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-04T03:03:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1619399483",
      "id" : 1619399483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28027",
      "node_id" : "IC_kwDOABII585ghhM7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1619399483/reactions"
      },
      "updated_at" : "2023-07-11T06:51:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1619399483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1251525740"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251525740"
         }
      },
      "author_association" : "MEMBER",
      "body" : "only if you re-touch, style nit in 95b140a4b75c61e4ae3f4d1ea6e2d4a6b9fa15e8 (and following commits): The `*_path` node properties can use the shorter `a / b / c` syntax, over  `os.path.join(a, b, c)`.",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-04T06:05:16Z",
      "diff_hunk" : "@@ -160,18 +155,25 @@ def run_test(self):\n         node_master_wallets_dir = node_master.wallets_path\n         node_v19_wallets_dir = node_v19.wallets_path\n         node_v17_wallets_dir = node_v17.wallets_path\n-        node_v16_wallets_dir = node_v16.chain_path\n+        node_v16_wallets_dir = node_v16.wallets_path\n         node_master.unloadwallet(\"w1\")\n         node_master.unloadwallet(\"w2\")\n         node_master.unloadwallet(\"w3\")\n \n         for node in legacy_nodes:\n             # Copy wallets to previous version\n             for wallet in os.listdir(node_master_wallets_dir):\n-                shutil.copytree(\n-                    os.path.join(node_master_wallets_dir, wallet),\n-                    os.path.join(self.nodes_wallet_dir(node), wallet)\n-                )\n+                if node.version == 160300:\n+                    # 0.16 node expect the wallet to be in the wallet dir but as a plain file rather than in directories\n+                    shutil.copyfile(\n+                        os.path.join(node_master.wallets_path, wallet, \"wallet.dat\"),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1251525740",
      "id" : 1251525740,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585KmMRs",
      "original_commit_id" : "95b140a4b75c61e4ae3f4d1ea6e2d4a6b9fa15e8",
      "original_line" : 169,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 1512116964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251525740/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-04T06:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1251525740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for improving these tests. Added to review list.",
      "created_at" : "2023-07-04T14:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1620356102",
      "id" : 1620356102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28027",
      "node_id" : "IC_kwDOABII585glKwG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620356102/reactions"
      },
      "updated_at" : "2023-07-04T14:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620356102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2023-07-04T21:32:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1620768425",
      "id" : 1620768425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28027",
      "node_id" : "IC_kwDOABII585gmvap",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620768425/reactions"
      },
      "updated_at" : "2023-07-04T21:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1620768425",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-07-06T11:17:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1623493693",
      "id" : 1623493693,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28027",
      "node_id" : "IC_kwDOABII585gxIw9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623493693/reactions"
      },
      "updated_at" : "2023-07-06T11:17:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623493693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1257851249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257851249"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "v0.16 is different in many regards, does it make sense to have a separate test to check incompatibility?",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T07:43:38Z",
      "diff_hunk" : "@@ -158,34 +173,46 @@ def run_test(self):\n \n         # Unload wallets and copy to older nodes:\n         node_master_wallets_dir = node_master.wallets_path\n-        node_v19_wallets_dir = node_v19.wallets_path\n-        node_v17_wallets_dir = node_v17.wallets_path\n-        node_v16_wallets_dir = node_v16.chain_path\n         node_master.unloadwallet(\"w1\")\n         node_master.unloadwallet(\"w2\")\n         node_master.unloadwallet(\"w3\")\n \n         for node in legacy_nodes:\n             # Copy wallets to previous version\n             for wallet in os.listdir(node_master_wallets_dir):\n-                shutil.copytree(\n-                    os.path.join(node_master_wallets_dir, wallet),\n-                    os.path.join(self.nodes_wallet_dir(node), wallet)\n-                )\n-\n-        if not self.options.descriptors:\n-            # Descriptor wallets break compatibility, only run this test for legacy wallet\n-            # Load modern wallet with older nodes\n-            for node in legacy_nodes:\n-                for wallet_name in [\"w1\", \"w2\", \"w3\"]:\n-                    if node.version < 170000:\n-                        # loadwallet was introduced in v0.17.0\n-                        continue\n-                    if node.version < 180000 and wallet_name == \"w3\":\n-                        # Blank wallets were introduced in v0.18.0. We test the loading error below.\n-                        continue\n-                    node.loadwallet(wallet_name)\n-                    wallet = node.get_wallet_rpc(wallet_name)\n+                if node.version == 160300:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1257851249",
      "id" : 1257851249,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII585K-Ulx",
      "original_commit_id" : "604440c0b86d1c5e5d359ababd23d3d2d07739e8",
      "original_line" : 183,
      "original_position" : 138,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 138,
      "pull_request_review_id" : 1521467578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257851249/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T07:43:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257851249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1257854317"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257854317"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "pull up the comment explaining why?",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T07:46:36Z",
      "diff_hunk" : "@@ -208,13 +235,29 @@ def run_test(self):\n                     else:\n                         assert info['private_keys_enabled'] == True\n                         assert info['keypoolsize'] == 0\n-        else:\n-            for node in legacy_nodes:\n+\n+                    # Copy back to master\n+                    wallet.unloadwallet()\n+                    if n == node:\n+                        shutil.rmtree(os.path.join(node_master.wallets_path, wallet_name))\n+                        shutil.copytree(\n+                            os.path.join(n.wallets_path, wallet_name),\n+                            os.path.join(node_master.wallets_path, wallet_name),\n+                        )\n+\n+        # Check that descriptor wallets don't work on legacy only nodes\n+        if self.options.descriptors:\n+            self.log.info(\"Test descriptor wallet incompatibility on:\")\n+            for node in legacy_only_nodes:\n+                if node.version < 180000:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1257854317",
      "id" : 1257854317,
      "line" : 255,
      "node_id" : "PRRC_kwDOABII585K-VVt",
      "original_commit_id" : "604440c0b86d1c5e5d359ababd23d3d2d07739e8",
      "original_line" : 255,
      "original_position" : 194,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 205,
      "pull_request_review_id" : 1521472220,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257854317/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T07:46:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1257854317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258613252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613252"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done where the code was more than just moved.",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T17:11:41Z",
      "diff_hunk" : "@@ -160,18 +155,25 @@ def run_test(self):\n         node_master_wallets_dir = node_master.wallets_path\n         node_v19_wallets_dir = node_v19.wallets_path\n         node_v17_wallets_dir = node_v17.wallets_path\n-        node_v16_wallets_dir = node_v16.chain_path\n+        node_v16_wallets_dir = node_v16.wallets_path\n         node_master.unloadwallet(\"w1\")\n         node_master.unloadwallet(\"w2\")\n         node_master.unloadwallet(\"w3\")\n \n         for node in legacy_nodes:\n             # Copy wallets to previous version\n             for wallet in os.listdir(node_master_wallets_dir):\n-                shutil.copytree(\n-                    os.path.join(node_master_wallets_dir, wallet),\n-                    os.path.join(self.nodes_wallet_dir(node), wallet)\n-                )\n+                if node.version == 160300:\n+                    # 0.16 node expect the wallet to be in the wallet dir but as a plain file rather than in directories\n+                    shutil.copyfile(\n+                        os.path.join(node_master.wallets_path, wallet, \"wallet.dat\"),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258613252",
      "id" : 1258613252,
      "in_reply_to_id" : 1251525740,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LBOoE",
      "original_commit_id" : "95b140a4b75c61e4ae3f4d1ea6e2d4a6b9fa15e8",
      "original_line" : 169,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : null,
      "pull_request_review_id" : 1522581655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613252/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:11:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258613989"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613989"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps, but I think we should test it in this test as it's important to have the upgrade and downgrade tests for the older wallet version.",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T17:12:32Z",
      "diff_hunk" : "@@ -158,34 +173,46 @@ def run_test(self):\n \n         # Unload wallets and copy to older nodes:\n         node_master_wallets_dir = node_master.wallets_path\n-        node_v19_wallets_dir = node_v19.wallets_path\n-        node_v17_wallets_dir = node_v17.wallets_path\n-        node_v16_wallets_dir = node_v16.chain_path\n         node_master.unloadwallet(\"w1\")\n         node_master.unloadwallet(\"w2\")\n         node_master.unloadwallet(\"w3\")\n \n         for node in legacy_nodes:\n             # Copy wallets to previous version\n             for wallet in os.listdir(node_master_wallets_dir):\n-                shutil.copytree(\n-                    os.path.join(node_master_wallets_dir, wallet),\n-                    os.path.join(self.nodes_wallet_dir(node), wallet)\n-                )\n-\n-        if not self.options.descriptors:\n-            # Descriptor wallets break compatibility, only run this test for legacy wallet\n-            # Load modern wallet with older nodes\n-            for node in legacy_nodes:\n-                for wallet_name in [\"w1\", \"w2\", \"w3\"]:\n-                    if node.version < 170000:\n-                        # loadwallet was introduced in v0.17.0\n-                        continue\n-                    if node.version < 180000 and wallet_name == \"w3\":\n-                        # Blank wallets were introduced in v0.18.0. We test the loading error below.\n-                        continue\n-                    node.loadwallet(wallet_name)\n-                    wallet = node.get_wallet_rpc(wallet_name)\n+                if node.version == 160300:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258613989",
      "id" : 1258613989,
      "in_reply_to_id" : 1257851249,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII585LBOzl",
      "original_commit_id" : "604440c0b86d1c5e5d359ababd23d3d2d07739e8",
      "original_line" : 183,
      "original_position" : 138,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 138,
      "pull_request_review_id" : 1522582856,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613989/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258613989",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258614077"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258614077"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T17:12:38Z",
      "diff_hunk" : "@@ -208,13 +235,29 @@ def run_test(self):\n                     else:\n                         assert info['private_keys_enabled'] == True\n                         assert info['keypoolsize'] == 0\n-        else:\n-            for node in legacy_nodes:\n+\n+                    # Copy back to master\n+                    wallet.unloadwallet()\n+                    if n == node:\n+                        shutil.rmtree(os.path.join(node_master.wallets_path, wallet_name))\n+                        shutil.copytree(\n+                            os.path.join(n.wallets_path, wallet_name),\n+                            os.path.join(node_master.wallets_path, wallet_name),\n+                        )\n+\n+        # Check that descriptor wallets don't work on legacy only nodes\n+        if self.options.descriptors:\n+            self.log.info(\"Test descriptor wallet incompatibility on:\")\n+            for node in legacy_only_nodes:\n+                if node.version < 180000:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1258614077",
      "id" : 1258614077,
      "in_reply_to_id" : 1257854317,
      "line" : 255,
      "node_id" : "PRRC_kwDOABII585LBO09",
      "original_commit_id" : "604440c0b86d1c5e5d359ababd23d3d2d07739e8",
      "original_line" : 255,
      "original_position" : 194,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 205,
      "pull_request_review_id" : 1522582991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258614077/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:12:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258614077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259010439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259010439"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The v19 test pubkeys `0296b538e853519c726a2c91e61ec11600ae1390813a627c66fb8be7947be63c52` and `037211a824f55b505228e4c3d5194c1fcfaa15a456abdf37f9b9d97a4040afc073`  are they relevant to the test?  I see they are the same as the one reported in #18075",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T23:40:56Z",
      "diff_hunk" : "@@ -72,10 +72,45 @@ def setup_nodes(self):\n         self.start_nodes()\n         self.import_deterministic_coinbase_privkeys()\n \n+    def test_v19_addmultisigaddress(self):\n+        # Specific test for addmultisigaddress using v19\n+        # See #18075\n+        self.log.info(\"Testing 0.19 addmultisigaddress case (#18075)\")\n+        node_master = self.nodes[1]\n+        node_v19 = self.nodes[self.num_nodes - 4]\n+        node_v19.rpc.createwallet(wallet_name=\"w1_v19\")\n+        wallet = node_v19.get_wallet_rpc(\"w1_v19\")\n+        info = wallet.getwalletinfo()\n+        assert info['private_keys_enabled']\n+        assert info['keypoolsize'] > 0\n+        # Use addmultisigaddress (see #18075)\n+        address_18075 = wallet.rpc.addmultisigaddress(1, [\"0296b538e853519c726a2c91e61ec11600ae1390813a627c66fb8be7947be63c52\", \"037211a824f55b505228e4c3d5194c1fcfaa15a456abdf37f9b9d97a4040afc073\"], \"\", \"legacy\")[\"address\"]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259010439",
      "id" : 1259010439,
      "line" : 89,
      "node_id" : "PRRC_kwDOABII585LCvmH",
      "original_commit_id" : "0ffa0f1c370494b6b99a9cdf911b20ee655ac829",
      "original_line" : 87,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 42,
      "pull_request_review_id" : 1523177321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259010439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:11:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259010439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259013655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259013655"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`180000`, `210000`, e.t.c\r\nTo reduce the magic numbers we can create a variable for the versions, e.g `v18 = 180000`and  reuse it throughout the tests?",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T23:46:57Z",
      "diff_hunk" : "@@ -192,52 +194,60 @@ def run_test(self):\n \n         self.test_v19_addmultisigaddress()\n \n-        if not self.options.descriptors:\n-            # Descriptor wallets break compatibility, only run this test for legacy wallet\n-            # Load modern wallet with older nodes\n-            for node in legacy_nodes:\n-                for wallet_name in [\"w1\", \"w2\", \"w3\"]:\n-                    if node.version < 170000:\n-                        # loadwallet was introduced in v0.17.0\n-                        continue\n-                    if node.version < 180000 and wallet_name == \"w3\":\n-                        # Blank wallets were introduced in v0.18.0. We test the loading error below.\n-                        continue\n-                    node.loadwallet(wallet_name)\n-                    wallet = node.get_wallet_rpc(wallet_name)\n-                    info = wallet.getwalletinfo()\n-                    if wallet_name == \"w1\":\n-                        assert info['private_keys_enabled'] == True\n-                        assert info['keypoolsize'] > 0\n-                        txs = wallet.listtransactions()\n-                        assert_equal(len(txs), 5)\n-                        assert_equal(txs[1][\"txid\"], tx1_id)\n-                        assert_equal(txs[2][\"walletconflicts\"], [tx1_id])\n-                        assert_equal(txs[1][\"replaced_by_txid\"], tx2_id)\n-                        assert not txs[1][\"abandoned\"]\n-                        assert_equal(txs[1][\"confirmations\"], -1)\n-                        assert_equal(txs[2][\"blockindex\"], 1)\n-                        assert txs[3][\"abandoned\"]\n-                        assert_equal(txs[4][\"walletconflicts\"], [tx3_id])\n-                        assert_equal(txs[3][\"replaced_by_txid\"], tx4_id)\n-                        assert not hasattr(txs[3], \"blockindex\")\n-                    elif wallet_name == \"w2\":\n-                        assert info['private_keys_enabled'] == False\n-                        assert info['keypoolsize'] == 0\n-                    else:\n-                        assert info['private_keys_enabled'] == True\n-                        assert info['keypoolsize'] == 0\n-        else:\n-            for node in legacy_nodes:\n+        self.log.info(\"Test that a wallet made on master can be opened on:\")\n+        # In descriptors wallet mode, run this test on the nodes that support descriptor wallets\n+        # In legacy wallets mode, run this test on the nodes that support legacy wallets\n+        for node in descriptors_nodes if self.options.descriptors else legacy_nodes:\n+            if node.version < 170000:\n+                # loadwallet was introduced in v0.17.0\n+                continue\n+            self.log.info(f\"- {node.version}\")\n+            for wallet_name in [\"w1\", \"w2\", \"w3\"]:\n+                if node.version < 180000 and wallet_name == \"w3\":",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259013655",
      "id" : 1259013655,
      "line" : 206,
      "node_id" : "PRRC_kwDOABII585LCwYX",
      "original_commit_id" : "3e7bbf3a86c067427735ac30f8bbe496d61d5fb4",
      "original_line" : 206,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 161,
      "pull_request_review_id" : 1523177321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259013655/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:11:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259013655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259015544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259015544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why are we no longer using the wallet?",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-10T23:51:01Z",
      "diff_hunk" : "@@ -127,13 +126,6 @@ def run_test(self):\n         assert wallet.getaddressinfo(address_18075)[\"solvable\"]\n         node_v19.unloadwallet(\"w1_v19\")\n \n-        # w1_v18: regular wallet, created with v0.18",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259015544",
      "id" : 1259015544,
      "line" : 135,
      "node_id" : "PRRC_kwDOABII585LCw14",
      "original_commit_id" : "6a5d245b89c51a53989b984d31d7bb4d807837c3",
      "original_line" : 130,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 96,
      "pull_request_review_id" : 1523177321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259015544/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:11:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259015544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259265158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259265158"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "agree, you can resolve this",
      "commit_id" : "e40896845a57bb5bf657f51dc007c6563e4ca22c",
      "created_at" : "2023-07-11T06:50:23Z",
      "diff_hunk" : "@@ -158,34 +173,46 @@ def run_test(self):\n \n         # Unload wallets and copy to older nodes:\n         node_master_wallets_dir = node_master.wallets_path\n-        node_v19_wallets_dir = node_v19.wallets_path\n-        node_v17_wallets_dir = node_v17.wallets_path\n-        node_v16_wallets_dir = node_v16.chain_path\n         node_master.unloadwallet(\"w1\")\n         node_master.unloadwallet(\"w2\")\n         node_master.unloadwallet(\"w3\")\n \n         for node in legacy_nodes:\n             # Copy wallets to previous version\n             for wallet in os.listdir(node_master_wallets_dir):\n-                shutil.copytree(\n-                    os.path.join(node_master_wallets_dir, wallet),\n-                    os.path.join(self.nodes_wallet_dir(node), wallet)\n-                )\n-\n-        if not self.options.descriptors:\n-            # Descriptor wallets break compatibility, only run this test for legacy wallet\n-            # Load modern wallet with older nodes\n-            for node in legacy_nodes:\n-                for wallet_name in [\"w1\", \"w2\", \"w3\"]:\n-                    if node.version < 170000:\n-                        # loadwallet was introduced in v0.17.0\n-                        continue\n-                    if node.version < 180000 and wallet_name == \"w3\":\n-                        # Blank wallets were introduced in v0.18.0. We test the loading error below.\n-                        continue\n-                    node.loadwallet(wallet_name)\n-                    wallet = node.get_wallet_rpc(wallet_name)\n+                if node.version == 160300:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#discussion_r1259265158",
      "id" : 1259265158,
      "in_reply_to_id" : 1257851249,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII585LDtyG",
      "original_commit_id" : "604440c0b86d1c5e5d359ababd23d3d2d07739e8",
      "original_line" : 183,
      "original_position" : 138,
      "original_start_line" : null,
      "path" : "test/functional/wallet_backwards_compatibility.py",
      "position" : 138,
      "pull_request_review_id" : 1523538022,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28027",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259265158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T06:50:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259265158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Approach ACK",
      "created_at" : "2023-07-11T06:51:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28027#issuecomment-1630248097",
      "id" : 1630248097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28027",
      "node_id" : "IC_kwDOABII585hK5yh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630248097/reactions"
      },
      "updated_at" : "2023-07-11T06:51:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630248097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   }
]
