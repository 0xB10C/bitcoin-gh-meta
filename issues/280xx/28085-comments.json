[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [sipa](https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1638520565), [MarcoFalke](https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1639745003), [achow101](https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1642698705) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n",
      "created_at" : "2023-07-17T01:44:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1637273564",
      "id" : 1637273564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28085",
      "node_id" : "IC_kwDOABII585hls_c",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1637273564/reactions"
      },
      "updated_at" : "2023-07-19T20:19:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1637273564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1264993873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264993873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    CSipHasher& Write(Span<const B> data);\r\n```\r\n\r\nI wonder if this should be made a template on `B` and instantiated for `std::byte` and `unsigned char` in the cpp file? Otherwise it will need to be touched again in the future if someone wants to hash a `std::byte` span.",
      "commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "created_at" : "2023-07-17T07:50:31Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1264993873",
      "id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585LZkZR",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1532182252,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264993873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T07:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264993873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1264994458"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264994458"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        t |= uint64_t{data.front()} << (8 * (c % 8));\r\n```\r\n\r\nstyle-nit, if it compiles?",
      "commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "created_at" : "2023-07-17T07:51:09Z",
      "diff_hunk" : "@@ -45,14 +45,14 @@ CSipHasher& CSipHasher::Write(uint64_t data)\n     return *this;\n }\n \n-CSipHasher& CSipHasher::Write(const unsigned char* data, size_t size)\n+CSipHasher& CSipHasher::Write(Span<const unsigned char> data)\n {\n     uint64_t v0 = v[0], v1 = v[1], v2 = v[2], v3 = v[3];\n     uint64_t t = tmp;\n     uint8_t c = count;\n \n-    while (size--) {\n-        t |= ((uint64_t)(*(data++))) << (8 * (c % 8));\n+    while (data.size() > 0) {\n+        t |= ((uint64_t)data.front()) << (8 * (c % 8));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1264994458",
      "id" : 1264994458,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585LZkia",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 55,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.cpp",
      "position" : 14,
      "pull_request_review_id" : 1532182252,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264994458/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T07:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1264994458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265452959"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265452959"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sounds like a good idea! Couldn't get that to compile yet unfortunately ð  (which is maybe due to my lack of knowledge about templates). I tried with the following patch:\r\n```diff\r\ndiff --git a/src/crypto/siphash.cpp b/src/crypto/siphash.cpp\r\nindex 2c328d0840..7cbafd4d98 100644\r\n--- a/src/crypto/siphash.cpp\r\n+++ b/src/crypto/siphash.cpp\r\n@@ -45,7 +45,8 @@ CSipHasher& CSipHasher::Write(uint64_t data)\r\n     return *this;\r\n }\r\n\r\n-CSipHasher& CSipHasher::Write(Span<const unsigned char> data)\r\n+template <typename B>\r\n+CSipHasher& CSipHasher::Write(Span<const B> data)\r\n {\r\n     uint64_t v0 = v[0], v1 = v[1], v2 = v[2], v3 = v[3];\r\n     uint64_t t = tmp;\r\n@@ -73,6 +74,8 @@ CSipHasher& CSipHasher::Write(Span<const unsigned char> data)\r\n\r\n     return *this;\r\n }\r\n+template CSipHasher& CSipHasher::Write(Span<const unsigned char>);\r\n+template CSipHasher& CSipHasher::Write(Span<const std::byte>);\r\n\r\n uint64_t CSipHasher::Finalize() const\r\n {\r\ndiff --git a/src/crypto/siphash.h b/src/crypto/siphash.h\r\nindex 4fb3dc2f25..748f6c1a39 100644\r\n--- a/src/crypto/siphash.h\r\n+++ b/src/crypto/siphash.h\r\n@@ -27,7 +27,8 @@ public:\r\n      */\r\n     CSipHasher& Write(uint64_t data);\r\n     /** Hash arbitrary bytes. */\r\n-    CSipHasher& Write(Span<const unsigned char> data);\r\n+    template <typename B = unsigned char>\r\n+    CSipHasher& Write(Span<const B> data);\r\n     /** Compute the 64-bit SipHash-2-4 of the data written so far. The object remains untouched. */\r\n     uint64_t Finalize() const;\r\n };\r\n\r\n```\r\nwhich led to the complaint (using clang 13.0.0)\r\n```\r\nutil/bytevectorhash.cpp:19:35: error: no matching member function for call to 'Write'\r\n    return CSipHasher(m_k0, m_k1).Write(input).Finalize();\r\n           ~~~~~~~~~~~~~~~~~~~~~~~^~~~~\r\n./crypto/siphash.h:28:17: note: candidate function not viable: no known conversion from 'const std::vector<unsigned char>' to 'uint64_t' (aka 'unsigned long long') for 1st argument\r\n    CSipHasher& Write(uint64_t data);\r\n                ^\r\n./crypto/siphash.h:31:17: note: candidate template ignored: could not match 'Span' against 'vector'\r\n    CSipHasher& Write(Span<const B> data);\r\n                ^\r\n1 error generated.\r\n```\r\nNot sure why the match 'Span' against 'vector' works fine without template, but doesn't _with_ template? ð¤ ",
      "commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "created_at" : "2023-07-17T14:28:21Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265452959",
      "id" : 1265452959,
      "in_reply_to_id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585LbUef",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1532941600,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265452959/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T14:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265452959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265463653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265463653"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, sorry, the `const` prevents a match. You can just drop it. Or alternatively put in the header two overloads of the form:\r\n\r\n```cpp\r\nCSipHasher& Write(Span<const unsigned char> data);\r\nCSipHasher& Write(Span<const std::byte> data);\r\n```\r\n\r\nAnd the make one call the other in the cpp file.",
      "commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "created_at" : "2023-07-17T14:36:07Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265463653",
      "id" : 1265463653,
      "in_reply_to_id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585LbXFl",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1532958428,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265463653/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T14:36:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265463653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265489980"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265489980"
         }
      },
      "author_association" : "MEMBER",
      "body" : "While I don't obect to having this particular function templatized, I don't think it's a scalable approach to introduce dual char/byte functions all over the codebase, just because not everything is using bytes.\r\n\r\nIMO, the goal should be to *only* have a byte interface here;  The options for that are:\r\n* Just ~byte~ bite the bullet now, and introduce `MakeByteSpan` in all call sites.\r\n* Stick with a `Span<const unsigned char>` interface for now, and revisit at some point in the future when more of the codebase is using bytes.\r\n\r\nI think both of these options are preferable to duplicating/templatizing the function.",
      "commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "created_at" : "2023-07-17T14:53:41Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265489980",
      "id" : 1265489980,
      "in_reply_to_id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585Lbdg8",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1532998792,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265489980/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T14:53:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265489980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265593386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593386"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Ah, sorry, the `const` prevents a match. You can just drop it. \r\n\r\nFWIW, removing the `const` from the Span template type didn't change anything, the error message _\"could not match 'Span' against 'vector'\"_ still appears. (Or, did I misinterpret your second sentence and with \"drop it\" you meant to drop the template idea in general?).\r\n\r\n@sipa: Fair enough. There are some places already with templates for byte types (e.g. `FastRandomContext::randbytes<B>`, `ParseHex<B>` etc. to name two that I found quickly), so I wasn't aware that this is controversial and would have been fine adding a std::byte variant, but you have a valid point. I'll follow the path of least resistance/effort then and keep it as it is, i.e. stay with `Span<const unsigned char>` for now.\r\n",
      "commit_id" : "7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-17T16:11:00Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265593386",
      "id" : 1265593386,
      "in_reply_to_id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585Lb2wq",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1533158227,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593386/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T16:11:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265593712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593712"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-17T16:11:20Z",
      "diff_hunk" : "@@ -45,14 +45,14 @@ CSipHasher& CSipHasher::Write(uint64_t data)\n     return *this;\n }\n \n-CSipHasher& CSipHasher::Write(const unsigned char* data, size_t size)\n+CSipHasher& CSipHasher::Write(Span<const unsigned char> data)\n {\n     uint64_t v0 = v[0], v1 = v[1], v2 = v[2], v3 = v[3];\n     uint64_t t = tmp;\n     uint8_t c = count;\n \n-    while (size--) {\n-        t |= ((uint64_t)(*(data++))) << (8 * (c % 8));\n+    while (data.size() > 0) {\n+        t |= ((uint64_t)data.front()) << (8 * (c % 8));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265593712",
      "id" : 1265593712,
      "in_reply_to_id" : 1264994458,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lb21w",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 55,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.cpp",
      "position" : null,
      "pull_request_review_id" : 1533158745,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593712/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T16:11:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265593712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265607620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265607620"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I wouldn't say it's controversial - I have no problem with adding this.\n\nI just want to question if duplicating lots of things (if here, I suspect there will be several others too) is the right way to go.",
      "commit_id" : "7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-17T16:24:36Z",
      "diff_hunk" : "@@ -26,7 +27,7 @@ class CSipHasher\n      */\n     CSipHasher& Write(uint64_t data);\n     /** Hash arbitrary bytes. */\n-    CSipHasher& Write(const unsigned char* data, size_t size);\n+    CSipHasher& Write(Span<const unsigned char> data);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#discussion_r1265607620",
      "id" : 1265607620,
      "in_reply_to_id" : 1264993873,
      "line" : 30,
      "node_id" : "PRRC_kwDOABII585Lb6PE",
      "original_commit_id" : "f4b0b0bd5be11f0db3bb31104d1ed72c396ba2e7",
      "original_line" : 30,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/crypto/siphash.h",
      "position" : 13,
      "pull_request_review_id" : 1533180550,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28085",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265607620/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T16:24:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265607620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-17T16:56:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1638520565",
      "id" : 1638520565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28085",
      "node_id" : "IC_kwDOABII585hqdb1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1638520565/reactions"
      },
      "updated_at" : "2023-07-17T16:56:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1638520565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "lgtm ACK 7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-18T08:21:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1639745003",
      "id" : 1639745003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28085",
      "node_id" : "IC_kwDOABII585hvIXr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1639745003/reactions"
      },
      "updated_at" : "2023-07-18T08:21:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1639745003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 7d92b1430a6fd42c4438810640576830d0ff8d13",
      "created_at" : "2023-07-19T20:19:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28085#issuecomment-1642698705",
      "id" : 1642698705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28085",
      "node_id" : "IC_kwDOABII585h6ZfR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642698705/reactions"
      },
      "updated_at" : "2023-07-19T20:19:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642698705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
