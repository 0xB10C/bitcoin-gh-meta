[
   {
      "author_association" : "MEMBER",
      "body" : "To reproduce without tests:\r\n\r\n```\r\n# valgrind --gen-suppressions=all --quiet --error-exitcode=1 --suppressions=$PWD/contrib/valgrind.supp --exit-on-first-error=yes ./src/bitcoind -regtest -noconnect -addnode=some.node  -printtoconsole=0\r\n==47801== Thread 25 b-addcon:\r\n==47801== Syscall param ppoll(ufds.events) points to uninitialised byte(s)\r\n==47801==    at 0x405DCCC: ??? (in /lib/ld-musl-aarch64.so.1)\r\n==47801==  Address 0x823b724 is on thread 25's stack\r\n==47801== \r\n{\r\n   <insert_a_suppression_name_here>\r\n   Memcheck:Param\r\n   ppoll(ufds.events)\r\n   obj:/lib/ld-musl-aarch64.so.1\r\n}\r\n==47801== \r\n==47801== Exit program on first error (--exit-on-first-error=yes)\r\n",
      "created_at" : "2023-07-12T15:42:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28072#issuecomment-1632778239",
      "id" : 1632778239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28072",
      "node_id" : "IC_kwDOABII585hUjf_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632778239/reactions"
      },
      "updated_at" : "2023-07-12T15:42:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632778239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe someone can transform this into a standalone minimal cpp file to submit to valgrind or musl?",
      "created_at" : "2023-07-12T15:46:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28072#issuecomment-1632784452",
      "id" : 1632784452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28072",
      "node_id" : "IC_kwDOABII585hUlBE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632784452/reactions"
      },
      "updated_at" : "2023-07-12T15:46:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632784452",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Done:\r\n\r\n```\r\n/bitcoin-core # cat /tmp/a.cpp \r\n#include <sys/types.h>\r\n#include <sys/socket.h>\r\n#include <netdb.h>\r\n\r\nint main(){\r\n    addrinfo ai_hint{};\r\n    ai_hint.ai_socktype = SOCK_STREAM;\r\n    ai_hint.ai_protocol = IPPROTO_TCP;\r\n    ai_hint.ai_family = AF_UNSPEC;\r\n    ai_hint.ai_flags = true? AI_ADDRCONFIG : AI_NUMERICHOST;\r\n    addrinfo* ai_res{nullptr};\r\n    return getaddrinfo(\"foo.bar\", nullptr, &ai_hint, &ai_res);\r\n}\r\n/bitcoin-core # clang++  /tmp/a.cpp -o /tmp/exe && valgrind --gen-suppressions=all --quiet /tmp/exe \r\n==77232== Syscall param ppoll(ufds.events) points to uninitialised byte(s)\r\n==77232==    at 0x405DCCC: ??? (in /lib/ld-musl-aarch64.so.1)\r\n==77232==  Address 0x1ffefff804 is on thread 1's stack\r\n==77232== \r\n{\r\n   <insert_a_suppression_name_here>\r\n   Memcheck:Param\r\n   ppoll(ufds.events)\r\n   obj:/lib/ld-musl-aarch64.so.1\r\n}\r\n",
      "created_at" : "2023-07-12T16:21:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28072#issuecomment-1632844998",
      "id" : 1632844998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28072",
      "node_id" : "IC_kwDOABII585hUzzG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632844998/reactions"
      },
      "updated_at" : "2023-07-12T16:21:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1632844998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Opened a bug report with Valgrind: https://bugs.kde.org/show_bug.cgi?id=472219",
      "created_at" : "2023-07-13T13:20:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/28072#issuecomment-1634233433",
      "id" : 1634233433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28072",
      "node_id" : "IC_kwDOABII585haGxZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1634233433/reactions"
      },
      "updated_at" : "2023-07-13T13:20:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1634233433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
