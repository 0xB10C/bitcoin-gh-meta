[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27581](https://github.com/bitcoin/bitcoin/pull/27581) (net: Continuous ASMap health check by fjahr)\n* [#27509](https://github.com/bitcoin/bitcoin/pull/27509) (Relay own transactions only via short-lived Tor or I2P connections by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-14T17:27:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1636164999",
      "id" : 1636164999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28078",
      "node_id" : "IC_kwDOABII585hheWH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1636164999/reactions"
      },
      "updated_at" : "2023-07-15T02:37:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1636164999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265725273"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265725273"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: not sure this is an improvement? I find the existing format easier to read, with less LoC change.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T18:01:59Z",
      "diff_hunk" : "@@ -2915,10 +2911,8 @@ uint64_t CConnman::CalculateKeyedNetGroup(const CAddress& address) const\n     return GetDeterministicRandomizer(RANDOMIZER_ID_NETGROUP).Write(vchNetGroup.data(), vchNetGroup.size()).Finalize();\n }\n \n-void CaptureMessageToFile(const CAddress& addr,\n-                          const std::string& msg_type,\n-                          Span<const unsigned char> data,\n-                          bool is_incoming)\n+// Dump binary message to file, with timestamp.\n+static void CaptureMessageToFile(const CAddress& addr, const std::string& msg_type, Span<const unsigned char> data, bool is_incoming)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265725273",
      "id" : 1265725273,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LcW9Z",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 2915,
      "original_position" : 96,
      "original_start_line" : 2914,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533381378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265725273/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T18:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265725273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265733802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265733802"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this can be simplified further?\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex 0d6b4f04a..c6c4c9a3e 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -149,7 +149,7 @@ uint16_t GetListenPort()\r\n [[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\r\n {\r\n     if (!fListen) return std::nullopt;\r\n-    CService addr;\r\n+    std::optional<CService> addr;\r\n     int nBestScore = -1;\r\n     int nBestReachability = -1;\r\n     {\r\n@@ -167,13 +167,12 @@ uint16_t GetListenPort()\r\n             int nReachability = entry.first.GetReachabilityFrom(peer.addr);\r\n             if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\r\n             {\r\n-                addr = CService(entry.first, entry.second.nPort);\r\n+                addr.emplace(CService(entry.first, entry.second.nPort));\r\n                 nBestReachability = nReachability;\r\n                 nBestScore = nScore;\r\n             }\r\n         }\r\n     }\r\n-    if (nBestScore == -1) return std::nullopt;\r\n     return addr;\r\n }\r\n \r\n```",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T18:09:43Z",
      "diff_hunk" : "@@ -177,7 +173,8 @@ bool GetLocal(CService& addr, const CNode& peer)\n             }\n         }\n     }\n-    return nBestScore >= 0;\n+    if (nBestScore == -1) return std::nullopt;\n+    return addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265733802",
      "id" : 1265733802,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LcZCq",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 177,
      "original_position" : 35,
      "original_start_line" : 180,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533381378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265733802/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T18:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265733802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265737690"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265737690"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Entire function can be simplified to just:\r\n\r\n```cpp\r\n    return GetLocal(peer).value_or(CService{CNetAddr(), GetListenPort()});\r\n```",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T18:13:48Z",
      "diff_hunk" : "@@ -208,9 +205,8 @@ static std::vector<CAddress> ConvertSeeds(const std::vector<uint8_t> &vSeedsIn)\n // one by discovery.\n CService GetLocalAddress(const CNode& peer)\n {\n-    CService addr;\n-    if (GetLocal(addr, peer)) {\n-        return addr;\n+    if (std::optional<CService> addr = GetLocal(peer)) {\n+        return addr.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265737690",
      "id" : 1265737690,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LcZ_a",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 209,
      "original_position" : 47,
      "original_start_line" : 208,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533381378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265737690/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T18:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265737690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265746027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265746027"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't see the benefit of this helper function. It doesn't really make things more readable imo (the underlying calls are short and clear enough for me). It also feels quite arbitrary: what about `IsTorOrCJDNS()`, `IsI2POrCJDNS()`, ...? ",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T18:21:48Z",
      "diff_hunk" : "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265746027",
      "id" : 1265746027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LccBr",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 169,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 1533381378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265746027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T18:23:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265746027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859575"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859575"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Very nice, done.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T20:22:36Z",
      "diff_hunk" : "@@ -177,7 +173,8 @@ bool GetLocal(CService& addr, const CNode& peer)\n             }\n         }\n     }\n-    return nBestScore >= 0;\n+    if (nBestScore == -1) return std::nullopt;\n+    return addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859575",
      "id" : 1265859575,
      "in_reply_to_id" : 1265733802,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lc3v3",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 177,
      "original_position" : 35,
      "original_start_line" : 180,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533614518,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859575/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T20:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859783"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Much better, thank you!",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T20:22:50Z",
      "diff_hunk" : "@@ -208,9 +205,8 @@ static std::vector<CAddress> ConvertSeeds(const std::vector<uint8_t> &vSeedsIn)\n // one by discovery.\n CService GetLocalAddress(const CNode& peer)\n {\n-    CService addr;\n-    if (GetLocal(addr, peer)) {\n-        return addr;\n+    if (std::optional<CService> addr = GetLocal(peer)) {\n+        return addr.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859783",
      "id" : 1265859783,
      "in_reply_to_id" : 1265737690,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lc3zH",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 209,
      "original_position" : 47,
      "original_start_line" : 208,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533615028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859783/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T20:22:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265860411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265860411"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I made the declaration on one line for the smaller diff, and I don't mind reading the parameter list left-to-right. But sure, kept it multi-line.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T20:23:38Z",
      "diff_hunk" : "@@ -2915,10 +2911,8 @@ uint64_t CConnman::CalculateKeyedNetGroup(const CAddress& address) const\n     return GetDeterministicRandomizer(RANDOMIZER_ID_NETGROUP).Write(vchNetGroup.data(), vchNetGroup.size()).Finalize();\n }\n \n-void CaptureMessageToFile(const CAddress& addr,\n-                          const std::string& msg_type,\n-                          Span<const unsigned char> data,\n-                          bool is_incoming)\n+// Dump binary message to file, with timestamp.\n+static void CaptureMessageToFile(const CAddress& addr, const std::string& msg_type, Span<const unsigned char> data, bool is_incoming)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265860411",
      "id" : 1265860411,
      "in_reply_to_id" : 1265725273,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lc387",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 2915,
      "original_position" : 96,
      "original_start_line" : 2914,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 1533616698,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265860411/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-17T20:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265860411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265869787"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265869787"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Dropped the commit and instead added an `IsPrivacyNet()` helper for `GetLocal()` only, where it cleans things up. When we'll likely need to add `IsCJDNS()` to it later on (when there are more nodes running it), it will be simple to do and will keep `GetLocal()` easy to read.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-17T20:31:56Z",
      "diff_hunk" : "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265869787",
      "id" : 1265869787,
      "in_reply_to_id" : 1265746027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lc6Pb",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 169,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 1533640753,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265869787/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-17T20:32:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265869787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266580999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266580999"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: would not include the ~classname in method name\r\n\r\n```suggestion\r\n    [[nodiscard]] bool HasCJDNSPrefix() const { return m_addr[0] == 0xfc; }\r\n```",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-18T10:32:44Z",
      "diff_hunk" : "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266580999",
      "id" : 1266580999,
      "line" : 170,
      "node_id" : "PRRC_kwDOABII585Lfn4H",
      "original_commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "original_line" : 170,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : 10,
      "pull_request_review_id" : 1534736352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266580999/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T11:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266580999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266584113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266584113"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: is \"TODO\" easier (i.e. more likely someone does it) to grep than \"Note:\"? Also, I think these last 2 lines are better placed near the definition of `IsPrivacyNet()`.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-18T10:35:47Z",
      "diff_hunk" : "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266584113",
      "id" : 1266584113,
      "line" : 161,
      "node_id" : "PRRC_kwDOABII585Lfoox",
      "original_commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "original_line" : 161,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 28,
      "pull_request_review_id" : 1534736352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266584113/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T11:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266584113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266591147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266591147"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As we're now touching all these LoC, would suggest to clean up even further. Slightly increases the diff but worth it for readability imo.\r\n\r\n<details>\r\n<summary>git diff on 5d7188ed92908237ce51bbe6ed0a97472825c6b8</summary>\r\n\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex eee179c8a..b35725ea2 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -154,21 +154,21 @@ uint16_t GetListenPort()\r\n     int nBestReachability = -1;\r\n     {\r\n         LOCK(g_maplocalhost_mutex);\r\n-        for (const auto& entry : mapLocalHost)\r\n+        for (const auto& [local_addr, service_info] : mapLocalHost)\r\n         {\r\n             // For privacy reasons, don't advertise our privacy-network address to other\r\n             // networks, and don't advertise our other-network address to privacy networks.\r\n             // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\r\n             // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\r\n-            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()\r\n-                && (entry.first.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {\r\n+            if (local_addr.GetNetwork() != peer.ConnectedThroughNetwork()\r\n+                && (local_addr.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {\r\n                 continue;\r\n             }\r\n-            int nScore = entry.second.nScore;\r\n-            int nReachability = entry.first.GetReachabilityFrom(peer.addr);\r\n+            int nScore{service_info.nScore};\r\n+            int nReachability{local_addr.GetReachabilityFrom(peer.addr)};\r\n             if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\r\n             {\r\n-                addr.emplace(CService{entry.first, entry.second.nPort});\r\n+                addr.emplace(CService{local_addr, service_info.nPort});\r\n                 nBestReachability = nReachability;\r\n                 nBestScore = nScore;\r\n             }\r\n\r\n```\r\n</details>\r\n\r\n",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-18T10:42:56Z",
      "diff_hunk" : "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\n+            // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\n+            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266591147",
      "id" : 1266591147,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII585LfqWr",
      "original_commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "original_line" : 163,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 30,
      "pull_request_review_id" : 1534736352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266591147/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T11:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266591147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266596572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266596572"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah I think that's a good approach.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-18T10:48:44Z",
      "diff_hunk" : "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266596572",
      "id" : 1266596572,
      "in_reply_to_id" : 1265746027,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Lfrrc",
      "original_commit_id" : "b252918caa4475528225477026ac95c6edf817c2",
      "original_line" : 169,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/netaddress.h",
      "position" : null,
      "pull_request_review_id" : 1534736352,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266596572/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-18T11:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266596572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266621620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266621620"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe let's not move all these lines? A bit unnecessary churn, is fine as is imo.",
      "commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "created_at" : "2023-07-18T11:14:06Z",
      "diff_hunk" : "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266621620",
      "id" : 1266621620,
      "line" : 170,
      "node_id" : "PRRC_kwDOABII585Lfxy0",
      "original_commit_id" : "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "original_line" : 170,
      "original_position" : 10,
      "original_start_line" : 164,
      "path" : "src/netaddress.h",
      "position" : 10,
      "pull_request_review_id" : 1534800401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266621620/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 164,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-18T11:14:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266621620",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   }
]
