{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "In src/checkqueue.h, the destructor of CCheckQueueControl will call Wait, which may throw a condition_error exception in 'void condition_variable::wait(unique_lock<mutex>& m)'. This will cause a crash, Is it intended? If not, the exception from Wait can be caught as follows to avoid the crash.\r\n\r\nif (!fDone)\r\n  Wait();\r\nif (pqueue != nullptr) {\r\n  LEAVE_CRITICAL_SECTION(pqueue->ControlMutex);\r\n}\r\n\r\n--->\r\n\r\ntry {\r\n  if (!fDone)\r\n    Wait();\r\n  if (pqueue != nullptr) {\r\n    LEAVE_CRITICAL_SECTION(pqueue->ControlMutex);\r\n  }\r\n} catch (const condition_error& e) {\r\n  // log...\r\n}\r\n\r\n\r\nI notice LEAVE_CRITICAL_Section which is also in the destructor of CCheckQueueControl will lead to a crash in the debug version, but not in the release version. Is it intended to cause the program to crash in the debug version, while the release version does not? If so, the modification above will not work.\r\n\r\nVersion: Bitcoin Core 25.0 Linux",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033/comments",
   "created_at" : "2023-07-06T07:57:42Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/28033",
   "id" : 1791023340,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585qwNjs",
   "number" : 28033,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033/timeline",
   "title" : "The destructor of CCheckQueueControl may throw a exception ",
   "updated_at" : "2023-07-06T07:57:42Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28033",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/64761951?v=4",
      "events_url" : "https://api.github.com/users/megumin9/events{/privacy}",
      "followers_url" : "https://api.github.com/users/megumin9/followers",
      "following_url" : "https://api.github.com/users/megumin9/following{/other_user}",
      "gists_url" : "https://api.github.com/users/megumin9/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/megumin9",
      "id" : 64761951,
      "login" : "megumin9",
      "node_id" : "MDQ6VXNlcjY0NzYxOTUx",
      "organizations_url" : "https://api.github.com/users/megumin9/orgs",
      "received_events_url" : "https://api.github.com/users/megumin9/received_events",
      "repos_url" : "https://api.github.com/users/megumin9/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/megumin9/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/megumin9/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/megumin9"
   }
}
