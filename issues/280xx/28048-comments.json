[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theuni](https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1625907483), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1626127733), [hebasto](https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1626275707), [stickies-v](https://github.com/bitcoin/bitcoin/pull/28048#pullrequestreview-1521747346) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28052](https://github.com/bitcoin/bitcoin/pull/28052) (blockstorage: XOR blocksdir *.dat files by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-07-07T17:03:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1625697201",
      "id" : 1625697201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g5iux",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625697201/reactions"
      },
      "updated_at" : "2023-07-10T20:18:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625697201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 828af9ad19a702e711963f9b498f7462bde8aabb -> c2bcc339d7b8def58289d3ff01b2a905dc291ed6 ([`pr/stopafter.1`](https://github.com/ryanofsky/bitcoin/commits/pr/stopafter.1) -> [`pr/stopafter.2`](https://github.com/ryanofsky/bitcoin/commits/pr/stopafter.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/stopafter.1..pr/stopafter.2)) just updating comments and adding release note about `-stopatheight` behavior",
      "created_at" : "2023-07-07T18:07:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1625782988",
      "id" : 1625782988,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g53rM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625782988/reactions"
      },
      "updated_at" : "2023-07-07T18:07:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625782988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very nice. Concept ACK and quick (very shallow) codereview ACK.\r\n\r\nI think the `-stopatheight` change is reasonable. If it turns out anyone/anything was relying on the way this worked before, we could always add functionality for that use-case (maybe `-stopatblock`?)\r\n\r\nHowever, the help string should be updated from:\r\n\r\n> Stop running after reaching the given height in the main chain\r\n\r\nIt sounds like it's not completely accurate now, and less so after this change :)",
      "created_at" : "2023-07-07T19:01:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1625907483",
      "id" : 1625907483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g6WEb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625907483/reactions"
      },
      "updated_at" : "2023-07-07T19:01:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1625907483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1256350258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256350258"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is it possible for this to be called twice?\r\n```c++\r\nif (m_stop_at_height) {\r\n  if (index.nHeight > m_stop_at_height) {\r\n    // assert(false) or return kernel::Interrupted{} ?\r\n  } else if (index.nHeight == m_stop_at_height) {\r\n  ..\r\n  }\r\n}\r\n```\r\n\r\nNot that I imagine calling `StartShutdown()` twice would be particularly harmful anyway.",
      "commit_id" : "c2bcc339d7b8def58289d3ff01b2a905dc291ed6",
      "created_at" : "2023-07-07T19:24:18Z",
      "diff_hunk" : "@@ -57,9 +58,23 @@ static void DoWarning(const bilingual_str& warning)\n \n namespace node {\n \n-void KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n+kernel::InterruptResult KernelNotifications::blocksImported()\n+{\n+    if (m_stop_after_block_import) {\n+        StartShutdown();\n+        return kernel::Interrupted{};\n+    }\n+    return {};\n+}\n+\n+kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n {\n     uiInterface.NotifyBlockTip(state, &index);\n+    if (m_stop_at_height && index.nHeight >= m_stop_at_height) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1256350258",
      "id" : 1256350258,
      "line" : 73,
      "node_id" : "PRRC_kwDOABII585K4mIy",
      "original_commit_id" : "c2bcc339d7b8def58289d3ff01b2a905dc291ed6",
      "original_line" : 73,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.cpp",
      "position" : 25,
      "pull_request_review_id" : 1519644020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256350258/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-07T19:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256350258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1256406548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256406548"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1256350258\r\n\r\nI don't think StartShutdown() can be called twice, but it should be ok if that did happen, like you say.\r\n\r\nChecking `index.nHeight > m_stop_at_height` wouldn't be a good way to detect two shutdown calls, though, because that condition can also happen if they the node is restarted with a lower `-stopatheight` value (because the implementation only stops when new blocks are added, and doesn't make any attempt to rewind)",
      "commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "created_at" : "2023-07-07T20:09:08Z",
      "diff_hunk" : "@@ -57,9 +58,23 @@ static void DoWarning(const bilingual_str& warning)\n \n namespace node {\n \n-void KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n+kernel::InterruptResult KernelNotifications::blocksImported()\n+{\n+    if (m_stop_after_block_import) {\n+        StartShutdown();\n+        return kernel::Interrupted{};\n+    }\n+    return {};\n+}\n+\n+kernel::InterruptResult KernelNotifications::blockTip(SynchronizationState state, CBlockIndex& index)\n {\n     uiInterface.NotifyBlockTip(state, &index);\n+    if (m_stop_at_height && index.nHeight >= m_stop_at_height) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1256406548",
      "id" : 1256406548,
      "in_reply_to_id" : 1256350258,
      "line" : 73,
      "node_id" : "PRRC_kwDOABII585K4z4U",
      "original_commit_id" : "c2bcc339d7b8def58289d3ff01b2a905dc291ed6",
      "original_line" : 73,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "src/node/kernel_notifications.cpp",
      "position" : 25,
      "pull_request_review_id" : 1519716758,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256406548/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-07T21:48:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1256406548",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Strong Concept ACK :)\r\n\r\nI'm glad you changed your mind on returning things from the notifications, putting the infrastructure in place to allow the code to now bubble a `-stopatheight` interrupt is a clear advantage to me.\r\n\r\nI was about to open a similar PR, albeit with a different approach for handling `-stopafterblockimport` ([patch](https://github.com/TheCharlatan/bitcoin/commit/1107a234838d7a3999dbf236c8a7e4e00d48f289)). Instead of creating a new notification for it, I thought slightly refactoring the function to instead return when the block import is done and then allow the user of the kernel (in this case the init code) to decide what to do is easier to reason with. This has the added benefit that users of the kernel can now just call `BlockImport` without having to rely on options and notification handlers to skip loading the mempool. Can you comment on this approach?\r\n\r\n",
      "created_at" : "2023-07-07T21:12:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1626127733",
      "id" : 1626127733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g7L11",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626127733/reactions"
      },
      "updated_at" : "2023-07-07T21:13:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626127733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-07-07T22:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1626275707",
      "id" : 1626275707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g7v97",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626275707/reactions"
      },
      "updated_at" : "2023-07-07T22:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1626275707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Re https://github.com/bitcoin/bitcoin/pull/28048#pullrequestreview-1520042712\r\n> Maybe the simplest path to not conflict much could be to provide ThreadImport with a \"return_after_import\" bool arg (true when -stopafterblockimport is set)\r\n\r\nThanks @furszy, opened https://github.com/bitcoin/bitcoin/pull/28053.",
      "created_at" : "2023-07-08T11:24:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1627142023",
      "id" : 1627142023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585g_DeH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627142023/reactions"
      },
      "updated_at" : "2023-07-08T11:24:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1627142023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258032967"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258032967"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n//! Result type for use with std::variant to indicate that an operation should be interrupted.\r\n```",
      "commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "created_at" : "2023-07-10T10:17:40Z",
      "diff_hunk" : "@@ -9,12 +9,25 @@\n \n #include <cstdint>\n #include <string>\n+#include <variant>\n \n class CBlockIndex;\n enum class SynchronizationState;\n \n namespace kernel {\n \n+//! Result type for use with std::variant to indiciate that an operation should be interrupted.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258032967",
      "id" : 1258032967,
      "line" : 19,
      "node_id" : "PRRC_kwDOABII585K_A9H",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 19,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : 11,
      "pull_request_review_id" : 1521747346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258032967/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258032967",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258586027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258586027"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: would `SetNotificationArgs` be a better name to clarify the side effects this function has?",
      "commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "created_at" : "2023-07-10T16:45:24Z",
      "diff_hunk" : "@@ -1409,6 +1410,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     // ********************************************************* Step 7: load block chain\n \n     node.notifications = std::make_unique<KernelNotifications>(node.exit_status);\n+    ReadNotificationArgs(args, *node.notifications);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258586027",
      "id" : 1258586027,
      "line" : 1413,
      "node_id" : "PRRC_kwDOABII585LBH-r",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 1413,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 1521747346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258586027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258586027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258600239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258600239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't see in which scenario `blockTip()` would return `kernel::Interrupted` here, but the docs seem to indicate that it could. I'd suggest to either update the docs to reflect that we never expect this to interrupt, or add a logging statement similar to what's done in `ThreadImport`?",
      "commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "created_at" : "2023-07-10T16:58:33Z",
      "diff_hunk" : "@@ -3369,7 +3372,10 @@ bool Chainstate::InvalidateBlock(BlockValidationState& state, CBlockIndex* pinde\n \n     // Only notify about a new block tip if the active chain was modified.\n     if (pindex_was_in_chain) {\n-        m_chainman.GetNotifications().blockTip(GetSynchronizationState(IsInitialBlockDownload()), *to_mark_failed->pprev);\n+        // Ignoring return value for now, this could be changed to bubble up\n+        // kernel::Interrupted value to the caller so the caller could\n+        // distinguish between completed and interrupted operations.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258600239",
      "id" : 1258600239,
      "line" : 3377,
      "node_id" : "PRRC_kwDOABII585LBLcv",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 3377,
      "original_position" : 36,
      "original_start_line" : 3375,
      "path" : "src/validation.cpp",
      "position" : 36,
      "pull_request_review_id" : 1521747346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258600239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 3375,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-10T17:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258600239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258979021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979021"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258586027\r\n\r\n> nit: would `SetNotificationArgs` be a better name to clarify the side effects this function has?\r\n\r\nIt seems like if you just saw a `ReadNotificationArgs(args, *node.notifications)` call with no context you would assume that it is reading args from the \"args\" variable into the \"notifications\" variable. Is there another way it could be interpreted?\r\n\r\n`node::ReadNotificationArgs` function name is meant to be consistent with `node::ReadDatabaseArgs`, `node::ReadCoinsViewArgs`, and `wallet::ReadDatabaseArgs` functions. The \"args\" that are being referred to are command line arguments and other `ArgsManager` settings that come from the OS and filesystem. So it seems more accurate to me to say that the args are read or parsed or interpreted here, not set here.",
      "commit_id" : "3e6b6877645f978b4999efdfb9e616f4dbf9dd19",
      "created_at" : "2023-07-10T22:40:16Z",
      "diff_hunk" : "@@ -1409,6 +1410,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     // ********************************************************* Step 7: load block chain\n \n     node.notifications = std::make_unique<KernelNotifications>(node.exit_status);\n+    ReadNotificationArgs(args, *node.notifications);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258979021",
      "id" : 1258979021,
      "in_reply_to_id" : 1258586027,
      "line" : 1413,
      "node_id" : "PRRC_kwDOABII585LCn7N",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 1413,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 1523139721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979021/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:04:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258979349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979349"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258032967\r\n\r\n> nit\r\n\r\nThanks, fixed",
      "commit_id" : "3e6b6877645f978b4999efdfb9e616f4dbf9dd19",
      "created_at" : "2023-07-10T22:40:53Z",
      "diff_hunk" : "@@ -9,12 +9,25 @@\n \n #include <cstdint>\n #include <string>\n+#include <variant>\n \n class CBlockIndex;\n enum class SynchronizationState;\n \n namespace kernel {\n \n+//! Result type for use with std::variant to indiciate that an operation should be interrupted.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258979349",
      "id" : 1258979349,
      "in_reply_to_id" : 1258032967,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585LCoAV",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 19,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/kernel/notifications_interface.h",
      "position" : null,
      "pull_request_review_id" : 1523139721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979349/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:04:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1258979349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259001998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259001998"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1258600239\r\n\r\n> I don't see in which scenario `blockTip()` would return `kernel::Interrupted` here, but the docs seem to indicate that it could. I'd suggest to either update the docs to reflect that we never expect this to interrupt, or add a logging statement similar to what's done in `ThreadImport`?\r\n\r\nI'm happy to update the comment, but it would help to have a specific suggestion, because to me this is only saying that a kernel::Interrupted value might be returned here (as a fact of the `[[nodiscard]] virtual InterruptResult blockTip` return type). I don't think there's a suggestion here that bitcoind will return `kernel::Interrupted{}` . But other libbitcoinkernel applications or tests might could handle the `blockTip` notification in the future and return an interrupted value, and that case could be handled here.",
      "commit_id" : "3e6b6877645f978b4999efdfb9e616f4dbf9dd19",
      "created_at" : "2023-07-10T23:23:31Z",
      "diff_hunk" : "@@ -3369,7 +3372,10 @@ bool Chainstate::InvalidateBlock(BlockValidationState& state, CBlockIndex* pinde\n \n     // Only notify about a new block tip if the active chain was modified.\n     if (pindex_was_in_chain) {\n-        m_chainman.GetNotifications().blockTip(GetSynchronizationState(IsInitialBlockDownload()), *to_mark_failed->pprev);\n+        // Ignoring return value for now, this could be changed to bubble up\n+        // kernel::Interrupted value to the caller so the caller could\n+        // distinguish between completed and interrupted operations.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259001998",
      "id" : 1259001998,
      "in_reply_to_id" : 1258600239,
      "line" : 3377,
      "node_id" : "PRRC_kwDOABII585LCtiO",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 3377,
      "original_position" : 36,
      "original_start_line" : 3375,
      "path" : "src/validation.cpp",
      "position" : 36,
      "pull_request_review_id" : 1523139721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259001998/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 3375,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-11T00:04:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259001998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259566308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259566308"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think I was confusing the kernel/node boundaries a bit. You're right that here in the kernel logic that is `validation.cpp`, the documentation and behaviour are what we'd expect.\r\n\r\nMy concern was around the _node_ implementation of `blockTip()` now potentially calling `StartShutdown()` and returning a `kernel:Interrupted` without leaving any trace. It's not something we'd expect to happen in `InvalidateBlock()` (and it would be behaviour change). I think I was wrong in suggesting we catch/log/document that here in `validation.cpp` though, as it's node specific behaviour.\r\n\r\nPerhaps it would be beneficial to move [this logging](https://github.com/bitcoin/bitcoin/commit/09938a41d904c05b4676b064da9baa85e53e3e6f#diff-114c2880ec1ff2c5293ac65ceda0637bf92c05745b74b58410585a549464a33fR937) to `KernelNotifications::blocksImported()` and add a similar logging statement in `KernelNotifications::blockTip`?\r\n\r\n...\r\n_Although having typed all of this out... Is `InvalidateBlock()` even meant to be/stay in kernel?_",
      "commit_id" : "3e6b6877645f978b4999efdfb9e616f4dbf9dd19",
      "created_at" : "2023-07-11T10:55:19Z",
      "diff_hunk" : "@@ -3369,7 +3372,10 @@ bool Chainstate::InvalidateBlock(BlockValidationState& state, CBlockIndex* pinde\n \n     // Only notify about a new block tip if the active chain was modified.\n     if (pindex_was_in_chain) {\n-        m_chainman.GetNotifications().blockTip(GetSynchronizationState(IsInitialBlockDownload()), *to_mark_failed->pprev);\n+        // Ignoring return value for now, this could be changed to bubble up\n+        // kernel::Interrupted value to the caller so the caller could\n+        // distinguish between completed and interrupted operations.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259566308",
      "id" : 1259566308,
      "in_reply_to_id" : 1258600239,
      "line" : 3377,
      "node_id" : "PRRC_kwDOABII585LE3Tk",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 3377,
      "original_position" : 36,
      "original_start_line" : 3375,
      "path" : "src/validation.cpp",
      "position" : 36,
      "pull_request_review_id" : 1523997477,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259566308/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 3375,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-07-11T10:55:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259566308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259573661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259573661"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You make a lot of good points, and I think I agree with all of them. Thank you.",
      "commit_id" : "3e6b6877645f978b4999efdfb9e616f4dbf9dd19",
      "created_at" : "2023-07-11T11:01:53Z",
      "diff_hunk" : "@@ -1409,6 +1410,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     // ********************************************************* Step 7: load block chain\n \n     node.notifications = std::make_unique<KernelNotifications>(node.exit_status);\n+    ReadNotificationArgs(args, *node.notifications);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#discussion_r1259573661",
      "id" : 1259573661,
      "in_reply_to_id" : 1258586027,
      "line" : 1413,
      "node_id" : "PRRC_kwDOABII585LE5Gd",
      "original_commit_id" : "09938a41d904c05b4676b064da9baa85e53e3e6f",
      "original_line" : 1413,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 1524009154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28048",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259573661/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-07-11T11:01:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1259573661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-07-11T14:32:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28048#issuecomment-1630945079",
      "id" : 1630945079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28048",
      "node_id" : "IC_kwDOABII585hNj83",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630945079/reactions"
      },
      "updated_at" : "2023-07-11T14:32:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630945079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
