[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13339#discussion_r191464672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13339"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191464672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As the wallet name can contain any character, we need shell-escaping here.\r\n",
      "commit_id" : "4fa29f8402a25975a193085eadd97d633293979a",
      "created_at" : "2018-05-29T15:15:06Z",
      "diff_hunk" : "@@ -988,6 +988,7 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n     if (!strCmd.empty())\n     {\n         boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+        boost::replace_all(strCmd, \"%w\", GetName());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#discussion_r191464672",
      "id" : 191464672,
      "original_commit_id" : "608562276e25c5eb35a8b427ee622dbf41c00cd1",
      "original_position" : 4,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 124040865,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13339",
      "updated_at" : "2018-05-29T16:09:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191464672",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj see 4fa29f8, what would be the solution in that case? only escape `'`? IIUC there is no function to do that as it depends on the shell.",
      "created_at" : "2018-05-29T16:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392835751",
      "id" : 392835751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T16:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392835751",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK - seems like a nice consideration",
      "created_at" : "2018-05-29T16:27:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392841050",
      "id" : 392841050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T16:27:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392841050",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj see 4fa29f8, what would be the solution in that case? only escape '? IIUC there is no function to do that as it depends on the shell.\r\n\r\nThe best way would be to use an invocation (use one of the `exec*` functions) that passes arguments without involving the shell. That's quite a big change, though, and existing usages of the arguments might assume a shell is involved.\r\n\r\nLacking that, you can escape for bash and most other shells by surrounding with `'` and replacing single-quotes with `'\"'\"'`.\r\n\r\nIt's extremely important to be careful about this, I have seen terrible things happen due to unproperly escaped shell input, and I will NACK this unless this is addressed.\r\n",
      "created_at" : "2018-05-29T17:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392862031",
      "id" : 392862031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T17:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392862031",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj `exec*` yes that would be breaking change. Agree on the NACK reasons. I think I'll go with https://unix.stackexchange.com/a/30936. I'll change the test to cover more cases.",
      "created_at" : "2018-05-29T17:29:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392866769",
      "id" : 392866769,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T17:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392866769",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj exec* yes that would be breaking change. Agree on the NACK reasons. I think I'll go with https://unix.stackexchange.com/a/30936. I'll change the test to cover more cases.\r\n\r\nAgree. Right - things to test would be `$VAR` and `${VAR}` in the name, `$(command)` as well as various quote characters.",
      "created_at" : "2018-05-29T17:52:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392874007",
      "id" : 392874007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T17:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392874007",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Agree. Right - things to test would be `$VAR` and `${VAR}` in the name, `$(command)` as well as various quote characters.\r\n\r\nI don't understand what you mean. You suggest the wallet name can have `$VAR`?",
      "created_at" : "2018-05-29T20:13:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-392928027",
      "id" : 392928027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-29T20:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392928027",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">I don't understand what you mean. You suggest the wallet name can have $VAR?\r\n\r\nYes, those sequences could be part of the wallet name. They are the typical ways to fool shell escaping and do arbitrary command execution, so I suggested them for testing whether shell escaping is working as expected.",
      "created_at" : "2018-05-30T01:33:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-393001712",
      "id" : 393001712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-30T01:33:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393001712",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure if we want to further extend walletnotify.\r\nA more future-proof way is probably the recently created RPC approach https://github.com/bitcoin/bitcoin/pull/13262.\r\nIt would still be possible to ship a little python script that emulates the walletnotify \"API\".",
      "created_at" : "2018-05-30T08:37:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-393078700",
      "id" : 393078700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-30T08:37:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393078700",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO we should consider adding this to fully support multi wallets without taking into account #13262. For existing systems that are based on `-walletnotify` changing to `listsincetx` would be more problematic. Beside that, currently `listsincetx` requires a connection for each wallet. I do consider `listsincetx` better than `-walletnotify` though.",
      "created_at" : "2018-05-30T09:04:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-393087067",
      "id" : 393087067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-30T09:04:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393087067",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it's fine to add this to walletnotify, too. Agree that another notification system would be better, but this is useful to users in the short term. It's is a small change to the code.",
      "created_at" : "2018-05-30T10:06:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13339#issuecomment-393105608",
      "id" : 393105608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13339",
      "updated_at" : "2018-05-30T10:10:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393105608",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
