[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146902345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Let's just drop gettimedouble() and switch this to std::chrono::steady_clock. That should eliminate the non-portable code.",
      "commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "created_at" : "2017-10-25T15:50:44Z",
      "diff_hunk" : "@@ -8,7 +8,40 @@\n #include <assert.h>\n #include <iostream>\n #include <iomanip>\n+\n+#ifndef _MSC_VER\n #include <sys/time.h>\n+#else\n+#define WIN32_LEAN_AND_MEAN\n+#include <Windows.h>\n+\n+typedef struct timeval {\n+    long tv_sec;\n+    long tv_usec;\n+} timeval;\n+\n+// Substitute function for use with Microsoft's MSVC compiler.\n+int gettimeofday(struct timeval * tp, struct timezone * tzp)\n+{\n+    // Note: some broken versions only have 8 trailing zero's, the correct epoch has 9 trailing zero's\n+    // This magic number is the number of 100 nanosecond intervals since January 1, 1601 (UTC)\n+    // until 00:00:00 January 1, 1970\n+    static const uint64_t EPOCH = ((uint64_t)116444736000000000ULL);\n+\n+    SYSTEMTIME  system_time;\n+    FILETIME    file_time;\n+    uint64_t    time;\n+\n+    GetSystemTime(&system_time);\n+    SystemTimeToFileTime(&system_time, &file_time);\n+    time = ((uint64_t)file_time.dwLowDateTime);\n+    time += ((uint64_t)file_time.dwHighDateTime) << 32;\n+\n+    tp->tv_sec = (long)((time - EPOCH) / 10000000L);\n+    tp->tv_usec = (long)(system_time.wMilliseconds * 1000);\n+    return 0;\n+}\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902345",
      "id" : 146902345,
      "original_commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "original_position" : 37,
      "path" : "src/bench/bench.cpp",
      "position" : 37,
      "pull_request_review_id" : 71914280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558",
      "updated_at" : "2017-10-25T15:50:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146902345",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146902758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think just making MAX_TRIES an int should remove the need for this?",
      "commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "created_at" : "2017-10-25T15:51:53Z",
      "diff_hunk" : "@@ -12,6 +12,14 @@\n \n #include <stdint.h>\n \n+#ifdef _MSC_VER\n+#ifdef _WIN64\n+typedef int64_t ssize_t;\n+#else\n+typedef int32_t ssize_t;\n+#endif\n+#endif\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902758",
      "id" : 146902758,
      "original_commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "original_position" : 11,
      "path" : "src/random.h",
      "position" : 11,
      "pull_request_review_id" : 71914764,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558",
      "updated_at" : "2017-10-25T15:51:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146902758",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146906331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146906331"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See the discussion here #11196 for context here. Now would be a good time to reassess.",
      "commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "created_at" : "2017-10-25T16:03:56Z",
      "diff_hunk" : "@@ -32,7 +36,7 @@ void memory_cleanse(void *ptr, size_t len)\n        might try to eliminate \"superfluous\" memsets. If there's an easy way to\n        detect memset_s, it would be better to use that. */\n #if defined(_MSC_VER)\n-    __asm;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146906331",
      "id" : 146906331,
      "original_commit_id" : "aebadac0d6ea6ebb4556d1b79e8b9b762b416237",
      "original_position" : 15,
      "path" : "src/support/cleanse.cpp",
      "position" : 15,
      "pull_request_review_id" : 71919162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11558",
      "updated_at" : "2017-10-25T16:03:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146906331",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The rest of the changes look good to me.",
      "created_at" : "2017-10-25T16:08:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-339382714",
      "id" : 339382714,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11558",
      "updated_at" : "2017-10-25T16:08:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/339382714",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
