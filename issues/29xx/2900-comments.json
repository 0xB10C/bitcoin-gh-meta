[
   {
      "body" : "The alert tests are protocol version specific; what would be best way to work around this? I'd say just set PROTOCOL_VERSION for testing, but it's a #define rather than a mutable variable.",
      "created_at" : "2013-08-15T15:32:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22710734",
      "id" : 22710734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T15:32:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22710734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "What DoS attacks? Why not post them to the security list so we can look at how to fix them (ignoring for now the fact that bitcoin is full of DoS attacks so this would not make much difference).\r\n\r\nAnyway, I think this pull request is a bad idea. I do not wish to have to support this in bitcoinj as it would complicate things significantly to have to search out nodes that properly support bloom filtering. Basically any feature in Bitcoin can be DoS attacked, that's not a good reason to just switch things off.",
      "created_at" : "2013-08-15T16:43:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22712679",
      "id" : 22712679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T16:43:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22712679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "For instance this one posted to the email list: http://www.mail-archive.com/bitcoin-development@lists.sourceforge.net/msg02490.html All of the devs, including you, are aware of a second and more serious non-public vulnerability.\r\n\r\nbitcoinj added a protocol version test to find bloom capable peers in revision 2c44a4fad7faccfe9b1392c67f60d21b25703bde; add a second test to check for the NODE_BLOOM bit. In the future DNS seeds can be updated to let you ask for peers with specific service bits set, but there's no rush as bloom filtering is left on by default for now.",
      "created_at" : "2013-08-15T17:09:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22714363",
      "id" : 22714363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T17:15:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22714363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I asked Peter to open this pull.\r\n\r\nService bitting bloom makes sense to meÃ¢ÂÂ it increases nodes control over the granularity of the services they are providing the public, should it be neededÃ¢ÂÂ I have no clue why I didn't ask for this to begin with.  The primary risk I see with this is that it will potentially result in increased levels lazy alternative node implementers not implementing the bloom server side functionality, but at the same time at least those nodes will be identifiable and avoidable (as opposed to them simply not implementing and making your connecting life hard). So I do not believe it would be useful to protocol-version-suicide-pact the bloom functionality.\r\n\r\nIf we're concerned that ignorant node operators may turn off bloom when they don't need to, we could remove the hidden switch, but I'm not especially concerned about that as bloom saves a lot of bandwidth when not being abused.\r\n\r\nSeparately, this is what litecoin has implemented since they had the benefit of later knowledge when they did their protocol update that added bloom support. So anything that supports litecoin would have the service bit testing in any case.",
      "created_at" : "2013-08-15T18:17:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22718867",
      "id" : 22718867,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T18:17:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22718867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Keep in mind that if an alternative node implementation doesn't want to put in the relatively small amount of effort to implement bloom filters, what makes you think they are going to put in the much larger amount of effort required to really get Bitcoin semantics exactly right regarding convergence? Given that SPV nodes are relatively dependent on their peers - especially if users are accepting zero-conf transactions in any way - it's reasonable to only want to connect to peers running the satoshi codebase rather than some other implementation.",
      "created_at" : "2013-08-15T18:34:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22720055",
      "id" : 22720055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T18:34:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22720055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "So the argument is that because you can ask a peer to use *less* bandwidth, that makes dos attacks *worse*?\r\n\r\nYou can't fix a denial of service by denying service. That's backwards, especially as I don't recall the last time I saw a DoS attacker who actually paid for his own bandwidth. The only way to fix it is to figure out who should be getting service and ensuring they get it first. So why don't you fix it by allowing nodes to prioritise inbound connections?",
      "created_at" : "2013-08-15T19:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22723770",
      "id" : 22723770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T19:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22723770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn As you know the DoS attacks identified are not attacks on bandwidth, but rather other resources. Those attacks are significantly easier to pull off if the attacker can reduce the amount of data the targets send back to them; bloom filters do exactly that by reducing the INV messages the attacker receives, allowing one computer to attack a very large number of nodes with very little bandwidth consumption.\r\n\r\nIt would be helpful if you responded on the email list with what types of prioritization you would consider most useful for SPV clients - @johndillon attempted to start that discussion but I haven't seen you reply. Disabling bloom filters is a form of prioritization in of itself of course, as SPV nodes do not contribute back to the network by relaying data. It is much better for them to have temporary issues connecting in an attack than for relaying in general to fail, something that could lead to a dangerous fork due to convergence failure.\r\n\r\nRegardless as @gmaxwell pointed out aside from attacks, the protocol should allow for nodes to advertise whether or not they support bloom filters as a matter of good protocol design - it is after all a service. It's telling that when I mentioned that NODE_BLOOM didn't exist, @gmaxwell was surprised.",
      "created_at" : "2013-08-15T20:42:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22728664",
      "id" : 22728664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-15T20:42:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22728664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "ACK NODE_BLOOM and ACK the entire patch, though myself, I probably wouldn't have added an option to disable bloom filters in the reference impl\r\n\r\nA minor BIP would be nice (like to document every protocol change in a BIP, even though this is terribly minor)",
      "created_at" : "2013-08-16T00:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22740077",
      "id" : 22740077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T00:15:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22740077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Good idea re: BIP.",
      "created_at" : "2013-08-16T01:29:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22742635",
      "id" : 22742635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T01:29:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22742635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Note: When you bump the protocol version it breaks the alert tests. Your options are then to either generate new signed test data every time the protocol version is bumped, or rather fix the alert tests so the protocol version does not matter.\r\n\r\nhttps://github.com/litecoin-project/litecoin/commit/dbc5f6d7f4ef7ba38157e12b6d9c52ff99aba695\r\nLitecoin chose the latter option as the alert notify codepath is still sufficiently tested without hard-coded protocol versions within signed test data.  We feel it is better to minimize the risk of exposing the alert key, and as a matter of policy it seems ideal to allow protocol bumping without the centralized approval of the alert key signer.",
      "created_at" : "2013-08-16T03:57:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22746389",
      "id" : 22746389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T04:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22746389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "I'm curious to see what @SergioDemianLerner thinks of this patch.\r\n\r\nMy concern is that if there IS a valid DoS attack on bloom-filter nodes (the \"attack\", as I understand it, is supposed to cause excessive disk seeking looking for transactions, yes?  \"meh\" -- worst case is \"node gets slow\" if it isn't running with big disk cache buffers or from an SSD), then adding a NODE_BLOOM bit will just make it easier for attackers to find them and attack them.\r\n",
      "created_at" : "2013-08-16T04:14:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22746762",
      "id" : 22746762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T04:14:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22746762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "We only have 64 service bits. It would make sense to only use them when nodes benefit from not implementing features. On the other hand, having a separate service bit means notes can support bloom filters, but *not* NODE_NETWORK...",
      "created_at" : "2013-08-16T06:18:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22749513",
      "id" : 22749513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T09:23:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22749513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "    uint64 nServices;\r\n\r\nWe've got 64 of them - I don't think we're about to run out...",
      "created_at" : "2013-08-16T08:01:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22752833",
      "id" : 22752833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T08:01:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22752833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@gavinandresen \"node gets slow\" is a potentially serious problem. \"making it easier for attackers to find them\": Serving SPV nodes is far less important to the health of the network than ensuring relaying works and consensus is maintained.\r\n\r\nNext time I'd suggest letting people finish exploring the issue before you assume revealing the exploit publicly won't do any harm.",
      "created_at" : "2013-08-16T08:09:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22753140",
      "id" : 22753140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T08:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22753140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Can we cut it out with \"revealing the exploit\" stuff? It's trivial to find DoS attacks on bitcoind. I did it for fun last time this came up and it took about 45 minutes. I was going to post about it (it's a memory bloat issue) and then got distracted with the RNG stuff.\r\n\r\nWhy would we make bloom filtering optional? There's no benefit to be had from that at this point. If somebody wants to reimplement the protocol for some reason, they can reimplement that too. No big deal. Clients that rely on it are not dramatically less important than other nodes. They're called \"end users\" and they're extremely important!\r\n\r\nYou can force nodes to do arbitrary amounts of disk seeking with or without Bloom filtering. Just ask for random blocks in the chain. Asking them to filter the blocks adds some CPU load, but that just multiplies resource exhaustion dimensions from 1 to 2. Recall that most average hard disks can only manage about 100 seeks per second. Connect 100 times, request one random block per second per connection and all the seeks are gone. Bandwidth usage is hardly a problem. Nodes don't remember what data elements they already served so you can just do that forever, but even if they did you could just reconnect every so often to make them forget.\r\n\r\nI think I've explained how to implement a working anti-DoS strategy several times by now. If I didn't reply to John it's only because this issue keeps coming up and I feel like I'm repeating myself.\r\n\r\nFirst step - make nodes understand their own resource limits. This is useful anyway because an operator may not want bitcoind to eat all available machine resources, and currently it will just if it legitimately gets busy.\r\n\r\nSecond step - implement handlers that run when the node is running out of resources, that perform load shedding. For example, throwing out low priority transactions in the mempool, disconnecting peers that score badly (idle for long periods of time, use lots more memory than would be expected, etc). Coming up with good scoring functions is a big part of the art of DoS defence. This is where you'd score transactions before signature checking as well.\r\n\r\nThird step - once you force attackers to basically act just like regular network nodes, you can introduce an optional cookie mechanism so if there are suddenly thousands of clients that appear to be well behaved, clients that have a long history get priority over clients that appeared 5 minutes ago. This also helps in the case where Bitcoin \"suffers\" a sudden spike in popularity. Established users take priority over new users.\r\n\r\nFinal step - optimise everything so the amount of load you can handle before falling over gets pushed higher and higher.\r\n\r\nThe wrong strategy is the one being pursued here:\r\n\r\n1) Find a feature that uses resources\r\n2) Panic and disable it\r\n3) GOTO 1\r\n\r\nThe last time this happened I described the strategy as a \"death spiral\" and I wasn't joking.",
      "created_at" : "2013-08-16T10:40:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22759172",
      "id" : 22759172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T10:40:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22759172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Mike, enough with the overheated rhetoric.\r\n\r\nOccasionally nodes will have reasons not to offer the bloom filter service, while still having block data. (NODE_NETWORK) Right now the protocol doesn't give any way to say that, adding the NODE_BLOOM service bit lets you do that.\r\n\r\nOf course, if you are going to have NODE_BLOOM, it's useful to be able to disable the bloom service for testing SPV clients, hence the undocumented command line flag. The code implementing the feature also shows what should happen if a node doesn't support bloom filters: kick peers requiring that feature so they won't waste their bandwidth. It'd also be useful as a temporary emergency measure if a DoS attack is launched, but in the meantime we don't have any reason to expect users to use the flag. It is unfortunate that Gavin's revealed a particularly effective one, but that's life. In any case, finding DoS attacks may be trivial for you, but our attackers don't seem to find them on their own and seem to only launch them after they have been revealed publicly prior to a patch.\r\n\r\nIf you want to talk about priority schemes, move it to the email list and reply to @johndillon's thread rather than cluttering up this pull-req with off-topic discussion. Your ideas only work against some types of attacks in any case.",
      "created_at" : "2013-08-16T11:49:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22761634",
      "id" : 22761634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T12:13:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22761634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@wtogami I suggested awhile back to make it easy to set the alert keys locally for testing - maybe that's the way to handle testing them? You'd still have to regenerate the test cases every time the protocol version was changed, but that could be turned into a simple script using a known privkey.\r\n\r\nMight be a better idea in general: because the key is what's non-standard, you can have test cases that use times that are standard without risking re-use of the test alerts on the network.",
      "created_at" : "2013-08-16T11:52:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22761718",
      "id" : 22761718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T11:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22761718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I don't have access to the DoS report of  issue it's been discussed, but I can imagine.\r\n\r\nAny tool (or NODE_ bit) that gives the users the ability to mitigate an eventual DoS attack would be welcomed by the community. Bitcoin network protocol is not \"fair\", peers do not send the exact amount of useful information they receive. This is a true altruistic network, so I think people won't use these bits to discriminate peers.\r\n\r\n",
      "created_at" : "2013-08-16T16:07:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22776227",
      "id" : 22776227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T16:07:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22776227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Regarding using the bit NODE_BLOOM maliciously to detect \"vulnerable\" nodes, I don't think this ease much an attack, since bloom enabled nodes can been detected by many different ways indirectly. (e.g. connecting to the victim with two peers, and testing if txs are filtered or not). ",
      "created_at" : "2013-08-16T16:15:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22776705",
      "id" : 22776705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T16:15:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22776705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1752347?v=3",
         "events_url" : "https://api.github.com/users/SergioDemianLerner/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SergioDemianLerner/followers",
         "following_url" : "https://api.github.com/users/SergioDemianLerner/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SergioDemianLerner/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SergioDemianLerner",
         "id" : 1752347,
         "login" : "SergioDemianLerner",
         "organizations_url" : "https://api.github.com/users/SergioDemianLerner/orgs",
         "received_events_url" : "https://api.github.com/users/SergioDemianLerner/received_events",
         "repos_url" : "https://api.github.com/users/SergioDemianLerner/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SergioDemianLerner/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SergioDemianLerner/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SergioDemianLerner"
      }
   },
   {
      "body" : "Another way of looking at it is Gavin is worried about NODE_BLOOM making it easier to detect \"vulnerable\" nodes, and his solution is to make all nodes vulnerable.",
      "created_at" : "2013-08-16T16:18:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22776898",
      "id" : 22776898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-16T16:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22776898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "ACK to NODE_BLOOM and this particular patch.  We will however need a solution for the broken alert tests, preferably one that does not require the alert key signer to have de facto centralized control over any protocol version bumps.",
      "created_at" : "2013-08-17T11:58:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22810433",
      "id" : 22810433,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-17T11:58:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22810433",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "@wtogami change your test to run with a throwaway key which is only used in testing mode if thats your concern.",
      "created_at" : "2013-08-17T12:06:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22810556",
      "id" : 22810556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-17T12:06:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22810556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell Does that mean you suggest that be added as a second commit to this PR?",
      "created_at" : "2013-08-17T12:08:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22810585",
      "id" : 22810585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-17T12:08:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22810585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "@wtogami  No, I don't care, updating the protocol version is infrequent enough that we can just fix the test after doing so. \"Defacto centeral control\" is not a concern there, if you are having trouble getting the test updated you just make the change I suggested, remove the test, or remove the alert key entirely.",
      "created_at" : "2013-08-17T12:26:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-22810860",
      "id" : 22810860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-17T12:26:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/22810860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gavinandresen I don't really follow your reasoning; assuming an attack exists (ignoring whether it does or not for now), then forcing everyone to be vulnerable is certainly worse than making it optional and advertizing it (perhaps combining it with stronger anti-DoS measures, knowing that it may reduce availability of other offered services).\r\n\r\nI do agree with @mikehearn that a decent resource-limitating implementation is necessary as a generic solution against DoS attacks. I do believe that's orthogonal to the approach taken by this change, though.\r\n\r\nThe services offered by P2P nodes to the network (for free!) are quite distinct, and have different use cases, different clients, and different attack models:\r\n * (unfiltered) old blocks are only necessary for full nodes that are synchronizing. The only thing that matters is bandwidth really (latency is only important in so far that extreme degradation would increase sybil-vulnerability).\r\n * (unfiltered) recent blocks are only necessary for full nodes keeping up with the chain, and mostly need low latency to keep the convergence speed of the network fast. Bandwidth is only important when it starts influencing latency.\r\n * (filtered) blocks are only necessary for SPV nodes, and the same old/new distinction exists (old blocks need bandwidth, new blocks need latency).\r\n * lone transactions are only necessary for distribution to miners and (to the extent possible) aim of the network to prevent 0-conf double spending. Until the payment protocol takes off, it also matters for distribution to receivers, but this isn't necessary IMHO. I believe all this is mostly best-effort in any case, and secondary to the other services offered.\r\n\r\nIn my opinion, these are sufficiently independent from each other that they should be easily isolatable. We're relying on charity of those running full nodes to provide these services, and which of these they consider important for the survival of the network may differ. Additionally, not all of these are necessarily present to the same extent in the network - there may be more demand for some than for others. This all speaks in favor of having separate services bits for them. Maybe at some point more specialized and separately-maintained software for each exists, though that's probably not for soon.\r\n\r\nOn the other hand, requiring full node implementations to support SPV functionality probably benefits the popularity of Bitcoin as a payment system, and may improve its usefulness to the economy. \"Surviving\" up to the point where we're worried about certain attacks may be more important than dealing with those attacks in the first place. Still, ultimately this is about whether alternate full node implementations are allowed to not implement SPV services, and they may have reasons not to (perhaps because they offer a competing lightweight client model). If the choice is between them not implementing Bloom filtering (and ignore requests, or disconnect in case of such requests), and them being able to advertize not supporting it in the first place, I certainly choose the latter.\r\n\r\nI lean towards ACK, but this discussion probably belongs elsewhere (it's not entirely specific to the reference client), and certainly warrants a BIP. The implementation looks good in any case.",
      "created_at" : "2013-08-25T15:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-23229946",
      "id" : 23229946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-25T15:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/23229946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "A good example where the very different requirements of the different types of nodes matters is for anyone with a lot of bandwidth available to them, but not a lot of disk io or memory, a common scenario for servers in datacenters.\r\n\r\nThe most efficient way to push blocks over the wire for such a server would be to use sendfile() to do a direct copy from the blockchain data on disk to the network interface - behind the scenes Linux will use direct zero-copy DMA transfers of the data from the disk interface to the network interface, or system memory to the network interface, using almost no CPU in the process. On the other hand that means the blocks have to be sent unfiltered, which is fine if my peer needs the whole block. This arrangement uses the resources I have available most efficiently for the sake of the network.\r\n\r\nBut if I start accepting SPV clients I can't use sendfile() anymore, and even worse is that because I'm serving those SPV clients filtered blocks I'm using up far more disk IO than network bandwidth, when what I have available to me is the opposite.\r\n\r\nInterestingly the opposite case is common too: lots of home users running nodes have plenty of disk IO available, especially if they have SSD's, but very poor upload capacity. It would probably make sense for full nodes to prefer to connect to nodes without NODE_BLOOM set, especially if they are syncing a lot of archival history, leaving capacity on the NODE_BLOOM capable nodes for SPV clients that need it.",
      "created_at" : "2013-08-26T16:12:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-23274616",
      "id" : 23274616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-26T16:12:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/23274616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Also, here is my draft BIP: http://www.mail-archive.com/bitcoin-development@lists.sourceforge.net/msg02751.html",
      "created_at" : "2013-08-26T16:46:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-23276995",
      "id" : 23276995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-08-26T16:46:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/23276995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Needs rebase and a test plan. But I still think this is a bad idea....\r\n",
      "created_at" : "2013-10-21T02:16:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26689385",
      "id" : 26689385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T02:16:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26689385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen rebased\r\n\r\nCurrent test plan and results has been as follows:\r\n\r\n1) Bloom filters enabled, NODE_BLOOM set, protocol version bump (default settings)\r\n\r\nPeers connect normally, no observed changes: PASS\r\nAndroid Bitcoin Wallet connects successfully: PASS\r\nAndroid Bitcoin Wallet connects as only peer: PASS\r\n\r\n2) Bloom filters disabled, NODE_BLOOM unset (-bloomfilters=0)\r\n\r\nNon-bloom-using nodes connect normally: PASS\r\nBloom-using nodes kicked: PASS\r\nNo bloom-using nodes seen in getpeerinfo (which would indicate they don't give up): PASS\r\nAndroid Bitcoin wallet w/ !NODE_BLOOM peer set as trusted peer and with DNS peer discovery enabled: PASS (fails to connect to the peer, but behaves normally otherwise)\r\nAndroid Bitcoin wallet w/ !NODE_BLOOM peer as only peer: PASS, although the wallet code never gives up, connecting multiple times a second. But that's a bug in the Android wallet that should be fixed.\r\n\r\n3) DNS seeds\r\n\r\n@sipa implementation https://github.com/sipa/bitcoin-seeder ignores NODE_BLOOM: PASS\r\n@TheBlueMatt's implementation https://github.com/TheBlueMatt/dnsseed-bitcoinj ignores NODE_BLOOM: PASS\r\n\r\nNote that I only checked that the source code for both tests for NODE_NETWORK with an and, and thus will ignore other service bits being set. We can modify the dns seeds to filter requested service bits later if required; useful later for other things like the proposed NODE_ARCHIVAL_BLOCKCHAIN_DATA-type stuff.",
      "created_at" : "2013-10-21T03:02:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26690423",
      "id" : 26690423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T03:02:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26690423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Note that the alert tests need to be fixed because the protocol version was incremented, as discussed above; if disabled manually all other tests run fine.",
      "created_at" : "2013-10-21T03:05:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26690505",
      "id" : 26690505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T03:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26690505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "https://code.google.com/p/bitcoinj/source/detail?r=2c44a4fad7faccfe9b1392c67f60d21b25703bde\r\nThe current Android Wallet logic is to determine if a peer does bloom only from the protocol version.  bitcoinj would need to learn how to to read service bits.",
      "created_at" : "2013-10-21T10:32:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26706681",
      "id" : 26706681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T10:32:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26706681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "@wtogami Sure, but that's not something that prevents merging this patch; it's compatible with older SPV implementations. More to the point, those implementations aren't going to change until this patch is merged.",
      "created_at" : "2013-10-21T10:36:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26706931",
      "id" : 26706931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T10:36:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26706931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Sorry, I didn't mean that is a blocker for this patch, it was meant as a FYI.",
      "created_at" : "2013-10-21T10:38:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26707029",
      "id" : 26707029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T10:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26707029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "Um, old SPV implementations are not compatible with this patch - it is inherently impossible for them to be so. A node that opts out of a previously mandatory feature will still be expected to provide it by old software. If an old client connects to a new server that has the feature disabled, it will hang as it waits for a response to a message that the remote server has ignored.\r\n\r\nThis patch is just all kinds of bad news. Please stop it. People who want to serve the chain but not do computational work on behalf of clients can just seed the chain torrent instead.",
      "created_at" : "2013-10-21T13:23:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26716129",
      "id" : 26716129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T13:23:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26716129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn Read the patch prior to commenting about it; it automatically kicks older peers so they won't waste their bandwidth and my draft BIP says that behavior is a must.\r\n\r\nAlso, the requirements of serving archival and bloomfilter-using nodes are very different and can productively be optimized differently: https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-23274616",
      "created_at" : "2013-10-21T13:35:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26717023",
      "id" : 26717023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T13:35:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26717023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Yes, I read that comment. That's why I suggested serving the chain torrent if you have lots of bandwidth and not much CPU. Or heck, just serve snapshots of the chain via HTTP. Then you have a piece of software and protocol actually designed for serving large files, instead of bitcoin+p2p protocol which simply isn't.",
      "created_at" : "2013-10-21T13:41:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26717448",
      "id" : 26717448,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T13:41:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26717448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "So you agree that it's backwards compatible with older SPV implementations? Any other issues?\r\n\r\nI don't see why we want to depend on a clunky system of requiring separate manual torrent/HTTP downloads, especially given ideas like partial UTXO mode to transparently bring nodes from SPV security to full over time in the background.",
      "created_at" : "2013-10-21T13:49:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26718181",
      "id" : 26718181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T13:49:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26718181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Your patch is \"backwards compatible\" as long as most nodes don't use it, which is not the meaning most people would associate with the term. Worse, you implemented this by DoS banning the IP address, which fails to take into account that many users (especially on mobile) sit behind giant NAT boxes. A single user who didn't upgrade could get their entire local cell tower or even city banned from every node with your patch activated, even for clients that are upgraded.\r\n\r\nYou could make it backwards compatible by not having such nodes take part in the regular P2P network at all and provide a separate DNS seed for them, so old clients would never see them at all, but then if you're going to have a separate P2P network why not use a P2P system that's actually designed for file distribution, like BitTorrent? \r\n\r\nIgnoring for now that Bitcoin-Qt doesn't have any SPV support and nobody is working on any, fancy automatic migration of SPV nodes to full nodes doesn't make sense from a user experience perspective - the requirements are just so different, such arguments don't persuade me. \r\n\r\nAs it is, the maintainer of the serving side says this patch is a bad idea, the maintainer of the client side says this is a bad idea, so what do you hope to achieve by keeping this issue open? It gets quite frustrating when the people who are actually maintaining the code bases that are affected by this patch both say \"this is a bad idea\" and you just plough on regardless.",
      "created_at" : "2013-10-21T14:03:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26719432",
      "id" : 26719432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T14:03:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26719432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Ah good, finally you looked at the code. Anyone have any comments re: the DoS behavior? I could potentially change it to simply close the associated connection.\r\n\r\nService bits are meant to advertise services, and performing computations on behalf of clients who don't serve other clients sounds very much like a service to me. That said I'd be very surprised to see many nodes operators disabling bloom filters as the command-line switch to do so is undocumented, so we've got plenty of time to upgrade DNS seeds to let nodes pick service bits they want, or just require NODE_BLOOM to be set if protocol version >=70002. (DNS seeds are just for bootstrapping after all and nodes should use them infrequently; no sense putting too much effort into them vs. decentralized peer discovery)\r\n\r\nI'm sure more people would run Bitcoin-QT full-nodes if it was useful immediately, albeit with reduced SPV security. We could certainly use more full nodes. You like to say how businesses will \"obviously\" run full nodes - maybe we can make it easier for them by getting their nodes up and running as fast as possible. An attractive alternative is to just use a central service immediately rather than waiting after all.\r\n\r\nNote the positive comments and ACKS from gmaxwell, sipa, jgarzik, and wtogami - the reference client is maintained by a group of people, not just one guy who calls the shots.",
      "created_at" : "2013-10-21T14:28:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26721635",
      "id" : 26721635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T14:28:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26721635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I think it may make more sense to start advertising NODE_BLOOM before we add a (even undocumented) option to disable it. That could ease the transition significantly",
      "created_at" : "2013-10-21T14:31:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26721860",
      "id" : 26721860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T14:31:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26721860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt If the sticking point for people is the fact that there is that option, I'll remove it.",
      "created_at" : "2013-10-21T14:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26723942",
      "id" : 26723942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T14:53:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26723942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "> our patch is \"backwards compatible\" as long as most nodes don't use it\r\n\r\nNODE_BLOOM enabled-by-default with 0.9 combined with always-enabled with 0.8.x means most nodes will use it.\r\n\r\n> I think it may make more sense to start advertising NODE_BLOOM before we add a (even undocumented) option to disable it. That could ease the transition significantly\r\n\r\nPlease.  No.  Removing the option would mean other clients can entirely opt out of paying attention to the service bit, thereby rendering it pointless.  The option being widely deployed at least makes it very easy to tell the world how to defend against a particular type of problem if it were to happen, which may be enough to discourage that problem from happening as they would know the network can bounce back very quickly without any software update.\r\n\r\n@petertodd In retrospect, the 24 hour ban was too heavy handed.  Mike is right about it being too easy to ban an entire IP.",
      "created_at" : "2013-10-21T18:39:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26744037",
      "id" : 26744037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T18:39:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26744037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "The \"sticking point\" for me is practical:  every service bit adds complication-- another possible configuration that should be tested, but probably won't be (which makes attacks more likely).\r\n\r\nI have seen zero evidence that requiring that every NODE_NETWORK node support bloom filters causes anything more than temporary denial-of-service problems for under-powered full nodes, and I see large benefits to requiring that all full nodes support SPV clients.\r\n",
      "created_at" : "2013-10-21T22:32:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26762842",
      "id" : 26762842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-21T22:32:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26762842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "On Mon, 2013-10-21 at 11:39 -0700, Warren Togami wrote:\n>         I think it may make more sense to start advertising NODE_BLOOM\n>         before we add a (even undocumented) option to disable it. That\n>         could ease the transition significantly\n>         \n> \n> Please. No. Removing the option would mean other clients can entirely\n> opt out of paying attention to the service bit, thereby rendering it\n> pointless. The option being widely deployed at least makes it very\n> easy to tell the world how to defend against a particular type of\n> problem if it were to happen, which may be enough to discourage that\n> problem from happening as they would know the network can bounce back\n> very quickly without any software update.\n> \nUmm...what? people will refuse to implement a new standard because its\nnot actively used but will break their apps in the future if they dont?\nSomehow I don't see why this would be true.",
      "created_at" : "2013-10-22T01:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-26771832",
      "id" : 26771832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-22T01:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/26771832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Updated to use CloseSocketDisconnect() rather than a 24-hour DoS-ban.\r\n\r\nTested with my Android wallet, which happily successfully connects then is disconnected about five times a second forever...\r\n\r\nOff-topic here, but @schildbach I'd suggest some kind of back-off algorithm, or at least waiting a second or two. It even does that on a cellular data connection, which could get rather expensive.",
      "created_at" : "2013-10-26T06:15:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-27140402",
      "id" : 27140402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-26T06:15:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27140402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd Yes, that's a well known regression in bitcoinj: http://code.google.com/p/bitcoinj/issues/detail?id=296",
      "created_at" : "2013-10-26T07:23:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-27141167",
      "id" : 27141167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2013-10-26T07:23:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27141167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=3",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   },
   {
      "body" : "There has been no activity in this issue for more than half a year. What's the way forward here?\r\n\r\nIt is clear that next time that a service is introduced on the P2P network we have to be more careful, and add a services bit (or another way) to advertise the service instead of making it mandatory at a protocol version. This makes it possible for the node owner to choose whether to run the service or not, and to disable it if problems arise.\r\n\r\nHowever for Bloom filtering I think this ship has sailed. All SPV clients rely on this functionality to be available with NODE_NETWORK, and it seems unreasonable to break this expectation in a new protocol version.\r\n",
      "created_at" : "2014-05-28T13:50:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44408614",
      "id" : 44408614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T13:50:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44408614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Both Litecoin and Dogecoin as well as their forks have deployed this patch without problems. From what I've seen an heard, their SPV clients are not acutally looking for the service bit, since this patch is designed to be backwards compatible and there are only few nodes which disable bloom filters. Instead they are disconnected when trying to set the bloom filter and choose another node instead.\r\n\r\nI think giving node operators the option to influence cpu/bandwith tradeoffs based on their needs is a good idea, and experience from altcoins seems to suggest that SPV clients are not negatively impacted by this change in a notable way.",
      "created_at" : "2014-05-28T16:11:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44429126",
      "id" : 44429126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T16:11:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44429126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4348296?v=3",
         "events_url" : "https://api.github.com/users/leofidus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/leofidus/followers",
         "following_url" : "https://api.github.com/users/leofidus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/leofidus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/leofidus",
         "id" : 4348296,
         "login" : "leofidus",
         "organizations_url" : "https://api.github.com/users/leofidus/orgs",
         "received_events_url" : "https://api.github.com/users/leofidus/received_events",
         "repos_url" : "https://api.github.com/users/leofidus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/leofidus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/leofidus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/leofidus"
      }
   },
   {
      "body" : "Arguing for a patch on the grounds that not enough people use it to be harmful is not a great start. But I think we went around this six months ago and the conclusion was not to apply - the pull req should just have been closed back then.\r\n\r\nThe right way to solve the problem (is it a problem yet?) of nodes running out of CPU is to teach them how to prioritise within their capabilities, not expect node operators to learn complicated administration tasks. If bitcoind were routinely saturating my cheap little VPS' CPU this sort of quick hack would be a lot more compelling, but there's no sign of such problems. The top complaint at the moment is bandwidth not CPU.",
      "created_at" : "2014-05-28T16:22:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44430483",
      "id" : 44430483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T16:22:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44430483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Right, I run various nodes on cheap ARM boxes and have never seen significant CPU usage after the initial block sync (and from that, ECDSA verification is by far the most expensive operation). Bloom filtering is really efficient. If anyone can show with benchmarks/profiles that serving SPV nodes filtered blocks is actually a problem in practice, I'll gladly reconsider my opinion.\r\n\r\nBandwidth is another matter, but disabling bloom certainly won't help with that.\r\n",
      "created_at" : "2014-05-28T16:46:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44433636",
      "id" : 44433636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T16:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44433636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "AFAIK, this is not about CPU usage or network bandwidth at all, but about the ability of remote attackers to DoS a node's disk bandwidth.  The capability bit provides a way to opt out of one DoS attack vector.\r\n\r\nDo we need this?  My feeling is \"NAK\" but it is really a protocol change, and thus requires a BIP and some email list discussion (the latter of which has already happened, IIRC).\r\n\r\nEven if we all agreed this is ACK-worthy, it would still need a BIP, as this is a network-wide behavior change.",
      "created_at" : "2014-05-28T17:36:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44439856",
      "id" : 44439856,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T17:36:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44439856",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Wouldn't it be a good idea to have for full node implementations like btcd which do not support bloom?",
      "created_at" : "2014-05-28T18:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44445834",
      "id" : 44445834,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T18:25:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44445834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/93665?v=3",
         "events_url" : "https://api.github.com/users/wtogami/events{/privacy}",
         "followers_url" : "https://api.github.com/users/wtogami/followers",
         "following_url" : "https://api.github.com/users/wtogami/following{/other_user}",
         "gists_url" : "https://api.github.com/users/wtogami/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/wtogami",
         "id" : 93665,
         "login" : "wtogami",
         "organizations_url" : "https://api.github.com/users/wtogami/orgs",
         "received_events_url" : "https://api.github.com/users/wtogami/received_events",
         "repos_url" : "https://api.github.com/users/wtogami/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/wtogami/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/wtogami/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/wtogami"
      }
   },
   {
      "body" : "This discussion has been going on for a long time. A draft BIP was written, as well as discussion on the mailing list: http://sourceforge.net/p/bitcoin/mailman/message/31298904/ . \r\n\r\nIf this is to be merged it at least needs a rebase.\r\n\r\nIn any case there needs to be a decision, this has dragged on for too long, and no one seems to care much either way. If we don't absolutely need it it's IMO better to not do it.\r\n",
      "created_at" : "2014-05-28T19:19:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44452306",
      "id" : 44452306,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T19:19:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44452306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'll be submitting the BIP to the bitcoin/bips repo once I get back next week.\r\n\r\n@wtogami Exactly. Obelisk nodes don't support bloom filters either; they will in the future support the more scalable and private prefix filters. Eventually we'll likely wind up with NODE_PREFIX in addition to NODE_BLOOM.",
      "created_at" : "2014-05-28T19:37:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44454314",
      "id" : 44454314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T19:43:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44454314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@laanwj I think @gavinandresen's announcement has left the chain of command a little unclear, but  I guess if you want a decision, it's up to you to make one. Asking for one just makes us all restate our positions again, it doesn't lead to a decision :)",
      "created_at" : "2014-05-28T19:58:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-44456588",
      "id" : 44456588,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-05-28T19:58:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44456588",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/29834c0a077ddce249a8822fe2549e3dc5eb08c1 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-06T07:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-45310982",
      "id" : 45310982,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-06-06T07:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45310982",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Closing, no consensus this is a good idea.\r\n",
      "created_at" : "2014-06-12T13:44:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2900#issuecomment-45892726",
      "id" : 45892726,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2900",
      "updated_at" : "2014-06-12T13:44:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45892726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
