[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "see https://github.com/bitcoin/bitcoin/pull/17631",
      "created_at" : "2021-10-12T04:14:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23259#issuecomment-940641315",
      "id" : 940641315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23259",
      "node_id" : "IC_kwDOABII5844EQwj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940641315/reactions"
      },
      "updated_at" : "2021-10-12T04:14:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940641315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There's another reason that it exists that is missed here - JSON-RPC is basically a Bitcoin Core-only thing, and is pretty hard to work with. There isn't standard tooling for JSON-RPC available anywhere, there's just Bitcoin Core stuff. REST is *the* standard for RPC calls at this point, so ripping out the one standardized way to get data out of Core is kinda obnoxious.",
      "created_at" : "2021-10-12T04:22:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23259#issuecomment-940644832",
      "id" : 940644832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23259",
      "node_id" : "IC_kwDOABII5844ERng",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940644832/reactions"
      },
      "updated_at" : "2021-10-12T04:22:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940644832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "node_id" : "MDQ6VXNlcjY0OTI0Ng==",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@TheBlueMatt  fwiw i'd also concept ACK a solid plan to eliminate the json rpc and make everything rest based and provide the json rpc through a proxy, but that seems less likely since there are far more apis / users / uses of the json rpcs and there's only 9 REST APIs presently.",
      "created_at" : "2021-10-12T04:30:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23259#issuecomment-940648658",
      "id" : 940648658,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23259",
      "node_id" : "IC_kwDOABII5844ESjS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940648658/reactions"
      },
      "updated_at" : "2021-10-12T04:30:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940648658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "responding to https://github.com/bitcoin/bitcoin/pull/17631#issuecomment-940642018\r\n\r\n> You can sanitize in NGINX too, its probably easier than some python script. But, seriously, that notion is absurd - \"here, you have a running production daemon, run this hacked-together python script to make its API usable\" is not the same as \"we don't want to vouch for the security of this thing, so make sure you pay close attention if you want to expose calls to the outside\".\r\n\r\nas a general principle i think we should be very careful about shipping core with any sort of feature / service that might lead to inadvertent security issues, especially because exploits running in the same memory space as core are much more concerning. Rather a hacked together python script proxy than a hacked together c++ http server in core. And nothing says the script has to be hacked together :)",
      "created_at" : "2021-10-12T04:36:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23259#issuecomment-940651096",
      "id" : 940651096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23259",
      "node_id" : "IC_kwDOABII5844ETJY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940651096/reactions"
      },
      "updated_at" : "2021-10-12T04:36:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940651096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This can be improved (e.g. to use tornado's http client and to use gen.task/async), but this is an example of how one might implement one of the proxy function handlers based on the AuthServiceProxy in the rpc tests and tornado library.\r\n\r\n```python\r\nimport tornado.ioloop\r\nimport sys\r\nimport tornado.web\r\nnode = AuthServiceProxy(sys.argv[1])\r\nclass rest_tx(tornado.web.RequestHandler):\r\n    def get(self, txhash, encoding):\r\n        try:\r\n            result = node.getrawtransaction(txhash, 1 if encoding == \".json\" else 0)\r\n        except JSONRPCException as e:\r\n            raise tornado.web.HTTPError(status_code=404, log_message=\"Transaction Not Found\")\r\n        if encoding == \".json\":\r\n            self.set_header(\"Content-Type\", 'application/json')\r\n            self.write(json.dumps(result, default=EncodeDecimal))\r\n        if encoding == \".bin\":\r\n            self.set_header(\"Content-Type\", 'application/octet-stream')\r\n            self.write(bytes.fromhex(result))\r\n        if encoding == \".hex\":\r\n            self.set_header(\"Content-Type\", 'application/plain')\r\n            self.write(result)\r\n\r\ndef make_app():\r\n    format_hash = \"([0-9a-fA-F]{64})(\\.json|\\.hex|\\.bin)\"\r\n    print(f\"/rest/tx/{format_hash}\")\r\n    return tornado.web.Application([\r\n        (f\"/rest/tx/{format_hash}\", rest_tx),\r\n        ])\r\n\r\nif __name__ == \"__main__\":\r\n    app = make_app()\r\n    app.listen(8888)\r\n    tornado.ioloop.IOLoop.current().start()\r\n```",
      "created_at" : "2021-10-12T05:46:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/23259#issuecomment-940683811",
      "id" : 940683811,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23259",
      "node_id" : "IC_kwDOABII5844EbIj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940683811/reactions"
      },
      "updated_at" : "2021-10-12T05:47:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/940683811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   }
]
