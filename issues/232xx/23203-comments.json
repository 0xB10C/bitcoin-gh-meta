[
   {
      "author_association" : "MEMBER",
      "body" : "Cocnept ACK, this is great!\r\n\r\n> Note that all dependencies do compile, except for Qt (build issue with FreeType I have not investigated), I've just excluded all optional dependencies from the depends build above.\r\n\r\nQt is going to be a big challenge for full-static linking (due to system dependencies for X, FreeType etc). It's ok to skip that for now, IMO, would be nice to be able to ship a statically linked `bitcoind` and utilities at least.",
      "created_at" : "2021-10-06T11:04:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-935980772",
      "id" : 935980772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843ye7k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935980772/reactions"
      },
      "updated_at" : "2021-10-06T11:06:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/935980772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23152](https://github.com/bitcoin/bitcoin/pull/23152) (build: add `--enable-lto` configuration option by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-10-06T11:15:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936011846",
      "id" : 936011846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843ymhG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936011846/reactions"
      },
      "updated_at" : "2021-10-06T11:15:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936011846",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I get an error while linking bitcoind (some boost system symbol, specifically `boost::system::generic_category()`):\r\n```\r\n/bin/bash ../libtool  --tag=CXX --preserve-dup-deps  --mode=link /usr/bin/ccache /data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/x86_64-linux-musl-g++ -m64 -std=c++17 -fdebug-prefix-map=/home/user/src/bitcoin/src=. -fstack-reuse=none -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection      -flto -fPIE -pipe -static -flto -static -flto -O2  -fno-extended-identifiers -fvisibility=hidden -Wl,--exclude-libs,ALL  -Wl,-z,relro -Wl,-z,now -Wl,-z,separate-code -pie   -flto -all-static -pthread -lpthread -flto -L/home/user/src/bitcoin/depends/x86_64-pc-linux-gnu/lib -Wl,-O2 -o bitcoind bitcoind-bitcoind.o  init/bitcoind-bitcoind.o libbitcoin_server.a  libbitcoin_common.a libbitcoin_util.a univalue/libunivalue.la  libbitcoin_consensus.a crypto/libbitcoin_crypto_base.a crypto/libbitcoin_crypto_sse41.a crypto/libbitcoin_crypto_avx2.a crypto/libbitcoin_crypto_shani.a leveldb/libleveldb.a crc32c/libcrc32c.a crc32c/libcrc32c_sse42.a   leveldb/libmemenv.a secp256k1/libsecp256k1.la -L/home/user/src/bitcoin/depends/x86_64-pc-linux-gnu/lib -lboost_system-mt-x64 -lboost_filesystem-mt-x64    -L/data/src/bitcoin/depends/x86_64-pc-linux-gnu/lib -levent_pthreads -levent -L/data/src/bitcoin/depends/x86_64-pc-linux-gnu/lib -levent   \r\nlibtool: link: /usr/bin/ccache /data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/x86_64-linux-musl-g++ -m64 -std=c++17 -fdebug-prefix-map=/home/user/src/bitcoin/src=. -fstack-reuse=none -Wstack-protector -fstack-protector-all -fcf-protection=full -fstack-clash-protection -flto -fPIE -pipe -flto -flto -O2 -fno-extended-identifiers -fvisibility=hidden -Wl,--exclude-libs -Wl,ALL -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,-z -Wl,separate-code -pie -flto -static -pthread -flto -Wl,-O2 -o bitcoind bitcoind-bitcoind.o init/bitcoind-bitcoind.o  -lpthread -L/home/user/src/bitcoin/depends/x86_64-pc-linux-gnu/lib libbitcoin_server.a libbitcoin_common.a libbitcoin_util.a univalue/.libs/libunivalue.a libbitcoin_consensus.a crypto/libbitcoin_crypto_base.a crypto/libbitcoin_crypto_sse41.a crypto/libbitcoin_crypto_avx2.a crypto/libbitcoin_crypto_shani.a leveldb/libleveldb.a crc32c/libcrc32c.a crc32c/libcrc32c_sse42.a leveldb/libmemenv.a secp256k1/.libs/libsecp256k1.a -lboost_system-mt-x64 -lboost_filesystem-mt-x64 -L/data/src/bitcoin/depends/x86_64-pc-linux-gnu/lib -levent_pthreads -levent -levent -pthread\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: libbitcoin_util.a(libbitcoin_util_a-readwritefile.o): in function `boost::system::error_category::std_category::equivalent(int, std::error_condition const&) const':\r\n/usr/include/boost/system/error_code.hpp:703: undefined reference to `boost::system::generic_category()'\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: libbitcoin_util.a(libbitcoin_util_a-readwritefile.o): in function `boost::system::error_category::std_category::equivalent(int, std::error_condition const&) const':\r\n/usr/include/boost/system/error_code.hpp:703: undefined reference to `boost::system::generic_category()'\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: /usr/include/boost/system/error_code.hpp:706: undefined reference to `boost::system::generic_category()'\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: libbitcoin_util.a(libbitcoin_util_a-readwritefile.o): in function `boost::system::error_category::std_category::equivalent(std::error_code const&, int) const':\r\n/usr/include/boost/system/error_code.hpp:733: undefined reference to `boost::system::generic_category()'\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: /usr/include/boost/system/error_code.hpp:736: undefined reference to `boost::system::generic_category()'\r\n/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/../lib/gcc/x86_64-linux-musl/10.3.0/../../../../x86_64-linux-musl/bin/ld: /usr/include/boost/system/error_code.hpp:748: undefined reference to `boost::system::generic_category()'\r\n```\r\nboost::system seems to contain no symbols at all:\r\n```\r\n$ nm -a ./depends/x86_64-pc-linux-gnu/lib/libboost_system-mt-x64.a\r\n\r\nerror_code.o:\r\n00000000 T _ZN5boost6system23dummy_exported_functionEv\r\n```",
      "created_at" : "2021-10-06T12:45:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936168813",
      "id" : 936168813,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zM1t",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936168813/reactions"
      },
      "updated_at" : "2021-10-06T13:01:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936168813",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~~Looking at the depends build log, I think the custom toolchain isn't correctly fed into the boost build. It's using my system compiler:~~\r\n(snipâthis was wrong)",
      "created_at" : "2021-10-06T13:23:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936227639",
      "id" : 936227639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zbM3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936227639/reactions"
      },
      "updated_at" : "2021-10-06T13:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936227639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It's using my system compiler:\n\nThat excerpt is for the native b2 build, where using the system compiler is expected.",
      "created_at" : "2021-10-06T13:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936251128",
      "id" : 936251128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zg74",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936251128/reactions"
      },
      "updated_at" : "2021-10-06T13:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936251128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, looks like a false lead. The rest of boost is compiled with the correct compiler. This is the `boost-system` part, specifically:\r\n```\r\nRmTemps bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a(clean)\r\n\r\n    rm -f \"bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a\" 2>/dev/null >/dev/null\r\n\r\ngcc.archive bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a\r\n\r\n    \"/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/x86_64-linux-musl-gcc-ar\"  rc \"bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a\" \"bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/error_code.o\"\r\n    \"/data/src/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/x86_64-linux-musl-gcc-ranlib\" \"bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a\"\r\n\r\ncommon.copy /data/src/bitcoin/depends/work/build/x86_64-pc-linux-gnu/boost/1_71_0-4ea25270eb2/stage/lib/libboost_system-mt-x64.a\r\n\r\n    cp \"bin.v2/libs/system/build/gcc-10.3.0/release/link-static/threading-multi/visibility-hidden/libboost_system-mt-x64.a\"  \"/data/src/bitcoin/depends/work/build/x86_64-pc-linux-gnu/boost/1_71_0-4ea25270eb2/stage/lib/libboost_system-mt-x64.a\"\r\n```\r\n\r\nFWIW, `generic_category()` is defined in the header `boost/system/error_code.hpp`:\r\n```c++\r\nconstexpr error_category const & generic_category() BOOST_NOEXCEPT\r\n{\r\n    return detail::cat_holder<void>::generic_category_instance;\r\n}\r\n```",
      "created_at" : "2021-10-06T13:43:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936261289",
      "id" : 936261289,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zjap",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936261289/reactions"
      },
      "updated_at" : "2021-10-06T13:46:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936261289",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I might have not properly cleaned my tree. Will retry a full build.\r\n\r\nEdit: whoops, that did it.\r\n**Testing note** make sure you start from a clean tree. If you get a linking error about `boost::system::generic_category()`, this is caused by pollution from previous builds.",
      "created_at" : "2021-10-06T13:56:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936284016",
      "id" : 936284016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zo9w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936284016/reactions"
      },
      "updated_at" : "2021-10-06T14:05:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936284016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Great, the functional tests pass and so does `test_bitcoin`\r\n`make check` fails on the secp256k1 tests, but not because of any error, simply because they're not built.\r\n```\r\nFAIL: tests\r\n===========\r\n\r\n/home/user/src/bitcoin/src/secp256k1/build-aux/test-driver: line 107: ./tests: No such file or directory\r\nFAIL tests (exit status: 127)\r\n\r\nFAIL: exhaustive_tests\r\n======================\r\n\r\n/home/user/src/bitcoin/src/secp256k1/build-aux/test-driver: line 107: ./exhaustive_tests: No such file or directory\r\nFAIL exhaustive_tests (exit status: 127)\r\n```\r\n\r\nThey do exist, but it's unable to run them somehow;\r\n```\r\n~/src/bitcoin$ ls -al build/src/secp256k1/exhaustive_tests build/src/secp256k1/tests\r\n-rwxr-xr-x 1 user user 128480 Oct  6 16:15 build/src/secp256k1/exhaustive_tests\r\n-rwxr-xr-x 1 user user 466624 Oct  6 16:15 build/src/secp256k1/tests\r\n~/src/bitcoin$ build/src/secp256k1/tests\r\nbash: build/src/secp256k1/tests: No such file or directory\r\n~/src/bitcoin$ file build/src/secp256k1/tests\r\nbuild/src/secp256k1/tests: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib/ld-musl-x86_64.so.1, not stripped\r\n```\r\nI think this is the problem: \"interpreter /lib/ld-musl-x86_64.so.1\"\r\n",
      "created_at" : "2021-10-06T14:20:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936326334",
      "id" : 936326334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII5843zzS-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936326334/reactions"
      },
      "updated_at" : "2021-10-06T14:56:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936326334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The build works as-is on RISC-V! Except I had to add `--without-asm` to prevent secp256k1 from including x86 assembly (failing while linking `bitcoind` etc). I think the problem is that the instruction set detection in secp256k1's configure compiles a C file with `__asm__` in it but doesn't link it: the IR files likely contain the assembly code as text, and only in the link phase assembling is actually attempted. So it doesn't detect that x86 assembly isn't valid for the platform.\r\n\r\nEdit: also the tests segfault on RISC-V, no idea why yet. Ok, built with debug information, this is the traceback:\r\n```\r\n(gdb) bt\r\n#0  0x0000000000000000 in ?? ()\r\n#1  0x0000000000519e74 in std::__glibcxx_rwlock_rdlock (__rwlock=0xaebdd8 <_ZN12_GLOBAL__N_1L14signatureCacheE.lto_priv.0+304>) at /usr/include/c++/10/shared_mutex:73\r\n#2  std::__shared_mutex_pthread::lock_shared (this=0xaebdd8 <_ZN12_GLOBAL__N_1L14signatureCacheE.lto_priv.0+304>) at /usr/include/c++/10/shared_mutex:224\r\n#3  std::shared_mutex::lock_shared (this=<optimized out>, this=<optimized out>) at /usr/include/c++/10/shared_mutex:421\r\n#4  std::shared_lock<std::shared_mutex>::shared_lock (__m=..., this=<optimized out>, this=<optimized out>, __m=...) at /usr/include/c++/10/shared_mutex:722\r\n#5  (anonymous namespace)::CSignatureCache::Get (this=<optimized out>, erase=true, entry=...) at script/sigcache.cpp:69\r\n#6  CachingTransactionSignatureChecker::VerifyECDSASignature (this=0x3ff5049998, vchSig=..., pubkey=..., sighash=...) at script/sigcache.cpp:109\r\n#7  0x00000000005c6082 in GenericTransactionSignatureChecker<CTransaction>::CheckECDSASignature (this=0x3ff5049998, vchSigIn=..., vchPubKey=..., scriptCode=..., sigversion=<optimized out>) at script/interpreter.cpp:1688\r\n#8  0x00000000006c49e2 in EvalChecksigPreTapscript (fSuccess=@0x3ff5049179: true, serror=0x3ff0000bcc, sigversion=<optimized out>, checker=..., flags=134673, pend=..., pbegincodehash=..., vchPubKey=..., vchSig=...) at script/interpreter.cpp:363\r\n#9  EvalChecksig(std::vector<unsigned char, std::allocator<unsigned char> > const&, std::vector<unsigned char, std::allocator<unsigned char> > const&, prevector<28u, unsigned char, unsigned int, int>::const_iterator, prevector<28u, unsigned char, unsigned int, int>::const_iterator, ScriptExecutionData&, unsigned int, BaseSignatureChecker const&, SigVersion, ScriptError_t*, bool&) [clone .constprop.0] (sig=..., pubkey=..., pbegincodehash=..., pend=..., execdata=..., flags=<optimized out>, checker=..., sigversion=<optimized out>,\r\n    serror=0x3ff0000bcc, success=@0x3ff5049179: true) at script/interpreter.cpp:421\r\n#10 0x00000000005cf5de in EvalScript (stack=..., script=..., flags=<optimized out>, checker=..., sigversion=<optimized out>, execdata=..., serror=0x3ff0000bcc) at script/interpreter.cpp:1094\r\n```\r\nI'm not sure what this is. But I strongly suspect it's not a bug in our code. It could be some kind of C++ ABI conflict (does it matter what C++ libarary version is on the system?), but also simply a RISC-V specific compilation / library /thread handling bug. We'll know more once we try on for other platforms.",
      "created_at" : "2021-10-06T18:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-936840417",
      "id" : 936840417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII58431wzh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 1,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936840417/reactions"
      },
      "updated_at" : "2021-10-07T08:50:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/936840417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK, always great to see people doing static builds.",
      "created_at" : "2021-10-08T15:06:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23203#issuecomment-938715287",
      "id" : 938715287,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23203",
      "node_id" : "IC_kwDOABII584386iX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938715287/reactions"
      },
      "updated_at" : "2021-10-08T15:06:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/938715287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/68476452?v=4",
         "events_url" : "https://api.github.com/users/yanmaani/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yanmaani/followers",
         "following_url" : "https://api.github.com/users/yanmaani/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yanmaani/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yanmaani",
         "id" : 68476452,
         "login" : "yanmaani",
         "node_id" : "MDQ6VXNlcjY4NDc2NDUy",
         "organizations_url" : "https://api.github.com/users/yanmaani/orgs",
         "received_events_url" : "https://api.github.com/users/yanmaani/received_events",
         "repos_url" : "https://api.github.com/users/yanmaani/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yanmaani/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yanmaani/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yanmaani"
      }
   }
]
