[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726154590"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590"
         }
      },
      "author_association" : "MEMBER",
      "body" : "When we change this, it would be nice to do actual error handling instead of silently using the default if the value is unparseable.",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:10:38Z",
      "diff_hunk" : "@@ -1749,7 +1750,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    connOptions.nMaxOutboundLimit = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", \"\")).value_or(DEFAULT_MAX_UPLOAD_TARGET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726154590",
      "id" : 726154590,
      "line" : 1753,
      "node_id" : "PRRC_kwDOABII584rSD1e",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 1753,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 776284700,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726155294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could factor out the `ParseUInt64(v, &nBytes)` part here, it's the same for all cases.",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:11:32Z",
      "diff_hunk" : "@@ -526,3 +526,33 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<size_t> ParseByteUnits(const std::string& str, const size_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    size_t nBytes{0};\n+\n+    v.pop_back();\n+    switch (ToLower(unit)) {\n+        case 'k':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 10} : std::nullopt;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726155294",
      "id" : 726155294,
      "line" : 542,
      "node_id" : "PRRC_kwDOABII584rSEAe",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 542,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 17,
      "pull_request_review_id" : 776285709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726156417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please document under which conditions it returns a value or `nullopt` (e.g. parse errors).",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:12:51Z",
      "diff_hunk" : "@@ -305,4 +305,15 @@ std::string ToUpper(const std::string& str);\n  */\n std::string Capitalize(std::string str);\n \n+/**\n+ * Parse a string with a suffix unit [k|K] [m|M] [g|G] [t|T] .\n+ *\n+ * Examples: 4m,6M,9g,78T\n+ *\n+ * @param[in] str                  the string to convert into bytes\n+ * @param[in] default_multiplier   if no unit is found in str, use this multiplier. default is MiB\n+ * @returns                        optional size_t bytes from str",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726156417",
      "id" : 726156417,
      "line" : 315,
      "node_id" : "PRRC_kwDOABII584rSESB",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 315,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/util/strencodings.h",
      "position" : 11,
      "pull_request_review_id" : 776287182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
