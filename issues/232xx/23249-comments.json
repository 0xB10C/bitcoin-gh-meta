[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726154590"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590"
         }
      },
      "author_association" : "MEMBER",
      "body" : "When we change this, it would be nice to do actual error handling instead of silently using the default if the value is unparseable.",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:10:38Z",
      "diff_hunk" : "@@ -1749,7 +1750,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    connOptions.nMaxOutboundLimit = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", \"\")).value_or(DEFAULT_MAX_UPLOAD_TARGET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726154590",
      "id" : 726154590,
      "line" : 1753,
      "node_id" : "PRRC_kwDOABII584rSD1e",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 1753,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 776284700,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726154590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726155294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could factor out the `ParseUInt64(v, &nBytes)` part here, it's the same for all cases.",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:11:32Z",
      "diff_hunk" : "@@ -526,3 +526,33 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<size_t> ParseByteUnits(const std::string& str, const size_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    size_t nBytes{0};\n+\n+    v.pop_back();\n+    switch (ToLower(unit)) {\n+        case 'k':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 10} : std::nullopt;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726155294",
      "id" : 726155294,
      "line" : 542,
      "node_id" : "PRRC_kwDOABII584rSEAe",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 542,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 17,
      "pull_request_review_id" : 776285709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:11:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726155294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726156417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please document under which conditions it returns a value or `nullopt` (e.g. parse errors).",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T14:12:51Z",
      "diff_hunk" : "@@ -305,4 +305,15 @@ std::string ToUpper(const std::string& str);\n  */\n std::string Capitalize(std::string str);\n \n+/**\n+ * Parse a string with a suffix unit [k|K] [m|M] [g|G] [t|T] .\n+ *\n+ * Examples: 4m,6M,9g,78T\n+ *\n+ * @param[in] str                  the string to convert into bytes\n+ * @param[in] default_multiplier   if no unit is found in str, use this multiplier. default is MiB\n+ * @returns                        optional size_t bytes from str",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726156417",
      "id" : 726156417,
      "line" : 315,
      "node_id" : "PRRC_kwDOABII584rSESB",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 315,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/util/strencodings.h",
      "position" : 11,
      "pull_request_review_id" : 776287182,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T14:12:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726156417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726267773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726267773"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are people going to fight over factor 1000 versus 1024 or has this been settled?",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T16:06:54Z",
      "diff_hunk" : "@@ -526,3 +526,33 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<size_t> ParseByteUnits(const std::string& str, const size_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    size_t nBytes{0};\n+\n+    v.pop_back();\n+    switch (ToLower(unit)) {\n+        case 'k':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 10} : std::nullopt;\n+            break;\n+        case 'm':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 20} : std::nullopt;\n+            break;\n+        case 'g':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 30} : std::nullopt;\n+            break;\n+        case 't':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 40} : std::nullopt;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726267773",
      "id" : 726267773,
      "line" : 551,
      "node_id" : "PRRC_kwDOABII584rSfd9",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 551,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 26,
      "pull_request_review_id" : 776457012,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 1,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726267773/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T16:06:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726267773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726276583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726276583"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'd support both, lowercase for 1000-based, uppercase for 1024-based? That hopefully avoids most controversy.\r\n\r\nAlso, this looks like it could easily overflow.",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T16:14:01Z",
      "diff_hunk" : "@@ -526,3 +526,33 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<size_t> ParseByteUnits(const std::string& str, const size_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    size_t nBytes{0};\n+\n+    v.pop_back();\n+    switch (ToLower(unit)) {\n+        case 'k':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 10} : std::nullopt;\n+            break;\n+        case 'm':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 20} : std::nullopt;\n+            break;\n+        case 'g':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 30} : std::nullopt;\n+            break;\n+        case 't':\n+            return ParseUInt64(v, &nBytes) ? std::optional<size_t>{nBytes << 40} : std::nullopt;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726276583",
      "id" : 726276583,
      "in_reply_to_id" : 726267773,
      "line" : 551,
      "node_id" : "PRRC_kwDOABII584rShnn",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 551,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 26,
      "pull_request_review_id" : 776463542,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726276583/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T16:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726276583",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726300839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726300839"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The current/master branch implementation is silent,\r\nI agree we should do some type of error  handling, should we:\r\n\r\n1. Return `InitError()`\r\n2. Log a warning\r\n\r\nIf we throw an InitError, some people won't notice it, as this part of the code comes after level DB initialize. The error is shown like ~45-60 seconds after start up. (I know I didn't notice it myself) \r\n\r\nryanofsky has other  PR(s) that seems to address this by refactoring ArgsManager  #22766 / #16545 . Perhaps wait for that. \r\n",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T16:26:33Z",
      "diff_hunk" : "@@ -1749,7 +1750,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    connOptions.nMaxOutboundLimit = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", \"\")).value_or(DEFAULT_MAX_UPLOAD_TARGET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726300839",
      "id" : 726300839,
      "in_reply_to_id" : 726154590,
      "line" : 1753,
      "node_id" : "PRRC_kwDOABII584rSnin",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 1753,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 776474529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726300839/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T16:26:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726300839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726653001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726653001"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> ryanofsky has other PR(s) that seems to address this by refactoring ArgsManager #22766 / #16545 . Perhaps wait for that.\r\n\r\nI'd definitely suggest fatal, explicit InitError for any bad or ambiguous values provided. ArgsManager class and PRs are a mess, I'd stay far away and keep this separate!\r\n\r\nEDIT: More concretely, I'd suggest changing DEFAULT_MAX_UPLOAD_TARGET to a string and writing something like:\r\n\r\n```c++\r\nconst std::string DEFAULT_MAX_UPLOAD_TARGET = \"0M\";\r\n...\r\nauto max_upload_str = args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\r\nauto max_upload = ParseByteUnits(max_upload_str);\r\nif (!max_upload) {\r\n    return InitError(strprintf(\"Bad -maxuploadtarget %s\", max_upload_str));\r\n}\r\nconnOptions.nMaxOutboundLimit = *max_upload;\r\n```",
      "commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "created_at" : "2021-10-11T23:46:02Z",
      "diff_hunk" : "@@ -1749,7 +1750,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    connOptions.nMaxOutboundLimit = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", \"\")).value_or(DEFAULT_MAX_UPLOAD_TARGET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r726653001",
      "id" : 726653001,
      "in_reply_to_id" : 726154590,
      "line" : 1753,
      "node_id" : "PRRC_kwDOABII584rT9hJ",
      "original_commit_id" : "3f900a69462d786c6485952049b03b47612cae35",
      "original_line" : 1753,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 776774332,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726653001/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-11T23:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726653001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated with \r\n* Replacing `size_t` in favor of `uint64_t` (windows/mac didn't play nice with size_t)\r\n* Adding `InitError` on parsing failure\r\n* Simplified case statement in ParseByteUnit \r\n* 1000 for lowercase 1024 base for UPPERCASE\r\n\r\nWhat I need help with is overflows. I use `__builtin_mul_overflow` but there must be a better/easier solution. \r\n",
      "created_at" : "2021-10-13T14:58:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#issuecomment-942392397",
      "id" : 942392397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23249",
      "node_id" : "IC_kwDOABII5844K8RN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/942392397/reactions"
      },
      "updated_at" : "2021-10-13T14:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/942392397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23128](https://github.com/bitcoin/bitcoin/pull/23128) (doc: Remove TODO 'exclude peers with download permission' by dougEfresh)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-10-14T20:37:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#issuecomment-943711933",
      "id" : 943711933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23249",
      "node_id" : "IC_kwDOABII5844P-a9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/943711933/reactions"
      },
      "updated_at" : "2021-10-14T20:37:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/943711933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r729614853"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729614853"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could use `MultiplicationOverflow` instead if it is moved out from `src/test/fuzz/util.h` and proper unit tests are added fot it?",
      "commit_id" : "7d96a50d568a677b2a44d66559cc38d5ad19542e",
      "created_at" : "2021-10-15T08:13:53Z",
      "diff_hunk" : "@@ -526,3 +527,60 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {\n+        // failed to parse v and str\n+        return std::nullopt;\n+    }\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000; // force compiler to see uint64_t\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // use default_multipiler\n+            break;\n+    }\n+\n+    int64_t total{0};\n+#if defined(HAVE_BUILTIN_MUL_OVERFLOW)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r729614853",
      "id" : 729614853,
      "line" : 578,
      "node_id" : "PRRC_kwDOABII584rfQoF",
      "original_commit_id" : "7d96a50d568a677b2a44d66559cc38d5ad19542e",
      "original_line" : 578,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 60,
      "pull_request_review_id" : 780576866,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729614853/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-15T08:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729614853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r729967218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729967218"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since I'm checking an unsigned int, I  used\r\n\r\n```\r\nnBytes > std::numeric_limits<uint64_t>::max() / multiplier\r\n```\r\nIf there is interest, I can create another PR with `MultiplicationOverflow` out of `src/test/fuzz/util.h`\r\n",
      "commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "created_at" : "2021-10-15T16:32:13Z",
      "diff_hunk" : "@@ -526,3 +527,60 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {\n+        // failed to parse v and str\n+        return std::nullopt;\n+    }\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000; // force compiler to see uint64_t\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // use default_multipiler\n+            break;\n+    }\n+\n+    int64_t total{0};\n+#if defined(HAVE_BUILTIN_MUL_OVERFLOW)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r729967218",
      "id" : 729967218,
      "in_reply_to_id" : 729614853,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584rgmpy",
      "original_commit_id" : "7d96a50d568a677b2a44d66559cc38d5ad19542e",
      "original_line" : 578,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : null,
      "pull_request_review_id" : 781035291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729967218/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-15T16:32:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/729967218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730114025"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114025"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think parsing fails for number > 9 without unit?",
      "commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "created_at" : "2021-10-15T21:00:16Z",
      "diff_hunk" : "@@ -526,3 +527,56 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730114025",
      "id" : 730114025,
      "line" : 542,
      "node_id" : "PRRC_kwDOABII584rhKfp",
      "original_commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "original_line" : 542,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 24,
      "pull_request_review_id" : 781232097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114025/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-15T21:03:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114025",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730114369"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114369"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be digit?",
      "commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "created_at" : "2021-10-15T21:00:59Z",
      "diff_hunk" : "@@ -526,3 +527,56 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {\n+        // failed to parse v and str\n+        return std::nullopt;\n+    }\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000; // force compiler to see uint64_t\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // use default_multipiler",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730114369",
      "id" : 730114369,
      "line" : 573,
      "node_id" : "PRRC_kwDOABII584rhKlB",
      "original_commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "original_line" : 573,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 55,
      "pull_request_review_id" : 781232097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114369/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-15T21:03:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730114369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730248086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248086"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added this test case: \r\n```\r\nBOOST_CHECK_EQUAL(ParseByteUnits(\"10\").value_or(0), 10ULL << 20UL);\r\n```",
      "commit_id" : "8b16cb5bfdc61d5cb71b5745b64a0f2389124d7d",
      "created_at" : "2021-10-16T11:04:28Z",
      "diff_hunk" : "@@ -526,3 +527,56 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730248086",
      "id" : 730248086,
      "in_reply_to_id" : 730114025,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584rhrOW",
      "original_commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "original_line" : 542,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : null,
      "pull_request_review_id" : 781350677,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248086/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-16T11:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730248090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248090"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated to parse the original str in the `default` case",
      "commit_id" : "8b16cb5bfdc61d5cb71b5745b64a0f2389124d7d",
      "created_at" : "2021-10-16T11:04:31Z",
      "diff_hunk" : "@@ -526,3 +527,56 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty())\n+        return std::nullopt;\n+\n+    auto v = str;\n+    auto unit = v.back();\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+\n+    v.pop_back();\n+    if (!(ParseUInt64(v, &nBytes) || ParseUInt64(str, &nBytes))) {\n+        // failed to parse v and str\n+        return std::nullopt;\n+    }\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000; // force compiler to see uint64_t\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // use default_multipiler",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r730248090",
      "id" : 730248090,
      "in_reply_to_id" : 730114369,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584rhrOa",
      "original_commit_id" : "0d786a10947bffb7fef84b2700e9d5cb30376878",
      "original_line" : 573,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : null,
      "pull_request_review_id" : 781350685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248090/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-10-16T11:04:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/730248090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r740025579"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740025579"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I want to point out to reviewers that this changes start up behavior. Previously,  `-maxuploadtarget`  would silently fail and use DEFAULT_MAX_UPLOAD_TARGET. \r\nThis change will throw an error upon parse failure, but only  after 30-50 seconds after start-up",
      "commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "created_at" : "2021-11-01T08:13:28Z",
      "diff_hunk" : "@@ -1749,7 +1750,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    auto opt_max_upload = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET));\n+    if (!opt_max_upload) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r740025579",
      "id" : 740025579,
      "line" : 1754,
      "node_id" : "PRRC_kwDOABII584sG-Tr",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 1754,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 793950175,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740025579/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-01T08:13:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740025579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741252331"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741252331"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/23249#discussion_r740025579\r\n\r\n>This change will throw an error upon parse failure, but only after 30-50 seconds after start-up\r\n\r\nI'm not seeing this take 30-50 seconds, just a second or two. Still it would be a good to provide faster checking, and just moving the parsing call up a little higher in the `AppInitMain` function seems to give good results. I tried:\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 517ad2342ff..513cc24faeb 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1114,6 +1114,12 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n {\r\n     const ArgsManager& args = *Assert(node.args);\r\n     const CChainParams& chainparams = Params();\r\n+\r\n+    auto opt_max_upload = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET));\r\n+    if (!opt_max_upload) {\r\n+        return InitError(strprintf(_(\"Unable to parse -maxuploadtarget: '%s' (possible integer overflow?)\"), args.GetArg(\"-maxuploadtarget\",\"\")));\r\n+    }\r\n+\r\n     // ********************************************************* Step 4a: application initialization\r\n     if (!CreatePidFile(args)) {\r\n         // Detailed error printed inside CreatePidFile().\r\n@@ -1749,11 +1755,6 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     connOptions.nSendBufferMaxSize = 1000 * args.GetIntArg(\"-maxsendbuffer\", DEFAULT_MAXSENDBUFFER);\r\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\r\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\r\n-\r\n-    auto opt_max_upload = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET));\r\n-    if (!opt_max_upload) {\r\n-        return InitError(strprintf(_(\"Unable to parse -maxuploadtarget: '%s' (possible integer overflow?)\"), args.GetArg(\"-maxuploadtarget\",\"\")));\r\n-    }\r\n     connOptions.nMaxOutboundLimit = *opt_max_upload;;\r\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\r\n \r\n\r\n```",
      "commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "created_at" : "2021-11-02T16:12:04Z",
      "diff_hunk" : "@@ -1749,7 +1750,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    auto opt_max_upload = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET));\n+    if (!opt_max_upload) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741252331",
      "id" : 741252331,
      "in_reply_to_id" : 740025579,
      "line" : 1754,
      "node_id" : "PRRC_kwDOABII584sLpzr",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 1754,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 23,
      "pull_request_review_id" : 795630358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741252331/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T18:47:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741252331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741356193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741356193"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: ParseByteUnits - Parse a string with suffix unit [k|K] [m|M] [g|G] [t|T]\" (c5d4a59cf91f54a2027851b32cf83cfcb04cd210)\r\n\r\nThere's repetition and unneeded variables in this function. Also `nBytes` holds the number before multiplication instead of the actual number of bytes, and the name doesn't follow current coding convention. Would suggest an overall cleanup here like:\r\n\r\n```diff\r\ndiff --git a/src/util/strencodings.cpp b/src/util/strencodings.cpp\r\nindex c490cc7f3e1..0075e69c5e7 100644\r\n--- a/src/util/strencodings.cpp\r\n+++ b/src/util/strencodings.cpp\r\n@@ -530,19 +530,8 @@ std::string HexStr(const Span<const uint8_t> s)\r\n \r\n std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\r\n {\r\n-    if (str.empty()) {\r\n-        return std::nullopt;\r\n-    }\r\n-\r\n-    using opt_uint64 = std::optional<uint64_t>;\r\n-\r\n-    uint64_t nBytes{0};\r\n-    uint64_t multiplier{default_multiplier};\r\n-    auto unit = str.back();\r\n-    auto v = str;\r\n-\r\n-    v.pop_back();\r\n-\r\n+    auto multiplier = default_multiplier ? default_multiplier : 1;\r\n+    char unit = str.empty() ? 0 : str.back();\r\n     switch (unit) {\r\n         case 'k':\r\n             multiplier = 1000;\r\n@@ -569,21 +558,13 @@ std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t de\r\n             multiplier = 1ULL << 40;\r\n             break;\r\n         default:\r\n-            // unit should be digit, parse original str\r\n-            if (!ParseUInt64(str, &nBytes)) {\r\n-                return std::nullopt;\r\n-            }\r\n-            //check overflow and use default_multiplier\r\n-            return default_multiplier == 0 ? opt_uint64{nBytes} : nBytes > std::numeric_limits<uint64_t>::max() / default_multiplier ? std::nullopt : opt_uint64{nBytes * default_multiplier};\r\n+            unit = 0;\r\n+            break;\r\n     }\r\n-\r\n-    if (!ParseUInt64(v, &nBytes)) {\r\n+    uint64_t num;\r\n+    if (!ParseUInt64(unit ? str.substr(0, str.size()-1) : str, &num) ||\r\n+        num > std::numeric_limits<uint64_t>::max() / multiplier) {\r\n         return std::nullopt;\r\n     }\r\n-\r\n-    if (multiplier == 0) {\r\n-        return opt_uint64{nBytes};\r\n-    }\r\n-    // check overflow\r\n-    return nBytes > std::numeric_limits<uint64_t>::max() / multiplier ? std::nullopt : opt_uint64{nBytes * multiplier};\r\n+    return num * multiplier;\r\n }\r\n\r\n```",
      "commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "created_at" : "2021-11-02T18:19:19Z",
      "diff_hunk" : "@@ -526,3 +527,63 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty()) {\n+        return std::nullopt;\n+    }\n+\n+    using opt_uint64 = std::optional<uint64_t>;\n+\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+    auto unit = str.back();\n+    auto v = str;\n+\n+    v.pop_back();\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000;\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // unit should be digit, parse original str\n+            if (!ParseUInt64(str, &nBytes)) {\n+                return std::nullopt;\n+            }\n+            //check overflow and use default_multiplier\n+            return default_multiplier == 0 ? opt_uint64{nBytes} : nBytes > std::numeric_limits<uint64_t>::max() / default_multiplier ? std::nullopt : opt_uint64{nBytes * default_multiplier};\n+    }\n+\n+    if (!ParseUInt64(v, &nBytes)) {\n+        return std::nullopt;\n+    }\n+\n+    if (multiplier == 0) {\n+        return opt_uint64{nBytes};\n+    }\n+    // check overflow\n+    return nBytes > std::numeric_limits<uint64_t>::max() / multiplier ? std::nullopt : opt_uint64{nBytes * multiplier};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741356193",
      "id" : 741356193,
      "line" : 588,
      "node_id" : "PRRC_kwDOABII584sMDKh",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 588,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 70,
      "pull_request_review_id" : 795630358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741356193/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T18:47:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741356193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741361711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741361711"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: ParseByteUnits - Parse a string with suffix unit [k|K] [m|M] [g|G] [t|T]\" (c5d4a59cf91f54a2027851b32cf83cfcb04cd210)\r\n\r\nWould be good to check behavior with 0 multiplier to make sure it doesn't accidentally change in the future.",
      "commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "created_at" : "2021-11-02T18:27:19Z",
      "diff_hunk" : "@@ -2456,4 +2456,45 @@ BOOST_AUTO_TEST_CASE(remove_prefix)\n     BOOST_CHECK_EQUAL(RemovePrefix(\"\", \"\"), \"\");\n }\n \n+BOOST_AUTO_TEST_CASE(util_ParseByteUnits)\n+{\n+    // default multiplier is MiB\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1\").value_or(0), 1ULL << 20UL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"10\").value_or(0), 10ULL << 20UL);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1k\").value_or(0), 1000ULL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1K\").value_or(0), 1ULL << 10);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2m\").value_or(0), 2ULL * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2M\").value_or(0), 2ULL << 20);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3g\").value_or(0), 3ULL * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3G\").value_or(0), 3ULL << 30);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4t\").value_or(0), 4ULL * 1000 * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4T\").value_or(0), 4ULL << 40);\n+\n+    // override default multiplier\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"5\", 1ULL << 10).value_or(0), 5ULL << 10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741361711",
      "id" : 741361711,
      "line" : 2478,
      "node_id" : "PRRC_kwDOABII584sMEgv",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 2478,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/util_tests.cpp",
      "position" : 23,
      "pull_request_review_id" : 795630358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741361711/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T18:47:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741361711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741364354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741364354"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: ParseByteUnits - Parse a string with suffix unit [k|K] [m|M] [g|G] [t|T]\" (c5d4a59cf91f54a2027851b32cf83cfcb04cd210)\r\n\r\nMinor inconsistency here where this case is using `.value_or(1)` and cases above are using `.value_or(0)`. I think it would best if all of these cases were consistent and better if they were using `.value()` instead of `.value_or()`",
      "commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "created_at" : "2021-11-02T18:31:02Z",
      "diff_hunk" : "@@ -2456,4 +2456,45 @@ BOOST_AUTO_TEST_CASE(remove_prefix)\n     BOOST_CHECK_EQUAL(RemovePrefix(\"\", \"\"), \"\");\n }\n \n+BOOST_AUTO_TEST_CASE(util_ParseByteUnits)\n+{\n+    // default multiplier is MiB\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1\").value_or(0), 1ULL << 20UL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"10\").value_or(0), 10ULL << 20UL);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1k\").value_or(0), 1000ULL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1K\").value_or(0), 1ULL << 10);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2m\").value_or(0), 2ULL * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2M\").value_or(0), 2ULL << 20);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3g\").value_or(0), 3ULL * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3G\").value_or(0), 3ULL << 30);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4t\").value_or(0), 4ULL * 1000 * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4T\").value_or(0), 4ULL << 40);\n+\n+    // override default multiplier\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"5\", 1ULL << 10).value_or(0), 5ULL << 10);\n+\n+    // NaN\n+    BOOST_CHECK(!ParseByteUnits(\"\").has_value());\n+    BOOST_CHECK(!ParseByteUnits(\"foo\").has_value());\n+\n+    // whitespace\n+    BOOST_CHECK(!ParseByteUnits(\"123m \").has_value());\n+\n+    // be positive\n+    BOOST_CHECK(!ParseByteUnits(\"-123m\").has_value());\n+\n+    // zero padding\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"020M\").value_or(1), 20ULL << 20);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741364354",
      "id" : 741364354,
      "line" : 2491,
      "node_id" : "PRRC_kwDOABII584sMFKC",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 2491,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/test/util_tests.cpp",
      "position" : 36,
      "pull_request_review_id" : 795630358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741364354/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T18:47:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741364354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498394"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498394"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Moved",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-02T22:13:16Z",
      "diff_hunk" : "@@ -1749,7 +1750,11 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n \n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    auto opt_max_upload = ParseByteUnits(args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET));\n+    if (!opt_max_upload) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498394",
      "id" : 741498394,
      "in_reply_to_id" : 740025579,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sMl4a",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 1754,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 795962132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498394/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T22:13:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498394",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498659"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Great suggestion, code now looks cleaner. ",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-02T22:13:46Z",
      "diff_hunk" : "@@ -526,3 +527,63 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    if (str.empty()) {\n+        return std::nullopt;\n+    }\n+\n+    using opt_uint64 = std::optional<uint64_t>;\n+\n+    uint64_t nBytes{0};\n+    uint64_t multiplier{default_multiplier};\n+    auto unit = str.back();\n+    auto v = str;\n+\n+    v.pop_back();\n+\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000;\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            // unit should be digit, parse original str\n+            if (!ParseUInt64(str, &nBytes)) {\n+                return std::nullopt;\n+            }\n+            //check overflow and use default_multiplier\n+            return default_multiplier == 0 ? opt_uint64{nBytes} : nBytes > std::numeric_limits<uint64_t>::max() / default_multiplier ? std::nullopt : opt_uint64{nBytes * default_multiplier};\n+    }\n+\n+    if (!ParseUInt64(v, &nBytes)) {\n+        return std::nullopt;\n+    }\n+\n+    if (multiplier == 0) {\n+        return opt_uint64{nBytes};\n+    }\n+    // check overflow\n+    return nBytes > std::numeric_limits<uint64_t>::max() / multiplier ? std::nullopt : opt_uint64{nBytes * multiplier};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498659",
      "id" : 741498659,
      "in_reply_to_id" : 741356193,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sMl8j",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 588,
      "original_position" : 70,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : null,
      "pull_request_review_id" : 795962463,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498659/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T22:13:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498659",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498805"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Added `0` multiplier test",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-02T22:14:05Z",
      "diff_hunk" : "@@ -2456,4 +2456,45 @@ BOOST_AUTO_TEST_CASE(remove_prefix)\n     BOOST_CHECK_EQUAL(RemovePrefix(\"\", \"\"), \"\");\n }\n \n+BOOST_AUTO_TEST_CASE(util_ParseByteUnits)\n+{\n+    // default multiplier is MiB\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1\").value_or(0), 1ULL << 20UL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"10\").value_or(0), 10ULL << 20UL);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1k\").value_or(0), 1000ULL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1K\").value_or(0), 1ULL << 10);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2m\").value_or(0), 2ULL * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2M\").value_or(0), 2ULL << 20);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3g\").value_or(0), 3ULL * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3G\").value_or(0), 3ULL << 30);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4t\").value_or(0), 4ULL * 1000 * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4T\").value_or(0), 4ULL << 40);\n+\n+    // override default multiplier\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"5\", 1ULL << 10).value_or(0), 5ULL << 10);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498805",
      "id" : 741498805,
      "in_reply_to_id" : 741361711,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sMl-1",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 2478,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 795962669,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498805/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T22:14:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498927"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agreed",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-02T22:14:20Z",
      "diff_hunk" : "@@ -2456,4 +2456,45 @@ BOOST_AUTO_TEST_CASE(remove_prefix)\n     BOOST_CHECK_EQUAL(RemovePrefix(\"\", \"\"), \"\");\n }\n \n+BOOST_AUTO_TEST_CASE(util_ParseByteUnits)\n+{\n+    // default multiplier is MiB\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1\").value_or(0), 1ULL << 20UL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"10\").value_or(0), 10ULL << 20UL);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1k\").value_or(0), 1000ULL);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"1K\").value_or(0), 1ULL << 10);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2m\").value_or(0), 2ULL * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"2M\").value_or(0), 2ULL << 20);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3g\").value_or(0), 3ULL * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"3G\").value_or(0), 3ULL << 30);\n+\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4t\").value_or(0), 4ULL * 1000 * 1000 * 1000 * 1000);\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"4T\").value_or(0), 4ULL << 40);\n+\n+    // override default multiplier\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"5\", 1ULL << 10).value_or(0), 5ULL << 10);\n+\n+    // NaN\n+    BOOST_CHECK(!ParseByteUnits(\"\").has_value());\n+    BOOST_CHECK(!ParseByteUnits(\"foo\").has_value());\n+\n+    // whitespace\n+    BOOST_CHECK(!ParseByteUnits(\"123m \").has_value());\n+\n+    // be positive\n+    BOOST_CHECK(!ParseByteUnits(\"-123m\").has_value());\n+\n+    // zero padding\n+    BOOST_CHECK_EQUAL(ParseByteUnits(\"020M\").value_or(1), 20ULL << 20);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r741498927",
      "id" : 741498927,
      "in_reply_to_id" : 741364354,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584sMmAv",
      "original_commit_id" : "c5d4a59cf91f54a2027851b32cf83cfcb04cd210",
      "original_line" : 2491,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 795962832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498927/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-02T22:14:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741498927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It might be good to add a release note in the `doc/` directory mentioning the new argument verification, since in theory it could make a configuration that used to work previously now cause an error on startup.\r\n\r\nAdded to release docs\r\n\r\n> It would also be good to mention new behavior in the PR description, since current description is a little ambiguous about whether this is only adding a utility function or changing behavior.\r\n\r\nUpdated PR description. \r\n\r\nThanks for feedback @ryanofsky \r\n",
      "created_at" : "2021-11-02T22:15:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#issuecomment-958259727",
      "id" : 958259727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23249",
      "node_id" : "IC_kwDOABII5845HeIP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/958259727/reactions"
      },
      "updated_at" : "2021-11-02T22:15:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/958259727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/976425?v=4",
         "events_url" : "https://api.github.com/users/dougEfresh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dougEfresh/followers",
         "following_url" : "https://api.github.com/users/dougEfresh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dougEfresh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dougEfresh",
         "id" : 976425,
         "login" : "dougEfresh",
         "node_id" : "MDQ6VXNlcjk3NjQyNQ==",
         "organizations_url" : "https://api.github.com/users/dougEfresh/orgs",
         "received_events_url" : "https://api.github.com/users/dougEfresh/received_events",
         "repos_url" : "https://api.github.com/users/dougEfresh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dougEfresh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dougEfresh"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745413873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745413873"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: double `;;` at the end",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-09T09:05:42Z",
      "diff_hunk" : "@@ -1748,8 +1755,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.nSendBufferMaxSize = 1000 * args.GetIntArg(\"-maxsendbuffer\", DEFAULT_MAXSENDBUFFER);\n     connOptions.nReceiveFloodSize = 1000 * args.GetIntArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n     connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n-\n-    connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetIntArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n+    connOptions.nMaxOutboundLimit = *opt_max_upload;;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745413873",
      "id" : 745413873,
      "line" : 1758,
      "node_id" : "PRRC_kwDOABII584sbhzx",
      "original_commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "original_line" : 1758,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 36,
      "pull_request_review_id" : 801009267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745413873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T09:39:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745413873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745423040"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745423040"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe add a test for unknown suffix, e.g. `123X`.",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-09T09:17:15Z",
      "diff_hunk" : "@@ -2456,4 +2456,49 @@ BOOST_AUTO_TEST_CASE(remove_prefix)\n     BOOST_CHECK_EQUAL(RemovePrefix(\"\", \"\"), \"\");\n }\n \n+BOOST_AUTO_TEST_CASE(util_ParseByteUnits)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745423040",
      "id" : 745423040,
      "line" : 2459,
      "node_id" : "PRRC_kwDOABII584sbkDA",
      "original_commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "original_line" : 2459,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/util_tests.cpp",
      "position" : 4,
      "pull_request_review_id" : 801009267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745423040/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T09:39:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745423040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745424641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745424641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: missing spaces around `-`.",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-09T09:19:16Z",
      "diff_hunk" : "@@ -526,3 +527,45 @@ std::string HexStr(const Span<const uint8_t> s)\n     assert(it == rv.end());\n     return rv;\n }\n+\n+std::optional<uint64_t> ParseByteUnits(const std::string& str, const uint64_t default_multiplier)\n+{\n+    auto multiplier = default_multiplier ? default_multiplier : 1;\n+    char unit = str.empty() ? 0 : str.back();\n+    switch (unit) {\n+        case 'k':\n+            multiplier = 1000;\n+            break;\n+        case 'K':\n+            multiplier = 1024;\n+            break;\n+        case 'm':\n+            multiplier = 1000 * 1000;\n+            break;\n+        case 'M':\n+            multiplier = 1ULL << 20;\n+            break;\n+        case 'g':\n+            multiplier = 1000ULL * 1000 * 1000;\n+            break;\n+        case 'G':\n+            multiplier = 1ULL << 30;\n+            break;\n+        case 't':\n+            multiplier = 1000ULL * 1000 * 1000 * 1000;\n+            break;\n+        case 'T':\n+            multiplier = 1ULL << 40;\n+            break;\n+        default:\n+            unit = 0;\n+            break;\n+    }\n+\n+    uint64_t num;\n+    if (!ParseUInt64(unit ? str.substr(0, str.size()-1) : str, &num) ||",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745424641",
      "id" : 745424641,
      "line" : 566,
      "node_id" : "PRRC_kwDOABII584sbkcB",
      "original_commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "original_line" : 566,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/util/strencodings.cpp",
      "position" : 48,
      "pull_request_review_id" : 801009267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745424641/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T09:39:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745424641",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745441313"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745441313"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I find this text confusing:\r\n\r\n> Optional suffix units [m|M] MiB, [g|G] GiB, [t|T] TiB. Lowercase is 1000 base while uppercase is 1024 base\r\n\r\nMaybe:\r\n\r\n> Optional suffix units [m|M|g|G|t|T]. Lowercase is 1000 base while uppercase is 1024 base",
      "commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "created_at" : "2021-11-09T09:38:58Z",
      "diff_hunk" : "@@ -435,7 +436,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-maxreceivebuffer=<n>\", strprintf(\"Maximum per-connection receive buffer, <n>*1000 bytes (default: %u)\", DEFAULT_MAXRECEIVEBUFFER), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxsendbuffer=<n>\", strprintf(\"Maximum per-connection send buffer, <n>*1000 bytes (default: %u)\", DEFAULT_MAXSENDBUFFER), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by peers forward or backward by this amount. (default: %u seconds)\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB per 24h). Limit does not apply to peers with 'download' permission. 0 = no limit (default: %d)\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB, GiB or TiB per 24h). Limit does not apply to peers with 'download' permission or blocks created within past week. 0 = no limit (default: %s). Optional suffix units [m|M] MiB, [g|G] GiB, [t|T] TiB. Lowercase is 1000 base while uppercase is 1024 base (default).\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23249#discussion_r745441313",
      "id" : 745441313,
      "line" : 439,
      "node_id" : "PRRC_kwDOABII584sbogh",
      "original_commit_id" : "f1f8a772b0daf8cc0c40f0fc54e82618ad242ddd",
      "original_line" : 439,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 801009267,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23249",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745441313/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-11-09T09:39:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/745441313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
