[
   {
      "body" : "Overall transaction handling in db.cpp is terrible.  BDB has good transaction support, but it is only used in one or two places.",
      "created_at" : "2011-05-29T21:32:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1258562",
      "id" : 1258562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-05-29T21:32:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1258562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "I looked into this a bit: I think disabling fsync for the address database is the way to go, but since we need to leave it enabled for the rest (?) of the databases, that will require creating a separate BDB [DbEnv](http://download.oracle.com/docs/cd/E17076_02/html/api_reference/CXX/envcreate.html).",
      "created_at" : "2011-05-29T23:35:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1259092",
      "id" : 1259092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-05-29T23:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/46740?v=3",
         "events_url" : "https://api.github.com/users/stuhood/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stuhood/followers",
         "following_url" : "https://api.github.com/users/stuhood/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stuhood/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stuhood",
         "id" : 46740,
         "login" : "stuhood",
         "organizations_url" : "https://api.github.com/users/stuhood/orgs",
         "received_events_url" : "https://api.github.com/users/stuhood/received_events",
         "repos_url" : "https://api.github.com/users/stuhood/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stuhood/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stuhood/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stuhood"
      }
   },
   {
      "body" : "This appears to be at least an order of magnitude worse in the OSX build than in the Linux build. Might OSX be handling the fsync'ing differently?",
      "created_at" : "2011-06-17T07:35:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1386562",
      "id" : 1386562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-06-17T07:35:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1386562",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/46740?v=3",
         "events_url" : "https://api.github.com/users/stuhood/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stuhood/followers",
         "following_url" : "https://api.github.com/users/stuhood/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stuhood/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stuhood",
         "id" : 46740,
         "login" : "stuhood",
         "organizations_url" : "https://api.github.com/users/stuhood/orgs",
         "received_events_url" : "https://api.github.com/users/stuhood/received_events",
         "repos_url" : "https://api.github.com/users/stuhood/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stuhood/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stuhood/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stuhood"
      }
   },
   {
      "body" : "Yeah, it's absolutely abysmal on osx.",
      "created_at" : "2011-06-18T12:56:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1393242",
      "id" : 1393242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-06-18T12:56:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1393242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/408977?v=3",
         "events_url" : "https://api.github.com/users/sneak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sneak/followers",
         "following_url" : "https://api.github.com/users/sneak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sneak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sneak",
         "id" : 408977,
         "login" : "sneak",
         "organizations_url" : "https://api.github.com/users/sneak/orgs",
         "received_events_url" : "https://api.github.com/users/sneak/received_events",
         "repos_url" : "https://api.github.com/users/sneak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sneak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sneak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sneak"
      }
   },
   {
      "body" : "I didn't really notice since the macs I run it on all have SSDs. But yes, it is demonstrably worse on OS X.",
      "created_at" : "2011-06-19T02:15:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1395233",
      "id" : 1395233,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-06-19T02:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1395233",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48147?v=3",
         "events_url" : "https://api.github.com/users/jrmithdobbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jrmithdobbs/followers",
         "following_url" : "https://api.github.com/users/jrmithdobbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jrmithdobbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jrmithdobbs",
         "id" : 48147,
         "login" : "jrmithdobbs",
         "organizations_url" : "https://api.github.com/users/jrmithdobbs/orgs",
         "received_events_url" : "https://api.github.com/users/jrmithdobbs/received_events",
         "repos_url" : "https://api.github.com/users/jrmithdobbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jrmithdobbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jrmithdobbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jrmithdobbs"
      }
   },
   {
      "body" : "With a high-end Mac Pro (gobs of RAM, 2 quad-core CPUs) this issue makes Bitcoin essentially unusable in conjunction with other day-to-day use of the machine.  It causes the HD to click noisily all day (with brief pauses) and degrades performance of other applications - web browsing etc.  I keep Bitcoin terminated during the day when working and just run it at night.\r\n\r\nHow large is the address DB typically and is it expected to grow with network size? (mine is ~15MB).  If it remains of that order, perhaps an option to keep it in memory would be appropriate?\r\n\r\nI'm assuming the 'fsync' suggestion above involves modification of the code, but if there is any 'quick fix' available, that would be a useful temporary workaround for Mac users.  \r\n\r\nCheers (- everyones work is appreciated).\r\n",
      "created_at" : "2011-06-24T17:13:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1433733",
      "id" : 1433733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-06-24T17:13:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1433733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417058?v=3",
         "events_url" : "https://api.github.com/users/davidljung/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davidljung/followers",
         "following_url" : "https://api.github.com/users/davidljung/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davidljung/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davidljung",
         "id" : 417058,
         "login" : "davidljung",
         "organizations_url" : "https://api.github.com/users/davidljung/orgs",
         "received_events_url" : "https://api.github.com/users/davidljung/received_events",
         "repos_url" : "https://api.github.com/users/davidljung/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davidljung/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davidljung/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davidljung"
      }
   },
   {
      "body" : "You might try -noflushwallet, but that probably wouldnt work and could lead to the loss of data in the wallet or the corruption of the wallet if the bitcoin client crashes while it is writing to the wallet.",
      "created_at" : "2011-06-29T17:52:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1469020",
      "id" : 1469020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-06-29T17:52:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1469020",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Does every address need an fsync?  It seems that just fsyncing after key/wallet operations would be more than acceptable.  Can the address cache fsyncs be batched into blocks of 1000 or something?",
      "created_at" : "2011-07-07T21:52:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1526591",
      "id" : 1526591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-07-07T21:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1526591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/408977?v=3",
         "events_url" : "https://api.github.com/users/sneak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sneak/followers",
         "following_url" : "https://api.github.com/users/sneak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sneak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sneak",
         "id" : 408977,
         "login" : "sneak",
         "organizations_url" : "https://api.github.com/users/sneak/orgs",
         "received_events_url" : "https://api.github.com/users/sneak/received_events",
         "repos_url" : "https://api.github.com/users/sneak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sneak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sneak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sneak"
      }
   },
   {
      "body" : "With OS X adding addresses is *much* slower than with Linux: it takes a very long time until it starts fetching new blocks after startup.\r\nNote: I'm using an encrypted *.dmg for all Bitcoin data (inclusive debug.log), which could make things more worse.\r\n\r\nJust to confirm this as a serious problem (0.3.24-beta, OS X Lion): the difference between Linux and OS X is so big (with OS X it has taken >15min until fetching first block!), that something seems to be buggy.",
      "created_at" : "2011-08-03T00:27:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1714541",
      "id" : 1714541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-08-03T00:51:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1714541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/332468?v=3",
         "events_url" : "https://api.github.com/users/hartrock/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hartrock/followers",
         "following_url" : "https://api.github.com/users/hartrock/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hartrock/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hartrock",
         "id" : 332468,
         "login" : "hartrock",
         "organizations_url" : "https://api.github.com/users/hartrock/orgs",
         "received_events_url" : "https://api.github.com/users/hartrock/received_events",
         "repos_url" : "https://api.github.com/users/hartrock/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hartrock/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hartrock/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hartrock"
      }
   },
   {
      "body" : "Try with some revision that is more recent than 24271c542b9a0d6016badf5438fb7e5ff7961ace.\r\nThis patch reduces db commits when addresses are added.",
      "created_at" : "2011-08-10T14:34:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-1773052",
      "id" : 1773052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2011-08-12T10:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1773052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858993?v=3",
         "events_url" : "https://api.github.com/users/sgimenez/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sgimenez/followers",
         "following_url" : "https://api.github.com/users/sgimenez/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sgimenez/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sgimenez",
         "id" : 858993,
         "login" : "sgimenez",
         "organizations_url" : "https://api.github.com/users/sgimenez/orgs",
         "received_events_url" : "https://api.github.com/users/sgimenez/received_events",
         "repos_url" : "https://api.github.com/users/sgimenez/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sgimenez/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sgimenez/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sgimenez"
      }
   },
   {
      "body" : "Addrman (#787) fixes this completely, as it only writes addr.dat asynchonously.",
      "created_at" : "2012-02-19T19:15:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-4044303",
      "id" : 4044303,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2012-02-19T19:15:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4044303",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Addrman pulled.\r\n",
      "created_at" : "2012-04-04T19:26:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/258#issuecomment-4961056",
      "id" : 4961056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/258",
      "updated_at" : "2012-04-04T19:26:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4961056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
